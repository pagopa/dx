"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2722],{4718:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>c});var t=r(3309);const o={},i=t.createContext(o);function s(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),t.createElement(i.Provider,{value:n},e.children)}},9370:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>l,frontMatter:()=>s,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"conventions/infra-folder-structure","title":"Infrastructure Folder Structure","description":"Each GitHub repository should follow the same folder structure to hold","source":"@site/docs/conventions/infra-folder-structure.md","sourceDirName":"conventions","slug":"/conventions/infra-folder-structure","permalink":"/dx/pr-preview/pr-518/docs/conventions/infra-folder-structure","draft":false,"unlisted":false,"editUrl":"https://github.com/pagopa/dx/tree/main/website/docs/conventions/infra-folder-structure.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"sidebar_label":"Infrastructure Folder Structure"},"sidebar":"tutorialSidebar","previous":{"title":"Azure Naming Convention","permalink":"/dx/pr-preview/pr-518/docs/conventions/azure-naming-convention"},"next":{"title":"Naming Convention for npm Scripts","permalink":"/dx/pr-preview/pr-518/docs/conventions/npm-scripts"}}');var o=r(3881),i=r(4718);const s={sidebar_position:2,sidebar_label:"Infrastructure Folder Structure"},c="Infrastructure Folder Structure",a={},d=[{value:"Example",id:"example",level:2}];function u(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"infrastructure-folder-structure",children:"Infrastructure Folder Structure"})}),"\n",(0,o.jsx)(n.p,{children:"Each GitHub repository should follow the same folder structure to hold\ninfrastructure as code sources (Terraform HCL)."}),"\n",(0,o.jsxs)(n.p,{children:["Everything should be placed under an ",(0,o.jsx)(n.code,{children:"infra"})," folder at the root of the\nrepository. This folder should contain multiple Terraform configurations:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"identity"}),": This folder contains the Cloud Service Provider (CSP) Managed\nIdentities that are federated with GitHub. These identities are useful for\nletting GitHub Actions perform operations against CSP resources."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"repository"}),": This folder contains the settings for the current GitHub\nrepository, which are managed using Terraform."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"github-runner"}),": (Optional) This folder contains the definition to create a\nprivate GitHub runner, which can be used to perform operations against\nnetwork-isolated resources."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"resources"}),": This folder contains the actual definitions of resources orgnized\ninto modules and environments."]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["The configurations are specific to an environment and are located in the ",(0,o.jsx)(n.code,{children:"<env>"}),"\nsubfolder. Each configuration can be used for multiple CSP regions."]}),"\n",(0,o.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"infra/\n\u251c\u2500 identity/\n\u2502  \u251c\u2500 prod/\n\u2502  \u2502  \u251c\u2500 main.tf\n\u251c\u2500 github-runner/\n\u2502  \u251c\u2500 prod/\n\u2502  \u2502  \u251c\u2500 main.tf\n\u251c\u2500 repository/\n\u2502  \u251c\u2500 main.tf\n\u251c\u2500 resources/\n\u2502  \u251c\u2500 _modules/\n\u2502  \u2502  \u251c\u2500 functions/\n\u2502  \u2502  \u2502   \u251c\u2500 main.tf\n\u2502  \u2502  \u2502   \u251c\u2500 outputs.tf\n\u2502  \u2502  \u2502   \u251c\u2500 inputs.tf\n\u2502  \u2502  \u251c\u2500 resource-groups/\n\u2502  \u2502  \u2502   \u251c\u2500 main.tf\n\u2502  \u2502  \u2502   \u251c\u2500 outputs.tf\n\u2502  \u2502  \u2502   \u251c\u2500 inputs.tf\n\u2502  \u251c\u2500 dev/\n\u2502  \u2502  |  \u251c\u2500 main.tf\n\u2502  \u251c\u2500 prod/\n\u2502  \u2502  |  \u251c\u2500 main.tf\n"})})]})}function l(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(u,{...e})}):u(e)}}}]);