"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[750],{4718:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>a});var r=n(3309);const o={},i=r.createContext(o);function s(e){const t=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),r.createElement(i.Provider,{value:t},e.children)}},8403:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>c,frontMatter:()=>s,metadata:()=>r,toc:()=>d});var r=n(9024),o=n(3881),i=n(4718);const s={title:"Introducing the 'Azure GitHub Environment Bootstrap' Terraform Module to Enhance New Project Startup",description:"Boosting Brand New Repository Setup",slug:"devex-azure-bootstrap-0.1-alpha",hide_table_of_contents:!1,date:"2025-03-28T17:00",toc_min_heading_level:2,toc_max_heading_level:2},a="Introducing the 'Azure GitHub Environment Bootstrap' Terraform Module to Enhance New Project Startup",l={authorsImageUrls:[]},d=[{value:"Getting Started",id:"getting-started",level:2},{value:"Examples",id:"examples",level:3}];function h(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(t.p,{children:["The new Terraform module\n",(0,o.jsx)(t.a,{href:"https://github.com/pagopa/dx/blob/main/infra/modules/azure_github_environment_bootstrap",children:(0,o.jsx)(t.code,{children:"Azure GitHub Environment Bootstrap"})}),"\ndeveloped by the DevEx team, has finally left the beta status by reaching its\nfirst major version release!"]}),"\n",(0,o.jsx)(t.p,{children:"This module is useful for anybody that has just created a new repository and\nwants to focus quickly on their goals rather than spending hours in setting up\neverything around the new repository. The module focuses on projects which\nleverage Azure, GitHub, and a single environment (production). After applying\nthis module, the repository will have:"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["completed the setup needed to launch ",(0,o.jsx)(t.strong,{children:"GitHub Actions"})," workflows"]}),"\n",(0,o.jsxs)(t.li,{children:["a dedicated private ",(0,o.jsx)(t.strong,{children:"GitHub Runner"})," to connect to private Azure resources\nfrom GitHub pipelines"]}),"\n",(0,o.jsxs)(t.li,{children:["an Azure ",(0,o.jsx)(t.strong,{children:"resource group"})," to deploy resources generally contained in\n",(0,o.jsx)(t.code,{children:"infra/resources"})]}),"\n",(0,o.jsxs)(t.li,{children:["the ",(0,o.jsx)(t.strong,{children:"required permissions"})," to operate on domain resources"]}),"\n",(0,o.jsx)(t.li,{children:"a secure and smooth configuration"}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:"To accomplish the setup, the module provisions:"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["an Azure Container App Job to run workflows in a private ",(0,o.jsx)(t.strong,{children:"GitHub Runner"}),"\nintegrated with an Azure VNet"]}),"\n",(0,o.jsxs)(t.li,{children:["a federation between the GitHub repository and Azure user-assigned ",(0,o.jsx)(t.strong,{children:"managed\nidentities"})," to allow workflows to connect with Azure tenant"]}),"\n",(0,o.jsx)(t.li,{children:"the creation of a project-specific Azure resource group which will contain the\ninfrastructure of the entire repository as it will share the same lifecycle\nand IAM setup"}),"\n",(0,o.jsxs)(t.li,{children:["the IAM setup of both team and Azure user-assigned managed identities\nfollowing the ",(0,o.jsx)(t.a,{href:"/docs/infrastructure/azure/azure-iam",children:"latest DevEx framework"})]}),"\n",(0,o.jsx)(t.li,{children:"the GitHub repository settings according to the best practices found by the DX\nteam"}),"\n"]}),"\n",(0,o.jsxs)(t.p,{children:["As the ",(0,o.jsx)(t.code,{children:"Azure GitHub Environment Bootstrap"})," module is designed to support teams\nin new project development, it is particularly indicated for mono repositories\nwhich traditionally require more time to be properly prepared: in just a few\nminutes, the repository will be ready to be used."]}),"\n",(0,o.jsxs)(t.p,{children:["On the other hand, the new module may be a bit overwhelming for small\nrepositories, where you may have only one application. For this reason, the\nmodule\n",(0,o.jsx)(t.a,{href:"https://github.com/pagopa/dx/blob/main/infra/modules/azure_federated_identity_with_github",children:(0,o.jsx)(t.code,{children:"azure_federated_identity_with_github"})}),"\nis still maintained and available, and is suggested for those cases. However,\nplease note that this design is not advisable, and instead, the use of mono\nrepositories is recommended."]}),"\n",(0,o.jsx)(t.h2,{id:"getting-started",children:"Getting Started"}),"\n",(0,o.jsx)(t.p,{children:"We recommend to reference the module via the Terraform Registry, and pin the\nversion to the latest stable release:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-hcl",children:'module "repo" {\n  source  = "pagopa-dx/azure-github-environment-bootstrap/azurerm"\n  version = "~>1.0"\n}\n'})}),"\n",(0,o.jsxs)(t.p,{children:["Despite the ",(0,o.jsx)(t.code,{children:"Azure GitHub Environment Bootstrap"})," module requiring a lot of\ninputs, its usage remains easy. In fact, a lot of values are the same for\ndifferent projects under the same product's umbrella, and moreover are\nwell-known by our user base. The following data is requested:"]}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:"the Azure subscription and tenant IDs"}),"\n",(0,o.jsxs)(t.li,{children:["the IDs of team-specific Entra ID groups as expected by\n",(0,o.jsx)(t.a,{href:"/docs/infrastructure/azure/azure-iam",children:"DevEx IAM framework"})]}),"\n",(0,o.jsx)(t.li,{children:"the ID of an existing Azure Container App Environment"}),"\n",(0,o.jsx)(t.li,{children:"the details of the Storage Account holding the Terraform state file"}),"\n",(0,o.jsx)(t.li,{children:"the details of the current repository (name, description, topics, optionally\nreviewers, etc.)"}),"\n",(0,o.jsx)(t.li,{children:"the IDs of the product-shared cloud resources, if any (API Management, Private\nEndpoints, VNet, etc.)"}),"\n"]}),"\n",(0,o.jsxs)(t.p,{children:["More details about the usage can be found in the documentation, which is\navailable in the\n",(0,o.jsx)(t.a,{href:"https://registry.terraform.io/modules/pagopa-dx/azure-github-environment-bootstrap/azurerm/latest",children:"module entry in the Terraform Registry"}),"."]}),"\n",(0,o.jsx)(t.h3,{id:"examples",children:"Examples"}),"\n",(0,o.jsxs)(t.p,{children:["Explore these repositories, which have successfully adopted the\n",(0,o.jsx)(t.code,{children:"Azure GitHub Environment Bootstrap"})," module from its early stages:"]}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:(0,o.jsx)(t.a,{href:"https://github.com/pagopa/io-messages/tree/main/infra/repository",children:"IO Messages"})}),"\n",(0,o.jsx)(t.li,{children:(0,o.jsx)(t.a,{href:"https://github.com/pagopa/io-wallet/tree/main/infra/repository",children:"IO Wallet"})}),"\n",(0,o.jsx)(t.li,{children:(0,o.jsx)(t.a,{href:"https://github.com/pagopa/io-services-cms/tree/main/infra/repository",children:"IO Services CMS"})}),"\n"]})]})}function c(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},9024:e=>{e.exports=JSON.parse('{"permalink":"/dx/blog/devex-azure-bootstrap-0.1-alpha","editUrl":"https://github.com/pagopa/dx/tree/main/website/blog/003-azure-github-environment-bootstrap.mdx","source":"@site/blog/003-azure-github-environment-bootstrap.mdx","title":"Introducing the \'Azure GitHub Environment Bootstrap\' Terraform Module to Enhance New Project Startup","description":"Boosting Brand New Repository Setup","date":"2025-03-28T17:00:00.000Z","tags":[],"readingTime":2.735,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"Introducing the \'Azure GitHub Environment Bootstrap\' Terraform Module to Enhance New Project Startup","description":"Boosting Brand New Repository Setup","slug":"devex-azure-bootstrap-0.1-alpha","hide_table_of_contents":false,"date":"2025-03-28T17:00","toc_min_heading_level":2,"toc_max_heading_level":2},"unlisted":false,"nextItem":{"title":"Benchmark for Typescript Code Generators from OpenAPI","permalink":"/dx/blog/typescript-openapi-generators-0.1-alpha"}}')}}]);