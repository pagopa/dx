'use strict';var p3=require('util'),perf_hooks=require('perf_hooks'),d3=require('child_process'),fs$1=require('fs'),RE=require('process'),M3=require('os'),crypto=require('crypto'),Oo=require('path'),R4=require('zlib'),stream=require('stream'),zFe=require('http'),YFe=require('https');function _interopNamespace(e){if(e&&e.__esModule)return e;var n=Object.create(null);if(e){Object.keys(e).forEach(function(k){if(k!=='default'){var d=Object.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:true,get:function(){return e[k]}});}})}n.default=e;return Object.freeze(n)}var p3__namespace=/*#__PURE__*/_interopNamespace(p3);var d3__namespace=/*#__PURE__*/_interopNamespace(d3);var RE__namespace=/*#__PURE__*/_interopNamespace(RE);var M3__namespace=/*#__PURE__*/_interopNamespace(M3);var Oo__namespace=/*#__PURE__*/_interopNamespace(Oo);var R4__namespace=/*#__PURE__*/_interopNamespace(R4);var zFe__namespace=/*#__PURE__*/_interopNamespace(zFe);var YFe__namespace=/*#__PURE__*/_interopNamespace(YFe);var Qme=Object.create;var xm=Object.defineProperty;var Jme=Object.getOwnPropertyDescriptor;var Zme=Object.getOwnPropertyNames;var eEe=Object.getPrototypeOf,tEe=Object.prototype.hasOwnProperty;var P=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var E=(t,e)=>()=>(t&&(e=t(t=0)),e);var f=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Ue=(t,e)=>{for(var r in e)xm(t,r,{get:e[r],enumerable:true});},sk=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Zme(e))!tEe.call(t,s)&&s!==r&&xm(t,s,{get:()=>e[s],enumerable:!(n=Jme(e,s))||n.enumerable});return t};var Yr=(t,e,r)=>(r=t!=null?Qme(eEe(t)):{},sk(!t||!t.__esModule?xm(r,"default",{value:t,enumerable:true}):r,t)),A=t=>sk(xm({},"__esModule",{value:true}),t);var ak,ck=E(()=>{ak=typeof globalThis=="object"?globalThis:global;});var uk=E(()=>{ck();});var lk=E(()=>{uk();});var So,rN=E(()=>{So="1.9.0";});function rEe(t){var e=new Set([t]),r=new Set,n=t.match(dk);if(!n)return function(){return  false};var s={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(s.prerelease!=null)return function(c){return c===t};function a(i){return r.add(i),false}function o(i){return e.add(i),true}return function(c){if(e.has(c))return  true;if(r.has(c))return  false;var u=c.match(dk);if(!u)return a(c);var l={major:+u[1],minor:+u[2],patch:+u[3],prerelease:u[4]};return l.prerelease!=null||s.major!==l.major?a(c):s.major===0?s.minor===l.minor&&s.patch<=l.patch?o(c):a(c):s.minor<=l.minor?o(c):a(c)}}var dk,pk,fk=E(()=>{rN();dk=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;pk=rEe(So);});function bi(t,e,r,n){var s;n===void 0&&(n=false);var a=Ep[mp]=(s=Ep[mp])!==null&&s!==void 0?s:{version:So};if(!n&&a[t]){var o=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return r.error(o.stack||o.message),false}if(a.version!==So){var o=new Error("@opentelemetry/api: Registration of version v"+a.version+" for "+t+" does not match previously registered API v"+So);return r.error(o.stack||o.message),false}return a[t]=e,r.debug("@opentelemetry/api: Registered a global for "+t+" v"+So+"."),true}function _n(t){var e,r,n=(e=Ep[mp])===null||e===void 0?void 0:e.version;if(!(!n||!pk(n)))return (r=Ep[mp])===null||r===void 0?void 0:r[t]}function Mi(t,e){e.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+So+".");var r=Ep[mp];r&&delete r[t];}var nEe,mp,Ep,pa=E(()=>{lk();rN();fk();nEe=So.split(".")[0],mp=Symbol.for("opentelemetry.js.api."+nEe),Ep=ak;});function Tp(t,e,r){var n=_n("diag");if(n)return r.unshift(e),n[t].apply(n,oEe([],iEe(r),false))}var iEe,oEe,hk,_k=E(()=>{pa();iEe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,a=[],o;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)a.push(s.value);}catch(i){o={error:i};}finally{try{s&&!s.done&&(r=n.return)&&r.call(n);}finally{if(o)throw o.error}}return a},oEe=function(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,a;n<s;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))},hk=function(){function t(e){this._namespace=e.namespace||"DiagComponentLogger";}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Tp("debug",this._namespace,e)},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Tp("error",this._namespace,e)},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Tp("info",this._namespace,e)},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Tp("warn",this._namespace,e)},t.prototype.verbose=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Tp("verbose",this._namespace,e)},t}();});var at,Lm=E(()=>{(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL";})(at||(at={}));});function mk(t,e){t<at.NONE?t=at.NONE:t>at.ALL&&(t=at.ALL),e=e||{};function r(n,s){var a=e[n];return typeof a=="function"&&t>=s?a.bind(e):function(){}}return {error:r("error",at.ERROR),warn:r("warn",at.WARN),info:r("info",at.INFO),debug:r("debug",at.DEBUG),verbose:r("verbose",at.VERBOSE)}}var Ek=E(()=>{Lm();});var sEe,aEe,cEe,Sr,fa=E(()=>{_k();Ek();Lm();pa();sEe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,a=[],o;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)a.push(s.value);}catch(i){o={error:i};}finally{try{s&&!s.done&&(r=n.return)&&r.call(n);}finally{if(o)throw o.error}}return a},aEe=function(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,a;n<s;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))},cEe="diag",Sr=function(){function t(){function e(s){return function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];var i=_n("diag");if(i)return i[s].apply(i,aEe([],sEe(a),false))}}var r=this,n=function(s,a){var o,i,c;if(a===void 0&&(a={logLevel:at.INFO}),s===r){var u=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((o=u.stack)!==null&&o!==void 0?o:u.message),false}typeof a=="number"&&(a={logLevel:a});var l=_n("diag"),d=mk((i=a.logLevel)!==null&&i!==void 0?i:at.INFO,s);if(l&&!a.suppressOverrideMessage){var p=(c=new Error().stack)!==null&&c!==void 0?c:"<failed to generate stacktrace>";l.warn("Current logger will be overwritten from "+p),d.warn("Current logger will overwrite one already registered from "+p);}return bi("diag",d,r,true)};r.setLogger=n,r.disable=function(){Mi(cEe,r);},r.createComponentLogger=function(s){return new hk(s)},r.verbose=e("verbose"),r.debug=e("debug"),r.info=e("info"),r.warn=e("warn"),r.error=e("error");}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t}();});var uEe,lEe,Tk,Sk=E(()=>{uEe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,a=[],o;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)a.push(s.value);}catch(i){o={error:i};}finally{try{s&&!s.done&&(r=n.return)&&r.call(n);}finally{if(o)throw o.error}}return a},lEe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return {next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Tk=function(){function t(e){this._entries=e?new Map(e):new Map;}return t.prototype.getEntry=function(e){var r=this._entries.get(e);if(r)return Object.assign({},r)},t.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(e){var r=uEe(e,2),n=r[0],s=r[1];return [n,s]})},t.prototype.setEntry=function(e,r){var n=new t(this._entries);return n._entries.set(e,r),n},t.prototype.removeEntry=function(e){var r=new t(this._entries);return r._entries.delete(e),r},t.prototype.removeEntries=function(){for(var e,r,n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];var a=new t(this._entries);try{for(var o=lEe(n),i=o.next();!i.done;i=o.next()){var c=i.value;a._entries.delete(c);}}catch(u){e={error:u};}finally{try{i&&!i.done&&(r=o.return)&&r.call(o);}finally{if(e)throw e.error}}return a},t.prototype.clear=function(){return new t},t}();});var gk,yk=E(()=>{gk=Symbol("BaggageEntryMetadata");});function Ak(t){return t===void 0&&(t={}),new Tk(new Map(Object.entries(t)))}function Dm(t){return typeof t!="string"&&(dEe.error("Cannot create baggage metadata from unknown type: "+typeof t),t=""),{__TYPE__:gk,toString:function(){return t}}}var dEe,nN=E(()=>{fa();Sk();yk();dEe=Sr.instance();});function Pn(t){return Symbol.for(t)}var pEe,wm,Sp=E(()=>{pEe=function(){function t(e){var r=this;r._currentContext=e?new Map(e):new Map,r.getValue=function(n){return r._currentContext.get(n)},r.setValue=function(n,s){var a=new t(r._currentContext);return a._currentContext.set(n,s),a},r.deleteValue=function(n){var s=new t(r._currentContext);return s._currentContext.delete(n),s};}return t}(),wm=new pEe;});var iN,Rk,vk=E(()=>{iN=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],Rk=function(){function t(){function e(n){return function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];if(console){var o=console[n];if(typeof o!="function"&&(o=console.log),typeof o=="function")return o.apply(console,s)}}}for(var r=0;r<iN.length;r++)this[iN[r].n]=e(iN[r].c);}return t}();});function km(){return sN}var ha,fEe,Um,hEe,_Ee,mEe,EEe,oN,TEe,SEe,gEe,sN,yEe,AEe,REe,vEe,OEe,NEe,CEe,aN=E(()=>{ha=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s;}||function(n,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(n[a]=s[a]);},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e;}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n);}}(),fEe=function(){function t(){}return t.prototype.createGauge=function(e,r){return AEe},t.prototype.createHistogram=function(e,r){return REe},t.prototype.createCounter=function(e,r){return yEe},t.prototype.createUpDownCounter=function(e,r){return vEe},t.prototype.createObservableGauge=function(e,r){return NEe},t.prototype.createObservableCounter=function(e,r){return OEe},t.prototype.createObservableUpDownCounter=function(e,r){return CEe},t.prototype.addBatchObservableCallback=function(e,r){},t.prototype.removeBatchObservableCallback=function(e){},t}(),Um=function(){function t(){}return t}(),hEe=function(t){ha(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(r,n){},e}(Um),_Ee=function(t){ha(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(r,n){},e}(Um),mEe=function(t){ha(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.record=function(r,n){},e}(Um),EEe=function(t){ha(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.record=function(r,n){},e}(Um),oN=function(){function t(){}return t.prototype.addCallback=function(e){},t.prototype.removeCallback=function(e){},t}(),TEe=function(t){ha(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(oN),SEe=function(t){ha(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(oN),gEe=function(t){ha(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(oN),sN=new fEe,yEe=new hEe,AEe=new mEe,REe=new EEe,vEe=new _Ee,OEe=new TEe,NEe=new SEe,CEe=new gEe;});var $r,Ok=E(()=>{(function(t){t[t.INT=0]="INT",t[t.DOUBLE=1]="DOUBLE";})($r||($r={}));});var Vm,Bm,cN=E(()=>{Vm={get:function(t,e){if(t!=null)return t[e]},keys:function(t){return t==null?[]:Object.keys(t)}},Bm={set:function(t,e,r){t!=null&&(t[e]=r);}};});var PEe,bEe,Nk,Ck=E(()=>{Sp();PEe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,a=[],o;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)a.push(s.value);}catch(i){o={error:i};}finally{try{s&&!s.done&&(r=n.return)&&r.call(n);}finally{if(o)throw o.error}}return a},bEe=function(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,a;n<s;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))},Nk=function(){function t(){}return t.prototype.active=function(){return wm},t.prototype.with=function(e,r,n){for(var s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];return r.call.apply(r,bEe([n],PEe(s),false))},t.prototype.bind=function(e,r){return r},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t}();});var MEe,IEe,uN,xEe,ts,gp=E(()=>{Ck();pa();fa();MEe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,a=[],o;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)a.push(s.value);}catch(i){o={error:i};}finally{try{s&&!s.done&&(r=n.return)&&r.call(n);}finally{if(o)throw o.error}}return a},IEe=function(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,a;n<s;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))},uN="context",xEe=new Nk,ts=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(e){return bi(uN,e,Sr.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(e,r,n){for(var s,a=[],o=3;o<arguments.length;o++)a[o-3]=arguments[o];return (s=this._getContextManager()).with.apply(s,IEe([e,r,n],MEe(a),false))},t.prototype.bind=function(e,r){return this._getContextManager().bind(e,r)},t.prototype._getContextManager=function(){return _n(uN)||xEe},t.prototype.disable=function(){this._getContextManager().disable(),Mi(uN,Sr.instance());},t}();});var ze,lN=E(()=>{(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED";})(ze||(ze={}));});var yp,Ap,Yc,Fm=E(()=>{lN();yp="0000000000000000",Ap="00000000000000000000000000000000",Yc={traceId:Ap,spanId:yp,traceFlags:ze.NONE};});var rs,qm=E(()=>{Fm();rs=function(){function t(e){e===void 0&&(e=Yc),this._spanContext=e;}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,r){return this},t.prototype.setAttributes=function(e){return this},t.prototype.addEvent=function(e,r){return this},t.prototype.addLink=function(e){return this},t.prototype.addLinks=function(e){return this},t.prototype.setStatus=function(e){return this},t.prototype.updateName=function(e){return this},t.prototype.end=function(e){},t.prototype.isRecording=function(){return  false},t.prototype.recordException=function(e,r){},t}();});function Hm(t){return t.getValue(dN)||void 0}function Pk(){return Hm(ts.getInstance().active())}function Rp(t,e){return t.setValue(dN,e)}function bk(t){return t.deleteValue(dN)}function Mk(t,e){return Rp(t,new rs(e))}function Gm(t){var e;return (e=Hm(t))===null||e===void 0?void 0:e.spanContext()}var dN,pN=E(()=>{Sp();qm();gp();dN=Pn("OpenTelemetry Context Key SPAN");});function go(t){return LEe.test(t)&&t!==Ap}function _a(t){return DEe.test(t)&&t!==yp}function gr(t){return go(t.traceId)&&_a(t.spanId)}function Ik(t){return new rs(t)}var LEe,DEe,jm=E(()=>{Fm();qm();LEe=/^([0-9a-f]{32})$/i,DEe=/^[0-9a-f]{16}$/i;});function wEe(t){return typeof t=="object"&&typeof t.spanId=="string"&&typeof t.traceId=="string"&&typeof t.traceFlags=="number"}var fN,zm,hN=E(()=>{gp();pN();qm();jm();fN=ts.getInstance(),zm=function(){function t(){}return t.prototype.startSpan=function(e,r,n){n===void 0&&(n=fN.active());var s=!!r?.root;if(s)return new rs;var a=n&&Gm(n);return wEe(a)&&gr(a)?new rs(a):new rs},t.prototype.startActiveSpan=function(e,r,n,s){var a,o,i;if(!(arguments.length<2)){arguments.length===2?i=r:arguments.length===3?(a=r,i=n):(a=r,o=n,i=s);var c=o??fN.active(),u=this.startSpan(e,a,c),l=Rp(c,u);return fN.with(l,i,void 0,u)}},t}();});var UEe,Ym,_N=E(()=>{hN();UEe=new zm,Ym=function(){function t(e,r,n,s){this._provider=e,this.name=r,this.version=n,this.options=s;}return t.prototype.startSpan=function(e,r,n){return this._getTracer().startSpan(e,r,n)},t.prototype.startActiveSpan=function(e,r,n,s){var a=this._getTracer();return Reflect.apply(a.startActiveSpan,a,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):UEe},t}();});var xk,Lk=E(()=>{hN();xk=function(){function t(){}return t.prototype.getTracer=function(e,r,n){return new zm},t}();});var kEe,vp,mN=E(()=>{_N();Lk();kEe=new xk,vp=function(){function t(){}return t.prototype.getTracer=function(e,r,n){var s;return (s=this.getDelegateTracer(e,r,n))!==null&&s!==void 0?s:new Ym(this,e,r,n)},t.prototype.getDelegate=function(){var e;return (e=this._delegate)!==null&&e!==void 0?e:kEe},t.prototype.setDelegate=function(e){this._delegate=e;},t.prototype.getDelegateTracer=function(e,r,n){var s;return (s=this._delegate)===null||s===void 0?void 0:s.getTracer(e,r,n)},t}();});var ma,Dk=E(()=>{(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED";})(ma||(ma={}));});var Kr,wk=E(()=>{(function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER";})(Kr||(Kr={}));});var bn,Uk=E(()=>{(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR";})(bn||(bn={}));});function kk(t){return FEe.test(t)}function Vk(t){return qEe.test(t)&&!HEe.test(t)}var EN,VEe,BEe,FEe,qEe,HEe,Bk=E(()=>{EN="[_0-9a-z-*/]",VEe="[a-z]"+EN+"{0,255}",BEe="[a-z0-9]"+EN+"{0,240}@[a-z]"+EN+"{0,13}",FEe=new RegExp("^(?:"+VEe+"|"+BEe+")$"),qEe=/^[ -~]{0,255}[!-~]$/,HEe=/,|=/;});var Fk,GEe,qk,Hk,Gk,jk=E(()=>{Bk();Fk=32,GEe=512,qk=",",Hk="=",Gk=function(){function t(e){this._internalState=new Map,e&&this._parse(e);}return t.prototype.set=function(e,r){var n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,r),n},t.prototype.unset=function(e){var r=this._clone();return r._internalState.delete(e),r},t.prototype.get=function(e){return this._internalState.get(e)},t.prototype.serialize=function(){var e=this;return this._keys().reduce(function(r,n){return r.push(n+Hk+e.get(n)),r},[]).join(qk)},t.prototype._parse=function(e){e.length>GEe||(this._internalState=e.split(qk).reverse().reduce(function(r,n){var s=n.trim(),a=s.indexOf(Hk);if(a!==-1){var o=s.slice(0,a),i=s.slice(a+1,n.length);kk(o)&&Vk(i)&&r.set(o,i);}return r},new Map),this._internalState.size>Fk&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,Fk))));},t.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},t.prototype._clone=function(){var e=new t;return e._internalState=new Map(this._internalState),e},t}();});function zk(t){return new Gk(t)}var Yk=E(()=>{jk();});var yt,$k=E(()=>{gp();yt=ts.getInstance();});var N,Kk=E(()=>{fa();N=Sr.instance();});var jEe,Wk,Xk=E(()=>{aN();jEe=function(){function t(){}return t.prototype.getMeter=function(e,r,n){return sN},t}(),Wk=new jEe;});var TN,Qk,Jk=E(()=>{Xk();pa();fa();TN="metrics",Qk=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalMeterProvider=function(e){return bi(TN,e,Sr.instance())},t.prototype.getMeterProvider=function(){return _n(TN)||Wk},t.prototype.getMeter=function(e,r,n){return this.getMeterProvider().getMeter(e,r,n)},t.prototype.disable=function(){Mi(TN,Sr.instance());},t}();});var Dr,Zk=E(()=>{Jk();Dr=Qk.getInstance();});var eV,tV=E(()=>{eV=function(){function t(){}return t.prototype.inject=function(e,r){},t.prototype.extract=function(e,r){return e},t.prototype.fields=function(){return []},t}();});function gN(t){return t.getValue(SN)||void 0}function rV(){return gN(ts.getInstance().active())}function nV(t,e){return t.setValue(SN,e)}function iV(t){return t.deleteValue(SN)}var SN,oV=E(()=>{gp();Sp();SN=Pn("OpenTelemetry Baggage Key");});var yN,zEe,sV,aV=E(()=>{pa();tV();cN();oV();nN();fa();yN="propagation",zEe=new eV,sV=function(){function t(){this.createBaggage=Ak,this.getBaggage=gN,this.getActiveBaggage=rV,this.setBaggage=nV,this.deleteBaggage=iV;}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalPropagator=function(e){return bi(yN,e,Sr.instance())},t.prototype.inject=function(e,r,n){return n===void 0&&(n=Bm),this._getGlobalPropagator().inject(e,r,n)},t.prototype.extract=function(e,r,n){return n===void 0&&(n=Vm),this._getGlobalPropagator().extract(e,r,n)},t.prototype.fields=function(){return this._getGlobalPropagator().fields()},t.prototype.disable=function(){Mi(yN,Sr.instance());},t.prototype._getGlobalPropagator=function(){return _n(yN)||zEe},t}();});var Mn,cV=E(()=>{aV();Mn=sV.getInstance();});var AN,uV,lV=E(()=>{pa();mN();jm();pN();fa();AN="trace",uV=function(){function t(){this._proxyTracerProvider=new vp,this.wrapSpanContext=Ik,this.isSpanContextValid=gr,this.deleteSpan=bk,this.getSpan=Hm,this.getActiveSpan=Pk,this.getSpanContext=Gm,this.setSpan=Rp,this.setSpanContext=Mk;}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(e){var r=bi(AN,this._proxyTracerProvider,Sr.instance());return r&&this._proxyTracerProvider.setDelegate(e),r},t.prototype.getTracerProvider=function(){return _n(AN)||this._proxyTracerProvider},t.prototype.getTracer=function(e,r){return this.getTracerProvider().getTracer(e,r)},t.prototype.disable=function(){Mi(AN,Sr.instance()),this._proxyTracerProvider=new vp;},t}();});var ge,dV=E(()=>{lV();ge=uV.getInstance();});var H={};Ue(H,{DiagConsoleLogger:()=>Rk,DiagLogLevel:()=>at,INVALID_SPANID:()=>yp,INVALID_SPAN_CONTEXT:()=>Yc,INVALID_TRACEID:()=>Ap,ProxyTracer:()=>Ym,ProxyTracerProvider:()=>vp,ROOT_CONTEXT:()=>wm,SamplingDecision:()=>ma,SpanKind:()=>Kr,SpanStatusCode:()=>bn,TraceFlags:()=>ze,ValueType:()=>$r,baggageEntryMetadataFromString:()=>Dm,context:()=>yt,createContextKey:()=>Pn,createNoopMeter:()=>km,createTraceState:()=>zk,default:()=>YEe,defaultTextMapGetter:()=>Vm,defaultTextMapSetter:()=>Bm,diag:()=>N,isSpanContextValid:()=>gr,isValidSpanId:()=>_a,isValidTraceId:()=>go,metrics:()=>Dr,propagation:()=>Mn,trace:()=>ge});var YEe,M=E(()=>{nN();Sp();vk();Lm();aN();Ok();cN();_N();mN();Dk();wk();Uk();lN();Yk();jm();Fm();$k();Kk();Zk();cV();dV();YEe={context:yt,diag:N,metrics:Dr,propagation:Mn,trace:ge};});var $m,pV=E(()=>{(function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.TRACE=1]="TRACE",t[t.TRACE2=2]="TRACE2",t[t.TRACE3=3]="TRACE3",t[t.TRACE4=4]="TRACE4",t[t.DEBUG=5]="DEBUG",t[t.DEBUG2=6]="DEBUG2",t[t.DEBUG3=7]="DEBUG3",t[t.DEBUG4=8]="DEBUG4",t[t.INFO=9]="INFO",t[t.INFO2=10]="INFO2",t[t.INFO3=11]="INFO3",t[t.INFO4=12]="INFO4",t[t.WARN=13]="WARN",t[t.WARN2=14]="WARN2",t[t.WARN3=15]="WARN3",t[t.WARN4=16]="WARN4",t[t.ERROR=17]="ERROR",t[t.ERROR2=18]="ERROR2",t[t.ERROR3=19]="ERROR3",t[t.ERROR4=20]="ERROR4",t[t.FATAL=21]="FATAL",t[t.FATAL2=22]="FATAL2",t[t.FATAL3=23]="FATAL3",t[t.FATAL4=24]="FATAL4";})($m||($m={}));});var Ea,$c,Km=E(()=>{Ea=class{emit(e){}},$c=new Ea;});var Op,Kc,Wm=E(()=>{Km();Op=class{getLogger(e,r,n){return new Ea}},Kc=new Op;});var Wc,RN=E(()=>{Km();Wc=class{constructor(e,r,n,s){this._provider=e,this.name=r,this.version=n,this.options=s;}emit(e){this._getLogger().emit(e);}_getLogger(){if(this._delegate)return this._delegate;let e=this._provider._getDelegateLogger(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):$c}};});var Ta,vN=E(()=>{Wm();RN();Ta=class{getLogger(e,r,n){var s;return (s=this._getDelegateLogger(e,r,n))!==null&&s!==void 0?s:new Wc(this,e,r,n)}_getDelegate(){var e;return (e=this._delegate)!==null&&e!==void 0?e:Kc}_setDelegate(e){this._delegate=e;}_getDelegateLogger(e,r,n){var s;return (s=this._delegate)===null||s===void 0?void 0:s.getLogger(e,r,n)}};});var Xm,fV=E(()=>{Xm=typeof globalThis=="object"?globalThis:global;});var hV=E(()=>{fV();});var _V=E(()=>{hV();});function mV(t,e,r){return n=>n===t?e:r}var Np,Xc,ON,EV=E(()=>{_V();Np=Symbol.for("io.opentelemetry.js.api.logs"),Xc=Xm;ON=1;});var Qm,TV=E(()=>{EV();Wm();vN();Qm=class t{constructor(){this._proxyLoggerProvider=new Ta;}static getInstance(){return this._instance||(this._instance=new t),this._instance}setGlobalLoggerProvider(e){return Xc[Np]?this.getLoggerProvider():(Xc[Np]=mV(ON,e,Kc),this._proxyLoggerProvider._setDelegate(e),e)}getLoggerProvider(){var e,r;return (r=(e=Xc[Np])===null||e===void 0?void 0:e.call(Xc,ON))!==null&&r!==void 0?r:this._proxyLoggerProvider}getLogger(e,r,n){return this.getLoggerProvider().getLogger(e,r,n)}disable(){delete Xc[Np],this._proxyLoggerProvider=new Ta;}};});var yo={};Ue(yo,{NOOP_LOGGER:()=>$c,NOOP_LOGGER_PROVIDER:()=>Kc,NoopLogger:()=>Ea,NoopLoggerProvider:()=>Op,ProxyLogger:()=>Wc,ProxyLoggerProvider:()=>Ta,SeverityNumber:()=>$m,logs:()=>Cp});var Cp,In=E(()=>{pV();Km();Wm();RN();vN();TV();Cp=Qm.getInstance();});function ns(t){return t.setValue(NN,true)}function SV(t){return t.deleteValue(NN)}function yr(t){return t.getValue(NN)===true}var NN,Pp=E(()=>{M();NN=Pn("OpenTelemetry SDK Context Key SUPPRESS_TRACING");});var gV,Jm,Qc,Zm,CN=E(()=>{gV="=",Jm=";",Qc=",",Zm="baggage";});function yV(t){return t.reduce((e,r)=>{let n=`${e}${e!==""?Qc:""}${r}`;return n.length>8192?e:n},"")}function AV(t){return t.getAllEntries().map(([e,r])=>{let n=`${encodeURIComponent(e)}=${encodeURIComponent(r.value)}`;return r.metadata!==void 0&&(n+=Jm+r.metadata.toString()),n})}function PN(t){let e=t.split(Jm);if(e.length<=0)return;let r=e.shift();if(!r)return;let n=r.indexOf(gV);if(n<=0)return;let s=decodeURIComponent(r.substring(0,n).trim()),a=decodeURIComponent(r.substring(n+1).trim()),o;return e.length>0&&(o=Dm(e.join(Jm))),{key:s,value:a,metadata:o}}function Sa(t){let e={};return typeof t=="string"&&t.length>0&&t.split(Qc).forEach(r=>{let n=PN(r);n!==void 0&&n.value.length>0&&(e[n.key]=n.value);}),e}var bN=E(()=>{M();CN();});var eE,RV=E(()=>{M();Pp();CN();bN();eE=class{inject(e,r,n){let s=Mn.getBaggage(e);if(!s||yr(e))return;let a=AV(s).filter(i=>i.length<=4096).slice(0,180),o=yV(a);o.length>0&&n.set(r,Zm,o);}extract(e,r,n){let s=n.get(r,Zm),a=Array.isArray(s)?s.join(Qc):s;if(!a)return e;let o={};return a.length===0||(a.split(Qc).forEach(c=>{let u=PN(c);if(u){let l={value:u.value};u.metadata&&(l.metadata=u.metadata),o[u.key]=l;}}),Object.entries(o).length===0)?e:Mn.setBaggage(e,Mn.createBaggage(o))}fields(){return [Zm]}};});var tE,vV=E(()=>{tE=class{_monotonicClock;_epochMillis;_performanceMillis;constructor(e,r){this._monotonicClock=r,this._epochMillis=e.now(),this._performanceMillis=r.now();}now(){let e=this._monotonicClock.now()-this._performanceMillis;return this._epochMillis+e}};});function is(t){let e={};if(typeof t!="object"||t==null)return e;for(let[r,n]of Object.entries(t)){if(!XEe(r)){N.warn(`Invalid attribute key: ${r}`);continue}if(!os(n)){N.warn(`Invalid attribute value set for key: ${r}`);continue}Array.isArray(n)?e[r]=n.slice():e[r]=n;}return e}function XEe(t){return typeof t=="string"&&t.length>0}function os(t){return t==null?true:Array.isArray(t)?QEe(t):OV(t)}function QEe(t){let e;for(let r of t)if(r!=null){if(!e){if(OV(r)){e=typeof r;continue}return  false}if(typeof r!==e)return  false}return  true}function OV(t){switch(typeof t){case "number":case "boolean":case "string":return  true}return  false}var NV=E(()=>{M();});function rE(){return t=>{N.error(JEe(t));}}function JEe(t){return typeof t=="string"?t:JSON.stringify(ZEe(t))}function ZEe(t){let e={},r=t;for(;r!==null;)Object.getOwnPropertyNames(r).forEach(n=>{if(e[n])return;let s=r[n];s&&(e[n]=String(s));}),r=Object.getPrototypeOf(r);return e}var MN=E(()=>{M();});function PV(t){CV=t;}function At(t){try{CV(t);}catch{}}var CV,bV=E(()=>{MN();CV=rE();});function Me(t){let e=process.env[t];if(e==null||e.trim()==="")return;let r=Number(e);if(isNaN(r)){N.warn(`Unknown value ${p3.inspect(e)} for ${t}, expected a number, using defaults`);return}return r}function $t(t){let e=process.env[t];if(!(e==null||e.trim()===""))return e}function nE(t){let e=process.env[t]?.trim().toLowerCase();return e==null||e===""?false:e==="true"?true:(e==="false"||N.warn(`Unknown value ${p3.inspect(e)} for ${t}, expected 'true' or 'false', falling back to 'false' (default)`),false)}function iE(t){return $t(t)?.split(",").map(e=>e.trim()).filter(e=>e!=="")}var IV=E(()=>{M();});var oE,xV=E(()=>{oE=typeof globalThis=="object"?globalThis:global;});var xn,LV=E(()=>{xn=perf_hooks.performance;});var DV,wV=E(()=>{DV="2.1.0";});function Mt(t){let e={},r=t.length;for(let n=0;n<r;n++){let s=t[n];s&&(e[String(s).toUpperCase().replace(/[-.]/g,"_")]=s);}return e}var IN=E(()=>{});var UV,kV,VV,BV,FV,qV,HV,GV,jV,zV,YV,$V,KV,WV,XV,QV,JV,ZV,eB,tB,rB,nB,iB,oB,sB,aB,cB,uB,lB,dB,pB,fB,hB,_B,mB,EB,TB,SB,gB,yB,AB,RB,vB,OB,NB,CB,PB,bB,MB,IB,xB,LB,DB,wB,UB,kB,VB,BB,FB,qB,HB,GB,jB,zB,YB,$B,KB,WB,XB,QB,JB,ZB,eF,tF,rF,nF,iF,oF,sF,aF,cF,uF,lF,dF,pF,fF,hF,_F,mF,EF,TF,SF,gF,yF,AF,RF,vF,OF,NF,CF,PF,bF,MF,IF,xF,LF,DF,wF,UF,kF,VF,BF,FF,qF,HF,GF,jF,zF,YF,$F,KF,WF,XF,QF,JF,ZF,eq,tq,tTe,rTe,nTe,iTe,oTe,sTe,aTe,cTe,uTe,lTe,dTe,pTe,fTe,hTe,_Te,mTe,ETe,TTe,STe,gTe,yTe,ATe,RTe,vTe,OTe,NTe,CTe,PTe,bTe,MTe,ITe,xTe,LTe,DTe,wTe,UTe,kTe,VTe,BTe,FTe,qTe,HTe,GTe,jTe,zTe,YTe,$Te,KTe,WTe,XTe,QTe,JTe,ZTe,eSe,tSe,rSe,nSe,iSe,oSe,sSe,aSe,cSe,uSe,lSe,dSe,pSe,fSe,hSe,_Se,mSe,ESe,TSe,SSe,gSe,ySe,ASe,RSe,vSe,OSe,NSe,CSe,PSe,bSe,MSe,ISe,xSe,LSe,DSe,wSe,USe,kSe,VSe,BSe,FSe,qSe,HSe,GSe,jSe,zSe,YSe,$Se,KSe,WSe,XSe,QSe,JSe,ZSe,ege,tge,rge,nge,ige,oge,sge,age,cge,uge,lge,dge,pge,fge,hge,_ge,mge,Ege,Tge,Sge,gge,yge,rq,nq,iq,oq,sq,aq,cq,uq,lq,dq,pq,fq,hq,_q,mq,Eq,Tq,Sq,gq,yq,Aq,Rq,vq,Oq,Nq,Cq,Pq,bq,Mq,Iq,xq,Lq,Dq,wq,Uq,kq,Vq,Bq,Fq,qq,Hq,Gq,jq,zq,Yq,$q,Kq,Age,Rge,vge,Oge,Nge,Cge,Pge,bge,Mge,Ige,xge,Lge,Dge,wge,Uge,kge,Vge,Bge,Fge,qge,Hge,Gge,jge,zge,Yge,$ge,Kge,Wge,Xge,Qge,Jge,Zge,eye,tye,rye,nye,iye,oye,sye,aye,cye,uye,lye,dye,pye,fye,hye,_ye,Wq,Xq,Qq,Jq,Zq,eH,tH,rH,nH,iH,oH,mye,Eye,Tye,Sye,gye,yye,Aye,Rye,vye,Oye,Nye,Cye,sH,aH,cH,uH,lH,Pye,bye,Mye,Iye,xye,Lye,dH,pH,fH,Dye,wye,Uye,kye,hH,_H,mH,EH,Vye,Bye,Fye,qye,Hye,TH,SH,gH,yH,AH,RH,vH,Gye,jye,zye,Yye,$ye,Kye,Wye,Xye,OH,NH,CH,PH,bH,Qye,Jye,Zye,eAe,tAe,rAe,MH,IH,xH,LH,DH,wH,UH,kH,VH,BH,FH,qH,HH,GH,jH,zH,YH,$H,KH,WH,XH,nAe,iAe,oAe,sAe,aAe,cAe,uAe,lAe,dAe,pAe,fAe,hAe,_Ae,mAe,EAe,TAe,SAe,gAe,yAe,AAe,RAe,vAe,QH,JH,ZH,eG,tG,OAe,NAe,CAe,PAe,bAe,MAe,rG,nG,IAe,xAe,LAe,iG,oG,DAe,wAe,UAe,sG,aG,cG,uG,lG,dG,pG,fG,hG,_G,mG,EG,TG,SG,gG,yG,AG,kAe,VAe,BAe,FAe,qAe,HAe,GAe,jAe,zAe,YAe,$Ae,KAe,WAe,XAe,QAe,JAe,ZAe,eRe,RG,vG,tRe,rRe,nRe,OG=E(()=>{IN();UV="aws.lambda.invoked_arn",kV="db.system",VV="db.connection_string",BV="db.user",FV="db.jdbc.driver_classname",qV="db.name",HV="db.statement",GV="db.operation",jV="db.mssql.instance_name",zV="db.cassandra.keyspace",YV="db.cassandra.page_size",$V="db.cassandra.consistency_level",KV="db.cassandra.table",WV="db.cassandra.idempotence",XV="db.cassandra.speculative_execution_count",QV="db.cassandra.coordinator.id",JV="db.cassandra.coordinator.dc",ZV="db.hbase.namespace",eB="db.redis.database_index",tB="db.mongodb.collection",rB="db.sql.table",nB="exception.type",iB="exception.message",oB="exception.stacktrace",sB="exception.escaped",aB="faas.trigger",cB="faas.execution",uB="faas.document.collection",lB="faas.document.operation",dB="faas.document.time",pB="faas.document.name",fB="faas.time",hB="faas.cron",_B="faas.coldstart",mB="faas.invoked_name",EB="faas.invoked_provider",TB="faas.invoked_region",SB="net.transport",gB="net.peer.ip",yB="net.peer.port",AB="net.peer.name",RB="net.host.ip",vB="net.host.port",OB="net.host.name",NB="net.host.connection.type",CB="net.host.connection.subtype",PB="net.host.carrier.name",bB="net.host.carrier.mcc",MB="net.host.carrier.mnc",IB="net.host.carrier.icc",xB="peer.service",LB="enduser.id",DB="enduser.role",wB="enduser.scope",UB="thread.id",kB="thread.name",VB="code.function",BB="code.namespace",FB="code.filepath",qB="code.lineno",HB="http.method",GB="http.url",jB="http.target",zB="http.host",YB="http.scheme",$B="http.status_code",KB="http.flavor",WB="http.user_agent",XB="http.request_content_length",QB="http.request_content_length_uncompressed",JB="http.response_content_length",ZB="http.response_content_length_uncompressed",eF="http.server_name",tF="http.route",rF="http.client_ip",nF="aws.dynamodb.table_names",iF="aws.dynamodb.consumed_capacity",oF="aws.dynamodb.item_collection_metrics",sF="aws.dynamodb.provisioned_read_capacity",aF="aws.dynamodb.provisioned_write_capacity",cF="aws.dynamodb.consistent_read",uF="aws.dynamodb.projection",lF="aws.dynamodb.limit",dF="aws.dynamodb.attributes_to_get",pF="aws.dynamodb.index_name",fF="aws.dynamodb.select",hF="aws.dynamodb.global_secondary_indexes",_F="aws.dynamodb.local_secondary_indexes",mF="aws.dynamodb.exclusive_start_table",EF="aws.dynamodb.table_count",TF="aws.dynamodb.scan_forward",SF="aws.dynamodb.segment",gF="aws.dynamodb.total_segments",yF="aws.dynamodb.count",AF="aws.dynamodb.scanned_count",RF="aws.dynamodb.attribute_definitions",vF="aws.dynamodb.global_secondary_index_updates",OF="messaging.system",NF="messaging.destination",CF="messaging.destination_kind",PF="messaging.temp_destination",bF="messaging.protocol",MF="messaging.protocol_version",IF="messaging.url",xF="messaging.message_id",LF="messaging.conversation_id",DF="messaging.message_payload_size_bytes",wF="messaging.message_payload_compressed_size_bytes",UF="messaging.operation",kF="messaging.consumer_id",VF="messaging.rabbitmq.routing_key",BF="messaging.kafka.message_key",FF="messaging.kafka.consumer_group",qF="messaging.kafka.client_id",HF="messaging.kafka.partition",GF="messaging.kafka.tombstone",jF="rpc.system",zF="rpc.service",YF="rpc.method",$F="rpc.grpc.status_code",KF="rpc.jsonrpc.version",WF="rpc.jsonrpc.request_id",XF="rpc.jsonrpc.error_code",QF="rpc.jsonrpc.error_message",JF="message.type",ZF="message.id",eq="message.compressed_size",tq="message.uncompressed_size",tTe=UV,rTe=kV,nTe=VV,iTe=BV,oTe=FV,sTe=qV,aTe=HV,cTe=GV,uTe=jV,lTe=zV,dTe=YV,pTe=$V,fTe=KV,hTe=WV,_Te=XV,mTe=QV,ETe=JV,TTe=ZV,STe=eB,gTe=tB,yTe=rB,ATe=nB,RTe=iB,vTe=oB,OTe=sB,NTe=aB,CTe=cB,PTe=uB,bTe=lB,MTe=dB,ITe=pB,xTe=fB,LTe=hB,DTe=_B,wTe=mB,UTe=EB,kTe=TB,VTe=SB,BTe=gB,FTe=yB,qTe=AB,HTe=RB,GTe=vB,jTe=OB,zTe=NB,YTe=CB,$Te=PB,KTe=bB,WTe=MB,XTe=IB,QTe=xB,JTe=LB,ZTe=DB,eSe=wB,tSe=UB,rSe=kB,nSe=VB,iSe=BB,oSe=FB,sSe=qB,aSe=HB,cSe=GB,uSe=jB,lSe=zB,dSe=YB,pSe=$B,fSe=KB,hSe=WB,_Se=XB,mSe=QB,ESe=JB,TSe=ZB,SSe=eF,gSe=tF,ySe=rF,ASe=nF,RSe=iF,vSe=oF,OSe=sF,NSe=aF,CSe=cF,PSe=uF,bSe=lF,MSe=dF,ISe=pF,xSe=fF,LSe=hF,DSe=_F,wSe=mF,USe=EF,kSe=TF,VSe=SF,BSe=gF,FSe=yF,qSe=AF,HSe=RF,GSe=vF,jSe=OF,zSe=NF,YSe=CF,$Se=PF,KSe=bF,WSe=MF,XSe=IF,QSe=xF,JSe=LF,ZSe=DF,ege=wF,tge=UF,rge=kF,nge=VF,ige=BF,oge=FF,sge=qF,age=HF,cge=GF,uge=jF,lge=zF,dge=YF,pge=$F,fge=KF,hge=WF,_ge=XF,mge=QF,Ege=JF,Tge=ZF,Sge=eq,gge=tq,yge=Mt([UV,kV,VV,BV,FV,qV,HV,GV,jV,zV,YV,$V,KV,WV,XV,QV,JV,ZV,eB,tB,rB,nB,iB,oB,sB,aB,cB,uB,lB,dB,pB,fB,hB,_B,mB,EB,TB,SB,gB,yB,AB,RB,vB,OB,NB,CB,PB,bB,MB,IB,xB,LB,DB,wB,UB,kB,VB,BB,FB,qB,HB,GB,jB,zB,YB,$B,KB,WB,XB,QB,JB,ZB,eF,tF,rF,nF,iF,oF,sF,aF,cF,uF,lF,dF,pF,fF,hF,_F,mF,EF,TF,SF,gF,yF,AF,RF,vF,OF,NF,CF,PF,bF,MF,IF,xF,LF,DF,wF,UF,kF,VF,BF,FF,qF,HF,GF,jF,zF,YF,$F,KF,WF,XF,QF,JF,ZF,eq,tq]),rq="other_sql",nq="mssql",iq="mysql",oq="oracle",sq="db2",aq="postgresql",cq="redshift",uq="hive",lq="cloudscape",dq="hsqldb",pq="progress",fq="maxdb",hq="hanadb",_q="ingres",mq="firstsql",Eq="edb",Tq="cache",Sq="adabas",gq="firebird",yq="derby",Aq="filemaker",Rq="informix",vq="instantdb",Oq="interbase",Nq="mariadb",Cq="netezza",Pq="pervasive",bq="pointbase",Mq="sqlite",Iq="sybase",xq="teradata",Lq="vertica",Dq="h2",wq="coldfusion",Uq="cassandra",kq="hbase",Vq="mongodb",Bq="redis",Fq="couchbase",qq="couchdb",Hq="cosmosdb",Gq="dynamodb",jq="neo4j",zq="geode",Yq="elasticsearch",$q="memcached",Kq="cockroachdb",Age=rq,Rge=nq,vge=iq,Oge=oq,Nge=sq,Cge=aq,Pge=cq,bge=uq,Mge=lq,Ige=dq,xge=pq,Lge=fq,Dge=hq,wge=_q,Uge=mq,kge=Eq,Vge=Tq,Bge=Sq,Fge=gq,qge=yq,Hge=Aq,Gge=Rq,jge=vq,zge=Oq,Yge=Nq,$ge=Cq,Kge=Pq,Wge=bq,Xge=Mq,Qge=Iq,Jge=xq,Zge=Lq,eye=Dq,tye=wq,rye=Uq,nye=kq,iye=Vq,oye=Bq,sye=Fq,aye=qq,cye=Hq,uye=Gq,lye=jq,dye=zq,pye=Yq,fye=$q,hye=Kq,_ye=Mt([rq,nq,iq,oq,sq,aq,cq,uq,lq,dq,pq,fq,hq,_q,mq,Eq,Tq,Sq,gq,yq,Aq,Rq,vq,Oq,Nq,Cq,Pq,bq,Mq,Iq,xq,Lq,Dq,wq,Uq,kq,Vq,Bq,Fq,qq,Hq,Gq,jq,zq,Yq,$q,Kq]),Wq="all",Xq="each_quorum",Qq="quorum",Jq="local_quorum",Zq="one",eH="two",tH="three",rH="local_one",nH="any",iH="serial",oH="local_serial",mye=Wq,Eye=Xq,Tye=Qq,Sye=Jq,gye=Zq,yye=eH,Aye=tH,Rye=rH,vye=nH,Oye=iH,Nye=oH,Cye=Mt([Wq,Xq,Qq,Jq,Zq,eH,tH,rH,nH,iH,oH]),sH="datasource",aH="http",cH="pubsub",uH="timer",lH="other",Pye=sH,bye=aH,Mye=cH,Iye=uH,xye=lH,Lye=Mt([sH,aH,cH,uH,lH]),dH="insert",pH="edit",fH="delete",Dye=dH,wye=pH,Uye=fH,kye=Mt([dH,pH,fH]),hH="alibaba_cloud",_H="aws",mH="azure",EH="gcp",Vye=hH,Bye=_H,Fye=mH,qye=EH,Hye=Mt([hH,_H,mH,EH]),TH="ip_tcp",SH="ip_udp",gH="ip",yH="unix",AH="pipe",RH="inproc",vH="other",Gye=TH,jye=SH,zye=gH,Yye=yH,$ye=AH,Kye=RH,Wye=vH,Xye=Mt([TH,SH,gH,yH,AH,RH,vH]),OH="wifi",NH="wired",CH="cell",PH="unavailable",bH="unknown",Qye=OH,Jye=NH,Zye=CH,eAe=PH,tAe=bH,rAe=Mt([OH,NH,CH,PH,bH]),MH="gprs",IH="edge",xH="umts",LH="cdma",DH="evdo_0",wH="evdo_a",UH="cdma2000_1xrtt",kH="hsdpa",VH="hsupa",BH="hspa",FH="iden",qH="evdo_b",HH="lte",GH="ehrpd",jH="hspap",zH="gsm",YH="td_scdma",$H="iwlan",KH="nr",WH="nrnsa",XH="lte_ca",nAe=MH,iAe=IH,oAe=xH,sAe=LH,aAe=DH,cAe=wH,uAe=UH,lAe=kH,dAe=VH,pAe=BH,fAe=FH,hAe=qH,_Ae=HH,mAe=GH,EAe=jH,TAe=zH,SAe=YH,gAe=$H,yAe=KH,AAe=WH,RAe=XH,vAe=Mt([MH,IH,xH,LH,DH,wH,UH,kH,VH,BH,FH,qH,HH,GH,jH,zH,YH,$H,KH,WH,XH]),QH="1.0",JH="1.1",ZH="2.0",eG="SPDY",tG="QUIC",OAe=QH,NAe=JH,CAe=ZH,PAe=eG,bAe=tG,MAe={HTTP_1_0:QH,HTTP_1_1:JH,HTTP_2_0:ZH,SPDY:eG,QUIC:tG},rG="queue",nG="topic",IAe=rG,xAe=nG,LAe=Mt([rG,nG]),iG="receive",oG="process",DAe=iG,wAe=oG,UAe=Mt([iG,oG]),sG=0,aG=1,cG=2,uG=3,lG=4,dG=5,pG=6,fG=7,hG=8,_G=9,mG=10,EG=11,TG=12,SG=13,gG=14,yG=15,AG=16,kAe=sG,VAe=aG,BAe=cG,FAe=uG,qAe=lG,HAe=dG,GAe=pG,jAe=fG,zAe=hG,YAe=_G,$Ae=mG,KAe=EG,WAe=TG,XAe=SG,QAe=gG,JAe=yG,ZAe=AG,eRe={OK:sG,CANCELLED:aG,UNKNOWN:cG,INVALID_ARGUMENT:uG,DEADLINE_EXCEEDED:lG,NOT_FOUND:dG,ALREADY_EXISTS:pG,PERMISSION_DENIED:fG,RESOURCE_EXHAUSTED:hG,FAILED_PRECONDITION:_G,ABORTED:mG,OUT_OF_RANGE:EG,UNIMPLEMENTED:TG,INTERNAL:SG,UNAVAILABLE:gG,DATA_LOSS:yG,UNAUTHENTICATED:AG},RG="SENT",vG="RECEIVED",tRe=RG,rRe=vG,nRe=Mt([RG,vG]);});var NG=E(()=>{OG();});var CG,PG,bG,MG,IG,xG,LG,DG,wG,UG,kG,VG,BG,FG,qG,HG,GG,jG,zG,YG,$G,KG,WG,XG,QG,JG,ZG,ej,tj,rj,nj,ij,oj,sj,aj,cj,uj,lj,dj,pj,fj,hj,_j,mj,Ej,Tj,Sj,gj,yj,Aj,Rj,vj,Oj,Nj,Cj,Pj,bj,Mj,Ij,xj,Lj,Dj,wj,Uj,kj,Vj,Bj,Fj,qj,Hj,Gj,jj,zj,Yj,$j,Kj,Wj,Xj,Qj,Jj,Zj,ss,iRe,as,oRe,cs,sRe,aRe,cRe,uRe,lRe,dRe,pRe,fRe,hRe,_Re,mRe,ERe,TRe,SRe,gRe,yRe,xN,ARe,RRe,vRe,ORe,NRe,CRe,sE,aE,Jc,cE,uE,PRe,bRe,MRe,IRe,xRe,LRe,DRe,wRe,URe,kRe,VRe,BRe,FRe,qRe,HRe,GRe,jRe,zRe,YRe,$Re,KRe,WRe,XRe,QRe,JRe,ZRe,lE,LN,eve,tve,rve,nve,ive,ove,sve,ave,cve,Zc,uve,DN,lve,dve,pve,fve,hve,_ve,mve,Eve,Tve,e2,t2,r2,n2,Sve,gve,ga,yve,Ave,i2,o2,s2,a2,c2,u2,l2,d2,p2,f2,h2,_2,m2,E2,T2,S2,g2,Rve,vve,Ove,Nve,Cve,Pve,bve,wN,Mve,Ive,UN,kN,xve,Lve,Dve,wve,Uve,kve,y2,A2,Vve,Bve,Fve,R2,v2,O2,N2,C2,P2,b2,qve,Hve,Gve,jve,zve,Yve,$ve,Kve,M2,I2,x2,L2,D2,w2,U2,k2,V2,B2,F2,Wve,Xve,Qve,Jve,Zve,eOe,tOe,rOe,nOe,iOe,oOe,sOe,q2,H2,G2,j2,z2,Y2,$2,K2,W2,X2,aOe,cOe,uOe,lOe,dOe,pOe,fOe,hOe,_Oe,mOe,EOe,Q2=E(()=>{IN();CG="cloud.provider",PG="cloud.account.id",bG="cloud.region",MG="cloud.availability_zone",IG="cloud.platform",xG="aws.ecs.container.arn",LG="aws.ecs.cluster.arn",DG="aws.ecs.launchtype",wG="aws.ecs.task.arn",UG="aws.ecs.task.family",kG="aws.ecs.task.revision",VG="aws.eks.cluster.arn",BG="aws.log.group.names",FG="aws.log.group.arns",qG="aws.log.stream.names",HG="aws.log.stream.arns",GG="container.name",jG="container.id",zG="container.runtime",YG="container.image.name",$G="container.image.tag",KG="deployment.environment",WG="device.id",XG="device.model.identifier",QG="device.model.name",JG="faas.name",ZG="faas.id",ej="faas.version",tj="faas.instance",rj="faas.max_memory",nj="host.id",ij="host.name",oj="host.type",sj="host.arch",aj="host.image.name",cj="host.image.id",uj="host.image.version",lj="k8s.cluster.name",dj="k8s.node.name",pj="k8s.node.uid",fj="k8s.namespace.name",hj="k8s.pod.uid",_j="k8s.pod.name",mj="k8s.container.name",Ej="k8s.replicaset.uid",Tj="k8s.replicaset.name",Sj="k8s.deployment.uid",gj="k8s.deployment.name",yj="k8s.statefulset.uid",Aj="k8s.statefulset.name",Rj="k8s.daemonset.uid",vj="k8s.daemonset.name",Oj="k8s.job.uid",Nj="k8s.job.name",Cj="k8s.cronjob.uid",Pj="k8s.cronjob.name",bj="os.type",Mj="os.description",Ij="os.name",xj="os.version",Lj="process.pid",Dj="process.executable.name",wj="process.executable.path",Uj="process.command",kj="process.command_line",Vj="process.command_args",Bj="process.owner",Fj="process.runtime.name",qj="process.runtime.version",Hj="process.runtime.description",Gj="service.name",jj="service.namespace",zj="service.instance.id",Yj="service.version",$j="telemetry.sdk.name",Kj="telemetry.sdk.language",Wj="telemetry.sdk.version",Xj="telemetry.auto.version",Qj="webengine.name",Jj="webengine.version",Zj="webengine.description",ss=CG,iRe=PG,as=bG,oRe=MG,cs=IG,sRe=xG,aRe=LG,cRe=DG,uRe=wG,lRe=UG,dRe=kG,pRe=VG,fRe=BG,hRe=FG,_Re=qG,mRe=HG,ERe=GG,TRe=jG,SRe=zG,gRe=YG,yRe=$G,xN=KG,ARe=WG,RRe=XG,vRe=QG,ORe=JG,NRe=ZG,CRe=ej,sE=tj,aE=rj,Jc=nj,cE=ij,uE=oj,PRe=sj,bRe=aj,MRe=cj,IRe=uj,xRe=lj,LRe=dj,DRe=pj,wRe=fj,URe=hj,kRe=_j,VRe=mj,BRe=Ej,FRe=Tj,qRe=Sj,HRe=gj,GRe=yj,jRe=Aj,zRe=Rj,YRe=vj,$Re=Oj,KRe=Nj,WRe=Cj,XRe=Pj,QRe=bj,JRe=Mj,ZRe=Ij,lE=xj,LN=Lj,eve=Dj,tve=wj,rve=Uj,nve=kj,ive=Vj,ove=Bj,sve=Fj,ave=qj,cve=Hj,Zc=Gj,uve=jj,DN=zj,lve=Yj,dve=$j,pve=Kj,fve=Wj,hve=Xj,_ve=Qj,mve=Jj,Eve=Zj,Tve=Mt([CG,PG,bG,MG,IG,xG,LG,DG,wG,UG,kG,VG,BG,FG,qG,HG,GG,jG,zG,YG,$G,KG,WG,XG,QG,JG,ZG,ej,tj,rj,nj,ij,oj,sj,aj,cj,uj,lj,dj,pj,fj,hj,_j,mj,Ej,Tj,Sj,gj,yj,Aj,Rj,vj,Oj,Nj,Cj,Pj,bj,Mj,Ij,xj,Lj,Dj,wj,Uj,kj,Vj,Bj,Fj,qj,Hj,Gj,jj,zj,Yj,$j,Kj,Wj,Xj,Qj,Jj,Zj]),e2="alibaba_cloud",t2="aws",r2="azure",n2="gcp",Sve=e2,gve=t2,ga=r2,yve=n2,Ave=Mt([e2,t2,r2,n2]),i2="alibaba_cloud_ecs",o2="alibaba_cloud_fc",s2="aws_ec2",a2="aws_ecs",c2="aws_eks",u2="aws_lambda",l2="aws_elastic_beanstalk",d2="azure_vm",p2="azure_container_instances",f2="azure_aks",h2="azure_functions",_2="azure_app_service",m2="gcp_compute_engine",E2="gcp_cloud_run",T2="gcp_kubernetes_engine",S2="gcp_cloud_functions",g2="gcp_app_engine",Rve=i2,vve=o2,Ove=s2,Nve=a2,Cve=c2,Pve=u2,bve=l2,wN=d2,Mve=p2,Ive=f2,UN=h2,kN=_2,xve=m2,Lve=E2,Dve=T2,wve=S2,Uve=g2,kve=Mt([i2,o2,s2,a2,c2,u2,l2,d2,p2,f2,h2,_2,m2,E2,T2,S2,g2]),y2="ec2",A2="fargate",Vve=y2,Bve=A2,Fve=Mt([y2,A2]),R2="amd64",v2="arm32",O2="arm64",N2="ia64",C2="ppc32",P2="ppc64",b2="x86",qve=R2,Hve=v2,Gve=O2,jve=N2,zve=C2,Yve=P2,$ve=b2,Kve=Mt([R2,v2,O2,N2,C2,P2,b2]),M2="windows",I2="linux",x2="darwin",L2="freebsd",D2="netbsd",w2="openbsd",U2="dragonflybsd",k2="hpux",V2="aix",B2="solaris",F2="z_os",Wve=M2,Xve=I2,Qve=x2,Jve=L2,Zve=D2,eOe=w2,tOe=U2,rOe=k2,nOe=V2,iOe=B2,oOe=F2,sOe=Mt([M2,I2,x2,L2,D2,w2,U2,k2,V2,B2,F2]),q2="cpp",H2="dotnet",G2="erlang",j2="go",z2="java",Y2="nodejs",$2="php",K2="python",W2="ruby",X2="webjs",aOe=q2,cOe=H2,uOe=G2,lOe=j2,dOe=z2,pOe=Y2,fOe=$2,hOe=K2,_Oe=W2,mOe=X2,EOe=Mt([q2,H2,G2,j2,z2,Y2,$2,K2,W2,X2]);});var J2=E(()=>{Q2();});var TOe,SOe,gOe,yOe,AOe,ROe,vOe,OOe,NOe,COe,POe,bOe,MOe,IOe,xOe,LOe,DOe,wOe,UOe,kOe,VOe,BOe,FOe,qOe,HOe,GOe,jOe,zOe,YOe,$Oe,KOe,WOe,XOe,QOe,JOe,ZOe,eNe,tNe,rNe,nNe,iNe,oNe,sNe,aNe,cNe,uNe,bp,VN,Mp,lNe,dNe,pNe,fNe,hNe,_Ne,mNe,ENe,TNe,SNe,gNe,yNe,ANe,RNe,vNe,ONe,NNe,CNe,PNe,bNe,MNe,INe,xNe,LNe,DNe,wNe,UNe,kNe,VNe,BNe,FNe,qNe,HNe,GNe,jNe,zNe,YNe,$Ne,KNe,WNe,XNe,QNe,JNe,ZNe,eCe,tCe,rCe,nCe,iCe,oCe,sCe,aCe,cCe,uCe,Ao,lCe,dCe,pCe,fCe,hCe,_Ce,mCe,ECe,TCe,eu,SCe,gCe,yCe,ACe,RCe,BN,vCe,OCe,NCe,CCe,PCe,bCe,tu,ru,MCe,ICe,xCe,LCe,DCe,wCe,Z2=E(()=>{TOe="aspnetcore.diagnostics.exception.result",SOe="aborted",gOe="handled",yOe="skipped",AOe="unhandled",ROe="aspnetcore.diagnostics.handler.type",vOe="aspnetcore.rate_limiting.policy",OOe="aspnetcore.rate_limiting.result",NOe="acquired",COe="endpoint_limiter",POe="global_limiter",bOe="request_canceled",MOe="aspnetcore.request.is_unhandled",IOe="aspnetcore.routing.is_fallback",xOe="aspnetcore.routing.match_status",LOe="failure",DOe="success",wOe="client.address",UOe="client.port",kOe="code.column.number",VOe="code.file.path",BOe="code.function.name",FOe="code.line.number",qOe="code.stacktrace",HOe="db.collection.name",GOe="db.namespace",jOe="db.operation.batch.size",zOe="db.operation.name",YOe="db.query.summary",$Oe="db.query.text",KOe="db.response.status_code",WOe="db.stored_procedure.name",XOe="db.system.name",QOe="mariadb",JOe="microsoft.sql_server",ZOe="mysql",eNe="postgresql",tNe="dotnet.gc.heap.generation",rNe="gen0",nNe="gen1",iNe="gen2",oNe="loh",sNe="poh",aNe="error.type",cNe="_OTHER",uNe="exception.escaped",bp="exception.message",VN="exception.stacktrace",Mp="exception.type",lNe=t=>`http.request.header.${t}`,dNe="http.request.method",pNe="_OTHER",fNe="CONNECT",hNe="DELETE",_Ne="GET",mNe="HEAD",ENe="OPTIONS",TNe="PATCH",SNe="POST",gNe="PUT",yNe="TRACE",ANe="http.request.method_original",RNe="http.request.resend_count",vNe=t=>`http.response.header.${t}`,ONe="http.response.status_code",NNe="http.route",CNe="jvm.gc.action",PNe="jvm.gc.name",bNe="jvm.memory.pool.name",MNe="jvm.memory.type",INe="heap",xNe="non_heap",LNe="jvm.thread.daemon",DNe="jvm.thread.state",wNe="blocked",UNe="new",kNe="runnable",VNe="terminated",BNe="timed_waiting",FNe="waiting",qNe="network.local.address",HNe="network.local.port",GNe="network.peer.address",jNe="network.peer.port",zNe="network.protocol.name",YNe="network.protocol.version",$Ne="network.transport",KNe="pipe",WNe="quic",XNe="tcp",QNe="udp",JNe="unix",ZNe="network.type",eCe="ipv4",tCe="ipv6",rCe="otel.scope.name",nCe="otel.scope.version",iCe="otel.status_code",oCe="ERROR",sCe="OK",aCe="otel.status_description",cCe="server.address",uCe="server.port",Ao="service.name",lCe="service.version",dCe="signalr.connection.status",pCe="app_shutdown",fCe="normal_closure",hCe="timeout",_Ce="signalr.transport",mCe="long_polling",ECe="server_sent_events",TCe="web_sockets",eu="telemetry.sdk.language",SCe="cpp",gCe="dotnet",yCe="erlang",ACe="go",RCe="java",BN="nodejs",vCe="php",OCe="python",NCe="ruby",CCe="rust",PCe="swift",bCe="webjs",tu="telemetry.sdk.name",ru="telemetry.sdk.version",MCe="url.fragment",ICe="url.full",xCe="url.path",LCe="url.query",DCe="url.scheme",wCe="user_agent.original";});var UCe,kCe,VCe,BCe,FCe,qCe,HCe,GCe,jCe,zCe,YCe,$Ce,KCe,WCe,XCe,QCe,JCe,ZCe,ePe,tPe,rPe,nPe,iPe,oPe,sPe,aPe,cPe,uPe,lPe,dPe,pPe,fPe,hPe,_Pe,mPe,EPe,TPe,SPe,gPe,yPe,APe,RPe,vPe,OPe,NPe,CPe,PPe,bPe,MPe,IPe,xPe,ez=E(()=>{UCe="aspnetcore.diagnostics.exceptions",kCe="aspnetcore.rate_limiting.active_request_leases",VCe="aspnetcore.rate_limiting.queued_requests",BCe="aspnetcore.rate_limiting.request.time_in_queue",FCe="aspnetcore.rate_limiting.request_lease.duration",qCe="aspnetcore.rate_limiting.requests",HCe="aspnetcore.routing.match_attempts",GCe="db.client.operation.duration",jCe="dotnet.assembly.count",zCe="dotnet.exceptions",YCe="dotnet.gc.collections",$Ce="dotnet.gc.heap.total_allocated",KCe="dotnet.gc.last_collection.heap.fragmentation.size",WCe="dotnet.gc.last_collection.heap.size",XCe="dotnet.gc.last_collection.memory.committed_size",QCe="dotnet.gc.pause.time",JCe="dotnet.jit.compilation.time",ZCe="dotnet.jit.compiled_il.size",ePe="dotnet.jit.compiled_methods",tPe="dotnet.monitor.lock_contentions",rPe="dotnet.process.cpu.count",nPe="dotnet.process.cpu.time",iPe="dotnet.process.memory.working_set",oPe="dotnet.thread_pool.queue.length",sPe="dotnet.thread_pool.thread.count",aPe="dotnet.thread_pool.work_item.count",cPe="dotnet.timer.count",uPe="http.client.request.duration",lPe="http.server.request.duration",dPe="jvm.class.count",pPe="jvm.class.loaded",fPe="jvm.class.unloaded",hPe="jvm.cpu.count",_Pe="jvm.cpu.recent_utilization",mPe="jvm.cpu.time",EPe="jvm.gc.duration",TPe="jvm.memory.committed",SPe="jvm.memory.limit",gPe="jvm.memory.used",yPe="jvm.memory.used_after_last_gc",APe="jvm.thread.count",RPe="kestrel.active_connections",vPe="kestrel.active_tls_handshakes",OPe="kestrel.connection.duration",NPe="kestrel.queued_connections",CPe="kestrel.queued_requests",PPe="kestrel.rejected_connections",bPe="kestrel.tls_handshake.duration",MPe="kestrel.upgraded_connections",IPe="signalr.server.active_connections",xPe="signalr.server.connection.duration";});var Zt={};Ue(Zt,{ASPNETCORE_DIAGNOSTICS_EXCEPTION_RESULT_VALUE_ABORTED:()=>SOe,ASPNETCORE_DIAGNOSTICS_EXCEPTION_RESULT_VALUE_HANDLED:()=>gOe,ASPNETCORE_DIAGNOSTICS_EXCEPTION_RESULT_VALUE_SKIPPED:()=>yOe,ASPNETCORE_DIAGNOSTICS_EXCEPTION_RESULT_VALUE_UNHANDLED:()=>AOe,ASPNETCORE_RATE_LIMITING_RESULT_VALUE_ACQUIRED:()=>NOe,ASPNETCORE_RATE_LIMITING_RESULT_VALUE_ENDPOINT_LIMITER:()=>COe,ASPNETCORE_RATE_LIMITING_RESULT_VALUE_GLOBAL_LIMITER:()=>POe,ASPNETCORE_RATE_LIMITING_RESULT_VALUE_REQUEST_CANCELED:()=>bOe,ASPNETCORE_ROUTING_MATCH_STATUS_VALUE_FAILURE:()=>LOe,ASPNETCORE_ROUTING_MATCH_STATUS_VALUE_SUCCESS:()=>DOe,ATTR_ASPNETCORE_DIAGNOSTICS_EXCEPTION_RESULT:()=>TOe,ATTR_ASPNETCORE_DIAGNOSTICS_HANDLER_TYPE:()=>ROe,ATTR_ASPNETCORE_RATE_LIMITING_POLICY:()=>vOe,ATTR_ASPNETCORE_RATE_LIMITING_RESULT:()=>OOe,ATTR_ASPNETCORE_REQUEST_IS_UNHANDLED:()=>MOe,ATTR_ASPNETCORE_ROUTING_IS_FALLBACK:()=>IOe,ATTR_ASPNETCORE_ROUTING_MATCH_STATUS:()=>xOe,ATTR_CLIENT_ADDRESS:()=>wOe,ATTR_CLIENT_PORT:()=>UOe,ATTR_CODE_COLUMN_NUMBER:()=>kOe,ATTR_CODE_FILE_PATH:()=>VOe,ATTR_CODE_FUNCTION_NAME:()=>BOe,ATTR_CODE_LINE_NUMBER:()=>FOe,ATTR_CODE_STACKTRACE:()=>qOe,ATTR_DB_COLLECTION_NAME:()=>HOe,ATTR_DB_NAMESPACE:()=>GOe,ATTR_DB_OPERATION_BATCH_SIZE:()=>jOe,ATTR_DB_OPERATION_NAME:()=>zOe,ATTR_DB_QUERY_SUMMARY:()=>YOe,ATTR_DB_QUERY_TEXT:()=>$Oe,ATTR_DB_RESPONSE_STATUS_CODE:()=>KOe,ATTR_DB_STORED_PROCEDURE_NAME:()=>WOe,ATTR_DB_SYSTEM_NAME:()=>XOe,ATTR_DOTNET_GC_HEAP_GENERATION:()=>tNe,ATTR_ERROR_TYPE:()=>aNe,ATTR_EXCEPTION_ESCAPED:()=>uNe,ATTR_EXCEPTION_MESSAGE:()=>bp,ATTR_EXCEPTION_STACKTRACE:()=>VN,ATTR_EXCEPTION_TYPE:()=>Mp,ATTR_HTTP_REQUEST_HEADER:()=>lNe,ATTR_HTTP_REQUEST_METHOD:()=>dNe,ATTR_HTTP_REQUEST_METHOD_ORIGINAL:()=>ANe,ATTR_HTTP_REQUEST_RESEND_COUNT:()=>RNe,ATTR_HTTP_RESPONSE_HEADER:()=>vNe,ATTR_HTTP_RESPONSE_STATUS_CODE:()=>ONe,ATTR_HTTP_ROUTE:()=>NNe,ATTR_JVM_GC_ACTION:()=>CNe,ATTR_JVM_GC_NAME:()=>PNe,ATTR_JVM_MEMORY_POOL_NAME:()=>bNe,ATTR_JVM_MEMORY_TYPE:()=>MNe,ATTR_JVM_THREAD_DAEMON:()=>LNe,ATTR_JVM_THREAD_STATE:()=>DNe,ATTR_NETWORK_LOCAL_ADDRESS:()=>qNe,ATTR_NETWORK_LOCAL_PORT:()=>HNe,ATTR_NETWORK_PEER_ADDRESS:()=>GNe,ATTR_NETWORK_PEER_PORT:()=>jNe,ATTR_NETWORK_PROTOCOL_NAME:()=>zNe,ATTR_NETWORK_PROTOCOL_VERSION:()=>YNe,ATTR_NETWORK_TRANSPORT:()=>$Ne,ATTR_NETWORK_TYPE:()=>ZNe,ATTR_OTEL_SCOPE_NAME:()=>rCe,ATTR_OTEL_SCOPE_VERSION:()=>nCe,ATTR_OTEL_STATUS_CODE:()=>iCe,ATTR_OTEL_STATUS_DESCRIPTION:()=>aCe,ATTR_SERVER_ADDRESS:()=>cCe,ATTR_SERVER_PORT:()=>uCe,ATTR_SERVICE_NAME:()=>Ao,ATTR_SERVICE_VERSION:()=>lCe,ATTR_SIGNALR_CONNECTION_STATUS:()=>dCe,ATTR_SIGNALR_TRANSPORT:()=>_Ce,ATTR_TELEMETRY_SDK_LANGUAGE:()=>eu,ATTR_TELEMETRY_SDK_NAME:()=>tu,ATTR_TELEMETRY_SDK_VERSION:()=>ru,ATTR_URL_FRAGMENT:()=>MCe,ATTR_URL_FULL:()=>ICe,ATTR_URL_PATH:()=>xCe,ATTR_URL_QUERY:()=>LCe,ATTR_URL_SCHEME:()=>DCe,ATTR_USER_AGENT_ORIGINAL:()=>wCe,AWSECSLAUNCHTYPEVALUES_EC2:()=>Vve,AWSECSLAUNCHTYPEVALUES_FARGATE:()=>Bve,AwsEcsLaunchtypeValues:()=>Fve,CLOUDPLATFORMVALUES_ALIBABA_CLOUD_ECS:()=>Rve,CLOUDPLATFORMVALUES_ALIBABA_CLOUD_FC:()=>vve,CLOUDPLATFORMVALUES_AWS_EC2:()=>Ove,CLOUDPLATFORMVALUES_AWS_ECS:()=>Nve,CLOUDPLATFORMVALUES_AWS_EKS:()=>Cve,CLOUDPLATFORMVALUES_AWS_ELASTIC_BEANSTALK:()=>bve,CLOUDPLATFORMVALUES_AWS_LAMBDA:()=>Pve,CLOUDPLATFORMVALUES_AZURE_AKS:()=>Ive,CLOUDPLATFORMVALUES_AZURE_APP_SERVICE:()=>kN,CLOUDPLATFORMVALUES_AZURE_CONTAINER_INSTANCES:()=>Mve,CLOUDPLATFORMVALUES_AZURE_FUNCTIONS:()=>UN,CLOUDPLATFORMVALUES_AZURE_VM:()=>wN,CLOUDPLATFORMVALUES_GCP_APP_ENGINE:()=>Uve,CLOUDPLATFORMVALUES_GCP_CLOUD_FUNCTIONS:()=>wve,CLOUDPLATFORMVALUES_GCP_CLOUD_RUN:()=>Lve,CLOUDPLATFORMVALUES_GCP_COMPUTE_ENGINE:()=>xve,CLOUDPLATFORMVALUES_GCP_KUBERNETES_ENGINE:()=>Dve,CLOUDPROVIDERVALUES_ALIBABA_CLOUD:()=>Sve,CLOUDPROVIDERVALUES_AWS:()=>gve,CLOUDPROVIDERVALUES_AZURE:()=>ga,CLOUDPROVIDERVALUES_GCP:()=>yve,CloudPlatformValues:()=>kve,CloudProviderValues:()=>Ave,DBCASSANDRACONSISTENCYLEVELVALUES_ALL:()=>mye,DBCASSANDRACONSISTENCYLEVELVALUES_ANY:()=>vye,DBCASSANDRACONSISTENCYLEVELVALUES_EACH_QUORUM:()=>Eye,DBCASSANDRACONSISTENCYLEVELVALUES_LOCAL_ONE:()=>Rye,DBCASSANDRACONSISTENCYLEVELVALUES_LOCAL_QUORUM:()=>Sye,DBCASSANDRACONSISTENCYLEVELVALUES_LOCAL_SERIAL:()=>Nye,DBCASSANDRACONSISTENCYLEVELVALUES_ONE:()=>gye,DBCASSANDRACONSISTENCYLEVELVALUES_QUORUM:()=>Tye,DBCASSANDRACONSISTENCYLEVELVALUES_SERIAL:()=>Oye,DBCASSANDRACONSISTENCYLEVELVALUES_THREE:()=>Aye,DBCASSANDRACONSISTENCYLEVELVALUES_TWO:()=>yye,DBSYSTEMVALUES_ADABAS:()=>Bge,DBSYSTEMVALUES_CACHE:()=>Vge,DBSYSTEMVALUES_CASSANDRA:()=>rye,DBSYSTEMVALUES_CLOUDSCAPE:()=>Mge,DBSYSTEMVALUES_COCKROACHDB:()=>hye,DBSYSTEMVALUES_COLDFUSION:()=>tye,DBSYSTEMVALUES_COSMOSDB:()=>cye,DBSYSTEMVALUES_COUCHBASE:()=>sye,DBSYSTEMVALUES_COUCHDB:()=>aye,DBSYSTEMVALUES_DB2:()=>Nge,DBSYSTEMVALUES_DERBY:()=>qge,DBSYSTEMVALUES_DYNAMODB:()=>uye,DBSYSTEMVALUES_EDB:()=>kge,DBSYSTEMVALUES_ELASTICSEARCH:()=>pye,DBSYSTEMVALUES_FILEMAKER:()=>Hge,DBSYSTEMVALUES_FIREBIRD:()=>Fge,DBSYSTEMVALUES_FIRSTSQL:()=>Uge,DBSYSTEMVALUES_GEODE:()=>dye,DBSYSTEMVALUES_H2:()=>eye,DBSYSTEMVALUES_HANADB:()=>Dge,DBSYSTEMVALUES_HBASE:()=>nye,DBSYSTEMVALUES_HIVE:()=>bge,DBSYSTEMVALUES_HSQLDB:()=>Ige,DBSYSTEMVALUES_INFORMIX:()=>Gge,DBSYSTEMVALUES_INGRES:()=>wge,DBSYSTEMVALUES_INSTANTDB:()=>jge,DBSYSTEMVALUES_INTERBASE:()=>zge,DBSYSTEMVALUES_MARIADB:()=>Yge,DBSYSTEMVALUES_MAXDB:()=>Lge,DBSYSTEMVALUES_MEMCACHED:()=>fye,DBSYSTEMVALUES_MONGODB:()=>iye,DBSYSTEMVALUES_MSSQL:()=>Rge,DBSYSTEMVALUES_MYSQL:()=>vge,DBSYSTEMVALUES_NEO4J:()=>lye,DBSYSTEMVALUES_NETEZZA:()=>$ge,DBSYSTEMVALUES_ORACLE:()=>Oge,DBSYSTEMVALUES_OTHER_SQL:()=>Age,DBSYSTEMVALUES_PERVASIVE:()=>Kge,DBSYSTEMVALUES_POINTBASE:()=>Wge,DBSYSTEMVALUES_POSTGRESQL:()=>Cge,DBSYSTEMVALUES_PROGRESS:()=>xge,DBSYSTEMVALUES_REDIS:()=>oye,DBSYSTEMVALUES_REDSHIFT:()=>Pge,DBSYSTEMVALUES_SQLITE:()=>Xge,DBSYSTEMVALUES_SYBASE:()=>Qge,DBSYSTEMVALUES_TERADATA:()=>Jge,DBSYSTEMVALUES_VERTICA:()=>Zge,DB_SYSTEM_NAME_VALUE_MARIADB:()=>QOe,DB_SYSTEM_NAME_VALUE_MICROSOFT_SQL_SERVER:()=>JOe,DB_SYSTEM_NAME_VALUE_MYSQL:()=>ZOe,DB_SYSTEM_NAME_VALUE_POSTGRESQL:()=>eNe,DOTNET_GC_HEAP_GENERATION_VALUE_GEN0:()=>rNe,DOTNET_GC_HEAP_GENERATION_VALUE_GEN1:()=>nNe,DOTNET_GC_HEAP_GENERATION_VALUE_GEN2:()=>iNe,DOTNET_GC_HEAP_GENERATION_VALUE_LOH:()=>oNe,DOTNET_GC_HEAP_GENERATION_VALUE_POH:()=>sNe,DbCassandraConsistencyLevelValues:()=>Cye,DbSystemValues:()=>_ye,ERROR_TYPE_VALUE_OTHER:()=>cNe,FAASDOCUMENTOPERATIONVALUES_DELETE:()=>Uye,FAASDOCUMENTOPERATIONVALUES_EDIT:()=>wye,FAASDOCUMENTOPERATIONVALUES_INSERT:()=>Dye,FAASINVOKEDPROVIDERVALUES_ALIBABA_CLOUD:()=>Vye,FAASINVOKEDPROVIDERVALUES_AWS:()=>Bye,FAASINVOKEDPROVIDERVALUES_AZURE:()=>Fye,FAASINVOKEDPROVIDERVALUES_GCP:()=>qye,FAASTRIGGERVALUES_DATASOURCE:()=>Pye,FAASTRIGGERVALUES_HTTP:()=>bye,FAASTRIGGERVALUES_OTHER:()=>xye,FAASTRIGGERVALUES_PUBSUB:()=>Mye,FAASTRIGGERVALUES_TIMER:()=>Iye,FaasDocumentOperationValues:()=>kye,FaasInvokedProviderValues:()=>Hye,FaasTriggerValues:()=>Lye,HOSTARCHVALUES_AMD64:()=>qve,HOSTARCHVALUES_ARM32:()=>Hve,HOSTARCHVALUES_ARM64:()=>Gve,HOSTARCHVALUES_IA64:()=>jve,HOSTARCHVALUES_PPC32:()=>zve,HOSTARCHVALUES_PPC64:()=>Yve,HOSTARCHVALUES_X86:()=>$ve,HTTPFLAVORVALUES_HTTP_1_0:()=>OAe,HTTPFLAVORVALUES_HTTP_1_1:()=>NAe,HTTPFLAVORVALUES_HTTP_2_0:()=>CAe,HTTPFLAVORVALUES_QUIC:()=>bAe,HTTPFLAVORVALUES_SPDY:()=>PAe,HTTP_REQUEST_METHOD_VALUE_CONNECT:()=>fNe,HTTP_REQUEST_METHOD_VALUE_DELETE:()=>hNe,HTTP_REQUEST_METHOD_VALUE_GET:()=>_Ne,HTTP_REQUEST_METHOD_VALUE_HEAD:()=>mNe,HTTP_REQUEST_METHOD_VALUE_OPTIONS:()=>ENe,HTTP_REQUEST_METHOD_VALUE_OTHER:()=>pNe,HTTP_REQUEST_METHOD_VALUE_PATCH:()=>TNe,HTTP_REQUEST_METHOD_VALUE_POST:()=>SNe,HTTP_REQUEST_METHOD_VALUE_PUT:()=>gNe,HTTP_REQUEST_METHOD_VALUE_TRACE:()=>yNe,HostArchValues:()=>Kve,HttpFlavorValues:()=>MAe,JVM_MEMORY_TYPE_VALUE_HEAP:()=>INe,JVM_MEMORY_TYPE_VALUE_NON_HEAP:()=>xNe,JVM_THREAD_STATE_VALUE_BLOCKED:()=>wNe,JVM_THREAD_STATE_VALUE_NEW:()=>UNe,JVM_THREAD_STATE_VALUE_RUNNABLE:()=>kNe,JVM_THREAD_STATE_VALUE_TERMINATED:()=>VNe,JVM_THREAD_STATE_VALUE_TIMED_WAITING:()=>BNe,JVM_THREAD_STATE_VALUE_WAITING:()=>FNe,MESSAGETYPEVALUES_RECEIVED:()=>rRe,MESSAGETYPEVALUES_SENT:()=>tRe,MESSAGINGDESTINATIONKINDVALUES_QUEUE:()=>IAe,MESSAGINGDESTINATIONKINDVALUES_TOPIC:()=>xAe,MESSAGINGOPERATIONVALUES_PROCESS:()=>wAe,MESSAGINGOPERATIONVALUES_RECEIVE:()=>DAe,METRIC_ASPNETCORE_DIAGNOSTICS_EXCEPTIONS:()=>UCe,METRIC_ASPNETCORE_RATE_LIMITING_ACTIVE_REQUEST_LEASES:()=>kCe,METRIC_ASPNETCORE_RATE_LIMITING_QUEUED_REQUESTS:()=>VCe,METRIC_ASPNETCORE_RATE_LIMITING_REQUESTS:()=>qCe,METRIC_ASPNETCORE_RATE_LIMITING_REQUEST_LEASE_DURATION:()=>FCe,METRIC_ASPNETCORE_RATE_LIMITING_REQUEST_TIME_IN_QUEUE:()=>BCe,METRIC_ASPNETCORE_ROUTING_MATCH_ATTEMPTS:()=>HCe,METRIC_DB_CLIENT_OPERATION_DURATION:()=>GCe,METRIC_DOTNET_ASSEMBLY_COUNT:()=>jCe,METRIC_DOTNET_EXCEPTIONS:()=>zCe,METRIC_DOTNET_GC_COLLECTIONS:()=>YCe,METRIC_DOTNET_GC_HEAP_TOTAL_ALLOCATED:()=>$Ce,METRIC_DOTNET_GC_LAST_COLLECTION_HEAP_FRAGMENTATION_SIZE:()=>KCe,METRIC_DOTNET_GC_LAST_COLLECTION_HEAP_SIZE:()=>WCe,METRIC_DOTNET_GC_LAST_COLLECTION_MEMORY_COMMITTED_SIZE:()=>XCe,METRIC_DOTNET_GC_PAUSE_TIME:()=>QCe,METRIC_DOTNET_JIT_COMPILATION_TIME:()=>JCe,METRIC_DOTNET_JIT_COMPILED_IL_SIZE:()=>ZCe,METRIC_DOTNET_JIT_COMPILED_METHODS:()=>ePe,METRIC_DOTNET_MONITOR_LOCK_CONTENTIONS:()=>tPe,METRIC_DOTNET_PROCESS_CPU_COUNT:()=>rPe,METRIC_DOTNET_PROCESS_CPU_TIME:()=>nPe,METRIC_DOTNET_PROCESS_MEMORY_WORKING_SET:()=>iPe,METRIC_DOTNET_THREAD_POOL_QUEUE_LENGTH:()=>oPe,METRIC_DOTNET_THREAD_POOL_THREAD_COUNT:()=>sPe,METRIC_DOTNET_THREAD_POOL_WORK_ITEM_COUNT:()=>aPe,METRIC_DOTNET_TIMER_COUNT:()=>cPe,METRIC_HTTP_CLIENT_REQUEST_DURATION:()=>uPe,METRIC_HTTP_SERVER_REQUEST_DURATION:()=>lPe,METRIC_JVM_CLASS_COUNT:()=>dPe,METRIC_JVM_CLASS_LOADED:()=>pPe,METRIC_JVM_CLASS_UNLOADED:()=>fPe,METRIC_JVM_CPU_COUNT:()=>hPe,METRIC_JVM_CPU_RECENT_UTILIZATION:()=>_Pe,METRIC_JVM_CPU_TIME:()=>mPe,METRIC_JVM_GC_DURATION:()=>EPe,METRIC_JVM_MEMORY_COMMITTED:()=>TPe,METRIC_JVM_MEMORY_LIMIT:()=>SPe,METRIC_JVM_MEMORY_USED:()=>gPe,METRIC_JVM_MEMORY_USED_AFTER_LAST_GC:()=>yPe,METRIC_JVM_THREAD_COUNT:()=>APe,METRIC_KESTREL_ACTIVE_CONNECTIONS:()=>RPe,METRIC_KESTREL_ACTIVE_TLS_HANDSHAKES:()=>vPe,METRIC_KESTREL_CONNECTION_DURATION:()=>OPe,METRIC_KESTREL_QUEUED_CONNECTIONS:()=>NPe,METRIC_KESTREL_QUEUED_REQUESTS:()=>CPe,METRIC_KESTREL_REJECTED_CONNECTIONS:()=>PPe,METRIC_KESTREL_TLS_HANDSHAKE_DURATION:()=>bPe,METRIC_KESTREL_UPGRADED_CONNECTIONS:()=>MPe,METRIC_SIGNALR_SERVER_ACTIVE_CONNECTIONS:()=>IPe,METRIC_SIGNALR_SERVER_CONNECTION_DURATION:()=>xPe,MessageTypeValues:()=>nRe,MessagingDestinationKindValues:()=>LAe,MessagingOperationValues:()=>UAe,NETHOSTCONNECTIONSUBTYPEVALUES_CDMA:()=>sAe,NETHOSTCONNECTIONSUBTYPEVALUES_CDMA2000_1XRTT:()=>uAe,NETHOSTCONNECTIONSUBTYPEVALUES_EDGE:()=>iAe,NETHOSTCONNECTIONSUBTYPEVALUES_EHRPD:()=>mAe,NETHOSTCONNECTIONSUBTYPEVALUES_EVDO_0:()=>aAe,NETHOSTCONNECTIONSUBTYPEVALUES_EVDO_A:()=>cAe,NETHOSTCONNECTIONSUBTYPEVALUES_EVDO_B:()=>hAe,NETHOSTCONNECTIONSUBTYPEVALUES_GPRS:()=>nAe,NETHOSTCONNECTIONSUBTYPEVALUES_GSM:()=>TAe,NETHOSTCONNECTIONSUBTYPEVALUES_HSDPA:()=>lAe,NETHOSTCONNECTIONSUBTYPEVALUES_HSPA:()=>pAe,NETHOSTCONNECTIONSUBTYPEVALUES_HSPAP:()=>EAe,NETHOSTCONNECTIONSUBTYPEVALUES_HSUPA:()=>dAe,NETHOSTCONNECTIONSUBTYPEVALUES_IDEN:()=>fAe,NETHOSTCONNECTIONSUBTYPEVALUES_IWLAN:()=>gAe,NETHOSTCONNECTIONSUBTYPEVALUES_LTE:()=>_Ae,NETHOSTCONNECTIONSUBTYPEVALUES_LTE_CA:()=>RAe,NETHOSTCONNECTIONSUBTYPEVALUES_NR:()=>yAe,NETHOSTCONNECTIONSUBTYPEVALUES_NRNSA:()=>AAe,NETHOSTCONNECTIONSUBTYPEVALUES_TD_SCDMA:()=>SAe,NETHOSTCONNECTIONSUBTYPEVALUES_UMTS:()=>oAe,NETHOSTCONNECTIONTYPEVALUES_CELL:()=>Zye,NETHOSTCONNECTIONTYPEVALUES_UNAVAILABLE:()=>eAe,NETHOSTCONNECTIONTYPEVALUES_UNKNOWN:()=>tAe,NETHOSTCONNECTIONTYPEVALUES_WIFI:()=>Qye,NETHOSTCONNECTIONTYPEVALUES_WIRED:()=>Jye,NETTRANSPORTVALUES_INPROC:()=>Kye,NETTRANSPORTVALUES_IP:()=>zye,NETTRANSPORTVALUES_IP_TCP:()=>Gye,NETTRANSPORTVALUES_IP_UDP:()=>jye,NETTRANSPORTVALUES_OTHER:()=>Wye,NETTRANSPORTVALUES_PIPE:()=>$ye,NETTRANSPORTVALUES_UNIX:()=>Yye,NETWORK_TRANSPORT_VALUE_PIPE:()=>KNe,NETWORK_TRANSPORT_VALUE_QUIC:()=>WNe,NETWORK_TRANSPORT_VALUE_TCP:()=>XNe,NETWORK_TRANSPORT_VALUE_UDP:()=>QNe,NETWORK_TRANSPORT_VALUE_UNIX:()=>JNe,NETWORK_TYPE_VALUE_IPV4:()=>eCe,NETWORK_TYPE_VALUE_IPV6:()=>tCe,NetHostConnectionSubtypeValues:()=>vAe,NetHostConnectionTypeValues:()=>rAe,NetTransportValues:()=>Xye,OSTYPEVALUES_AIX:()=>nOe,OSTYPEVALUES_DARWIN:()=>Qve,OSTYPEVALUES_DRAGONFLYBSD:()=>tOe,OSTYPEVALUES_FREEBSD:()=>Jve,OSTYPEVALUES_HPUX:()=>rOe,OSTYPEVALUES_LINUX:()=>Xve,OSTYPEVALUES_NETBSD:()=>Zve,OSTYPEVALUES_OPENBSD:()=>eOe,OSTYPEVALUES_SOLARIS:()=>iOe,OSTYPEVALUES_WINDOWS:()=>Wve,OSTYPEVALUES_Z_OS:()=>oOe,OTEL_STATUS_CODE_VALUE_ERROR:()=>oCe,OTEL_STATUS_CODE_VALUE_OK:()=>sCe,OsTypeValues:()=>sOe,RPCGRPCSTATUSCODEVALUES_ABORTED:()=>$Ae,RPCGRPCSTATUSCODEVALUES_ALREADY_EXISTS:()=>GAe,RPCGRPCSTATUSCODEVALUES_CANCELLED:()=>VAe,RPCGRPCSTATUSCODEVALUES_DATA_LOSS:()=>JAe,RPCGRPCSTATUSCODEVALUES_DEADLINE_EXCEEDED:()=>qAe,RPCGRPCSTATUSCODEVALUES_FAILED_PRECONDITION:()=>YAe,RPCGRPCSTATUSCODEVALUES_INTERNAL:()=>XAe,RPCGRPCSTATUSCODEVALUES_INVALID_ARGUMENT:()=>FAe,RPCGRPCSTATUSCODEVALUES_NOT_FOUND:()=>HAe,RPCGRPCSTATUSCODEVALUES_OK:()=>kAe,RPCGRPCSTATUSCODEVALUES_OUT_OF_RANGE:()=>KAe,RPCGRPCSTATUSCODEVALUES_PERMISSION_DENIED:()=>jAe,RPCGRPCSTATUSCODEVALUES_RESOURCE_EXHAUSTED:()=>zAe,RPCGRPCSTATUSCODEVALUES_UNAUTHENTICATED:()=>ZAe,RPCGRPCSTATUSCODEVALUES_UNAVAILABLE:()=>QAe,RPCGRPCSTATUSCODEVALUES_UNIMPLEMENTED:()=>WAe,RPCGRPCSTATUSCODEVALUES_UNKNOWN:()=>BAe,RpcGrpcStatusCodeValues:()=>eRe,SEMATTRS_AWS_DYNAMODB_ATTRIBUTES_TO_GET:()=>MSe,SEMATTRS_AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:()=>HSe,SEMATTRS_AWS_DYNAMODB_CONSISTENT_READ:()=>CSe,SEMATTRS_AWS_DYNAMODB_CONSUMED_CAPACITY:()=>RSe,SEMATTRS_AWS_DYNAMODB_COUNT:()=>FSe,SEMATTRS_AWS_DYNAMODB_EXCLUSIVE_START_TABLE:()=>wSe,SEMATTRS_AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:()=>LSe,SEMATTRS_AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:()=>GSe,SEMATTRS_AWS_DYNAMODB_INDEX_NAME:()=>ISe,SEMATTRS_AWS_DYNAMODB_ITEM_COLLECTION_METRICS:()=>vSe,SEMATTRS_AWS_DYNAMODB_LIMIT:()=>bSe,SEMATTRS_AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:()=>DSe,SEMATTRS_AWS_DYNAMODB_PROJECTION:()=>PSe,SEMATTRS_AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:()=>OSe,SEMATTRS_AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:()=>NSe,SEMATTRS_AWS_DYNAMODB_SCANNED_COUNT:()=>qSe,SEMATTRS_AWS_DYNAMODB_SCAN_FORWARD:()=>kSe,SEMATTRS_AWS_DYNAMODB_SEGMENT:()=>VSe,SEMATTRS_AWS_DYNAMODB_SELECT:()=>xSe,SEMATTRS_AWS_DYNAMODB_TABLE_COUNT:()=>USe,SEMATTRS_AWS_DYNAMODB_TABLE_NAMES:()=>ASe,SEMATTRS_AWS_DYNAMODB_TOTAL_SEGMENTS:()=>BSe,SEMATTRS_AWS_LAMBDA_INVOKED_ARN:()=>tTe,SEMATTRS_CODE_FILEPATH:()=>oSe,SEMATTRS_CODE_FUNCTION:()=>nSe,SEMATTRS_CODE_LINENO:()=>sSe,SEMATTRS_CODE_NAMESPACE:()=>iSe,SEMATTRS_DB_CASSANDRA_CONSISTENCY_LEVEL:()=>pTe,SEMATTRS_DB_CASSANDRA_COORDINATOR_DC:()=>ETe,SEMATTRS_DB_CASSANDRA_COORDINATOR_ID:()=>mTe,SEMATTRS_DB_CASSANDRA_IDEMPOTENCE:()=>hTe,SEMATTRS_DB_CASSANDRA_KEYSPACE:()=>lTe,SEMATTRS_DB_CASSANDRA_PAGE_SIZE:()=>dTe,SEMATTRS_DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:()=>_Te,SEMATTRS_DB_CASSANDRA_TABLE:()=>fTe,SEMATTRS_DB_CONNECTION_STRING:()=>nTe,SEMATTRS_DB_HBASE_NAMESPACE:()=>TTe,SEMATTRS_DB_JDBC_DRIVER_CLASSNAME:()=>oTe,SEMATTRS_DB_MONGODB_COLLECTION:()=>gTe,SEMATTRS_DB_MSSQL_INSTANCE_NAME:()=>uTe,SEMATTRS_DB_NAME:()=>sTe,SEMATTRS_DB_OPERATION:()=>cTe,SEMATTRS_DB_REDIS_DATABASE_INDEX:()=>STe,SEMATTRS_DB_SQL_TABLE:()=>yTe,SEMATTRS_DB_STATEMENT:()=>aTe,SEMATTRS_DB_SYSTEM:()=>rTe,SEMATTRS_DB_USER:()=>iTe,SEMATTRS_ENDUSER_ID:()=>JTe,SEMATTRS_ENDUSER_ROLE:()=>ZTe,SEMATTRS_ENDUSER_SCOPE:()=>eSe,SEMATTRS_EXCEPTION_ESCAPED:()=>OTe,SEMATTRS_EXCEPTION_MESSAGE:()=>RTe,SEMATTRS_EXCEPTION_STACKTRACE:()=>vTe,SEMATTRS_EXCEPTION_TYPE:()=>ATe,SEMATTRS_FAAS_COLDSTART:()=>DTe,SEMATTRS_FAAS_CRON:()=>LTe,SEMATTRS_FAAS_DOCUMENT_COLLECTION:()=>PTe,SEMATTRS_FAAS_DOCUMENT_NAME:()=>ITe,SEMATTRS_FAAS_DOCUMENT_OPERATION:()=>bTe,SEMATTRS_FAAS_DOCUMENT_TIME:()=>MTe,SEMATTRS_FAAS_EXECUTION:()=>CTe,SEMATTRS_FAAS_INVOKED_NAME:()=>wTe,SEMATTRS_FAAS_INVOKED_PROVIDER:()=>UTe,SEMATTRS_FAAS_INVOKED_REGION:()=>kTe,SEMATTRS_FAAS_TIME:()=>xTe,SEMATTRS_FAAS_TRIGGER:()=>NTe,SEMATTRS_HTTP_CLIENT_IP:()=>ySe,SEMATTRS_HTTP_FLAVOR:()=>fSe,SEMATTRS_HTTP_HOST:()=>lSe,SEMATTRS_HTTP_METHOD:()=>aSe,SEMATTRS_HTTP_REQUEST_CONTENT_LENGTH:()=>_Se,SEMATTRS_HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:()=>mSe,SEMATTRS_HTTP_RESPONSE_CONTENT_LENGTH:()=>ESe,SEMATTRS_HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:()=>TSe,SEMATTRS_HTTP_ROUTE:()=>gSe,SEMATTRS_HTTP_SCHEME:()=>dSe,SEMATTRS_HTTP_SERVER_NAME:()=>SSe,SEMATTRS_HTTP_STATUS_CODE:()=>pSe,SEMATTRS_HTTP_TARGET:()=>uSe,SEMATTRS_HTTP_URL:()=>cSe,SEMATTRS_HTTP_USER_AGENT:()=>hSe,SEMATTRS_MESSAGE_COMPRESSED_SIZE:()=>Sge,SEMATTRS_MESSAGE_ID:()=>Tge,SEMATTRS_MESSAGE_TYPE:()=>Ege,SEMATTRS_MESSAGE_UNCOMPRESSED_SIZE:()=>gge,SEMATTRS_MESSAGING_CONSUMER_ID:()=>rge,SEMATTRS_MESSAGING_CONVERSATION_ID:()=>JSe,SEMATTRS_MESSAGING_DESTINATION:()=>zSe,SEMATTRS_MESSAGING_DESTINATION_KIND:()=>YSe,SEMATTRS_MESSAGING_KAFKA_CLIENT_ID:()=>sge,SEMATTRS_MESSAGING_KAFKA_CONSUMER_GROUP:()=>oge,SEMATTRS_MESSAGING_KAFKA_MESSAGE_KEY:()=>ige,SEMATTRS_MESSAGING_KAFKA_PARTITION:()=>age,SEMATTRS_MESSAGING_KAFKA_TOMBSTONE:()=>cge,SEMATTRS_MESSAGING_MESSAGE_ID:()=>QSe,SEMATTRS_MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:()=>ege,SEMATTRS_MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:()=>ZSe,SEMATTRS_MESSAGING_OPERATION:()=>tge,SEMATTRS_MESSAGING_PROTOCOL:()=>KSe,SEMATTRS_MESSAGING_PROTOCOL_VERSION:()=>WSe,SEMATTRS_MESSAGING_RABBITMQ_ROUTING_KEY:()=>nge,SEMATTRS_MESSAGING_SYSTEM:()=>jSe,SEMATTRS_MESSAGING_TEMP_DESTINATION:()=>$Se,SEMATTRS_MESSAGING_URL:()=>XSe,SEMATTRS_NET_HOST_CARRIER_ICC:()=>XTe,SEMATTRS_NET_HOST_CARRIER_MCC:()=>KTe,SEMATTRS_NET_HOST_CARRIER_MNC:()=>WTe,SEMATTRS_NET_HOST_CARRIER_NAME:()=>$Te,SEMATTRS_NET_HOST_CONNECTION_SUBTYPE:()=>YTe,SEMATTRS_NET_HOST_CONNECTION_TYPE:()=>zTe,SEMATTRS_NET_HOST_IP:()=>HTe,SEMATTRS_NET_HOST_NAME:()=>jTe,SEMATTRS_NET_HOST_PORT:()=>GTe,SEMATTRS_NET_PEER_IP:()=>BTe,SEMATTRS_NET_PEER_NAME:()=>qTe,SEMATTRS_NET_PEER_PORT:()=>FTe,SEMATTRS_NET_TRANSPORT:()=>VTe,SEMATTRS_PEER_SERVICE:()=>QTe,SEMATTRS_RPC_GRPC_STATUS_CODE:()=>pge,SEMATTRS_RPC_JSONRPC_ERROR_CODE:()=>_ge,SEMATTRS_RPC_JSONRPC_ERROR_MESSAGE:()=>mge,SEMATTRS_RPC_JSONRPC_REQUEST_ID:()=>hge,SEMATTRS_RPC_JSONRPC_VERSION:()=>fge,SEMATTRS_RPC_METHOD:()=>dge,SEMATTRS_RPC_SERVICE:()=>lge,SEMATTRS_RPC_SYSTEM:()=>uge,SEMATTRS_THREAD_ID:()=>tSe,SEMATTRS_THREAD_NAME:()=>rSe,SEMRESATTRS_AWS_ECS_CLUSTER_ARN:()=>aRe,SEMRESATTRS_AWS_ECS_CONTAINER_ARN:()=>sRe,SEMRESATTRS_AWS_ECS_LAUNCHTYPE:()=>cRe,SEMRESATTRS_AWS_ECS_TASK_ARN:()=>uRe,SEMRESATTRS_AWS_ECS_TASK_FAMILY:()=>lRe,SEMRESATTRS_AWS_ECS_TASK_REVISION:()=>dRe,SEMRESATTRS_AWS_EKS_CLUSTER_ARN:()=>pRe,SEMRESATTRS_AWS_LOG_GROUP_ARNS:()=>hRe,SEMRESATTRS_AWS_LOG_GROUP_NAMES:()=>fRe,SEMRESATTRS_AWS_LOG_STREAM_ARNS:()=>mRe,SEMRESATTRS_AWS_LOG_STREAM_NAMES:()=>_Re,SEMRESATTRS_CLOUD_ACCOUNT_ID:()=>iRe,SEMRESATTRS_CLOUD_AVAILABILITY_ZONE:()=>oRe,SEMRESATTRS_CLOUD_PLATFORM:()=>cs,SEMRESATTRS_CLOUD_PROVIDER:()=>ss,SEMRESATTRS_CLOUD_REGION:()=>as,SEMRESATTRS_CONTAINER_ID:()=>TRe,SEMRESATTRS_CONTAINER_IMAGE_NAME:()=>gRe,SEMRESATTRS_CONTAINER_IMAGE_TAG:()=>yRe,SEMRESATTRS_CONTAINER_NAME:()=>ERe,SEMRESATTRS_CONTAINER_RUNTIME:()=>SRe,SEMRESATTRS_DEPLOYMENT_ENVIRONMENT:()=>xN,SEMRESATTRS_DEVICE_ID:()=>ARe,SEMRESATTRS_DEVICE_MODEL_IDENTIFIER:()=>RRe,SEMRESATTRS_DEVICE_MODEL_NAME:()=>vRe,SEMRESATTRS_FAAS_ID:()=>NRe,SEMRESATTRS_FAAS_INSTANCE:()=>sE,SEMRESATTRS_FAAS_MAX_MEMORY:()=>aE,SEMRESATTRS_FAAS_NAME:()=>ORe,SEMRESATTRS_FAAS_VERSION:()=>CRe,SEMRESATTRS_HOST_ARCH:()=>PRe,SEMRESATTRS_HOST_ID:()=>Jc,SEMRESATTRS_HOST_IMAGE_ID:()=>MRe,SEMRESATTRS_HOST_IMAGE_NAME:()=>bRe,SEMRESATTRS_HOST_IMAGE_VERSION:()=>IRe,SEMRESATTRS_HOST_NAME:()=>cE,SEMRESATTRS_HOST_TYPE:()=>uE,SEMRESATTRS_K8S_CLUSTER_NAME:()=>xRe,SEMRESATTRS_K8S_CONTAINER_NAME:()=>VRe,SEMRESATTRS_K8S_CRONJOB_NAME:()=>XRe,SEMRESATTRS_K8S_CRONJOB_UID:()=>WRe,SEMRESATTRS_K8S_DAEMONSET_NAME:()=>YRe,SEMRESATTRS_K8S_DAEMONSET_UID:()=>zRe,SEMRESATTRS_K8S_DEPLOYMENT_NAME:()=>HRe,SEMRESATTRS_K8S_DEPLOYMENT_UID:()=>qRe,SEMRESATTRS_K8S_JOB_NAME:()=>KRe,SEMRESATTRS_K8S_JOB_UID:()=>$Re,SEMRESATTRS_K8S_NAMESPACE_NAME:()=>wRe,SEMRESATTRS_K8S_NODE_NAME:()=>LRe,SEMRESATTRS_K8S_NODE_UID:()=>DRe,SEMRESATTRS_K8S_POD_NAME:()=>kRe,SEMRESATTRS_K8S_POD_UID:()=>URe,SEMRESATTRS_K8S_REPLICASET_NAME:()=>FRe,SEMRESATTRS_K8S_REPLICASET_UID:()=>BRe,SEMRESATTRS_K8S_STATEFULSET_NAME:()=>jRe,SEMRESATTRS_K8S_STATEFULSET_UID:()=>GRe,SEMRESATTRS_OS_DESCRIPTION:()=>JRe,SEMRESATTRS_OS_NAME:()=>ZRe,SEMRESATTRS_OS_TYPE:()=>QRe,SEMRESATTRS_OS_VERSION:()=>lE,SEMRESATTRS_PROCESS_COMMAND:()=>rve,SEMRESATTRS_PROCESS_COMMAND_ARGS:()=>ive,SEMRESATTRS_PROCESS_COMMAND_LINE:()=>nve,SEMRESATTRS_PROCESS_EXECUTABLE_NAME:()=>eve,SEMRESATTRS_PROCESS_EXECUTABLE_PATH:()=>tve,SEMRESATTRS_PROCESS_OWNER:()=>ove,SEMRESATTRS_PROCESS_PID:()=>LN,SEMRESATTRS_PROCESS_RUNTIME_DESCRIPTION:()=>cve,SEMRESATTRS_PROCESS_RUNTIME_NAME:()=>sve,SEMRESATTRS_PROCESS_RUNTIME_VERSION:()=>ave,SEMRESATTRS_SERVICE_INSTANCE_ID:()=>DN,SEMRESATTRS_SERVICE_NAME:()=>Zc,SEMRESATTRS_SERVICE_NAMESPACE:()=>uve,SEMRESATTRS_SERVICE_VERSION:()=>lve,SEMRESATTRS_TELEMETRY_AUTO_VERSION:()=>hve,SEMRESATTRS_TELEMETRY_SDK_LANGUAGE:()=>pve,SEMRESATTRS_TELEMETRY_SDK_NAME:()=>dve,SEMRESATTRS_TELEMETRY_SDK_VERSION:()=>fve,SEMRESATTRS_WEBENGINE_DESCRIPTION:()=>Eve,SEMRESATTRS_WEBENGINE_NAME:()=>_ve,SEMRESATTRS_WEBENGINE_VERSION:()=>mve,SIGNALR_CONNECTION_STATUS_VALUE_APP_SHUTDOWN:()=>pCe,SIGNALR_CONNECTION_STATUS_VALUE_NORMAL_CLOSURE:()=>fCe,SIGNALR_CONNECTION_STATUS_VALUE_TIMEOUT:()=>hCe,SIGNALR_TRANSPORT_VALUE_LONG_POLLING:()=>mCe,SIGNALR_TRANSPORT_VALUE_SERVER_SENT_EVENTS:()=>ECe,SIGNALR_TRANSPORT_VALUE_WEB_SOCKETS:()=>TCe,SemanticAttributes:()=>yge,SemanticResourceAttributes:()=>Tve,TELEMETRYSDKLANGUAGEVALUES_CPP:()=>aOe,TELEMETRYSDKLANGUAGEVALUES_DOTNET:()=>cOe,TELEMETRYSDKLANGUAGEVALUES_ERLANG:()=>uOe,TELEMETRYSDKLANGUAGEVALUES_GO:()=>lOe,TELEMETRYSDKLANGUAGEVALUES_JAVA:()=>dOe,TELEMETRYSDKLANGUAGEVALUES_NODEJS:()=>pOe,TELEMETRYSDKLANGUAGEVALUES_PHP:()=>fOe,TELEMETRYSDKLANGUAGEVALUES_PYTHON:()=>hOe,TELEMETRYSDKLANGUAGEVALUES_RUBY:()=>_Oe,TELEMETRYSDKLANGUAGEVALUES_WEBJS:()=>mOe,TELEMETRY_SDK_LANGUAGE_VALUE_CPP:()=>SCe,TELEMETRY_SDK_LANGUAGE_VALUE_DOTNET:()=>gCe,TELEMETRY_SDK_LANGUAGE_VALUE_ERLANG:()=>yCe,TELEMETRY_SDK_LANGUAGE_VALUE_GO:()=>ACe,TELEMETRY_SDK_LANGUAGE_VALUE_JAVA:()=>RCe,TELEMETRY_SDK_LANGUAGE_VALUE_NODEJS:()=>BN,TELEMETRY_SDK_LANGUAGE_VALUE_PHP:()=>vCe,TELEMETRY_SDK_LANGUAGE_VALUE_PYTHON:()=>OCe,TELEMETRY_SDK_LANGUAGE_VALUE_RUBY:()=>NCe,TELEMETRY_SDK_LANGUAGE_VALUE_RUST:()=>CCe,TELEMETRY_SDK_LANGUAGE_VALUE_SWIFT:()=>PCe,TELEMETRY_SDK_LANGUAGE_VALUE_WEBJS:()=>bCe,TelemetrySdkLanguageValues:()=>EOe});var ct=E(()=>{NG();J2();Z2();ez();});var tz,rz=E(()=>{tz="process.runtime.name";});var us,nz=E(()=>{wV();ct();rz();us={[tu]:"opentelemetry",[tz]:"node",[eu]:BN,[ru]:DV};});function Ii(t){t.unref();}var iz=E(()=>{});var oz=E(()=>{IV();xV();LV();nz();iz();});var FN=E(()=>{oz();});function pr(t){let e=t/1e3,r=Math.trunc(e),n=Math.round(t%1e3*DPe);return [r,n]}function nu(){let t=xn.timeOrigin;if(typeof t!="number"){let e=xn;t=e.timing&&e.timing.fetchStart;}return t}function Ip(t){let e=pr(nu()),r=pr(typeof t=="number"?t:xn.now());return Dp(e,r)}function xp(t){if(iu(t))return t;if(typeof t=="number")return t<nu()?Ip(t):pr(t);if(t instanceof Date)return pr(t.getTime());throw TypeError("Invalid input type")}function pE(t,e){let r=e[0]-t[0],n=e[1]-t[1];return n<0&&(r-=1,n+=dE),[r,n]}function az(t){let e=sz,r=`${"0".repeat(e)}${t[1]}Z`,n=r.substring(r.length-e-1);return new Date(t[0]*1e3).toISOString().replace("000Z",n)}function fE(t){return t[0]*dE+t[1]}function cz(t){return t[0]*1e3+t[1]/1e6}function Ar(t){return t[0]*1e6+t[1]/1e3}function iu(t){return Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"}function Lp(t){return iu(t)||typeof t=="number"||t instanceof Date}function Dp(t,e){let r=[t[0]+e[0],t[1]+e[1]];return r[1]>=dE&&(r[1]-=dE,r[0]+=1),r}var sz,LPe,DPe,dE,uz=E(()=>{FN();sz=9,LPe=6,DPe=Math.pow(10,LPe),dE=Math.pow(10,sz);});var de,lz=E(()=>{(function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED";})(de||(de={}));});var hE,dz=E(()=>{M();hE=class{_propagators;_fields;constructor(e={}){this._propagators=e.propagators??[],this._fields=Array.from(new Set(this._propagators.map(r=>typeof r.fields=="function"?r.fields():[]).reduce((r,n)=>r.concat(n),[])));}inject(e,r,n){for(let s of this._propagators)try{s.inject(e,r,n);}catch(a){N.warn(`Failed to inject with ${s.constructor.name}. Err: ${a.message}`);}}extract(e,r,n){return this._propagators.reduce((s,a)=>{try{return a.extract(s,r,n)}catch(o){N.warn(`Failed to extract with ${a.constructor.name}. Err: ${o.message}`);}return s},e)}fields(){return this._fields.slice()}};});function pz(t){return kPe.test(t)}function fz(t){return VPe.test(t)&&!BPe.test(t)}var qN,wPe,UPe,kPe,VPe,BPe,hz=E(()=>{qN="[_0-9a-z-*/]",wPe=`[a-z]${qN}{0,255}`,UPe=`[a-z0-9]${qN}{0,240}@[a-z]${qN}{0,13}`,kPe=new RegExp(`^(?:${wPe}|${UPe})$`),VPe=/^[ -~]{0,255}[!-~]$/,BPe=/,|=/;});var _z,FPe,mz,Ez,ou,HN=E(()=>{hz();_z=32,FPe=512,mz=",",Ez="=",ou=class t{_internalState=new Map;constructor(e){e&&this._parse(e);}set(e,r){let n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,r),n}unset(e){let r=this._clone();return r._internalState.delete(e),r}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce((e,r)=>(e.push(r+Ez+this.get(r)),e),[]).join(mz)}_parse(e){e.length>FPe||(this._internalState=e.split(mz).reverse().reduce((r,n)=>{let s=n.trim(),a=s.indexOf(Ez);if(a!==-1){let o=s.slice(0,a),i=s.slice(a+1,n.length);pz(o)&&fz(i)&&r.set(o,i);}return r},new Map),this._internalState.size>_z&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,_z))));}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let e=new t;return e._internalState=new Map(this._internalState),e}};});function GN(t){let e=YPe.exec(t);return !e||e[1]==="00"&&e[5]?null:{traceId:e[2],spanId:e[3],traceFlags:parseInt(e[4],16)}}var wp,Up,qPe,HPe,GPe,jPe,zPe,YPe,_E,Tz=E(()=>{M();Pp();HN();wp="traceparent",Up="tracestate",qPe="00",HPe="(?!ff)[\\da-f]{2}",GPe="(?![0]{32})[\\da-f]{32}",jPe="(?![0]{16})[\\da-f]{16}",zPe="[\\da-f]{2}",YPe=new RegExp(`^\\s?(${HPe})-(${GPe})-(${jPe})-(${zPe})(-.*)?\\s?$`);_E=class{inject(e,r,n){let s=ge.getSpanContext(e);if(!s||yr(e)||!gr(s))return;let a=`${qPe}-${s.traceId}-${s.spanId}-0${Number(s.traceFlags||ze.NONE).toString(16)}`;n.set(r,wp,a),s.traceState&&n.set(r,Up,s.traceState.serialize());}extract(e,r,n){let s=n.get(r,wp);if(!s)return e;let a=Array.isArray(s)?s[0]:s;if(typeof a!="string")return e;let o=GN(a);if(!o)return e;o.isRemote=true;let i=n.get(r,Up);if(i){let c=Array.isArray(i)?i.join(","):i;o.traceState=new ou(typeof c=="string"?c:void 0);}return ge.setSpanContext(e,o)}fields(){return [wp,Up]}};});function Sz(t,e){return t.setValue(jN,e)}function gz(t){return t.deleteValue(jN)}function yz(t){return t.getValue(jN)}var jN,mE,Az=E(()=>{M();jN=Pn("OpenTelemetry SDK Context Key RPC_METADATA");(function(t){t.HTTP="http";})(mE||(mE={}));});function zN(t){if(!ZPe(t)||ebe(t)!==$Pe)return  false;let e=JPe(t);if(e===null)return  true;let r=Oz.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Rz.call(r)===QPe}function ZPe(t){return t!=null&&typeof t=="object"}function ebe(t){return t==null?t===void 0?WPe:KPe:ya&&ya in Object(t)?tbe(t):rbe(t)}function tbe(t){let e=Oz.call(t,ya),r=t[ya],n=false;try{t[ya]=void 0,n=!0;}catch{}let s=Nz.call(t);return n&&(e?t[ya]=r:delete t[ya]),s}function rbe(t){return Nz.call(t)}var $Pe,KPe,WPe,XPe,Rz,QPe,JPe,vz,Oz,ya,Nz,Cz=E(()=>{$Pe="[object Object]",KPe="[object Null]",WPe="[object Undefined]",XPe=Function.prototype,Rz=XPe.toString,QPe=Rz.call(Object),JPe=Object.getPrototypeOf,vz=Object.prototype,Oz=vz.hasOwnProperty,ya=Symbol?Symbol.toStringTag:void 0,Nz=vz.toString;});function su(...t){let e=t.shift(),r=new WeakMap;for(;t.length>0;)e=bz(e,t.shift(),0,r);return e}function YN(t){return TE(t)?t.slice():t}function bz(t,e,r=0,n){let s;if(!(r>nbe)){if(r++,EE(t)||EE(e)||Mz(e))s=YN(e);else if(TE(t)){if(s=t.slice(),TE(e))for(let a=0,o=e.length;a<o;a++)s.push(YN(e[a]));else if(kp(e)){let a=Object.keys(e);for(let o=0,i=a.length;o<i;o++){let c=a[o];s[c]=YN(e[c]);}}}else if(kp(t))if(kp(e)){if(!ibe(t,e))return e;s=Object.assign({},t);let a=Object.keys(e);for(let o=0,i=a.length;o<i;o++){let c=a[o],u=e[c];if(EE(u))typeof u>"u"?delete s[c]:s[c]=u;else {let l=s[c],d=u;if(Pz(t,c,n)||Pz(e,c,n))delete s[c];else {if(kp(l)&&kp(d)){let p=n.get(l)||[],h=n.get(d)||[];p.push({obj:t,key:c}),h.push({obj:e,key:c}),n.set(l,p),n.set(d,h);}s[c]=bz(s[c],u,r,n);}}}}else s=e;return s}}function Pz(t,e,r){let n=r.get(t[e])||[];for(let s=0,a=n.length;s<a;s++){let o=n[s];if(o.key===e&&o.obj===t)return  true}return  false}function TE(t){return Array.isArray(t)}function Mz(t){return typeof t=="function"}function kp(t){return !EE(t)&&!TE(t)&&!Mz(t)&&typeof t=="object"}function EE(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t>"u"||t instanceof Date||t instanceof RegExp||t===null}function ibe(t,e){return !(!zN(t)||!zN(e))}var nbe,Iz=E(()=>{Cz();nbe=20;});function au(t,e){let r,n=new Promise(function(a,o){r=setTimeout(function(){o(new Vp("Operation timed out."));},e);});return Promise.race([t,n]).then(s=>(clearTimeout(r),s),s=>{throw clearTimeout(r),s})}var Vp,xz=E(()=>{Vp=class t extends Error{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype);}};});function $N(t,e){return typeof e=="string"?t===e:!!t.match(e)}function Lz(t,e){if(!e)return  false;for(let r of e)if($N(t,r))return  true;return  false}var Dz=E(()=>{});var SE,wz=E(()=>{SE=class{_promise;_resolve;_reject;constructor(){this._promise=new Promise((e,r)=>{this._resolve=e,this._reject=r;});}get promise(){return this._promise}resolve(e){this._resolve(e);}reject(e){this._reject(e);}};});var Wr,Uz=E(()=>{wz();Wr=class{_callback;_that;_isCalled=false;_deferred=new SE;constructor(e,r){this._callback=e,this._that=r;}get isCalled(){return this._isCalled}get promise(){return this._deferred.promise}call(...e){if(!this._isCalled){this._isCalled=true;try{Promise.resolve(this._callback.call(this._that,...e)).then(r=>this._deferred.resolve(r),r=>this._deferred.reject(r));}catch(r){this._deferred.reject(r);}}return this._deferred.promise}};});function Vz(t){if(t==null)return;let e=kz[t.toUpperCase()];return e??(N.warn(`Unknown log level "${t}", expected one of ${Object.keys(kz)}, using default`),at.INFO)}var kz,Bz=E(()=>{M();kz={ALL:at.ALL,VERBOSE:at.VERBOSE,DEBUG:at.DEBUG,INFO:at.INFO,WARN:at.WARN,ERROR:at.ERROR,NONE:at.NONE};});function Fz(t,e){return new Promise(r=>{yt.with(ns(yt.active()),()=>{t.export(e,n=>{r(n);});});})}var qz=E(()=>{M();Pp();});var Ze={};Ue(Ze,{AnchoredClock:()=>tE,BindOnceFuture:()=>Wr,CompositePropagator:()=>hE,ExportResultCode:()=>de,RPCType:()=>mE,SDK_INFO:()=>us,TRACE_PARENT_HEADER:()=>wp,TRACE_STATE_HEADER:()=>Up,TimeoutError:()=>Vp,TraceState:()=>ou,W3CBaggagePropagator:()=>eE,W3CTraceContextPropagator:()=>_E,_globalThis:()=>oE,addHrTimes:()=>Dp,callWithTimeout:()=>au,deleteRPCMetadata:()=>gz,diagLogLevelFromString:()=>Vz,getBooleanFromEnv:()=>nE,getNumberFromEnv:()=>Me,getRPCMetadata:()=>yz,getStringFromEnv:()=>$t,getStringListFromEnv:()=>iE,getTimeOrigin:()=>nu,globalErrorHandler:()=>At,hrTime:()=>Ip,hrTimeDuration:()=>pE,hrTimeToMicroseconds:()=>Ar,hrTimeToMilliseconds:()=>cz,hrTimeToNanoseconds:()=>fE,hrTimeToTimeStamp:()=>az,internal:()=>Ro,isAttributeValue:()=>os,isTimeInput:()=>Lp,isTimeInputHrTime:()=>iu,isTracingSuppressed:()=>yr,isUrlIgnored:()=>Lz,loggingErrorHandler:()=>rE,merge:()=>su,millisToHrTime:()=>pr,otperformance:()=>xn,parseKeyPairsIntoRecord:()=>Sa,parseTraceParent:()=>GN,sanitizeAttributes:()=>is,setGlobalErrorHandler:()=>PV,setRPCMetadata:()=>Sz,suppressTracing:()=>ns,timeInputToHrTime:()=>xp,unrefTimer:()=>Ii,unsuppressTracing:()=>SV,urlMatches:()=>$N});var Ro,G=E(()=>{RV();vV();NV();bV();MN();uz();lz();bN();FN();dz();Tz();Az();Pp();HN();Iz();xz();Dz();Uz();Bz();qz();Ro={_export:Fz};});function cu(){return `unknown_service:${process.argv0}`}var Hz=E(()=>{});var Gz=E(()=>{Hz();});var KN=E(()=>{Gz();});var uu,jz=E(()=>{uu=t=>t!==null&&typeof t=="object"&&typeof t.then=="function";});function yE(t,e){return gE.FromAttributeList(Object.entries(t),e)}function Yz(t,e){return new gE(t,e)}function Bp(){return yE({})}function ls(){return yE({[Ao]:cu(),[eu]:us[eu],[tu]:us[tu],[ru]:us[ru]})}function zz(t){return t.map(([e,r])=>uu(r)?[e,r.catch(n=>{N.debug("promise rejection for resource attribute: %s - %s",e,n);})]:[e,r])}function obe(t){if(typeof t=="string"||t===void 0)return t;N.warn("Schema URL must be string or undefined, got %s. Schema URL will be ignored.",t);}function sbe(t,e){let r=t?.schemaUrl,n=e?.schemaUrl,s=r===void 0||r==="",a=n===void 0||n==="";if(s)return n;if(a||r===n)return r;N.warn('Schema URL merge conflict: old resource has "%s", updating resource has "%s". Resulting resource will have undefined Schema URL.',r,n);}var gE,WN=E(()=>{M();G();ct();KN();jz();gE=class t{_rawAttributes;_asyncAttributesPending=false;_schemaUrl;_memoizedAttributes;static FromAttributeList(e,r){let n=new t({},r);return n._rawAttributes=zz(e),n._asyncAttributesPending=e.filter(([s,a])=>uu(a)).length>0,n}constructor(e,r){let n=e.attributes??{};this._rawAttributes=Object.entries(n).map(([s,a])=>(uu(a)&&(this._asyncAttributesPending=true),[s,a])),this._rawAttributes=zz(this._rawAttributes),this._schemaUrl=obe(r?.schemaUrl);}get asyncAttributesPending(){return this._asyncAttributesPending}async waitForAsyncAttributes(){if(this.asyncAttributesPending){for(let e=0;e<this._rawAttributes.length;e++){let[r,n]=this._rawAttributes[e];this._rawAttributes[e]=[r,uu(n)?await n:n];}this._asyncAttributesPending=false;}}get attributes(){if(this.asyncAttributesPending&&N.error("Accessing resource attributes before async attributes settled"),this._memoizedAttributes)return this._memoizedAttributes;let e={};for(let[r,n]of this._rawAttributes){if(uu(n)){N.debug(`Unsettled resource attribute ${r} skipped`);continue}n!=null&&(e[r]??=n);}return this._asyncAttributesPending||(this._memoizedAttributes=e),e}getRawAttributes(){return this._rawAttributes}get schemaUrl(){return this._schemaUrl}merge(e){if(e==null)return this;let r=sbe(this,e),n=r?{schemaUrl:r}:void 0;return t.FromAttributeList([...e.getRawAttributes(),...this.getRawAttributes()],n)}};});var $z,Kz=E(()=>{M();WN();$z=(t={})=>(t.detectors||[]).map(r=>{try{let n=Yz(r.detect(t));return N.debug(`${r.constructor.name} found resource.`,n),n}catch(n){return N.debug(`${r.constructor.name} failed: ${n.message}`),Bp()}}).reduce((r,n)=>r.merge(n),Bp());});var XN,QN,Wz=E(()=>{M();ct();G();XN=class{_MAX_LENGTH=255;_COMMA_SEPARATOR=",";_LABEL_KEY_VALUE_SPLITTER="=";_ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.";_ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters.";detect(e){let r={},n=$t("OTEL_RESOURCE_ATTRIBUTES"),s=$t("OTEL_SERVICE_NAME");if(n)try{let a=this._parseResourceAttributes(n);Object.assign(r,a);}catch(a){N.debug(`EnvDetector failed: ${a.message}`);}return s&&(r[Ao]=s),{attributes:r}}_parseResourceAttributes(e){if(!e)return {};let r={},n=e.split(this._COMMA_SEPARATOR,-1);for(let s of n){let a=s.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(a.length!==2)continue;let[o,i]=a;if(o=o.trim(),i=i.trim().split(/^"|"$/).join(""),!this._isValidAndNotEmpty(o))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(i))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);r[o]=decodeURIComponent(i);}return r}_isValid(e){return e.length<=this._MAX_LENGTH&&this._isBaggageOctetString(e)}_isBaggageOctetString(e){for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n<33||n===44||n===59||n===92||n>126)return  false}return  true}_isValidAndNotEmpty(e){return e.length>0&&this._isValid(e)}},QN=new XN;});var Xz,Qz,Jz,Zz,e3,t3,r3,n3,i3,o3,s3,a3,c3,u3,l3,Fp=E(()=>{Xz="host.arch",Qz="host.id",Jz="host.name",Zz="os.type",e3="os.version",t3="process.command",r3="process.command_args",n3="process.executable.name",i3="process.executable.path",o3="process.owner",s3="process.pid",a3="process.runtime.description",c3="process.runtime.name",u3="process.runtime.version",l3="service.instance.id";});var lu,AE=E(()=>{lu=p3__namespace.promisify(d3__namespace.exec);});var f3={};Ue(f3,{getMachineId:()=>abe});async function abe(){try{let e=(await lu('ioreg -rd1 -c "IOPlatformExpertDevice"')).stdout.split(`
`).find(n=>n.includes("IOPlatformUUID"));if(!e)return;let r=e.split('" = "');if(r.length===2)return r[1].slice(0,-1)}catch(t){N.debug(`error reading machine id: ${t}`);}}var h3=E(()=>{AE();M();});var _3={};Ue(_3,{getMachineId:()=>ube});async function ube(){let t=["/etc/machine-id","/var/lib/dbus/machine-id"];for(let e of t)try{return (await fs$1.promises.readFile(e,{encoding:"utf8"})).trim()}catch(r){N.debug(`error reading machine id: ${r}`);}}var m3=E(()=>{M();});var E3={};Ue(E3,{getMachineId:()=>dbe});async function dbe(){try{return (await fs$1.promises.readFile("/etc/hostid",{encoding:"utf8"})).trim()}catch(t){N.debug(`error reading machine id: ${t}`);}try{return (await lu("kenv -q smbios.system.uuid")).stdout.trim()}catch(t){N.debug(`error reading machine id: ${t}`);}}var T3=E(()=>{AE();M();});var S3={};Ue(S3,{getMachineId:()=>pbe});async function pbe(){let t="QUERY HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Cryptography /v MachineGuid",e="%windir%\\System32\\REG.exe";RE__namespace.arch==="ia32"&&"PROCESSOR_ARCHITEW6432"in RE__namespace.env&&(e="%windir%\\sysnative\\cmd.exe /c "+e);try{let n=(await lu(`${e} ${t}`)).stdout.split("REG_SZ");if(n.length===2)return n[1].trim()}catch(r){N.debug(`error reading machine id: ${r}`);}}var g3=E(()=>{AE();M();});var y3={};Ue(y3,{getMachineId:()=>fbe});async function fbe(){N.debug("could not read machine-id: unsupported platform");}var A3=E(()=>{M();});async function v3(){if(!Aa)switch(RE__namespace.platform){case "darwin":Aa=(await Promise.resolve().then(()=>(h3(),f3))).getMachineId;break;case "linux":Aa=(await Promise.resolve().then(()=>(m3(),_3))).getMachineId;break;case "freebsd":Aa=(await Promise.resolve().then(()=>(T3(),E3))).getMachineId;break;case "win32":Aa=(await Promise.resolve().then(()=>(g3(),S3))).getMachineId;break;default:Aa=(await Promise.resolve().then(()=>(A3(),y3))).getMachineId;break}return Aa()}var Aa,O3=E(()=>{});var N3,C3,JN=E(()=>{N3=t=>{switch(t){case "arm":return "arm32";case "ppc":return "ppc32";case "x64":return "amd64";default:return t}},C3=t=>{switch(t){case "sunos":return "solaris";case "win32":return "windows";default:return t}};});var ZN,qp,P3=E(()=>{Fp();O3();JN();ZN=class{detect(e){return {attributes:{[Jz]:M3.hostname(),[Xz]:N3(M3.arch()),[Qz]:v3()}}}},qp=new ZN;});var eC,Hp,b3=E(()=>{Fp();JN();eC=class{detect(e){return {attributes:{[Zz]:C3(M3.platform()),[e3]:M3.release()}}}},Hp=new eC;});var tC,Gp,I3=E(()=>{M();Fp();tC=class{detect(e){let r={[s3]:process.pid,[n3]:process.title,[i3]:process.execPath,[r3]:[process.argv[0],...process.execArgv,...process.argv.slice(1)],[u3]:process.versions.node,[c3]:"nodejs",[a3]:"Node.js"};process.argv.length>1&&(r[t3]=process.argv[1]);try{let n=M3__namespace.userInfo();r[o3]=n.username;}catch(n){N.debug(`error obtaining process owner: ${n}`);}return {attributes:r}}},Gp=new tC;});var rC,jp,x3=E(()=>{Fp();rC=class{detect(e){return {attributes:{[l3]:crypto.randomUUID()}}}},jp=new rC;});var L3=E(()=>{P3();b3();I3();x3();});var D3=E(()=>{L3();});var w3=E(()=>{Wz();D3();});var Ra={};Ue(Ra,{defaultResource:()=>ls,defaultServiceName:()=>cu,detectResources:()=>$z,emptyResource:()=>Bp,envDetector:()=>QN,hostDetector:()=>qp,osDetector:()=>Hp,processDetector:()=>Gp,resourceFromAttributes:()=>yE,serviceInstanceIdDetector:()=>jp});var xi=E(()=>{Kz();w3();WN();KN();});var vE,U3=E(()=>{M();G();vE=class{hrTime;hrTimeObserved;spanContext;resource;instrumentationScope;attributes={};_severityText;_severityNumber;_body;_eventName;totalAttributesCount=0;_isReadonly=false;_logRecordLimits;set severityText(e){this._isLogRecordReadonly()||(this._severityText=e);}get severityText(){return this._severityText}set severityNumber(e){this._isLogRecordReadonly()||(this._severityNumber=e);}get severityNumber(){return this._severityNumber}set body(e){this._isLogRecordReadonly()||(this._body=e);}get body(){return this._body}get eventName(){return this._eventName}set eventName(e){this._isLogRecordReadonly()||(this._eventName=e);}get droppedAttributesCount(){return this.totalAttributesCount-Object.keys(this.attributes).length}constructor(e,r,n){let{timestamp:s,observedTimestamp:a,eventName:o,severityNumber:i,severityText:c,body:u,attributes:l={},context:d}=n,p=Date.now();if(this.hrTime=xp(s??p),this.hrTimeObserved=xp(a??p),d){let h=ge.getSpanContext(d);h&&gr(h)&&(this.spanContext=h);}this.severityNumber=i,this.severityText=c,this.body=u,this.resource=e.resource,this.instrumentationScope=r,this._logRecordLimits=e.logRecordLimits,this._eventName=o,this.setAttributes(l);}setAttribute(e,r){return this._isLogRecordReadonly()?this:r===null?this:e.length===0?(N.warn(`Invalid attribute key: ${e}`),this):!os(r)&&!(typeof r=="object"&&!Array.isArray(r)&&Object.keys(r).length>0)?(N.warn(`Invalid attribute value set for key: ${e}`),this):(this.totalAttributesCount+=1,Object.keys(this.attributes).length>=this._logRecordLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?(this.droppedAttributesCount===1&&N.warn("Dropping extra attributes."),this):(os(r)?this.attributes[e]=this._truncateToSize(r):this.attributes[e]=r,this))}setAttributes(e){for(let[r,n]of Object.entries(e))this.setAttribute(r,n);return this}setBody(e){return this.body=e,this}setEventName(e){return this.eventName=e,this}setSeverityNumber(e){return this.severityNumber=e,this}setSeverityText(e){return this.severityText=e,this}_makeReadonly(){this._isReadonly=true;}_truncateToSize(e){let r=this._logRecordLimits.attributeValueLengthLimit;return r<=0?(N.warn(`Attribute value limit must be positive, got ${r}`),e):typeof e=="string"?this._truncateToLimitUtil(e,r):Array.isArray(e)?e.map(n=>typeof n=="string"?this._truncateToLimitUtil(n,r):n):e}_truncateToLimitUtil(e,r){return e.length<=r?e:e.substring(0,r)}_isLogRecordReadonly(){return this._isReadonly&&N.warn("Can not execute the operation on emitted log record"),this._isReadonly}};});var OE,k3=E(()=>{M();U3();OE=class{instrumentationScope;_sharedState;constructor(e,r){this.instrumentationScope=e,this._sharedState=r;}emit(e){let r=e.context||yt.active(),n=new vE(this._sharedState,this.instrumentationScope,{context:r,...e});this._sharedState.activeProcessor.onEmit(n,r),n._makeReadonly();}};});function V3(){return {forceFlushTimeoutMillis:3e4,logRecordLimits:{attributeValueLengthLimit:Me("OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT")??1/0,attributeCountLimit:Me("OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT")??128},includeTraceContext:true}}function B3(t){return {attributeCountLimit:t.attributeCountLimit??Me("OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT")??Me("OTEL_ATTRIBUTE_COUNT_LIMIT")??128,attributeValueLengthLimit:t.attributeValueLengthLimit??Me("OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT")??Me("OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT")??1/0}}var F3=E(()=>{G();});var du,nC=E(()=>{du=class{forceFlush(){return Promise.resolve()}onEmit(e,r){}shutdown(){return Promise.resolve()}};});var NE,q3=E(()=>{G();NE=class{processors;forceFlushTimeoutMillis;constructor(e,r){this.processors=e,this.forceFlushTimeoutMillis=r;}async forceFlush(){let e=this.forceFlushTimeoutMillis;await Promise.all(this.processors.map(r=>au(r.forceFlush(),e)));}onEmit(e,r){this.processors.forEach(n=>n.onEmit(e,r));}async shutdown(){await Promise.all(this.processors.map(e=>e.shutdown()));}};});var CE,H3=E(()=>{nC();q3();CE=class{resource;forceFlushTimeoutMillis;logRecordLimits;processors;loggers=new Map;activeProcessor;registeredLogRecordProcessors=[];constructor(e,r,n,s){this.resource=e,this.forceFlushTimeoutMillis=r,this.logRecordLimits=n,this.processors=s,s.length>0?(this.registeredLogRecordProcessors=s,this.activeProcessor=new NE(this.registeredLogRecordProcessors,this.forceFlushTimeoutMillis)):this.activeProcessor=new du;}};});var Sbe,PE,G3=E(()=>{M();In();xi();G();k3();F3();H3();Sbe="unknown",PE=class{_shutdownOnce;_sharedState;constructor(e={}){let r=su({},V3(),e),n=e.resource??ls();this._sharedState=new CE(n,r.forceFlushTimeoutMillis,B3(r.logRecordLimits),e?.processors??[]),this._shutdownOnce=new Wr(this._shutdown,this);}getLogger(e,r,n){if(this._shutdownOnce.isCalled)return N.warn("A shutdown LoggerProvider cannot provide a Logger"),$c;e||N.warn("Logger requested without instrumentation scope name.");let s=e||Sbe,a=`${s}@${r||""}:${n?.schemaUrl||""}`;return this._sharedState.loggers.has(a)||this._sharedState.loggers.set(a,new OE({name:s,version:r,schemaUrl:n?.schemaUrl},this._sharedState)),this._sharedState.loggers.get(a)}forceFlush(){return this._shutdownOnce.isCalled?(N.warn("invalid attempt to force flush after LoggerProvider shutdown"),this._shutdownOnce.promise):this._sharedState.activeProcessor.forceFlush()}shutdown(){return this._shutdownOnce.isCalled?(N.warn("shutdown may only be called once per LoggerProvider"),this._shutdownOnce.promise):this._shutdownOnce.call()}_shutdown(){return this._sharedState.activeProcessor.shutdown()}};});var bE,j3=E(()=>{G();bE=class{export(e,r){this._sendLogRecords(e,r);}shutdown(){return Promise.resolve()}_exportInfo(e){return {resource:{attributes:e.resource.attributes},instrumentationScope:e.instrumentationScope,timestamp:Ar(e.hrTime),traceId:e.spanContext?.traceId,spanId:e.spanContext?.spanId,traceFlags:e.spanContext?.traceFlags,severityText:e.severityText,severityNumber:e.severityNumber,body:e.body,attributes:e.attributes}}_sendLogRecords(e,r){for(let n of e)console.dir(this._exportInfo(n),{depth:3});r?.({code:de.SUCCESS});}};});var ME,z3=E(()=>{G();ME=class{_exporter;_shutdownOnce;_unresolvedExports;constructor(e){this._exporter=e,this._shutdownOnce=new Wr(this._shutdown,this),this._unresolvedExports=new Set;}onEmit(e){if(this._shutdownOnce.isCalled)return;let r=()=>Ro._export(this._exporter,[e]).then(n=>{n.code!==de.SUCCESS&&At(n.error??new Error(`SimpleLogRecordProcessor: log record export failed (status ${n})`));}).catch(At);if(e.resource.asyncAttributesPending){let n=e.resource.waitForAsyncAttributes?.().then(()=>(this._unresolvedExports.delete(n),r()),At);n!=null&&this._unresolvedExports.add(n);}else r();}async forceFlush(){await Promise.all(Array.from(this._unresolvedExports));}shutdown(){return this._shutdownOnce.call()}_shutdown(){return this._exporter.shutdown()}};});var IE,Y3=E(()=>{G();IE=class{_finishedLogRecords=[];_stopped=false;export(e,r){if(this._stopped)return r({code:de.FAILED,error:new Error("Exporter has been stopped")});this._finishedLogRecords.push(...e),r({code:de.SUCCESS});}shutdown(){return this._stopped=true,this.reset(),Promise.resolve()}getFinishedLogRecords(){return this._finishedLogRecords}reset(){this._finishedLogRecords=[];}};});var xE,$3=E(()=>{M();G();xE=class{_exporter;_maxExportBatchSize;_maxQueueSize;_scheduledDelayMillis;_exportTimeoutMillis;_finishedLogRecords=[];_timer;_shutdownOnce;constructor(e,r){this._exporter=e,this._maxExportBatchSize=r?.maxExportBatchSize??Me("OTEL_BLRP_MAX_EXPORT_BATCH_SIZE")??512,this._maxQueueSize=r?.maxQueueSize??Me("OTEL_BLRP_MAX_QUEUE_SIZE")??2048,this._scheduledDelayMillis=r?.scheduledDelayMillis??Me("OTEL_BLRP_SCHEDULE_DELAY")??5e3,this._exportTimeoutMillis=r?.exportTimeoutMillis??Me("OTEL_BLRP_EXPORT_TIMEOUT")??3e4,this._shutdownOnce=new Wr(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(N.warn("BatchLogRecordProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize);}onEmit(e){this._shutdownOnce.isCalled||this._addToBuffer(e);}forceFlush(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()}shutdown(){return this._shutdownOnce.call()}async _shutdown(){this.onShutdown(),await this._flushAll(),await this._exporter.shutdown();}_addToBuffer(e){this._finishedLogRecords.length>=this._maxQueueSize||(this._finishedLogRecords.push(e),this._maybeStartTimer());}_flushAll(){return new Promise((e,r)=>{let n=[],s=Math.ceil(this._finishedLogRecords.length/this._maxExportBatchSize);for(let a=0;a<s;a++)n.push(this._flushOneBatch());Promise.all(n).then(()=>{e();}).catch(r);})}_flushOneBatch(){return this._clearTimer(),this._finishedLogRecords.length===0?Promise.resolve():new Promise((e,r)=>{au(this._export(this._finishedLogRecords.splice(0,this._maxExportBatchSize)),this._exportTimeoutMillis).then(()=>e()).catch(r);})}_maybeStartTimer(){this._timer===void 0&&(this._timer=setTimeout(()=>{this._flushOneBatch().then(()=>{this._finishedLogRecords.length>0&&(this._clearTimer(),this._maybeStartTimer());}).catch(e=>{At(e);});},this._scheduledDelayMillis),Ii(this._timer));}_clearTimer(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0);}_export(e){let r=()=>Ro._export(this._exporter,e).then(s=>{s.code!==de.SUCCESS&&At(s.error??new Error(`BatchLogRecordProcessor: log record export failed (status ${s})`));}).catch(At),n=e.map(s=>s.resource).filter(s=>s.asyncAttributesPending);return n.length===0?r():Promise.all(n.map(s=>s.waitForAsyncAttributes?.())).then(r,At)}};});var pu,K3=E(()=>{$3();pu=class extends xE{onShutdown(){}};});var W3=E(()=>{K3();});var X3=E(()=>{W3();});var LE={};Ue(LE,{BatchLogRecordProcessor:()=>pu,ConsoleLogRecordExporter:()=>bE,InMemoryLogRecordExporter:()=>IE,LoggerProvider:()=>PE,NoopLogRecordProcessor:()=>du,SimpleLogRecordProcessor:()=>ME});var DE=E(()=>{G3();nC();j3();z3();Y3();X3();});var fr,wE=E(()=>{(function(t){t[t.DELTA=0]="DELTA",t[t.CUMULATIVE=1]="CUMULATIVE";})(fr||(fr={}));});var le,hr,ds=E(()=>{(function(t){t.COUNTER="COUNTER",t.GAUGE="GAUGE",t.HISTOGRAM="HISTOGRAM",t.UP_DOWN_COUNTER="UP_DOWN_COUNTER",t.OBSERVABLE_COUNTER="OBSERVABLE_COUNTER",t.OBSERVABLE_GAUGE="OBSERVABLE_GAUGE",t.OBSERVABLE_UP_DOWN_COUNTER="OBSERVABLE_UP_DOWN_COUNTER";})(le||(le={}));(function(t){t[t.HISTOGRAM=0]="HISTOGRAM",t[t.EXPONENTIAL_HISTOGRAM=1]="EXPONENTIAL_HISTOGRAM",t[t.GAUGE=2]="GAUGE",t[t.SUM=3]="SUM";})(hr||(hr={}));});function Q3(t){return t!=null}function UE(t){let e=Object.keys(t);return e.length===0?"":(e=e.sort(),JSON.stringify(e.map(r=>[r,t[r]])))}function J3(t){return `${t.name}:${t.version??""}:${t.schemaUrl??""}`}function ps(t,e){let r,n=new Promise(function(a,o){r=setTimeout(function(){o(new va("Operation timed out."));},e);});return Promise.race([t,n]).then(s=>(clearTimeout(r),s),s=>{throw clearTimeout(r),s})}async function Z3(t){return Promise.all(t.map(async e=>{try{return {status:"fulfilled",value:await e}}catch(r){return {status:"rejected",reason:r}}}))}function eY(t){return t.status==="rejected"}function iC(t,e){let r=[];return t.forEach(n=>{r.push(...e(n));}),r}function tY(t,e){if(t.size!==e.size)return  false;for(let r of t)if(!e.has(r))return  false;return  true}function rY(t,e){let r=0,n=t.length-1,s=t.length;for(;n>=r;){let a=r+Math.trunc((n-r)/2);t[a]<e?r=a+1:(s=a,n=a-1);}return s}function nY(t,e){return t.toLowerCase()===e.toLowerCase()}var va,ci=E(()=>{va=class t extends Error{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype);}};});var Ln,fu=E(()=>{(function(t){t[t.DROP=0]="DROP",t[t.SUM=1]="SUM",t[t.LAST_VALUE=2]="LAST_VALUE",t[t.HISTOGRAM=3]="HISTOGRAM",t[t.EXPONENTIAL_HISTOGRAM=4]="EXPONENTIAL_HISTOGRAM";})(Ln||(Ln={}));});var zp,iY=E(()=>{fu();zp=class{kind=Ln.DROP;createAccumulation(){}merge(e,r){}diff(e,r){}toMetricData(e,r,n,s){}};});function gbe(t){let e=t.map(()=>0);return e.push(0),{buckets:{boundaries:t,counts:e},sum:0,count:0,hasMinMax:false,min:1/0,max:-1/0}}var hu,_u,oY=E(()=>{fu();ds();ci();hu=class{startTime;_boundaries;_recordMinMax;_current;constructor(e,r,n=true,s=gbe(r)){this.startTime=e,this._boundaries=r,this._recordMinMax=n,this._current=s;}record(e){if(Number.isNaN(e))return;this._current.count+=1,this._current.sum+=e,this._recordMinMax&&(this._current.min=Math.min(e,this._current.min),this._current.max=Math.max(e,this._current.max),this._current.hasMinMax=true);let r=rY(this._boundaries,e);this._current.buckets.counts[r]+=1;}setStartTime(e){this.startTime=e;}toPointValue(){return this._current}},_u=class{_boundaries;_recordMinMax;kind=Ln.HISTOGRAM;constructor(e,r){this._boundaries=e,this._recordMinMax=r;}createAccumulation(e){return new hu(e,this._boundaries,this._recordMinMax)}merge(e,r){let n=e.toPointValue(),s=r.toPointValue(),a=n.buckets.counts,o=s.buckets.counts,i=new Array(a.length);for(let l=0;l<a.length;l++)i[l]=a[l]+o[l];let c=1/0,u=-1/0;return this._recordMinMax&&(n.hasMinMax&&s.hasMinMax?(c=Math.min(n.min,s.min),u=Math.max(n.max,s.max)):n.hasMinMax?(c=n.min,u=n.max):s.hasMinMax&&(c=s.min,u=s.max)),new hu(e.startTime,n.buckets.boundaries,this._recordMinMax,{buckets:{boundaries:n.buckets.boundaries,counts:i},count:n.count+s.count,sum:n.sum+s.sum,hasMinMax:this._recordMinMax&&(n.hasMinMax||s.hasMinMax),min:c,max:u})}diff(e,r){let n=e.toPointValue(),s=r.toPointValue(),a=n.buckets.counts,o=s.buckets.counts,i=new Array(a.length);for(let c=0;c<a.length;c++)i[c]=o[c]-a[c];return new hu(r.startTime,n.buckets.boundaries,this._recordMinMax,{buckets:{boundaries:n.buckets.boundaries,counts:i},count:s.count-n.count,sum:s.sum-n.sum,hasMinMax:false,min:1/0,max:-1/0})}toMetricData(e,r,n,s){return {descriptor:e,aggregationTemporality:r,dataPointType:hr.HISTOGRAM,dataPoints:n.map(([a,o])=>{let i=o.toPointValue(),c=e.type===le.GAUGE||e.type===le.UP_DOWN_COUNTER||e.type===le.OBSERVABLE_GAUGE||e.type===le.OBSERVABLE_UP_DOWN_COUNTER;return {attributes:a,startTime:o.startTime,endTime:s,value:{min:i.hasMinMax?i.min:void 0,max:i.hasMinMax?i.max:void 0,sum:c?void 0:i.sum,buckets:i.buckets,count:i.count}}})}}};});var Yp,oC,sY=E(()=>{Yp=class t{backing;indexBase;indexStart;indexEnd;constructor(e=new oC,r=0,n=0,s=0){this.backing=e,this.indexBase=r,this.indexStart=n,this.indexEnd=s;}get offset(){return this.indexStart}get length(){return this.backing.length===0||this.indexEnd===this.indexStart&&this.at(0)===0?0:this.indexEnd-this.indexStart+1}counts(){return Array.from({length:this.length},(e,r)=>this.at(r))}at(e){let r=this.indexBase-this.indexStart;return e<r&&(e+=this.backing.length),e-=r,this.backing.countAt(e)}incrementBucket(e,r){this.backing.increment(e,r);}decrementBucket(e,r){this.backing.decrement(e,r);}trim(){for(let e=0;e<this.length;e++)if(this.at(e)!==0){this.indexStart+=e;break}else if(e===this.length-1){this.indexStart=this.indexEnd=this.indexBase=0;return}for(let e=this.length-1;e>=0;e--)if(this.at(e)!==0){this.indexEnd-=this.length-e-1;break}this._rotate();}downscale(e){this._rotate();let r=1+this.indexEnd-this.indexStart,n=1<<e,s=0,a=0;for(let o=this.indexStart;o<=this.indexEnd;){let i=o%n;i<0&&(i+=n);for(let c=i;c<n&&s<r;c++)this._relocateBucket(a,s),s++,o++;a++;}this.indexStart>>=e,this.indexEnd>>=e,this.indexBase=this.indexStart;}clone(){return new t(this.backing.clone(),this.indexBase,this.indexStart,this.indexEnd)}_rotate(){let e=this.indexBase-this.indexStart;e!==0&&(e>0?(this.backing.reverse(0,this.backing.length),this.backing.reverse(0,e),this.backing.reverse(e,this.backing.length)):(this.backing.reverse(0,this.backing.length),this.backing.reverse(0,this.backing.length+e)),this.indexBase=this.indexStart);}_relocateBucket(e,r){e!==r&&this.incrementBucket(e,this.backing.emptyBucket(r));}},oC=class t{_counts;constructor(e=[0]){this._counts=e;}get length(){return this._counts.length}countAt(e){return this._counts[e]}growTo(e,r,n){let s=new Array(e).fill(0);s.splice(n,this._counts.length-r,...this._counts.slice(r)),s.splice(0,r,...this._counts.slice(0,r)),this._counts=s;}reverse(e,r){let n=Math.floor((e+r)/2)-e;for(let s=0;s<n;s++){let a=this._counts[e+s];this._counts[e+s]=this._counts[r-s-1],this._counts[r-s-1]=a;}}emptyBucket(e){let r=this._counts[e];return this._counts[e]=0,r}increment(e,r){this._counts[e]+=r;}decrement(e,r){this._counts[e]>=r?this._counts[e]-=r:this._counts[e]=0;}clone(){return new t([...this._counts])}};});function kE(t){let e=new DataView(new ArrayBuffer(8));return e.setFloat64(0,t),((e.getUint32(0)&2146435072)>>20)-1023}function VE(t){let e=new DataView(new ArrayBuffer(8));e.setFloat64(0,t);let r=e.getUint32(0),n=e.getUint32(4);return (r&1048575)*Math.pow(2,32)+n}var $p,sC=E(()=>{$p=Math.pow(2,-1022);});function Kp(t,e){return t===0||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY||Number.isNaN(t)?t:t*Math.pow(2,e)}function cY(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t++,t}var BE=E(()=>{});var Li,FE=E(()=>{Li=class extends Error{};});var qE,lY=E(()=>{sC();BE();FE();qE=class{_shift;constructor(e){this._shift=-e;}mapToIndex(e){if(e<$p)return this._minNormalLowerBoundaryIndex();let r=kE(e),n=this._rightShift(VE(e)-1,52);return r+n>>this._shift}lowerBoundary(e){let r=this._minNormalLowerBoundaryIndex();if(e<r)throw new Li(`underflow: ${e} is < minimum lower boundary: ${r}`);let n=this._maxNormalLowerBoundaryIndex();if(e>n)throw new Li(`overflow: ${e} is > maximum lower boundary: ${n}`);return Kp(1,e<<this._shift)}get scale(){return this._shift===0?0:-this._shift}_minNormalLowerBoundaryIndex(){let e=-1022>>this._shift;return this._shift<2&&e--,e}_maxNormalLowerBoundaryIndex(){return 1023>>this._shift}_rightShift(e,r){return Math.floor(e*Math.pow(2,-r))}};});var HE,dY=E(()=>{sC();BE();FE();HE=class{_scale;_scaleFactor;_inverseFactor;constructor(e){this._scale=e,this._scaleFactor=Kp(Math.LOG2E,e),this._inverseFactor=Kp(Math.LN2,-e);}mapToIndex(e){if(e<=$p)return this._minNormalLowerBoundaryIndex()-1;if(VE(e)===0)return (kE(e)<<this._scale)-1;let r=Math.floor(Math.log(e)*this._scaleFactor),n=this._maxNormalLowerBoundaryIndex();return r>=n?n:r}lowerBoundary(e){let r=this._maxNormalLowerBoundaryIndex();if(e>=r){if(e===r)return 2*Math.exp((e-(1<<this._scale))/this._scaleFactor);throw new Li(`overflow: ${e} is > maximum lower boundary: ${r}`)}let n=this._minNormalLowerBoundaryIndex();if(e<=n){if(e===n)return $p;if(e===n-1)return Math.exp((e+(1<<this._scale))/this._scaleFactor)/2;throw new Li(`overflow: ${e} is < minimum lower boundary: ${n}`)}return Math.exp(e*this._inverseFactor)}get scale(){return this._scale}_minNormalLowerBoundaryIndex(){return  -1022<<this._scale}_maxNormalLowerBoundaryIndex(){return (1024<<this._scale)-1}};});function uC(t){if(t>fY||t<pY)throw new Li(`expected scale >= ${pY} && <= ${fY}, got: ${t}`);return Abe[t+10]}var pY,fY,Abe,hY=E(()=>{lY();dY();FE();pY=-10,fY=20,Abe=Array.from({length:31},(t,e)=>e>10?new HE(e-10):new qE(e-10));});var mu,Rbe,vbe,lC,GE,Wp,_Y=E(()=>{fu();ds();M();sY();hY();BE();mu=class t{low;high;static combine(e,r){return new t(Math.min(e.low,r.low),Math.max(e.high,r.high))}constructor(e,r){this.low=e,this.high=r;}},Rbe=20,vbe=160,lC=2,GE=class t{startTime;_maxSize;_recordMinMax;_sum;_count;_zeroCount;_min;_max;_positive;_negative;_mapping;constructor(e,r=vbe,n=true,s=0,a=0,o=0,i=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,u=new Yp,l=new Yp,d=uC(Rbe)){this.startTime=e,this._maxSize=r,this._recordMinMax=n,this._sum=s,this._count=a,this._zeroCount=o,this._min=i,this._max=c,this._positive=u,this._negative=l,this._mapping=d,this._maxSize<lC&&(N.warn(`Exponential Histogram Max Size set to ${this._maxSize},                 changing to the minimum size of: ${lC}`),this._maxSize=lC);}record(e){this.updateByIncrement(e,1);}setStartTime(e){this.startTime=e;}toPointValue(){return {hasMinMax:this._recordMinMax,min:this.min,max:this.max,sum:this.sum,positive:{offset:this.positive.offset,bucketCounts:this.positive.counts()},negative:{offset:this.negative.offset,bucketCounts:this.negative.counts()},count:this.count,scale:this.scale,zeroCount:this.zeroCount}}get sum(){return this._sum}get min(){return this._min}get max(){return this._max}get count(){return this._count}get zeroCount(){return this._zeroCount}get scale(){return this._count===this._zeroCount?0:this._mapping.scale}get positive(){return this._positive}get negative(){return this._negative}updateByIncrement(e,r){if(!Number.isNaN(e)){if(e>this._max&&(this._max=e),e<this._min&&(this._min=e),this._count+=r,e===0){this._zeroCount+=r;return}this._sum+=e*r,e>0?this._updateBuckets(this._positive,e,r):this._updateBuckets(this._negative,-e,r);}}merge(e){this._count===0?(this._min=e.min,this._max=e.max):e.count!==0&&(e.min<this.min&&(this._min=e.min),e.max>this.max&&(this._max=e.max)),this.startTime=e.startTime,this._sum+=e.sum,this._count+=e.count,this._zeroCount+=e.zeroCount;let r=this._minScale(e);this._downscale(this.scale-r),this._mergeBuckets(this.positive,e,e.positive,r),this._mergeBuckets(this.negative,e,e.negative,r);}diff(e){this._min=1/0,this._max=-1/0,this._sum-=e.sum,this._count-=e.count,this._zeroCount-=e.zeroCount;let r=this._minScale(e);this._downscale(this.scale-r),this._diffBuckets(this.positive,e,e.positive,r),this._diffBuckets(this.negative,e,e.negative,r);}clone(){return new t(this.startTime,this._maxSize,this._recordMinMax,this._sum,this._count,this._zeroCount,this._min,this._max,this.positive.clone(),this.negative.clone(),this._mapping)}_updateBuckets(e,r,n){let s=this._mapping.mapToIndex(r),a=false,o=0,i=0;if(e.length===0?(e.indexStart=s,e.indexEnd=e.indexStart,e.indexBase=e.indexStart):s<e.indexStart&&e.indexEnd-s>=this._maxSize?(a=true,i=s,o=e.indexEnd):s>e.indexEnd&&s-e.indexStart>=this._maxSize&&(a=true,i=e.indexStart,o=s),a){let c=this._changeScale(o,i);this._downscale(c),s=this._mapping.mapToIndex(r);}this._incrementIndexBy(e,s,n);}_incrementIndexBy(e,r,n){if(n===0)return;if(e.length===0&&(e.indexStart=e.indexEnd=e.indexBase=r),r<e.indexStart){let a=e.indexEnd-r;a>=e.backing.length&&this._grow(e,a+1),e.indexStart=r;}else if(r>e.indexEnd){let a=r-e.indexStart;a>=e.backing.length&&this._grow(e,a+1),e.indexEnd=r;}let s=r-e.indexBase;s<0&&(s+=e.backing.length),e.incrementBucket(s,n);}_grow(e,r){let n=e.backing.length,s=e.indexBase-e.indexStart,a=n-s,o=cY(r);o>this._maxSize&&(o=this._maxSize);let i=o-s;e.backing.growTo(o,a,i);}_changeScale(e,r){let n=0;for(;e-r>=this._maxSize;)e>>=1,r>>=1,n++;return n}_downscale(e){if(e===0)return;if(e<0)throw new Error(`impossible change of scale: ${this.scale}`);let r=this._mapping.scale-e;this._positive.downscale(e),this._negative.downscale(e),this._mapping=uC(r);}_minScale(e){let r=Math.min(this.scale,e.scale),n=mu.combine(this._highLowAtScale(this.positive,this.scale,r),this._highLowAtScale(e.positive,e.scale,r)),s=mu.combine(this._highLowAtScale(this.negative,this.scale,r),this._highLowAtScale(e.negative,e.scale,r));return Math.min(r-this._changeScale(n.high,n.low),r-this._changeScale(s.high,s.low))}_highLowAtScale(e,r,n){if(e.length===0)return new mu(0,-1);let s=r-n;return new mu(e.indexStart>>s,e.indexEnd>>s)}_mergeBuckets(e,r,n,s){let a=n.offset,o=r.scale-s;for(let i=0;i<n.length;i++)this._incrementIndexBy(e,a+i>>o,n.at(i));}_diffBuckets(e,r,n,s){let a=n.offset,o=r.scale-s;for(let i=0;i<n.length;i++){let u=(a+i>>o)-e.indexBase;u<0&&(u+=e.backing.length),e.decrementBucket(u,n.at(i));}e.trim();}},Wp=class{_maxSize;_recordMinMax;kind=Ln.EXPONENTIAL_HISTOGRAM;constructor(e,r){this._maxSize=e,this._recordMinMax=r;}createAccumulation(e){return new GE(e,this._maxSize,this._recordMinMax)}merge(e,r){let n=r.clone();return n.merge(e),n}diff(e,r){let n=r.clone();return n.diff(e),n}toMetricData(e,r,n,s){return {descriptor:e,aggregationTemporality:r,dataPointType:hr.EXPONENTIAL_HISTOGRAM,dataPoints:n.map(([a,o])=>{let i=o.toPointValue(),c=e.type===le.GAUGE||e.type===le.UP_DOWN_COUNTER||e.type===le.OBSERVABLE_GAUGE||e.type===le.OBSERVABLE_UP_DOWN_COUNTER;return {attributes:a,startTime:o.startTime,endTime:s,value:{min:i.hasMinMax?i.min:void 0,max:i.hasMinMax?i.max:void 0,sum:c?void 0:i.sum,positive:{offset:i.positive.offset,bucketCounts:i.positive.bucketCounts},negative:{offset:i.negative.offset,bucketCounts:i.negative.bucketCounts},count:i.count,scale:i.scale,zeroCount:i.zeroCount}}})}}};});var Eu,Xp,mY=E(()=>{fu();G();ds();Eu=class{startTime;_current;sampleTime;constructor(e,r=0,n=[0,0]){this.startTime=e,this._current=r,this.sampleTime=n;}record(e){this._current=e,this.sampleTime=pr(Date.now());}setStartTime(e){this.startTime=e;}toPointValue(){return this._current}},Xp=class{kind=Ln.LAST_VALUE;createAccumulation(e){return new Eu(e)}merge(e,r){let n=Ar(r.sampleTime)>=Ar(e.sampleTime)?r:e;return new Eu(e.startTime,n.toPointValue(),n.sampleTime)}diff(e,r){let n=Ar(r.sampleTime)>=Ar(e.sampleTime)?r:e;return new Eu(r.startTime,n.toPointValue(),n.sampleTime)}toMetricData(e,r,n,s){return {descriptor:e,aggregationTemporality:r,dataPointType:hr.GAUGE,dataPoints:n.map(([a,o])=>({attributes:a,startTime:o.startTime,endTime:s,value:o.toPointValue()}))}}};});var fs,Tu,EY=E(()=>{fu();ds();fs=class{startTime;monotonic;_current;reset;constructor(e,r,n=0,s=false){this.startTime=e,this.monotonic=r,this._current=n,this.reset=s;}record(e){this.monotonic&&e<0||(this._current+=e);}setStartTime(e){this.startTime=e;}toPointValue(){return this._current}},Tu=class{monotonic;kind=Ln.SUM;constructor(e){this.monotonic=e;}createAccumulation(e){return new fs(e,this.monotonic)}merge(e,r){let n=e.toPointValue(),s=r.toPointValue();return r.reset?new fs(r.startTime,this.monotonic,s,r.reset):new fs(e.startTime,this.monotonic,n+s)}diff(e,r){let n=e.toPointValue(),s=r.toPointValue();return this.monotonic&&n>s?new fs(r.startTime,this.monotonic,s,true):new fs(r.startTime,this.monotonic,s-n)}toMetricData(e,r,n,s){return {descriptor:e,aggregationTemporality:r,dataPointType:hr.SUM,dataPoints:n.map(([a,o])=>({attributes:a,startTime:o.startTime,endTime:s,value:o.toPointValue()})),isMonotonic:this.monotonic}}};});var TY=E(()=>{iY();oY();_Y();mY();EY();});var dC,pC,fC,hC,Qp,Jp,_C,mC,EC,TC,SC,SY,gY=E(()=>{M();TY();ds();dC=class t{static DEFAULT_INSTANCE=new zp;createAggregator(e){return t.DEFAULT_INSTANCE}},pC=class t{static MONOTONIC_INSTANCE=new Tu(true);static NON_MONOTONIC_INSTANCE=new Tu(false);createAggregator(e){switch(e.type){case le.COUNTER:case le.OBSERVABLE_COUNTER:case le.HISTOGRAM:return t.MONOTONIC_INSTANCE;default:return t.NON_MONOTONIC_INSTANCE}}},fC=class t{static DEFAULT_INSTANCE=new Xp;createAggregator(e){return t.DEFAULT_INSTANCE}},hC=class t{static DEFAULT_INSTANCE=new _u([0,5,10,25,50,75,100,250,500,750,1e3,2500,5e3,7500,1e4],true);createAggregator(e){return t.DEFAULT_INSTANCE}},Qp=class{_recordMinMax;_boundaries;constructor(e,r=true){if(this._recordMinMax=r,e==null)throw new Error("ExplicitBucketHistogramAggregation should be created with explicit boundaries, if a single bucket histogram is required, please pass an empty array");e=e.concat(),e=e.sort((a,o)=>a-o);let n=e.lastIndexOf(-1/0),s=e.indexOf(1/0);s===-1&&(s=void 0),this._boundaries=e.slice(n+1,s);}createAggregator(e){return new _u(this._boundaries,this._recordMinMax)}},Jp=class{_maxSize;_recordMinMax;constructor(e=160,r=true){this._maxSize=e,this._recordMinMax=r;}createAggregator(e){return new Wp(this._maxSize,this._recordMinMax)}},_C=class{_resolve(e){switch(e.type){case le.COUNTER:case le.UP_DOWN_COUNTER:case le.OBSERVABLE_COUNTER:case le.OBSERVABLE_UP_DOWN_COUNTER:return EC;case le.GAUGE:case le.OBSERVABLE_GAUGE:return TC;case le.HISTOGRAM:return e.advice.explicitBucketBoundaries?new Qp(e.advice.explicitBucketBoundaries):SC}return N.warn(`Unable to recognize instrument type: ${e.type}`),mC}createAggregator(e){return this._resolve(e).createAggregator(e)}},mC=new dC,EC=new pC,TC=new fC,SC=new hC,new Jp,SY=new _C;});function jE(t){switch(t.type){case Rr.DEFAULT:return SY;case Rr.DROP:return mC;case Rr.SUM:return EC;case Rr.LAST_VALUE:return TC;case Rr.EXPONENTIAL_HISTOGRAM:{let e=t;return new Jp(e.options?.maxSize,e.options?.recordMinMax)}case Rr.EXPLICIT_BUCKET_HISTOGRAM:{let e=t;return e.options==null?SC:new Qp(e.options?.boundaries,e.options?.recordMinMax)}default:throw new Error("Unsupported Aggregation")}}var Rr,Zp=E(()=>{gY();(function(t){t[t.DEFAULT=0]="DEFAULT",t[t.DROP=1]="DROP",t[t.SUM=2]="SUM",t[t.LAST_VALUE=3]="LAST_VALUE",t[t.EXPLICIT_BUCKET_HISTOGRAM=4]="EXPLICIT_BUCKET_HISTOGRAM",t[t.EXPONENTIAL_HISTOGRAM=5]="EXPONENTIAL_HISTOGRAM";})(Rr||(Rr={}));});var yY,zE,gC=E(()=>{wE();Zp();yY=t=>({type:Rr.DEFAULT}),zE=t=>fr.CUMULATIVE;});var Su,yC=E(()=>{M();ci();gC();Su=class{_shutdown=false;_metricProducers;_sdkMetricProducer;_aggregationTemporalitySelector;_aggregationSelector;_cardinalitySelector;constructor(e){this._aggregationSelector=e?.aggregationSelector??yY,this._aggregationTemporalitySelector=e?.aggregationTemporalitySelector??zE,this._metricProducers=e?.metricProducers??[],this._cardinalitySelector=e?.cardinalitySelector;}setMetricProducer(e){if(this._sdkMetricProducer)throw new Error("MetricReader can not be bound to a MeterProvider again.");this._sdkMetricProducer=e,this.onInitialized();}selectAggregation(e){return this._aggregationSelector(e)}selectAggregationTemporality(e){return this._aggregationTemporalitySelector(e)}selectCardinalityLimit(e){return this._cardinalitySelector?this._cardinalitySelector(e):2e3}onInitialized(){}async collect(e){if(this._sdkMetricProducer===void 0)throw new Error("MetricReader is not bound to a MetricProducer");if(this._shutdown)throw new Error("MetricReader is shutdown");let[r,...n]=await Promise.all([this._sdkMetricProducer.collect({timeoutMillis:e?.timeoutMillis}),...this._metricProducers.map(i=>i.collect({timeoutMillis:e?.timeoutMillis}))]),s=r.errors.concat(iC(n,i=>i.errors)),a=r.resourceMetrics.resource,o=r.resourceMetrics.scopeMetrics.concat(iC(n,i=>i.resourceMetrics.scopeMetrics));return {resourceMetrics:{resource:a,scopeMetrics:o},errors:s}}async shutdown(e){if(this._shutdown){N.error("Cannot call shutdown twice.");return}e?.timeoutMillis==null?await this.onShutdown():await ps(this.onShutdown(),e.timeoutMillis),this._shutdown=true;}async forceFlush(e){if(this._shutdown){N.warn("Cannot forceFlush on already shutdown MetricReader.");return}if(e?.timeoutMillis==null){await this.onForceFlush();return}await ps(this.onForceFlush(),e.timeoutMillis);}};});var YE,AY=E(()=>{M();G();yC();ci();YE=class extends Su{_interval;_exporter;_exportInterval;_exportTimeout;constructor(e){if(super({aggregationSelector:e.exporter.selectAggregation?.bind(e.exporter),aggregationTemporalitySelector:e.exporter.selectAggregationTemporality?.bind(e.exporter),metricProducers:e.metricProducers}),e.exportIntervalMillis!==void 0&&e.exportIntervalMillis<=0)throw Error("exportIntervalMillis must be greater than 0");if(e.exportTimeoutMillis!==void 0&&e.exportTimeoutMillis<=0)throw Error("exportTimeoutMillis must be greater than 0");if(e.exportTimeoutMillis!==void 0&&e.exportIntervalMillis!==void 0&&e.exportIntervalMillis<e.exportTimeoutMillis)throw Error("exportIntervalMillis must be greater than or equal to exportTimeoutMillis");this._exportInterval=e.exportIntervalMillis??6e4,this._exportTimeout=e.exportTimeoutMillis??3e4,this._exporter=e.exporter;}async _runOnce(){try{await ps(this._doRun(),this._exportTimeout);}catch(e){if(e instanceof va){N.error("Export took longer than %s milliseconds and timed out.",this._exportTimeout);return}At(e);}}async _doRun(){let{resourceMetrics:e,errors:r}=await this.collect({timeoutMillis:this._exportTimeout});if(r.length>0&&N.error("PeriodicExportingMetricReader: metrics collection errors",...r),e.resource.asyncAttributesPending)try{await e.resource.waitForAsyncAttributes?.();}catch(s){N.debug("Error while resolving async portion of resource: ",s),At(s);}if(e.scopeMetrics.length===0)return;let n=await Ro._export(this._exporter,e);if(n.code!==de.SUCCESS)throw new Error(`PeriodicExportingMetricReader: metrics export failed (error ${n.error})`)}onInitialized(){this._interval=setInterval(()=>{this._runOnce();},this._exportInterval),Ii(this._interval);}async onForceFlush(){await this._runOnce(),await this._exporter.forceFlush();}async onShutdown(){this._interval&&clearInterval(this._interval),await this.onForceFlush(),await this._exporter.shutdown();}};});var $E,RY=E(()=>{G();$E=class{_shutdown=false;_aggregationTemporality;_metrics=[];constructor(e){this._aggregationTemporality=e;}export(e,r){if(this._shutdown){setTimeout(()=>r({code:de.FAILED}),0);return}this._metrics.push(e),setTimeout(()=>r({code:de.SUCCESS}),0);}getMetrics(){return this._metrics}forceFlush(){return Promise.resolve()}reset(){this._metrics=[];}selectAggregationTemporality(e){return this._aggregationTemporality}shutdown(){return this._shutdown=true,Promise.resolve()}};});var KE,vY=E(()=>{G();gC();KE=class t{_shutdown=false;_temporalitySelector;constructor(e){this._temporalitySelector=e?.temporalitySelector??zE;}export(e,r){if(this._shutdown){setImmediate(r,{code:de.FAILED});return}return t._sendMetrics(e,r)}forceFlush(){return Promise.resolve()}selectAggregationTemporality(e){return this._temporalitySelector(e)}shutdown(){return this._shutdown=true,Promise.resolve()}static _sendMetrics(e,r){for(let n of e.scopeMetrics)for(let s of n.metrics)console.dir({descriptor:s.descriptor,dataPointType:s.dataPointType,dataPoints:s.dataPoints},{depth:null});r({code:de.SUCCESS});}};});var WE,OY=E(()=>{WE=class{_registeredViews=[];addView(e){this._registeredViews.push(e);}findViews(e,r){return this._registeredViews.filter(s=>this._matchInstrument(s.instrumentSelector,e)&&this._matchMeter(s.meterSelector,r))}_matchInstrument(e,r){return (e.getType()===void 0||r.type===e.getType())&&e.getNameFilter().match(r.name)&&e.getUnitFilter().match(r.unit)}_matchMeter(e,r){return e.getNameFilter().match(r.name)&&(r.version===void 0||e.getVersionFilter().match(r.version))&&(r.schemaUrl===void 0||e.getSchemaUrlFilter().match(r.schemaUrl))}};});function Di(t,e,r){return Nbe(t)||N.warn(`Invalid metric name: "${t}". The metric name should be a ASCII string with a length no greater than 255 characters.`),{name:t,type:e,description:r?.description??"",unit:r?.unit??"",valueType:r?.valueType??$r.DOUBLE,advice:r?.advice??{}}}function NY(t,e){return {name:t.name??e.name,description:t.description??e.description,type:e.type,unit:e.unit,valueType:e.valueType,advice:e.advice}}function CY(t,e){return nY(t.name,e.name)&&t.unit===e.unit&&t.type===e.type&&t.valueType===e.valueType}function Nbe(t){return t.match(Obe)!=null}var Obe,ef=E(()=>{M();ci();Obe=/^[a-z][a-z0-9_.\-/]{0,254}$/i;});function tf(t){return t instanceof yu}var gu,XE,QE,JE,ZE,yu,eT,tT,rT,nT=E(()=>{M();G();gu=class{_writableMetricStorage;_descriptor;constructor(e,r){this._writableMetricStorage=e,this._descriptor=r;}_record(e,r={},n=yt.active()){if(typeof e!="number"){N.warn(`non-number value provided to metric ${this._descriptor.name}: ${e}`);return}this._descriptor.valueType===$r.INT&&!Number.isInteger(e)&&(N.warn(`INT value type cannot accept a floating-point value for ${this._descriptor.name}, ignoring the fractional digits.`),e=Math.trunc(e),!Number.isInteger(e))||this._writableMetricStorage.record(e,r,n,pr(Date.now()));}},XE=class extends gu{add(e,r,n){this._record(e,r,n);}},QE=class extends gu{add(e,r,n){if(e<0){N.warn(`negative value provided to counter ${this._descriptor.name}: ${e}`);return}this._record(e,r,n);}},JE=class extends gu{record(e,r,n){this._record(e,r,n);}},ZE=class extends gu{record(e,r,n){if(e<0){N.warn(`negative value provided to histogram ${this._descriptor.name}: ${e}`);return}this._record(e,r,n);}},yu=class{_observableRegistry;_metricStorages;_descriptor;constructor(e,r,n){this._observableRegistry=n,this._descriptor=e,this._metricStorages=r;}addCallback(e){this._observableRegistry.addCallback(e,this);}removeCallback(e){this._observableRegistry.removeCallback(e,this);}},eT=class extends yu{},tT=class extends yu{},rT=class extends yu{};});var iT,PY=E(()=>{ef();nT();ds();iT=class{_meterSharedState;constructor(e){this._meterSharedState=e;}createGauge(e,r){let n=Di(e,le.GAUGE,r),s=this._meterSharedState.registerMetricStorage(n);return new JE(s,n)}createHistogram(e,r){let n=Di(e,le.HISTOGRAM,r),s=this._meterSharedState.registerMetricStorage(n);return new ZE(s,n)}createCounter(e,r){let n=Di(e,le.COUNTER,r),s=this._meterSharedState.registerMetricStorage(n);return new QE(s,n)}createUpDownCounter(e,r){let n=Di(e,le.UP_DOWN_COUNTER,r),s=this._meterSharedState.registerMetricStorage(n);return new XE(s,n)}createObservableGauge(e,r){let n=Di(e,le.OBSERVABLE_GAUGE,r),s=this._meterSharedState.registerAsyncMetricStorage(n);return new tT(n,s,this._meterSharedState.observableRegistry)}createObservableCounter(e,r){let n=Di(e,le.OBSERVABLE_COUNTER,r),s=this._meterSharedState.registerAsyncMetricStorage(n);return new eT(n,s,this._meterSharedState.observableRegistry)}createObservableUpDownCounter(e,r){let n=Di(e,le.OBSERVABLE_UP_DOWN_COUNTER,r),s=this._meterSharedState.registerAsyncMetricStorage(n);return new rT(n,s,this._meterSharedState.observableRegistry)}addBatchObservableCallback(e,r){this._meterSharedState.observableRegistry.addBatchCallback(e,r);}removeBatchObservableCallback(e,r){this._meterSharedState.observableRegistry.removeBatchCallback(e,r);}};});var Au,AC=E(()=>{ef();Au=class{_instrumentDescriptor;constructor(e){this._instrumentDescriptor=e;}getInstrumentDescriptor(){return this._instrumentDescriptor}updateDescription(e){this._instrumentDescriptor=Di(this._instrumentDescriptor.name,this._instrumentDescriptor.type,{description:e,valueType:this._instrumentDescriptor.valueType,unit:this._instrumentDescriptor.unit,advice:this._instrumentDescriptor.advice});}};});var RC,mn,rf=E(()=>{ci();RC=class{_hash;_valueMap=new Map;_keyMap=new Map;constructor(e){this._hash=e;}get(e,r){return r??=this._hash(e),this._valueMap.get(r)}getOrDefault(e,r){let n=this._hash(e);if(this._valueMap.has(n))return this._valueMap.get(n);let s=r();return this._keyMap.has(n)||this._keyMap.set(n,e),this._valueMap.set(n,s),s}set(e,r,n){n??=this._hash(e),this._keyMap.has(n)||this._keyMap.set(n,e),this._valueMap.set(n,r);}has(e,r){return r??=this._hash(e),this._valueMap.has(r)}*keys(){let e=this._keyMap.entries(),r=e.next();for(;r.done!==true;)yield [r.value[1],r.value[0]],r=e.next();}*entries(){let e=this._valueMap.entries(),r=e.next();for(;r.done!==true;)yield [this._keyMap.get(r.value[0]),r.value[1],r.value[0]],r=e.next();}get size(){return this._valueMap.size}},mn=class extends RC{constructor(){super(UE);}};});var Ru,vC=E(()=>{ci();rf();Ru=class{_aggregator;_activeCollectionStorage=new mn;_cumulativeMemoStorage=new mn;_cardinalityLimit;_overflowAttributes={"otel.metric.overflow":true};_overflowHashCode;constructor(e,r){this._aggregator=e,this._cardinalityLimit=(r??2e3)-1,this._overflowHashCode=UE(this._overflowAttributes);}record(e,r,n,s){let a=this._activeCollectionStorage.get(r);if(!a){if(this._activeCollectionStorage.size>=this._cardinalityLimit){this._activeCollectionStorage.getOrDefault(this._overflowAttributes,()=>this._aggregator.createAccumulation(s))?.record(e);return}a=this._aggregator.createAccumulation(s),this._activeCollectionStorage.set(r,a);}a?.record(e);}batchCumulate(e,r){Array.from(e.entries()).forEach(([n,s,a])=>{let o=this._aggregator.createAccumulation(r);o?.record(s);let i=o;if(this._cumulativeMemoStorage.has(n,a)){let c=this._cumulativeMemoStorage.get(n,a);i=this._aggregator.diff(c,o);}else if(this._cumulativeMemoStorage.size>=this._cardinalityLimit&&(n=this._overflowAttributes,a=this._overflowHashCode,this._cumulativeMemoStorage.has(n,a))){let c=this._cumulativeMemoStorage.get(n,a);i=this._aggregator.diff(c,o);}if(this._activeCollectionStorage.has(n,a)){let c=this._activeCollectionStorage.get(n,a);i=this._aggregator.merge(c,i);}this._cumulativeMemoStorage.set(n,o,a),this._activeCollectionStorage.set(n,i,a);});}collect(){let e=this._activeCollectionStorage;return this._activeCollectionStorage=new mn,e}};});function Cbe(t){return Array.from(t.entries())}var vu,OC=E(()=>{wE();rf();vu=class t{_aggregator;_unreportedAccumulations=new Map;_reportHistory=new Map;constructor(e,r){this._aggregator=e,r.forEach(n=>{this._unreportedAccumulations.set(n,[]);});}buildMetrics(e,r,n,s){this._stashAccumulations(n);let a=this._getMergedUnreportedAccumulations(e),o=a,i;if(this._reportHistory.has(e)){let u=this._reportHistory.get(e),l=u.collectionTime;i=u.aggregationTemporality,i===fr.CUMULATIVE?o=t.merge(u.accumulations,a,this._aggregator):o=t.calibrateStartTime(u.accumulations,a,l);}else i=e.selectAggregationTemporality(r.type);this._reportHistory.set(e,{accumulations:o,collectionTime:s,aggregationTemporality:i});let c=Cbe(o);if(c.length!==0)return this._aggregator.toMetricData(r,i,c,s)}_stashAccumulations(e){let r=this._unreportedAccumulations.keys();for(let n of r){let s=this._unreportedAccumulations.get(n);s===void 0&&(s=[],this._unreportedAccumulations.set(n,s)),s.push(e);}}_getMergedUnreportedAccumulations(e){let r=new mn,n=this._unreportedAccumulations.get(e);if(this._unreportedAccumulations.set(e,[]),n===void 0)return r;for(let s of n)r=t.merge(r,s,this._aggregator);return r}static merge(e,r,n){let s=e,a=r.entries(),o=a.next();for(;o.done!==true;){let[i,c,u]=o.value;if(e.has(i,u)){let l=e.get(i,u),d=n.merge(l,c);s.set(i,d,u);}else s.set(i,c,u);o=a.next();}return s}static calibrateStartTime(e,r,n){for(let[s,a]of e.keys())r.get(s,a)?.setStartTime(n);return r}};});var oT,bY=E(()=>{AC();vC();OC();rf();oT=class extends Au{_attributesProcessor;_aggregationCardinalityLimit;_deltaMetricStorage;_temporalMetricStorage;constructor(e,r,n,s,a){super(e),this._attributesProcessor=n,this._aggregationCardinalityLimit=a,this._deltaMetricStorage=new Ru(r,this._aggregationCardinalityLimit),this._temporalMetricStorage=new vu(r,s);}record(e,r){let n=new mn;Array.from(e.entries()).forEach(([s,a])=>{n.set(this._attributesProcessor.process(s),a);}),this._deltaMetricStorage.batchCumulate(n,r);}collect(e,r){let n=this._deltaMetricStorage.collect();return this._temporalMetricStorage.buildMetrics(e,this._instrumentDescriptor,n,r)}};});function NC(t,e){let r="";return t.unit!==e.unit&&(r+=`	- Unit '${t.unit}' does not match '${e.unit}'
`),t.type!==e.type&&(r+=`	- Type '${t.type}' does not match '${e.type}'
`),t.valueType!==e.valueType&&(r+=`	- Value Type '${t.valueType}' does not match '${e.valueType}'
`),t.description!==e.description&&(r+=`	- Description '${t.description}' does not match '${e.description}'
`),r}function Pbe(t,e){return `	- use valueType '${t.valueType}' on instrument creation or use an instrument name other than '${e.name}'`}function bbe(t,e){return `	- use unit '${t.unit}' on instrument creation or use an instrument name other than '${e.name}'`}function Mbe(t,e){let r={name:e.name,type:e.type,unit:e.unit},n=JSON.stringify(r);return `	- create a new view with a name other than '${t.name}' and InstrumentSelector '${n}'`}function Ibe(t,e){let r={name:e.name,type:e.type,unit:e.unit},n=JSON.stringify(r);return `	- create a new view with a name other than '${t.name}' and InstrumentSelector '${n}'
    	- OR - create a new view with the name ${t.name} and description '${t.description}' and InstrumentSelector ${n}
    	- OR - create a new view with the name ${e.name} and description '${t.description}' and InstrumentSelector ${n}`}function CC(t,e){return t.valueType!==e.valueType?Pbe(t,e):t.unit!==e.unit?bbe(t,e):t.type!==e.type?Mbe(t,e):t.description!==e.description?Ibe(t,e):""}var MY=E(()=>{});var sT,IY=E(()=>{ef();M();MY();sT=class t{_sharedRegistry=new Map;_perCollectorRegistry=new Map;static create(){return new t}getStorages(e){let r=[];for(let s of this._sharedRegistry.values())r=r.concat(s);let n=this._perCollectorRegistry.get(e);if(n!=null)for(let s of n.values())r=r.concat(s);return r}register(e){this._registerStorage(e,this._sharedRegistry);}registerForCollector(e,r){let n=this._perCollectorRegistry.get(e);n==null&&(n=new Map,this._perCollectorRegistry.set(e,n)),this._registerStorage(r,n);}findOrUpdateCompatibleStorage(e){let r=this._sharedRegistry.get(e.name);return r===void 0?null:this._findOrUpdateCompatibleStorage(e,r)}findOrUpdateCompatibleCollectorStorage(e,r){let n=this._perCollectorRegistry.get(e);if(n===void 0)return null;let s=n.get(r.name);return s===void 0?null:this._findOrUpdateCompatibleStorage(r,s)}_registerStorage(e,r){let n=e.getInstrumentDescriptor(),s=r.get(n.name);if(s===void 0){r.set(n.name,[e]);return}s.push(e);}_findOrUpdateCompatibleStorage(e,r){let n=null;for(let s of r){let a=s.getInstrumentDescriptor();CY(a,e)?(a.description!==e.description&&(e.description.length>a.description.length&&s.updateDescription(e.description),N.warn("A view or instrument with the name ",e.name,` has already been registered, but has a different description and is incompatible with another registered view.
`,`Details:
`,NC(a,e),`The longer description will be used.
To resolve the conflict:`,CC(a,e))),n=s):N.warn("A view or instrument with the name ",e.name,` has already been registered and is incompatible with another registered view.
`,`Details:
`,NC(a,e),`To resolve the conflict:
`,CC(a,e));}return n}};});var aT,xY=E(()=>{aT=class{_backingStorages;constructor(e){this._backingStorages=e;}record(e,r,n,s){this._backingStorages.forEach(a=>{a.record(e,r,n,s);});}};});var cT,uT,LY=E(()=>{M();rf();nT();cT=class{_instrumentName;_valueType;_buffer=new mn;constructor(e,r){this._instrumentName=e,this._valueType=r;}observe(e,r={}){if(typeof e!="number"){N.warn(`non-number value provided to metric ${this._instrumentName}: ${e}`);return}this._valueType===$r.INT&&!Number.isInteger(e)&&(N.warn(`INT value type cannot accept a floating-point value for ${this._instrumentName}, ignoring the fractional digits.`),e=Math.trunc(e),!Number.isInteger(e))||this._buffer.set(r,e);}},uT=class{_buffer=new Map;observe(e,r,n={}){if(!tf(e))return;let s=this._buffer.get(e);if(s==null&&(s=new mn,this._buffer.set(e,s)),typeof r!="number"){N.warn(`non-number value provided to metric ${e._descriptor.name}: ${r}`);return}e._descriptor.valueType===$r.INT&&!Number.isInteger(r)&&(N.warn(`INT value type cannot accept a floating-point value for ${e._descriptor.name}, ignoring the fractional digits.`),r=Math.trunc(r),!Number.isInteger(r))||s.set(n,r);}};});var lT,DY=E(()=>{M();nT();LY();ci();lT=class{_callbacks=[];_batchCallbacks=[];addCallback(e,r){this._findCallback(e,r)>=0||this._callbacks.push({callback:e,instrument:r});}removeCallback(e,r){let n=this._findCallback(e,r);n<0||this._callbacks.splice(n,1);}addBatchCallback(e,r){let n=new Set(r.filter(tf));if(n.size===0){N.error("BatchObservableCallback is not associated with valid instruments",r);return}this._findBatchCallback(e,n)>=0||this._batchCallbacks.push({callback:e,instruments:n});}removeBatchCallback(e,r){let n=new Set(r.filter(tf)),s=this._findBatchCallback(e,n);s<0||this._batchCallbacks.splice(s,1);}async observe(e,r){let n=this._observeCallbacks(e,r),s=this._observeBatchCallbacks(e,r);return (await Z3([...n,...s])).filter(eY).map(i=>i.reason)}_observeCallbacks(e,r){return this._callbacks.map(async({callback:n,instrument:s})=>{let a=new cT(s._descriptor.name,s._descriptor.valueType),o=Promise.resolve(n(a));r!=null&&(o=ps(o,r)),await o,s._metricStorages.forEach(i=>{i.record(a._buffer,e);});})}_observeBatchCallbacks(e,r){return this._batchCallbacks.map(async({callback:n,instruments:s})=>{let a=new uT,o=Promise.resolve(n(a));r!=null&&(o=ps(o,r)),await o,s.forEach(i=>{let c=a._buffer.get(i);c!=null&&i._metricStorages.forEach(u=>{u.record(c,e);});});})}_findCallback(e,r){return this._callbacks.findIndex(n=>n.callback===e&&n.instrument===r)}_findBatchCallback(e,r){return this._batchCallbacks.findIndex(n=>n.callback===e&&tY(n.instruments,r))}};});var dT,wY=E(()=>{AC();vC();OC();dT=class extends Au{_attributesProcessor;_aggregationCardinalityLimit;_deltaMetricStorage;_temporalMetricStorage;constructor(e,r,n,s,a){super(e),this._attributesProcessor=n,this._aggregationCardinalityLimit=a,this._deltaMetricStorage=new Ru(r,this._aggregationCardinalityLimit),this._temporalMetricStorage=new vu(r,s);}record(e,r,n,s){r=this._attributesProcessor.process(r,n),this._deltaMetricStorage.record(e,r,n,s);}collect(e,r){let n=this._deltaMetricStorage.collect();return this._temporalMetricStorage.buildMetrics(e,this._instrumentDescriptor,n,r)}};});function pT(){return xbe}function UY(t){return new bC(t)}function kY(t){return new MC(t)}function VY(t){return new IC(t)}var PC,bC,MC,IC,xbe,fT=E(()=>{PC=class{process(e,r){return e}},bC=class{_processors;constructor(e){this._processors=e;}process(e,r){let n=e;for(let s of this._processors)n=s.process(n,r);return n}},MC=class{_allowedAttributeNames;constructor(e){this._allowedAttributeNames=e;}process(e,r){let n={};return Object.keys(e).filter(s=>this._allowedAttributeNames.includes(s)).forEach(s=>n[s]=e[s]),n}},IC=class{_deniedAttributeNames;constructor(e){this._deniedAttributeNames=e;}process(e,r){let n={};return Object.keys(e).filter(s=>!this._deniedAttributeNames.includes(s)).forEach(s=>n[s]=e[s]),n}};xbe=new PC;});var hT,BY=E(()=>{ef();PY();ci();bY();IY();xY();DY();wY();fT();hT=class{_meterProviderSharedState;_instrumentationScope;metricStorageRegistry=new sT;observableRegistry=new lT;meter;constructor(e,r){this._meterProviderSharedState=e,this._instrumentationScope=r,this.meter=new iT(this);}registerMetricStorage(e){let r=this._registerMetricStorage(e,dT);return r.length===1?r[0]:new aT(r)}registerAsyncMetricStorage(e){return this._registerMetricStorage(e,oT)}async collect(e,r,n){let s=await this.observableRegistry.observe(r,n?.timeoutMillis),a=this.metricStorageRegistry.getStorages(e);if(a.length===0)return null;let o=a.map(i=>i.collect(e,r)).filter(Q3);return o.length===0?{errors:s}:{scopeMetrics:{scope:this._instrumentationScope,metrics:o},errors:s}}_registerMetricStorage(e,r){let s=this._meterProviderSharedState.viewRegistry.findViews(e,this._instrumentationScope).map(a=>{let o=NY(a,e),i=this.metricStorageRegistry.findOrUpdateCompatibleStorage(o);if(i!=null)return i;let c=a.aggregation.createAggregator(o),u=new r(o,c,a.attributesProcessor,this._meterProviderSharedState.metricCollectors,a.aggregationCardinalityLimit);return this.metricStorageRegistry.register(u),u});if(s.length===0){let o=this._meterProviderSharedState.selectAggregations(e.type).map(([i,c])=>{let u=this.metricStorageRegistry.findOrUpdateCompatibleCollectorStorage(i,e);if(u!=null)return u;let l=c.createAggregator(e),d=i.selectCardinalityLimit(e.type),p=new r(e,l,pT(),[i],d);return this.metricStorageRegistry.registerForCollector(i,p),p});s=s.concat(o);}return s}};});var _T,FY=E(()=>{ci();OY();BY();Zp();_T=class{resource;viewRegistry=new WE;metricCollectors=[];meterSharedStates=new Map;constructor(e){this.resource=e;}getMeterSharedState(e){let r=J3(e),n=this.meterSharedStates.get(r);return n==null&&(n=new hT(this,e),this.meterSharedStates.set(r,n)),n}selectAggregations(e){let r=[];for(let n of this.metricCollectors)r.push([n,jE(n.selectAggregation(e))]);return r}};});var mT,qY=E(()=>{G();mT=class{_sharedState;_metricReader;constructor(e,r){this._sharedState=e,this._metricReader=r;}async collect(e){let r=pr(Date.now()),n=[],s=[],a=Array.from(this._sharedState.meterSharedStates.values()).map(async o=>{let i=await o.collect(this,r,e);i?.scopeMetrics!=null&&n.push(i.scopeMetrics),i?.errors!=null&&s.push(...i.errors);});return await Promise.all(a),{resourceMetrics:{resource:this._sharedState.resource,scopeMetrics:n},errors:s}}async forceFlush(e){await this._metricReader.forceFlush(e);}async shutdown(e){await this._metricReader.shutdown(e);}selectAggregationTemporality(e){return this._metricReader.selectAggregationTemporality(e)}selectAggregation(e){return this._metricReader.selectAggregation(e)}selectCardinalityLimit(e){return this._metricReader.selectCardinalityLimit?.(e)??2e3}};});var Lbe,Ou,hs,ET=E(()=>{Lbe=/[\^$\\.+?()[\]{}|]/g,Ou=class t{_matchAll;_regexp;constructor(e){e==="*"?(this._matchAll=true,this._regexp=/.*/):(this._matchAll=false,this._regexp=new RegExp(t.escapePattern(e)));}match(e){return this._matchAll?true:this._regexp.test(e)}static escapePattern(e){return `^${e.replace(Lbe,"\\$&").replace("*",".*")}$`}static hasWildcard(e){return e.includes("*")}},hs=class{_matchAll;_pattern;constructor(e){this._matchAll=e===void 0,this._pattern=e;}match(e){return !!(this._matchAll||e===this._pattern)}};});var TT,HY=E(()=>{ET();TT=class{_nameFilter;_type;_unitFilter;constructor(e){this._nameFilter=new Ou(e?.name??"*"),this._type=e?.type,this._unitFilter=new hs(e?.unit);}getType(){return this._type}getNameFilter(){return this._nameFilter}getUnitFilter(){return this._unitFilter}};});var ST,GY=E(()=>{ET();ST=class{_nameFilter;_versionFilter;_schemaUrlFilter;constructor(e){this._nameFilter=new hs(e?.name),this._versionFilter=new hs(e?.version),this._schemaUrlFilter=new hs(e?.schemaUrl);}getNameFilter(){return this._nameFilter}getVersionFilter(){return this._versionFilter}getSchemaUrlFilter(){return this._schemaUrlFilter}};});function Dbe(t){return t.instrumentName==null&&t.instrumentType==null&&t.instrumentUnit==null&&t.meterName==null&&t.meterVersion==null&&t.meterSchemaUrl==null}function wbe(t){if(Dbe(t))throw new Error("Cannot create view with no selector arguments supplied");if(t.name!=null&&(t?.instrumentName==null||Ou.hasWildcard(t.instrumentName)))throw new Error("Views with a specified name must be declared with an instrument selector that selects at most one instrument per meter.")}var gT,jY=E(()=>{ET();fT();HY();GY();Zp();gT=class{name;description;aggregation;attributesProcessor;instrumentSelector;meterSelector;aggregationCardinalityLimit;constructor(e){wbe(e),e.attributesProcessors!=null?this.attributesProcessor=UY(e.attributesProcessors):this.attributesProcessor=pT(),this.name=e.name,this.description=e.description,this.aggregation=jE(e.aggregation??{type:Rr.DEFAULT}),this.instrumentSelector=new TT({name:e.instrumentName,type:e.instrumentType,unit:e.instrumentUnit}),this.meterSelector=new ST({name:e.meterName,version:e.meterVersion,schemaUrl:e.meterSchemaUrl}),this.aggregationCardinalityLimit=e.aggregationCardinalityLimit;}};});var yT,zY=E(()=>{M();xi();FY();qY();jY();yT=class{_sharedState;_shutdown=false;constructor(e){if(this._sharedState=new _T(e?.resource??ls()),e?.views!=null&&e.views.length>0)for(let r of e.views)this._sharedState.viewRegistry.addView(new gT(r));if(e?.readers!=null&&e.readers.length>0)for(let r of e.readers){let n=new mT(this._sharedState,r);r.setMetricProducer(n),this._sharedState.metricCollectors.push(n);}}getMeter(e,r="",n={}){return this._shutdown?(N.warn("A shutdown MeterProvider cannot provide a Meter"),km()):this._sharedState.getMeterSharedState({name:e,version:r,schemaUrl:n.schemaUrl}).meter}async shutdown(e){if(this._shutdown){N.warn("shutdown may only be called once per MeterProvider");return}this._shutdown=true,await Promise.all(this._sharedState.metricCollectors.map(r=>r.shutdown(e)));}async forceFlush(e){if(this._shutdown){N.warn("invalid attempt to force flush after MeterProvider shutdown");return}await Promise.all(this._sharedState.metricCollectors.map(r=>r.forceFlush(e)));}};});var vr={};Ue(vr,{AggregationTemporality:()=>fr,AggregationType:()=>Rr,ConsoleMetricExporter:()=>KE,DataPointType:()=>hr,InMemoryMetricExporter:()=>$E,InstrumentType:()=>le,MeterProvider:()=>yT,MetricReader:()=>Su,PeriodicExportingMetricReader:()=>YE,TimeoutError:()=>va,createAllowListAttributesProcessor:()=>kY,createDenyListAttributesProcessor:()=>VY});var er=E(()=>{wE();ds();yC();AY();RY();vY();zY();Zp();fT();ci();});var LC=f(AT=>{Object.defineProperty(AT,"__esModule",{value:true});AT.AbstractAsyncHooksContextManager=void 0;var Ube=P("events"),kbe=["addListener","on","once","prependListener","prependOnceListener"],xC=class{bind(e,r){return r instanceof Ube.EventEmitter?this._bindEventEmitter(e,r):typeof r=="function"?this._bindFunction(e,r):r}_bindFunction(e,r){let n=this,s=function(...a){return n.with(e,()=>r.apply(this,a))};return Object.defineProperty(s,"length",{enumerable:false,configurable:true,writable:false,value:r.length}),s}_bindEventEmitter(e,r){return this._getPatchMap(r)!==void 0||(this._createPatchMap(r),kbe.forEach(s=>{r[s]!==void 0&&(r[s]=this._patchAddListener(r,r[s],e));}),typeof r.removeListener=="function"&&(r.removeListener=this._patchRemoveListener(r,r.removeListener)),typeof r.off=="function"&&(r.off=this._patchRemoveListener(r,r.off)),typeof r.removeAllListeners=="function"&&(r.removeAllListeners=this._patchRemoveAllListeners(r,r.removeAllListeners))),r}_patchRemoveListener(e,r){let n=this;return function(s,a){let o=n._getPatchMap(e)?.[s];if(o===void 0)return r.call(this,s,a);let i=o.get(a);return r.call(this,s,i||a)}}_patchRemoveAllListeners(e,r){let n=this;return function(s){let a=n._getPatchMap(e);return a!==void 0&&(arguments.length===0?n._createPatchMap(e):a[s]!==void 0&&delete a[s]),r.apply(this,arguments)}}_patchAddListener(e,r,n){let s=this;return function(a,o){if(s._wrapped)return r.call(this,a,o);let i=s._getPatchMap(e);i===void 0&&(i=s._createPatchMap(e));let c=i[a];c===void 0&&(c=new WeakMap,i[a]=c);let u=s.bind(n,o);c.set(o,u),s._wrapped=true;try{return r.call(this,a,u)}finally{s._wrapped=false;}}}_createPatchMap(e){let r=Object.create(null);return e[this._kOtListeners]=r,r}_getPatchMap(e){return e[this._kOtListeners]}_kOtListeners=Symbol("OtListeners");_wrapped=false};AT.AbstractAsyncHooksContextManager=xC;});var YY=f(RT=>{Object.defineProperty(RT,"__esModule",{value:true});RT.AsyncHooksContextManager=void 0;var Vbe=(M(),A(H)),Bbe=P("async_hooks"),Fbe=LC(),DC=class extends Fbe.AbstractAsyncHooksContextManager{_asyncHook;_contexts=new Map;_stack=[];constructor(){super(),this._asyncHook=Bbe.createHook({init:this._init.bind(this),before:this._before.bind(this),after:this._after.bind(this),destroy:this._destroy.bind(this),promiseResolve:this._destroy.bind(this)});}active(){return this._stack[this._stack.length-1]??Vbe.ROOT_CONTEXT}with(e,r,n,...s){this._enterContext(e);try{return r.call(n,...s)}finally{this._exitContext();}}enable(){return this._asyncHook.enable(),this}disable(){return this._asyncHook.disable(),this._contexts.clear(),this._stack=[],this}_init(e,r){if(r==="TIMERWRAP")return;let n=this._stack[this._stack.length-1];n!==void 0&&this._contexts.set(e,n);}_destroy(e){this._contexts.delete(e);}_before(e){let r=this._contexts.get(e);r!==void 0&&this._enterContext(r);}_after(){this._exitContext();}_enterContext(e){this._stack.push(e);}_exitContext(){this._stack.pop();}};RT.AsyncHooksContextManager=DC;});var $Y=f(vT=>{Object.defineProperty(vT,"__esModule",{value:true});vT.AsyncLocalStorageContextManager=void 0;var qbe=(M(),A(H)),Hbe=P("async_hooks"),Gbe=LC(),wC=class extends Gbe.AbstractAsyncHooksContextManager{_asyncLocalStorage;constructor(){super(),this._asyncLocalStorage=new Hbe.AsyncLocalStorage;}active(){return this._asyncLocalStorage.getStore()??qbe.ROOT_CONTEXT}with(e,r,n,...s){let a=n==null?r:r.bind(n);return this._asyncLocalStorage.run(e,a,...s)}enable(){return this}disable(){return this._asyncLocalStorage.disable(),this}};vT.AsyncLocalStorageContextManager=wC;});var KY=f(Nu=>{Object.defineProperty(Nu,"__esModule",{value:true});Nu.AsyncLocalStorageContextManager=Nu.AsyncHooksContextManager=void 0;var jbe=YY();Object.defineProperty(Nu,"AsyncHooksContextManager",{enumerable:true,get:function(){return jbe.AsyncHooksContextManager}});var zbe=$Y();Object.defineProperty(Nu,"AsyncLocalStorageContextManager",{enumerable:true,get:function(){return zbe.AsyncLocalStorageContextManager}});});var WY,XY=E(()=>{WY="exception";});var OT,QY=E(()=>{M();G();ct();XY();OT=class{_spanContext;kind;parentSpanContext;attributes={};links=[];events=[];startTime;resource;instrumentationScope;_droppedAttributesCount=0;_droppedEventsCount=0;_droppedLinksCount=0;name;status={code:bn.UNSET};endTime=[0,0];_ended=false;_duration=[-1,-1];_spanProcessor;_spanLimits;_attributeValueLengthLimit;_performanceStartTime;_performanceOffset;_startTimeProvided;constructor(e){let r=Date.now();this._spanContext=e.spanContext,this._performanceStartTime=xn.now(),this._performanceOffset=r-(this._performanceStartTime+nu()),this._startTimeProvided=e.startTime!=null,this._spanLimits=e.spanLimits,this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0,this._spanProcessor=e.spanProcessor,this.name=e.name,this.parentSpanContext=e.parentSpanContext,this.kind=e.kind,this.links=e.links||[],this.startTime=this._getTime(e.startTime??r),this.resource=e.resource,this.instrumentationScope=e.scope,e.attributes!=null&&this.setAttributes(e.attributes),this._spanProcessor.onStart(this,e.context);}spanContext(){return this._spanContext}setAttribute(e,r){if(r==null||this._isSpanEnded())return this;if(e.length===0)return N.warn(`Invalid attribute key: ${e}`),this;if(!os(r))return N.warn(`Invalid attribute value set for key: ${e}`),this;let{attributeCountLimit:n}=this._spanLimits;return n!==void 0&&Object.keys(this.attributes).length>=n&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?(this._droppedAttributesCount++,this):(this.attributes[e]=this._truncateToSize(r),this)}setAttributes(e){for(let[r,n]of Object.entries(e))this.setAttribute(r,n);return this}addEvent(e,r,n){if(this._isSpanEnded())return this;let{eventCountLimit:s}=this._spanLimits;if(s===0)return N.warn("No events allowed."),this._droppedEventsCount++,this;s!==void 0&&this.events.length>=s&&(this._droppedEventsCount===0&&N.debug("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),Lp(r)&&(Lp(n)||(n=r),r=void 0);let a=is(r);return this.events.push({name:e,attributes:a,time:this._getTime(n),droppedAttributesCount:0}),this}addLink(e){return this.links.push(e),this}addLinks(e){return this.links.push(...e),this}setStatus(e){return this._isSpanEnded()?this:(this.status={...e},this.status.message!=null&&typeof e.message!="string"&&(N.warn(`Dropping invalid status.message of type '${typeof e.message}', expected 'string'`),delete this.status.message),this)}updateName(e){return this._isSpanEnded()?this:(this.name=e,this)}end(e){if(this._isSpanEnded()){N.error(`${this.name} ${this._spanContext.traceId}-${this._spanContext.spanId} - You can only call end() on a span once.`);return}this._ended=true,this.endTime=this._getTime(e),this._duration=pE(this.startTime,this.endTime),this._duration[0]<0&&(N.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._droppedEventsCount>0&&N.warn(`Dropped ${this._droppedEventsCount} events because eventCountLimit reached`),this._spanProcessor.onEnd(this);}_getTime(e){if(typeof e=="number"&&e<=xn.now())return Ip(e+this._performanceOffset);if(typeof e=="number")return pr(e);if(e instanceof Date)return pr(e.getTime());if(iu(e))return e;if(this._startTimeProvided)return pr(Date.now());let r=xn.now()-this._performanceStartTime;return Dp(this.startTime,pr(r))}isRecording(){return this._ended===false}recordException(e,r){let n={};typeof e=="string"?n[bp]=e:e&&(e.code?n[Mp]=e.code.toString():e.name&&(n[Mp]=e.name),e.message&&(n[bp]=e.message),e.stack&&(n[VN]=e.stack)),n[Mp]||n[bp]?this.addEvent(WY,n,r):N.warn(`Failed to record an exception ${e}`);}get duration(){return this._duration}get ended(){return this._ended}get droppedAttributesCount(){return this._droppedAttributesCount}get droppedEventsCount(){return this._droppedEventsCount}get droppedLinksCount(){return this._droppedLinksCount}_isSpanEnded(){if(this._ended){let e=new Error(`Operation attempted on ended Span {traceId: ${this._spanContext.traceId}, spanId: ${this._spanContext.spanId}}`);N.warn(`Cannot execute the operation on ended Span {traceId: ${this._spanContext.traceId}, spanId: ${this._spanContext.spanId}}`,e);}return this._ended}_truncateToLimitUtil(e,r){return e.length<=r?e:e.substring(0,r)}_truncateToSize(e){let r=this._attributeValueLengthLimit;return r<=0?(N.warn(`Attribute value limit must be positive, got ${r}`),e):typeof e=="string"?this._truncateToLimitUtil(e,r):Array.isArray(e)?e.map(n=>typeof n=="string"?this._truncateToLimitUtil(n,r):n):e}};});var ui,nf=E(()=>{(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED";})(ui||(ui={}));});var wi,NT=E(()=>{nf();wi=class{shouldSample(){return {decision:ui.NOT_RECORD}}toString(){return "AlwaysOffSampler"}};});var Dn,CT=E(()=>{nf();Dn=class{shouldSample(){return {decision:ui.RECORD_AND_SAMPLED}}toString(){return "AlwaysOnSampler"}};});var vo,UC=E(()=>{M();G();NT();CT();vo=class{_root;_remoteParentSampled;_remoteParentNotSampled;_localParentSampled;_localParentNotSampled;constructor(e){this._root=e.root,this._root||(At(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new Dn),this._remoteParentSampled=e.remoteParentSampled??new Dn,this._remoteParentNotSampled=e.remoteParentNotSampled??new wi,this._localParentSampled=e.localParentSampled??new Dn,this._localParentNotSampled=e.localParentNotSampled??new wi;}shouldSample(e,r,n,s,a,o){let i=ge.getSpanContext(e);return !i||!gr(i)?this._root.shouldSample(e,r,n,s,a,o):i.isRemote?i.traceFlags&ze.SAMPLED?this._remoteParentSampled.shouldSample(e,r,n,s,a,o):this._remoteParentNotSampled.shouldSample(e,r,n,s,a,o):i.traceFlags&ze.SAMPLED?this._localParentSampled.shouldSample(e,r,n,s,a,o):this._localParentNotSampled.shouldSample(e,r,n,s,a,o)}toString(){return `ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}};});var Oa,kC=E(()=>{M();nf();Oa=class{_ratio;_upperBound;constructor(e=0){this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(this._ratio*4294967295);}shouldSample(e,r){return {decision:go(r)&&this._accumulate(r)<this._upperBound?ui.RECORD_AND_SAMPLED:ui.NOT_RECORD}}toString(){return `TraceIdRatioBased{${this._ratio}}`}_normalize(e){return typeof e!="number"||isNaN(e)?0:e>=1?1:e<=0?0:e}_accumulate(e){let r=0;for(let n=0;n<e.length/8;n++){let s=n*8,a=parseInt(e.slice(s,s+8),16);r=(r^a)>>>0;}return r}};});function bT(){return {sampler:VC(),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:Me("OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT")??1/0,attributeCountLimit:Me("OTEL_ATTRIBUTE_COUNT_LIMIT")??128},spanLimits:{attributeValueLengthLimit:Me("OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT")??1/0,attributeCountLimit:Me("OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT")??128,linkCountLimit:Me("OTEL_SPAN_LINK_COUNT_LIMIT")??128,eventCountLimit:Me("OTEL_SPAN_EVENT_COUNT_LIMIT")??128,attributePerEventCountLimit:Me("OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT")??128,attributePerLinkCountLimit:Me("OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT")??128}}}function VC(){let t=$t("OTEL_TRACES_SAMPLER")??Ui.ParentBasedAlwaysOn;switch(t){case Ui.AlwaysOn:return new Dn;case Ui.AlwaysOff:return new wi;case Ui.ParentBasedAlwaysOn:return new vo({root:new Dn});case Ui.ParentBasedAlwaysOff:return new vo({root:new wi});case Ui.TraceIdRatio:return new Oa(JY());case Ui.ParentBasedTraceIdRatio:return new vo({root:new Oa(JY())});default:return N.error(`OTEL_TRACES_SAMPLER value "${t}" invalid, defaulting to "${Ui.ParentBasedAlwaysOn}".`),new vo({root:new Dn})}}function JY(){let t=Me("OTEL_TRACES_SAMPLER_ARG");return t==null?(N.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${PT}.`),PT):t<0||t>1?(N.error(`OTEL_TRACES_SAMPLER_ARG=${t} was given, but it is out of range ([0..1]), defaulting to ${PT}.`),PT):t}var Ui,PT,BC=E(()=>{M();G();NT();CT();UC();kC();(function(t){t.AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio";})(Ui||(Ui={}));PT=1;});function ZY(t){let e={sampler:VC()},r=bT(),n=Object.assign({},r,e,t);return n.generalLimits=Object.assign({},r.generalLimits,t.generalLimits||{}),n.spanLimits=Object.assign({},r.spanLimits,t.spanLimits||{}),n}function e$(t){let e=Object.assign({},t.spanLimits);return e.attributeCountLimit=t.spanLimits?.attributeCountLimit??t.generalLimits?.attributeCountLimit??Me("OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT")??Me("OTEL_ATTRIBUTE_COUNT_LIMIT")??Ybe,e.attributeValueLengthLimit=t.spanLimits?.attributeValueLengthLimit??t.generalLimits?.attributeValueLengthLimit??Me("OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT")??Me("OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT")??$be,Object.assign({},t,{spanLimits:e})}var Ybe,$be,FC=E(()=>{BC();G();Ybe=128,$be=1/0;});var MT,t$=E(()=>{M();G();MT=class{_exporter;_maxExportBatchSize;_maxQueueSize;_scheduledDelayMillis;_exportTimeoutMillis;_isExporting=false;_finishedSpans=[];_timer;_shutdownOnce;_droppedSpansCount=0;constructor(e,r){this._exporter=e,this._maxExportBatchSize=typeof r?.maxExportBatchSize=="number"?r.maxExportBatchSize:Me("OTEL_BSP_MAX_EXPORT_BATCH_SIZE")??512,this._maxQueueSize=typeof r?.maxQueueSize=="number"?r.maxQueueSize:Me("OTEL_BSP_MAX_QUEUE_SIZE")??2048,this._scheduledDelayMillis=typeof r?.scheduledDelayMillis=="number"?r.scheduledDelayMillis:Me("OTEL_BSP_SCHEDULE_DELAY")??5e3,this._exportTimeoutMillis=typeof r?.exportTimeoutMillis=="number"?r.exportTimeoutMillis:Me("OTEL_BSP_EXPORT_TIMEOUT")??3e4,this._shutdownOnce=new Wr(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(N.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize);}forceFlush(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()}onStart(e,r){}onEnd(e){this._shutdownOnce.isCalled||(e.spanContext().traceFlags&ze.SAMPLED)!==0&&this._addToBuffer(e);}shutdown(){return this._shutdownOnce.call()}_shutdown(){return Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown())}_addToBuffer(e){if(this._finishedSpans.length>=this._maxQueueSize){this._droppedSpansCount===0&&N.debug("maxQueueSize reached, dropping spans"),this._droppedSpansCount++;return}this._droppedSpansCount>0&&(N.warn(`Dropped ${this._droppedSpansCount} spans because maxQueueSize reached`),this._droppedSpansCount=0),this._finishedSpans.push(e),this._maybeStartTimer();}_flushAll(){return new Promise((e,r)=>{let n=[],s=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);for(let a=0,o=s;a<o;a++)n.push(this._flushOneBatch());Promise.all(n).then(()=>{e();}).catch(r);})}_flushOneBatch(){return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise((e,r)=>{let n=setTimeout(()=>{r(new Error("Timeout"));},this._exportTimeoutMillis);yt.with(ns(yt.active()),()=>{let s;this._finishedSpans.length<=this._maxExportBatchSize?(s=this._finishedSpans,this._finishedSpans=[]):s=this._finishedSpans.splice(0,this._maxExportBatchSize);let a=()=>this._exporter.export(s,i=>{clearTimeout(n),i.code===de.SUCCESS?e():r(i.error??new Error("BatchSpanProcessor: span export failed"));}),o=null;for(let i=0,c=s.length;i<c;i++){let u=s[i];u.resource.asyncAttributesPending&&u.resource.waitForAsyncAttributes&&(o??=[],o.push(u.resource.waitForAsyncAttributes()));}o===null?a():Promise.all(o).then(a,i=>{At(i),r(i);});});})}_maybeStartTimer(){if(this._isExporting)return;let e=()=>{this._isExporting=true,this._flushOneBatch().finally(()=>{this._isExporting=false,this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer());}).catch(r=>{this._isExporting=false,At(r);});};if(this._finishedSpans.length>=this._maxExportBatchSize)return e();this._timer===void 0&&(this._timer=setTimeout(()=>e(),this._scheduledDelayMillis),Ii(this._timer));}_clearTimer(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0);}};});var Cu,r$=E(()=>{t$();Cu=class extends MT{onShutdown(){}};});function n$(t){return function(){for(let r=0;r<t/4;r++)IT.writeUInt32BE(Math.random()*2**32>>>0,r*4);for(let r=0;r<t&&!(IT[r]>0);r++)r===t-1&&(IT[t-1]=1);return IT.toString("hex",0,t)}}var _s,IT,i$=E(()=>{_s=class{generateTraceId=n$(16);generateSpanId=n$(8)},IT=Buffer.allocUnsafe(16);});var o$=E(()=>{r$();i$();});var qC=E(()=>{o$();});var xT,s$=E(()=>{M();G();QY();FC();qC();xT=class{_sampler;_generalLimits;_spanLimits;_idGenerator;instrumentationScope;_resource;_spanProcessor;constructor(e,r,n,s){let a=ZY(r);this._sampler=a.sampler,this._generalLimits=a.generalLimits,this._spanLimits=a.spanLimits,this._idGenerator=r.idGenerator||new _s,this._resource=n,this._spanProcessor=s,this.instrumentationScope=e;}startSpan(e,r={},n=yt.active()){r.root&&(n=ge.deleteSpan(n));let s=ge.getSpan(n);if(yr(n))return N.debug("Instrumentation suppressed, returning Noop Span"),ge.wrapSpanContext(Yc);let a=s?.spanContext(),o=this._idGenerator.generateSpanId(),i,c,u;!a||!ge.isSpanContextValid(a)?c=this._idGenerator.generateTraceId():(c=a.traceId,u=a.traceState,i=a);let l=r.kind??Kr.INTERNAL,d=(r.links??[]).map(b=>({context:b.context,attributes:is(b.attributes)})),p=is(r.attributes),h=this._sampler.shouldSample(n,c,e,l,p,d);u=h.traceState??u;let T=h.decision===ma.RECORD_AND_SAMPLED?ze.SAMPLED:ze.NONE,g={traceId:c,spanId:o,traceFlags:T,traceState:u};if(h.decision===ma.NOT_RECORD)return N.debug("Recording is off, propagating context in a non-recording span"),ge.wrapSpanContext(g);let y=is(Object.assign(p,h.attributes));return new OT({resource:this._resource,scope:this.instrumentationScope,context:n,spanContext:g,name:e,kind:l,links:d,parentSpanContext:i,attributes:y,startTime:r.startTime,spanProcessor:this._spanProcessor,spanLimits:this._spanLimits})}startActiveSpan(e,r,n,s){let a,o,i;if(arguments.length<2)return;arguments.length===2?i=r:arguments.length===3?(a=r,i=n):(a=r,o=n,i=s);let c=o??yt.active(),u=this.startSpan(e,a,c),l=ge.setSpan(c,u);return yt.with(l,i,void 0,u)}getGeneralLimits(){return this._generalLimits}getSpanLimits(){return this._spanLimits}};});var LT,a$=E(()=>{G();LT=class{_spanProcessors;constructor(e){this._spanProcessors=e;}forceFlush(){let e=[];for(let r of this._spanProcessors)e.push(r.forceFlush());return new Promise(r=>{Promise.all(e).then(()=>{r();}).catch(n=>{At(n||new Error("MultiSpanProcessor: forceFlush failed")),r();});})}onStart(e,r){for(let n of this._spanProcessors)n.onStart(e,r);}onEnd(e){for(let r of this._spanProcessors)r.onEnd(e);}shutdown(){let e=[];for(let r of this._spanProcessors)e.push(r.shutdown());return new Promise((r,n)=>{Promise.all(e).then(()=>{r();},n);})}};});var Na,DT,c$=E(()=>{G();xi();s$();BC();a$();FC();(function(t){t[t.resolved=0]="resolved",t[t.timeout=1]="timeout",t[t.error=2]="error",t[t.unresolved=3]="unresolved";})(Na||(Na={}));DT=class{_config;_tracers=new Map;_resource;_activeSpanProcessor;constructor(e={}){let r=su({},bT(),e$(e));this._resource=r.resource??ls(),this._config=Object.assign({},r,{resource:this._resource});let n=[];e.spanProcessors?.length&&n.push(...e.spanProcessors),this._activeSpanProcessor=new LT(n);}getTracer(e,r,n){let s=`${e}@${r||""}:${n?.schemaUrl||""}`;return this._tracers.has(s)||this._tracers.set(s,new xT({name:e,version:r,schemaUrl:n?.schemaUrl},this._config,this._resource,this._activeSpanProcessor)),this._tracers.get(s)}forceFlush(){let e=this._config.forceFlushTimeoutMillis,r=this._activeSpanProcessor._spanProcessors.map(n=>new Promise(s=>{let a,o=setTimeout(()=>{s(new Error(`Span processor did not completed within timeout period of ${e} ms`)),a=Na.timeout;},e);n.forceFlush().then(()=>{clearTimeout(o),a!==Na.timeout&&(a=Na.resolved,s(a));}).catch(i=>{clearTimeout(o),a=Na.error,s(i);});}));return new Promise((n,s)=>{Promise.all(r).then(a=>{let o=a.filter(i=>i!==Na.resolved);o.length>0?s(o):n();}).catch(a=>s([a]));})}shutdown(){return this._activeSpanProcessor.shutdown()}};});var wT,u$=E(()=>{G();wT=class{export(e,r){return this._sendSpans(e,r)}shutdown(){return this._sendSpans([]),this.forceFlush()}forceFlush(){return Promise.resolve()}_exportInfo(e){return {resource:{attributes:e.resource.attributes},instrumentationScope:e.instrumentationScope,traceId:e.spanContext().traceId,parentSpanContext:e.parentSpanContext,traceState:e.spanContext().traceState?.serialize(),name:e.name,id:e.spanContext().spanId,kind:e.kind,timestamp:Ar(e.startTime),duration:Ar(e.duration),attributes:e.attributes,status:e.status,events:e.events,links:e.links}}_sendSpans(e,r){for(let n of e)console.dir(this._exportInfo(n),{depth:3});if(r)return r({code:de.SUCCESS})}};});var UT,l$=E(()=>{G();UT=class{_finishedSpans=[];_stopped=false;export(e,r){if(this._stopped)return r({code:de.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...e),setTimeout(()=>r({code:de.SUCCESS}),0);}shutdown(){return this._stopped=true,this._finishedSpans=[],this.forceFlush()}forceFlush(){return Promise.resolve()}reset(){this._finishedSpans=[];}getFinishedSpans(){return this._finishedSpans}};});var kT,d$=E(()=>{M();G();kT=class{_exporter;_shutdownOnce;_pendingExports;constructor(e){this._exporter=e,this._shutdownOnce=new Wr(this._shutdown,this),this._pendingExports=new Set;}async forceFlush(){await Promise.all(Array.from(this._pendingExports)),this._exporter.forceFlush&&await this._exporter.forceFlush();}onStart(e,r){}onEnd(e){if(this._shutdownOnce.isCalled||(e.spanContext().traceFlags&ze.SAMPLED)===0)return;let r=this._doExport(e).catch(n=>At(n));this._pendingExports.add(r),r.finally(()=>this._pendingExports.delete(r));}async _doExport(e){e.resource.asyncAttributesPending&&await e.resource.waitForAsyncAttributes?.();let r=await Ro._export(this._exporter,[e]);if(r.code!==de.SUCCESS)throw r.error??new Error(`SimpleSpanProcessor: span export failed (status ${r})`)}shutdown(){return this._shutdownOnce.call()}_shutdown(){return this._exporter.shutdown()}};});var VT,p$=E(()=>{VT=class{onStart(e,r){}onEnd(e){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}};});var li={};Ue(li,{AlwaysOffSampler:()=>wi,AlwaysOnSampler:()=>Dn,BasicTracerProvider:()=>DT,BatchSpanProcessor:()=>Cu,ConsoleSpanExporter:()=>wT,InMemorySpanExporter:()=>UT,NoopSpanProcessor:()=>VT,ParentBasedSampler:()=>vo,RandomIdGenerator:()=>_s,SamplingDecision:()=>ui,SimpleSpanProcessor:()=>kT,TraceIdRatioBasedSampler:()=>Oa});var di=E(()=>{c$();qC();u$();l$();d$();p$();NT();CT();UC();kC();nf();});var f$=f(BT=>{Object.defineProperty(BT,"__esModule",{value:true});BT.NodeTracerProvider=void 0;var Kbe=KY(),Wbe=(di(),A(li)),of=(M(),A(H)),HC=(G(),A(Ze));function Xbe(t){if(t!==null){if(t===void 0){let e=new Kbe.AsyncLocalStorageContextManager;e.enable(),of.context.setGlobalContextManager(e);return}t.enable(),of.context.setGlobalContextManager(t);}}function Qbe(t){if(t!==null){if(t===void 0){of.propagation.setGlobalPropagator(new HC.CompositePropagator({propagators:[new HC.W3CTraceContextPropagator,new HC.W3CBaggagePropagator]}));return}of.propagation.setGlobalPropagator(t);}}var GC=class extends Wbe.BasicTracerProvider{constructor(e={}){super(e);}register(e={}){of.trace.setGlobalTracerProvider(this),Xbe(e.contextManager),Qbe(e.propagator);}};BT.NodeTracerProvider=GC;});var jC=f(et=>{Object.defineProperty(et,"__esModule",{value:true});et.TraceIdRatioBasedSampler=et.SimpleSpanProcessor=et.SamplingDecision=et.RandomIdGenerator=et.ParentBasedSampler=et.NoopSpanProcessor=et.InMemorySpanExporter=et.ConsoleSpanExporter=et.BatchSpanProcessor=et.BasicTracerProvider=et.AlwaysOnSampler=et.AlwaysOffSampler=et.NodeTracerProvider=void 0;var Jbe=f$();Object.defineProperty(et,"NodeTracerProvider",{enumerable:true,get:function(){return Jbe.NodeTracerProvider}});var wn=(di(),A(li));Object.defineProperty(et,"AlwaysOffSampler",{enumerable:true,get:function(){return wn.AlwaysOffSampler}});Object.defineProperty(et,"AlwaysOnSampler",{enumerable:true,get:function(){return wn.AlwaysOnSampler}});Object.defineProperty(et,"BasicTracerProvider",{enumerable:true,get:function(){return wn.BasicTracerProvider}});Object.defineProperty(et,"BatchSpanProcessor",{enumerable:true,get:function(){return wn.BatchSpanProcessor}});Object.defineProperty(et,"ConsoleSpanExporter",{enumerable:true,get:function(){return wn.ConsoleSpanExporter}});Object.defineProperty(et,"InMemorySpanExporter",{enumerable:true,get:function(){return wn.InMemorySpanExporter}});Object.defineProperty(et,"NoopSpanProcessor",{enumerable:true,get:function(){return wn.NoopSpanProcessor}});Object.defineProperty(et,"ParentBasedSampler",{enumerable:true,get:function(){return wn.ParentBasedSampler}});Object.defineProperty(et,"RandomIdGenerator",{enumerable:true,get:function(){return wn.RandomIdGenerator}});Object.defineProperty(et,"SamplingDecision",{enumerable:true,get:function(){return wn.SamplingDecision}});Object.defineProperty(et,"SimpleSpanProcessor",{enumerable:true,get:function(){return wn.SimpleSpanProcessor}});Object.defineProperty(et,"TraceIdRatioBasedSampler",{enumerable:true,get:function(){return wn.TraceIdRatioBasedSampler}});});function h$(t,e,r,n){for(let s=0,a=t.length;s<a;s++){let o=t[s];e&&o.setTracerProvider(e),r&&o.setMeterProvider(r),n&&o.setLoggerProvider&&o.setLoggerProvider(n),o.getConfig().enabled||o.enable();}}function _$(t){t.forEach(e=>e.disable());}var m$=E(()=>{});function E$(t){let e=t.tracerProvider||ge.getTracerProvider(),r=t.meterProvider||Dr.getMeterProvider(),n=t.loggerProvider||Cp.getLoggerProvider(),s=t.instrumentations?.flat()??[];return h$(s,e,r,n),()=>{_$(s);}}var T$=E(()=>{M();In();m$();});function v$(t,e,r){if(!tMe(t))return N.error(`Invalid version: ${t}`),false;if(!e)return  true;e=e.replace(/([<>=~^]+)\s+/g,"$1");let n=oMe(t);if(!n)return  false;let s=[],a=O$(n,e,s,r);return a&&!r?.includePrerelease?nMe(n,s):a}function tMe(t){return typeof t=="string"&&R$.test(t)}function O$(t,e,r,n){if(e.includes("||")){let s=e.trim().split("||");for(let a of s)if(zC(t,a,r,n))return  true;return  false}else if(e.includes(" - "))e=NMe(e,n);else if(e.includes(" ")){let s=e.trim().replace(/\s{2,}/g," ").split(" ");for(let a of s)if(!zC(t,a,r,n))return  false;return  true}return zC(t,e,r,n)}function zC(t,e,r,n){if(e=iMe(e,n),e.includes(" "))return O$(t,e,r,n);{let s=sMe(e);return r.push(s),rMe(t,s)}}function rMe(t,e){if(e.invalid)return  false;if(!e.version||$C(e.version))return  true;let r=g$(t.versionSegments||[],e.versionSegments||[]);if(r===0){let n=t.prereleaseSegments||[],s=e.prereleaseSegments||[];!n.length&&!s.length?r=0:!n.length&&s.length?r=1:n.length&&!s.length?r=-1:r=g$(n,s);}return eMe[e.op]?.includes(r)}function nMe(t,e){return t.prerelease?e.some(r=>r.prerelease&&r.version===t.version):true}function iMe(t,e){return t=t.trim(),t=vMe(t,e),t=RMe(t),t=OMe(t,e),t=t.trim(),t}function wr(t){return !t||t.toLowerCase()==="x"||t==="*"}function oMe(t){let e=t.match(R$);if(!e){N.error(`Invalid version: ${t}`);return}let r=e.groups.version,n=e.groups.prerelease,s=e.groups.build,a=r.split("."),o=n?.split(".");return {op:void 0,version:r,versionSegments:a,versionSegmentCount:a.length,prerelease:n,prereleaseSegments:o,prereleaseSegmentCount:o?o.length:0,build:s}}function sMe(t){if(!t)return {};let e=t.match(Zbe);if(!e)return N.error(`Invalid range: ${t}`),{invalid:true};let r=e.groups.op,n=e.groups.version,s=e.groups.prerelease,a=e.groups.build,o=n.split("."),i=s?.split(".");return r==="=="&&(r="="),{op:r||"=",version:n,versionSegments:o,versionSegmentCount:o.length,prerelease:s,prereleaseSegments:i,prereleaseSegmentCount:i?i.length:0,build:a}}function $C(t){return t==="*"||t==="x"||t==="X"}function S$(t){let e=parseInt(t,10);return isNaN(e)?t:e}function aMe(t,e){if(typeof t==typeof e){if(typeof t=="number")return [t,e];if(typeof t=="string")return [t,e];throw new Error("Version segments can only be strings or numbers")}else return [String(t),String(e)]}function cMe(t,e){if($C(t)||$C(e))return 0;let[r,n]=aMe(S$(t),S$(e));return r>n?1:r<n?-1:0}function g$(t,e){for(let r=0;r<Math.max(t.length,e.length);r++){let n=cMe(t[r]||"0",e[r]||"0");if(n!==0)return n}return 0}function RMe(t){let e=SMe;return t.replace(e,(r,n,s,a,o)=>{let i;return wr(n)?i="":wr(s)?i=`>=${n}.0.0 <${+n+1}.0.0-0`:wr(a)?i=`>=${n}.${s}.0 <${n}.${+s+1}.0-0`:o?i=`>=${n}.${s}.${a}-${o} <${n}.${+s+1}.0-0`:i=`>=${n}.${s}.${a} <${n}.${+s+1}.0-0`,i})}function vMe(t,e){let r=AMe,n=e?.includePrerelease?"-0":"";return t.replace(r,(s,a,o,i,c)=>{let u;return wr(a)?u="":wr(o)?u=`>=${a}.0.0${n} <${+a+1}.0.0-0`:wr(i)?a==="0"?u=`>=${a}.${o}.0${n} <${a}.${+o+1}.0-0`:u=`>=${a}.${o}.0${n} <${+a+1}.0.0-0`:c?a==="0"?o==="0"?u=`>=${a}.${o}.${i}-${c} <${a}.${o}.${+i+1}-0`:u=`>=${a}.${o}.${i}-${c} <${a}.${+o+1}.0-0`:u=`>=${a}.${o}.${i}-${c} <${+a+1}.0.0-0`:a==="0"?o==="0"?u=`>=${a}.${o}.${i}${n} <${a}.${o}.${+i+1}-0`:u=`>=${a}.${o}.${i}${n} <${a}.${+o+1}.0-0`:u=`>=${a}.${o}.${i} <${+a+1}.0.0-0`,u})}function OMe(t,e){let r=hMe;return t.replace(r,(n,s,a,o,i,c)=>{let u=wr(a),l=u||wr(o),d=l||wr(i),p=d;return s==="="&&p&&(s=""),c=e?.includePrerelease?"-0":"",u?s===">"||s==="<"?n="<0.0.0-0":n="*":s&&p?(l&&(o=0),i=0,s===">"?(s=">=",l?(a=+a+1,o=0,i=0):(o=+o+1,i=0)):s==="<="&&(s="<",l?a=+a+1:o=+o+1),s==="<"&&(c="-0"),n=`${s+a}.${o}.${i}${c}`):l?n=`>=${a}.0.0${c} <${+a+1}.0.0-0`:d&&(n=`>=${a}.${o}.0${c} <${a}.${+o+1}.0-0`),n})}function NMe(t,e){let r=mMe;return t.replace(r,(n,s,a,o,i,c,u,l,d,p,h,T)=>(wr(a)?s="":wr(o)?s=`>=${a}.0.0${e?.includePrerelease?"-0":""}`:wr(i)?s=`>=${a}.${o}.0${e?.includePrerelease?"-0":""}`:c?s=`>=${s}`:s=`>=${s}${e?.includePrerelease?"-0":""}`,wr(d)?l="":wr(p)?l=`<${+d+1}.0.0-0`:wr(h)?l=`<${d}.${+p+1}.0-0`:T?l=`<=${d}.${p}.${h}-${T}`:e?.includePrerelease?l=`<${d}.${p}.${+h+1}-0`:l=`<=${l}`,`${s} ${l}`.trim()))}var R$,Zbe,eMe,N$,C$,uMe,lMe,y$,dMe,A$,pMe,YC,sf,fMe,hMe,_Me,mMe,EMe,TMe,SMe,gMe,yMe,AMe,P$=E(()=>{M();R$=/^(?:v)?(?<version>(?<major>0|[1-9]\d*)\.(?<minor>0|[1-9]\d*)\.(?<patch>0|[1-9]\d*))(?:-(?<prerelease>(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+(?<build>[0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/,Zbe=/^(?<op><|>|=|==|<=|>=|~|\^|~>)?\s*(?:v)?(?<version>(?<major>x|X|\*|0|[1-9]\d*)(?:\.(?<minor>x|X|\*|0|[1-9]\d*))?(?:\.(?<patch>x|X|\*|0|[1-9]\d*))?)(?:-(?<prerelease>(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+(?<build>[0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/,eMe={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1],"!=":[-1,1]};N$="[a-zA-Z0-9-]",C$="0|[1-9]\\d*",uMe=`\\d*[a-zA-Z-]${N$}*`,lMe="((?:<|>)?=?)",y$=`(?:${C$}|${uMe})`,dMe=`(?:-(${y$}(?:\\.${y$})*))`,A$=`${N$}+`,pMe=`(?:\\+(${A$}(?:\\.${A$})*))`,YC=`${C$}|x|X|\\*`,sf=`[v=\\s]*(${YC})(?:\\.(${YC})(?:\\.(${YC})(?:${dMe})?${pMe}?)?)?`,fMe=`^${lMe}\\s*${sf}$`,hMe=new RegExp(fMe),_Me=`^\\s*(${sf})\\s+-\\s+(${sf})\\s*$`,mMe=new RegExp(_Me),EMe="(?:~>?)",TMe=`^${EMe}${sf}$`,SMe=new RegExp(TMe),gMe="(?:\\^)",yMe=`^${gMe}${sf}$`,AMe=new RegExp(yMe);});function af(t,e,r){let n=!!t[e]&&Object.prototype.propertyIsEnumerable.call(t,e);Object.defineProperty(t,e,{configurable:true,enumerable:n,writable:true,value:r});}var Ur,Ca,KC,Pu,WC,XC=E(()=>{Ur=console.error.bind(console);Ca=(t,e,r)=>{if(!t||!t[e]){Ur("no original function "+String(e)+" to wrap");return}if(!r){Ur("no wrapper function"),Ur(new Error().stack);return}let n=t[e];if(typeof n!="function"||typeof r!="function"){Ur("original object and wrapper must be functions");return}let s=r(n,e);return af(s,"__original",n),af(s,"__unwrap",()=>{t[e]===s&&af(t,e,n);}),af(s,"__wrapped",true),af(t,e,s),s},KC=(t,e,r)=>{if(t)Array.isArray(t)||(t=[t]);else {Ur("must provide one or more modules to patch"),Ur(new Error().stack);return}if(!(e&&Array.isArray(e))){Ur("must provide one or more functions to wrap on modules");return}t.forEach(n=>{e.forEach(s=>{Ca(n,s,r);});});},Pu=(t,e)=>{if(!t||!t[e]){Ur("no function to unwrap."),Ur(new Error().stack);return}let r=t[e];if(!r.__unwrap)Ur("no original to unwrap to -- has "+String(e)+" already been unwrapped?");else {r.__unwrap();return}},WC=(t,e)=>{if(t)Array.isArray(t)||(t=[t]);else {Ur("must provide one or more modules to patch"),Ur(new Error().stack);return}if(!(e&&Array.isArray(e))){Ur("must provide one or more functions to unwrap on modules");return}t.forEach(r=>{e.forEach(n=>{Pu(r,n);});});};});var FT,b$=E(()=>{M();In();XC();FT=class{instrumentationName;instrumentationVersion;_config={};_tracer;_meter;_logger;_diag;constructor(e,r,n){this.instrumentationName=e,this.instrumentationVersion=r,this.setConfig(n),this._diag=N.createComponentLogger({namespace:e}),this._tracer=ge.getTracer(e,r),this._meter=Dr.getMeter(e,r),this._logger=Cp.getLogger(e,r),this._updateMetricInstruments();}_wrap=Ca;_unwrap=Pu;_massWrap=KC;_massUnwrap=WC;get meter(){return this._meter}setMeterProvider(e){this._meter=e.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments();}get logger(){return this._logger}setLoggerProvider(e){this._logger=e.getLogger(this.instrumentationName,this.instrumentationVersion);}getModuleDefinitions(){let e=this.init()??[];return Array.isArray(e)?e:[e]}_updateMetricInstruments(){}getConfig(){return this._config}setConfig(e){this._config={enabled:true,...e};}setTracerProvider(e){this._tracer=e.getTracer(this.instrumentationName,this.instrumentationVersion);}get tracer(){return this._tracer}_runSpanCustomizationHook(e,r,n,s){if(e)try{e(n,s);}catch(a){this._diag.error("Error running span customization hook due to exception in handler",{triggerName:r},a);}}};});var I$=f((lyt,M$)=>{var bu=1e3,Mu=bu*60,Iu=Mu*60,Pa=Iu*24,PMe=Pa*7,bMe=Pa*365.25;M$.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return MMe(t);if(r==="number"&&isFinite(t))return e.long?xMe(t):IMe(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function MMe(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case "years":case "year":case "yrs":case "yr":case "y":return r*bMe;case "weeks":case "week":case "w":return r*PMe;case "days":case "day":case "d":return r*Pa;case "hours":case "hour":case "hrs":case "hr":case "h":return r*Iu;case "minutes":case "minute":case "mins":case "min":case "m":return r*Mu;case "seconds":case "second":case "secs":case "sec":case "s":return r*bu;case "milliseconds":case "millisecond":case "msecs":case "msec":case "ms":return r;default:return}}}}function IMe(t){var e=Math.abs(t);return e>=Pa?Math.round(t/Pa)+"d":e>=Iu?Math.round(t/Iu)+"h":e>=Mu?Math.round(t/Mu)+"m":e>=bu?Math.round(t/bu)+"s":t+"ms"}function xMe(t){var e=Math.abs(t);return e>=Pa?qT(t,e,Pa,"day"):e>=Iu?qT(t,e,Iu,"hour"):e>=Mu?qT(t,e,Mu,"minute"):e>=bu?qT(t,e,bu,"second"):t+" ms"}function qT(t,e,r,n){var s=e>=r*1.5;return Math.round(t/r)+" "+n+(s?"s":"")}});var QC=f((dyt,x$)=>{function LMe(t){r.debug=r,r.default=r,r.coerce=c,r.disable=o,r.enable=s,r.enabled=i,r.humanize=I$(),r.destroy=u,Object.keys(t).forEach(l=>{r[l]=t[l];}),r.names=[],r.skips=[],r.formatters={};function e(l){let d=0;for(let p=0;p<l.length;p++)d=(d<<5)-d+l.charCodeAt(p),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=e;function r(l){let d,p=null,h,T;function g(...y){if(!g.enabled)return;let R=g,b=Number(new Date),w=b-(d||b);R.diff=w,R.prev=d,R.curr=b,d=b,y[0]=r.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let v=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(B,F)=>{if(B==="%%")return "%";v++;let te=r.formatters[F];if(typeof te=="function"){let K=y[v];B=te.call(R,K),y.splice(v,1),v--;}return B}),r.formatArgs.call(R,y),(R.log||r.log).apply(R,y);}return g.namespace=l,g.useColors=r.useColors(),g.color=r.selectColor(l),g.extend=n,g.destroy=r.destroy,Object.defineProperty(g,"enabled",{enumerable:true,configurable:false,get:()=>p!==null?p:(h!==r.namespaces&&(h=r.namespaces,T=r.enabled(l)),T),set:y=>{p=y;}}),typeof r.init=="function"&&r.init(g),g}function n(l,d){let p=r(this.namespace+(typeof d>"u"?":":d)+l);return p.log=this.log,p}function s(l){r.save(l),r.namespaces=l,r.names=[],r.skips=[];let d=(typeof l=="string"?l:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let p of d)p[0]==="-"?r.skips.push(p.slice(1)):r.names.push(p);}function a(l,d){let p=0,h=0,T=-1,g=0;for(;p<l.length;)if(h<d.length&&(d[h]===l[p]||d[h]==="*"))d[h]==="*"?(T=h,g=p,h++):(p++,h++);else if(T!==-1)h=T+1,g++,p=g;else return  false;for(;h<d.length&&d[h]==="*";)h++;return h===d.length}function o(){let l=[...r.names,...r.skips.map(d=>"-"+d)].join(",");return r.enable(""),l}function i(l){for(let d of r.skips)if(a(l,d))return  false;for(let d of r.names)if(a(l,d))return  true;return  false}function c(l){return l instanceof Error?l.stack||l.message:l}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");}return r.enable(r.load()),r}x$.exports=LMe;});var L$=f((Xr,HT)=>{Xr.formatArgs=wMe;Xr.save=UMe;Xr.load=kMe;Xr.useColors=DMe;Xr.storage=VMe();Xr.destroy=(()=>{let t=false;return ()=>{t||(t=true,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."));}})();Xr.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function DMe(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return  true;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return  false;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function wMe(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+HT.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,s=>{s!=="%%"&&(r++,s==="%c"&&(n=r));}),t.splice(n,0,e);}Xr.log=console.debug||console.log||(()=>{});function UMe(t){try{t?Xr.storage.setItem("debug",t):Xr.storage.removeItem("debug");}catch{}}function kMe(){let t;try{t=Xr.storage.getItem("debug")||Xr.storage.getItem("DEBUG");}catch{}return !t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function VMe(){try{return localStorage}catch{}}HT.exports=QC()(Xr);var{formatters:BMe}=HT.exports;BMe.j=function(t){try{return JSON.stringify(t)}catch(e){return "[UnexpectedJSONParseError]: "+e.message}};});var w$=f((pyt,D$)=>{D$.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),s=e.indexOf("--");return n!==-1&&(s===-1||n<s)};});var V$=f((fyt,k$)=>{var FMe=P("os"),U$=P("tty"),Un=w$(),{env:tr}=process,ms;Un("no-color")||Un("no-colors")||Un("color=false")||Un("color=never")?ms=0:(Un("color")||Un("colors")||Un("color=true")||Un("color=always"))&&(ms=1);"FORCE_COLOR"in tr&&(tr.FORCE_COLOR==="true"?ms=1:tr.FORCE_COLOR==="false"?ms=0:ms=tr.FORCE_COLOR.length===0?1:Math.min(parseInt(tr.FORCE_COLOR,10),3));function JC(t){return t===0?false:{level:t,hasBasic:true,has256:t>=2,has16m:t>=3}}function ZC(t,e){if(ms===0)return 0;if(Un("color=16m")||Un("color=full")||Un("color=truecolor"))return 3;if(Un("color=256"))return 2;if(t&&!e&&ms===void 0)return 0;let r=ms||0;if(tr.TERM==="dumb")return r;if(process.platform==="win32"){let n=FMe.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in tr)return ["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in tr)||tr.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in tr)return /^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(tr.TEAMCITY_VERSION)?1:0;if(tr.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in tr){let n=parseInt((tr.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(tr.TERM_PROGRAM){case "iTerm.app":return n>=3?3:2;case "Apple_Terminal":return 2}}return /-256(color)?$/i.test(tr.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(tr.TERM)||"COLORTERM"in tr?1:r}function qMe(t){let e=ZC(t,t&&t.isTTY);return JC(e)}k$.exports={supportsColor:qMe,stdout:JC(ZC(true,U$.isatty(1))),stderr:JC(ZC(true,U$.isatty(2)))};});var F$=f((rr,jT)=>{var HMe=P("tty"),GT=P("util");rr.init=WMe;rr.log=YMe;rr.formatArgs=jMe;rr.save=$Me;rr.load=KMe;rr.useColors=GMe;rr.destroy=GT.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");rr.colors=[6,2,3,4,5,1];try{let t=V$();t&&(t.stderr||t).level>=2&&(rr.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221]);}catch{}rr.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(s,a)=>a.toUpperCase()),n=process.env[e];return /^(yes|on|true|enabled)$/i.test(n)?n=true:/^(no|off|false|disabled)$/i.test(n)?n=false:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function GMe(){return "colors"in rr.inspectOpts?!!rr.inspectOpts.colors:HMe.isatty(process.stderr.fd)}function jMe(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,s="\x1B[3"+(n<8?n:"8;5;"+n),a=`  ${s};1m${e} \x1B[0m`;t[0]=a+t[0].split(`
`).join(`
`+a),t.push(s+"m+"+jT.exports.humanize(this.diff)+"\x1B[0m");}else t[0]=zMe()+e+" "+t[0];}function zMe(){return rr.inspectOpts.hideDate?"":new Date().toISOString()+" "}function YMe(...t){return process.stderr.write(GT.formatWithOptions(rr.inspectOpts,...t)+`
`)}function $Me(t){t?process.env.DEBUG=t:delete process.env.DEBUG;}function KMe(){return process.env.DEBUG}function WMe(t){t.inspectOpts={};let e=Object.keys(rr.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=rr.inspectOpts[e[r]];}jT.exports=QC()(rr);var{formatters:B$}=jT.exports;B$.o=function(t){return this.inspectOpts.colors=this.useColors,GT.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};B$.O=function(t){return this.inspectOpts.colors=this.useColors,GT.inspect(t,this.inspectOpts)};});var uf=f((hyt,eP)=>{typeof process>"u"||process.type==="renderer"||process.browser===true||process.__nwjs?eP.exports=L$():eP.exports=F$();});var rP=f((_yt,q$)=>{var tP=P("path").sep;q$.exports=function(t){var e=t.split(tP),r=e.lastIndexOf("node_modules");if(r!==-1&&e[r+1]){for(var n=e[r+1][0]==="@",s=n?e[r+1]+"/"+e[r+2]:e[r+1],a=n?3:2,o="",i=r+a-1,c=0;c<=i;c++)c===i?o+=e[c]:o+=e[c]+tP;for(var u="",l=e.length-1,d=r+a;d<=l;d++)d===l?u+=e[d]:u+=e[d]+tP;return {name:s,basedir:o,path:u}}};});var nP=f((myt,H$)=>{var XMe=P("os");H$.exports=XMe.homedir||function(){var e=process.env.HOME,r=process.env.LOGNAME||process.env.USER||process.env.LNAME||process.env.USERNAME;return process.platform==="win32"?process.env.USERPROFILE||process.env.HOMEDRIVE+process.env.HOMEPATH||e||null:process.platform==="darwin"?e||(r?"/Users/"+r:null):process.platform==="linux"?e||(process.getuid()===0?"/root":r?"/home/"+r:null):e||null};});var iP=f((Eyt,G$)=>{G$.exports=function(){var t=Error.prepareStackTrace;Error.prepareStackTrace=function(r,n){return n};var e=new Error().stack;return Error.prepareStackTrace=t,e[2].getFileName()};});var j$=f((Tyt,lf)=>{var QMe=process.platform==="win32",JMe=/^(((?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?[\\\/]?)(?:[^\\\/]*[\\\/])*)((\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))[\\\/]*$/,oP={};function ZMe(t){return JMe.exec(t).slice(1)}oP.parse=function(t){if(typeof t!="string")throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);var e=ZMe(t);if(!e||e.length!==5)throw new TypeError("Invalid path '"+t+"'");return {root:e[1],dir:e[0]===e[1]?e[0]:e[0].slice(0,-1),base:e[2],ext:e[4],name:e[3]}};var eIe=/^((\/?)(?:[^\/]*\/)*)((\.{1,2}|[^\/]+?|)(\.[^.\/]*|))[\/]*$/,sP={};function tIe(t){return eIe.exec(t).slice(1)}sP.parse=function(t){if(typeof t!="string")throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);var e=tIe(t);if(!e||e.length!==5)throw new TypeError("Invalid path '"+t+"'");return {root:e[1],dir:e[0].slice(0,-1),base:e[2],ext:e[4],name:e[3]}};QMe?lf.exports=oP.parse:lf.exports=sP.parse;lf.exports.posix=sP.parse;lf.exports.win32=oP.parse;});var aP=f((Syt,K$)=>{var $$=P("path"),z$=$$.parse||j$(),Y$=function(e,r){var n="/";/^([A-Za-z]:)/.test(e)?n="":/^\\\\/.test(e)&&(n="\\\\");for(var s=[e],a=z$(e);a.dir!==s[s.length-1];)s.push(a.dir),a=z$(a.dir);return s.reduce(function(o,i){return o.concat(r.map(function(c){return $$.resolve(n,i,c)}))},[])};K$.exports=function(e,r,n){var s=r&&r.moduleDirectory?[].concat(r.moduleDirectory):["node_modules"];if(r&&typeof r.paths=="function")return r.paths(n,e,function(){return Y$(e,s)},r);var a=Y$(e,s);return r&&r.paths?a.concat(r.paths):a};});var cP=f((gyt,W$)=>{W$.exports=function(t,e){return e||{}};});var J$=f((yyt,Q$)=>{var rIe="Function.prototype.bind called on incompatible ",nIe=Object.prototype.toString,iIe=Math.max,oIe="[object Function]",X$=function(e,r){for(var n=[],s=0;s<e.length;s+=1)n[s]=e[s];for(var a=0;a<r.length;a+=1)n[a+e.length]=r[a];return n},sIe=function(e,r){for(var n=[],s=r,a=0;s<e.length;s+=1,a+=1)n[a]=e[s];return n},aIe=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r};Q$.exports=function(e){var r=this;if(typeof r!="function"||nIe.apply(r)!==oIe)throw new TypeError(rIe+r);for(var n=sIe(arguments,1),s,a=function(){if(this instanceof s){var l=r.apply(this,X$(n,arguments));return Object(l)===l?l:this}return r.apply(e,X$(n,arguments))},o=iIe(0,r.length-n.length),i=[],c=0;c<o;c++)i[c]="$"+c;if(s=Function("binder","return function ("+aIe(i,",")+"){ return binder.apply(this,arguments); }")(a),r.prototype){var u=function(){};u.prototype=r.prototype,s.prototype=new u,u.prototype=null;}return s};});var eK=f((Ayt,Z$)=>{var cIe=J$();Z$.exports=Function.prototype.bind||cIe;});var rK=f((Ryt,tK)=>{var uIe=Function.prototype.call,lIe=Object.prototype.hasOwnProperty,dIe=eK();tK.exports=dIe.call(uIe,lIe);});var nK=f((vyt,pIe)=>{pIe.exports={assert:true,"node:assert":[">= 14.18 && < 15",">= 16"],"assert/strict":">= 15","node:assert/strict":">= 16",async_hooks:">= 8","node:async_hooks":[">= 14.18 && < 15",">= 16"],buffer_ieee754:">= 0.5 && < 0.9.7",buffer:true,"node:buffer":[">= 14.18 && < 15",">= 16"],child_process:true,"node:child_process":[">= 14.18 && < 15",">= 16"],cluster:">= 0.5","node:cluster":[">= 14.18 && < 15",">= 16"],console:true,"node:console":[">= 14.18 && < 15",">= 16"],constants:true,"node:constants":[">= 14.18 && < 15",">= 16"],crypto:true,"node:crypto":[">= 14.18 && < 15",">= 16"],_debug_agent:">= 1 && < 8",_debugger:"< 8",dgram:true,"node:dgram":[">= 14.18 && < 15",">= 16"],diagnostics_channel:[">= 14.17 && < 15",">= 15.1"],"node:diagnostics_channel":[">= 14.18 && < 15",">= 16"],dns:true,"node:dns":[">= 14.18 && < 15",">= 16"],"dns/promises":">= 15","node:dns/promises":">= 16",domain:">= 0.7.12","node:domain":[">= 14.18 && < 15",">= 16"],events:true,"node:events":[">= 14.18 && < 15",">= 16"],freelist:"< 6",fs:true,"node:fs":[">= 14.18 && < 15",">= 16"],"fs/promises":[">= 10 && < 10.1",">= 14"],"node:fs/promises":[">= 14.18 && < 15",">= 16"],_http_agent:">= 0.11.1","node:_http_agent":[">= 14.18 && < 15",">= 16"],_http_client:">= 0.11.1","node:_http_client":[">= 14.18 && < 15",">= 16"],_http_common:">= 0.11.1","node:_http_common":[">= 14.18 && < 15",">= 16"],_http_incoming:">= 0.11.1","node:_http_incoming":[">= 14.18 && < 15",">= 16"],_http_outgoing:">= 0.11.1","node:_http_outgoing":[">= 14.18 && < 15",">= 16"],_http_server:">= 0.11.1","node:_http_server":[">= 14.18 && < 15",">= 16"],http:true,"node:http":[">= 14.18 && < 15",">= 16"],http2:">= 8.8","node:http2":[">= 14.18 && < 15",">= 16"],https:true,"node:https":[">= 14.18 && < 15",">= 16"],inspector:">= 8","node:inspector":[">= 14.18 && < 15",">= 16"],"inspector/promises":[">= 19"],"node:inspector/promises":[">= 19"],_linklist:"< 8",module:true,"node:module":[">= 14.18 && < 15",">= 16"],net:true,"node:net":[">= 14.18 && < 15",">= 16"],"node-inspect/lib/_inspect":">= 7.6 && < 12","node-inspect/lib/internal/inspect_client":">= 7.6 && < 12","node-inspect/lib/internal/inspect_repl":">= 7.6 && < 12",os:true,"node:os":[">= 14.18 && < 15",">= 16"],path:true,"node:path":[">= 14.18 && < 15",">= 16"],"path/posix":">= 15.3","node:path/posix":">= 16","path/win32":">= 15.3","node:path/win32":">= 16",perf_hooks:">= 8.5","node:perf_hooks":[">= 14.18 && < 15",">= 16"],process:">= 1","node:process":[">= 14.18 && < 15",">= 16"],punycode:">= 0.5","node:punycode":[">= 14.18 && < 15",">= 16"],querystring:true,"node:querystring":[">= 14.18 && < 15",">= 16"],readline:true,"node:readline":[">= 14.18 && < 15",">= 16"],"readline/promises":">= 17","node:readline/promises":">= 17",repl:true,"node:repl":[">= 14.18 && < 15",">= 16"],"node:sea":[">= 20.12 && < 21",">= 21.7"],smalloc:">= 0.11.5 && < 3","node:sqlite":[">= 22.13 && < 23",">= 23.4"],_stream_duplex:">= 0.9.4","node:_stream_duplex":[">= 14.18 && < 15",">= 16"],_stream_transform:">= 0.9.4","node:_stream_transform":[">= 14.18 && < 15",">= 16"],_stream_wrap:">= 1.4.1","node:_stream_wrap":[">= 14.18 && < 15",">= 16"],_stream_passthrough:">= 0.9.4","node:_stream_passthrough":[">= 14.18 && < 15",">= 16"],_stream_readable:">= 0.9.4","node:_stream_readable":[">= 14.18 && < 15",">= 16"],_stream_writable:">= 0.9.4","node:_stream_writable":[">= 14.18 && < 15",">= 16"],stream:true,"node:stream":[">= 14.18 && < 15",">= 16"],"stream/consumers":">= 16.7","node:stream/consumers":">= 16.7","stream/promises":">= 15","node:stream/promises":">= 16","stream/web":">= 16.5","node:stream/web":">= 16.5",string_decoder:true,"node:string_decoder":[">= 14.18 && < 15",">= 16"],sys:[">= 0.4 && < 0.7",">= 0.8"],"node:sys":[">= 14.18 && < 15",">= 16"],"test/reporters":">= 19.9 && < 20.2","node:test/reporters":[">= 18.17 && < 19",">= 19.9",">= 20"],"test/mock_loader":">= 22.3 && < 22.7","node:test/mock_loader":">= 22.3 && < 22.7","node:test":[">= 16.17 && < 17",">= 18"],timers:true,"node:timers":[">= 14.18 && < 15",">= 16"],"timers/promises":">= 15","node:timers/promises":">= 16",_tls_common:">= 0.11.13","node:_tls_common":[">= 14.18 && < 15",">= 16"],_tls_legacy:">= 0.11.3 && < 10",_tls_wrap:">= 0.11.3","node:_tls_wrap":[">= 14.18 && < 15",">= 16"],tls:true,"node:tls":[">= 14.18 && < 15",">= 16"],trace_events:">= 10","node:trace_events":[">= 14.18 && < 15",">= 16"],tty:true,"node:tty":[">= 14.18 && < 15",">= 16"],url:true,"node:url":[">= 14.18 && < 15",">= 16"],util:true,"node:util":[">= 14.18 && < 15",">= 16"],"util/types":">= 15.3","node:util/types":">= 16","v8/tools/arguments":">= 10 && < 12","v8/tools/codemap":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/consarray":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/csvparser":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/logreader":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/profile_view":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/splaytree":[">= 4.4 && < 5",">= 5.2 && < 12"],v8:">= 1","node:v8":[">= 14.18 && < 15",">= 16"],vm:true,"node:vm":[">= 14.18 && < 15",">= 16"],wasi:[">= 13.4 && < 13.5",">= 18.17 && < 19",">= 20"],"node:wasi":[">= 18.17 && < 19",">= 20"],worker_threads:">= 11.7","node:worker_threads":[">= 14.18 && < 15",">= 16"],zlib:">= 0.5","node:zlib":[">= 14.18 && < 15",">= 16"]};});var df=f((Oyt,sK)=>{var fIe=rK();function hIe(t,e){for(var r=t.split("."),n=e.split(" "),s=n.length>1?n[0]:"=",a=(n.length>1?n[1]:n[0]).split("."),o=0;o<3;++o){var i=parseInt(r[o]||0,10),c=parseInt(a[o]||0,10);if(i!==c)return s==="<"?i<c:s===">="?i>=c:false}return s===">="}function iK(t,e){var r=e.split(/ ?&& ?/);if(r.length===0)return  false;for(var n=0;n<r.length;++n)if(!hIe(t,r[n]))return  false;return  true}function _Ie(t,e){if(typeof e=="boolean")return e;var r=typeof t>"u"?process.versions&&process.versions.node:t;if(typeof r!="string")throw new TypeError(typeof t>"u"?"Unable to determine current node version":"If provided, a valid node version is required");if(e&&typeof e=="object"){for(var n=0;n<e.length;++n)if(iK(r,e[n]))return  true;return  false}return iK(r,e)}var oK=nK();sK.exports=function(e,r){return fIe(oK,e)&&_Ie(r,oK[e])};});var uK=f((Nyt,cK)=>{var ba=P("fs"),mIe=nP(),qt=P("path"),EIe=iP(),TIe=aP(),SIe=cP(),gIe=df(),yIe=process.platform!=="win32"&&ba.realpath&&typeof ba.realpath.native=="function"?ba.realpath.native:ba.realpath,aK=mIe(),AIe=function(){return [qt.join(aK,".node_modules"),qt.join(aK,".node_libraries")]},RIe=function(e,r){ba.stat(e,function(n,s){return n?n.code==="ENOENT"||n.code==="ENOTDIR"?r(null,false):r(n):r(null,s.isFile()||s.isFIFO())});},vIe=function(e,r){ba.stat(e,function(n,s){return n?n.code==="ENOENT"||n.code==="ENOTDIR"?r(null,false):r(n):r(null,s.isDirectory())});},OIe=function(e,r){yIe(e,function(n,s){n&&n.code!=="ENOENT"?r(n):r(null,n?e:s);});},pf=function(e,r,n,s){n&&n.preserveSymlinks===false?e(r,s):s(null,r);},NIe=function(e,r,n){e(r,function(s,a){if(s)n(s);else try{var o=JSON.parse(a);n(null,o);}catch{n(null);}});},CIe=function(e,r,n){for(var s=TIe(r,n,e),a=0;a<s.length;a++)s[a]=qt.join(s[a],e);return s};cK.exports=function(e,r,n){var s=n,a=r;if(typeof r=="function"&&(s=a,a={}),typeof e!="string"){var o=new TypeError("Path must be a string.");return process.nextTick(function(){s(o);})}a=SIe(e,a);var i=a.isFile||RIe,c=a.isDirectory||vIe,u=a.readFile||ba.readFile,l=a.realpath||OIe,d=a.readPackage||NIe;if(a.readFile&&a.readPackage){var p=new TypeError("`readFile` and `readPackage` are mutually exclusive.");return process.nextTick(function(){s(p);})}var h=a.packageIterator,T=a.extensions||[".js"],g=a.includeCoreModules!==false,y=a.basedir||qt.dirname(EIe()),R=a.filename||y;a.paths=a.paths||AIe();var b=qt.resolve(y);pf(l,b,a,function(C,ie){C?s(C):v(ie);});var w;function v(C){if(/^(?:\.\.?(?:\/|$)|\/|([A-Za-z]:)?[/\\])/.test(e))w=qt.resolve(C,e),(e==="."||e===".."||e.slice(-1)==="/")&&(w+="/"),/\/$/.test(e)&&w===C?te(w,a.package,V):B(w,a.package,V);else {if(g&&gIe(e))return s(null,e);Ee(e,C,function(ie,I,S){if(ie)s(ie);else {if(I)return pf(l,I,a,function(ce,W){ce?s(ce):s(null,W,S);});var x=new Error("Cannot find module '"+e+"' from '"+R+"'");x.code="MODULE_NOT_FOUND",s(x);}});}}function V(C,ie,I){C?s(C):ie?s(null,ie,I):te(w,function(S,x,ce){if(S)s(S);else if(x)pf(l,x,a,function(oe,be){oe?s(oe):s(null,be,ce);});else {var W=new Error("Cannot find module '"+e+"' from '"+R+"'");W.code="MODULE_NOT_FOUND",s(W);}});}function B(C,ie,I){var S=ie,x=I;typeof S=="function"&&(x=S,S=void 0);var ce=[""].concat(T);W(ce,C,S);function W(oe,be,st){if(oe.length===0)return x(null,void 0,st);var gt=be+oe[0],Xe=st;Xe?ue(null,Xe):F(qt.dirname(gt),ue);function ue(je,Ct,Yt){if(Xe=Ct,je)return x(je);if(Yt&&Xe&&a.pathFilter){var jc=qt.relative(Yt,gt),zc=jc.slice(0,jc.length-oe[0].length),da=a.pathFilter(Xe,be,zc);if(da)return W([""].concat(T.slice()),qt.resolve(Yt,da),Xe)}i(gt,Bt);}function Bt(je,Ct){if(je)return x(je);if(Ct)return x(null,gt,Xe);W(oe.slice(1),be,Xe);}}}function F(C,ie){if(C===""||C==="/"||process.platform==="win32"&&/^\w:[/\\]*$/.test(C)||/[/\\]node_modules[/\\]*$/.test(C))return ie(null);pf(l,C,a,function(I,S){if(I)return F(qt.dirname(C),ie);var x=qt.join(S,"package.json");i(x,function(ce,W){if(!W)return F(qt.dirname(C),ie);d(u,x,function(oe,be){oe&&ie(oe);var st=be;st&&a.packageFilter&&(st=a.packageFilter(st,x)),ie(null,st,C);});});});}function te(C,ie,I){var S=I,x=ie;typeof x=="function"&&(S=x,x=a.package),pf(l,C,a,function(ce,W){if(ce)return S(ce);var oe=qt.join(W,"package.json");i(oe,function(be,st){if(be)return S(be);if(!st)return B(qt.join(C,"index"),x,S);d(u,oe,function(gt,Xe){if(gt)return S(gt);var ue=Xe;if(ue&&a.packageFilter&&(ue=a.packageFilter(ue,oe)),ue&&ue.main){if(typeof ue.main!="string"){var Bt=new TypeError("package \u201C"+ue.name+"\u201D `main` must be a string");return Bt.code="INVALID_PACKAGE_MAIN",S(Bt)}(ue.main==="."||ue.main==="./")&&(ue.main="index"),B(qt.resolve(C,ue.main),ue,function(je,Ct,Yt){if(je)return S(je);if(Ct)return S(null,Ct,Yt);if(!Yt)return B(qt.join(C,"index"),Yt,S);var jc=qt.resolve(C,Yt.main);te(jc,Yt,function(zc,da,Ft){if(zc)return S(zc);if(da)return S(null,da,Ft);B(qt.join(C,"index"),Ft,S);});});return}B(qt.join(C,"/index"),ue,S);});});});}function K(C,ie){if(ie.length===0)return C(null,void 0);var I=ie[0];c(qt.dirname(I),S);function S(W,oe){if(W)return C(W);if(!oe)return K(C,ie.slice(1));B(I,a.package,x);}function x(W,oe,be){if(W)return C(W);if(oe)return C(null,oe,be);te(I,a.package,ce);}function ce(W,oe,be){if(W)return C(W);if(oe)return C(null,oe,be);K(C,ie.slice(1));}}function Ee(C,ie,I){var S=function(){return CIe(C,ie,a)};K(I,h?h(C,ie,S,a):S());}};});var lK=f((Cyt,PIe)=>{PIe.exports={assert:true,"node:assert":[">= 14.18 && < 15",">= 16"],"assert/strict":">= 15","node:assert/strict":">= 16",async_hooks:">= 8","node:async_hooks":[">= 14.18 && < 15",">= 16"],buffer_ieee754:">= 0.5 && < 0.9.7",buffer:true,"node:buffer":[">= 14.18 && < 15",">= 16"],child_process:true,"node:child_process":[">= 14.18 && < 15",">= 16"],cluster:">= 0.5","node:cluster":[">= 14.18 && < 15",">= 16"],console:true,"node:console":[">= 14.18 && < 15",">= 16"],constants:true,"node:constants":[">= 14.18 && < 15",">= 16"],crypto:true,"node:crypto":[">= 14.18 && < 15",">= 16"],_debug_agent:">= 1 && < 8",_debugger:"< 8",dgram:true,"node:dgram":[">= 14.18 && < 15",">= 16"],diagnostics_channel:[">= 14.17 && < 15",">= 15.1"],"node:diagnostics_channel":[">= 14.18 && < 15",">= 16"],dns:true,"node:dns":[">= 14.18 && < 15",">= 16"],"dns/promises":">= 15","node:dns/promises":">= 16",domain:">= 0.7.12","node:domain":[">= 14.18 && < 15",">= 16"],events:true,"node:events":[">= 14.18 && < 15",">= 16"],freelist:"< 6",fs:true,"node:fs":[">= 14.18 && < 15",">= 16"],"fs/promises":[">= 10 && < 10.1",">= 14"],"node:fs/promises":[">= 14.18 && < 15",">= 16"],_http_agent:">= 0.11.1","node:_http_agent":[">= 14.18 && < 15",">= 16"],_http_client:">= 0.11.1","node:_http_client":[">= 14.18 && < 15",">= 16"],_http_common:">= 0.11.1","node:_http_common":[">= 14.18 && < 15",">= 16"],_http_incoming:">= 0.11.1","node:_http_incoming":[">= 14.18 && < 15",">= 16"],_http_outgoing:">= 0.11.1","node:_http_outgoing":[">= 14.18 && < 15",">= 16"],_http_server:">= 0.11.1","node:_http_server":[">= 14.18 && < 15",">= 16"],http:true,"node:http":[">= 14.18 && < 15",">= 16"],http2:">= 8.8","node:http2":[">= 14.18 && < 15",">= 16"],https:true,"node:https":[">= 14.18 && < 15",">= 16"],inspector:">= 8","node:inspector":[">= 14.18 && < 15",">= 16"],"inspector/promises":[">= 19"],"node:inspector/promises":[">= 19"],_linklist:"< 8",module:true,"node:module":[">= 14.18 && < 15",">= 16"],net:true,"node:net":[">= 14.18 && < 15",">= 16"],"node-inspect/lib/_inspect":">= 7.6 && < 12","node-inspect/lib/internal/inspect_client":">= 7.6 && < 12","node-inspect/lib/internal/inspect_repl":">= 7.6 && < 12",os:true,"node:os":[">= 14.18 && < 15",">= 16"],path:true,"node:path":[">= 14.18 && < 15",">= 16"],"path/posix":">= 15.3","node:path/posix":">= 16","path/win32":">= 15.3","node:path/win32":">= 16",perf_hooks:">= 8.5","node:perf_hooks":[">= 14.18 && < 15",">= 16"],process:">= 1","node:process":[">= 14.18 && < 15",">= 16"],punycode:">= 0.5","node:punycode":[">= 14.18 && < 15",">= 16"],querystring:true,"node:querystring":[">= 14.18 && < 15",">= 16"],readline:true,"node:readline":[">= 14.18 && < 15",">= 16"],"readline/promises":">= 17","node:readline/promises":">= 17",repl:true,"node:repl":[">= 14.18 && < 15",">= 16"],"node:sea":[">= 20.12 && < 21",">= 21.7"],smalloc:">= 0.11.5 && < 3","node:sqlite":">= 23.4",_stream_duplex:">= 0.9.4","node:_stream_duplex":[">= 14.18 && < 15",">= 16"],_stream_transform:">= 0.9.4","node:_stream_transform":[">= 14.18 && < 15",">= 16"],_stream_wrap:">= 1.4.1","node:_stream_wrap":[">= 14.18 && < 15",">= 16"],_stream_passthrough:">= 0.9.4","node:_stream_passthrough":[">= 14.18 && < 15",">= 16"],_stream_readable:">= 0.9.4","node:_stream_readable":[">= 14.18 && < 15",">= 16"],_stream_writable:">= 0.9.4","node:_stream_writable":[">= 14.18 && < 15",">= 16"],stream:true,"node:stream":[">= 14.18 && < 15",">= 16"],"stream/consumers":">= 16.7","node:stream/consumers":">= 16.7","stream/promises":">= 15","node:stream/promises":">= 16","stream/web":">= 16.5","node:stream/web":">= 16.5",string_decoder:true,"node:string_decoder":[">= 14.18 && < 15",">= 16"],sys:[">= 0.4 && < 0.7",">= 0.8"],"node:sys":[">= 14.18 && < 15",">= 16"],"test/reporters":">= 19.9 && < 20.2","node:test/reporters":[">= 18.17 && < 19",">= 19.9",">= 20"],"test/mock_loader":">= 22.3 && < 22.7","node:test/mock_loader":">= 22.3 && < 22.7","node:test":[">= 16.17 && < 17",">= 18"],timers:true,"node:timers":[">= 14.18 && < 15",">= 16"],"timers/promises":">= 15","node:timers/promises":">= 16",_tls_common:">= 0.11.13","node:_tls_common":[">= 14.18 && < 15",">= 16"],_tls_legacy:">= 0.11.3 && < 10",_tls_wrap:">= 0.11.3","node:_tls_wrap":[">= 14.18 && < 15",">= 16"],tls:true,"node:tls":[">= 14.18 && < 15",">= 16"],trace_events:">= 10","node:trace_events":[">= 14.18 && < 15",">= 16"],tty:true,"node:tty":[">= 14.18 && < 15",">= 16"],url:true,"node:url":[">= 14.18 && < 15",">= 16"],util:true,"node:util":[">= 14.18 && < 15",">= 16"],"util/types":">= 15.3","node:util/types":">= 16","v8/tools/arguments":">= 10 && < 12","v8/tools/codemap":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/consarray":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/csvparser":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/logreader":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/profile_view":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/splaytree":[">= 4.4 && < 5",">= 5.2 && < 12"],v8:">= 1","node:v8":[">= 14.18 && < 15",">= 16"],vm:true,"node:vm":[">= 14.18 && < 15",">= 16"],wasi:[">= 13.4 && < 13.5",">= 18.17 && < 19",">= 20"],"node:wasi":[">= 18.17 && < 19",">= 20"],worker_threads:">= 11.7","node:worker_threads":[">= 14.18 && < 15",">= 16"],zlib:">= 0.5","node:zlib":[">= 14.18 && < 15",">= 16"]};});var hK=f((Pyt,fK)=>{var bIe=df(),dK=lK(),pK={};for(zT in dK)Object.prototype.hasOwnProperty.call(dK,zT)&&(pK[zT]=bIe(zT));var zT;fK.exports=pK;});var mK=f((byt,_K)=>{var MIe=df();_K.exports=function(e){return MIe(e)};});var SK=f((Myt,TK)=>{var IIe=df(),Ma=P("fs"),Or=P("path"),xIe=nP(),LIe=iP(),DIe=aP(),wIe=cP(),UIe=process.platform!=="win32"&&Ma.realpathSync&&typeof Ma.realpathSync.native=="function"?Ma.realpathSync.native:Ma.realpathSync,EK=xIe(),kIe=function(){return [Or.join(EK,".node_modules"),Or.join(EK,".node_libraries")]},VIe=function(e){try{var r=Ma.statSync(e,{throwIfNoEntry:!1});}catch(n){if(n&&(n.code==="ENOENT"||n.code==="ENOTDIR"))return  false;throw n}return !!r&&(r.isFile()||r.isFIFO())},BIe=function(e){try{var r=Ma.statSync(e,{throwIfNoEntry:!1});}catch(n){if(n&&(n.code==="ENOENT"||n.code==="ENOTDIR"))return  false;throw n}return !!r&&r.isDirectory()},FIe=function(e){try{return UIe(e)}catch(r){if(r.code!=="ENOENT")throw r}return e},ff=function(e,r,n){return n&&n.preserveSymlinks===false?e(r):r},qIe=function(e,r){var n=e(r);try{var s=JSON.parse(n);return s}catch{}},HIe=function(e,r,n){for(var s=DIe(r,n,e),a=0;a<s.length;a++)s[a]=Or.join(s[a],e);return s};TK.exports=function(e,r){if(typeof e!="string")throw new TypeError("Path must be a string.");var n=wIe(e,r),s=n.isFile||VIe,a=n.readFileSync||Ma.readFileSync,o=n.isDirectory||BIe,i=n.realpathSync||FIe,c=n.readPackageSync||qIe;if(n.readFileSync&&n.readPackageSync)throw new TypeError("`readFileSync` and `readPackageSync` are mutually exclusive.");var u=n.packageIterator,l=n.extensions||[".js"],d=n.includeCoreModules!==false,p=n.basedir||Or.dirname(LIe()),h=n.filename||p;n.paths=n.paths||kIe();var T=ff(i,Or.resolve(p),n);if(/^(?:\.\.?(?:\/|$)|\/|([A-Za-z]:)?[/\\])/.test(e)){var g=Or.resolve(T,e);(e==="."||e===".."||e.slice(-1)==="/")&&(g+="/");var y=w(g)||V(g);if(y)return ff(i,y,n)}else {if(d&&IIe(e))return e;var R=B(e,T);if(R)return ff(i,R,n)}var b=new Error("Cannot find module '"+e+"' from '"+h+"'");throw b.code="MODULE_NOT_FOUND",b;function w(F){var te=v(Or.dirname(F));if(te&&te.dir&&te.pkg&&n.pathFilter){var K=Or.relative(te.dir,F),Ee=n.pathFilter(te.pkg,F,K);Ee&&(F=Or.resolve(te.dir,Ee));}if(s(F))return F;for(var C=0;C<l.length;C++){var ie=F+l[C];if(s(ie))return ie}}function v(F){if(!(F===""||F==="/")&&!(process.platform==="win32"&&/^\w:[/\\]*$/.test(F))&&!/[/\\]node_modules[/\\]*$/.test(F)){var te=Or.join(ff(i,F,n),"package.json");if(!s(te))return v(Or.dirname(F));var K=c(a,te);return K&&n.packageFilter&&(K=n.packageFilter(K,F)),{pkg:K,dir:F}}}function V(F){var te=Or.join(ff(i,F,n),"/package.json");if(s(te)){try{var K=c(a,te);}catch{}if(K&&n.packageFilter&&(K=n.packageFilter(K,F)),K&&K.main){if(typeof K.main!="string"){var Ee=new TypeError("package \u201C"+K.name+"\u201D `main` must be a string");throw Ee.code="INVALID_PACKAGE_MAIN",Ee}(K.main==="."||K.main==="./")&&(K.main="index");try{var C=w(Or.resolve(F,K.main));if(C)return C;var ie=V(Or.resolve(F,K.main));if(ie)return ie}catch{}}}return w(Or.join(F,"/index"))}function B(F,te){for(var K=function(){return HIe(F,te,n)},Ee=u?u(F,te,K,n):K(),C=0;C<Ee.length;C++){var ie=Ee[C];if(o(Or.dirname(ie))){var I=w(ie);if(I)return I;var S=V(ie);if(S)return S}}}};});var uP=f((Iyt,gK)=>{var YT=uK();YT.core=hK();YT.isCore=mK();YT.sync=SK();gK.exports=YT;});var yK=f((xyt,GIe)=>{GIe.exports={name:"require-in-the-middle",version:"7.5.2",description:"Module to hook into the Node.js require function",main:"index.js",types:"types/index.d.ts",dependencies:{debug:"^4.3.5","module-details-from-path":"^1.0.3",resolve:"^1.22.8"},devDependencies:{"@babel/core":"^7.9.0","@babel/preset-env":"^7.9.5","@babel/preset-typescript":"^7.9.0","@babel/register":"^7.9.0","ipp-printer":"^1.0.0",patterns:"^1.0.3",roundround:"^0.2.0",semver:"^6.3.0",standard:"^14.3.1",tape:"^4.11.0"},scripts:{test:"npm run test:lint && npm run test:tape && npm run test:babel","test:lint":"standard","test:tape":"tape test/*.js","test:babel":"node test/babel/babel-register.js"},repository:{type:"git",url:"git+https://github.com/nodejs/require-in-the-middle.git"},keywords:["require","hook","shim","shimmer","shimming","patch","monkey","monkeypatch","module","load"],files:["types"],author:"Thomas Watson Steen <w@tson.dk> (https://twitter.com/wa7son)",license:"MIT",bugs:{url:"https://github.com/nodejs/require-in-the-middle/issues"},homepage:"https://github.com/nodejs/require-in-the-middle#readme",engines:{node:">=8.6.0"}};});var Ia=f((Lyt,pP)=>{var Lu=P("path"),pi=P("module"),It=uf()("require-in-the-middle"),jIe=rP();pP.exports=hf;pP.exports.Hook=hf;var lP,xu;if(pi.isBuiltin)xu=pi.isBuiltin;else if(pi.builtinModules)xu=t=>t.startsWith("node:")?true:(lP===void 0&&(lP=new Set(pi.builtinModules)),lP.has(t));else {let t=uP(),[e,r]=process.versions.node.split(".").map(Number);e===8&&r<8?xu=n=>n==="http2"?true:!!t.core[n]:xu=n=>!!t.core[n];}var $T;function zIe(t,e){if(!$T)if(P.resolve&&P.resolve.paths)$T=function(r,n){return P.resolve(r,{paths:[n]})};else {let r=uP();$T=function(n,s){return r.sync(n,{basedir:s})};}return $T(t,e)}var YIe=/([/\\]index)?(\.js)?$/,dP=class{constructor(){this._localCache=new Map,this._kRitmExports=Symbol("RitmExports");}has(e,r){if(this._localCache.has(e))return  true;if(r)return  false;{let n=P.cache[e];return !!(n&&this._kRitmExports in n)}}get(e,r){let n=this._localCache.get(e);if(n!==void 0)return n;if(!r){let s=P.cache[e];return s&&s[this._kRitmExports]}}set(e,r,n){n?this._localCache.set(e,r):e in P.cache?P.cache[e][this._kRitmExports]=r:(It('non-core module is unexpectedly not in require.cache: "%s"',e),this._localCache.set(e,r));}};function hf(t,e,r){if(!(this instanceof hf))return new hf(t,e,r);if(typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),typeof pi._resolveFilename!="function"){console.error("Error: Expected Module._resolveFilename to be a function (was: %s) - aborting!",typeof pi._resolveFilename),console.error("Please report this error as an issue related to Node.js %s at %s",process.version,yK().bugs.url);return}this._cache=new dP,this._unhooked=false,this._origRequire=pi.prototype.require;let n=this,s=new Set,a=e?e.internals===true:false,o=Array.isArray(t);It("registering require hook"),this._require=pi.prototype.require=function(c){return n._unhooked===true?(It("ignoring require call - module is soft-unhooked"),n._origRequire.apply(this,arguments)):i.call(this,arguments,false)},typeof process.getBuiltinModule=="function"&&(this._origGetBuiltinModule=process.getBuiltinModule,this._getBuiltinModule=process.getBuiltinModule=function(c){return n._unhooked===true?(It("ignoring process.getBuiltinModule call - module is soft-unhooked"),n._origGetBuiltinModule.apply(this,arguments)):i.call(this,arguments,true)});function i(c,u){let l=c[0],d=xu(l),p;if(d){if(p=l,l.startsWith("node:")){let b=l.slice(5);xu(b)&&(p=b);}}else {if(u)return It("call to process.getBuiltinModule with unknown built-in id"),n._origGetBuiltinModule.apply(this,c);try{p=pi._resolveFilename(l,this);}catch(b){return It('Module._resolveFilename("%s") threw %j, calling original Module.require',l,b.message),n._origRequire.apply(this,c)}}let h,T;if(It("processing %s module require('%s'): %s",d===true?"core":"non-core",l,p),n._cache.has(p,d)===true)return It("returning already patched cached module: %s",p),n._cache.get(p,d);let g=s.has(p);g===false&&s.add(p);let y=u?n._origGetBuiltinModule.apply(this,c):n._origRequire.apply(this,c);if(g===true)return It("module is in the process of being patched already - ignoring: %s",p),y;if(s.delete(p),d===true){if(o===true&&t.includes(p)===false)return It("ignoring core module not on whitelist: %s",p),y;h=p;}else if(o===true&&t.includes(p)){let b=Lu.parse(p);h=b.name,T=b.dir;}else {let b=jIe(p);if(b===void 0)return It("could not parse filename: %s",p),y;h=b.name,T=b.basedir;let w=$Ie(b);It("resolved filename to module: %s (id: %s, resolved: %s, basedir: %s)",h,l,w,T);let v=false;if(o){if(!l.startsWith(".")&&t.includes(l)&&(h=l,v=true),!t.includes(h)&&!t.includes(w))return y;t.includes(w)&&w!==h&&(h=w,v=true);}if(!v){let V;try{V=zIe(h,T);}catch{return It("could not resolve module: %s",h),n._cache.set(p,y,d),y}if(V!==p)if(a===true)h=h+Lu.sep+Lu.relative(T,p),It("preparing to process require of internal file: %s",h);else return It("ignoring require of non-main module file: %s",V),n._cache.set(p,y,d),y}}n._cache.set(p,y,d),It("calling require hook: %s",h);let R=r(y,h,T);return n._cache.set(p,R,d),It("returning module: %s",h),R}}hf.prototype.unhook=function(){this._unhooked=true,this._require===pi.prototype.require?(pi.prototype.require=this._origRequire,It("require unhook successful")):It("require unhook unsuccessful"),process.getBuiltinModule!==void 0&&(this._getBuiltinModule===process.getBuiltinModule?(process.getBuiltinModule=this._origGetBuiltinModule,It("process.getBuiltinModule unhook successful")):It("process.getBuiltinModule unhook unsuccessful"));};function $Ie(t){let e=Lu.sep!=="/"?t.path.split(Lu.sep).join("/"):t.path;return Lu.posix.join(t.name,e).replace(YIe,"")}});var _f,KT,WT,AK=E(()=>{_f="/",KT=class{hooks=[];children=new Map},WT=class{_trie=new KT;_counter=0;insert(e){let r=this._trie;for(let n of e.moduleName.split(_f)){let s=r.children.get(n);s||(s=new KT,r.children.set(n,s)),r=s;}r.hooks.push({hook:e,insertedId:this._counter++});}search(e,{maintainInsertionOrder:r,fullOnly:n}={}){let s=this._trie,a=[],o=true;for(let i of e.split(_f)){let c=s.children.get(i);if(!c){o=false;break}n||a.push(...c.hooks),s=c;}return n&&o&&a.push(...s.hooks),a.length===0?[]:a.length===1?[a[0].hook]:(r&&a.sort((i,c)=>i.insertedId-c.insertedId),a.map(({hook:i})=>i))}};});function WIe(t){return Oo__namespace.sep!==_f?t.split(Oo__namespace.sep).join(_f):t}var RK,KIe,XT,vK=E(()=>{RK=Yr(Ia());AK();KIe=["afterEach","after","beforeEach","before","describe","it"].every(t=>typeof global[t]=="function"),XT=class t{_moduleNameTrie=new WT;static _instance;constructor(){this._initialize();}_initialize(){new RK.Hook(null,{internals:true},(e,r,n)=>{let s=WIe(r),a=this._moduleNameTrie.search(s,{maintainInsertionOrder:true,fullOnly:n===void 0});for(let{onRequire:o}of a)e=o(e,r,n);return e});}register(e,r){let n={moduleName:e,onRequire:r};return this._moduleNameTrie.insert(n),n}static getInstance(){return KIe?new t:this._instance=this._instance??new t}};});var MK=f(xa=>{var OK=[],hP=new WeakMap,NK=new WeakMap,CK=new Map,PK=[],XIe={set(t,e,r){return hP.get(t)[e](r)},get(t,e){if(e===Symbol.toStringTag)return "Module";let r=NK.get(t)[e];if(typeof r=="function")return r()},defineProperty(t,e,r){if(!("value"in r))throw new Error("Getters/setters are not supported for exports property descriptors.");return hP.get(t)[e](r.value)}};function QIe(t,e,r,n,s){CK.set(t,s),hP.set(e,r),NK.set(e,n);let a=new Proxy(e,XIe);OK.forEach(o=>o(t,a)),PK.push([t,a]);}var bK=false;function JIe(){return bK}function ZIe(t){bK=t;}xa.register=QIe;xa.importHooks=OK;xa.specifiers=CK;xa.toHook=PK;xa.getExperimentalPatchInternals=JIe;xa.setExperimentalPatchInternals=ZIe;});var QT=f((Byt,Du)=>{var IK=P("path"),e0e=rP(),{fileURLToPath:xK}=P("url"),{MessageChannel:t0e}=P("worker_threads"),{importHooks:_P,specifiers:r0e,toHook:n0e,getExperimentalPatchInternals:i0e}=MK();function DK(t){_P.push(t),n0e.forEach(([e,r])=>t(e,r));}function wK(t){let e=_P.indexOf(t);e>-1&&_P.splice(e,1);}function LK(t,e,r,n){let s=t(e,r,n);s&&s!==e&&(e.default=s);}var mP;function o0e(){let{port1:t,port2:e}=new t0e,r=0,n;mP=i=>{r++,t.postMessage(i);},t.on("message",()=>{r--,n&&r<=0&&n();}).unref();function s(){let i=setInterval(()=>{},1e3),c=new Promise(u=>{n=u;}).then(()=>{clearInterval(i);});return r===0&&n(),c}let a=e;return {registerOptions:{data:{addHookMessagePort:a,include:[]},transferList:[a]},addHookMessagePort:a,waitForAllMessagesAcknowledged:s}}function mf(t,e,r){if(!(this instanceof mf))return new mf(t,e,r);typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null);let n=e?e.internals===true:false;mP&&Array.isArray(t)&&mP(t),this._iitmHook=(s,a)=>{let o=s,i=s.startsWith("node:"),c;if(i)s=s.replace(/^node:/,"");else {if(s.startsWith("file://"))try{s=xK(s);}catch{}let u=e0e(s);u&&(s=u.name,c=u.basedir);}if(t){for(let u of t)if(u===s){if(c){if(n)s=s+IK.sep+IK.relative(c,xK(o));else if(!i0e()&&!c.endsWith(r0e.get(o)))continue}LK(r,a,s,c);}}else LK(r,a,s,c);},DK(this._iitmHook);}mf.prototype.unhook=function(){wK(this._iitmHook);};Du.exports=mf;Du.exports.Hook=mf;Du.exports.addHook=DK;Du.exports.removeHook=wK;Du.exports.createAddHookMessageChannel=o0e;});function UK(t,e,r){let n,s;try{s=t();}catch(a){n=a;}finally{if(e(n,s),n&&!r)throw n;return s}}async function kK(t,e,r){let n,s;try{s=await t();}catch(a){n=a;}finally{if(e(n,s),n&&!r)throw n;return s}}function JT(t){return typeof t=="function"&&typeof t.__original=="function"&&typeof t.__unwrap=="function"&&t.__wrapped===true}var EP=E(()=>{});function BK(t,e,r){return typeof e>"u"?t.includes("*"):t.some(n=>v$(e,n,{includePrerelease:r}))}var FK,qK,wu,HK=E(()=>{P$();XC();b$();vK();FK=Yr(QT());M();qK=Yr(Ia());EP();wu=class extends FT{_modules;_hooks=[];_requireInTheMiddleSingleton=XT.getInstance();_enabled=false;constructor(e,r,n){super(e,r,n);let s=this.init();s&&!Array.isArray(s)&&(s=[s]),this._modules=s||[],this._config.enabled&&this.enable();}_wrap=(e,r,n)=>{if(JT(e[r])&&this._unwrap(e,r),p3.types.isProxy(e)){let s=Ca(Object.assign({},e),r,n);return Object.defineProperty(e,r,{value:s}),s}else return Ca(e,r,n)};_unwrap=(e,r)=>p3.types.isProxy(e)?Object.defineProperty(e,r,{value:e[r]}):Pu(e,r);_massWrap=(e,r,n)=>{if(e)Array.isArray(e)||(e=[e]);else {N.error("must provide one or more modules to patch");return}if(!(r&&Array.isArray(r))){N.error("must provide one or more functions to wrap on modules");return}e.forEach(s=>{r.forEach(a=>{this._wrap(s,a,n);});});};_massUnwrap=(e,r)=>{if(e)Array.isArray(e)||(e=[e]);else {N.error("must provide one or more modules to patch");return}if(!(r&&Array.isArray(r))){N.error("must provide one or more functions to wrap on modules");return}e.forEach(n=>{r.forEach(s=>{this._unwrap(n,s);});});};_warnOnPreloadedModules(){this._modules.forEach(e=>{let{name:r}=e;try{let n=P.resolve(r);P.cache[n]&&this._diag.warn(`Module ${r} has been loaded before ${this.instrumentationName} so it might not work, please initialize it before requiring ${r}`);}catch{}});}_extractPackageVersion(e){try{let r=fs$1.readFileSync(Oo__namespace.join(e,"package.json"),{encoding:"utf8"}),n=JSON.parse(r).version;return typeof n=="string"?n:void 0}catch{N.warn("Failed extracting version",e);}}_onRequire(e,r,n,s){if(!s)return typeof e.patch=="function"&&(e.moduleExports=r,this._enabled)?(this._diag.debug("Applying instrumentation patch for nodejs core module on require hook",{module:e.name}),e.patch(r)):r;let a=this._extractPackageVersion(s);if(e.moduleVersion=a,e.name===n)return BK(e.supportedVersions,a,e.includePrerelease)&&typeof e.patch=="function"&&(e.moduleExports=r,this._enabled)?(this._diag.debug("Applying instrumentation patch for module on require hook",{module:e.name,version:e.moduleVersion,baseDir:s}),e.patch(r,e.moduleVersion)):r;let o=e.files??[],i=Oo__namespace.normalize(n);return o.filter(u=>u.name===i).filter(u=>BK(u.supportedVersions,a,e.includePrerelease)).reduce((u,l)=>(l.moduleExports=u,this._enabled?(this._diag.debug("Applying instrumentation patch for nodejs module file on require hook",{module:e.name,version:e.moduleVersion,fileName:l.name,baseDir:s}),l.patch(u,e.moduleVersion)):u),r)}enable(){if(!this._enabled){if(this._enabled=true,this._hooks.length>0){for(let e of this._modules){typeof e.patch=="function"&&e.moduleExports&&(this._diag.debug("Applying instrumentation patch for nodejs module on instrumentation enabled",{module:e.name,version:e.moduleVersion}),e.patch(e.moduleExports,e.moduleVersion));for(let r of e.files)r.moduleExports&&(this._diag.debug("Applying instrumentation patch for nodejs module file on instrumentation enabled",{module:e.name,version:e.moduleVersion,fileName:r.name}),r.patch(r.moduleExports,e.moduleVersion));}return}this._warnOnPreloadedModules();for(let e of this._modules){let r=(o,i,c)=>{if(!c&&Oo__namespace.isAbsolute(i)){let u=Oo__namespace.parse(i);i=u.name,c=u.dir;}return this._onRequire(e,o,i,c)},n=(o,i,c)=>this._onRequire(e,o,i,c),s=Oo__namespace.isAbsolute(e.name)?new qK.Hook([e.name],{internals:true},n):this._requireInTheMiddleSingleton.register(e.name,n);this._hooks.push(s);let a=new FK.Hook([e.name],{internals:false},r);this._hooks.push(a);}}}disable(){if(this._enabled){this._enabled=false;for(let e of this._modules){typeof e.unpatch=="function"&&e.moduleExports&&(this._diag.debug("Removing instrumentation patch for nodejs module on instrumentation disabled",{module:e.name,version:e.moduleVersion}),e.unpatch(e.moduleExports,e.moduleVersion));for(let r of e.files)r.moduleExports&&(this._diag.debug("Removing instrumentation patch for nodejs module file on instrumentation disabled",{module:e.name,version:e.moduleVersion,fileName:r.name}),r.unpatch(r.moduleExports,e.moduleVersion));}}}isEnabled(){return this._enabled}};});var GK=E(()=>{});var jK=E(()=>{HK();GK();});var TP=E(()=>{jK();});var eS,zK=E(()=>{eS=class{name;supportedVersions;patch;unpatch;files;constructor(e,r,n,s,a){this.name=e,this.supportedVersions=r,this.patch=n,this.unpatch=s,this.files=a||[];}};});var tS,YK=E(()=>{TP();tS=class{supportedVersions;patch;unpatch;name;constructor(e,r,n,s){this.supportedVersions=r,this.patch=n,this.unpatch=s,this.name=Oo.normalize(e);}};});function $K(t,e){let r=La.OLD,n=e?.split(",").map(s=>s.trim()).filter(s=>s!=="");for(let s of n??[])if(s.toLowerCase()===t+"/dup"){r=La.DUPLICATE;break}else s.toLowerCase()===t&&(r=La.STABLE);return r}var La,KK=E(()=>{(function(t){t[t.STABLE=1]="STABLE",t[t.OLD=2]="OLD",t[t.DUPLICATE=3]="DUPLICATE";})(La||(La={}));});var Qr={};Ue(Qr,{InstrumentationBase:()=>wu,InstrumentationNodeModuleDefinition:()=>eS,InstrumentationNodeModuleFile:()=>tS,SemconvStability:()=>La,isWrapped:()=>JT,registerInstrumentations:()=>E$,safeExecuteInTheMiddle:()=>UK,safeExecuteInTheMiddleAsync:()=>kK,semconvStabilityFromStr:()=>$K});var Jr=E(()=>{T$();TP();zK();YK();EP();KK();});var Zr,WK=E(()=>{Zr=class{_delegate;constructor(e){this._delegate=e;}export(e,r){this._delegate.export(e,r);}forceFlush(){return this._delegate.forceFlush()}shutdown(){return this._delegate.shutdown()}};});var No,rS=E(()=>{No=class extends Error{code;name="OTLPExporterError";data;constructor(e,r,n){super(e),this.data=n,this.code=r;}};});function a0e(t){if(Number.isFinite(t)&&t>0)return t;throw new Error(`Configuration: timeoutMillis is invalid, expected number greater than 0 (actual: '${t}')`)}function nS(t){if(t!=null)return ()=>t}function iS(t,e,r){return {timeoutMillis:a0e(t.timeoutMillis??e.timeoutMillis??r.timeoutMillis),concurrencyLimit:t.concurrencyLimit??e.concurrencyLimit??r.concurrencyLimit,compression:t.compression??e.compression??r.compression}}function oS(){return {timeoutMillis:1e4,concurrencyLimit:30,compression:"none"}}var Ef=E(()=>{});var sS,XK=E(()=>{(function(t){t.NONE="none",t.GZIP="gzip";})(sS||(sS={}));});function aS(t){return new SP(t.concurrencyLimit)}var SP,gP=E(()=>{SP=class{_concurrencyLimit;_sendingPromises=[];constructor(e){this._concurrencyLimit=e;}pushPromise(e){if(this.hasReachedLimit())throw new Error("Concurrency Limit reached");this._sendingPromises.push(e);let r=()=>{let n=this._sendingPromises.indexOf(e);this._sendingPromises.splice(n,1);};e.then(r,r);}hasReachedLimit(){return this._sendingPromises.length>=this._concurrencyLimit}async awaitAll(){await Promise.all(this._sendingPromises);}};});function c0e(t){return Object.prototype.hasOwnProperty.call(t,"partialSuccess")}function QK(){return {handleResponse(t){t==null||!c0e(t)||t.partialSuccess==null||Object.keys(t.partialSuccess).length===0||N.warn("Received Partial Success response:",JSON.stringify(t.partialSuccess));}}}var JK=E(()=>{M();});function cS(t,e){return new yP(t.transport,t.serializer,QK(),t.promiseHandler,e.timeout)}var yP,AP=E(()=>{G();rS();JK();M();yP=class{_transport;_serializer;_responseHandler;_promiseQueue;_timeout;_diagLogger;constructor(e,r,n,s,a){this._transport=e,this._serializer=r,this._responseHandler=n,this._promiseQueue=s,this._timeout=a,this._diagLogger=N.createComponentLogger({namespace:"OTLPExportDelegate"});}export(e,r){if(this._diagLogger.debug("items to be sent",e),this._promiseQueue.hasReachedLimit()){r({code:de.FAILED,error:new Error("Concurrent export limit reached")});return}let n=this._serializer.serializeRequest(e);if(n==null){r({code:de.FAILED,error:new Error("Nothing to send")});return}this._promiseQueue.pushPromise(this._transport.send(n,this._timeout).then(s=>{if(s.status==="success"){if(s.data!=null)try{this._responseHandler.handleResponse(this._serializer.deserializeResponse(s.data));}catch(a){this._diagLogger.warn("Export succeeded but could not deserialize response - is the response specification compliant?",a,s.data);}r({code:de.SUCCESS});return}else if(s.status==="failure"&&s.error){r({code:de.FAILED,error:s.error});return}else s.status==="retryable"?r({code:de.FAILED,error:new No("Export failed with retryable status")}):r({code:de.FAILED,error:new No("Export failed with unknown error")});},s=>r({code:de.FAILED,error:s})));}forceFlush(){return this._promiseQueue.awaitAll()}async shutdown(){this._diagLogger.debug("shutdown started"),await this.forceFlush(),this._transport.shutdown();}};});function ZK(t,e,r){return cS({transport:r,serializer:e,promiseHandler:aS(t)},{timeout:t.timeoutMillis})}var eW=E(()=>{gP();AP();});var Tf={};Ue(Tf,{CompressionAlgorithm:()=>sS,OTLPExporterBase:()=>Zr,OTLPExporterError:()=>No,createOtlpNetworkExportDelegate:()=>ZK,getSharedConfigurationDefaults:()=>oS,mergeOtlpSharedConfigurationWithDefaults:()=>iS});var ki=E(()=>{WK();rS();Ef();XK();eW();});var RP=f((DAt,tW)=>{tW.exports=u0e;function u0e(t,e){for(var r=new Array(arguments.length-1),n=0,s=2,a=true;s<arguments.length;)r[n++]=arguments[s++];return new Promise(function(i,c){r[n]=function(l){if(a)if(a=false,l)c(l);else {for(var d=new Array(arguments.length-1),p=0;p<d.length;)d[p++]=arguments[p];i.apply(null,d);}};try{t.apply(e||null,r);}catch(u){a&&(a=false,c(u));}})}});var oW=f(iW=>{var uS=iW;uS.length=function(e){var r=e.length;if(!r)return 0;for(var n=0;--r%4>1&&e.charAt(r)==="=";)++n;return Math.ceil(e.length*3)/4-n};var Uu=new Array(64),nW=new Array(123);for(fi=0;fi<64;)nW[Uu[fi]=fi<26?fi+65:fi<52?fi+71:fi<62?fi-4:fi-59|43]=fi++;var fi;uS.encode=function(e,r,n){for(var s=null,a=[],o=0,i=0,c;r<n;){var u=e[r++];switch(i){case 0:a[o++]=Uu[u>>2],c=(u&3)<<4,i=1;break;case 1:a[o++]=Uu[c|u>>4],c=(u&15)<<2,i=2;break;case 2:a[o++]=Uu[c|u>>6],a[o++]=Uu[u&63],i=0;break}o>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,a)),o=0);}return i&&(a[o++]=Uu[c],a[o++]=61,i===1&&(a[o++]=61)),s?(o&&s.push(String.fromCharCode.apply(String,a.slice(0,o))),s.join("")):String.fromCharCode.apply(String,a.slice(0,o))};var rW="invalid encoding";uS.decode=function(e,r,n){for(var s=n,a=0,o,i=0;i<e.length;){var c=e.charCodeAt(i++);if(c===61&&a>1)break;if((c=nW[c])===void 0)throw Error(rW);switch(a){case 0:o=c,a=1;break;case 1:r[n++]=o<<2|(c&48)>>4,o=c,a=2;break;case 2:r[n++]=(o&15)<<4|(c&60)>>2,o=c,a=3;break;case 3:r[n++]=(o&3)<<6|c,a=0;break}}if(a===1)throw Error(rW);return n-s};uS.test=function(e){return /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)};});var aW=f((UAt,sW)=>{sW.exports=lS;function lS(){this._listeners={};}lS.prototype.on=function(e,r,n){return (this._listeners[e]||(this._listeners[e]=[])).push({fn:r,ctx:n||this}),this};lS.prototype.off=function(e,r){if(e===void 0)this._listeners={};else if(r===void 0)this._listeners[e]=[];else for(var n=this._listeners[e],s=0;s<n.length;)n[s].fn===r?n.splice(s,1):++s;return this};lS.prototype.emit=function(e){var r=this._listeners[e];if(r){for(var n=[],s=1;s<arguments.length;)n.push(arguments[s++]);for(s=0;s<r.length;)r[s].fn.apply(r[s++].ctx,n);}return this};});var hW=f((kAt,fW)=>{fW.exports=cW(cW);function cW(t){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),r=new Uint8Array(e.buffer),n=r[3]===128;function s(c,u,l){e[0]=c,u[l]=r[0],u[l+1]=r[1],u[l+2]=r[2],u[l+3]=r[3];}function a(c,u,l){e[0]=c,u[l]=r[3],u[l+1]=r[2],u[l+2]=r[1],u[l+3]=r[0];}t.writeFloatLE=n?s:a,t.writeFloatBE=n?a:s;function o(c,u){return r[0]=c[u],r[1]=c[u+1],r[2]=c[u+2],r[3]=c[u+3],e[0]}function i(c,u){return r[3]=c[u],r[2]=c[u+1],r[1]=c[u+2],r[0]=c[u+3],e[0]}t.readFloatLE=n?o:i,t.readFloatBE=n?i:o;}():function(){function e(n,s,a,o){var i=s<0?1:0;if(i&&(s=-s),s===0)n(1/s>0?0:2147483648,a,o);else if(isNaN(s))n(2143289344,a,o);else if(s>34028234663852886e22)n((i<<31|2139095040)>>>0,a,o);else if(s<11754943508222875e-54)n((i<<31|Math.round(s/1401298464324817e-60))>>>0,a,o);else {var c=Math.floor(Math.log(s)/Math.LN2),u=Math.round(s*Math.pow(2,-c)*8388608)&8388607;n((i<<31|c+127<<23|u)>>>0,a,o);}}t.writeFloatLE=e.bind(null,uW),t.writeFloatBE=e.bind(null,lW);function r(n,s,a){var o=n(s,a),i=(o>>31)*2+1,c=o>>>23&255,u=o&8388607;return c===255?u?NaN:i*(1/0):c===0?i*1401298464324817e-60*u:i*Math.pow(2,c-150)*(u+8388608)}t.readFloatLE=r.bind(null,dW),t.readFloatBE=r.bind(null,pW);}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),r=new Uint8Array(e.buffer),n=r[7]===128;function s(c,u,l){e[0]=c,u[l]=r[0],u[l+1]=r[1],u[l+2]=r[2],u[l+3]=r[3],u[l+4]=r[4],u[l+5]=r[5],u[l+6]=r[6],u[l+7]=r[7];}function a(c,u,l){e[0]=c,u[l]=r[7],u[l+1]=r[6],u[l+2]=r[5],u[l+3]=r[4],u[l+4]=r[3],u[l+5]=r[2],u[l+6]=r[1],u[l+7]=r[0];}t.writeDoubleLE=n?s:a,t.writeDoubleBE=n?a:s;function o(c,u){return r[0]=c[u],r[1]=c[u+1],r[2]=c[u+2],r[3]=c[u+3],r[4]=c[u+4],r[5]=c[u+5],r[6]=c[u+6],r[7]=c[u+7],e[0]}function i(c,u){return r[7]=c[u],r[6]=c[u+1],r[5]=c[u+2],r[4]=c[u+3],r[3]=c[u+4],r[2]=c[u+5],r[1]=c[u+6],r[0]=c[u+7],e[0]}t.readDoubleLE=n?o:i,t.readDoubleBE=n?i:o;}():function(){function e(n,s,a,o,i,c){var u=o<0?1:0;if(u&&(o=-o),o===0)n(0,i,c+s),n(1/o>0?0:2147483648,i,c+a);else if(isNaN(o))n(0,i,c+s),n(2146959360,i,c+a);else if(o>17976931348623157e292)n(0,i,c+s),n((u<<31|2146435072)>>>0,i,c+a);else {var l;if(o<22250738585072014e-324)l=o/5e-324,n(l>>>0,i,c+s),n((u<<31|l/4294967296)>>>0,i,c+a);else {var d=Math.floor(Math.log(o)/Math.LN2);d===1024&&(d=1023),l=o*Math.pow(2,-d),n(l*4503599627370496>>>0,i,c+s),n((u<<31|d+1023<<20|l*1048576&1048575)>>>0,i,c+a);}}}t.writeDoubleLE=e.bind(null,uW,0,4),t.writeDoubleBE=e.bind(null,lW,4,0);function r(n,s,a,o,i){var c=n(o,i+s),u=n(o,i+a),l=(u>>31)*2+1,d=u>>>20&2047,p=4294967296*(u&1048575)+c;return d===2047?p?NaN:l*(1/0):d===0?l*5e-324*p:l*Math.pow(2,d-1075)*(p+4503599627370496)}t.readDoubleLE=r.bind(null,dW,0,4),t.readDoubleBE=r.bind(null,pW,4,0);}(),t}function uW(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24;}function lW(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=t&255;}function dW(t,e){return (t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function pW(t,e){return (t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}});var vP=f((exports,module)=>{module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}});var mW=f(_W=>{var OP=_W;OP.length=function(e){for(var r=0,n=0,s=0;s<e.length;++s)n=e.charCodeAt(s),n<128?r+=1:n<2048?r+=2:(n&64512)===55296&&(e.charCodeAt(s+1)&64512)===56320?(++s,r+=4):r+=3;return r};OP.read=function(e,r,n){var s=n-r;if(s<1)return "";for(var a=null,o=[],i=0,c;r<n;)c=e[r++],c<128?o[i++]=c:c>191&&c<224?o[i++]=(c&31)<<6|e[r++]&63:c>239&&c<365?(c=((c&7)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,o[i++]=55296+(c>>10),o[i++]=56320+(c&1023)):o[i++]=(c&15)<<12|(e[r++]&63)<<6|e[r++]&63,i>8191&&((a||(a=[])).push(String.fromCharCode.apply(String,o)),i=0);return a?(i&&a.push(String.fromCharCode.apply(String,o.slice(0,i))),a.join("")):String.fromCharCode.apply(String,o.slice(0,i))};OP.write=function(e,r,n){for(var s=n,a,o,i=0;i<e.length;++i)a=e.charCodeAt(i),a<128?r[n++]=a:a<2048?(r[n++]=a>>6|192,r[n++]=a&63|128):(a&64512)===55296&&((o=e.charCodeAt(i+1))&64512)===56320?(a=65536+((a&1023)<<10)+(o&1023),++i,r[n++]=a>>18|240,r[n++]=a>>12&63|128,r[n++]=a>>6&63|128,r[n++]=a&63|128):(r[n++]=a>>12|224,r[n++]=a>>6&63|128,r[n++]=a&63|128);return n-s};});var TW=f((BAt,EW)=>{EW.exports=l0e;function l0e(t,e,r){var n=r||8192,s=n>>>1,a=null,o=n;return function(c){if(c<1||c>s)return t(c);o+c>n&&(a=t(n),o=0);var u=e.call(a,o,o+=c);return o&7&&(o=(o|7)+1),u}}});var gW=f((FAt,SW)=>{SW.exports=nr;var Sf=Vi();function nr(t,e){this.lo=t>>>0,this.hi=e>>>0;}var Da=nr.zero=new nr(0,0);Da.toNumber=function(){return 0};Da.zzEncode=Da.zzDecode=function(){return this};Da.length=function(){return 1};var d0e=nr.zeroHash="\0\0\0\0\0\0\0\0";nr.fromNumber=function(e){if(e===0)return Da;var r=e<0;r&&(e=-e);var n=e>>>0,s=(e-n)/4294967296>>>0;return r&&(s=~s>>>0,n=~n>>>0,++n>4294967295&&(n=0,++s>4294967295&&(s=0))),new nr(n,s)};nr.from=function(e){if(typeof e=="number")return nr.fromNumber(e);if(Sf.isString(e))if(Sf.Long)e=Sf.Long.fromString(e);else return nr.fromNumber(parseInt(e,10));return e.low||e.high?new nr(e.low>>>0,e.high>>>0):Da};nr.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var r=~this.lo+1>>>0,n=~this.hi>>>0;return r||(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296};nr.prototype.toLong=function(e){return Sf.Long?new Sf.Long(this.lo|0,this.hi|0,!!e):{low:this.lo|0,high:this.hi|0,unsigned:!!e}};var Es=String.prototype.charCodeAt;nr.fromHash=function(e){return e===d0e?Da:new nr((Es.call(e,0)|Es.call(e,1)<<8|Es.call(e,2)<<16|Es.call(e,3)<<24)>>>0,(Es.call(e,4)|Es.call(e,5)<<8|Es.call(e,6)<<16|Es.call(e,7)<<24)>>>0)};nr.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};nr.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};nr.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};nr.prototype.length=function(){var e=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?e<16384?e<128?1:2:e<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10};});var Vi=f(NP=>{var J=NP;J.asPromise=RP();J.base64=oW();J.EventEmitter=aW();J.float=hW();J.inquire=vP();J.utf8=mW();J.pool=TW();J.LongBits=gW();J.isNode=!!(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node);J.global=J.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||NP;J.emptyArray=Object.freeze?Object.freeze([]):[];J.emptyObject=Object.freeze?Object.freeze({}):{};J.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};J.isString=function(e){return typeof e=="string"||e instanceof String};J.isObject=function(e){return e&&typeof e=="object"};J.isset=J.isSet=function(e,r){var n=e[r];return n!=null&&e.hasOwnProperty(r)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:false};J.Buffer=function(){try{var t=J.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch{return null}}();J._Buffer_from=null;J._Buffer_allocUnsafe=null;J.newBuffer=function(e){return typeof e=="number"?J.Buffer?J._Buffer_allocUnsafe(e):new J.Array(e):J.Buffer?J._Buffer_from(e):typeof Uint8Array>"u"?e:new Uint8Array(e)};J.Array=typeof Uint8Array<"u"?Uint8Array:Array;J.Long=J.global.dcodeIO&&J.global.dcodeIO.Long||J.global.Long||J.inquire("long");J.key2Re=/^true|false|0|1$/;J.key32Re=/^-?(?:0|[1-9][0-9]*)$/;J.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;J.longToHash=function(e){return e?J.LongBits.from(e).toHash():J.LongBits.zeroHash};J.longFromHash=function(e,r){var n=J.LongBits.fromHash(e);return J.Long?J.Long.fromBits(n.lo,n.hi,r):n.toNumber(!!r)};function yW(t,e,r){for(var n=Object.keys(e),s=0;s<n.length;++s)(t[n[s]]===void 0||!r)&&(t[n[s]]=e[n[s]]);return t}J.merge=yW;J.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function AW(t){function e(r,n){if(!(this instanceof e))return new e(r,n);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&yW(this,n);}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:true,enumerable:false,configurable:true},name:{get:function(){return t},set:void 0,enumerable:false,configurable:true},toString:{value:function(){return this.name+": "+this.message},writable:true,enumerable:false,configurable:true}}),e}J.newError=AW;J.ProtocolError=AW("ProtocolError");J.oneOfGetter=function(e){for(var r={},n=0;n<e.length;++n)r[e[n]]=1;return function(){for(var s=Object.keys(this),a=s.length-1;a>-1;--a)if(r[s[a]]===1&&this[s[a]]!==void 0&&this[s[a]]!==null)return s[a]}};J.oneOfSetter=function(e){return function(r){for(var n=0;n<e.length;++n)e[n]!==r&&delete this[e[n]];}};J.toJSONOptions={longs:String,enums:String,bytes:String,json:true};J._configure=function(){var t=J.Buffer;if(!t){J._Buffer_from=J._Buffer_allocUnsafe=null;return}J._Buffer_from=t.from!==Uint8Array.from&&t.from||function(r,n){return new t(r,n)},J._Buffer_allocUnsafe=t.allocUnsafe||function(r){return new t(r)};};});var pS=f((HAt,NW)=>{NW.exports=Fe;var kn=Vi(),CP,dS=kn.LongBits,RW=kn.base64,vW=kn.utf8;function gf(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r;}function bP(){}function p0e(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states;}function Fe(){this.len=0,this.head=new gf(bP,0,0),this.tail=this.head,this.states=null;}var OW=function(){return kn.Buffer?function(){return (Fe.create=function(){return new CP})()}:function(){return new Fe}};Fe.create=OW();Fe.alloc=function(e){return new kn.Array(e)};kn.Array!==Array&&(Fe.alloc=kn.pool(Fe.alloc,kn.Array.prototype.subarray));Fe.prototype._push=function(e,r,n){return this.tail=this.tail.next=new gf(e,r,n),this.len+=r,this};function MP(t,e,r){e[r]=t&255;}function f0e(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t;}function IP(t,e){this.len=t,this.next=void 0,this.val=e;}IP.prototype=Object.create(gf.prototype);IP.prototype.fn=f0e;Fe.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new IP((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};Fe.prototype.int32=function(e){return e<0?this._push(xP,10,dS.fromNumber(e)):this.uint32(e)};Fe.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function xP(t,e,r){for(;t.hi;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo;}Fe.prototype.uint64=function(e){var r=dS.from(e);return this._push(xP,r.length(),r)};Fe.prototype.int64=Fe.prototype.uint64;Fe.prototype.sint64=function(e){var r=dS.from(e).zzEncode();return this._push(xP,r.length(),r)};Fe.prototype.bool=function(e){return this._push(MP,1,e?1:0)};function PP(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24;}Fe.prototype.fixed32=function(e){return this._push(PP,4,e>>>0)};Fe.prototype.sfixed32=Fe.prototype.fixed32;Fe.prototype.fixed64=function(e){var r=dS.from(e);return this._push(PP,4,r.lo)._push(PP,4,r.hi)};Fe.prototype.sfixed64=Fe.prototype.fixed64;Fe.prototype.float=function(e){return this._push(kn.float.writeFloatLE,4,e)};Fe.prototype.double=function(e){return this._push(kn.float.writeDoubleLE,8,e)};var h0e=kn.Array.prototype.set?function(e,r,n){r.set(e,n);}:function(e,r,n){for(var s=0;s<e.length;++s)r[n+s]=e[s];};Fe.prototype.bytes=function(e){var r=e.length>>>0;if(!r)return this._push(MP,1,0);if(kn.isString(e)){var n=Fe.alloc(r=RW.length(e));RW.decode(e,n,0),e=n;}return this.uint32(r)._push(h0e,r,e)};Fe.prototype.string=function(e){var r=vW.length(e);return r?this.uint32(r)._push(vW.write,r,e):this._push(MP,1,0)};Fe.prototype.fork=function(){return this.states=new p0e(this),this.head=this.tail=new gf(bP,0,0),this.len=0,this};Fe.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new gf(bP,0,0),this.len=0),this};Fe.prototype.ldelim=function(){var e=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=r,this.len+=n),this};Fe.prototype.finish=function(){for(var e=this.head.next,r=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,r,n),n+=e.len,e=e.next;return r};Fe._configure=function(t){CP=t,Fe.create=OW(),CP._configure();};});var bW=f((GAt,PW)=>{PW.exports=Bi;var CW=pS();(Bi.prototype=Object.create(CW.prototype)).constructor=Bi;var Ts=Vi();function Bi(){CW.call(this);}Bi._configure=function(){Bi.alloc=Ts._Buffer_allocUnsafe,Bi.writeBytesBuffer=Ts.Buffer&&Ts.Buffer.prototype instanceof Uint8Array&&Ts.Buffer.prototype.set.name==="set"?function(e,r,n){r.set(e,n);}:function(e,r,n){if(e.copy)e.copy(r,n,0,e.length);else for(var s=0;s<e.length;)r[n++]=e[s++];};};Bi.prototype.bytes=function(e){Ts.isString(e)&&(e=Ts._Buffer_from(e,"base64"));var r=e.length>>>0;return this.uint32(r),r&&this._push(Bi.writeBytesBuffer,r,e),this};function _0e(t,e,r){t.length<40?Ts.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r);}Bi.prototype.string=function(e){var r=Ts.Buffer.byteLength(e);return this.uint32(r),r&&this._push(_0e,r,e),this};Bi._configure();});var hS=f((jAt,DW)=>{DW.exports=xt;var hi=Vi(),DP,xW=hi.LongBits,m0e=hi.utf8;function _i(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function xt(t){this.buf=t,this.pos=0,this.len=t.length;}var MW=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new xt(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new xt(e);throw Error("illegal buffer")},LW=function(){return hi.Buffer?function(r){return (xt.create=function(s){return hi.Buffer.isBuffer(s)?new DP(s):MW(s)})(r)}:MW};xt.create=LW();xt.prototype._slice=hi.Array.prototype.subarray||hi.Array.prototype.slice;xt.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,_i(this,10);return e}}();xt.prototype.int32=function(){return this.uint32()|0};xt.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function LP(){var t=new xW(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;e=0;}else {for(;e<3;++e){if(this.pos>=this.len)throw _i(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw _i(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}xt.prototype.bool=function(){return this.uint32()!==0};function fS(t,e){return (t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}xt.prototype.fixed32=function(){if(this.pos+4>this.len)throw _i(this,4);return fS(this.buf,this.pos+=4)};xt.prototype.sfixed32=function(){if(this.pos+4>this.len)throw _i(this,4);return fS(this.buf,this.pos+=4)|0};function IW(){if(this.pos+8>this.len)throw _i(this,8);return new xW(fS(this.buf,this.pos+=4),fS(this.buf,this.pos+=4))}xt.prototype.float=function(){if(this.pos+4>this.len)throw _i(this,4);var e=hi.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};xt.prototype.double=function(){if(this.pos+8>this.len)throw _i(this,4);var e=hi.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};xt.prototype.bytes=function(){var e=this.uint32(),r=this.pos,n=this.pos+e;if(n>this.len)throw _i(this,e);if(this.pos+=e,Array.isArray(this.buf))return this.buf.slice(r,n);if(r===n){var s=hi.Buffer;return s?s.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,r,n)};xt.prototype.string=function(){var e=this.bytes();return m0e.read(e,0,e.length)};xt.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw _i(this,e);this.pos+=e;}else do if(this.pos>=this.len)throw _i(this);while(this.buf[this.pos++]&128);return this};xt.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!==4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this};xt._configure=function(t){DP=t,xt.create=LW(),DP._configure();var e=hi.Long?"toLong":"toNumber";hi.merge(xt.prototype,{int64:function(){return LP.call(this)[e](false)},uint64:function(){return LP.call(this)[e](true)},sint64:function(){return LP.call(this).zzDecode()[e](false)},fixed64:function(){return IW.call(this)[e](true)},sfixed64:function(){return IW.call(this)[e](false)}});};});var VW=f((zAt,kW)=>{kW.exports=wa;var UW=hS();(wa.prototype=Object.create(UW.prototype)).constructor=wa;var wW=Vi();function wa(t){UW.call(this,t);}wa._configure=function(){wW.Buffer&&(wa.prototype._slice=wW.Buffer.prototype.slice);};wa.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};wa._configure();});var FW=f((YAt,BW)=>{BW.exports=yf;var wP=Vi();(yf.prototype=Object.create(wP.EventEmitter.prototype)).constructor=yf;function yf(t,e,r){if(typeof t!="function")throw TypeError("rpcImpl must be a function");wP.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=!!e,this.responseDelimited=!!r;}yf.prototype.rpcCall=function t(e,r,n,s,a){if(!s)throw TypeError("request must be specified");var o=this;if(!a)return wP.asPromise(t,o,e,r,n,s);if(!o.rpcImpl){setTimeout(function(){a(Error("already ended"));},0);return}try{return o.rpcImpl(e,r[o.requestDelimited?"encodeDelimited":"encode"](s).finish(),function(c,u){if(c)return o.emit("error",c,e),a(c);if(u===null){o.end(!0);return}if(!(u instanceof n))try{u=n[o.responseDelimited?"decodeDelimited":"decode"](u);}catch(l){return o.emit("error",l,e),a(l)}return o.emit("data",u,e),a(null,u)})}catch(i){o.emit("error",i,e),setTimeout(function(){a(i);},0);return}};yf.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};});var UP=f(qW=>{var E0e=qW;E0e.Service=FW();});var kP=f((KAt,HW)=>{HW.exports={};});var VP=f(jW=>{var en=jW;en.build="minimal";en.Writer=pS();en.BufferWriter=bW();en.Reader=hS();en.BufferReader=VW();en.util=Vi();en.rpc=UP();en.roots=kP();en.configure=GW;function GW(){en.util._configure(),en.Writer._configure(en.BufferWriter),en.Reader._configure(en.BufferReader);}GW();});var YW=f((XAt,zW)=>{zW.exports=VP();});var _S=f((QAt,$W)=>{var re=YW(),O=re.Reader,fe=re.Writer,m=re.util,_=re.roots.default||(re.roots.default={});_.opentelemetry=function(){var t={};return t.proto=function(){var e={};return e.common=function(){var r={};return r.v1=function(){var n={};return n.AnyValue=function(){function s(o){if(o)for(var i=Object.keys(o),c=0;c<i.length;++c)o[i[c]]!=null&&(this[i[c]]=o[i[c]]);}s.prototype.stringValue=null,s.prototype.boolValue=null,s.prototype.intValue=null,s.prototype.doubleValue=null,s.prototype.arrayValue=null,s.prototype.kvlistValue=null,s.prototype.bytesValue=null;var a;return Object.defineProperty(s.prototype,"value",{get:m.oneOfGetter(a=["stringValue","boolValue","intValue","doubleValue","arrayValue","kvlistValue","bytesValue"]),set:m.oneOfSetter(a)}),s.create=function(i){return new s(i)},s.encode=function(i,c){return c||(c=fe.create()),i.stringValue!=null&&Object.hasOwnProperty.call(i,"stringValue")&&c.uint32(10).string(i.stringValue),i.boolValue!=null&&Object.hasOwnProperty.call(i,"boolValue")&&c.uint32(16).bool(i.boolValue),i.intValue!=null&&Object.hasOwnProperty.call(i,"intValue")&&c.uint32(24).int64(i.intValue),i.doubleValue!=null&&Object.hasOwnProperty.call(i,"doubleValue")&&c.uint32(33).double(i.doubleValue),i.arrayValue!=null&&Object.hasOwnProperty.call(i,"arrayValue")&&_.opentelemetry.proto.common.v1.ArrayValue.encode(i.arrayValue,c.uint32(42).fork()).ldelim(),i.kvlistValue!=null&&Object.hasOwnProperty.call(i,"kvlistValue")&&_.opentelemetry.proto.common.v1.KeyValueList.encode(i.kvlistValue,c.uint32(50).fork()).ldelim(),i.bytesValue!=null&&Object.hasOwnProperty.call(i,"bytesValue")&&c.uint32(58).bytes(i.bytesValue),c},s.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},s.decode=function(i,c,u){i instanceof O||(i=O.create(i));for(var l=c===void 0?i.len:i.pos+c,d=new _.opentelemetry.proto.common.v1.AnyValue;i.pos<l;){var p=i.uint32();if(p===u)break;switch(p>>>3){case 1:{d.stringValue=i.string();break}case 2:{d.boolValue=i.bool();break}case 3:{d.intValue=i.int64();break}case 4:{d.doubleValue=i.double();break}case 5:{d.arrayValue=_.opentelemetry.proto.common.v1.ArrayValue.decode(i,i.uint32());break}case 6:{d.kvlistValue=_.opentelemetry.proto.common.v1.KeyValueList.decode(i,i.uint32());break}case 7:{d.bytesValue=i.bytes();break}default:i.skipType(p&7);break}}return d},s.decodeDelimited=function(i){return i instanceof O||(i=new O(i)),this.decode(i,i.uint32())},s.verify=function(i){if(typeof i!="object"||i===null)return "object expected";var c={};if(i.stringValue!=null&&i.hasOwnProperty("stringValue")&&(c.value=1,!m.isString(i.stringValue)))return "stringValue: string expected";if(i.boolValue!=null&&i.hasOwnProperty("boolValue")){if(c.value===1)return "value: multiple values";if(c.value=1,typeof i.boolValue!="boolean")return "boolValue: boolean expected"}if(i.intValue!=null&&i.hasOwnProperty("intValue")){if(c.value===1)return "value: multiple values";if(c.value=1,!m.isInteger(i.intValue)&&!(i.intValue&&m.isInteger(i.intValue.low)&&m.isInteger(i.intValue.high)))return "intValue: integer|Long expected"}if(i.doubleValue!=null&&i.hasOwnProperty("doubleValue")){if(c.value===1)return "value: multiple values";if(c.value=1,typeof i.doubleValue!="number")return "doubleValue: number expected"}if(i.arrayValue!=null&&i.hasOwnProperty("arrayValue")){if(c.value===1)return "value: multiple values";c.value=1;{var u=_.opentelemetry.proto.common.v1.ArrayValue.verify(i.arrayValue);if(u)return "arrayValue."+u}}if(i.kvlistValue!=null&&i.hasOwnProperty("kvlistValue")){if(c.value===1)return "value: multiple values";c.value=1;{var u=_.opentelemetry.proto.common.v1.KeyValueList.verify(i.kvlistValue);if(u)return "kvlistValue."+u}}if(i.bytesValue!=null&&i.hasOwnProperty("bytesValue")){if(c.value===1)return "value: multiple values";if(c.value=1,!(i.bytesValue&&typeof i.bytesValue.length=="number"||m.isString(i.bytesValue)))return "bytesValue: buffer expected"}return null},s.fromObject=function(i){if(i instanceof _.opentelemetry.proto.common.v1.AnyValue)return i;var c=new _.opentelemetry.proto.common.v1.AnyValue;if(i.stringValue!=null&&(c.stringValue=String(i.stringValue)),i.boolValue!=null&&(c.boolValue=!!i.boolValue),i.intValue!=null&&(m.Long?(c.intValue=m.Long.fromValue(i.intValue)).unsigned=false:typeof i.intValue=="string"?c.intValue=parseInt(i.intValue,10):typeof i.intValue=="number"?c.intValue=i.intValue:typeof i.intValue=="object"&&(c.intValue=new m.LongBits(i.intValue.low>>>0,i.intValue.high>>>0).toNumber())),i.doubleValue!=null&&(c.doubleValue=Number(i.doubleValue)),i.arrayValue!=null){if(typeof i.arrayValue!="object")throw TypeError(".opentelemetry.proto.common.v1.AnyValue.arrayValue: object expected");c.arrayValue=_.opentelemetry.proto.common.v1.ArrayValue.fromObject(i.arrayValue);}if(i.kvlistValue!=null){if(typeof i.kvlistValue!="object")throw TypeError(".opentelemetry.proto.common.v1.AnyValue.kvlistValue: object expected");c.kvlistValue=_.opentelemetry.proto.common.v1.KeyValueList.fromObject(i.kvlistValue);}return i.bytesValue!=null&&(typeof i.bytesValue=="string"?m.base64.decode(i.bytesValue,c.bytesValue=m.newBuffer(m.base64.length(i.bytesValue)),0):i.bytesValue.length>=0&&(c.bytesValue=i.bytesValue)),c},s.toObject=function(i,c){c||(c={});var u={};return i.stringValue!=null&&i.hasOwnProperty("stringValue")&&(u.stringValue=i.stringValue,c.oneofs&&(u.value="stringValue")),i.boolValue!=null&&i.hasOwnProperty("boolValue")&&(u.boolValue=i.boolValue,c.oneofs&&(u.value="boolValue")),i.intValue!=null&&i.hasOwnProperty("intValue")&&(typeof i.intValue=="number"?u.intValue=c.longs===String?String(i.intValue):i.intValue:u.intValue=c.longs===String?m.Long.prototype.toString.call(i.intValue):c.longs===Number?new m.LongBits(i.intValue.low>>>0,i.intValue.high>>>0).toNumber():i.intValue,c.oneofs&&(u.value="intValue")),i.doubleValue!=null&&i.hasOwnProperty("doubleValue")&&(u.doubleValue=c.json&&!isFinite(i.doubleValue)?String(i.doubleValue):i.doubleValue,c.oneofs&&(u.value="doubleValue")),i.arrayValue!=null&&i.hasOwnProperty("arrayValue")&&(u.arrayValue=_.opentelemetry.proto.common.v1.ArrayValue.toObject(i.arrayValue,c),c.oneofs&&(u.value="arrayValue")),i.kvlistValue!=null&&i.hasOwnProperty("kvlistValue")&&(u.kvlistValue=_.opentelemetry.proto.common.v1.KeyValueList.toObject(i.kvlistValue,c),c.oneofs&&(u.value="kvlistValue")),i.bytesValue!=null&&i.hasOwnProperty("bytesValue")&&(u.bytesValue=c.bytes===String?m.base64.encode(i.bytesValue,0,i.bytesValue.length):c.bytes===Array?Array.prototype.slice.call(i.bytesValue):i.bytesValue,c.oneofs&&(u.value="bytesValue")),u},s.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},s.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/opentelemetry.proto.common.v1.AnyValue"},s}(),n.ArrayValue=function(){function s(a){if(this.values=[],a)for(var o=Object.keys(a),i=0;i<o.length;++i)a[o[i]]!=null&&(this[o[i]]=a[o[i]]);}return s.prototype.values=m.emptyArray,s.create=function(o){return new s(o)},s.encode=function(o,i){if(i||(i=fe.create()),o.values!=null&&o.values.length)for(var c=0;c<o.values.length;++c)_.opentelemetry.proto.common.v1.AnyValue.encode(o.values[c],i.uint32(10).fork()).ldelim();return i},s.encodeDelimited=function(o,i){return this.encode(o,i).ldelim()},s.decode=function(o,i,c){o instanceof O||(o=O.create(o));for(var u=i===void 0?o.len:o.pos+i,l=new _.opentelemetry.proto.common.v1.ArrayValue;o.pos<u;){var d=o.uint32();if(d===c)break;switch(d>>>3){case 1:{l.values&&l.values.length||(l.values=[]),l.values.push(_.opentelemetry.proto.common.v1.AnyValue.decode(o,o.uint32()));break}default:o.skipType(d&7);break}}return l},s.decodeDelimited=function(o){return o instanceof O||(o=new O(o)),this.decode(o,o.uint32())},s.verify=function(o){if(typeof o!="object"||o===null)return "object expected";if(o.values!=null&&o.hasOwnProperty("values")){if(!Array.isArray(o.values))return "values: array expected";for(var i=0;i<o.values.length;++i){var c=_.opentelemetry.proto.common.v1.AnyValue.verify(o.values[i]);if(c)return "values."+c}}return null},s.fromObject=function(o){if(o instanceof _.opentelemetry.proto.common.v1.ArrayValue)return o;var i=new _.opentelemetry.proto.common.v1.ArrayValue;if(o.values){if(!Array.isArray(o.values))throw TypeError(".opentelemetry.proto.common.v1.ArrayValue.values: array expected");i.values=[];for(var c=0;c<o.values.length;++c){if(typeof o.values[c]!="object")throw TypeError(".opentelemetry.proto.common.v1.ArrayValue.values: object expected");i.values[c]=_.opentelemetry.proto.common.v1.AnyValue.fromObject(o.values[c]);}}return i},s.toObject=function(o,i){i||(i={});var c={};if((i.arrays||i.defaults)&&(c.values=[]),o.values&&o.values.length){c.values=[];for(var u=0;u<o.values.length;++u)c.values[u]=_.opentelemetry.proto.common.v1.AnyValue.toObject(o.values[u],i);}return c},s.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},s.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/opentelemetry.proto.common.v1.ArrayValue"},s}(),n.KeyValueList=function(){function s(a){if(this.values=[],a)for(var o=Object.keys(a),i=0;i<o.length;++i)a[o[i]]!=null&&(this[o[i]]=a[o[i]]);}return s.prototype.values=m.emptyArray,s.create=function(o){return new s(o)},s.encode=function(o,i){if(i||(i=fe.create()),o.values!=null&&o.values.length)for(var c=0;c<o.values.length;++c)_.opentelemetry.proto.common.v1.KeyValue.encode(o.values[c],i.uint32(10).fork()).ldelim();return i},s.encodeDelimited=function(o,i){return this.encode(o,i).ldelim()},s.decode=function(o,i,c){o instanceof O||(o=O.create(o));for(var u=i===void 0?o.len:o.pos+i,l=new _.opentelemetry.proto.common.v1.KeyValueList;o.pos<u;){var d=o.uint32();if(d===c)break;switch(d>>>3){case 1:{l.values&&l.values.length||(l.values=[]),l.values.push(_.opentelemetry.proto.common.v1.KeyValue.decode(o,o.uint32()));break}default:o.skipType(d&7);break}}return l},s.decodeDelimited=function(o){return o instanceof O||(o=new O(o)),this.decode(o,o.uint32())},s.verify=function(o){if(typeof o!="object"||o===null)return "object expected";if(o.values!=null&&o.hasOwnProperty("values")){if(!Array.isArray(o.values))return "values: array expected";for(var i=0;i<o.values.length;++i){var c=_.opentelemetry.proto.common.v1.KeyValue.verify(o.values[i]);if(c)return "values."+c}}return null},s.fromObject=function(o){if(o instanceof _.opentelemetry.proto.common.v1.KeyValueList)return o;var i=new _.opentelemetry.proto.common.v1.KeyValueList;if(o.values){if(!Array.isArray(o.values))throw TypeError(".opentelemetry.proto.common.v1.KeyValueList.values: array expected");i.values=[];for(var c=0;c<o.values.length;++c){if(typeof o.values[c]!="object")throw TypeError(".opentelemetry.proto.common.v1.KeyValueList.values: object expected");i.values[c]=_.opentelemetry.proto.common.v1.KeyValue.fromObject(o.values[c]);}}return i},s.toObject=function(o,i){i||(i={});var c={};if((i.arrays||i.defaults)&&(c.values=[]),o.values&&o.values.length){c.values=[];for(var u=0;u<o.values.length;++u)c.values[u]=_.opentelemetry.proto.common.v1.KeyValue.toObject(o.values[u],i);}return c},s.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},s.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/opentelemetry.proto.common.v1.KeyValueList"},s}(),n.KeyValue=function(){function s(a){if(a)for(var o=Object.keys(a),i=0;i<o.length;++i)a[o[i]]!=null&&(this[o[i]]=a[o[i]]);}return s.prototype.key=null,s.prototype.value=null,s.create=function(o){return new s(o)},s.encode=function(o,i){return i||(i=fe.create()),o.key!=null&&Object.hasOwnProperty.call(o,"key")&&i.uint32(10).string(o.key),o.value!=null&&Object.hasOwnProperty.call(o,"value")&&_.opentelemetry.proto.common.v1.AnyValue.encode(o.value,i.uint32(18).fork()).ldelim(),i},s.encodeDelimited=function(o,i){return this.encode(o,i).ldelim()},s.decode=function(o,i,c){o instanceof O||(o=O.create(o));for(var u=i===void 0?o.len:o.pos+i,l=new _.opentelemetry.proto.common.v1.KeyValue;o.pos<u;){var d=o.uint32();if(d===c)break;switch(d>>>3){case 1:{l.key=o.string();break}case 2:{l.value=_.opentelemetry.proto.common.v1.AnyValue.decode(o,o.uint32());break}default:o.skipType(d&7);break}}return l},s.decodeDelimited=function(o){return o instanceof O||(o=new O(o)),this.decode(o,o.uint32())},s.verify=function(o){if(typeof o!="object"||o===null)return "object expected";if(o.key!=null&&o.hasOwnProperty("key")&&!m.isString(o.key))return "key: string expected";if(o.value!=null&&o.hasOwnProperty("value")){var i=_.opentelemetry.proto.common.v1.AnyValue.verify(o.value);if(i)return "value."+i}return null},s.fromObject=function(o){if(o instanceof _.opentelemetry.proto.common.v1.KeyValue)return o;var i=new _.opentelemetry.proto.common.v1.KeyValue;if(o.key!=null&&(i.key=String(o.key)),o.value!=null){if(typeof o.value!="object")throw TypeError(".opentelemetry.proto.common.v1.KeyValue.value: object expected");i.value=_.opentelemetry.proto.common.v1.AnyValue.fromObject(o.value);}return i},s.toObject=function(o,i){i||(i={});var c={};return i.defaults&&(c.key="",c.value=null),o.key!=null&&o.hasOwnProperty("key")&&(c.key=o.key),o.value!=null&&o.hasOwnProperty("value")&&(c.value=_.opentelemetry.proto.common.v1.AnyValue.toObject(o.value,i)),c},s.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},s.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/opentelemetry.proto.common.v1.KeyValue"},s}(),n.InstrumentationScope=function(){function s(a){if(this.attributes=[],a)for(var o=Object.keys(a),i=0;i<o.length;++i)a[o[i]]!=null&&(this[o[i]]=a[o[i]]);}return s.prototype.name=null,s.prototype.version=null,s.prototype.attributes=m.emptyArray,s.prototype.droppedAttributesCount=null,s.create=function(o){return new s(o)},s.encode=function(o,i){if(i||(i=fe.create()),o.name!=null&&Object.hasOwnProperty.call(o,"name")&&i.uint32(10).string(o.name),o.version!=null&&Object.hasOwnProperty.call(o,"version")&&i.uint32(18).string(o.version),o.attributes!=null&&o.attributes.length)for(var c=0;c<o.attributes.length;++c)_.opentelemetry.proto.common.v1.KeyValue.encode(o.attributes[c],i.uint32(26).fork()).ldelim();return o.droppedAttributesCount!=null&&Object.hasOwnProperty.call(o,"droppedAttributesCount")&&i.uint32(32).uint32(o.droppedAttributesCount),i},s.encodeDelimited=function(o,i){return this.encode(o,i).ldelim()},s.decode=function(o,i,c){o instanceof O||(o=O.create(o));for(var u=i===void 0?o.len:o.pos+i,l=new _.opentelemetry.proto.common.v1.InstrumentationScope;o.pos<u;){var d=o.uint32();if(d===c)break;switch(d>>>3){case 1:{l.name=o.string();break}case 2:{l.version=o.string();break}case 3:{l.attributes&&l.attributes.length||(l.attributes=[]),l.attributes.push(_.opentelemetry.proto.common.v1.KeyValue.decode(o,o.uint32()));break}case 4:{l.droppedAttributesCount=o.uint32();break}default:o.skipType(d&7);break}}return l},s.decodeDelimited=function(o){return o instanceof O||(o=new O(o)),this.decode(o,o.uint32())},s.verify=function(o){if(typeof o!="object"||o===null)return "object expected";if(o.name!=null&&o.hasOwnProperty("name")&&!m.isString(o.name))return "name: string expected";if(o.version!=null&&o.hasOwnProperty("version")&&!m.isString(o.version))return "version: string expected";if(o.attributes!=null&&o.hasOwnProperty("attributes")){if(!Array.isArray(o.attributes))return "attributes: array expected";for(var i=0;i<o.attributes.length;++i){var c=_.opentelemetry.proto.common.v1.KeyValue.verify(o.attributes[i]);if(c)return "attributes."+c}}return o.droppedAttributesCount!=null&&o.hasOwnProperty("droppedAttributesCount")&&!m.isInteger(o.droppedAttributesCount)?"droppedAttributesCount: integer expected":null},s.fromObject=function(o){if(o instanceof _.opentelemetry.proto.common.v1.InstrumentationScope)return o;var i=new _.opentelemetry.proto.common.v1.InstrumentationScope;if(o.name!=null&&(i.name=String(o.name)),o.version!=null&&(i.version=String(o.version)),o.attributes){if(!Array.isArray(o.attributes))throw TypeError(".opentelemetry.proto.common.v1.InstrumentationScope.attributes: array expected");i.attributes=[];for(var c=0;c<o.attributes.length;++c){if(typeof o.attributes[c]!="object")throw TypeError(".opentelemetry.proto.common.v1.InstrumentationScope.attributes: object expected");i.attributes[c]=_.opentelemetry.proto.common.v1.KeyValue.fromObject(o.attributes[c]);}}return o.droppedAttributesCount!=null&&(i.droppedAttributesCount=o.droppedAttributesCount>>>0),i},s.toObject=function(o,i){i||(i={});var c={};if((i.arrays||i.defaults)&&(c.attributes=[]),i.defaults&&(c.name="",c.version="",c.droppedAttributesCount=0),o.name!=null&&o.hasOwnProperty("name")&&(c.name=o.name),o.version!=null&&o.hasOwnProperty("version")&&(c.version=o.version),o.attributes&&o.attributes.length){c.attributes=[];for(var u=0;u<o.attributes.length;++u)c.attributes[u]=_.opentelemetry.proto.common.v1.KeyValue.toObject(o.attributes[u],i);}return o.droppedAttributesCount!=null&&o.hasOwnProperty("droppedAttributesCount")&&(c.droppedAttributesCount=o.droppedAttributesCount),c},s.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},s.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/opentelemetry.proto.common.v1.InstrumentationScope"},s}(),n.EntityRef=function(){function s(a){if(this.idKeys=[],this.descriptionKeys=[],a)for(var o=Object.keys(a),i=0;i<o.length;++i)a[o[i]]!=null&&(this[o[i]]=a[o[i]]);}return s.prototype.schemaUrl=null,s.prototype.type=null,s.prototype.idKeys=m.emptyArray,s.prototype.descriptionKeys=m.emptyArray,s.create=function(o){return new s(o)},s.encode=function(o,i){if(i||(i=fe.create()),o.schemaUrl!=null&&Object.hasOwnProperty.call(o,"schemaUrl")&&i.uint32(10).string(o.schemaUrl),o.type!=null&&Object.hasOwnProperty.call(o,"type")&&i.uint32(18).string(o.type),o.idKeys!=null&&o.idKeys.length)for(var c=0;c<o.idKeys.length;++c)i.uint32(26).string(o.idKeys[c]);if(o.descriptionKeys!=null&&o.descriptionKeys.length)for(var c=0;c<o.descriptionKeys.length;++c)i.uint32(34).string(o.descriptionKeys[c]);return i},s.encodeDelimited=function(o,i){return this.encode(o,i).ldelim()},s.decode=function(o,i,c){o instanceof O||(o=O.create(o));for(var u=i===void 0?o.len:o.pos+i,l=new _.opentelemetry.proto.common.v1.EntityRef;o.pos<u;){var d=o.uint32();if(d===c)break;switch(d>>>3){case 1:{l.schemaUrl=o.string();break}case 2:{l.type=o.string();break}case 3:{l.idKeys&&l.idKeys.length||(l.idKeys=[]),l.idKeys.push(o.string());break}case 4:{l.descriptionKeys&&l.descriptionKeys.length||(l.descriptionKeys=[]),l.descriptionKeys.push(o.string());break}default:o.skipType(d&7);break}}return l},s.decodeDelimited=function(o){return o instanceof O||(o=new O(o)),this.decode(o,o.uint32())},s.verify=function(o){if(typeof o!="object"||o===null)return "object expected";if(o.schemaUrl!=null&&o.hasOwnProperty("schemaUrl")&&!m.isString(o.schemaUrl))return "schemaUrl: string expected";if(o.type!=null&&o.hasOwnProperty("type")&&!m.isString(o.type))return "type: string expected";if(o.idKeys!=null&&o.hasOwnProperty("idKeys")){if(!Array.isArray(o.idKeys))return "idKeys: array expected";for(var i=0;i<o.idKeys.length;++i)if(!m.isString(o.idKeys[i]))return "idKeys: string[] expected"}if(o.descriptionKeys!=null&&o.hasOwnProperty("descriptionKeys")){if(!Array.isArray(o.descriptionKeys))return "descriptionKeys: array expected";for(var i=0;i<o.descriptionKeys.length;++i)if(!m.isString(o.descriptionKeys[i]))return "descriptionKeys: string[] expected"}return null},s.fromObject=function(o){if(o instanceof _.opentelemetry.proto.common.v1.EntityRef)return o;var i=new _.opentelemetry.proto.common.v1.EntityRef;if(o.schemaUrl!=null&&(i.schemaUrl=String(o.schemaUrl)),o.type!=null&&(i.type=String(o.type)),o.idKeys){if(!Array.isArray(o.idKeys))throw TypeError(".opentelemetry.proto.common.v1.EntityRef.idKeys: array expected");i.idKeys=[];for(var c=0;c<o.idKeys.length;++c)i.idKeys[c]=String(o.idKeys[c]);}if(o.descriptionKeys){if(!Array.isArray(o.descriptionKeys))throw TypeError(".opentelemetry.proto.common.v1.EntityRef.descriptionKeys: array expected");i.descriptionKeys=[];for(var c=0;c<o.descriptionKeys.length;++c)i.descriptionKeys[c]=String(o.descriptionKeys[c]);}return i},s.toObject=function(o,i){i||(i={});var c={};if((i.arrays||i.defaults)&&(c.idKeys=[],c.descriptionKeys=[]),i.defaults&&(c.schemaUrl="",c.type=""),o.schemaUrl!=null&&o.hasOwnProperty("schemaUrl")&&(c.schemaUrl=o.schemaUrl),o.type!=null&&o.hasOwnProperty("type")&&(c.type=o.type),o.idKeys&&o.idKeys.length){c.idKeys=[];for(var u=0;u<o.idKeys.length;++u)c.idKeys[u]=o.idKeys[u];}if(o.descriptionKeys&&o.descriptionKeys.length){c.descriptionKeys=[];for(var u=0;u<o.descriptionKeys.length;++u)c.descriptionKeys[u]=o.descriptionKeys[u];}return c},s.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},s.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/opentelemetry.proto.common.v1.EntityRef"},s}(),n}(),r}(),e.resource=function(){var r={};return r.v1=function(){var n={};return n.Resource=function(){function s(a){if(this.attributes=[],this.entityRefs=[],a)for(var o=Object.keys(a),i=0;i<o.length;++i)a[o[i]]!=null&&(this[o[i]]=a[o[i]]);}return s.prototype.attributes=m.emptyArray,s.prototype.droppedAttributesCount=null,s.prototype.entityRefs=m.emptyArray,s.create=function(o){return new s(o)},s.encode=function(o,i){if(i||(i=fe.create()),o.attributes!=null&&o.attributes.length)for(var c=0;c<o.attributes.length;++c)_.opentelemetry.proto.common.v1.KeyValue.encode(o.attributes[c],i.uint32(10).fork()).ldelim();if(o.droppedAttributesCount!=null&&Object.hasOwnProperty.call(o,"droppedAttributesCount")&&i.uint32(16).uint32(o.droppedAttributesCount),o.entityRefs!=null&&o.entityRefs.length)for(var c=0;c<o.entityRefs.length;++c)_.opentelemetry.proto.common.v1.EntityRef.encode(o.entityRefs[c],i.uint32(26).fork()).ldelim();return i},s.encodeDelimited=function(o,i){return this.encode(o,i).ldelim()},s.decode=function(o,i,c){o instanceof O||(o=O.create(o));for(var u=i===void 0?o.len:o.pos+i,l=new _.opentelemetry.proto.resource.v1.Resource;o.pos<u;){var d=o.uint32();if(d===c)break;switch(d>>>3){case 1:{l.attributes&&l.attributes.length||(l.attributes=[]),l.attributes.push(_.opentelemetry.proto.common.v1.KeyValue.decode(o,o.uint32()));break}case 2:{l.droppedAttributesCount=o.uint32();break}case 3:{l.entityRefs&&l.entityRefs.length||(l.entityRefs=[]),l.entityRefs.push(_.opentelemetry.proto.common.v1.EntityRef.decode(o,o.uint32()));break}default:o.skipType(d&7);break}}return l},s.decodeDelimited=function(o){return o instanceof O||(o=new O(o)),this.decode(o,o.uint32())},s.verify=function(o){if(typeof o!="object"||o===null)return "object expected";if(o.attributes!=null&&o.hasOwnProperty("attributes")){if(!Array.isArray(o.attributes))return "attributes: array expected";for(var i=0;i<o.attributes.length;++i){var c=_.opentelemetry.proto.common.v1.KeyValue.verify(o.attributes[i]);if(c)return "attributes."+c}}if(o.droppedAttributesCount!=null&&o.hasOwnProperty("droppedAttributesCount")&&!m.isInteger(o.droppedAttributesCount))return "droppedAttributesCount: integer expected";if(o.entityRefs!=null&&o.hasOwnProperty("entityRefs")){if(!Array.isArray(o.entityRefs))return "entityRefs: array expected";for(var i=0;i<o.entityRefs.length;++i){var c=_.opentelemetry.proto.common.v1.EntityRef.verify(o.entityRefs[i]);if(c)return "entityRefs."+c}}return null},s.fromObject=function(o){if(o instanceof _.opentelemetry.proto.resource.v1.Resource)return o;var i=new _.opentelemetry.proto.resource.v1.Resource;if(o.attributes){if(!Array.isArray(o.attributes))throw TypeError(".opentelemetry.proto.resource.v1.Resource.attributes: array expected");i.attributes=[];for(var c=0;c<o.attributes.length;++c){if(typeof o.attributes[c]!="object")throw TypeError(".opentelemetry.proto.resource.v1.Resource.attributes: object expected");i.attributes[c]=_.opentelemetry.proto.common.v1.KeyValue.fromObject(o.attributes[c]);}}if(o.droppedAttributesCount!=null&&(i.droppedAttributesCount=o.droppedAttributesCount>>>0),o.entityRefs){if(!Array.isArray(o.entityRefs))throw TypeError(".opentelemetry.proto.resource.v1.Resource.entityRefs: array expected");i.entityRefs=[];for(var c=0;c<o.entityRefs.length;++c){if(typeof o.entityRefs[c]!="object")throw TypeError(".opentelemetry.proto.resource.v1.Resource.entityRefs: object expected");i.entityRefs[c]=_.opentelemetry.proto.common.v1.EntityRef.fromObject(o.entityRefs[c]);}}return i},s.toObject=function(o,i){i||(i={});var c={};if((i.arrays||i.defaults)&&(c.attributes=[],c.entityRefs=[]),i.defaults&&(c.droppedAttributesCount=0),o.attributes&&o.attributes.length){c.attributes=[];for(var u=0;u<o.attributes.length;++u)c.attributes[u]=_.opentelemetry.proto.common.v1.KeyValue.toObject(o.attributes[u],i);}if(o.droppedAttributesCount!=null&&o.hasOwnProperty("droppedAttributesCount")&&(c.droppedAttributesCount=o.droppedAttributesCount),o.entityRefs&&o.entityRefs.length){c.entityRefs=[];for(var u=0;u<o.entityRefs.length;++u)c.entityRefs[u]=_.opentelemetry.proto.common.v1.EntityRef.toObject(o.entityRefs[u],i);}return c},s.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},s.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/opentelemetry.proto.resource.v1.Resource"},s}(),n}(),r}(),e.trace=function(){var r={};return r.v1=function(){var n={};return n.TracesData=function(){function s(a){if(this.resourceSpans=[],a)for(var o=Object.keys(a),i=0;i<o.length;++i)a[o[i]]!=null&&(this[o[i]]=a[o[i]]);}return s.prototype.resourceSpans=m.emptyArray,s.create=function(o){return new s(o)},s.encode=function(o,i){if(i||(i=fe.create()),o.resourceSpans!=null&&o.resourceSpans.length)for(var c=0;c<o.resourceSpans.length;++c)_.opentelemetry.proto.trace.v1.ResourceSpans.encode(o.resourceSpans[c],i.uint32(10).fork()).ldelim();return i},s.encodeDelimited=function(o,i){return this.encode(o,i).ldelim()},s.decode=function(o,i,c){o instanceof O||(o=O.create(o));for(var u=i===void 0?o.len:o.pos+i,l=new _.opentelemetry.proto.trace.v1.TracesData;o.pos<u;){var d=o.uint32();if(d===c)break;switch(d>>>3){case 1:{l.resourceSpans&&l.resourceSpans.length||(l.resourceSpans=[]),l.resourceSpans.push(_.opentelemetry.proto.trace.v1.ResourceSpans.decode(o,o.uint32()));break}default:o.skipType(d&7);break}}return l},s.decodeDelimited=function(o){return o instanceof O||(o=new O(o)),this.decode(o,o.uint32())},s.verify=function(o){if(typeof o!="object"||o===null)return "object expected";if(o.resourceSpans!=null&&o.hasOwnProperty("resourceSpans")){if(!Array.isArray(o.resourceSpans))return "resourceSpans: array expected";for(var i=0;i<o.resourceSpans.length;++i){var c=_.opentelemetry.proto.trace.v1.ResourceSpans.verify(o.resourceSpans[i]);if(c)return "resourceSpans."+c}}return null},s.fromObject=function(o){if(o instanceof _.opentelemetry.proto.trace.v1.TracesData)return o;var i=new _.opentelemetry.proto.trace.v1.TracesData;if(o.resourceSpans){if(!Array.isArray(o.resourceSpans))throw TypeError(".opentelemetry.proto.trace.v1.TracesData.resourceSpans: array expected");i.resourceSpans=[];for(var c=0;c<o.resourceSpans.length;++c){if(typeof o.resourceSpans[c]!="object")throw TypeError(".opentelemetry.proto.trace.v1.TracesData.resourceSpans: object expected");i.resourceSpans[c]=_.opentelemetry.proto.trace.v1.ResourceSpans.fromObject(o.resourceSpans[c]);}}return i},s.toObject=function(o,i){i||(i={});var c={};if((i.arrays||i.defaults)&&(c.resourceSpans=[]),o.resourceSpans&&o.resourceSpans.length){c.resourceSpans=[];for(var u=0;u<o.resourceSpans.length;++u)c.resourceSpans[u]=_.opentelemetry.proto.trace.v1.ResourceSpans.toObject(o.resourceSpans[u],i);}return c},s.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},s.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/opentelemetry.proto.trace.v1.TracesData"},s}(),n.ResourceSpans=function(){function s(a){if(this.scopeSpans=[],a)for(var o=Object.keys(a),i=0;i<o.length;++i)a[o[i]]!=null&&(this[o[i]]=a[o[i]]);}return s.prototype.resource=null,s.prototype.scopeSpans=m.emptyArray,s.prototype.schemaUrl=null,s.create=function(o){return new s(o)},s.encode=function(o,i){if(i||(i=fe.create()),o.resource!=null&&Object.hasOwnProperty.call(o,"resource")&&_.opentelemetry.proto.resource.v1.Resource.encode(o.resource,i.uint32(10).fork()).ldelim(),o.scopeSpans!=null&&o.scopeSpans.length)for(var c=0;c<o.scopeSpans.length;++c)_.opentelemetry.proto.trace.v1.ScopeSpans.encode(o.scopeSpans[c],i.uint32(18).fork()).ldelim();return o.schemaUrl!=null&&Object.hasOwnProperty.call(o,"schemaUrl")&&i.uint32(26).string(o.schemaUrl),i},s.encodeDelimited=function(o,i){return this.encode(o,i).ldelim()},s.decode=function(o,i,c){o instanceof O||(o=O.create(o));for(var u=i===void 0?o.len:o.pos+i,l=new _.opentelemetry.proto.trace.v1.ResourceSpans;o.pos<u;){var d=o.uint32();if(d===c)break;switch(d>>>3){case 1:{l.resource=_.opentelemetry.proto.resource.v1.Resource.decode(o,o.uint32());break}case 2:{l.scopeSpans&&l.scopeSpans.length||(l.scopeSpans=[]),l.scopeSpans.push(_.opentelemetry.proto.trace.v1.ScopeSpans.decode(o,o.uint32()));break}case 3:{l.schemaUrl=o.string();break}default:o.skipType(d&7);break}}return l},s.decodeDelimited=function(o){return o instanceof O||(o=new O(o)),this.decode(o,o.uint32())},s.verify=function(o){if(typeof o!="object"||o===null)return "object expected";if(o.resource!=null&&o.hasOwnProperty("resource")){var i=_.opentelemetry.proto.resource.v1.Resource.verify(o.resource);if(i)return "resource."+i}if(o.scopeSpans!=null&&o.hasOwnProperty("scopeSpans")){if(!Array.isArray(o.scopeSpans))return "scopeSpans: array expected";for(var c=0;c<o.scopeSpans.length;++c){var i=_.opentelemetry.proto.trace.v1.ScopeSpans.verify(o.scopeSpans[c]);if(i)return "scopeSpans."+i}}return o.schemaUrl!=null&&o.hasOwnProperty("schemaUrl")&&!m.isString(o.schemaUrl)?"schemaUrl: string expected":null},s.fromObject=function(o){if(o instanceof _.opentelemetry.proto.trace.v1.ResourceSpans)return o;var i=new _.opentelemetry.proto.trace.v1.ResourceSpans;if(o.resource!=null){if(typeof o.resource!="object")throw TypeError(".opentelemetry.proto.trace.v1.ResourceSpans.resource: object expected");i.resource=_.opentelemetry.proto.resource.v1.Resource.fromObject(o.resource);}if(o.scopeSpans){if(!Array.isArray(o.scopeSpans))throw TypeError(".opentelemetry.proto.trace.v1.ResourceSpans.scopeSpans: array expected");i.scopeSpans=[];for(var c=0;c<o.scopeSpans.length;++c){if(typeof o.scopeSpans[c]!="object")throw TypeError(".opentelemetry.proto.trace.v1.ResourceSpans.scopeSpans: object expected");i.scopeSpans[c]=_.opentelemetry.proto.trace.v1.ScopeSpans.fromObject(o.scopeSpans[c]);}}return o.schemaUrl!=null&&(i.schemaUrl=String(o.schemaUrl)),i},s.toObject=function(o,i){i||(i={});var c={};if((i.arrays||i.defaults)&&(c.scopeSpans=[]),i.defaults&&(c.resource=null,c.schemaUrl=""),o.resource!=null&&o.hasOwnProperty("resource")&&(c.resource=_.opentelemetry.proto.resource.v1.Resource.toObject(o.resource,i)),o.scopeSpans&&o.scopeSpans.length){c.scopeSpans=[];for(var u=0;u<o.scopeSpans.length;++u)c.scopeSpans[u]=_.opentelemetry.proto.trace.v1.ScopeSpans.toObject(o.scopeSpans[u],i);}return o.schemaUrl!=null&&o.hasOwnProperty("schemaUrl")&&(c.schemaUrl=o.schemaUrl),c},s.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},s.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/opentelemetry.proto.trace.v1.ResourceSpans"},s}(),n.ScopeSpans=function(){function s(a){if(this.spans=[],a)for(var o=Object.keys(a),i=0;i<o.length;++i)a[o[i]]!=null&&(this[o[i]]=a[o[i]]);}return s.prototype.scope=null,s.prototype.spans=m.emptyArray,s.prototype.schemaUrl=null,s.create=function(o){return new s(o)},s.encode=function(o,i){if(i||(i=fe.create()),o.scope!=null&&Object.hasOwnProperty.call(o,"scope")&&_.opentelemetry.proto.common.v1.InstrumentationScope.encode(o.scope,i.uint32(10).fork()).ldelim(),o.spans!=null&&o.spans.length)for(var c=0;c<o.spans.length;++c)_.opentelemetry.proto.trace.v1.Span.encode(o.spans[c],i.uint32(18).fork()).ldelim();return o.schemaUrl!=null&&Object.hasOwnProperty.call(o,"schemaUrl")&&i.uint32(26).string(o.schemaUrl),i},s.encodeDelimited=function(o,i){return this.encode(o,i).ldelim()},s.decode=function(o,i,c){o instanceof O||(o=O.create(o));for(var u=i===void 0?o.len:o.pos+i,l=new _.opentelemetry.proto.trace.v1.ScopeSpans;o.pos<u;){var d=o.uint32();if(d===c)break;switch(d>>>3){case 1:{l.scope=_.opentelemetry.proto.common.v1.InstrumentationScope.decode(o,o.uint32());break}case 2:{l.spans&&l.spans.length||(l.spans=[]),l.spans.push(_.opentelemetry.proto.trace.v1.Span.decode(o,o.uint32()));break}case 3:{l.schemaUrl=o.string();break}default:o.skipType(d&7);break}}return l},s.decodeDelimited=function(o){return o instanceof O||(o=new O(o)),this.decode(o,o.uint32())},s.verify=function(o){if(typeof o!="object"||o===null)return "object expected";if(o.scope!=null&&o.hasOwnProperty("scope")){var i=_.opentelemetry.proto.common.v1.InstrumentationScope.verify(o.scope);if(i)return "scope."+i}if(o.spans!=null&&o.hasOwnProperty("spans")){if(!Array.isArray(o.spans))return "spans: array expected";for(var c=0;c<o.spans.length;++c){var i=_.opentelemetry.proto.trace.v1.Span.verify(o.spans[c]);if(i)return "spans."+i}}return o.schemaUrl!=null&&o.hasOwnProperty("schemaUrl")&&!m.isString(o.schemaUrl)?"schemaUrl: string expected":null},s.fromObject=function(o){if(o instanceof _.opentelemetry.proto.trace.v1.ScopeSpans)return o;var i=new _.opentelemetry.proto.trace.v1.ScopeSpans;if(o.scope!=null){if(typeof o.scope!="object")throw TypeError(".opentelemetry.proto.trace.v1.ScopeSpans.scope: object expected");i.scope=_.opentelemetry.proto.common.v1.InstrumentationScope.fromObject(o.scope);}if(o.spans){if(!Array.isArray(o.spans))throw TypeError(".opentelemetry.proto.trace.v1.ScopeSpans.spans: array expected");i.spans=[];for(var c=0;c<o.spans.length;++c){if(typeof o.spans[c]!="object")throw TypeError(".opentelemetry.proto.trace.v1.ScopeSpans.spans: object expected");i.spans[c]=_.opentelemetry.proto.trace.v1.Span.fromObject(o.spans[c]);}}return o.schemaUrl!=null&&(i.schemaUrl=String(o.schemaUrl)),i},s.toObject=function(o,i){i||(i={});var c={};if((i.arrays||i.defaults)&&(c.spans=[]),i.defaults&&(c.scope=null,c.schemaUrl=""),o.scope!=null&&o.hasOwnProperty("scope")&&(c.scope=_.opentelemetry.proto.common.v1.InstrumentationScope.toObject(o.scope,i)),o.spans&&o.spans.length){c.spans=[];for(var u=0;u<o.spans.length;++u)c.spans[u]=_.opentelemetry.proto.trace.v1.Span.toObject(o.spans[u],i);}return o.schemaUrl!=null&&o.hasOwnProperty("schemaUrl")&&(c.schemaUrl=o.schemaUrl),c},s.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},s.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/opentelemetry.proto.trace.v1.ScopeSpans"},s}(),n.Span=function(){function s(a){if(this.attributes=[],this.events=[],this.links=[],a)for(var o=Object.keys(a),i=0;i<o.length;++i)a[o[i]]!=null&&(this[o[i]]=a[o[i]]);}return s.prototype.traceId=null,s.prototype.spanId=null,s.prototype.traceState=null,s.prototype.parentSpanId=null,s.prototype.flags=null,s.prototype.name=null,s.prototype.kind=null,s.prototype.startTimeUnixNano=null,s.prototype.endTimeUnixNano=null,s.prototype.attributes=m.emptyArray,s.prototype.droppedAttributesCount=null,s.prototype.events=m.emptyArray,s.prototype.droppedEventsCount=null,s.prototype.links=m.emptyArray,s.prototype.droppedLinksCount=null,s.prototype.status=null,s.create=function(o){return new s(o)},s.encode=function(o,i){if(i||(i=fe.create()),o.traceId!=null&&Object.hasOwnProperty.call(o,"traceId")&&i.uint32(10).bytes(o.traceId),o.spanId!=null&&Object.hasOwnProperty.call(o,"spanId")&&i.uint32(18).bytes(o.spanId),o.traceState!=null&&Object.hasOwnProperty.call(o,"traceState")&&i.uint32(26).string(o.traceState),o.parentSpanId!=null&&Object.hasOwnProperty.call(o,"parentSpanId")&&i.uint32(34).bytes(o.parentSpanId),o.name!=null&&Object.hasOwnProperty.call(o,"name")&&i.uint32(42).string(o.name),o.kind!=null&&Object.hasOwnProperty.call(o,"kind")&&i.uint32(48).int32(o.kind),o.startTimeUnixNano!=null&&Object.hasOwnProperty.call(o,"startTimeUnixNano")&&i.uint32(57).fixed64(o.startTimeUnixNano),o.endTimeUnixNano!=null&&Object.hasOwnProperty.call(o,"endTimeUnixNano")&&i.uint32(65).fixed64(o.endTimeUnixNano),o.attributes!=null&&o.attributes.length)for(var c=0;c<o.attributes.length;++c)_.opentelemetry.proto.common.v1.KeyValue.encode(o.attributes[c],i.uint32(74).fork()).ldelim();if(o.droppedAttributesCount!=null&&Object.hasOwnProperty.call(o,"droppedAttributesCount")&&i.uint32(80).uint32(o.droppedAttributesCount),o.events!=null&&o.events.length)for(var c=0;c<o.events.length;++c)_.opentelemetry.proto.trace.v1.Span.Event.encode(o.events[c],i.uint32(90).fork()).ldelim();if(o.droppedEventsCount!=null&&Object.hasOwnProperty.call(o,"droppedEventsCount")&&i.uint32(96).uint32(o.droppedEventsCount),o.links!=null&&o.links.length)for(var c=0;c<o.links.length;++c)_.opentelemetry.proto.trace.v1.Span.Link.encode(o.links[c],i.uint32(106).fork()).ldelim();return o.droppedLinksCount!=null&&Object.hasOwnProperty.call(o,"droppedLinksCount")&&i.uint32(112).uint32(o.droppedLinksCount),o.status!=null&&Object.hasOwnProperty.call(o,"status")&&_.opentelemetry.proto.trace.v1.Status.encode(o.status,i.uint32(122).fork()).ldelim(),o.flags!=null&&Object.hasOwnProperty.call(o,"flags")&&i.uint32(133).fixed32(o.flags),i},s.encodeDelimited=function(o,i){return this.encode(o,i).ldelim()},s.decode=function(o,i,c){o instanceof O||(o=O.create(o));for(var u=i===void 0?o.len:o.pos+i,l=new _.opentelemetry.proto.trace.v1.Span;o.pos<u;){var d=o.uint32();if(d===c)break;switch(d>>>3){case 1:{l.traceId=o.bytes();break}case 2:{l.spanId=o.bytes();break}case 3:{l.traceState=o.string();break}case 4:{l.parentSpanId=o.bytes();break}case 16:{l.flags=o.fixed32();break}case 5:{l.name=o.string();break}case 6:{l.kind=o.int32();break}case 7:{l.startTimeUnixNano=o.fixed64();break}case 8:{l.endTimeUnixNano=o.fixed64();break}case 9:{l.attributes&&l.attributes.length||(l.attributes=[]),l.attributes.push(_.opentelemetry.proto.common.v1.KeyValue.decode(o,o.uint32()));break}case 10:{l.droppedAttributesCount=o.uint32();break}case 11:{l.events&&l.events.length||(l.events=[]),l.events.push(_.opentelemetry.proto.trace.v1.Span.Event.decode(o,o.uint32()));break}case 12:{l.droppedEventsCount=o.uint32();break}case 13:{l.links&&l.links.length||(l.links=[]),l.links.push(_.opentelemetry.proto.trace.v1.Span.Link.decode(o,o.uint32()));break}case 14:{l.droppedLinksCount=o.uint32();break}case 15:{l.status=_.opentelemetry.proto.trace.v1.Status.decode(o,o.uint32());break}default:o.skipType(d&7);break}}return l},s.decodeDelimited=function(o){return o instanceof O||(o=new O(o)),this.decode(o,o.uint32())},s.verify=function(o){if(typeof o!="object"||o===null)return "object expected";if(o.traceId!=null&&o.hasOwnProperty("traceId")&&!(o.traceId&&typeof o.traceId.length=="number"||m.isString(o.traceId)))return "traceId: buffer expected";if(o.spanId!=null&&o.hasOwnProperty("spanId")&&!(o.spanId&&typeof o.spanId.length=="number"||m.isString(o.spanId)))return "spanId: buffer expected";if(o.traceState!=null&&o.hasOwnProperty("traceState")&&!m.isString(o.traceState))return "traceState: string expected";if(o.parentSpanId!=null&&o.hasOwnProperty("parentSpanId")&&!(o.parentSpanId&&typeof o.parentSpanId.length=="number"||m.isString(o.parentSpanId)))return "parentSpanId: buffer expected";if(o.flags!=null&&o.hasOwnProperty("flags")&&!m.isInteger(o.flags))return "flags: integer expected";if(o.name!=null&&o.hasOwnProperty("name")&&!m.isString(o.name))return "name: string expected";if(o.kind!=null&&o.hasOwnProperty("kind"))switch(o.kind){default:return "kind: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:break}if(o.startTimeUnixNano!=null&&o.hasOwnProperty("startTimeUnixNano")&&!m.isInteger(o.startTimeUnixNano)&&!(o.startTimeUnixNano&&m.isInteger(o.startTimeUnixNano.low)&&m.isInteger(o.startTimeUnixNano.high)))return "startTimeUnixNano: integer|Long expected";if(o.endTimeUnixNano!=null&&o.hasOwnProperty("endTimeUnixNano")&&!m.isInteger(o.endTimeUnixNano)&&!(o.endTimeUnixNano&&m.isInteger(o.endTimeUnixNano.low)&&m.isInteger(o.endTimeUnixNano.high)))return "endTimeUnixNano: integer|Long expected";if(o.attributes!=null&&o.hasOwnProperty("attributes")){if(!Array.isArray(o.attributes))return "attributes: array expected";for(var i=0;i<o.attributes.length;++i){var c=_.opentelemetry.proto.common.v1.KeyValue.verify(o.attributes[i]);if(c)return "attributes."+c}}if(o.droppedAttributesCount!=null&&o.hasOwnProperty("droppedAttributesCount")&&!m.isInteger(o.droppedAttributesCount))return "droppedAttributesCount: integer expected";if(o.events!=null&&o.hasOwnProperty("events")){if(!Array.isArray(o.events))return "events: array expected";for(var i=0;i<o.events.length;++i){var c=_.opentelemetry.proto.trace.v1.Span.Event.verify(o.events[i]);if(c)return "events."+c}}if(o.droppedEventsCount!=null&&o.hasOwnProperty("droppedEventsCount")&&!m.isInteger(o.droppedEventsCount))return "droppedEventsCount: integer expected";if(o.links!=null&&o.hasOwnProperty("links")){if(!Array.isArray(o.links))return "links: array expected";for(var i=0;i<o.links.length;++i){var c=_.opentelemetry.proto.trace.v1.Span.Link.verify(o.links[i]);if(c)return "links."+c}}if(o.droppedLinksCount!=null&&o.hasOwnProperty("droppedLinksCount")&&!m.isInteger(o.droppedLinksCount))return "droppedLinksCount: integer expected";if(o.status!=null&&o.hasOwnProperty("status")){var c=_.opentelemetry.proto.trace.v1.Status.verify(o.status);if(c)return "status."+c}return null},s.fromObject=function(o){if(o instanceof _.opentelemetry.proto.trace.v1.Span)return o;var i=new _.opentelemetry.proto.trace.v1.Span;switch(o.traceId!=null&&(typeof o.traceId=="string"?m.base64.decode(o.traceId,i.traceId=m.newBuffer(m.base64.length(o.traceId)),0):o.traceId.length>=0&&(i.traceId=o.traceId)),o.spanId!=null&&(typeof o.spanId=="string"?m.base64.decode(o.spanId,i.spanId=m.newBuffer(m.base64.length(o.spanId)),0):o.spanId.length>=0&&(i.spanId=o.spanId)),o.traceState!=null&&(i.traceState=String(o.traceState)),o.parentSpanId!=null&&(typeof o.parentSpanId=="string"?m.base64.decode(o.parentSpanId,i.parentSpanId=m.newBuffer(m.base64.length(o.parentSpanId)),0):o.parentSpanId.length>=0&&(i.parentSpanId=o.parentSpanId)),o.flags!=null&&(i.flags=o.flags>>>0),o.name!=null&&(i.name=String(o.name)),o.kind){default:if(typeof o.kind=="number"){i.kind=o.kind;break}break;case "SPAN_KIND_UNSPECIFIED":case 0:i.kind=0;break;case "SPAN_KIND_INTERNAL":case 1:i.kind=1;break;case "SPAN_KIND_SERVER":case 2:i.kind=2;break;case "SPAN_KIND_CLIENT":case 3:i.kind=3;break;case "SPAN_KIND_PRODUCER":case 4:i.kind=4;break;case "SPAN_KIND_CONSUMER":case 5:i.kind=5;break}if(o.startTimeUnixNano!=null&&(m.Long?(i.startTimeUnixNano=m.Long.fromValue(o.startTimeUnixNano)).unsigned=false:typeof o.startTimeUnixNano=="string"?i.startTimeUnixNano=parseInt(o.startTimeUnixNano,10):typeof o.startTimeUnixNano=="number"?i.startTimeUnixNano=o.startTimeUnixNano:typeof o.startTimeUnixNano=="object"&&(i.startTimeUnixNano=new m.LongBits(o.startTimeUnixNano.low>>>0,o.startTimeUnixNano.high>>>0).toNumber())),o.endTimeUnixNano!=null&&(m.Long?(i.endTimeUnixNano=m.Long.fromValue(o.endTimeUnixNano)).unsigned=false:typeof o.endTimeUnixNano=="string"?i.endTimeUnixNano=parseInt(o.endTimeUnixNano,10):typeof o.endTimeUnixNano=="number"?i.endTimeUnixNano=o.endTimeUnixNano:typeof o.endTimeUnixNano=="object"&&(i.endTimeUnixNano=new m.LongBits(o.endTimeUnixNano.low>>>0,o.endTimeUnixNano.high>>>0).toNumber())),o.attributes){if(!Array.isArray(o.attributes))throw TypeError(".opentelemetry.proto.trace.v1.Span.attributes: array expected");i.attributes=[];for(var c=0;c<o.attributes.length;++c){if(typeof o.attributes[c]!="object")throw TypeError(".opentelemetry.proto.trace.v1.Span.attributes: object expected");i.attributes[c]=_.opentelemetry.proto.common.v1.KeyValue.fromObject(o.attributes[c]);}}if(o.droppedAttributesCount!=null&&(i.droppedAttributesCount=o.droppedAttributesCount>>>0),o.events){if(!Array.isArray(o.events))throw TypeError(".opentelemetry.proto.trace.v1.Span.events: array expected");i.events=[];for(var c=0;c<o.events.length;++c){if(typeof o.events[c]!="object")throw TypeError(".opentelemetry.proto.trace.v1.Span.events: object expected");i.events[c]=_.opentelemetry.proto.trace.v1.Span.Event.fromObject(o.events[c]);}}if(o.droppedEventsCount!=null&&(i.droppedEventsCount=o.droppedEventsCount>>>0),o.links){if(!Array.isArray(o.links))throw TypeError(".opentelemetry.proto.trace.v1.Span.links: array expected");i.links=[];for(var c=0;c<o.links.length;++c){if(typeof o.links[c]!="object")throw TypeError(".opentelemetry.proto.trace.v1.Span.links: object expected");i.links[c]=_.opentelemetry.proto.trace.v1.Span.Link.fromObject(o.links[c]);}}if(o.droppedLinksCount!=null&&(i.droppedLinksCount=o.droppedLinksCount>>>0),o.status!=null){if(typeof o.status!="object")throw TypeError(".opentelemetry.proto.trace.v1.Span.status: object expected");i.status=_.opentelemetry.proto.trace.v1.Status.fromObject(o.status);}return i},s.toObject=function(o,i){i||(i={});var c={};if((i.arrays||i.defaults)&&(c.attributes=[],c.events=[],c.links=[]),i.defaults){if(i.bytes===String?c.traceId="":(c.traceId=[],i.bytes!==Array&&(c.traceId=m.newBuffer(c.traceId))),i.bytes===String?c.spanId="":(c.spanId=[],i.bytes!==Array&&(c.spanId=m.newBuffer(c.spanId))),c.traceState="",i.bytes===String?c.parentSpanId="":(c.parentSpanId=[],i.bytes!==Array&&(c.parentSpanId=m.newBuffer(c.parentSpanId))),c.name="",c.kind=i.enums===String?"SPAN_KIND_UNSPECIFIED":0,m.Long){var u=new m.Long(0,0,false);c.startTimeUnixNano=i.longs===String?u.toString():i.longs===Number?u.toNumber():u;}else c.startTimeUnixNano=i.longs===String?"0":0;if(m.Long){var u=new m.Long(0,0,false);c.endTimeUnixNano=i.longs===String?u.toString():i.longs===Number?u.toNumber():u;}else c.endTimeUnixNano=i.longs===String?"0":0;c.droppedAttributesCount=0,c.droppedEventsCount=0,c.droppedLinksCount=0,c.status=null,c.flags=0;}if(o.traceId!=null&&o.hasOwnProperty("traceId")&&(c.traceId=i.bytes===String?m.base64.encode(o.traceId,0,o.traceId.length):i.bytes===Array?Array.prototype.slice.call(o.traceId):o.traceId),o.spanId!=null&&o.hasOwnProperty("spanId")&&(c.spanId=i.bytes===String?m.base64.encode(o.spanId,0,o.spanId.length):i.bytes===Array?Array.prototype.slice.call(o.spanId):o.spanId),o.traceState!=null&&o.hasOwnProperty("traceState")&&(c.traceState=o.traceState),o.parentSpanId!=null&&o.hasOwnProperty("parentSpanId")&&(c.parentSpanId=i.bytes===String?m.base64.encode(o.parentSpanId,0,o.parentSpanId.length):i.bytes===Array?Array.prototype.slice.call(o.parentSpanId):o.parentSpanId),o.name!=null&&o.hasOwnProperty("name")&&(c.name=o.name),o.kind!=null&&o.hasOwnProperty("kind")&&(c.kind=i.enums===String?_.opentelemetry.proto.trace.v1.Span.SpanKind[o.kind]===void 0?o.kind:_.opentelemetry.proto.trace.v1.Span.SpanKind[o.kind]:o.kind),o.startTimeUnixNano!=null&&o.hasOwnProperty("startTimeUnixNano")&&(typeof o.startTimeUnixNano=="number"?c.startTimeUnixNano=i.longs===String?String(o.startTimeUnixNano):o.startTimeUnixNano:c.startTimeUnixNano=i.longs===String?m.Long.prototype.toString.call(o.startTimeUnixNano):i.longs===Number?new m.LongBits(o.startTimeUnixNano.low>>>0,o.startTimeUnixNano.high>>>0).toNumber():o.startTimeUnixNano),o.endTimeUnixNano!=null&&o.hasOwnProperty("endTimeUnixNano")&&(typeof o.endTimeUnixNano=="number"?c.endTimeUnixNano=i.longs===String?String(o.endTimeUnixNano):o.endTimeUnixNano:c.endTimeUnixNano=i.longs===String?m.Long.prototype.toString.call(o.endTimeUnixNano):i.longs===Number?new m.LongBits(o.endTimeUnixNano.low>>>0,o.endTimeUnixNano.high>>>0).toNumber():o.endTimeUnixNano),o.attributes&&o.attributes.length){c.attributes=[];for(var l=0;l<o.attributes.length;++l)c.attributes[l]=_.opentelemetry.proto.common.v1.KeyValue.toObject(o.attributes[l],i);}if(o.droppedAttributesCount!=null&&o.hasOwnProperty("droppedAttributesCount")&&(c.droppedAttributesCount=o.droppedAttributesCount),o.events&&o.events.length){c.events=[];for(var l=0;l<o.events.length;++l)c.events[l]=_.opentelemetry.proto.trace.v1.Span.Event.toObject(o.events[l],i);}if(o.droppedEventsCount!=null&&o.hasOwnProperty("droppedEventsCount")&&(c.droppedEventsCount=o.droppedEventsCount),o.links&&o.links.length){c.links=[];for(var l=0;l<o.links.length;++l)c.links[l]=_.opentelemetry.proto.trace.v1.Span.Link.toObject(o.links[l],i);}return o.droppedLinksCount!=null&&o.hasOwnProperty("droppedLinksCount")&&(c.droppedLinksCount=o.droppedLinksCount),o.status!=null&&o.hasOwnProperty("status")&&(c.status=_.opentelemetry.proto.trace.v1.Status.toObject(o.status,i)),o.flags!=null&&o.hasOwnProperty("flags")&&(c.flags=o.flags),c},s.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},s.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/opentelemetry.proto.trace.v1.Span"},s.SpanKind=function(){var a={},o=Object.create(a);return o[a[0]="SPAN_KIND_UNSPECIFIED"]=0,o[a[1]="SPAN_KIND_INTERNAL"]=1,o[a[2]="SPAN_KIND_SERVER"]=2,o[a[3]="SPAN_KIND_CLIENT"]=3,o[a[4]="SPAN_KIND_PRODUCER"]=4,o[a[5]="SPAN_KIND_CONSUMER"]=5,o}(),s.Event=function(){function a(o){if(this.attributes=[],o)for(var i=Object.keys(o),c=0;c<i.length;++c)o[i[c]]!=null&&(this[i[c]]=o[i[c]]);}return a.prototype.timeUnixNano=null,a.prototype.name=null,a.prototype.attributes=m.emptyArray,a.prototype.droppedAttributesCount=null,a.create=function(i){return new a(i)},a.encode=function(i,c){if(c||(c=fe.create()),i.timeUnixNano!=null&&Object.hasOwnProperty.call(i,"timeUnixNano")&&c.uint32(9).fixed64(i.timeUnixNano),i.name!=null&&Object.hasOwnProperty.call(i,"name")&&c.uint32(18).string(i.name),i.attributes!=null&&i.attributes.length)for(var u=0;u<i.attributes.length;++u)_.opentelemetry.proto.common.v1.KeyValue.encode(i.attributes[u],c.uint32(26).fork()).ldelim();return i.droppedAttributesCount!=null&&Object.hasOwnProperty.call(i,"droppedAttributesCount")&&c.uint32(32).uint32(i.droppedAttributesCount),c},a.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},a.decode=function(i,c,u){i instanceof O||(i=O.create(i));for(var l=c===void 0?i.len:i.pos+c,d=new _.opentelemetry.proto.trace.v1.Span.Event;i.pos<l;){var p=i.uint32();if(p===u)break;switch(p>>>3){case 1:{d.timeUnixNano=i.fixed64();break}case 2:{d.name=i.string();break}case 3:{d.attributes&&d.attributes.length||(d.attributes=[]),d.attributes.push(_.opentelemetry.proto.common.v1.KeyValue.decode(i,i.uint32()));break}case 4:{d.droppedAttributesCount=i.uint32();break}default:i.skipType(p&7);break}}return d},a.decodeDelimited=function(i){return i instanceof O||(i=new O(i)),this.decode(i,i.uint32())},a.verify=function(i){if(typeof i!="object"||i===null)return "object expected";if(i.timeUnixNano!=null&&i.hasOwnProperty("timeUnixNano")&&!m.isInteger(i.timeUnixNano)&&!(i.timeUnixNano&&m.isInteger(i.timeUnixNano.low)&&m.isInteger(i.timeUnixNano.high)))return "timeUnixNano: integer|Long expected";if(i.name!=null&&i.hasOwnProperty("name")&&!m.isString(i.name))return "name: string expected";if(i.attributes!=null&&i.hasOwnProperty("attributes")){if(!Array.isArray(i.attributes))return "attributes: array expected";for(var c=0;c<i.attributes.length;++c){var u=_.opentelemetry.proto.common.v1.KeyValue.verify(i.attributes[c]);if(u)return "attributes."+u}}return i.droppedAttributesCount!=null&&i.hasOwnProperty("droppedAttributesCount")&&!m.isInteger(i.droppedAttributesCount)?"droppedAttributesCount: integer expected":null},a.fromObject=function(i){if(i instanceof _.opentelemetry.proto.trace.v1.Span.Event)return i;var c=new _.opentelemetry.proto.trace.v1.Span.Event;if(i.timeUnixNano!=null&&(m.Long?(c.timeUnixNano=m.Long.fromValue(i.timeUnixNano)).unsigned=false:typeof i.timeUnixNano=="string"?c.timeUnixNano=parseInt(i.timeUnixNano,10):typeof i.timeUnixNano=="number"?c.timeUnixNano=i.timeUnixNano:typeof i.timeUnixNano=="object"&&(c.timeUnixNano=new m.LongBits(i.timeUnixNano.low>>>0,i.timeUnixNano.high>>>0).toNumber())),i.name!=null&&(c.name=String(i.name)),i.attributes){if(!Array.isArray(i.attributes))throw TypeError(".opentelemetry.proto.trace.v1.Span.Event.attributes: array expected");c.attributes=[];for(var u=0;u<i.attributes.length;++u){if(typeof i.attributes[u]!="object")throw TypeError(".opentelemetry.proto.trace.v1.Span.Event.attributes: object expected");c.attributes[u]=_.opentelemetry.proto.common.v1.KeyValue.fromObject(i.attributes[u]);}}return i.droppedAttributesCount!=null&&(c.droppedAttributesCount=i.droppedAttributesCount>>>0),c},a.toObject=function(i,c){c||(c={});var u={};if((c.arrays||c.defaults)&&(u.attributes=[]),c.defaults){if(m.Long){var l=new m.Long(0,0,false);u.timeUnixNano=c.longs===String?l.toString():c.longs===Number?l.toNumber():l;}else u.timeUnixNano=c.longs===String?"0":0;u.name="",u.droppedAttributesCount=0;}if(i.timeUnixNano!=null&&i.hasOwnProperty("timeUnixNano")&&(typeof i.timeUnixNano=="number"?u.timeUnixNano=c.longs===String?String(i.timeUnixNano):i.timeUnixNano:u.timeUnixNano=c.longs===String?m.Long.prototype.toString.call(i.timeUnixNano):c.longs===Number?new m.LongBits(i.timeUnixNano.low>>>0,i.timeUnixNano.high>>>0).toNumber():i.timeUnixNano),i.name!=null&&i.hasOwnProperty("name")&&(u.name=i.name),i.attributes&&i.attributes.length){u.attributes=[];for(var d=0;d<i.attributes.length;++d)u.attributes[d]=_.opentelemetry.proto.common.v1.KeyValue.toObject(i.attributes[d],c);}return i.droppedAttributesCount!=null&&i.hasOwnProperty("droppedAttributesCount")&&(u.droppedAttributesCount=i.droppedAttributesCount),u},a.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},a.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/opentelemetry.proto.trace.v1.Span.Event"},a}(),s.Link=function(){function a(o){if(this.attributes=[],o)for(var i=Object.keys(o),c=0;c<i.length;++c)o[i[c]]!=null&&(this[i[c]]=o[i[c]]);}return a.prototype.traceId=null,a.prototype.spanId=null,a.prototype.traceState=null,a.prototype.attributes=m.emptyArray,a.prototype.droppedAttributesCount=null,a.prototype.flags=null,a.create=function(i){return new a(i)},a.encode=function(i,c){if(c||(c=fe.create()),i.traceId!=null&&Object.hasOwnProperty.call(i,"traceId")&&c.uint32(10).bytes(i.traceId),i.spanId!=null&&Object.hasOwnProperty.call(i,"spanId")&&c.uint32(18).bytes(i.spanId),i.traceState!=null&&Object.hasOwnProperty.call(i,"traceState")&&c.uint32(26).string(i.traceState),i.attributes!=null&&i.attributes.length)for(var u=0;u<i.attributes.length;++u)_.opentelemetry.proto.common.v1.KeyValue.encode(i.attributes[u],c.uint32(34).fork()).ldelim();return i.droppedAttributesCount!=null&&Object.hasOwnProperty.call(i,"droppedAttributesCount")&&c.uint32(40).uint32(i.droppedAttributesCount),i.flags!=null&&Object.hasOwnProperty.call(i,"flags")&&c.uint32(53).fixed32(i.flags),c},a.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},a.decode=function(i,c,u){i instanceof O||(i=O.create(i));for(var l=c===void 0?i.len:i.pos+c,d=new _.opentelemetry.proto.trace.v1.Span.Link;i.pos<l;){var p=i.uint32();if(p===u)break;switch(p>>>3){case 1:{d.traceId=i.bytes();break}case 2:{d.spanId=i.bytes();break}case 3:{d.traceState=i.string();break}case 4:{d.attributes&&d.attributes.length||(d.attributes=[]),d.attributes.push(_.opentelemetry.proto.common.v1.KeyValue.decode(i,i.uint32()));break}case 5:{d.droppedAttributesCount=i.uint32();break}case 6:{d.flags=i.fixed32();break}default:i.skipType(p&7);break}}return d},a.decodeDelimited=function(i){return i instanceof O||(i=new O(i)),this.decode(i,i.uint32())},a.verify=function(i){if(typeof i!="object"||i===null)return "object expected";if(i.traceId!=null&&i.hasOwnProperty("traceId")&&!(i.traceId&&typeof i.traceId.length=="number"||m.isString(i.traceId)))return "traceId: buffer expected";if(i.spanId!=null&&i.hasOwnProperty("spanId")&&!(i.spanId&&typeof i.spanId.length=="number"||m.isString(i.spanId)))return "spanId: buffer expected";if(i.traceState!=null&&i.hasOwnProperty("traceState")&&!m.isString(i.traceState))return "traceState: string expected";if(i.attributes!=null&&i.hasOwnProperty("attributes")){if(!Array.isArray(i.attributes))return "attributes: array expected";for(var c=0;c<i.attributes.length;++c){var u=_.opentelemetry.proto.common.v1.KeyValue.verify(i.attributes[c]);if(u)return "attributes."+u}}return i.droppedAttributesCount!=null&&i.hasOwnProperty("droppedAttributesCount")&&!m.isInteger(i.droppedAttributesCount)?"droppedAttributesCount: integer expected":i.flags!=null&&i.hasOwnProperty("flags")&&!m.isInteger(i.flags)?"flags: integer expected":null},a.fromObject=function(i){if(i instanceof _.opentelemetry.proto.trace.v1.Span.Link)return i;var c=new _.opentelemetry.proto.trace.v1.Span.Link;if(i.traceId!=null&&(typeof i.traceId=="string"?m.base64.decode(i.traceId,c.traceId=m.newBuffer(m.base64.length(i.traceId)),0):i.traceId.length>=0&&(c.traceId=i.traceId)),i.spanId!=null&&(typeof i.spanId=="string"?m.base64.decode(i.spanId,c.spanId=m.newBuffer(m.base64.length(i.spanId)),0):i.spanId.length>=0&&(c.spanId=i.spanId)),i.traceState!=null&&(c.traceState=String(i.traceState)),i.attributes){if(!Array.isArray(i.attributes))throw TypeError(".opentelemetry.proto.trace.v1.Span.Link.attributes: array expected");c.attributes=[];for(var u=0;u<i.attributes.length;++u){if(typeof i.attributes[u]!="object")throw TypeError(".opentelemetry.proto.trace.v1.Span.Link.attributes: object expected");c.attributes[u]=_.opentelemetry.proto.common.v1.KeyValue.fromObject(i.attributes[u]);}}return i.droppedAttributesCount!=null&&(c.droppedAttributesCount=i.droppedAttributesCount>>>0),i.flags!=null&&(c.flags=i.flags>>>0),c},a.toObject=function(i,c){c||(c={});var u={};if((c.arrays||c.defaults)&&(u.attributes=[]),c.defaults&&(c.bytes===String?u.traceId="":(u.traceId=[],c.bytes!==Array&&(u.traceId=m.newBuffer(u.traceId))),c.bytes===String?u.spanId="":(u.spanId=[],c.bytes!==Array&&(u.spanId=m.newBuffer(u.spanId))),u.traceState="",u.droppedAttributesCount=0,u.flags=0),i.traceId!=null&&i.hasOwnProperty("traceId")&&(u.traceId=c.bytes===String?m.base64.encode(i.traceId,0,i.traceId.length):c.bytes===Array?Array.prototype.slice.call(i.traceId):i.traceId),i.spanId!=null&&i.hasOwnProperty("spanId")&&(u.spanId=c.bytes===String?m.base64.encode(i.spanId,0,i.spanId.length):c.bytes===Array?Array.prototype.slice.call(i.spanId):i.spanId),i.traceState!=null&&i.hasOwnProperty("traceState")&&(u.traceState=i.traceState),i.attributes&&i.attributes.length){u.attributes=[];for(var l=0;l<i.attributes.length;++l)u.attributes[l]=_.opentelemetry.proto.common.v1.KeyValue.toObject(i.attributes[l],c);}return i.droppedAttributesCount!=null&&i.hasOwnProperty("droppedAttributesCount")&&(u.droppedAttributesCount=i.droppedAttributesCount),i.flags!=null&&i.hasOwnProperty("flags")&&(u.flags=i.flags),u},a.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},a.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/opentelemetry.proto.trace.v1.Span.Link"},a}(),s}(),n.Status=function(){function s(a){if(a)for(var o=Object.keys(a),i=0;i<o.length;++i)a[o[i]]!=null&&(this[o[i]]=a[o[i]]);}return s.prototype.message=null,s.prototype.code=null,s.create=function(o){return new s(o)},s.encode=function(o,i){return i||(i=fe.create()),o.message!=null&&Object.hasOwnProperty.call(o,"message")&&i.uint32(18).string(o.message),o.code!=null&&Object.hasOwnProperty.call(o,"code")&&i.uint32(24).int32(o.code),i},s.encodeDelimited=function(o,i){return this.encode(o,i).ldelim()},s.decode=function(o,i,c){o instanceof O||(o=O.create(o));for(var u=i===void 0?o.len:o.pos+i,l=new _.opentelemetry.proto.trace.v1.Status;o.pos<u;){var d=o.uint32();if(d===c)break;switch(d>>>3){case 2:{l.message=o.string();break}case 3:{l.code=o.int32();break}default:o.skipType(d&7);break}}return l},s.decodeDelimited=function(o){return o instanceof O||(o=new O(o)),this.decode(o,o.uint32())},s.verify=function(o){if(typeof o!="object"||o===null)return "object expected";if(o.message!=null&&o.hasOwnProperty("message")&&!m.isString(o.message))return "message: string expected";if(o.code!=null&&o.hasOwnProperty("code"))switch(o.code){default:return "code: enum value expected";case 0:case 1:case 2:break}return null},s.fromObject=function(o){if(o instanceof _.opentelemetry.proto.trace.v1.Status)return o;var i=new _.opentelemetry.proto.trace.v1.Status;switch(o.message!=null&&(i.message=String(o.message)),o.code){default:if(typeof o.code=="number"){i.code=o.code;break}break;case "STATUS_CODE_UNSET":case 0:i.code=0;break;case "STATUS_CODE_OK":case 1:i.code=1;break;case "STATUS_CODE_ERROR":case 2:i.code=2;break}return i},s.toObject=function(o,i){i||(i={});var c={};return i.defaults&&(c.message="",c.code=i.enums===String?"STATUS_CODE_UNSET":0),o.message!=null&&o.hasOwnProperty("message")&&(c.message=o.message),o.code!=null&&o.hasOwnProperty("code")&&(c.code=i.enums===String?_.opentelemetry.proto.trace.v1.Status.StatusCode[o.code]===void 0?o.code:_.opentelemetry.proto.trace.v1.Status.StatusCode[o.code]:o.code),c},s.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},s.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/opentelemetry.proto.trace.v1.Status"},s.StatusCode=function(){var a={},o=Object.create(a);return o[a[0]="STATUS_CODE_UNSET"]=0,o[a[1]="STATUS_CODE_OK"]=1,o[a[2]="STATUS_CODE_ERROR"]=2,o}(),s}(),n.SpanFlags=function(){var s={},a=Object.create(s);return a[s[0]="SPAN_FLAGS_DO_NOT_USE"]=0,a[s[255]="SPAN_FLAGS_TRACE_FLAGS_MASK"]=255,a[s[256]="SPAN_FLAGS_CONTEXT_HAS_IS_REMOTE_MASK"]=256,a[s[512]="SPAN_FLAGS_CONTEXT_IS_REMOTE_MASK"]=512,a}(),n}(),r}(),e.collector=function(){var r={};return r.trace=function(){var n={};return n.v1=function(){var s={};return s.TraceService=function(){function a(o,i,c){re.rpc.Service.call(this,o,i,c);}return (a.prototype=Object.create(re.rpc.Service.prototype)).constructor=a,a.create=function(i,c,u){return new this(i,c,u)},Object.defineProperty(a.prototype.export=function o(i,c){return this.rpcCall(o,_.opentelemetry.proto.collector.trace.v1.ExportTraceServiceRequest,_.opentelemetry.proto.collector.trace.v1.ExportTraceServiceResponse,i,c)},"name",{value:"Export"}),a}(),s.ExportTraceServiceRequest=function(){function a(o){if(this.resourceSpans=[],o)for(var i=Object.keys(o),c=0;c<i.length;++c)o[i[c]]!=null&&(this[i[c]]=o[i[c]]);}return a.prototype.resourceSpans=m.emptyArray,a.create=function(i){return new a(i)},a.encode=function(i,c){if(c||(c=fe.create()),i.resourceSpans!=null&&i.resourceSpans.length)for(var u=0;u<i.resourceSpans.length;++u)_.opentelemetry.proto.trace.v1.ResourceSpans.encode(i.resourceSpans[u],c.uint32(10).fork()).ldelim();return c},a.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},a.decode=function(i,c,u){i instanceof O||(i=O.create(i));for(var l=c===void 0?i.len:i.pos+c,d=new _.opentelemetry.proto.collector.trace.v1.ExportTraceServiceRequest;i.pos<l;){var p=i.uint32();if(p===u)break;switch(p>>>3){case 1:{d.resourceSpans&&d.resourceSpans.length||(d.resourceSpans=[]),d.resourceSpans.push(_.opentelemetry.proto.trace.v1.ResourceSpans.decode(i,i.uint32()));break}default:i.skipType(p&7);break}}return d},a.decodeDelimited=function(i){return i instanceof O||(i=new O(i)),this.decode(i,i.uint32())},a.verify=function(i){if(typeof i!="object"||i===null)return "object expected";if(i.resourceSpans!=null&&i.hasOwnProperty("resourceSpans")){if(!Array.isArray(i.resourceSpans))return "resourceSpans: array expected";for(var c=0;c<i.resourceSpans.length;++c){var u=_.opentelemetry.proto.trace.v1.ResourceSpans.verify(i.resourceSpans[c]);if(u)return "resourceSpans."+u}}return null},a.fromObject=function(i){if(i instanceof _.opentelemetry.proto.collector.trace.v1.ExportTraceServiceRequest)return i;var c=new _.opentelemetry.proto.collector.trace.v1.ExportTraceServiceRequest;if(i.resourceSpans){if(!Array.isArray(i.resourceSpans))throw TypeError(".opentelemetry.proto.collector.trace.v1.ExportTraceServiceRequest.resourceSpans: array expected");c.resourceSpans=[];for(var u=0;u<i.resourceSpans.length;++u){if(typeof i.resourceSpans[u]!="object")throw TypeError(".opentelemetry.proto.collector.trace.v1.ExportTraceServiceRequest.resourceSpans: object expected");c.resourceSpans[u]=_.opentelemetry.proto.trace.v1.ResourceSpans.fromObject(i.resourceSpans[u]);}}return c},a.toObject=function(i,c){c||(c={});var u={};if((c.arrays||c.defaults)&&(u.resourceSpans=[]),i.resourceSpans&&i.resourceSpans.length){u.resourceSpans=[];for(var l=0;l<i.resourceSpans.length;++l)u.resourceSpans[l]=_.opentelemetry.proto.trace.v1.ResourceSpans.toObject(i.resourceSpans[l],c);}return u},a.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},a.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/opentelemetry.proto.collector.trace.v1.ExportTraceServiceRequest"},a}(),s.ExportTraceServiceResponse=function(){function a(o){if(o)for(var i=Object.keys(o),c=0;c<i.length;++c)o[i[c]]!=null&&(this[i[c]]=o[i[c]]);}return a.prototype.partialSuccess=null,a.create=function(i){return new a(i)},a.encode=function(i,c){return c||(c=fe.create()),i.partialSuccess!=null&&Object.hasOwnProperty.call(i,"partialSuccess")&&_.opentelemetry.proto.collector.trace.v1.ExportTracePartialSuccess.encode(i.partialSuccess,c.uint32(10).fork()).ldelim(),c},a.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},a.decode=function(i,c,u){i instanceof O||(i=O.create(i));for(var l=c===void 0?i.len:i.pos+c,d=new _.opentelemetry.proto.collector.trace.v1.ExportTraceServiceResponse;i.pos<l;){var p=i.uint32();if(p===u)break;switch(p>>>3){case 1:{d.partialSuccess=_.opentelemetry.proto.collector.trace.v1.ExportTracePartialSuccess.decode(i,i.uint32());break}default:i.skipType(p&7);break}}return d},a.decodeDelimited=function(i){return i instanceof O||(i=new O(i)),this.decode(i,i.uint32())},a.verify=function(i){if(typeof i!="object"||i===null)return "object expected";if(i.partialSuccess!=null&&i.hasOwnProperty("partialSuccess")){var c=_.opentelemetry.proto.collector.trace.v1.ExportTracePartialSuccess.verify(i.partialSuccess);if(c)return "partialSuccess."+c}return null},a.fromObject=function(i){if(i instanceof _.opentelemetry.proto.collector.trace.v1.ExportTraceServiceResponse)return i;var c=new _.opentelemetry.proto.collector.trace.v1.ExportTraceServiceResponse;if(i.partialSuccess!=null){if(typeof i.partialSuccess!="object")throw TypeError(".opentelemetry.proto.collector.trace.v1.ExportTraceServiceResponse.partialSuccess: object expected");c.partialSuccess=_.opentelemetry.proto.collector.trace.v1.ExportTracePartialSuccess.fromObject(i.partialSuccess);}return c},a.toObject=function(i,c){c||(c={});var u={};return c.defaults&&(u.partialSuccess=null),i.partialSuccess!=null&&i.hasOwnProperty("partialSuccess")&&(u.partialSuccess=_.opentelemetry.proto.collector.trace.v1.ExportTracePartialSuccess.toObject(i.partialSuccess,c)),u},a.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},a.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/opentelemetry.proto.collector.trace.v1.ExportTraceServiceResponse"},a}(),s.ExportTracePartialSuccess=function(){function a(o){if(o)for(var i=Object.keys(o),c=0;c<i.length;++c)o[i[c]]!=null&&(this[i[c]]=o[i[c]]);}return a.prototype.rejectedSpans=null,a.prototype.errorMessage=null,a.create=function(i){return new a(i)},a.encode=function(i,c){return c||(c=fe.create()),i.rejectedSpans!=null&&Object.hasOwnProperty.call(i,"rejectedSpans")&&c.uint32(8).int64(i.rejectedSpans),i.errorMessage!=null&&Object.hasOwnProperty.call(i,"errorMessage")&&c.uint32(18).string(i.errorMessage),c},a.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},a.decode=function(i,c,u){i instanceof O||(i=O.create(i));for(var l=c===void 0?i.len:i.pos+c,d=new _.opentelemetry.proto.collector.trace.v1.ExportTracePartialSuccess;i.pos<l;){var p=i.uint32();if(p===u)break;switch(p>>>3){case 1:{d.rejectedSpans=i.int64();break}case 2:{d.errorMessage=i.string();break}default:i.skipType(p&7);break}}return d},a.decodeDelimited=function(i){return i instanceof O||(i=new O(i)),this.decode(i,i.uint32())},a.verify=function(i){return typeof i!="object"||i===null?"object expected":i.rejectedSpans!=null&&i.hasOwnProperty("rejectedSpans")&&!m.isInteger(i.rejectedSpans)&&!(i.rejectedSpans&&m.isInteger(i.rejectedSpans.low)&&m.isInteger(i.rejectedSpans.high))?"rejectedSpans: integer|Long expected":i.errorMessage!=null&&i.hasOwnProperty("errorMessage")&&!m.isString(i.errorMessage)?"errorMessage: string expected":null},a.fromObject=function(i){if(i instanceof _.opentelemetry.proto.collector.trace.v1.ExportTracePartialSuccess)return i;var c=new _.opentelemetry.proto.collector.trace.v1.ExportTracePartialSuccess;return i.rejectedSpans!=null&&(m.Long?(c.rejectedSpans=m.Long.fromValue(i.rejectedSpans)).unsigned=false:typeof i.rejectedSpans=="string"?c.rejectedSpans=parseInt(i.rejectedSpans,10):typeof i.rejectedSpans=="number"?c.rejectedSpans=i.rejectedSpans:typeof i.rejectedSpans=="object"&&(c.rejectedSpans=new m.LongBits(i.rejectedSpans.low>>>0,i.rejectedSpans.high>>>0).toNumber())),i.errorMessage!=null&&(c.errorMessage=String(i.errorMessage)),c},a.toObject=function(i,c){c||(c={});var u={};if(c.defaults){if(m.Long){var l=new m.Long(0,0,false);u.rejectedSpans=c.longs===String?l.toString():c.longs===Number?l.toNumber():l;}else u.rejectedSpans=c.longs===String?"0":0;u.errorMessage="";}return i.rejectedSpans!=null&&i.hasOwnProperty("rejectedSpans")&&(typeof i.rejectedSpans=="number"?u.rejectedSpans=c.longs===String?String(i.rejectedSpans):i.rejectedSpans:u.rejectedSpans=c.longs===String?m.Long.prototype.toString.call(i.rejectedSpans):c.longs===Number?new m.LongBits(i.rejectedSpans.low>>>0,i.rejectedSpans.high>>>0).toNumber():i.rejectedSpans),i.errorMessage!=null&&i.hasOwnProperty("errorMessage")&&(u.errorMessage=i.errorMessage),u},a.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},a.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/opentelemetry.proto.collector.trace.v1.ExportTracePartialSuccess"},a}(),s}(),n}(),r.metrics=function(){var n={};return n.v1=function(){var s={};return s.MetricsService=function(){function a(o,i,c){re.rpc.Service.call(this,o,i,c);}return (a.prototype=Object.create(re.rpc.Service.prototype)).constructor=a,a.create=function(i,c,u){return new this(i,c,u)},Object.defineProperty(a.prototype.export=function o(i,c){return this.rpcCall(o,_.opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceRequest,_.opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceResponse,i,c)},"name",{value:"Export"}),a}(),s.ExportMetricsServiceRequest=function(){function a(o){if(this.resourceMetrics=[],o)for(var i=Object.keys(o),c=0;c<i.length;++c)o[i[c]]!=null&&(this[i[c]]=o[i[c]]);}return a.prototype.resourceMetrics=m.emptyArray,a.create=function(i){return new a(i)},a.encode=function(i,c){if(c||(c=fe.create()),i.resourceMetrics!=null&&i.resourceMetrics.length)for(var u=0;u<i.resourceMetrics.length;++u)_.opentelemetry.proto.metrics.v1.ResourceMetrics.encode(i.resourceMetrics[u],c.uint32(10).fork()).ldelim();return c},a.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},a.decode=function(i,c,u){i instanceof O||(i=O.create(i));for(var l=c===void 0?i.len:i.pos+c,d=new _.opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceRequest;i.pos<l;){var p=i.uint32();if(p===u)break;switch(p>>>3){case 1:{d.resourceMetrics&&d.resourceMetrics.length||(d.resourceMetrics=[]),d.resourceMetrics.push(_.opentelemetry.proto.metrics.v1.ResourceMetrics.decode(i,i.uint32()));break}default:i.skipType(p&7);break}}return d},a.decodeDelimited=function(i){return i instanceof O||(i=new O(i)),this.decode(i,i.uint32())},a.verify=function(i){if(typeof i!="object"||i===null)return "object expected";if(i.resourceMetrics!=null&&i.hasOwnProperty("resourceMetrics")){if(!Array.isArray(i.resourceMetrics))return "resourceMetrics: array expected";for(var c=0;c<i.resourceMetrics.length;++c){var u=_.opentelemetry.proto.metrics.v1.ResourceMetrics.verify(i.resourceMetrics[c]);if(u)return "resourceMetrics."+u}}return null},a.fromObject=function(i){if(i instanceof _.opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceRequest)return i;var c=new _.opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceRequest;if(i.resourceMetrics){if(!Array.isArray(i.resourceMetrics))throw TypeError(".opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceRequest.resourceMetrics: array expected");c.resourceMetrics=[];for(var u=0;u<i.resourceMetrics.length;++u){if(typeof i.resourceMetrics[u]!="object")throw TypeError(".opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceRequest.resourceMetrics: object expected");c.resourceMetrics[u]=_.opentelemetry.proto.metrics.v1.ResourceMetrics.fromObject(i.resourceMetrics[u]);}}return c},a.toObject=function(i,c){c||(c={});var u={};if((c.arrays||c.defaults)&&(u.resourceMetrics=[]),i.resourceMetrics&&i.resourceMetrics.length){u.resourceMetrics=[];for(var l=0;l<i.resourceMetrics.length;++l)u.resourceMetrics[l]=_.opentelemetry.proto.metrics.v1.ResourceMetrics.toObject(i.resourceMetrics[l],c);}return u},a.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},a.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceRequest"},a}(),s.ExportMetricsServiceResponse=function(){function a(o){if(o)for(var i=Object.keys(o),c=0;c<i.length;++c)o[i[c]]!=null&&(this[i[c]]=o[i[c]]);}return a.prototype.partialSuccess=null,a.create=function(i){return new a(i)},a.encode=function(i,c){return c||(c=fe.create()),i.partialSuccess!=null&&Object.hasOwnProperty.call(i,"partialSuccess")&&_.opentelemetry.proto.collector.metrics.v1.ExportMetricsPartialSuccess.encode(i.partialSuccess,c.uint32(10).fork()).ldelim(),c},a.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},a.decode=function(i,c,u){i instanceof O||(i=O.create(i));for(var l=c===void 0?i.len:i.pos+c,d=new _.opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceResponse;i.pos<l;){var p=i.uint32();if(p===u)break;switch(p>>>3){case 1:{d.partialSuccess=_.opentelemetry.proto.collector.metrics.v1.ExportMetricsPartialSuccess.decode(i,i.uint32());break}default:i.skipType(p&7);break}}return d},a.decodeDelimited=function(i){return i instanceof O||(i=new O(i)),this.decode(i,i.uint32())},a.verify=function(i){if(typeof i!="object"||i===null)return "object expected";if(i.partialSuccess!=null&&i.hasOwnProperty("partialSuccess")){var c=_.opentelemetry.proto.collector.metrics.v1.ExportMetricsPartialSuccess.verify(i.partialSuccess);if(c)return "partialSuccess."+c}return null},a.fromObject=function(i){if(i instanceof _.opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceResponse)return i;var c=new _.opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceResponse;if(i.partialSuccess!=null){if(typeof i.partialSuccess!="object")throw TypeError(".opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceResponse.partialSuccess: object expected");c.partialSuccess=_.opentelemetry.proto.collector.metrics.v1.ExportMetricsPartialSuccess.fromObject(i.partialSuccess);}return c},a.toObject=function(i,c){c||(c={});var u={};return c.defaults&&(u.partialSuccess=null),i.partialSuccess!=null&&i.hasOwnProperty("partialSuccess")&&(u.partialSuccess=_.opentelemetry.proto.collector.metrics.v1.ExportMetricsPartialSuccess.toObject(i.partialSuccess,c)),u},a.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},a.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceResponse"},a}(),s.ExportMetricsPartialSuccess=function(){function a(o){if(o)for(var i=Object.keys(o),c=0;c<i.length;++c)o[i[c]]!=null&&(this[i[c]]=o[i[c]]);}return a.prototype.rejectedDataPoints=null,a.prototype.errorMessage=null,a.create=function(i){return new a(i)},a.encode=function(i,c){return c||(c=fe.create()),i.rejectedDataPoints!=null&&Object.hasOwnProperty.call(i,"rejectedDataPoints")&&c.uint32(8).int64(i.rejectedDataPoints),i.errorMessage!=null&&Object.hasOwnProperty.call(i,"errorMessage")&&c.uint32(18).string(i.errorMessage),c},a.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},a.decode=function(i,c,u){i instanceof O||(i=O.create(i));for(var l=c===void 0?i.len:i.pos+c,d=new _.opentelemetry.proto.collector.metrics.v1.ExportMetricsPartialSuccess;i.pos<l;){var p=i.uint32();if(p===u)break;switch(p>>>3){case 1:{d.rejectedDataPoints=i.int64();break}case 2:{d.errorMessage=i.string();break}default:i.skipType(p&7);break}}return d},a.decodeDelimited=function(i){return i instanceof O||(i=new O(i)),this.decode(i,i.uint32())},a.verify=function(i){return typeof i!="object"||i===null?"object expected":i.rejectedDataPoints!=null&&i.hasOwnProperty("rejectedDataPoints")&&!m.isInteger(i.rejectedDataPoints)&&!(i.rejectedDataPoints&&m.isInteger(i.rejectedDataPoints.low)&&m.isInteger(i.rejectedDataPoints.high))?"rejectedDataPoints: integer|Long expected":i.errorMessage!=null&&i.hasOwnProperty("errorMessage")&&!m.isString(i.errorMessage)?"errorMessage: string expected":null},a.fromObject=function(i){if(i instanceof _.opentelemetry.proto.collector.metrics.v1.ExportMetricsPartialSuccess)return i;var c=new _.opentelemetry.proto.collector.metrics.v1.ExportMetricsPartialSuccess;return i.rejectedDataPoints!=null&&(m.Long?(c.rejectedDataPoints=m.Long.fromValue(i.rejectedDataPoints)).unsigned=false:typeof i.rejectedDataPoints=="string"?c.rejectedDataPoints=parseInt(i.rejectedDataPoints,10):typeof i.rejectedDataPoints=="number"?c.rejectedDataPoints=i.rejectedDataPoints:typeof i.rejectedDataPoints=="object"&&(c.rejectedDataPoints=new m.LongBits(i.rejectedDataPoints.low>>>0,i.rejectedDataPoints.high>>>0).toNumber())),i.errorMessage!=null&&(c.errorMessage=String(i.errorMessage)),c},a.toObject=function(i,c){c||(c={});var u={};if(c.defaults){if(m.Long){var l=new m.Long(0,0,false);u.rejectedDataPoints=c.longs===String?l.toString():c.longs===Number?l.toNumber():l;}else u.rejectedDataPoints=c.longs===String?"0":0;u.errorMessage="";}return i.rejectedDataPoints!=null&&i.hasOwnProperty("rejectedDataPoints")&&(typeof i.rejectedDataPoints=="number"?u.rejectedDataPoints=c.longs===String?String(i.rejectedDataPoints):i.rejectedDataPoints:u.rejectedDataPoints=c.longs===String?m.Long.prototype.toString.call(i.rejectedDataPoints):c.longs===Number?new m.LongBits(i.rejectedDataPoints.low>>>0,i.rejectedDataPoints.high>>>0).toNumber():i.rejectedDataPoints),i.errorMessage!=null&&i.hasOwnProperty("errorMessage")&&(u.errorMessage=i.errorMessage),u},a.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},a.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/opentelemetry.proto.collector.metrics.v1.ExportMetricsPartialSuccess"},a}(),s}(),n}(),r.logs=function(){var n={};return n.v1=function(){var s={};return s.LogsService=function(){function a(o,i,c){re.rpc.Service.call(this,o,i,c);}return (a.prototype=Object.create(re.rpc.Service.prototype)).constructor=a,a.create=function(i,c,u){return new this(i,c,u)},Object.defineProperty(a.prototype.export=function o(i,c){return this.rpcCall(o,_.opentelemetry.proto.collector.logs.v1.ExportLogsServiceRequest,_.opentelemetry.proto.collector.logs.v1.ExportLogsServiceResponse,i,c)},"name",{value:"Export"}),a}(),s.ExportLogsServiceRequest=function(){function a(o){if(this.resourceLogs=[],o)for(var i=Object.keys(o),c=0;c<i.length;++c)o[i[c]]!=null&&(this[i[c]]=o[i[c]]);}return a.prototype.resourceLogs=m.emptyArray,a.create=function(i){return new a(i)},a.encode=function(i,c){if(c||(c=fe.create()),i.resourceLogs!=null&&i.resourceLogs.length)for(var u=0;u<i.resourceLogs.length;++u)_.opentelemetry.proto.logs.v1.ResourceLogs.encode(i.resourceLogs[u],c.uint32(10).fork()).ldelim();return c},a.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},a.decode=function(i,c,u){i instanceof O||(i=O.create(i));for(var l=c===void 0?i.len:i.pos+c,d=new _.opentelemetry.proto.collector.logs.v1.ExportLogsServiceRequest;i.pos<l;){var p=i.uint32();if(p===u)break;switch(p>>>3){case 1:{d.resourceLogs&&d.resourceLogs.length||(d.resourceLogs=[]),d.resourceLogs.push(_.opentelemetry.proto.logs.v1.ResourceLogs.decode(i,i.uint32()));break}default:i.skipType(p&7);break}}return d},a.decodeDelimited=function(i){return i instanceof O||(i=new O(i)),this.decode(i,i.uint32())},a.verify=function(i){if(typeof i!="object"||i===null)return "object expected";if(i.resourceLogs!=null&&i.hasOwnProperty("resourceLogs")){if(!Array.isArray(i.resourceLogs))return "resourceLogs: array expected";for(var c=0;c<i.resourceLogs.length;++c){var u=_.opentelemetry.proto.logs.v1.ResourceLogs.verify(i.resourceLogs[c]);if(u)return "resourceLogs."+u}}return null},a.fromObject=function(i){if(i instanceof _.opentelemetry.proto.collector.logs.v1.ExportLogsServiceRequest)return i;var c=new _.opentelemetry.proto.collector.logs.v1.ExportLogsServiceRequest;if(i.resourceLogs){if(!Array.isArray(i.resourceLogs))throw TypeError(".opentelemetry.proto.collector.logs.v1.ExportLogsServiceRequest.resourceLogs: array expected");c.resourceLogs=[];for(var u=0;u<i.resourceLogs.length;++u){if(typeof i.resourceLogs[u]!="object")throw TypeError(".opentelemetry.proto.collector.logs.v1.ExportLogsServiceRequest.resourceLogs: object expected");c.resourceLogs[u]=_.opentelemetry.proto.logs.v1.ResourceLogs.fromObject(i.resourceLogs[u]);}}return c},a.toObject=function(i,c){c||(c={});var u={};if((c.arrays||c.defaults)&&(u.resourceLogs=[]),i.resourceLogs&&i.resourceLogs.length){u.resourceLogs=[];for(var l=0;l<i.resourceLogs.length;++l)u.resourceLogs[l]=_.opentelemetry.proto.logs.v1.ResourceLogs.toObject(i.resourceLogs[l],c);}return u},a.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},a.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/opentelemetry.proto.collector.logs.v1.ExportLogsServiceRequest"},a}(),s.ExportLogsServiceResponse=function(){function a(o){if(o)for(var i=Object.keys(o),c=0;c<i.length;++c)o[i[c]]!=null&&(this[i[c]]=o[i[c]]);}return a.prototype.partialSuccess=null,a.create=function(i){return new a(i)},a.encode=function(i,c){return c||(c=fe.create()),i.partialSuccess!=null&&Object.hasOwnProperty.call(i,"partialSuccess")&&_.opentelemetry.proto.collector.logs.v1.ExportLogsPartialSuccess.encode(i.partialSuccess,c.uint32(10).fork()).ldelim(),c},a.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},a.decode=function(i,c,u){i instanceof O||(i=O.create(i));for(var l=c===void 0?i.len:i.pos+c,d=new _.opentelemetry.proto.collector.logs.v1.ExportLogsServiceResponse;i.pos<l;){var p=i.uint32();if(p===u)break;switch(p>>>3){case 1:{d.partialSuccess=_.opentelemetry.proto.collector.logs.v1.ExportLogsPartialSuccess.decode(i,i.uint32());break}default:i.skipType(p&7);break}}return d},a.decodeDelimited=function(i){return i instanceof O||(i=new O(i)),this.decode(i,i.uint32())},a.verify=function(i){if(typeof i!="object"||i===null)return "object expected";if(i.partialSuccess!=null&&i.hasOwnProperty("partialSuccess")){var c=_.opentelemetry.proto.collector.logs.v1.ExportLogsPartialSuccess.verify(i.partialSuccess);if(c)return "partialSuccess."+c}return null},a.fromObject=function(i){if(i instanceof _.opentelemetry.proto.collector.logs.v1.ExportLogsServiceResponse)return i;var c=new _.opentelemetry.proto.collector.logs.v1.ExportLogsServiceResponse;if(i.partialSuccess!=null){if(typeof i.partialSuccess!="object")throw TypeError(".opentelemetry.proto.collector.logs.v1.ExportLogsServiceResponse.partialSuccess: object expected");c.partialSuccess=_.opentelemetry.proto.collector.logs.v1.ExportLogsPartialSuccess.fromObject(i.partialSuccess);}return c},a.toObject=function(i,c){c||(c={});var u={};return c.defaults&&(u.partialSuccess=null),i.partialSuccess!=null&&i.hasOwnProperty("partialSuccess")&&(u.partialSuccess=_.opentelemetry.proto.collector.logs.v1.ExportLogsPartialSuccess.toObject(i.partialSuccess,c)),u},a.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},a.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/opentelemetry.proto.collector.logs.v1.ExportLogsServiceResponse"},a}(),s.ExportLogsPartialSuccess=function(){function a(o){if(o)for(var i=Object.keys(o),c=0;c<i.length;++c)o[i[c]]!=null&&(this[i[c]]=o[i[c]]);}return a.prototype.rejectedLogRecords=null,a.prototype.errorMessage=null,a.create=function(i){return new a(i)},a.encode=function(i,c){return c||(c=fe.create()),i.rejectedLogRecords!=null&&Object.hasOwnProperty.call(i,"rejectedLogRecords")&&c.uint32(8).int64(i.rejectedLogRecords),i.errorMessage!=null&&Object.hasOwnProperty.call(i,"errorMessage")&&c.uint32(18).string(i.errorMessage),c},a.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},a.decode=function(i,c,u){i instanceof O||(i=O.create(i));for(var l=c===void 0?i.len:i.pos+c,d=new _.opentelemetry.proto.collector.logs.v1.ExportLogsPartialSuccess;i.pos<l;){var p=i.uint32();if(p===u)break;switch(p>>>3){case 1:{d.rejectedLogRecords=i.int64();break}case 2:{d.errorMessage=i.string();break}default:i.skipType(p&7);break}}return d},a.decodeDelimited=function(i){return i instanceof O||(i=new O(i)),this.decode(i,i.uint32())},a.verify=function(i){return typeof i!="object"||i===null?"object expected":i.rejectedLogRecords!=null&&i.hasOwnProperty("rejectedLogRecords")&&!m.isInteger(i.rejectedLogRecords)&&!(i.rejectedLogRecords&&m.isInteger(i.rejectedLogRecords.low)&&m.isInteger(i.rejectedLogRecords.high))?"rejectedLogRecords: integer|Long expected":i.errorMessage!=null&&i.hasOwnProperty("errorMessage")&&!m.isString(i.errorMessage)?"errorMessage: string expected":null},a.fromObject=function(i){if(i instanceof _.opentelemetry.proto.collector.logs.v1.ExportLogsPartialSuccess)return i;var c=new _.opentelemetry.proto.collector.logs.v1.ExportLogsPartialSuccess;return i.rejectedLogRecords!=null&&(m.Long?(c.rejectedLogRecords=m.Long.fromValue(i.rejectedLogRecords)).unsigned=false:typeof i.rejectedLogRecords=="string"?c.rejectedLogRecords=parseInt(i.rejectedLogRecords,10):typeof i.rejectedLogRecords=="number"?c.rejectedLogRecords=i.rejectedLogRecords:typeof i.rejectedLogRecords=="object"&&(c.rejectedLogRecords=new m.LongBits(i.rejectedLogRecords.low>>>0,i.rejectedLogRecords.high>>>0).toNumber())),i.errorMessage!=null&&(c.errorMessage=String(i.errorMessage)),c},a.toObject=function(i,c){c||(c={});var u={};if(c.defaults){if(m.Long){var l=new m.Long(0,0,false);u.rejectedLogRecords=c.longs===String?l.toString():c.longs===Number?l.toNumber():l;}else u.rejectedLogRecords=c.longs===String?"0":0;u.errorMessage="";}return i.rejectedLogRecords!=null&&i.hasOwnProperty("rejectedLogRecords")&&(typeof i.rejectedLogRecords=="number"?u.rejectedLogRecords=c.longs===String?String(i.rejectedLogRecords):i.rejectedLogRecords:u.rejectedLogRecords=c.longs===String?m.Long.prototype.toString.call(i.rejectedLogRecords):c.longs===Number?new m.LongBits(i.rejectedLogRecords.low>>>0,i.rejectedLogRecords.high>>>0).toNumber():i.rejectedLogRecords),i.errorMessage!=null&&i.hasOwnProperty("errorMessage")&&(u.errorMessage=i.errorMessage),u},a.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},a.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/opentelemetry.proto.collector.logs.v1.ExportLogsPartialSuccess"},a}(),s}(),n}(),r}(),e.metrics=function(){var r={};return r.v1=function(){var n={};return n.MetricsData=function(){function s(a){if(this.resourceMetrics=[],a)for(var o=Object.keys(a),i=0;i<o.length;++i)a[o[i]]!=null&&(this[o[i]]=a[o[i]]);}return s.prototype.resourceMetrics=m.emptyArray,s.create=function(o){return new s(o)},s.encode=function(o,i){if(i||(i=fe.create()),o.resourceMetrics!=null&&o.resourceMetrics.length)for(var c=0;c<o.resourceMetrics.length;++c)_.opentelemetry.proto.metrics.v1.ResourceMetrics.encode(o.resourceMetrics[c],i.uint32(10).fork()).ldelim();return i},s.encodeDelimited=function(o,i){return this.encode(o,i).ldelim()},s.decode=function(o,i,c){o instanceof O||(o=O.create(o));for(var u=i===void 0?o.len:o.pos+i,l=new _.opentelemetry.proto.metrics.v1.MetricsData;o.pos<u;){var d=o.uint32();if(d===c)break;switch(d>>>3){case 1:{l.resourceMetrics&&l.resourceMetrics.length||(l.resourceMetrics=[]),l.resourceMetrics.push(_.opentelemetry.proto.metrics.v1.ResourceMetrics.decode(o,o.uint32()));break}default:o.skipType(d&7);break}}return l},s.decodeDelimited=function(o){return o instanceof O||(o=new O(o)),this.decode(o,o.uint32())},s.verify=function(o){if(typeof o!="object"||o===null)return "object expected";if(o.resourceMetrics!=null&&o.hasOwnProperty("resourceMetrics")){if(!Array.isArray(o.resourceMetrics))return "resourceMetrics: array expected";for(var i=0;i<o.resourceMetrics.length;++i){var c=_.opentelemetry.proto.metrics.v1.ResourceMetrics.verify(o.resourceMetrics[i]);if(c)return "resourceMetrics."+c}}return null},s.fromObject=function(o){if(o instanceof _.opentelemetry.proto.metrics.v1.MetricsData)return o;var i=new _.opentelemetry.proto.metrics.v1.MetricsData;if(o.resourceMetrics){if(!Array.isArray(o.resourceMetrics))throw TypeError(".opentelemetry.proto.metrics.v1.MetricsData.resourceMetrics: array expected");i.resourceMetrics=[];for(var c=0;c<o.resourceMetrics.length;++c){if(typeof o.resourceMetrics[c]!="object")throw TypeError(".opentelemetry.proto.metrics.v1.MetricsData.resourceMetrics: object expected");i.resourceMetrics[c]=_.opentelemetry.proto.metrics.v1.ResourceMetrics.fromObject(o.resourceMetrics[c]);}}return i},s.toObject=function(o,i){i||(i={});var c={};if((i.arrays||i.defaults)&&(c.resourceMetrics=[]),o.resourceMetrics&&o.resourceMetrics.length){c.resourceMetrics=[];for(var u=0;u<o.resourceMetrics.length;++u)c.resourceMetrics[u]=_.opentelemetry.proto.metrics.v1.ResourceMetrics.toObject(o.resourceMetrics[u],i);}return c},s.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},s.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/opentelemetry.proto.metrics.v1.MetricsData"},s}(),n.ResourceMetrics=function(){function s(a){if(this.scopeMetrics=[],a)for(var o=Object.keys(a),i=0;i<o.length;++i)a[o[i]]!=null&&(this[o[i]]=a[o[i]]);}return s.prototype.resource=null,s.prototype.scopeMetrics=m.emptyArray,s.prototype.schemaUrl=null,s.create=function(o){return new s(o)},s.encode=function(o,i){if(i||(i=fe.create()),o.resource!=null&&Object.hasOwnProperty.call(o,"resource")&&_.opentelemetry.proto.resource.v1.Resource.encode(o.resource,i.uint32(10).fork()).ldelim(),o.scopeMetrics!=null&&o.scopeMetrics.length)for(var c=0;c<o.scopeMetrics.length;++c)_.opentelemetry.proto.metrics.v1.ScopeMetrics.encode(o.scopeMetrics[c],i.uint32(18).fork()).ldelim();return o.schemaUrl!=null&&Object.hasOwnProperty.call(o,"schemaUrl")&&i.uint32(26).string(o.schemaUrl),i},s.encodeDelimited=function(o,i){return this.encode(o,i).ldelim()},s.decode=function(o,i,c){o instanceof O||(o=O.create(o));for(var u=i===void 0?o.len:o.pos+i,l=new _.opentelemetry.proto.metrics.v1.ResourceMetrics;o.pos<u;){var d=o.uint32();if(d===c)break;switch(d>>>3){case 1:{l.resource=_.opentelemetry.proto.resource.v1.Resource.decode(o,o.uint32());break}case 2:{l.scopeMetrics&&l.scopeMetrics.length||(l.scopeMetrics=[]),l.scopeMetrics.push(_.opentelemetry.proto.metrics.v1.ScopeMetrics.decode(o,o.uint32()));break}case 3:{l.schemaUrl=o.string();break}default:o.skipType(d&7);break}}return l},s.decodeDelimited=function(o){return o instanceof O||(o=new O(o)),this.decode(o,o.uint32())},s.verify=function(o){if(typeof o!="object"||o===null)return "object expected";if(o.resource!=null&&o.hasOwnProperty("resource")){var i=_.opentelemetry.proto.resource.v1.Resource.verify(o.resource);if(i)return "resource."+i}if(o.scopeMetrics!=null&&o.hasOwnProperty("scopeMetrics")){if(!Array.isArray(o.scopeMetrics))return "scopeMetrics: array expected";for(var c=0;c<o.scopeMetrics.length;++c){var i=_.opentelemetry.proto.metrics.v1.ScopeMetrics.verify(o.scopeMetrics[c]);if(i)return "scopeMetrics."+i}}return o.schemaUrl!=null&&o.hasOwnProperty("schemaUrl")&&!m.isString(o.schemaUrl)?"schemaUrl: string expected":null},s.fromObject=function(o){if(o instanceof _.opentelemetry.proto.metrics.v1.ResourceMetrics)return o;var i=new _.opentelemetry.proto.metrics.v1.ResourceMetrics;if(o.resource!=null){if(typeof o.resource!="object")throw TypeError(".opentelemetry.proto.metrics.v1.ResourceMetrics.resource: object expected");i.resource=_.opentelemetry.proto.resource.v1.Resource.fromObject(o.resource);}if(o.scopeMetrics){if(!Array.isArray(o.scopeMetrics))throw TypeError(".opentelemetry.proto.metrics.v1.ResourceMetrics.scopeMetrics: array expected");i.scopeMetrics=[];for(var c=0;c<o.scopeMetrics.length;++c){if(typeof o.scopeMetrics[c]!="object")throw TypeError(".opentelemetry.proto.metrics.v1.ResourceMetrics.scopeMetrics: object expected");i.scopeMetrics[c]=_.opentelemetry.proto.metrics.v1.ScopeMetrics.fromObject(o.scopeMetrics[c]);}}return o.schemaUrl!=null&&(i.schemaUrl=String(o.schemaUrl)),i},s.toObject=function(o,i){i||(i={});var c={};if((i.arrays||i.defaults)&&(c.scopeMetrics=[]),i.defaults&&(c.resource=null,c.schemaUrl=""),o.resource!=null&&o.hasOwnProperty("resource")&&(c.resource=_.opentelemetry.proto.resource.v1.Resource.toObject(o.resource,i)),o.scopeMetrics&&o.scopeMetrics.length){c.scopeMetrics=[];for(var u=0;u<o.scopeMetrics.length;++u)c.scopeMetrics[u]=_.opentelemetry.proto.metrics.v1.ScopeMetrics.toObject(o.scopeMetrics[u],i);}return o.schemaUrl!=null&&o.hasOwnProperty("schemaUrl")&&(c.schemaUrl=o.schemaUrl),c},s.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},s.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/opentelemetry.proto.metrics.v1.ResourceMetrics"},s}(),n.ScopeMetrics=function(){function s(a){if(this.metrics=[],a)for(var o=Object.keys(a),i=0;i<o.length;++i)a[o[i]]!=null&&(this[o[i]]=a[o[i]]);}return s.prototype.scope=null,s.prototype.metrics=m.emptyArray,s.prototype.schemaUrl=null,s.create=function(o){return new s(o)},s.encode=function(o,i){if(i||(i=fe.create()),o.scope!=null&&Object.hasOwnProperty.call(o,"scope")&&_.opentelemetry.proto.common.v1.InstrumentationScope.encode(o.scope,i.uint32(10).fork()).ldelim(),o.metrics!=null&&o.metrics.length)for(var c=0;c<o.metrics.length;++c)_.opentelemetry.proto.metrics.v1.Metric.encode(o.metrics[c],i.uint32(18).fork()).ldelim();return o.schemaUrl!=null&&Object.hasOwnProperty.call(o,"schemaUrl")&&i.uint32(26).string(o.schemaUrl),i},s.encodeDelimited=function(o,i){return this.encode(o,i).ldelim()},s.decode=function(o,i,c){o instanceof O||(o=O.create(o));for(var u=i===void 0?o.len:o.pos+i,l=new _.opentelemetry.proto.metrics.v1.ScopeMetrics;o.pos<u;){var d=o.uint32();if(d===c)break;switch(d>>>3){case 1:{l.scope=_.opentelemetry.proto.common.v1.InstrumentationScope.decode(o,o.uint32());break}case 2:{l.metrics&&l.metrics.length||(l.metrics=[]),l.metrics.push(_.opentelemetry.proto.metrics.v1.Metric.decode(o,o.uint32()));break}case 3:{l.schemaUrl=o.string();break}default:o.skipType(d&7);break}}return l},s.decodeDelimited=function(o){return o instanceof O||(o=new O(o)),this.decode(o,o.uint32())},s.verify=function(o){if(typeof o!="object"||o===null)return "object expected";if(o.scope!=null&&o.hasOwnProperty("scope")){var i=_.opentelemetry.proto.common.v1.InstrumentationScope.verify(o.scope);if(i)return "scope."+i}if(o.metrics!=null&&o.hasOwnProperty("metrics")){if(!Array.isArray(o.metrics))return "metrics: array expected";for(var c=0;c<o.metrics.length;++c){var i=_.opentelemetry.proto.metrics.v1.Metric.verify(o.metrics[c]);if(i)return "metrics."+i}}return o.schemaUrl!=null&&o.hasOwnProperty("schemaUrl")&&!m.isString(o.schemaUrl)?"schemaUrl: string expected":null},s.fromObject=function(o){if(o instanceof _.opentelemetry.proto.metrics.v1.ScopeMetrics)return o;var i=new _.opentelemetry.proto.metrics.v1.ScopeMetrics;if(o.scope!=null){if(typeof o.scope!="object")throw TypeError(".opentelemetry.proto.metrics.v1.ScopeMetrics.scope: object expected");i.scope=_.opentelemetry.proto.common.v1.InstrumentationScope.fromObject(o.scope);}if(o.metrics){if(!Array.isArray(o.metrics))throw TypeError(".opentelemetry.proto.metrics.v1.ScopeMetrics.metrics: array expected");i.metrics=[];for(var c=0;c<o.metrics.length;++c){if(typeof o.metrics[c]!="object")throw TypeError(".opentelemetry.proto.metrics.v1.ScopeMetrics.metrics: object expected");i.metrics[c]=_.opentelemetry.proto.metrics.v1.Metric.fromObject(o.metrics[c]);}}return o.schemaUrl!=null&&(i.schemaUrl=String(o.schemaUrl)),i},s.toObject=function(o,i){i||(i={});var c={};if((i.arrays||i.defaults)&&(c.metrics=[]),i.defaults&&(c.scope=null,c.schemaUrl=""),o.scope!=null&&o.hasOwnProperty("scope")&&(c.scope=_.opentelemetry.proto.common.v1.InstrumentationScope.toObject(o.scope,i)),o.metrics&&o.metrics.length){c.metrics=[];for(var u=0;u<o.metrics.length;++u)c.metrics[u]=_.opentelemetry.proto.metrics.v1.Metric.toObject(o.metrics[u],i);}return o.schemaUrl!=null&&o.hasOwnProperty("schemaUrl")&&(c.schemaUrl=o.schemaUrl),c},s.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},s.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/opentelemetry.proto.metrics.v1.ScopeMetrics"},s}(),n.Metric=function(){function s(o){if(this.metadata=[],o)for(var i=Object.keys(o),c=0;c<i.length;++c)o[i[c]]!=null&&(this[i[c]]=o[i[c]]);}s.prototype.name=null,s.prototype.description=null,s.prototype.unit=null,s.prototype.gauge=null,s.prototype.sum=null,s.prototype.histogram=null,s.prototype.exponentialHistogram=null,s.prototype.summary=null,s.prototype.metadata=m.emptyArray;var a;return Object.defineProperty(s.prototype,"data",{get:m.oneOfGetter(a=["gauge","sum","histogram","exponentialHistogram","summary"]),set:m.oneOfSetter(a)}),s.create=function(i){return new s(i)},s.encode=function(i,c){if(c||(c=fe.create()),i.name!=null&&Object.hasOwnProperty.call(i,"name")&&c.uint32(10).string(i.name),i.description!=null&&Object.hasOwnProperty.call(i,"description")&&c.uint32(18).string(i.description),i.unit!=null&&Object.hasOwnProperty.call(i,"unit")&&c.uint32(26).string(i.unit),i.gauge!=null&&Object.hasOwnProperty.call(i,"gauge")&&_.opentelemetry.proto.metrics.v1.Gauge.encode(i.gauge,c.uint32(42).fork()).ldelim(),i.sum!=null&&Object.hasOwnProperty.call(i,"sum")&&_.opentelemetry.proto.metrics.v1.Sum.encode(i.sum,c.uint32(58).fork()).ldelim(),i.histogram!=null&&Object.hasOwnProperty.call(i,"histogram")&&_.opentelemetry.proto.metrics.v1.Histogram.encode(i.histogram,c.uint32(74).fork()).ldelim(),i.exponentialHistogram!=null&&Object.hasOwnProperty.call(i,"exponentialHistogram")&&_.opentelemetry.proto.metrics.v1.ExponentialHistogram.encode(i.exponentialHistogram,c.uint32(82).fork()).ldelim(),i.summary!=null&&Object.hasOwnProperty.call(i,"summary")&&_.opentelemetry.proto.metrics.v1.Summary.encode(i.summary,c.uint32(90).fork()).ldelim(),i.metadata!=null&&i.metadata.length)for(var u=0;u<i.metadata.length;++u)_.opentelemetry.proto.common.v1.KeyValue.encode(i.metadata[u],c.uint32(98).fork()).ldelim();return c},s.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},s.decode=function(i,c,u){i instanceof O||(i=O.create(i));for(var l=c===void 0?i.len:i.pos+c,d=new _.opentelemetry.proto.metrics.v1.Metric;i.pos<l;){var p=i.uint32();if(p===u)break;switch(p>>>3){case 1:{d.name=i.string();break}case 2:{d.description=i.string();break}case 3:{d.unit=i.string();break}case 5:{d.gauge=_.opentelemetry.proto.metrics.v1.Gauge.decode(i,i.uint32());break}case 7:{d.sum=_.opentelemetry.proto.metrics.v1.Sum.decode(i,i.uint32());break}case 9:{d.histogram=_.opentelemetry.proto.metrics.v1.Histogram.decode(i,i.uint32());break}case 10:{d.exponentialHistogram=_.opentelemetry.proto.metrics.v1.ExponentialHistogram.decode(i,i.uint32());break}case 11:{d.summary=_.opentelemetry.proto.metrics.v1.Summary.decode(i,i.uint32());break}case 12:{d.metadata&&d.metadata.length||(d.metadata=[]),d.metadata.push(_.opentelemetry.proto.common.v1.KeyValue.decode(i,i.uint32()));break}default:i.skipType(p&7);break}}return d},s.decodeDelimited=function(i){return i instanceof O||(i=new O(i)),this.decode(i,i.uint32())},s.verify=function(i){if(typeof i!="object"||i===null)return "object expected";var c={};if(i.name!=null&&i.hasOwnProperty("name")&&!m.isString(i.name))return "name: string expected";if(i.description!=null&&i.hasOwnProperty("description")&&!m.isString(i.description))return "description: string expected";if(i.unit!=null&&i.hasOwnProperty("unit")&&!m.isString(i.unit))return "unit: string expected";if(i.gauge!=null&&i.hasOwnProperty("gauge")){c.data=1;{var u=_.opentelemetry.proto.metrics.v1.Gauge.verify(i.gauge);if(u)return "gauge."+u}}if(i.sum!=null&&i.hasOwnProperty("sum")){if(c.data===1)return "data: multiple values";c.data=1;{var u=_.opentelemetry.proto.metrics.v1.Sum.verify(i.sum);if(u)return "sum."+u}}if(i.histogram!=null&&i.hasOwnProperty("histogram")){if(c.data===1)return "data: multiple values";c.data=1;{var u=_.opentelemetry.proto.metrics.v1.Histogram.verify(i.histogram);if(u)return "histogram."+u}}if(i.exponentialHistogram!=null&&i.hasOwnProperty("exponentialHistogram")){if(c.data===1)return "data: multiple values";c.data=1;{var u=_.opentelemetry.proto.metrics.v1.ExponentialHistogram.verify(i.exponentialHistogram);if(u)return "exponentialHistogram."+u}}if(i.summary!=null&&i.hasOwnProperty("summary")){if(c.data===1)return "data: multiple values";c.data=1;{var u=_.opentelemetry.proto.metrics.v1.Summary.verify(i.summary);if(u)return "summary."+u}}if(i.metadata!=null&&i.hasOwnProperty("metadata")){if(!Array.isArray(i.metadata))return "metadata: array expected";for(var l=0;l<i.metadata.length;++l){var u=_.opentelemetry.proto.common.v1.KeyValue.verify(i.metadata[l]);if(u)return "metadata."+u}}return null},s.fromObject=function(i){if(i instanceof _.opentelemetry.proto.metrics.v1.Metric)return i;var c=new _.opentelemetry.proto.metrics.v1.Metric;if(i.name!=null&&(c.name=String(i.name)),i.description!=null&&(c.description=String(i.description)),i.unit!=null&&(c.unit=String(i.unit)),i.gauge!=null){if(typeof i.gauge!="object")throw TypeError(".opentelemetry.proto.metrics.v1.Metric.gauge: object expected");c.gauge=_.opentelemetry.proto.metrics.v1.Gauge.fromObject(i.gauge);}if(i.sum!=null){if(typeof i.sum!="object")throw TypeError(".opentelemetry.proto.metrics.v1.Metric.sum: object expected");c.sum=_.opentelemetry.proto.metrics.v1.Sum.fromObject(i.sum);}if(i.histogram!=null){if(typeof i.histogram!="object")throw TypeError(".opentelemetry.proto.metrics.v1.Metric.histogram: object expected");c.histogram=_.opentelemetry.proto.metrics.v1.Histogram.fromObject(i.histogram);}if(i.exponentialHistogram!=null){if(typeof i.exponentialHistogram!="object")throw TypeError(".opentelemetry.proto.metrics.v1.Metric.exponentialHistogram: object expected");c.exponentialHistogram=_.opentelemetry.proto.metrics.v1.ExponentialHistogram.fromObject(i.exponentialHistogram);}if(i.summary!=null){if(typeof i.summary!="object")throw TypeError(".opentelemetry.proto.metrics.v1.Metric.summary: object expected");c.summary=_.opentelemetry.proto.metrics.v1.Summary.fromObject(i.summary);}if(i.metadata){if(!Array.isArray(i.metadata))throw TypeError(".opentelemetry.proto.metrics.v1.Metric.metadata: array expected");c.metadata=[];for(var u=0;u<i.metadata.length;++u){if(typeof i.metadata[u]!="object")throw TypeError(".opentelemetry.proto.metrics.v1.Metric.metadata: object expected");c.metadata[u]=_.opentelemetry.proto.common.v1.KeyValue.fromObject(i.metadata[u]);}}return c},s.toObject=function(i,c){c||(c={});var u={};if((c.arrays||c.defaults)&&(u.metadata=[]),c.defaults&&(u.name="",u.description="",u.unit=""),i.name!=null&&i.hasOwnProperty("name")&&(u.name=i.name),i.description!=null&&i.hasOwnProperty("description")&&(u.description=i.description),i.unit!=null&&i.hasOwnProperty("unit")&&(u.unit=i.unit),i.gauge!=null&&i.hasOwnProperty("gauge")&&(u.gauge=_.opentelemetry.proto.metrics.v1.Gauge.toObject(i.gauge,c),c.oneofs&&(u.data="gauge")),i.sum!=null&&i.hasOwnProperty("sum")&&(u.sum=_.opentelemetry.proto.metrics.v1.Sum.toObject(i.sum,c),c.oneofs&&(u.data="sum")),i.histogram!=null&&i.hasOwnProperty("histogram")&&(u.histogram=_.opentelemetry.proto.metrics.v1.Histogram.toObject(i.histogram,c),c.oneofs&&(u.data="histogram")),i.exponentialHistogram!=null&&i.hasOwnProperty("exponentialHistogram")&&(u.exponentialHistogram=_.opentelemetry.proto.metrics.v1.ExponentialHistogram.toObject(i.exponentialHistogram,c),c.oneofs&&(u.data="exponentialHistogram")),i.summary!=null&&i.hasOwnProperty("summary")&&(u.summary=_.opentelemetry.proto.metrics.v1.Summary.toObject(i.summary,c),c.oneofs&&(u.data="summary")),i.metadata&&i.metadata.length){u.metadata=[];for(var l=0;l<i.metadata.length;++l)u.metadata[l]=_.opentelemetry.proto.common.v1.KeyValue.toObject(i.metadata[l],c);}return u},s.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},s.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/opentelemetry.proto.metrics.v1.Metric"},s}(),n.Gauge=function(){function s(a){if(this.dataPoints=[],a)for(var o=Object.keys(a),i=0;i<o.length;++i)a[o[i]]!=null&&(this[o[i]]=a[o[i]]);}return s.prototype.dataPoints=m.emptyArray,s.create=function(o){return new s(o)},s.encode=function(o,i){if(i||(i=fe.create()),o.dataPoints!=null&&o.dataPoints.length)for(var c=0;c<o.dataPoints.length;++c)_.opentelemetry.proto.metrics.v1.NumberDataPoint.encode(o.dataPoints[c],i.uint32(10).fork()).ldelim();return i},s.encodeDelimited=function(o,i){return this.encode(o,i).ldelim()},s.decode=function(o,i,c){o instanceof O||(o=O.create(o));for(var u=i===void 0?o.len:o.pos+i,l=new _.opentelemetry.proto.metrics.v1.Gauge;o.pos<u;){var d=o.uint32();if(d===c)break;switch(d>>>3){case 1:{l.dataPoints&&l.dataPoints.length||(l.dataPoints=[]),l.dataPoints.push(_.opentelemetry.proto.metrics.v1.NumberDataPoint.decode(o,o.uint32()));break}default:o.skipType(d&7);break}}return l},s.decodeDelimited=function(o){return o instanceof O||(o=new O(o)),this.decode(o,o.uint32())},s.verify=function(o){if(typeof o!="object"||o===null)return "object expected";if(o.dataPoints!=null&&o.hasOwnProperty("dataPoints")){if(!Array.isArray(o.dataPoints))return "dataPoints: array expected";for(var i=0;i<o.dataPoints.length;++i){var c=_.opentelemetry.proto.metrics.v1.NumberDataPoint.verify(o.dataPoints[i]);if(c)return "dataPoints."+c}}return null},s.fromObject=function(o){if(o instanceof _.opentelemetry.proto.metrics.v1.Gauge)return o;var i=new _.opentelemetry.proto.metrics.v1.Gauge;if(o.dataPoints){if(!Array.isArray(o.dataPoints))throw TypeError(".opentelemetry.proto.metrics.v1.Gauge.dataPoints: array expected");i.dataPoints=[];for(var c=0;c<o.dataPoints.length;++c){if(typeof o.dataPoints[c]!="object")throw TypeError(".opentelemetry.proto.metrics.v1.Gauge.dataPoints: object expected");i.dataPoints[c]=_.opentelemetry.proto.metrics.v1.NumberDataPoint.fromObject(o.dataPoints[c]);}}return i},s.toObject=function(o,i){i||(i={});var c={};if((i.arrays||i.defaults)&&(c.dataPoints=[]),o.dataPoints&&o.dataPoints.length){c.dataPoints=[];for(var u=0;u<o.dataPoints.length;++u)c.dataPoints[u]=_.opentelemetry.proto.metrics.v1.NumberDataPoint.toObject(o.dataPoints[u],i);}return c},s.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},s.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/opentelemetry.proto.metrics.v1.Gauge"},s}(),n.Sum=function(){function s(a){if(this.dataPoints=[],a)for(var o=Object.keys(a),i=0;i<o.length;++i)a[o[i]]!=null&&(this[o[i]]=a[o[i]]);}return s.prototype.dataPoints=m.emptyArray,s.prototype.aggregationTemporality=null,s.prototype.isMonotonic=null,s.create=function(o){return new s(o)},s.encode=function(o,i){if(i||(i=fe.create()),o.dataPoints!=null&&o.dataPoints.length)for(var c=0;c<o.dataPoints.length;++c)_.opentelemetry.proto.metrics.v1.NumberDataPoint.encode(o.dataPoints[c],i.uint32(10).fork()).ldelim();return o.aggregationTemporality!=null&&Object.hasOwnProperty.call(o,"aggregationTemporality")&&i.uint32(16).int32(o.aggregationTemporality),o.isMonotonic!=null&&Object.hasOwnProperty.call(o,"isMonotonic")&&i.uint32(24).bool(o.isMonotonic),i},s.encodeDelimited=function(o,i){return this.encode(o,i).ldelim()},s.decode=function(o,i,c){o instanceof O||(o=O.create(o));for(var u=i===void 0?o.len:o.pos+i,l=new _.opentelemetry.proto.metrics.v1.Sum;o.pos<u;){var d=o.uint32();if(d===c)break;switch(d>>>3){case 1:{l.dataPoints&&l.dataPoints.length||(l.dataPoints=[]),l.dataPoints.push(_.opentelemetry.proto.metrics.v1.NumberDataPoint.decode(o,o.uint32()));break}case 2:{l.aggregationTemporality=o.int32();break}case 3:{l.isMonotonic=o.bool();break}default:o.skipType(d&7);break}}return l},s.decodeDelimited=function(o){return o instanceof O||(o=new O(o)),this.decode(o,o.uint32())},s.verify=function(o){if(typeof o!="object"||o===null)return "object expected";if(o.dataPoints!=null&&o.hasOwnProperty("dataPoints")){if(!Array.isArray(o.dataPoints))return "dataPoints: array expected";for(var i=0;i<o.dataPoints.length;++i){var c=_.opentelemetry.proto.metrics.v1.NumberDataPoint.verify(o.dataPoints[i]);if(c)return "dataPoints."+c}}if(o.aggregationTemporality!=null&&o.hasOwnProperty("aggregationTemporality"))switch(o.aggregationTemporality){default:return "aggregationTemporality: enum value expected";case 0:case 1:case 2:break}return o.isMonotonic!=null&&o.hasOwnProperty("isMonotonic")&&typeof o.isMonotonic!="boolean"?"isMonotonic: boolean expected":null},s.fromObject=function(o){if(o instanceof _.opentelemetry.proto.metrics.v1.Sum)return o;var i=new _.opentelemetry.proto.metrics.v1.Sum;if(o.dataPoints){if(!Array.isArray(o.dataPoints))throw TypeError(".opentelemetry.proto.metrics.v1.Sum.dataPoints: array expected");i.dataPoints=[];for(var c=0;c<o.dataPoints.length;++c){if(typeof o.dataPoints[c]!="object")throw TypeError(".opentelemetry.proto.metrics.v1.Sum.dataPoints: object expected");i.dataPoints[c]=_.opentelemetry.proto.metrics.v1.NumberDataPoint.fromObject(o.dataPoints[c]);}}switch(o.aggregationTemporality){default:if(typeof o.aggregationTemporality=="number"){i.aggregationTemporality=o.aggregationTemporality;break}break;case "AGGREGATION_TEMPORALITY_UNSPECIFIED":case 0:i.aggregationTemporality=0;break;case "AGGREGATION_TEMPORALITY_DELTA":case 1:i.aggregationTemporality=1;break;case "AGGREGATION_TEMPORALITY_CUMULATIVE":case 2:i.aggregationTemporality=2;break}return o.isMonotonic!=null&&(i.isMonotonic=!!o.isMonotonic),i},s.toObject=function(o,i){i||(i={});var c={};if((i.arrays||i.defaults)&&(c.dataPoints=[]),i.defaults&&(c.aggregationTemporality=i.enums===String?"AGGREGATION_TEMPORALITY_UNSPECIFIED":0,c.isMonotonic=false),o.dataPoints&&o.dataPoints.length){c.dataPoints=[];for(var u=0;u<o.dataPoints.length;++u)c.dataPoints[u]=_.opentelemetry.proto.metrics.v1.NumberDataPoint.toObject(o.dataPoints[u],i);}return o.aggregationTemporality!=null&&o.hasOwnProperty("aggregationTemporality")&&(c.aggregationTemporality=i.enums===String?_.opentelemetry.proto.metrics.v1.AggregationTemporality[o.aggregationTemporality]===void 0?o.aggregationTemporality:_.opentelemetry.proto.metrics.v1.AggregationTemporality[o.aggregationTemporality]:o.aggregationTemporality),o.isMonotonic!=null&&o.hasOwnProperty("isMonotonic")&&(c.isMonotonic=o.isMonotonic),c},s.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},s.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/opentelemetry.proto.metrics.v1.Sum"},s}(),n.Histogram=function(){function s(a){if(this.dataPoints=[],a)for(var o=Object.keys(a),i=0;i<o.length;++i)a[o[i]]!=null&&(this[o[i]]=a[o[i]]);}return s.prototype.dataPoints=m.emptyArray,s.prototype.aggregationTemporality=null,s.create=function(o){return new s(o)},s.encode=function(o,i){if(i||(i=fe.create()),o.dataPoints!=null&&o.dataPoints.length)for(var c=0;c<o.dataPoints.length;++c)_.opentelemetry.proto.metrics.v1.HistogramDataPoint.encode(o.dataPoints[c],i.uint32(10).fork()).ldelim();return o.aggregationTemporality!=null&&Object.hasOwnProperty.call(o,"aggregationTemporality")&&i.uint32(16).int32(o.aggregationTemporality),i},s.encodeDelimited=function(o,i){return this.encode(o,i).ldelim()},s.decode=function(o,i,c){o instanceof O||(o=O.create(o));for(var u=i===void 0?o.len:o.pos+i,l=new _.opentelemetry.proto.metrics.v1.Histogram;o.pos<u;){var d=o.uint32();if(d===c)break;switch(d>>>3){case 1:{l.dataPoints&&l.dataPoints.length||(l.dataPoints=[]),l.dataPoints.push(_.opentelemetry.proto.metrics.v1.HistogramDataPoint.decode(o,o.uint32()));break}case 2:{l.aggregationTemporality=o.int32();break}default:o.skipType(d&7);break}}return l},s.decodeDelimited=function(o){return o instanceof O||(o=new O(o)),this.decode(o,o.uint32())},s.verify=function(o){if(typeof o!="object"||o===null)return "object expected";if(o.dataPoints!=null&&o.hasOwnProperty("dataPoints")){if(!Array.isArray(o.dataPoints))return "dataPoints: array expected";for(var i=0;i<o.dataPoints.length;++i){var c=_.opentelemetry.proto.metrics.v1.HistogramDataPoint.verify(o.dataPoints[i]);if(c)return "dataPoints."+c}}if(o.aggregationTemporality!=null&&o.hasOwnProperty("aggregationTemporality"))switch(o.aggregationTemporality){default:return "aggregationTemporality: enum value expected";case 0:case 1:case 2:break}return null},s.fromObject=function(o){if(o instanceof _.opentelemetry.proto.metrics.v1.Histogram)return o;var i=new _.opentelemetry.proto.metrics.v1.Histogram;if(o.dataPoints){if(!Array.isArray(o.dataPoints))throw TypeError(".opentelemetry.proto.metrics.v1.Histogram.dataPoints: array expected");i.dataPoints=[];for(var c=0;c<o.dataPoints.length;++c){if(typeof o.dataPoints[c]!="object")throw TypeError(".opentelemetry.proto.metrics.v1.Histogram.dataPoints: object expected");i.dataPoints[c]=_.opentelemetry.proto.metrics.v1.HistogramDataPoint.fromObject(o.dataPoints[c]);}}switch(o.aggregationTemporality){default:if(typeof o.aggregationTemporality=="number"){i.aggregationTemporality=o.aggregationTemporality;break}break;case "AGGREGATION_TEMPORALITY_UNSPECIFIED":case 0:i.aggregationTemporality=0;break;case "AGGREGATION_TEMPORALITY_DELTA":case 1:i.aggregationTemporality=1;break;case "AGGREGATION_TEMPORALITY_CUMULATIVE":case 2:i.aggregationTemporality=2;break}return i},s.toObject=function(o,i){i||(i={});var c={};if((i.arrays||i.defaults)&&(c.dataPoints=[]),i.defaults&&(c.aggregationTemporality=i.enums===String?"AGGREGATION_TEMPORALITY_UNSPECIFIED":0),o.dataPoints&&o.dataPoints.length){c.dataPoints=[];for(var u=0;u<o.dataPoints.length;++u)c.dataPoints[u]=_.opentelemetry.proto.metrics.v1.HistogramDataPoint.toObject(o.dataPoints[u],i);}return o.aggregationTemporality!=null&&o.hasOwnProperty("aggregationTemporality")&&(c.aggregationTemporality=i.enums===String?_.opentelemetry.proto.metrics.v1.AggregationTemporality[o.aggregationTemporality]===void 0?o.aggregationTemporality:_.opentelemetry.proto.metrics.v1.AggregationTemporality[o.aggregationTemporality]:o.aggregationTemporality),c},s.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},s.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/opentelemetry.proto.metrics.v1.Histogram"},s}(),n.ExponentialHistogram=function(){function s(a){if(this.dataPoints=[],a)for(var o=Object.keys(a),i=0;i<o.length;++i)a[o[i]]!=null&&(this[o[i]]=a[o[i]]);}return s.prototype.dataPoints=m.emptyArray,s.prototype.aggregationTemporality=null,s.create=function(o){return new s(o)},s.encode=function(o,i){if(i||(i=fe.create()),o.dataPoints!=null&&o.dataPoints.length)for(var c=0;c<o.dataPoints.length;++c)_.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.encode(o.dataPoints[c],i.uint32(10).fork()).ldelim();return o.aggregationTemporality!=null&&Object.hasOwnProperty.call(o,"aggregationTemporality")&&i.uint32(16).int32(o.aggregationTemporality),i},s.encodeDelimited=function(o,i){return this.encode(o,i).ldelim()},s.decode=function(o,i,c){o instanceof O||(o=O.create(o));for(var u=i===void 0?o.len:o.pos+i,l=new _.opentelemetry.proto.metrics.v1.ExponentialHistogram;o.pos<u;){var d=o.uint32();if(d===c)break;switch(d>>>3){case 1:{l.dataPoints&&l.dataPoints.length||(l.dataPoints=[]),l.dataPoints.push(_.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.decode(o,o.uint32()));break}case 2:{l.aggregationTemporality=o.int32();break}default:o.skipType(d&7);break}}return l},s.decodeDelimited=function(o){return o instanceof O||(o=new O(o)),this.decode(o,o.uint32())},s.verify=function(o){if(typeof o!="object"||o===null)return "object expected";if(o.dataPoints!=null&&o.hasOwnProperty("dataPoints")){if(!Array.isArray(o.dataPoints))return "dataPoints: array expected";for(var i=0;i<o.dataPoints.length;++i){var c=_.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.verify(o.dataPoints[i]);if(c)return "dataPoints."+c}}if(o.aggregationTemporality!=null&&o.hasOwnProperty("aggregationTemporality"))switch(o.aggregationTemporality){default:return "aggregationTemporality: enum value expected";case 0:case 1:case 2:break}return null},s.fromObject=function(o){if(o instanceof _.opentelemetry.proto.metrics.v1.ExponentialHistogram)return o;var i=new _.opentelemetry.proto.metrics.v1.ExponentialHistogram;if(o.dataPoints){if(!Array.isArray(o.dataPoints))throw TypeError(".opentelemetry.proto.metrics.v1.ExponentialHistogram.dataPoints: array expected");i.dataPoints=[];for(var c=0;c<o.dataPoints.length;++c){if(typeof o.dataPoints[c]!="object")throw TypeError(".opentelemetry.proto.metrics.v1.ExponentialHistogram.dataPoints: object expected");i.dataPoints[c]=_.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.fromObject(o.dataPoints[c]);}}switch(o.aggregationTemporality){default:if(typeof o.aggregationTemporality=="number"){i.aggregationTemporality=o.aggregationTemporality;break}break;case "AGGREGATION_TEMPORALITY_UNSPECIFIED":case 0:i.aggregationTemporality=0;break;case "AGGREGATION_TEMPORALITY_DELTA":case 1:i.aggregationTemporality=1;break;case "AGGREGATION_TEMPORALITY_CUMULATIVE":case 2:i.aggregationTemporality=2;break}return i},s.toObject=function(o,i){i||(i={});var c={};if((i.arrays||i.defaults)&&(c.dataPoints=[]),i.defaults&&(c.aggregationTemporality=i.enums===String?"AGGREGATION_TEMPORALITY_UNSPECIFIED":0),o.dataPoints&&o.dataPoints.length){c.dataPoints=[];for(var u=0;u<o.dataPoints.length;++u)c.dataPoints[u]=_.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.toObject(o.dataPoints[u],i);}return o.aggregationTemporality!=null&&o.hasOwnProperty("aggregationTemporality")&&(c.aggregationTemporality=i.enums===String?_.opentelemetry.proto.metrics.v1.AggregationTemporality[o.aggregationTemporality]===void 0?o.aggregationTemporality:_.opentelemetry.proto.metrics.v1.AggregationTemporality[o.aggregationTemporality]:o.aggregationTemporality),c},s.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},s.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/opentelemetry.proto.metrics.v1.ExponentialHistogram"},s}(),n.Summary=function(){function s(a){if(this.dataPoints=[],a)for(var o=Object.keys(a),i=0;i<o.length;++i)a[o[i]]!=null&&(this[o[i]]=a[o[i]]);}return s.prototype.dataPoints=m.emptyArray,s.create=function(o){return new s(o)},s.encode=function(o,i){if(i||(i=fe.create()),o.dataPoints!=null&&o.dataPoints.length)for(var c=0;c<o.dataPoints.length;++c)_.opentelemetry.proto.metrics.v1.SummaryDataPoint.encode(o.dataPoints[c],i.uint32(10).fork()).ldelim();return i},s.encodeDelimited=function(o,i){return this.encode(o,i).ldelim()},s.decode=function(o,i,c){o instanceof O||(o=O.create(o));for(var u=i===void 0?o.len:o.pos+i,l=new _.opentelemetry.proto.metrics.v1.Summary;o.pos<u;){var d=o.uint32();if(d===c)break;switch(d>>>3){case 1:{l.dataPoints&&l.dataPoints.length||(l.dataPoints=[]),l.dataPoints.push(_.opentelemetry.proto.metrics.v1.SummaryDataPoint.decode(o,o.uint32()));break}default:o.skipType(d&7);break}}return l},s.decodeDelimited=function(o){return o instanceof O||(o=new O(o)),this.decode(o,o.uint32())},s.verify=function(o){if(typeof o!="object"||o===null)return "object expected";if(o.dataPoints!=null&&o.hasOwnProperty("dataPoints")){if(!Array.isArray(o.dataPoints))return "dataPoints: array expected";for(var i=0;i<o.dataPoints.length;++i){var c=_.opentelemetry.proto.metrics.v1.SummaryDataPoint.verify(o.dataPoints[i]);if(c)return "dataPoints."+c}}return null},s.fromObject=function(o){if(o instanceof _.opentelemetry.proto.metrics.v1.Summary)return o;var i=new _.opentelemetry.proto.metrics.v1.Summary;if(o.dataPoints){if(!Array.isArray(o.dataPoints))throw TypeError(".opentelemetry.proto.metrics.v1.Summary.dataPoints: array expected");i.dataPoints=[];for(var c=0;c<o.dataPoints.length;++c){if(typeof o.dataPoints[c]!="object")throw TypeError(".opentelemetry.proto.metrics.v1.Summary.dataPoints: object expected");i.dataPoints[c]=_.opentelemetry.proto.metrics.v1.SummaryDataPoint.fromObject(o.dataPoints[c]);}}return i},s.toObject=function(o,i){i||(i={});var c={};if((i.arrays||i.defaults)&&(c.dataPoints=[]),o.dataPoints&&o.dataPoints.length){c.dataPoints=[];for(var u=0;u<o.dataPoints.length;++u)c.dataPoints[u]=_.opentelemetry.proto.metrics.v1.SummaryDataPoint.toObject(o.dataPoints[u],i);}return c},s.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},s.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/opentelemetry.proto.metrics.v1.Summary"},s}(),n.AggregationTemporality=function(){var s={},a=Object.create(s);return a[s[0]="AGGREGATION_TEMPORALITY_UNSPECIFIED"]=0,a[s[1]="AGGREGATION_TEMPORALITY_DELTA"]=1,a[s[2]="AGGREGATION_TEMPORALITY_CUMULATIVE"]=2,a}(),n.DataPointFlags=function(){var s={},a=Object.create(s);return a[s[0]="DATA_POINT_FLAGS_DO_NOT_USE"]=0,a[s[1]="DATA_POINT_FLAGS_NO_RECORDED_VALUE_MASK"]=1,a}(),n.NumberDataPoint=function(){function s(o){if(this.attributes=[],this.exemplars=[],o)for(var i=Object.keys(o),c=0;c<i.length;++c)o[i[c]]!=null&&(this[i[c]]=o[i[c]]);}s.prototype.attributes=m.emptyArray,s.prototype.startTimeUnixNano=null,s.prototype.timeUnixNano=null,s.prototype.asDouble=null,s.prototype.asInt=null,s.prototype.exemplars=m.emptyArray,s.prototype.flags=null;var a;return Object.defineProperty(s.prototype,"value",{get:m.oneOfGetter(a=["asDouble","asInt"]),set:m.oneOfSetter(a)}),s.create=function(i){return new s(i)},s.encode=function(i,c){if(c||(c=fe.create()),i.startTimeUnixNano!=null&&Object.hasOwnProperty.call(i,"startTimeUnixNano")&&c.uint32(17).fixed64(i.startTimeUnixNano),i.timeUnixNano!=null&&Object.hasOwnProperty.call(i,"timeUnixNano")&&c.uint32(25).fixed64(i.timeUnixNano),i.asDouble!=null&&Object.hasOwnProperty.call(i,"asDouble")&&c.uint32(33).double(i.asDouble),i.exemplars!=null&&i.exemplars.length)for(var u=0;u<i.exemplars.length;++u)_.opentelemetry.proto.metrics.v1.Exemplar.encode(i.exemplars[u],c.uint32(42).fork()).ldelim();if(i.asInt!=null&&Object.hasOwnProperty.call(i,"asInt")&&c.uint32(49).sfixed64(i.asInt),i.attributes!=null&&i.attributes.length)for(var u=0;u<i.attributes.length;++u)_.opentelemetry.proto.common.v1.KeyValue.encode(i.attributes[u],c.uint32(58).fork()).ldelim();return i.flags!=null&&Object.hasOwnProperty.call(i,"flags")&&c.uint32(64).uint32(i.flags),c},s.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},s.decode=function(i,c,u){i instanceof O||(i=O.create(i));for(var l=c===void 0?i.len:i.pos+c,d=new _.opentelemetry.proto.metrics.v1.NumberDataPoint;i.pos<l;){var p=i.uint32();if(p===u)break;switch(p>>>3){case 7:{d.attributes&&d.attributes.length||(d.attributes=[]),d.attributes.push(_.opentelemetry.proto.common.v1.KeyValue.decode(i,i.uint32()));break}case 2:{d.startTimeUnixNano=i.fixed64();break}case 3:{d.timeUnixNano=i.fixed64();break}case 4:{d.asDouble=i.double();break}case 6:{d.asInt=i.sfixed64();break}case 5:{d.exemplars&&d.exemplars.length||(d.exemplars=[]),d.exemplars.push(_.opentelemetry.proto.metrics.v1.Exemplar.decode(i,i.uint32()));break}case 8:{d.flags=i.uint32();break}default:i.skipType(p&7);break}}return d},s.decodeDelimited=function(i){return i instanceof O||(i=new O(i)),this.decode(i,i.uint32())},s.verify=function(i){if(typeof i!="object"||i===null)return "object expected";var c={};if(i.attributes!=null&&i.hasOwnProperty("attributes")){if(!Array.isArray(i.attributes))return "attributes: array expected";for(var u=0;u<i.attributes.length;++u){var l=_.opentelemetry.proto.common.v1.KeyValue.verify(i.attributes[u]);if(l)return "attributes."+l}}if(i.startTimeUnixNano!=null&&i.hasOwnProperty("startTimeUnixNano")&&!m.isInteger(i.startTimeUnixNano)&&!(i.startTimeUnixNano&&m.isInteger(i.startTimeUnixNano.low)&&m.isInteger(i.startTimeUnixNano.high)))return "startTimeUnixNano: integer|Long expected";if(i.timeUnixNano!=null&&i.hasOwnProperty("timeUnixNano")&&!m.isInteger(i.timeUnixNano)&&!(i.timeUnixNano&&m.isInteger(i.timeUnixNano.low)&&m.isInteger(i.timeUnixNano.high)))return "timeUnixNano: integer|Long expected";if(i.asDouble!=null&&i.hasOwnProperty("asDouble")&&(c.value=1,typeof i.asDouble!="number"))return "asDouble: number expected";if(i.asInt!=null&&i.hasOwnProperty("asInt")){if(c.value===1)return "value: multiple values";if(c.value=1,!m.isInteger(i.asInt)&&!(i.asInt&&m.isInteger(i.asInt.low)&&m.isInteger(i.asInt.high)))return "asInt: integer|Long expected"}if(i.exemplars!=null&&i.hasOwnProperty("exemplars")){if(!Array.isArray(i.exemplars))return "exemplars: array expected";for(var u=0;u<i.exemplars.length;++u){var l=_.opentelemetry.proto.metrics.v1.Exemplar.verify(i.exemplars[u]);if(l)return "exemplars."+l}}return i.flags!=null&&i.hasOwnProperty("flags")&&!m.isInteger(i.flags)?"flags: integer expected":null},s.fromObject=function(i){if(i instanceof _.opentelemetry.proto.metrics.v1.NumberDataPoint)return i;var c=new _.opentelemetry.proto.metrics.v1.NumberDataPoint;if(i.attributes){if(!Array.isArray(i.attributes))throw TypeError(".opentelemetry.proto.metrics.v1.NumberDataPoint.attributes: array expected");c.attributes=[];for(var u=0;u<i.attributes.length;++u){if(typeof i.attributes[u]!="object")throw TypeError(".opentelemetry.proto.metrics.v1.NumberDataPoint.attributes: object expected");c.attributes[u]=_.opentelemetry.proto.common.v1.KeyValue.fromObject(i.attributes[u]);}}if(i.startTimeUnixNano!=null&&(m.Long?(c.startTimeUnixNano=m.Long.fromValue(i.startTimeUnixNano)).unsigned=false:typeof i.startTimeUnixNano=="string"?c.startTimeUnixNano=parseInt(i.startTimeUnixNano,10):typeof i.startTimeUnixNano=="number"?c.startTimeUnixNano=i.startTimeUnixNano:typeof i.startTimeUnixNano=="object"&&(c.startTimeUnixNano=new m.LongBits(i.startTimeUnixNano.low>>>0,i.startTimeUnixNano.high>>>0).toNumber())),i.timeUnixNano!=null&&(m.Long?(c.timeUnixNano=m.Long.fromValue(i.timeUnixNano)).unsigned=false:typeof i.timeUnixNano=="string"?c.timeUnixNano=parseInt(i.timeUnixNano,10):typeof i.timeUnixNano=="number"?c.timeUnixNano=i.timeUnixNano:typeof i.timeUnixNano=="object"&&(c.timeUnixNano=new m.LongBits(i.timeUnixNano.low>>>0,i.timeUnixNano.high>>>0).toNumber())),i.asDouble!=null&&(c.asDouble=Number(i.asDouble)),i.asInt!=null&&(m.Long?(c.asInt=m.Long.fromValue(i.asInt)).unsigned=false:typeof i.asInt=="string"?c.asInt=parseInt(i.asInt,10):typeof i.asInt=="number"?c.asInt=i.asInt:typeof i.asInt=="object"&&(c.asInt=new m.LongBits(i.asInt.low>>>0,i.asInt.high>>>0).toNumber())),i.exemplars){if(!Array.isArray(i.exemplars))throw TypeError(".opentelemetry.proto.metrics.v1.NumberDataPoint.exemplars: array expected");c.exemplars=[];for(var u=0;u<i.exemplars.length;++u){if(typeof i.exemplars[u]!="object")throw TypeError(".opentelemetry.proto.metrics.v1.NumberDataPoint.exemplars: object expected");c.exemplars[u]=_.opentelemetry.proto.metrics.v1.Exemplar.fromObject(i.exemplars[u]);}}return i.flags!=null&&(c.flags=i.flags>>>0),c},s.toObject=function(i,c){c||(c={});var u={};if((c.arrays||c.defaults)&&(u.exemplars=[],u.attributes=[]),c.defaults){if(m.Long){var l=new m.Long(0,0,false);u.startTimeUnixNano=c.longs===String?l.toString():c.longs===Number?l.toNumber():l;}else u.startTimeUnixNano=c.longs===String?"0":0;if(m.Long){var l=new m.Long(0,0,false);u.timeUnixNano=c.longs===String?l.toString():c.longs===Number?l.toNumber():l;}else u.timeUnixNano=c.longs===String?"0":0;u.flags=0;}if(i.startTimeUnixNano!=null&&i.hasOwnProperty("startTimeUnixNano")&&(typeof i.startTimeUnixNano=="number"?u.startTimeUnixNano=c.longs===String?String(i.startTimeUnixNano):i.startTimeUnixNano:u.startTimeUnixNano=c.longs===String?m.Long.prototype.toString.call(i.startTimeUnixNano):c.longs===Number?new m.LongBits(i.startTimeUnixNano.low>>>0,i.startTimeUnixNano.high>>>0).toNumber():i.startTimeUnixNano),i.timeUnixNano!=null&&i.hasOwnProperty("timeUnixNano")&&(typeof i.timeUnixNano=="number"?u.timeUnixNano=c.longs===String?String(i.timeUnixNano):i.timeUnixNano:u.timeUnixNano=c.longs===String?m.Long.prototype.toString.call(i.timeUnixNano):c.longs===Number?new m.LongBits(i.timeUnixNano.low>>>0,i.timeUnixNano.high>>>0).toNumber():i.timeUnixNano),i.asDouble!=null&&i.hasOwnProperty("asDouble")&&(u.asDouble=c.json&&!isFinite(i.asDouble)?String(i.asDouble):i.asDouble,c.oneofs&&(u.value="asDouble")),i.exemplars&&i.exemplars.length){u.exemplars=[];for(var d=0;d<i.exemplars.length;++d)u.exemplars[d]=_.opentelemetry.proto.metrics.v1.Exemplar.toObject(i.exemplars[d],c);}if(i.asInt!=null&&i.hasOwnProperty("asInt")&&(typeof i.asInt=="number"?u.asInt=c.longs===String?String(i.asInt):i.asInt:u.asInt=c.longs===String?m.Long.prototype.toString.call(i.asInt):c.longs===Number?new m.LongBits(i.asInt.low>>>0,i.asInt.high>>>0).toNumber():i.asInt,c.oneofs&&(u.value="asInt")),i.attributes&&i.attributes.length){u.attributes=[];for(var d=0;d<i.attributes.length;++d)u.attributes[d]=_.opentelemetry.proto.common.v1.KeyValue.toObject(i.attributes[d],c);}return i.flags!=null&&i.hasOwnProperty("flags")&&(u.flags=i.flags),u},s.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},s.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/opentelemetry.proto.metrics.v1.NumberDataPoint"},s}(),n.HistogramDataPoint=function(){function s(o){if(this.attributes=[],this.bucketCounts=[],this.explicitBounds=[],this.exemplars=[],o)for(var i=Object.keys(o),c=0;c<i.length;++c)o[i[c]]!=null&&(this[i[c]]=o[i[c]]);}s.prototype.attributes=m.emptyArray,s.prototype.startTimeUnixNano=null,s.prototype.timeUnixNano=null,s.prototype.count=null,s.prototype.sum=null,s.prototype.bucketCounts=m.emptyArray,s.prototype.explicitBounds=m.emptyArray,s.prototype.exemplars=m.emptyArray,s.prototype.flags=null,s.prototype.min=null,s.prototype.max=null;var a;return Object.defineProperty(s.prototype,"_sum",{get:m.oneOfGetter(a=["sum"]),set:m.oneOfSetter(a)}),Object.defineProperty(s.prototype,"_min",{get:m.oneOfGetter(a=["min"]),set:m.oneOfSetter(a)}),Object.defineProperty(s.prototype,"_max",{get:m.oneOfGetter(a=["max"]),set:m.oneOfSetter(a)}),s.create=function(i){return new s(i)},s.encode=function(i,c){if(c||(c=fe.create()),i.startTimeUnixNano!=null&&Object.hasOwnProperty.call(i,"startTimeUnixNano")&&c.uint32(17).fixed64(i.startTimeUnixNano),i.timeUnixNano!=null&&Object.hasOwnProperty.call(i,"timeUnixNano")&&c.uint32(25).fixed64(i.timeUnixNano),i.count!=null&&Object.hasOwnProperty.call(i,"count")&&c.uint32(33).fixed64(i.count),i.sum!=null&&Object.hasOwnProperty.call(i,"sum")&&c.uint32(41).double(i.sum),i.bucketCounts!=null&&i.bucketCounts.length){c.uint32(50).fork();for(var u=0;u<i.bucketCounts.length;++u)c.fixed64(i.bucketCounts[u]);c.ldelim();}if(i.explicitBounds!=null&&i.explicitBounds.length){c.uint32(58).fork();for(var u=0;u<i.explicitBounds.length;++u)c.double(i.explicitBounds[u]);c.ldelim();}if(i.exemplars!=null&&i.exemplars.length)for(var u=0;u<i.exemplars.length;++u)_.opentelemetry.proto.metrics.v1.Exemplar.encode(i.exemplars[u],c.uint32(66).fork()).ldelim();if(i.attributes!=null&&i.attributes.length)for(var u=0;u<i.attributes.length;++u)_.opentelemetry.proto.common.v1.KeyValue.encode(i.attributes[u],c.uint32(74).fork()).ldelim();return i.flags!=null&&Object.hasOwnProperty.call(i,"flags")&&c.uint32(80).uint32(i.flags),i.min!=null&&Object.hasOwnProperty.call(i,"min")&&c.uint32(89).double(i.min),i.max!=null&&Object.hasOwnProperty.call(i,"max")&&c.uint32(97).double(i.max),c},s.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},s.decode=function(i,c,u){i instanceof O||(i=O.create(i));for(var l=c===void 0?i.len:i.pos+c,d=new _.opentelemetry.proto.metrics.v1.HistogramDataPoint;i.pos<l;){var p=i.uint32();if(p===u)break;switch(p>>>3){case 9:{d.attributes&&d.attributes.length||(d.attributes=[]),d.attributes.push(_.opentelemetry.proto.common.v1.KeyValue.decode(i,i.uint32()));break}case 2:{d.startTimeUnixNano=i.fixed64();break}case 3:{d.timeUnixNano=i.fixed64();break}case 4:{d.count=i.fixed64();break}case 5:{d.sum=i.double();break}case 6:{if(d.bucketCounts&&d.bucketCounts.length||(d.bucketCounts=[]),(p&7)===2)for(var h=i.uint32()+i.pos;i.pos<h;)d.bucketCounts.push(i.fixed64());else d.bucketCounts.push(i.fixed64());break}case 7:{if(d.explicitBounds&&d.explicitBounds.length||(d.explicitBounds=[]),(p&7)===2)for(var h=i.uint32()+i.pos;i.pos<h;)d.explicitBounds.push(i.double());else d.explicitBounds.push(i.double());break}case 8:{d.exemplars&&d.exemplars.length||(d.exemplars=[]),d.exemplars.push(_.opentelemetry.proto.metrics.v1.Exemplar.decode(i,i.uint32()));break}case 10:{d.flags=i.uint32();break}case 11:{d.min=i.double();break}case 12:{d.max=i.double();break}default:i.skipType(p&7);break}}return d},s.decodeDelimited=function(i){return i instanceof O||(i=new O(i)),this.decode(i,i.uint32())},s.verify=function(i){if(typeof i!="object"||i===null)return "object expected";if(i.attributes!=null&&i.hasOwnProperty("attributes")){if(!Array.isArray(i.attributes))return "attributes: array expected";for(var u=0;u<i.attributes.length;++u){var l=_.opentelemetry.proto.common.v1.KeyValue.verify(i.attributes[u]);if(l)return "attributes."+l}}if(i.startTimeUnixNano!=null&&i.hasOwnProperty("startTimeUnixNano")&&!m.isInteger(i.startTimeUnixNano)&&!(i.startTimeUnixNano&&m.isInteger(i.startTimeUnixNano.low)&&m.isInteger(i.startTimeUnixNano.high)))return "startTimeUnixNano: integer|Long expected";if(i.timeUnixNano!=null&&i.hasOwnProperty("timeUnixNano")&&!m.isInteger(i.timeUnixNano)&&!(i.timeUnixNano&&m.isInteger(i.timeUnixNano.low)&&m.isInteger(i.timeUnixNano.high)))return "timeUnixNano: integer|Long expected";if(i.count!=null&&i.hasOwnProperty("count")&&!m.isInteger(i.count)&&!(i.count&&m.isInteger(i.count.low)&&m.isInteger(i.count.high)))return "count: integer|Long expected";if(i.sum!=null&&i.hasOwnProperty("sum")&&(typeof i.sum!="number"))return "sum: number expected";if(i.bucketCounts!=null&&i.hasOwnProperty("bucketCounts")){if(!Array.isArray(i.bucketCounts))return "bucketCounts: array expected";for(var u=0;u<i.bucketCounts.length;++u)if(!m.isInteger(i.bucketCounts[u])&&!(i.bucketCounts[u]&&m.isInteger(i.bucketCounts[u].low)&&m.isInteger(i.bucketCounts[u].high)))return "bucketCounts: integer|Long[] expected"}if(i.explicitBounds!=null&&i.hasOwnProperty("explicitBounds")){if(!Array.isArray(i.explicitBounds))return "explicitBounds: array expected";for(var u=0;u<i.explicitBounds.length;++u)if(typeof i.explicitBounds[u]!="number")return "explicitBounds: number[] expected"}if(i.exemplars!=null&&i.hasOwnProperty("exemplars")){if(!Array.isArray(i.exemplars))return "exemplars: array expected";for(var u=0;u<i.exemplars.length;++u){var l=_.opentelemetry.proto.metrics.v1.Exemplar.verify(i.exemplars[u]);if(l)return "exemplars."+l}}return i.flags!=null&&i.hasOwnProperty("flags")&&!m.isInteger(i.flags)?"flags: integer expected":i.min!=null&&i.hasOwnProperty("min")&&(typeof i.min!="number")?"min: number expected":i.max!=null&&i.hasOwnProperty("max")&&(typeof i.max!="number")?"max: number expected":null},s.fromObject=function(i){if(i instanceof _.opentelemetry.proto.metrics.v1.HistogramDataPoint)return i;var c=new _.opentelemetry.proto.metrics.v1.HistogramDataPoint;if(i.attributes){if(!Array.isArray(i.attributes))throw TypeError(".opentelemetry.proto.metrics.v1.HistogramDataPoint.attributes: array expected");c.attributes=[];for(var u=0;u<i.attributes.length;++u){if(typeof i.attributes[u]!="object")throw TypeError(".opentelemetry.proto.metrics.v1.HistogramDataPoint.attributes: object expected");c.attributes[u]=_.opentelemetry.proto.common.v1.KeyValue.fromObject(i.attributes[u]);}}if(i.startTimeUnixNano!=null&&(m.Long?(c.startTimeUnixNano=m.Long.fromValue(i.startTimeUnixNano)).unsigned=false:typeof i.startTimeUnixNano=="string"?c.startTimeUnixNano=parseInt(i.startTimeUnixNano,10):typeof i.startTimeUnixNano=="number"?c.startTimeUnixNano=i.startTimeUnixNano:typeof i.startTimeUnixNano=="object"&&(c.startTimeUnixNano=new m.LongBits(i.startTimeUnixNano.low>>>0,i.startTimeUnixNano.high>>>0).toNumber())),i.timeUnixNano!=null&&(m.Long?(c.timeUnixNano=m.Long.fromValue(i.timeUnixNano)).unsigned=false:typeof i.timeUnixNano=="string"?c.timeUnixNano=parseInt(i.timeUnixNano,10):typeof i.timeUnixNano=="number"?c.timeUnixNano=i.timeUnixNano:typeof i.timeUnixNano=="object"&&(c.timeUnixNano=new m.LongBits(i.timeUnixNano.low>>>0,i.timeUnixNano.high>>>0).toNumber())),i.count!=null&&(m.Long?(c.count=m.Long.fromValue(i.count)).unsigned=false:typeof i.count=="string"?c.count=parseInt(i.count,10):typeof i.count=="number"?c.count=i.count:typeof i.count=="object"&&(c.count=new m.LongBits(i.count.low>>>0,i.count.high>>>0).toNumber())),i.sum!=null&&(c.sum=Number(i.sum)),i.bucketCounts){if(!Array.isArray(i.bucketCounts))throw TypeError(".opentelemetry.proto.metrics.v1.HistogramDataPoint.bucketCounts: array expected");c.bucketCounts=[];for(var u=0;u<i.bucketCounts.length;++u)m.Long?(c.bucketCounts[u]=m.Long.fromValue(i.bucketCounts[u])).unsigned=false:typeof i.bucketCounts[u]=="string"?c.bucketCounts[u]=parseInt(i.bucketCounts[u],10):typeof i.bucketCounts[u]=="number"?c.bucketCounts[u]=i.bucketCounts[u]:typeof i.bucketCounts[u]=="object"&&(c.bucketCounts[u]=new m.LongBits(i.bucketCounts[u].low>>>0,i.bucketCounts[u].high>>>0).toNumber());}if(i.explicitBounds){if(!Array.isArray(i.explicitBounds))throw TypeError(".opentelemetry.proto.metrics.v1.HistogramDataPoint.explicitBounds: array expected");c.explicitBounds=[];for(var u=0;u<i.explicitBounds.length;++u)c.explicitBounds[u]=Number(i.explicitBounds[u]);}if(i.exemplars){if(!Array.isArray(i.exemplars))throw TypeError(".opentelemetry.proto.metrics.v1.HistogramDataPoint.exemplars: array expected");c.exemplars=[];for(var u=0;u<i.exemplars.length;++u){if(typeof i.exemplars[u]!="object")throw TypeError(".opentelemetry.proto.metrics.v1.HistogramDataPoint.exemplars: object expected");c.exemplars[u]=_.opentelemetry.proto.metrics.v1.Exemplar.fromObject(i.exemplars[u]);}}return i.flags!=null&&(c.flags=i.flags>>>0),i.min!=null&&(c.min=Number(i.min)),i.max!=null&&(c.max=Number(i.max)),c},s.toObject=function(i,c){c||(c={});var u={};if((c.arrays||c.defaults)&&(u.bucketCounts=[],u.explicitBounds=[],u.exemplars=[],u.attributes=[]),c.defaults){if(m.Long){var l=new m.Long(0,0,false);u.startTimeUnixNano=c.longs===String?l.toString():c.longs===Number?l.toNumber():l;}else u.startTimeUnixNano=c.longs===String?"0":0;if(m.Long){var l=new m.Long(0,0,false);u.timeUnixNano=c.longs===String?l.toString():c.longs===Number?l.toNumber():l;}else u.timeUnixNano=c.longs===String?"0":0;if(m.Long){var l=new m.Long(0,0,false);u.count=c.longs===String?l.toString():c.longs===Number?l.toNumber():l;}else u.count=c.longs===String?"0":0;u.flags=0;}if(i.startTimeUnixNano!=null&&i.hasOwnProperty("startTimeUnixNano")&&(typeof i.startTimeUnixNano=="number"?u.startTimeUnixNano=c.longs===String?String(i.startTimeUnixNano):i.startTimeUnixNano:u.startTimeUnixNano=c.longs===String?m.Long.prototype.toString.call(i.startTimeUnixNano):c.longs===Number?new m.LongBits(i.startTimeUnixNano.low>>>0,i.startTimeUnixNano.high>>>0).toNumber():i.startTimeUnixNano),i.timeUnixNano!=null&&i.hasOwnProperty("timeUnixNano")&&(typeof i.timeUnixNano=="number"?u.timeUnixNano=c.longs===String?String(i.timeUnixNano):i.timeUnixNano:u.timeUnixNano=c.longs===String?m.Long.prototype.toString.call(i.timeUnixNano):c.longs===Number?new m.LongBits(i.timeUnixNano.low>>>0,i.timeUnixNano.high>>>0).toNumber():i.timeUnixNano),i.count!=null&&i.hasOwnProperty("count")&&(typeof i.count=="number"?u.count=c.longs===String?String(i.count):i.count:u.count=c.longs===String?m.Long.prototype.toString.call(i.count):c.longs===Number?new m.LongBits(i.count.low>>>0,i.count.high>>>0).toNumber():i.count),i.sum!=null&&i.hasOwnProperty("sum")&&(u.sum=c.json&&!isFinite(i.sum)?String(i.sum):i.sum,c.oneofs&&(u._sum="sum")),i.bucketCounts&&i.bucketCounts.length){u.bucketCounts=[];for(var d=0;d<i.bucketCounts.length;++d)typeof i.bucketCounts[d]=="number"?u.bucketCounts[d]=c.longs===String?String(i.bucketCounts[d]):i.bucketCounts[d]:u.bucketCounts[d]=c.longs===String?m.Long.prototype.toString.call(i.bucketCounts[d]):c.longs===Number?new m.LongBits(i.bucketCounts[d].low>>>0,i.bucketCounts[d].high>>>0).toNumber():i.bucketCounts[d];}if(i.explicitBounds&&i.explicitBounds.length){u.explicitBounds=[];for(var d=0;d<i.explicitBounds.length;++d)u.explicitBounds[d]=c.json&&!isFinite(i.explicitBounds[d])?String(i.explicitBounds[d]):i.explicitBounds[d];}if(i.exemplars&&i.exemplars.length){u.exemplars=[];for(var d=0;d<i.exemplars.length;++d)u.exemplars[d]=_.opentelemetry.proto.metrics.v1.Exemplar.toObject(i.exemplars[d],c);}if(i.attributes&&i.attributes.length){u.attributes=[];for(var d=0;d<i.attributes.length;++d)u.attributes[d]=_.opentelemetry.proto.common.v1.KeyValue.toObject(i.attributes[d],c);}return i.flags!=null&&i.hasOwnProperty("flags")&&(u.flags=i.flags),i.min!=null&&i.hasOwnProperty("min")&&(u.min=c.json&&!isFinite(i.min)?String(i.min):i.min,c.oneofs&&(u._min="min")),i.max!=null&&i.hasOwnProperty("max")&&(u.max=c.json&&!isFinite(i.max)?String(i.max):i.max,c.oneofs&&(u._max="max")),u},s.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},s.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/opentelemetry.proto.metrics.v1.HistogramDataPoint"},s}(),n.ExponentialHistogramDataPoint=function(){function s(o){if(this.attributes=[],this.exemplars=[],o)for(var i=Object.keys(o),c=0;c<i.length;++c)o[i[c]]!=null&&(this[i[c]]=o[i[c]]);}s.prototype.attributes=m.emptyArray,s.prototype.startTimeUnixNano=null,s.prototype.timeUnixNano=null,s.prototype.count=null,s.prototype.sum=null,s.prototype.scale=null,s.prototype.zeroCount=null,s.prototype.positive=null,s.prototype.negative=null,s.prototype.flags=null,s.prototype.exemplars=m.emptyArray,s.prototype.min=null,s.prototype.max=null,s.prototype.zeroThreshold=null;var a;return Object.defineProperty(s.prototype,"_sum",{get:m.oneOfGetter(a=["sum"]),set:m.oneOfSetter(a)}),Object.defineProperty(s.prototype,"_min",{get:m.oneOfGetter(a=["min"]),set:m.oneOfSetter(a)}),Object.defineProperty(s.prototype,"_max",{get:m.oneOfGetter(a=["max"]),set:m.oneOfSetter(a)}),s.create=function(i){return new s(i)},s.encode=function(i,c){if(c||(c=fe.create()),i.attributes!=null&&i.attributes.length)for(var u=0;u<i.attributes.length;++u)_.opentelemetry.proto.common.v1.KeyValue.encode(i.attributes[u],c.uint32(10).fork()).ldelim();if(i.startTimeUnixNano!=null&&Object.hasOwnProperty.call(i,"startTimeUnixNano")&&c.uint32(17).fixed64(i.startTimeUnixNano),i.timeUnixNano!=null&&Object.hasOwnProperty.call(i,"timeUnixNano")&&c.uint32(25).fixed64(i.timeUnixNano),i.count!=null&&Object.hasOwnProperty.call(i,"count")&&c.uint32(33).fixed64(i.count),i.sum!=null&&Object.hasOwnProperty.call(i,"sum")&&c.uint32(41).double(i.sum),i.scale!=null&&Object.hasOwnProperty.call(i,"scale")&&c.uint32(48).sint32(i.scale),i.zeroCount!=null&&Object.hasOwnProperty.call(i,"zeroCount")&&c.uint32(57).fixed64(i.zeroCount),i.positive!=null&&Object.hasOwnProperty.call(i,"positive")&&_.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.encode(i.positive,c.uint32(66).fork()).ldelim(),i.negative!=null&&Object.hasOwnProperty.call(i,"negative")&&_.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.encode(i.negative,c.uint32(74).fork()).ldelim(),i.flags!=null&&Object.hasOwnProperty.call(i,"flags")&&c.uint32(80).uint32(i.flags),i.exemplars!=null&&i.exemplars.length)for(var u=0;u<i.exemplars.length;++u)_.opentelemetry.proto.metrics.v1.Exemplar.encode(i.exemplars[u],c.uint32(90).fork()).ldelim();return i.min!=null&&Object.hasOwnProperty.call(i,"min")&&c.uint32(97).double(i.min),i.max!=null&&Object.hasOwnProperty.call(i,"max")&&c.uint32(105).double(i.max),i.zeroThreshold!=null&&Object.hasOwnProperty.call(i,"zeroThreshold")&&c.uint32(113).double(i.zeroThreshold),c},s.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},s.decode=function(i,c,u){i instanceof O||(i=O.create(i));for(var l=c===void 0?i.len:i.pos+c,d=new _.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint;i.pos<l;){var p=i.uint32();if(p===u)break;switch(p>>>3){case 1:{d.attributes&&d.attributes.length||(d.attributes=[]),d.attributes.push(_.opentelemetry.proto.common.v1.KeyValue.decode(i,i.uint32()));break}case 2:{d.startTimeUnixNano=i.fixed64();break}case 3:{d.timeUnixNano=i.fixed64();break}case 4:{d.count=i.fixed64();break}case 5:{d.sum=i.double();break}case 6:{d.scale=i.sint32();break}case 7:{d.zeroCount=i.fixed64();break}case 8:{d.positive=_.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.decode(i,i.uint32());break}case 9:{d.negative=_.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.decode(i,i.uint32());break}case 10:{d.flags=i.uint32();break}case 11:{d.exemplars&&d.exemplars.length||(d.exemplars=[]),d.exemplars.push(_.opentelemetry.proto.metrics.v1.Exemplar.decode(i,i.uint32()));break}case 12:{d.min=i.double();break}case 13:{d.max=i.double();break}case 14:{d.zeroThreshold=i.double();break}default:i.skipType(p&7);break}}return d},s.decodeDelimited=function(i){return i instanceof O||(i=new O(i)),this.decode(i,i.uint32())},s.verify=function(i){if(typeof i!="object"||i===null)return "object expected";if(i.attributes!=null&&i.hasOwnProperty("attributes")){if(!Array.isArray(i.attributes))return "attributes: array expected";for(var u=0;u<i.attributes.length;++u){var l=_.opentelemetry.proto.common.v1.KeyValue.verify(i.attributes[u]);if(l)return "attributes."+l}}if(i.startTimeUnixNano!=null&&i.hasOwnProperty("startTimeUnixNano")&&!m.isInteger(i.startTimeUnixNano)&&!(i.startTimeUnixNano&&m.isInteger(i.startTimeUnixNano.low)&&m.isInteger(i.startTimeUnixNano.high)))return "startTimeUnixNano: integer|Long expected";if(i.timeUnixNano!=null&&i.hasOwnProperty("timeUnixNano")&&!m.isInteger(i.timeUnixNano)&&!(i.timeUnixNano&&m.isInteger(i.timeUnixNano.low)&&m.isInteger(i.timeUnixNano.high)))return "timeUnixNano: integer|Long expected";if(i.count!=null&&i.hasOwnProperty("count")&&!m.isInteger(i.count)&&!(i.count&&m.isInteger(i.count.low)&&m.isInteger(i.count.high)))return "count: integer|Long expected";if(i.sum!=null&&i.hasOwnProperty("sum")&&(typeof i.sum!="number"))return "sum: number expected";if(i.scale!=null&&i.hasOwnProperty("scale")&&!m.isInteger(i.scale))return "scale: integer expected";if(i.zeroCount!=null&&i.hasOwnProperty("zeroCount")&&!m.isInteger(i.zeroCount)&&!(i.zeroCount&&m.isInteger(i.zeroCount.low)&&m.isInteger(i.zeroCount.high)))return "zeroCount: integer|Long expected";if(i.positive!=null&&i.hasOwnProperty("positive")){var l=_.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.verify(i.positive);if(l)return "positive."+l}if(i.negative!=null&&i.hasOwnProperty("negative")){var l=_.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.verify(i.negative);if(l)return "negative."+l}if(i.flags!=null&&i.hasOwnProperty("flags")&&!m.isInteger(i.flags))return "flags: integer expected";if(i.exemplars!=null&&i.hasOwnProperty("exemplars")){if(!Array.isArray(i.exemplars))return "exemplars: array expected";for(var u=0;u<i.exemplars.length;++u){var l=_.opentelemetry.proto.metrics.v1.Exemplar.verify(i.exemplars[u]);if(l)return "exemplars."+l}}return i.min!=null&&i.hasOwnProperty("min")&&(typeof i.min!="number")?"min: number expected":i.max!=null&&i.hasOwnProperty("max")&&(typeof i.max!="number")?"max: number expected":i.zeroThreshold!=null&&i.hasOwnProperty("zeroThreshold")&&typeof i.zeroThreshold!="number"?"zeroThreshold: number expected":null},s.fromObject=function(i){if(i instanceof _.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint)return i;var c=new _.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint;if(i.attributes){if(!Array.isArray(i.attributes))throw TypeError(".opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.attributes: array expected");c.attributes=[];for(var u=0;u<i.attributes.length;++u){if(typeof i.attributes[u]!="object")throw TypeError(".opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.attributes: object expected");c.attributes[u]=_.opentelemetry.proto.common.v1.KeyValue.fromObject(i.attributes[u]);}}if(i.startTimeUnixNano!=null&&(m.Long?(c.startTimeUnixNano=m.Long.fromValue(i.startTimeUnixNano)).unsigned=false:typeof i.startTimeUnixNano=="string"?c.startTimeUnixNano=parseInt(i.startTimeUnixNano,10):typeof i.startTimeUnixNano=="number"?c.startTimeUnixNano=i.startTimeUnixNano:typeof i.startTimeUnixNano=="object"&&(c.startTimeUnixNano=new m.LongBits(i.startTimeUnixNano.low>>>0,i.startTimeUnixNano.high>>>0).toNumber())),i.timeUnixNano!=null&&(m.Long?(c.timeUnixNano=m.Long.fromValue(i.timeUnixNano)).unsigned=false:typeof i.timeUnixNano=="string"?c.timeUnixNano=parseInt(i.timeUnixNano,10):typeof i.timeUnixNano=="number"?c.timeUnixNano=i.timeUnixNano:typeof i.timeUnixNano=="object"&&(c.timeUnixNano=new m.LongBits(i.timeUnixNano.low>>>0,i.timeUnixNano.high>>>0).toNumber())),i.count!=null&&(m.Long?(c.count=m.Long.fromValue(i.count)).unsigned=false:typeof i.count=="string"?c.count=parseInt(i.count,10):typeof i.count=="number"?c.count=i.count:typeof i.count=="object"&&(c.count=new m.LongBits(i.count.low>>>0,i.count.high>>>0).toNumber())),i.sum!=null&&(c.sum=Number(i.sum)),i.scale!=null&&(c.scale=i.scale|0),i.zeroCount!=null&&(m.Long?(c.zeroCount=m.Long.fromValue(i.zeroCount)).unsigned=false:typeof i.zeroCount=="string"?c.zeroCount=parseInt(i.zeroCount,10):typeof i.zeroCount=="number"?c.zeroCount=i.zeroCount:typeof i.zeroCount=="object"&&(c.zeroCount=new m.LongBits(i.zeroCount.low>>>0,i.zeroCount.high>>>0).toNumber())),i.positive!=null){if(typeof i.positive!="object")throw TypeError(".opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.positive: object expected");c.positive=_.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.fromObject(i.positive);}if(i.negative!=null){if(typeof i.negative!="object")throw TypeError(".opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.negative: object expected");c.negative=_.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.fromObject(i.negative);}if(i.flags!=null&&(c.flags=i.flags>>>0),i.exemplars){if(!Array.isArray(i.exemplars))throw TypeError(".opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.exemplars: array expected");c.exemplars=[];for(var u=0;u<i.exemplars.length;++u){if(typeof i.exemplars[u]!="object")throw TypeError(".opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.exemplars: object expected");c.exemplars[u]=_.opentelemetry.proto.metrics.v1.Exemplar.fromObject(i.exemplars[u]);}}return i.min!=null&&(c.min=Number(i.min)),i.max!=null&&(c.max=Number(i.max)),i.zeroThreshold!=null&&(c.zeroThreshold=Number(i.zeroThreshold)),c},s.toObject=function(i,c){c||(c={});var u={};if((c.arrays||c.defaults)&&(u.attributes=[],u.exemplars=[]),c.defaults){if(m.Long){var l=new m.Long(0,0,false);u.startTimeUnixNano=c.longs===String?l.toString():c.longs===Number?l.toNumber():l;}else u.startTimeUnixNano=c.longs===String?"0":0;if(m.Long){var l=new m.Long(0,0,false);u.timeUnixNano=c.longs===String?l.toString():c.longs===Number?l.toNumber():l;}else u.timeUnixNano=c.longs===String?"0":0;if(m.Long){var l=new m.Long(0,0,false);u.count=c.longs===String?l.toString():c.longs===Number?l.toNumber():l;}else u.count=c.longs===String?"0":0;if(u.scale=0,m.Long){var l=new m.Long(0,0,false);u.zeroCount=c.longs===String?l.toString():c.longs===Number?l.toNumber():l;}else u.zeroCount=c.longs===String?"0":0;u.positive=null,u.negative=null,u.flags=0,u.zeroThreshold=0;}if(i.attributes&&i.attributes.length){u.attributes=[];for(var d=0;d<i.attributes.length;++d)u.attributes[d]=_.opentelemetry.proto.common.v1.KeyValue.toObject(i.attributes[d],c);}if(i.startTimeUnixNano!=null&&i.hasOwnProperty("startTimeUnixNano")&&(typeof i.startTimeUnixNano=="number"?u.startTimeUnixNano=c.longs===String?String(i.startTimeUnixNano):i.startTimeUnixNano:u.startTimeUnixNano=c.longs===String?m.Long.prototype.toString.call(i.startTimeUnixNano):c.longs===Number?new m.LongBits(i.startTimeUnixNano.low>>>0,i.startTimeUnixNano.high>>>0).toNumber():i.startTimeUnixNano),i.timeUnixNano!=null&&i.hasOwnProperty("timeUnixNano")&&(typeof i.timeUnixNano=="number"?u.timeUnixNano=c.longs===String?String(i.timeUnixNano):i.timeUnixNano:u.timeUnixNano=c.longs===String?m.Long.prototype.toString.call(i.timeUnixNano):c.longs===Number?new m.LongBits(i.timeUnixNano.low>>>0,i.timeUnixNano.high>>>0).toNumber():i.timeUnixNano),i.count!=null&&i.hasOwnProperty("count")&&(typeof i.count=="number"?u.count=c.longs===String?String(i.count):i.count:u.count=c.longs===String?m.Long.prototype.toString.call(i.count):c.longs===Number?new m.LongBits(i.count.low>>>0,i.count.high>>>0).toNumber():i.count),i.sum!=null&&i.hasOwnProperty("sum")&&(u.sum=c.json&&!isFinite(i.sum)?String(i.sum):i.sum,c.oneofs&&(u._sum="sum")),i.scale!=null&&i.hasOwnProperty("scale")&&(u.scale=i.scale),i.zeroCount!=null&&i.hasOwnProperty("zeroCount")&&(typeof i.zeroCount=="number"?u.zeroCount=c.longs===String?String(i.zeroCount):i.zeroCount:u.zeroCount=c.longs===String?m.Long.prototype.toString.call(i.zeroCount):c.longs===Number?new m.LongBits(i.zeroCount.low>>>0,i.zeroCount.high>>>0).toNumber():i.zeroCount),i.positive!=null&&i.hasOwnProperty("positive")&&(u.positive=_.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.toObject(i.positive,c)),i.negative!=null&&i.hasOwnProperty("negative")&&(u.negative=_.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.toObject(i.negative,c)),i.flags!=null&&i.hasOwnProperty("flags")&&(u.flags=i.flags),i.exemplars&&i.exemplars.length){u.exemplars=[];for(var d=0;d<i.exemplars.length;++d)u.exemplars[d]=_.opentelemetry.proto.metrics.v1.Exemplar.toObject(i.exemplars[d],c);}return i.min!=null&&i.hasOwnProperty("min")&&(u.min=c.json&&!isFinite(i.min)?String(i.min):i.min,c.oneofs&&(u._min="min")),i.max!=null&&i.hasOwnProperty("max")&&(u.max=c.json&&!isFinite(i.max)?String(i.max):i.max,c.oneofs&&(u._max="max")),i.zeroThreshold!=null&&i.hasOwnProperty("zeroThreshold")&&(u.zeroThreshold=c.json&&!isFinite(i.zeroThreshold)?String(i.zeroThreshold):i.zeroThreshold),u},s.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},s.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint"},s.Buckets=function(){function o(i){if(this.bucketCounts=[],i)for(var c=Object.keys(i),u=0;u<c.length;++u)i[c[u]]!=null&&(this[c[u]]=i[c[u]]);}return o.prototype.offset=null,o.prototype.bucketCounts=m.emptyArray,o.create=function(c){return new o(c)},o.encode=function(c,u){if(u||(u=fe.create()),c.offset!=null&&Object.hasOwnProperty.call(c,"offset")&&u.uint32(8).sint32(c.offset),c.bucketCounts!=null&&c.bucketCounts.length){u.uint32(18).fork();for(var l=0;l<c.bucketCounts.length;++l)u.uint64(c.bucketCounts[l]);u.ldelim();}return u},o.encodeDelimited=function(c,u){return this.encode(c,u).ldelim()},o.decode=function(c,u,l){c instanceof O||(c=O.create(c));for(var d=u===void 0?c.len:c.pos+u,p=new _.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets;c.pos<d;){var h=c.uint32();if(h===l)break;switch(h>>>3){case 1:{p.offset=c.sint32();break}case 2:{if(p.bucketCounts&&p.bucketCounts.length||(p.bucketCounts=[]),(h&7)===2)for(var T=c.uint32()+c.pos;c.pos<T;)p.bucketCounts.push(c.uint64());else p.bucketCounts.push(c.uint64());break}default:c.skipType(h&7);break}}return p},o.decodeDelimited=function(c){return c instanceof O||(c=new O(c)),this.decode(c,c.uint32())},o.verify=function(c){if(typeof c!="object"||c===null)return "object expected";if(c.offset!=null&&c.hasOwnProperty("offset")&&!m.isInteger(c.offset))return "offset: integer expected";if(c.bucketCounts!=null&&c.hasOwnProperty("bucketCounts")){if(!Array.isArray(c.bucketCounts))return "bucketCounts: array expected";for(var u=0;u<c.bucketCounts.length;++u)if(!m.isInteger(c.bucketCounts[u])&&!(c.bucketCounts[u]&&m.isInteger(c.bucketCounts[u].low)&&m.isInteger(c.bucketCounts[u].high)))return "bucketCounts: integer|Long[] expected"}return null},o.fromObject=function(c){if(c instanceof _.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets)return c;var u=new _.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets;if(c.offset!=null&&(u.offset=c.offset|0),c.bucketCounts){if(!Array.isArray(c.bucketCounts))throw TypeError(".opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.bucketCounts: array expected");u.bucketCounts=[];for(var l=0;l<c.bucketCounts.length;++l)m.Long?(u.bucketCounts[l]=m.Long.fromValue(c.bucketCounts[l])).unsigned=true:typeof c.bucketCounts[l]=="string"?u.bucketCounts[l]=parseInt(c.bucketCounts[l],10):typeof c.bucketCounts[l]=="number"?u.bucketCounts[l]=c.bucketCounts[l]:typeof c.bucketCounts[l]=="object"&&(u.bucketCounts[l]=new m.LongBits(c.bucketCounts[l].low>>>0,c.bucketCounts[l].high>>>0).toNumber(true));}return u},o.toObject=function(c,u){u||(u={});var l={};if((u.arrays||u.defaults)&&(l.bucketCounts=[]),u.defaults&&(l.offset=0),c.offset!=null&&c.hasOwnProperty("offset")&&(l.offset=c.offset),c.bucketCounts&&c.bucketCounts.length){l.bucketCounts=[];for(var d=0;d<c.bucketCounts.length;++d)typeof c.bucketCounts[d]=="number"?l.bucketCounts[d]=u.longs===String?String(c.bucketCounts[d]):c.bucketCounts[d]:l.bucketCounts[d]=u.longs===String?m.Long.prototype.toString.call(c.bucketCounts[d]):u.longs===Number?new m.LongBits(c.bucketCounts[d].low>>>0,c.bucketCounts[d].high>>>0).toNumber(true):c.bucketCounts[d];}return l},o.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},o.getTypeUrl=function(c){return c===void 0&&(c="type.googleapis.com"),c+"/opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets"},o}(),s}(),n.SummaryDataPoint=function(){function s(a){if(this.attributes=[],this.quantileValues=[],a)for(var o=Object.keys(a),i=0;i<o.length;++i)a[o[i]]!=null&&(this[o[i]]=a[o[i]]);}return s.prototype.attributes=m.emptyArray,s.prototype.startTimeUnixNano=null,s.prototype.timeUnixNano=null,s.prototype.count=null,s.prototype.sum=null,s.prototype.quantileValues=m.emptyArray,s.prototype.flags=null,s.create=function(o){return new s(o)},s.encode=function(o,i){if(i||(i=fe.create()),o.startTimeUnixNano!=null&&Object.hasOwnProperty.call(o,"startTimeUnixNano")&&i.uint32(17).fixed64(o.startTimeUnixNano),o.timeUnixNano!=null&&Object.hasOwnProperty.call(o,"timeUnixNano")&&i.uint32(25).fixed64(o.timeUnixNano),o.count!=null&&Object.hasOwnProperty.call(o,"count")&&i.uint32(33).fixed64(o.count),o.sum!=null&&Object.hasOwnProperty.call(o,"sum")&&i.uint32(41).double(o.sum),o.quantileValues!=null&&o.quantileValues.length)for(var c=0;c<o.quantileValues.length;++c)_.opentelemetry.proto.metrics.v1.SummaryDataPoint.ValueAtQuantile.encode(o.quantileValues[c],i.uint32(50).fork()).ldelim();if(o.attributes!=null&&o.attributes.length)for(var c=0;c<o.attributes.length;++c)_.opentelemetry.proto.common.v1.KeyValue.encode(o.attributes[c],i.uint32(58).fork()).ldelim();return o.flags!=null&&Object.hasOwnProperty.call(o,"flags")&&i.uint32(64).uint32(o.flags),i},s.encodeDelimited=function(o,i){return this.encode(o,i).ldelim()},s.decode=function(o,i,c){o instanceof O||(o=O.create(o));for(var u=i===void 0?o.len:o.pos+i,l=new _.opentelemetry.proto.metrics.v1.SummaryDataPoint;o.pos<u;){var d=o.uint32();if(d===c)break;switch(d>>>3){case 7:{l.attributes&&l.attributes.length||(l.attributes=[]),l.attributes.push(_.opentelemetry.proto.common.v1.KeyValue.decode(o,o.uint32()));break}case 2:{l.startTimeUnixNano=o.fixed64();break}case 3:{l.timeUnixNano=o.fixed64();break}case 4:{l.count=o.fixed64();break}case 5:{l.sum=o.double();break}case 6:{l.quantileValues&&l.quantileValues.length||(l.quantileValues=[]),l.quantileValues.push(_.opentelemetry.proto.metrics.v1.SummaryDataPoint.ValueAtQuantile.decode(o,o.uint32()));break}case 8:{l.flags=o.uint32();break}default:o.skipType(d&7);break}}return l},s.decodeDelimited=function(o){return o instanceof O||(o=new O(o)),this.decode(o,o.uint32())},s.verify=function(o){if(typeof o!="object"||o===null)return "object expected";if(o.attributes!=null&&o.hasOwnProperty("attributes")){if(!Array.isArray(o.attributes))return "attributes: array expected";for(var i=0;i<o.attributes.length;++i){var c=_.opentelemetry.proto.common.v1.KeyValue.verify(o.attributes[i]);if(c)return "attributes."+c}}if(o.startTimeUnixNano!=null&&o.hasOwnProperty("startTimeUnixNano")&&!m.isInteger(o.startTimeUnixNano)&&!(o.startTimeUnixNano&&m.isInteger(o.startTimeUnixNano.low)&&m.isInteger(o.startTimeUnixNano.high)))return "startTimeUnixNano: integer|Long expected";if(o.timeUnixNano!=null&&o.hasOwnProperty("timeUnixNano")&&!m.isInteger(o.timeUnixNano)&&!(o.timeUnixNano&&m.isInteger(o.timeUnixNano.low)&&m.isInteger(o.timeUnixNano.high)))return "timeUnixNano: integer|Long expected";if(o.count!=null&&o.hasOwnProperty("count")&&!m.isInteger(o.count)&&!(o.count&&m.isInteger(o.count.low)&&m.isInteger(o.count.high)))return "count: integer|Long expected";if(o.sum!=null&&o.hasOwnProperty("sum")&&typeof o.sum!="number")return "sum: number expected";if(o.quantileValues!=null&&o.hasOwnProperty("quantileValues")){if(!Array.isArray(o.quantileValues))return "quantileValues: array expected";for(var i=0;i<o.quantileValues.length;++i){var c=_.opentelemetry.proto.metrics.v1.SummaryDataPoint.ValueAtQuantile.verify(o.quantileValues[i]);if(c)return "quantileValues."+c}}return o.flags!=null&&o.hasOwnProperty("flags")&&!m.isInteger(o.flags)?"flags: integer expected":null},s.fromObject=function(o){if(o instanceof _.opentelemetry.proto.metrics.v1.SummaryDataPoint)return o;var i=new _.opentelemetry.proto.metrics.v1.SummaryDataPoint;if(o.attributes){if(!Array.isArray(o.attributes))throw TypeError(".opentelemetry.proto.metrics.v1.SummaryDataPoint.attributes: array expected");i.attributes=[];for(var c=0;c<o.attributes.length;++c){if(typeof o.attributes[c]!="object")throw TypeError(".opentelemetry.proto.metrics.v1.SummaryDataPoint.attributes: object expected");i.attributes[c]=_.opentelemetry.proto.common.v1.KeyValue.fromObject(o.attributes[c]);}}if(o.startTimeUnixNano!=null&&(m.Long?(i.startTimeUnixNano=m.Long.fromValue(o.startTimeUnixNano)).unsigned=false:typeof o.startTimeUnixNano=="string"?i.startTimeUnixNano=parseInt(o.startTimeUnixNano,10):typeof o.startTimeUnixNano=="number"?i.startTimeUnixNano=o.startTimeUnixNano:typeof o.startTimeUnixNano=="object"&&(i.startTimeUnixNano=new m.LongBits(o.startTimeUnixNano.low>>>0,o.startTimeUnixNano.high>>>0).toNumber())),o.timeUnixNano!=null&&(m.Long?(i.timeUnixNano=m.Long.fromValue(o.timeUnixNano)).unsigned=false:typeof o.timeUnixNano=="string"?i.timeUnixNano=parseInt(o.timeUnixNano,10):typeof o.timeUnixNano=="number"?i.timeUnixNano=o.timeUnixNano:typeof o.timeUnixNano=="object"&&(i.timeUnixNano=new m.LongBits(o.timeUnixNano.low>>>0,o.timeUnixNano.high>>>0).toNumber())),o.count!=null&&(m.Long?(i.count=m.Long.fromValue(o.count)).unsigned=false:typeof o.count=="string"?i.count=parseInt(o.count,10):typeof o.count=="number"?i.count=o.count:typeof o.count=="object"&&(i.count=new m.LongBits(o.count.low>>>0,o.count.high>>>0).toNumber())),o.sum!=null&&(i.sum=Number(o.sum)),o.quantileValues){if(!Array.isArray(o.quantileValues))throw TypeError(".opentelemetry.proto.metrics.v1.SummaryDataPoint.quantileValues: array expected");i.quantileValues=[];for(var c=0;c<o.quantileValues.length;++c){if(typeof o.quantileValues[c]!="object")throw TypeError(".opentelemetry.proto.metrics.v1.SummaryDataPoint.quantileValues: object expected");i.quantileValues[c]=_.opentelemetry.proto.metrics.v1.SummaryDataPoint.ValueAtQuantile.fromObject(o.quantileValues[c]);}}return o.flags!=null&&(i.flags=o.flags>>>0),i},s.toObject=function(o,i){i||(i={});var c={};if((i.arrays||i.defaults)&&(c.quantileValues=[],c.attributes=[]),i.defaults){if(m.Long){var u=new m.Long(0,0,false);c.startTimeUnixNano=i.longs===String?u.toString():i.longs===Number?u.toNumber():u;}else c.startTimeUnixNano=i.longs===String?"0":0;if(m.Long){var u=new m.Long(0,0,false);c.timeUnixNano=i.longs===String?u.toString():i.longs===Number?u.toNumber():u;}else c.timeUnixNano=i.longs===String?"0":0;if(m.Long){var u=new m.Long(0,0,false);c.count=i.longs===String?u.toString():i.longs===Number?u.toNumber():u;}else c.count=i.longs===String?"0":0;c.sum=0,c.flags=0;}if(o.startTimeUnixNano!=null&&o.hasOwnProperty("startTimeUnixNano")&&(typeof o.startTimeUnixNano=="number"?c.startTimeUnixNano=i.longs===String?String(o.startTimeUnixNano):o.startTimeUnixNano:c.startTimeUnixNano=i.longs===String?m.Long.prototype.toString.call(o.startTimeUnixNano):i.longs===Number?new m.LongBits(o.startTimeUnixNano.low>>>0,o.startTimeUnixNano.high>>>0).toNumber():o.startTimeUnixNano),o.timeUnixNano!=null&&o.hasOwnProperty("timeUnixNano")&&(typeof o.timeUnixNano=="number"?c.timeUnixNano=i.longs===String?String(o.timeUnixNano):o.timeUnixNano:c.timeUnixNano=i.longs===String?m.Long.prototype.toString.call(o.timeUnixNano):i.longs===Number?new m.LongBits(o.timeUnixNano.low>>>0,o.timeUnixNano.high>>>0).toNumber():o.timeUnixNano),o.count!=null&&o.hasOwnProperty("count")&&(typeof o.count=="number"?c.count=i.longs===String?String(o.count):o.count:c.count=i.longs===String?m.Long.prototype.toString.call(o.count):i.longs===Number?new m.LongBits(o.count.low>>>0,o.count.high>>>0).toNumber():o.count),o.sum!=null&&o.hasOwnProperty("sum")&&(c.sum=i.json&&!isFinite(o.sum)?String(o.sum):o.sum),o.quantileValues&&o.quantileValues.length){c.quantileValues=[];for(var l=0;l<o.quantileValues.length;++l)c.quantileValues[l]=_.opentelemetry.proto.metrics.v1.SummaryDataPoint.ValueAtQuantile.toObject(o.quantileValues[l],i);}if(o.attributes&&o.attributes.length){c.attributes=[];for(var l=0;l<o.attributes.length;++l)c.attributes[l]=_.opentelemetry.proto.common.v1.KeyValue.toObject(o.attributes[l],i);}return o.flags!=null&&o.hasOwnProperty("flags")&&(c.flags=o.flags),c},s.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},s.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/opentelemetry.proto.metrics.v1.SummaryDataPoint"},s.ValueAtQuantile=function(){function a(o){if(o)for(var i=Object.keys(o),c=0;c<i.length;++c)o[i[c]]!=null&&(this[i[c]]=o[i[c]]);}return a.prototype.quantile=null,a.prototype.value=null,a.create=function(i){return new a(i)},a.encode=function(i,c){return c||(c=fe.create()),i.quantile!=null&&Object.hasOwnProperty.call(i,"quantile")&&c.uint32(9).double(i.quantile),i.value!=null&&Object.hasOwnProperty.call(i,"value")&&c.uint32(17).double(i.value),c},a.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},a.decode=function(i,c,u){i instanceof O||(i=O.create(i));for(var l=c===void 0?i.len:i.pos+c,d=new _.opentelemetry.proto.metrics.v1.SummaryDataPoint.ValueAtQuantile;i.pos<l;){var p=i.uint32();if(p===u)break;switch(p>>>3){case 1:{d.quantile=i.double();break}case 2:{d.value=i.double();break}default:i.skipType(p&7);break}}return d},a.decodeDelimited=function(i){return i instanceof O||(i=new O(i)),this.decode(i,i.uint32())},a.verify=function(i){return typeof i!="object"||i===null?"object expected":i.quantile!=null&&i.hasOwnProperty("quantile")&&typeof i.quantile!="number"?"quantile: number expected":i.value!=null&&i.hasOwnProperty("value")&&typeof i.value!="number"?"value: number expected":null},a.fromObject=function(i){if(i instanceof _.opentelemetry.proto.metrics.v1.SummaryDataPoint.ValueAtQuantile)return i;var c=new _.opentelemetry.proto.metrics.v1.SummaryDataPoint.ValueAtQuantile;return i.quantile!=null&&(c.quantile=Number(i.quantile)),i.value!=null&&(c.value=Number(i.value)),c},a.toObject=function(i,c){c||(c={});var u={};return c.defaults&&(u.quantile=0,u.value=0),i.quantile!=null&&i.hasOwnProperty("quantile")&&(u.quantile=c.json&&!isFinite(i.quantile)?String(i.quantile):i.quantile),i.value!=null&&i.hasOwnProperty("value")&&(u.value=c.json&&!isFinite(i.value)?String(i.value):i.value),u},a.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},a.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/opentelemetry.proto.metrics.v1.SummaryDataPoint.ValueAtQuantile"},a}(),s}(),n.Exemplar=function(){function s(o){if(this.filteredAttributes=[],o)for(var i=Object.keys(o),c=0;c<i.length;++c)o[i[c]]!=null&&(this[i[c]]=o[i[c]]);}s.prototype.filteredAttributes=m.emptyArray,s.prototype.timeUnixNano=null,s.prototype.asDouble=null,s.prototype.asInt=null,s.prototype.spanId=null,s.prototype.traceId=null;var a;return Object.defineProperty(s.prototype,"value",{get:m.oneOfGetter(a=["asDouble","asInt"]),set:m.oneOfSetter(a)}),s.create=function(i){return new s(i)},s.encode=function(i,c){if(c||(c=fe.create()),i.timeUnixNano!=null&&Object.hasOwnProperty.call(i,"timeUnixNano")&&c.uint32(17).fixed64(i.timeUnixNano),i.asDouble!=null&&Object.hasOwnProperty.call(i,"asDouble")&&c.uint32(25).double(i.asDouble),i.spanId!=null&&Object.hasOwnProperty.call(i,"spanId")&&c.uint32(34).bytes(i.spanId),i.traceId!=null&&Object.hasOwnProperty.call(i,"traceId")&&c.uint32(42).bytes(i.traceId),i.asInt!=null&&Object.hasOwnProperty.call(i,"asInt")&&c.uint32(49).sfixed64(i.asInt),i.filteredAttributes!=null&&i.filteredAttributes.length)for(var u=0;u<i.filteredAttributes.length;++u)_.opentelemetry.proto.common.v1.KeyValue.encode(i.filteredAttributes[u],c.uint32(58).fork()).ldelim();return c},s.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},s.decode=function(i,c,u){i instanceof O||(i=O.create(i));for(var l=c===void 0?i.len:i.pos+c,d=new _.opentelemetry.proto.metrics.v1.Exemplar;i.pos<l;){var p=i.uint32();if(p===u)break;switch(p>>>3){case 7:{d.filteredAttributes&&d.filteredAttributes.length||(d.filteredAttributes=[]),d.filteredAttributes.push(_.opentelemetry.proto.common.v1.KeyValue.decode(i,i.uint32()));break}case 2:{d.timeUnixNano=i.fixed64();break}case 3:{d.asDouble=i.double();break}case 6:{d.asInt=i.sfixed64();break}case 4:{d.spanId=i.bytes();break}case 5:{d.traceId=i.bytes();break}default:i.skipType(p&7);break}}return d},s.decodeDelimited=function(i){return i instanceof O||(i=new O(i)),this.decode(i,i.uint32())},s.verify=function(i){if(typeof i!="object"||i===null)return "object expected";var c={};if(i.filteredAttributes!=null&&i.hasOwnProperty("filteredAttributes")){if(!Array.isArray(i.filteredAttributes))return "filteredAttributes: array expected";for(var u=0;u<i.filteredAttributes.length;++u){var l=_.opentelemetry.proto.common.v1.KeyValue.verify(i.filteredAttributes[u]);if(l)return "filteredAttributes."+l}}if(i.timeUnixNano!=null&&i.hasOwnProperty("timeUnixNano")&&!m.isInteger(i.timeUnixNano)&&!(i.timeUnixNano&&m.isInteger(i.timeUnixNano.low)&&m.isInteger(i.timeUnixNano.high)))return "timeUnixNano: integer|Long expected";if(i.asDouble!=null&&i.hasOwnProperty("asDouble")&&(c.value=1,typeof i.asDouble!="number"))return "asDouble: number expected";if(i.asInt!=null&&i.hasOwnProperty("asInt")){if(c.value===1)return "value: multiple values";if(c.value=1,!m.isInteger(i.asInt)&&!(i.asInt&&m.isInteger(i.asInt.low)&&m.isInteger(i.asInt.high)))return "asInt: integer|Long expected"}return i.spanId!=null&&i.hasOwnProperty("spanId")&&!(i.spanId&&typeof i.spanId.length=="number"||m.isString(i.spanId))?"spanId: buffer expected":i.traceId!=null&&i.hasOwnProperty("traceId")&&!(i.traceId&&typeof i.traceId.length=="number"||m.isString(i.traceId))?"traceId: buffer expected":null},s.fromObject=function(i){if(i instanceof _.opentelemetry.proto.metrics.v1.Exemplar)return i;var c=new _.opentelemetry.proto.metrics.v1.Exemplar;if(i.filteredAttributes){if(!Array.isArray(i.filteredAttributes))throw TypeError(".opentelemetry.proto.metrics.v1.Exemplar.filteredAttributes: array expected");c.filteredAttributes=[];for(var u=0;u<i.filteredAttributes.length;++u){if(typeof i.filteredAttributes[u]!="object")throw TypeError(".opentelemetry.proto.metrics.v1.Exemplar.filteredAttributes: object expected");c.filteredAttributes[u]=_.opentelemetry.proto.common.v1.KeyValue.fromObject(i.filteredAttributes[u]);}}return i.timeUnixNano!=null&&(m.Long?(c.timeUnixNano=m.Long.fromValue(i.timeUnixNano)).unsigned=false:typeof i.timeUnixNano=="string"?c.timeUnixNano=parseInt(i.timeUnixNano,10):typeof i.timeUnixNano=="number"?c.timeUnixNano=i.timeUnixNano:typeof i.timeUnixNano=="object"&&(c.timeUnixNano=new m.LongBits(i.timeUnixNano.low>>>0,i.timeUnixNano.high>>>0).toNumber())),i.asDouble!=null&&(c.asDouble=Number(i.asDouble)),i.asInt!=null&&(m.Long?(c.asInt=m.Long.fromValue(i.asInt)).unsigned=false:typeof i.asInt=="string"?c.asInt=parseInt(i.asInt,10):typeof i.asInt=="number"?c.asInt=i.asInt:typeof i.asInt=="object"&&(c.asInt=new m.LongBits(i.asInt.low>>>0,i.asInt.high>>>0).toNumber())),i.spanId!=null&&(typeof i.spanId=="string"?m.base64.decode(i.spanId,c.spanId=m.newBuffer(m.base64.length(i.spanId)),0):i.spanId.length>=0&&(c.spanId=i.spanId)),i.traceId!=null&&(typeof i.traceId=="string"?m.base64.decode(i.traceId,c.traceId=m.newBuffer(m.base64.length(i.traceId)),0):i.traceId.length>=0&&(c.traceId=i.traceId)),c},s.toObject=function(i,c){c||(c={});var u={};if((c.arrays||c.defaults)&&(u.filteredAttributes=[]),c.defaults){if(m.Long){var l=new m.Long(0,0,false);u.timeUnixNano=c.longs===String?l.toString():c.longs===Number?l.toNumber():l;}else u.timeUnixNano=c.longs===String?"0":0;c.bytes===String?u.spanId="":(u.spanId=[],c.bytes!==Array&&(u.spanId=m.newBuffer(u.spanId))),c.bytes===String?u.traceId="":(u.traceId=[],c.bytes!==Array&&(u.traceId=m.newBuffer(u.traceId)));}if(i.timeUnixNano!=null&&i.hasOwnProperty("timeUnixNano")&&(typeof i.timeUnixNano=="number"?u.timeUnixNano=c.longs===String?String(i.timeUnixNano):i.timeUnixNano:u.timeUnixNano=c.longs===String?m.Long.prototype.toString.call(i.timeUnixNano):c.longs===Number?new m.LongBits(i.timeUnixNano.low>>>0,i.timeUnixNano.high>>>0).toNumber():i.timeUnixNano),i.asDouble!=null&&i.hasOwnProperty("asDouble")&&(u.asDouble=c.json&&!isFinite(i.asDouble)?String(i.asDouble):i.asDouble,c.oneofs&&(u.value="asDouble")),i.spanId!=null&&i.hasOwnProperty("spanId")&&(u.spanId=c.bytes===String?m.base64.encode(i.spanId,0,i.spanId.length):c.bytes===Array?Array.prototype.slice.call(i.spanId):i.spanId),i.traceId!=null&&i.hasOwnProperty("traceId")&&(u.traceId=c.bytes===String?m.base64.encode(i.traceId,0,i.traceId.length):c.bytes===Array?Array.prototype.slice.call(i.traceId):i.traceId),i.asInt!=null&&i.hasOwnProperty("asInt")&&(typeof i.asInt=="number"?u.asInt=c.longs===String?String(i.asInt):i.asInt:u.asInt=c.longs===String?m.Long.prototype.toString.call(i.asInt):c.longs===Number?new m.LongBits(i.asInt.low>>>0,i.asInt.high>>>0).toNumber():i.asInt,c.oneofs&&(u.value="asInt")),i.filteredAttributes&&i.filteredAttributes.length){u.filteredAttributes=[];for(var d=0;d<i.filteredAttributes.length;++d)u.filteredAttributes[d]=_.opentelemetry.proto.common.v1.KeyValue.toObject(i.filteredAttributes[d],c);}return u},s.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},s.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/opentelemetry.proto.metrics.v1.Exemplar"},s}(),n}(),r}(),e.logs=function(){var r={};return r.v1=function(){var n={};return n.LogsData=function(){function s(a){if(this.resourceLogs=[],a)for(var o=Object.keys(a),i=0;i<o.length;++i)a[o[i]]!=null&&(this[o[i]]=a[o[i]]);}return s.prototype.resourceLogs=m.emptyArray,s.create=function(o){return new s(o)},s.encode=function(o,i){if(i||(i=fe.create()),o.resourceLogs!=null&&o.resourceLogs.length)for(var c=0;c<o.resourceLogs.length;++c)_.opentelemetry.proto.logs.v1.ResourceLogs.encode(o.resourceLogs[c],i.uint32(10).fork()).ldelim();return i},s.encodeDelimited=function(o,i){return this.encode(o,i).ldelim()},s.decode=function(o,i,c){o instanceof O||(o=O.create(o));for(var u=i===void 0?o.len:o.pos+i,l=new _.opentelemetry.proto.logs.v1.LogsData;o.pos<u;){var d=o.uint32();if(d===c)break;switch(d>>>3){case 1:{l.resourceLogs&&l.resourceLogs.length||(l.resourceLogs=[]),l.resourceLogs.push(_.opentelemetry.proto.logs.v1.ResourceLogs.decode(o,o.uint32()));break}default:o.skipType(d&7);break}}return l},s.decodeDelimited=function(o){return o instanceof O||(o=new O(o)),this.decode(o,o.uint32())},s.verify=function(o){if(typeof o!="object"||o===null)return "object expected";if(o.resourceLogs!=null&&o.hasOwnProperty("resourceLogs")){if(!Array.isArray(o.resourceLogs))return "resourceLogs: array expected";for(var i=0;i<o.resourceLogs.length;++i){var c=_.opentelemetry.proto.logs.v1.ResourceLogs.verify(o.resourceLogs[i]);if(c)return "resourceLogs."+c}}return null},s.fromObject=function(o){if(o instanceof _.opentelemetry.proto.logs.v1.LogsData)return o;var i=new _.opentelemetry.proto.logs.v1.LogsData;if(o.resourceLogs){if(!Array.isArray(o.resourceLogs))throw TypeError(".opentelemetry.proto.logs.v1.LogsData.resourceLogs: array expected");i.resourceLogs=[];for(var c=0;c<o.resourceLogs.length;++c){if(typeof o.resourceLogs[c]!="object")throw TypeError(".opentelemetry.proto.logs.v1.LogsData.resourceLogs: object expected");i.resourceLogs[c]=_.opentelemetry.proto.logs.v1.ResourceLogs.fromObject(o.resourceLogs[c]);}}return i},s.toObject=function(o,i){i||(i={});var c={};if((i.arrays||i.defaults)&&(c.resourceLogs=[]),o.resourceLogs&&o.resourceLogs.length){c.resourceLogs=[];for(var u=0;u<o.resourceLogs.length;++u)c.resourceLogs[u]=_.opentelemetry.proto.logs.v1.ResourceLogs.toObject(o.resourceLogs[u],i);}return c},s.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},s.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/opentelemetry.proto.logs.v1.LogsData"},s}(),n.ResourceLogs=function(){function s(a){if(this.scopeLogs=[],a)for(var o=Object.keys(a),i=0;i<o.length;++i)a[o[i]]!=null&&(this[o[i]]=a[o[i]]);}return s.prototype.resource=null,s.prototype.scopeLogs=m.emptyArray,s.prototype.schemaUrl=null,s.create=function(o){return new s(o)},s.encode=function(o,i){if(i||(i=fe.create()),o.resource!=null&&Object.hasOwnProperty.call(o,"resource")&&_.opentelemetry.proto.resource.v1.Resource.encode(o.resource,i.uint32(10).fork()).ldelim(),o.scopeLogs!=null&&o.scopeLogs.length)for(var c=0;c<o.scopeLogs.length;++c)_.opentelemetry.proto.logs.v1.ScopeLogs.encode(o.scopeLogs[c],i.uint32(18).fork()).ldelim();return o.schemaUrl!=null&&Object.hasOwnProperty.call(o,"schemaUrl")&&i.uint32(26).string(o.schemaUrl),i},s.encodeDelimited=function(o,i){return this.encode(o,i).ldelim()},s.decode=function(o,i,c){o instanceof O||(o=O.create(o));for(var u=i===void 0?o.len:o.pos+i,l=new _.opentelemetry.proto.logs.v1.ResourceLogs;o.pos<u;){var d=o.uint32();if(d===c)break;switch(d>>>3){case 1:{l.resource=_.opentelemetry.proto.resource.v1.Resource.decode(o,o.uint32());break}case 2:{l.scopeLogs&&l.scopeLogs.length||(l.scopeLogs=[]),l.scopeLogs.push(_.opentelemetry.proto.logs.v1.ScopeLogs.decode(o,o.uint32()));break}case 3:{l.schemaUrl=o.string();break}default:o.skipType(d&7);break}}return l},s.decodeDelimited=function(o){return o instanceof O||(o=new O(o)),this.decode(o,o.uint32())},s.verify=function(o){if(typeof o!="object"||o===null)return "object expected";if(o.resource!=null&&o.hasOwnProperty("resource")){var i=_.opentelemetry.proto.resource.v1.Resource.verify(o.resource);if(i)return "resource."+i}if(o.scopeLogs!=null&&o.hasOwnProperty("scopeLogs")){if(!Array.isArray(o.scopeLogs))return "scopeLogs: array expected";for(var c=0;c<o.scopeLogs.length;++c){var i=_.opentelemetry.proto.logs.v1.ScopeLogs.verify(o.scopeLogs[c]);if(i)return "scopeLogs."+i}}return o.schemaUrl!=null&&o.hasOwnProperty("schemaUrl")&&!m.isString(o.schemaUrl)?"schemaUrl: string expected":null},s.fromObject=function(o){if(o instanceof _.opentelemetry.proto.logs.v1.ResourceLogs)return o;var i=new _.opentelemetry.proto.logs.v1.ResourceLogs;if(o.resource!=null){if(typeof o.resource!="object")throw TypeError(".opentelemetry.proto.logs.v1.ResourceLogs.resource: object expected");i.resource=_.opentelemetry.proto.resource.v1.Resource.fromObject(o.resource);}if(o.scopeLogs){if(!Array.isArray(o.scopeLogs))throw TypeError(".opentelemetry.proto.logs.v1.ResourceLogs.scopeLogs: array expected");i.scopeLogs=[];for(var c=0;c<o.scopeLogs.length;++c){if(typeof o.scopeLogs[c]!="object")throw TypeError(".opentelemetry.proto.logs.v1.ResourceLogs.scopeLogs: object expected");i.scopeLogs[c]=_.opentelemetry.proto.logs.v1.ScopeLogs.fromObject(o.scopeLogs[c]);}}return o.schemaUrl!=null&&(i.schemaUrl=String(o.schemaUrl)),i},s.toObject=function(o,i){i||(i={});var c={};if((i.arrays||i.defaults)&&(c.scopeLogs=[]),i.defaults&&(c.resource=null,c.schemaUrl=""),o.resource!=null&&o.hasOwnProperty("resource")&&(c.resource=_.opentelemetry.proto.resource.v1.Resource.toObject(o.resource,i)),o.scopeLogs&&o.scopeLogs.length){c.scopeLogs=[];for(var u=0;u<o.scopeLogs.length;++u)c.scopeLogs[u]=_.opentelemetry.proto.logs.v1.ScopeLogs.toObject(o.scopeLogs[u],i);}return o.schemaUrl!=null&&o.hasOwnProperty("schemaUrl")&&(c.schemaUrl=o.schemaUrl),c},s.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},s.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/opentelemetry.proto.logs.v1.ResourceLogs"},s}(),n.ScopeLogs=function(){function s(a){if(this.logRecords=[],a)for(var o=Object.keys(a),i=0;i<o.length;++i)a[o[i]]!=null&&(this[o[i]]=a[o[i]]);}return s.prototype.scope=null,s.prototype.logRecords=m.emptyArray,s.prototype.schemaUrl=null,s.create=function(o){return new s(o)},s.encode=function(o,i){if(i||(i=fe.create()),o.scope!=null&&Object.hasOwnProperty.call(o,"scope")&&_.opentelemetry.proto.common.v1.InstrumentationScope.encode(o.scope,i.uint32(10).fork()).ldelim(),o.logRecords!=null&&o.logRecords.length)for(var c=0;c<o.logRecords.length;++c)_.opentelemetry.proto.logs.v1.LogRecord.encode(o.logRecords[c],i.uint32(18).fork()).ldelim();return o.schemaUrl!=null&&Object.hasOwnProperty.call(o,"schemaUrl")&&i.uint32(26).string(o.schemaUrl),i},s.encodeDelimited=function(o,i){return this.encode(o,i).ldelim()},s.decode=function(o,i,c){o instanceof O||(o=O.create(o));for(var u=i===void 0?o.len:o.pos+i,l=new _.opentelemetry.proto.logs.v1.ScopeLogs;o.pos<u;){var d=o.uint32();if(d===c)break;switch(d>>>3){case 1:{l.scope=_.opentelemetry.proto.common.v1.InstrumentationScope.decode(o,o.uint32());break}case 2:{l.logRecords&&l.logRecords.length||(l.logRecords=[]),l.logRecords.push(_.opentelemetry.proto.logs.v1.LogRecord.decode(o,o.uint32()));break}case 3:{l.schemaUrl=o.string();break}default:o.skipType(d&7);break}}return l},s.decodeDelimited=function(o){return o instanceof O||(o=new O(o)),this.decode(o,o.uint32())},s.verify=function(o){if(typeof o!="object"||o===null)return "object expected";if(o.scope!=null&&o.hasOwnProperty("scope")){var i=_.opentelemetry.proto.common.v1.InstrumentationScope.verify(o.scope);if(i)return "scope."+i}if(o.logRecords!=null&&o.hasOwnProperty("logRecords")){if(!Array.isArray(o.logRecords))return "logRecords: array expected";for(var c=0;c<o.logRecords.length;++c){var i=_.opentelemetry.proto.logs.v1.LogRecord.verify(o.logRecords[c]);if(i)return "logRecords."+i}}return o.schemaUrl!=null&&o.hasOwnProperty("schemaUrl")&&!m.isString(o.schemaUrl)?"schemaUrl: string expected":null},s.fromObject=function(o){if(o instanceof _.opentelemetry.proto.logs.v1.ScopeLogs)return o;var i=new _.opentelemetry.proto.logs.v1.ScopeLogs;if(o.scope!=null){if(typeof o.scope!="object")throw TypeError(".opentelemetry.proto.logs.v1.ScopeLogs.scope: object expected");i.scope=_.opentelemetry.proto.common.v1.InstrumentationScope.fromObject(o.scope);}if(o.logRecords){if(!Array.isArray(o.logRecords))throw TypeError(".opentelemetry.proto.logs.v1.ScopeLogs.logRecords: array expected");i.logRecords=[];for(var c=0;c<o.logRecords.length;++c){if(typeof o.logRecords[c]!="object")throw TypeError(".opentelemetry.proto.logs.v1.ScopeLogs.logRecords: object expected");i.logRecords[c]=_.opentelemetry.proto.logs.v1.LogRecord.fromObject(o.logRecords[c]);}}return o.schemaUrl!=null&&(i.schemaUrl=String(o.schemaUrl)),i},s.toObject=function(o,i){i||(i={});var c={};if((i.arrays||i.defaults)&&(c.logRecords=[]),i.defaults&&(c.scope=null,c.schemaUrl=""),o.scope!=null&&o.hasOwnProperty("scope")&&(c.scope=_.opentelemetry.proto.common.v1.InstrumentationScope.toObject(o.scope,i)),o.logRecords&&o.logRecords.length){c.logRecords=[];for(var u=0;u<o.logRecords.length;++u)c.logRecords[u]=_.opentelemetry.proto.logs.v1.LogRecord.toObject(o.logRecords[u],i);}return o.schemaUrl!=null&&o.hasOwnProperty("schemaUrl")&&(c.schemaUrl=o.schemaUrl),c},s.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},s.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/opentelemetry.proto.logs.v1.ScopeLogs"},s}(),n.SeverityNumber=function(){var s={},a=Object.create(s);return a[s[0]="SEVERITY_NUMBER_UNSPECIFIED"]=0,a[s[1]="SEVERITY_NUMBER_TRACE"]=1,a[s[2]="SEVERITY_NUMBER_TRACE2"]=2,a[s[3]="SEVERITY_NUMBER_TRACE3"]=3,a[s[4]="SEVERITY_NUMBER_TRACE4"]=4,a[s[5]="SEVERITY_NUMBER_DEBUG"]=5,a[s[6]="SEVERITY_NUMBER_DEBUG2"]=6,a[s[7]="SEVERITY_NUMBER_DEBUG3"]=7,a[s[8]="SEVERITY_NUMBER_DEBUG4"]=8,a[s[9]="SEVERITY_NUMBER_INFO"]=9,a[s[10]="SEVERITY_NUMBER_INFO2"]=10,a[s[11]="SEVERITY_NUMBER_INFO3"]=11,a[s[12]="SEVERITY_NUMBER_INFO4"]=12,a[s[13]="SEVERITY_NUMBER_WARN"]=13,a[s[14]="SEVERITY_NUMBER_WARN2"]=14,a[s[15]="SEVERITY_NUMBER_WARN3"]=15,a[s[16]="SEVERITY_NUMBER_WARN4"]=16,a[s[17]="SEVERITY_NUMBER_ERROR"]=17,a[s[18]="SEVERITY_NUMBER_ERROR2"]=18,a[s[19]="SEVERITY_NUMBER_ERROR3"]=19,a[s[20]="SEVERITY_NUMBER_ERROR4"]=20,a[s[21]="SEVERITY_NUMBER_FATAL"]=21,a[s[22]="SEVERITY_NUMBER_FATAL2"]=22,a[s[23]="SEVERITY_NUMBER_FATAL3"]=23,a[s[24]="SEVERITY_NUMBER_FATAL4"]=24,a}(),n.LogRecordFlags=function(){var s={},a=Object.create(s);return a[s[0]="LOG_RECORD_FLAGS_DO_NOT_USE"]=0,a[s[255]="LOG_RECORD_FLAGS_TRACE_FLAGS_MASK"]=255,a}(),n.LogRecord=function(){function s(a){if(this.attributes=[],a)for(var o=Object.keys(a),i=0;i<o.length;++i)a[o[i]]!=null&&(this[o[i]]=a[o[i]]);}return s.prototype.timeUnixNano=null,s.prototype.observedTimeUnixNano=null,s.prototype.severityNumber=null,s.prototype.severityText=null,s.prototype.body=null,s.prototype.attributes=m.emptyArray,s.prototype.droppedAttributesCount=null,s.prototype.flags=null,s.prototype.traceId=null,s.prototype.spanId=null,s.prototype.eventName=null,s.create=function(o){return new s(o)},s.encode=function(o,i){if(i||(i=fe.create()),o.timeUnixNano!=null&&Object.hasOwnProperty.call(o,"timeUnixNano")&&i.uint32(9).fixed64(o.timeUnixNano),o.severityNumber!=null&&Object.hasOwnProperty.call(o,"severityNumber")&&i.uint32(16).int32(o.severityNumber),o.severityText!=null&&Object.hasOwnProperty.call(o,"severityText")&&i.uint32(26).string(o.severityText),o.body!=null&&Object.hasOwnProperty.call(o,"body")&&_.opentelemetry.proto.common.v1.AnyValue.encode(o.body,i.uint32(42).fork()).ldelim(),o.attributes!=null&&o.attributes.length)for(var c=0;c<o.attributes.length;++c)_.opentelemetry.proto.common.v1.KeyValue.encode(o.attributes[c],i.uint32(50).fork()).ldelim();return o.droppedAttributesCount!=null&&Object.hasOwnProperty.call(o,"droppedAttributesCount")&&i.uint32(56).uint32(o.droppedAttributesCount),o.flags!=null&&Object.hasOwnProperty.call(o,"flags")&&i.uint32(69).fixed32(o.flags),o.traceId!=null&&Object.hasOwnProperty.call(o,"traceId")&&i.uint32(74).bytes(o.traceId),o.spanId!=null&&Object.hasOwnProperty.call(o,"spanId")&&i.uint32(82).bytes(o.spanId),o.observedTimeUnixNano!=null&&Object.hasOwnProperty.call(o,"observedTimeUnixNano")&&i.uint32(89).fixed64(o.observedTimeUnixNano),o.eventName!=null&&Object.hasOwnProperty.call(o,"eventName")&&i.uint32(98).string(o.eventName),i},s.encodeDelimited=function(o,i){return this.encode(o,i).ldelim()},s.decode=function(o,i,c){o instanceof O||(o=O.create(o));for(var u=i===void 0?o.len:o.pos+i,l=new _.opentelemetry.proto.logs.v1.LogRecord;o.pos<u;){var d=o.uint32();if(d===c)break;switch(d>>>3){case 1:{l.timeUnixNano=o.fixed64();break}case 11:{l.observedTimeUnixNano=o.fixed64();break}case 2:{l.severityNumber=o.int32();break}case 3:{l.severityText=o.string();break}case 5:{l.body=_.opentelemetry.proto.common.v1.AnyValue.decode(o,o.uint32());break}case 6:{l.attributes&&l.attributes.length||(l.attributes=[]),l.attributes.push(_.opentelemetry.proto.common.v1.KeyValue.decode(o,o.uint32()));break}case 7:{l.droppedAttributesCount=o.uint32();break}case 8:{l.flags=o.fixed32();break}case 9:{l.traceId=o.bytes();break}case 10:{l.spanId=o.bytes();break}case 12:{l.eventName=o.string();break}default:o.skipType(d&7);break}}return l},s.decodeDelimited=function(o){return o instanceof O||(o=new O(o)),this.decode(o,o.uint32())},s.verify=function(o){if(typeof o!="object"||o===null)return "object expected";if(o.timeUnixNano!=null&&o.hasOwnProperty("timeUnixNano")&&!m.isInteger(o.timeUnixNano)&&!(o.timeUnixNano&&m.isInteger(o.timeUnixNano.low)&&m.isInteger(o.timeUnixNano.high)))return "timeUnixNano: integer|Long expected";if(o.observedTimeUnixNano!=null&&o.hasOwnProperty("observedTimeUnixNano")&&!m.isInteger(o.observedTimeUnixNano)&&!(o.observedTimeUnixNano&&m.isInteger(o.observedTimeUnixNano.low)&&m.isInteger(o.observedTimeUnixNano.high)))return "observedTimeUnixNano: integer|Long expected";if(o.severityNumber!=null&&o.hasOwnProperty("severityNumber"))switch(o.severityNumber){default:return "severityNumber: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:break}if(o.severityText!=null&&o.hasOwnProperty("severityText")&&!m.isString(o.severityText))return "severityText: string expected";if(o.body!=null&&o.hasOwnProperty("body")){var i=_.opentelemetry.proto.common.v1.AnyValue.verify(o.body);if(i)return "body."+i}if(o.attributes!=null&&o.hasOwnProperty("attributes")){if(!Array.isArray(o.attributes))return "attributes: array expected";for(var c=0;c<o.attributes.length;++c){var i=_.opentelemetry.proto.common.v1.KeyValue.verify(o.attributes[c]);if(i)return "attributes."+i}}return o.droppedAttributesCount!=null&&o.hasOwnProperty("droppedAttributesCount")&&!m.isInteger(o.droppedAttributesCount)?"droppedAttributesCount: integer expected":o.flags!=null&&o.hasOwnProperty("flags")&&!m.isInteger(o.flags)?"flags: integer expected":o.traceId!=null&&o.hasOwnProperty("traceId")&&!(o.traceId&&typeof o.traceId.length=="number"||m.isString(o.traceId))?"traceId: buffer expected":o.spanId!=null&&o.hasOwnProperty("spanId")&&!(o.spanId&&typeof o.spanId.length=="number"||m.isString(o.spanId))?"spanId: buffer expected":o.eventName!=null&&o.hasOwnProperty("eventName")&&!m.isString(o.eventName)?"eventName: string expected":null},s.fromObject=function(o){if(o instanceof _.opentelemetry.proto.logs.v1.LogRecord)return o;var i=new _.opentelemetry.proto.logs.v1.LogRecord;switch(o.timeUnixNano!=null&&(m.Long?(i.timeUnixNano=m.Long.fromValue(o.timeUnixNano)).unsigned=false:typeof o.timeUnixNano=="string"?i.timeUnixNano=parseInt(o.timeUnixNano,10):typeof o.timeUnixNano=="number"?i.timeUnixNano=o.timeUnixNano:typeof o.timeUnixNano=="object"&&(i.timeUnixNano=new m.LongBits(o.timeUnixNano.low>>>0,o.timeUnixNano.high>>>0).toNumber())),o.observedTimeUnixNano!=null&&(m.Long?(i.observedTimeUnixNano=m.Long.fromValue(o.observedTimeUnixNano)).unsigned=false:typeof o.observedTimeUnixNano=="string"?i.observedTimeUnixNano=parseInt(o.observedTimeUnixNano,10):typeof o.observedTimeUnixNano=="number"?i.observedTimeUnixNano=o.observedTimeUnixNano:typeof o.observedTimeUnixNano=="object"&&(i.observedTimeUnixNano=new m.LongBits(o.observedTimeUnixNano.low>>>0,o.observedTimeUnixNano.high>>>0).toNumber())),o.severityNumber){default:if(typeof o.severityNumber=="number"){i.severityNumber=o.severityNumber;break}break;case "SEVERITY_NUMBER_UNSPECIFIED":case 0:i.severityNumber=0;break;case "SEVERITY_NUMBER_TRACE":case 1:i.severityNumber=1;break;case "SEVERITY_NUMBER_TRACE2":case 2:i.severityNumber=2;break;case "SEVERITY_NUMBER_TRACE3":case 3:i.severityNumber=3;break;case "SEVERITY_NUMBER_TRACE4":case 4:i.severityNumber=4;break;case "SEVERITY_NUMBER_DEBUG":case 5:i.severityNumber=5;break;case "SEVERITY_NUMBER_DEBUG2":case 6:i.severityNumber=6;break;case "SEVERITY_NUMBER_DEBUG3":case 7:i.severityNumber=7;break;case "SEVERITY_NUMBER_DEBUG4":case 8:i.severityNumber=8;break;case "SEVERITY_NUMBER_INFO":case 9:i.severityNumber=9;break;case "SEVERITY_NUMBER_INFO2":case 10:i.severityNumber=10;break;case "SEVERITY_NUMBER_INFO3":case 11:i.severityNumber=11;break;case "SEVERITY_NUMBER_INFO4":case 12:i.severityNumber=12;break;case "SEVERITY_NUMBER_WARN":case 13:i.severityNumber=13;break;case "SEVERITY_NUMBER_WARN2":case 14:i.severityNumber=14;break;case "SEVERITY_NUMBER_WARN3":case 15:i.severityNumber=15;break;case "SEVERITY_NUMBER_WARN4":case 16:i.severityNumber=16;break;case "SEVERITY_NUMBER_ERROR":case 17:i.severityNumber=17;break;case "SEVERITY_NUMBER_ERROR2":case 18:i.severityNumber=18;break;case "SEVERITY_NUMBER_ERROR3":case 19:i.severityNumber=19;break;case "SEVERITY_NUMBER_ERROR4":case 20:i.severityNumber=20;break;case "SEVERITY_NUMBER_FATAL":case 21:i.severityNumber=21;break;case "SEVERITY_NUMBER_FATAL2":case 22:i.severityNumber=22;break;case "SEVERITY_NUMBER_FATAL3":case 23:i.severityNumber=23;break;case "SEVERITY_NUMBER_FATAL4":case 24:i.severityNumber=24;break}if(o.severityText!=null&&(i.severityText=String(o.severityText)),o.body!=null){if(typeof o.body!="object")throw TypeError(".opentelemetry.proto.logs.v1.LogRecord.body: object expected");i.body=_.opentelemetry.proto.common.v1.AnyValue.fromObject(o.body);}if(o.attributes){if(!Array.isArray(o.attributes))throw TypeError(".opentelemetry.proto.logs.v1.LogRecord.attributes: array expected");i.attributes=[];for(var c=0;c<o.attributes.length;++c){if(typeof o.attributes[c]!="object")throw TypeError(".opentelemetry.proto.logs.v1.LogRecord.attributes: object expected");i.attributes[c]=_.opentelemetry.proto.common.v1.KeyValue.fromObject(o.attributes[c]);}}return o.droppedAttributesCount!=null&&(i.droppedAttributesCount=o.droppedAttributesCount>>>0),o.flags!=null&&(i.flags=o.flags>>>0),o.traceId!=null&&(typeof o.traceId=="string"?m.base64.decode(o.traceId,i.traceId=m.newBuffer(m.base64.length(o.traceId)),0):o.traceId.length>=0&&(i.traceId=o.traceId)),o.spanId!=null&&(typeof o.spanId=="string"?m.base64.decode(o.spanId,i.spanId=m.newBuffer(m.base64.length(o.spanId)),0):o.spanId.length>=0&&(i.spanId=o.spanId)),o.eventName!=null&&(i.eventName=String(o.eventName)),i},s.toObject=function(o,i){i||(i={});var c={};if((i.arrays||i.defaults)&&(c.attributes=[]),i.defaults){if(m.Long){var u=new m.Long(0,0,false);c.timeUnixNano=i.longs===String?u.toString():i.longs===Number?u.toNumber():u;}else c.timeUnixNano=i.longs===String?"0":0;if(c.severityNumber=i.enums===String?"SEVERITY_NUMBER_UNSPECIFIED":0,c.severityText="",c.body=null,c.droppedAttributesCount=0,c.flags=0,i.bytes===String?c.traceId="":(c.traceId=[],i.bytes!==Array&&(c.traceId=m.newBuffer(c.traceId))),i.bytes===String?c.spanId="":(c.spanId=[],i.bytes!==Array&&(c.spanId=m.newBuffer(c.spanId))),m.Long){var u=new m.Long(0,0,false);c.observedTimeUnixNano=i.longs===String?u.toString():i.longs===Number?u.toNumber():u;}else c.observedTimeUnixNano=i.longs===String?"0":0;c.eventName="";}if(o.timeUnixNano!=null&&o.hasOwnProperty("timeUnixNano")&&(typeof o.timeUnixNano=="number"?c.timeUnixNano=i.longs===String?String(o.timeUnixNano):o.timeUnixNano:c.timeUnixNano=i.longs===String?m.Long.prototype.toString.call(o.timeUnixNano):i.longs===Number?new m.LongBits(o.timeUnixNano.low>>>0,o.timeUnixNano.high>>>0).toNumber():o.timeUnixNano),o.severityNumber!=null&&o.hasOwnProperty("severityNumber")&&(c.severityNumber=i.enums===String?_.opentelemetry.proto.logs.v1.SeverityNumber[o.severityNumber]===void 0?o.severityNumber:_.opentelemetry.proto.logs.v1.SeverityNumber[o.severityNumber]:o.severityNumber),o.severityText!=null&&o.hasOwnProperty("severityText")&&(c.severityText=o.severityText),o.body!=null&&o.hasOwnProperty("body")&&(c.body=_.opentelemetry.proto.common.v1.AnyValue.toObject(o.body,i)),o.attributes&&o.attributes.length){c.attributes=[];for(var l=0;l<o.attributes.length;++l)c.attributes[l]=_.opentelemetry.proto.common.v1.KeyValue.toObject(o.attributes[l],i);}return o.droppedAttributesCount!=null&&o.hasOwnProperty("droppedAttributesCount")&&(c.droppedAttributesCount=o.droppedAttributesCount),o.flags!=null&&o.hasOwnProperty("flags")&&(c.flags=o.flags),o.traceId!=null&&o.hasOwnProperty("traceId")&&(c.traceId=i.bytes===String?m.base64.encode(o.traceId,0,o.traceId.length):i.bytes===Array?Array.prototype.slice.call(o.traceId):o.traceId),o.spanId!=null&&o.hasOwnProperty("spanId")&&(c.spanId=i.bytes===String?m.base64.encode(o.spanId,0,o.spanId.length):i.bytes===Array?Array.prototype.slice.call(o.spanId):o.spanId),o.observedTimeUnixNano!=null&&o.hasOwnProperty("observedTimeUnixNano")&&(typeof o.observedTimeUnixNano=="number"?c.observedTimeUnixNano=i.longs===String?String(o.observedTimeUnixNano):o.observedTimeUnixNano:c.observedTimeUnixNano=i.longs===String?m.Long.prototype.toString.call(o.observedTimeUnixNano):i.longs===Number?new m.LongBits(o.observedTimeUnixNano.low>>>0,o.observedTimeUnixNano.high>>>0).toNumber():o.observedTimeUnixNano),o.eventName!=null&&o.hasOwnProperty("eventName")&&(c.eventName=o.eventName),c},s.prototype.toJSON=function(){return this.constructor.toObject(this,re.util.toJSONOptions)},s.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/opentelemetry.proto.logs.v1.LogRecord"},s}(),n}(),r}(),e}(),t}();$W.exports=_;});function KW(t){return t>=48&&t<=57?t-48:t>=97&&t<=102?t-87:t-55}function mS(t){let e=new Uint8Array(t.length/2),r=0;for(let n=0;n<t.length;n+=2){let s=KW(t.charCodeAt(n)),a=KW(t.charCodeAt(n+1));e[r++]=s<<4|a;}return e}var WW=E(()=>{});function QW(t){let e=BigInt(1e9);return BigInt(t[0])*e+BigInt(t[1])}function T0e(t){let e=Number(BigInt.asUintN(32,t)),r=Number(BigInt.asUintN(32,t>>BigInt(32)));return {low:e,high:r}}function JW(t){let e=QW(t);return T0e(e)}function S0e(t){return QW(t).toString()}function XW(t){return t}function ZW(t){if(t!==void 0)return mS(t)}function ku(t){if(t===void 0)return y0e;let e=t.useLongBits??true,r=t.useHex??false;return {encodeHrTime:e?JW:g0e,encodeSpanContext:r?XW:mS,encodeOptionalSpanContext:r?XW:ZW}}var g0e,y0e,ES=E(()=>{G();WW();g0e=typeof BigInt<"u"?S0e:fE;y0e={encodeHrTime:JW,encodeSpanContext:mS,encodeOptionalSpanContext:ZW};});function Vu(t){let e={attributes:Co(t.attributes),droppedAttributesCount:0},r=t.schemaUrl;return r&&r!==""&&(e.schemaUrl=r),e}function Bu(t){return {name:t.name,version:t.version}}function Co(t){return Object.keys(t).map(e=>TS(e,t[e]))}function TS(t,e){return {key:t,value:SS(e)}}function SS(t){let e=typeof t;return e==="string"?{stringValue:t}:e==="number"?Number.isInteger(t)?{intValue:t}:{doubleValue:t}:e==="boolean"?{boolValue:t}:t instanceof Uint8Array?{bytesValue:t}:Array.isArray(t)?{arrayValue:{values:t.map(SS)}}:e==="object"&&t!=null?{kvlistValue:{values:Object.entries(t).map(([r,n])=>TS(r,n))}}:{}}var gS=E(()=>{});function yS(t,e){let r=ku(e);return {resourceLogs:R0e(t,r)}}function A0e(t){let e=new Map;for(let r of t){let{resource:n,instrumentationScope:{name:s,version:a="",schemaUrl:o=""}}=r,i=e.get(n);i||(i=new Map,e.set(n,i));let c=`${s}@${a}:${o}`,u=i.get(c);u||(u=[],i.set(c,u)),u.push(r);}return e}function R0e(t,e){let r=A0e(t);return Array.from(r,([n,s])=>{let a=Vu(n);return {resource:a,scopeLogs:Array.from(s,([,o])=>({scope:Bu(o[0].instrumentationScope),logRecords:o.map(i=>v0e(i,e)),schemaUrl:o[0].instrumentationScope.schemaUrl})),schemaUrl:a.schemaUrl}})}function v0e(t,e){return {timeUnixNano:e.encodeHrTime(t.hrTime),observedTimeUnixNano:e.encodeHrTime(t.hrTimeObserved),severityNumber:t.severityNumber,severityText:t.severityText,body:SS(t.body),eventName:t.eventName,attributes:O0e(t.attributes),droppedAttributesCount:t.droppedAttributesCount,flags:t.spanContext?.traceFlags,traceId:e.encodeOptionalSpanContext(t.spanContext?.traceId),spanId:e.encodeOptionalSpanContext(t.spanContext?.spanId)}}function O0e(t){return Object.keys(t).map(e=>TS(e,t[e]))}var BP=E(()=>{ES();gS();});var FP,N0e,C0e,Af,e4=E(()=>{FP=Yr(_S());BP();N0e=FP.opentelemetry.proto.collector.logs.v1.ExportLogsServiceResponse,C0e=FP.opentelemetry.proto.collector.logs.v1.ExportLogsServiceRequest,Af={serializeRequest:t=>{let e=yS(t);return C0e.encode(e).finish()},deserializeResponse:t=>N0e.decode(t)};});var t4=E(()=>{e4();});var Rf,r4=E(()=>{(function(t){t[t.AGGREGATION_TEMPORALITY_UNSPECIFIED=0]="AGGREGATION_TEMPORALITY_UNSPECIFIED",t[t.AGGREGATION_TEMPORALITY_DELTA=1]="AGGREGATION_TEMPORALITY_DELTA",t[t.AGGREGATION_TEMPORALITY_CUMULATIVE=2]="AGGREGATION_TEMPORALITY_CUMULATIVE";})(Rf||(Rf={}));});function P0e(t,e){let r=ku(e),n=Vu(t.resource);return {resource:n,schemaUrl:n.schemaUrl,scopeMetrics:b0e(t.scopeMetrics,r)}}function b0e(t,e){return Array.from(t.map(r=>({scope:Bu(r.scope),metrics:r.metrics.map(n=>M0e(n,e)),schemaUrl:r.scope.schemaUrl})))}function M0e(t,e){let r={name:t.descriptor.name,description:t.descriptor.description,unit:t.descriptor.unit},n=D0e(t.aggregationTemporality);switch(t.dataPointType){case hr.SUM:r.sum={aggregationTemporality:n,isMonotonic:t.isMonotonic,dataPoints:n4(t,e)};break;case hr.GAUGE:r.gauge={dataPoints:n4(t,e)};break;case hr.HISTOGRAM:r.histogram={aggregationTemporality:n,dataPoints:x0e(t,e)};break;case hr.EXPONENTIAL_HISTOGRAM:r.exponentialHistogram={aggregationTemporality:n,dataPoints:L0e(t,e)};break}return r}function I0e(t,e,r){let n={attributes:Co(t.attributes),startTimeUnixNano:r.encodeHrTime(t.startTime),timeUnixNano:r.encodeHrTime(t.endTime)};switch(e){case $r.INT:n.asInt=t.value;break;case $r.DOUBLE:n.asDouble=t.value;break}return n}function n4(t,e){return t.dataPoints.map(r=>I0e(r,t.descriptor.valueType,e))}function x0e(t,e){return t.dataPoints.map(r=>{let n=r.value;return {attributes:Co(r.attributes),bucketCounts:n.buckets.counts,explicitBounds:n.buckets.boundaries,count:n.count,sum:n.sum,min:n.min,max:n.max,startTimeUnixNano:e.encodeHrTime(r.startTime),timeUnixNano:e.encodeHrTime(r.endTime)}})}function L0e(t,e){return t.dataPoints.map(r=>{let n=r.value;return {attributes:Co(r.attributes),count:n.count,min:n.min,max:n.max,sum:n.sum,positive:{offset:n.positive.offset,bucketCounts:n.positive.bucketCounts},negative:{offset:n.negative.offset,bucketCounts:n.negative.bucketCounts},scale:n.scale,zeroCount:n.zeroCount,startTimeUnixNano:e.encodeHrTime(r.startTime),timeUnixNano:e.encodeHrTime(r.endTime)}})}function D0e(t){switch(t){case fr.DELTA:return Rf.AGGREGATION_TEMPORALITY_DELTA;case fr.CUMULATIVE:return Rf.AGGREGATION_TEMPORALITY_CUMULATIVE}}function AS(t,e){return {resourceMetrics:t.map(r=>P0e(r,e))}}var qP=E(()=>{M();er();r4();ES();gS();});var HP,w0e,U0e,vf,i4=E(()=>{HP=Yr(_S());qP();w0e=HP.opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceResponse,U0e=HP.opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceRequest,vf={serializeRequest:t=>{let e=AS([t]);return U0e.encode(e).finish()},deserializeResponse:t=>w0e.decode(t)};});var o4=E(()=>{i4();});function k0e(t,e){let r=t.spanContext(),n=t.status,s=t.parentSpanContext?.spanId?e.encodeSpanContext(t.parentSpanContext?.spanId):void 0;return {traceId:e.encodeSpanContext(r.traceId),spanId:e.encodeSpanContext(r.spanId),parentSpanId:s,traceState:r.traceState?.serialize(),name:t.name,kind:t.kind==null?0:t.kind+1,startTimeUnixNano:e.encodeHrTime(t.startTime),endTimeUnixNano:e.encodeHrTime(t.endTime),attributes:Co(t.attributes),droppedAttributesCount:t.droppedAttributesCount,events:t.events.map(a=>B0e(a,e)),droppedEventsCount:t.droppedEventsCount,status:{code:n.code,message:n.message},links:t.links.map(a=>V0e(a,e)),droppedLinksCount:t.droppedLinksCount}}function V0e(t,e){return {attributes:t.attributes?Co(t.attributes):[],spanId:e.encodeSpanContext(t.context.spanId),traceId:e.encodeSpanContext(t.context.traceId),traceState:t.context.traceState?.serialize(),droppedAttributesCount:t.droppedAttributesCount||0}}function B0e(t,e){return {attributes:t.attributes?Co(t.attributes):[],name:t.name,timeUnixNano:e.encodeHrTime(t.time),droppedAttributesCount:t.droppedAttributesCount||0}}function RS(t,e){let r=ku(e);return {resourceSpans:q0e(t,r)}}function F0e(t){let e=new Map;for(let r of t){let n=e.get(r.resource);n||(n=new Map,e.set(r.resource,n));let s=`${r.instrumentationScope.name}@${r.instrumentationScope.version||""}:${r.instrumentationScope.schemaUrl||""}`,a=n.get(s);a||(a=[],n.set(s,a)),a.push(r);}return e}function q0e(t,e){let r=F0e(t),n=[],s=r.entries(),a=s.next();for(;!a.done;){let[o,i]=a.value,c=[],u=i.values(),l=u.next();for(;!l.done;){let h=l.value;if(h.length>0){let T=h.map(g=>k0e(g,e));c.push({scope:Bu(h[0].instrumentationScope),spans:T,schemaUrl:h[0].instrumentationScope.schemaUrl});}l=u.next();}let d=Vu(o),p={resource:d,scopeSpans:c,schemaUrl:d.schemaUrl};n.push(p),a=s.next();}return n}var GP=E(()=>{gS();ES();});var jP,H0e,G0e,Of,s4=E(()=>{jP=Yr(_S());GP();H0e=jP.opentelemetry.proto.collector.trace.v1.ExportTraceServiceResponse,G0e=jP.opentelemetry.proto.collector.trace.v1.ExportTraceServiceRequest,Of={serializeRequest:t=>{let e=RS(t);return G0e.encode(e).finish()},deserializeResponse:t=>H0e.decode(t)};});var a4=E(()=>{s4();});var Nf,c4=E(()=>{BP();Nf={serializeRequest:t=>{let e=yS(t,{useHex:true,useLongBits:false});return new TextEncoder().encode(JSON.stringify(e))},deserializeResponse:t=>{if(t.length===0)return {};let e=new TextDecoder;return JSON.parse(e.decode(t))}};});var u4=E(()=>{c4();});var Cf,l4=E(()=>{qP();Cf={serializeRequest:t=>{let e=AS([t],{useLongBits:false});return new TextEncoder().encode(JSON.stringify(e))},deserializeResponse:t=>{if(t.length===0)return {};let e=new TextDecoder;return JSON.parse(e.decode(t))}};});var d4=E(()=>{l4();});var Pf,p4=E(()=>{GP();Pf={serializeRequest:t=>{let e=RS(t,{useHex:true,useLongBits:false});return new TextEncoder().encode(JSON.stringify(e))},deserializeResponse:t=>{if(t.length===0)return {};let e=new TextDecoder;return JSON.parse(e.decode(t))}};});var f4=E(()=>{p4();});var vS={};Ue(vS,{JsonLogsSerializer:()=>Nf,JsonMetricsSerializer:()=>Cf,JsonTraceSerializer:()=>Pf,ProtobufLogsSerializer:()=>Af,ProtobufMetricsSerializer:()=>vf,ProtobufTraceSerializer:()=>Of});var Fi=E(()=>{t4();o4();a4();u4();d4();f4();});var h4,_4=E(()=>{h4="0.204.0";});function m4(t){return ()=>{let e={};return Object.entries(t?.()??{}).forEach(([r,n])=>{typeof n<"u"?e[r]=String(n):N.warn(`Header "${r}" has invalid value (${n}) and will be ignored`);}),e}}var E4=E(()=>{M();});function j0e(t,e,r){let n={...r()},s={};return ()=>(e!=null&&Object.assign(s,e()),t!=null&&Object.assign(s,t()),Object.assign(s,n))}function z0e(t){if(t!=null)try{let e=globalThis.location?.href;return new URL(t,e).href}catch{throw new Error(`Configuration: Could not parse user-provided export URL: '${t}'`)}}function bf(t){return async e=>{let r=e==="http:"?import('http'):import('https'),{Agent:n}=await r;return new n(t)}}function T4(t,e,r){return {...iS(t,e,r),headers:j0e(m4(t.headers),e.headers,r.headers),url:z0e(t.url)??e.url??r.url,agentFactory:t.agentFactory??e.agentFactory??r.agentFactory}}function S4(t,e){return {...oS(),headers:()=>t,url:"http://localhost:4318/"+e,agentFactory:bf({keepAlive:true})}}var zP=E(()=>{Ef();E4();});function g4(t){return [429,502,503,504].includes(t)}function y4(t){if(t==null)return;let e=Number.parseInt(t,10);if(Number.isInteger(e))return e>0?e*1e3:-1;let r=new Date(t).getTime()-Date.now();return r>=0?r:0}var A4=E(()=>{});function v4(t,e,r,n,s,a){let o=new URL(e.url),i={hostname:o.hostname,port:o.port,path:o.pathname,method:"POST",headers:{...e.headers()},agent:r},c=t(i,u=>{let l=[];u.on("data",d=>l.push(d)),u.on("end",()=>{if(u.statusCode&&u.statusCode<299)s({status:"success",data:Buffer.concat(l)});else if(u.statusCode&&g4(u.statusCode))s({status:"retryable",retryInMillis:y4(u.headers["retry-after"])});else {let d=new No(u.statusMessage,u.statusCode,Buffer.concat(l).toString());s({status:"failure",error:d});}});});c.setTimeout(a,()=>{c.destroy(),s({status:"failure",error:new Error("Request Timeout")});}),c.on("error",u=>{s({status:"failure",error:u});}),$0e(c,e.compression,n,u=>{s({status:"failure",error:u});});}function $0e(t,e,r,n){let s=K0e(r);e==="gzip"&&(t.setHeader("Content-Encoding","gzip"),s=s.on("error",n).pipe(R4__namespace.createGzip()).on("error",n)),s.pipe(t).on("error",n);}function K0e(t){let e=new stream.Readable;return e.push(t),e.push(null),e}var O4=E(()=>{A4();rS();});async function W0e(t){let e=t==="http:"?import('http'):import('https'),{request:r}=await e;return r}function N4(t){return new YP(t)}var YP,C4=E(()=>{O4();YP=class{_parameters;_utils=null;constructor(e){this._parameters=e;}async send(e,r){let{agent:n,request:s}=await this._loadUtils();return new Promise(a=>{v4(s,this._parameters,n,e,o=>{a(o);},r);})}shutdown(){}async _loadUtils(){let e=this._utils;if(e===null){let r=new URL(this._parameters.url).protocol,[n,s]=await Promise.all([this._parameters.agentFactory(r),W0e(r)]);e=this._utils={agent:n,request:s};}return e}};});function X0e(){return Math.random()*(2*.2)-.2}function P4(t){return new $P(t.transport)}var $P,b4=E(()=>{$P=class{_transport;constructor(e){this._transport=e;}retry(e,r,n){return new Promise((s,a)=>{setTimeout(()=>{this._transport.send(e,r).then(s,a);},n);})}async send(e,r){let n=Date.now()+r,s=await this._transport.send(e,r),a=5,o=1e3;for(;s.status==="retryable"&&a>0;){a--;let i=Math.max(Math.min(o,5e3)+X0e(),0);o=o*1.5;let c=s.retryInMillis??i,u=n-Date.now();if(c>u)return s;s=await this.retry(e,u,c);}return s}shutdown(){return this._transport.shutdown()}};});function tn(t,e){return cS({transport:P4({transport:N4(t)}),serializer:e,promiseHandler:aS(t)},{timeout:t.timeoutMillis})}var M4=E(()=>{AP();C4();gP();b4();});function I4(t){let e=process.env[t]?.trim();if(e!=null&&e!==""){let r=Number(e);if(Number.isFinite(r)&&r>0)return r;N.warn(`Configuration: ${t} is invalid, expected number greater than 0 (actual: ${e})`);}}function Q0e(t){let e=I4(`OTEL_EXPORTER_OTLP_${t}_TIMEOUT`),r=I4("OTEL_EXPORTER_OTLP_TIMEOUT");return e??r}function x4(t){let e=process.env[t]?.trim();if(e!==""){if(e==null||e==="none"||e==="gzip")return e;N.warn(`Configuration: ${t} is invalid, expected 'none' or 'gzip' (actual: '${e}')`);}}function J0e(t){let e=x4(`OTEL_EXPORTER_OTLP_${t}_COMPRESSION`),r=x4("OTEL_EXPORTER_OTLP_COMPRESSION");return e??r}function OS(t){return {timeoutMillis:Q0e(t),compression:J0e(t)}}var KP=E(()=>{M();});function Z0e(t){let e=$t(`OTEL_EXPORTER_OTLP_${t}_HEADERS`),r=$t("OTEL_EXPORTER_OTLP_HEADERS"),n=Sa(e),s=Sa(r);if(!(Object.keys(n).length===0&&Object.keys(s).length===0))return Object.assign({},Sa(r),Sa(e))}function exe(t){try{return new URL(t).toString()}catch{N.warn(`Configuration: Could not parse environment-provided export URL: '${t}', falling back to undefined`);return}}function txe(t,e){try{new URL(t);}catch{N.warn(`Configuration: Could not parse environment-provided export URL: '${t}', falling back to undefined`);return}t.endsWith("/")||(t=t+"/"),t+=e;try{new URL(t);}catch{N.warn(`Configuration: Provided URL appended with '${e}' is not a valid URL, using 'undefined' instead of '${t}'`);return}return t}function rxe(t){let e=$t("OTEL_EXPORTER_OTLP_ENDPOINT");if(e!==void 0)return txe(e,t)}function nxe(t){let e=$t(`OTEL_EXPORTER_OTLP_${t}_ENDPOINT`);if(e!==void 0)return exe(e)}function L4(t,e){return {...OS(t),url:nxe(t)??rxe(e),headers:nS(Z0e(t))}}var D4=E(()=>{G();M();KP();Ef();});function ixe(t){if(typeof t.httpAgentOptions=="function")return t.httpAgentOptions;let e=t.httpAgentOptions;if(t.keepAlive!=null&&(e={keepAlive:t.keepAlive,...e}),e!=null)return bf(e)}function rn(t,e,r,n){return t.metadata&&N.warn("Metadata cannot be set when using http"),T4({url:t.url,headers:nS(t.headers),concurrencyLimit:t.concurrencyLimit,timeoutMillis:t.timeoutMillis,compression:t.compression,agentFactory:ixe(t)},L4(e,r),S4(n,r))}var w4=E(()=>{zP();D4();M();Ef();});var U4={};Ue(U4,{convertLegacyHttpOptions:()=>rn,createOtlpHttpExportDelegate:()=>tn,getSharedConfigurationFromEnvironment:()=>OS,httpAgentFactoryFromOptions:()=>bf});var Ss=E(()=>{zP();M4();KP();w4();});var Fu,k4=E(()=>{ki();Fi();_4();Ss();Fu=class extends Zr{constructor(e={}){super(tn(rn(e,"LOGS","v1/logs",{"User-Agent":`OTel-OTLP-Exporter-JavaScript/${h4}`,"Content-Type":"application/json"}),Nf));}};});var V4=E(()=>{k4();});var B4=E(()=>{V4();});var F4={};Ue(F4,{OTLPLogExporter:()=>Fu});var q4=E(()=>{B4();});var Ie=f(Vn=>{Object.defineProperty(Vn,"__esModule",{value:true});Vn.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=Vn.DEFAULT_MAX_SEND_MESSAGE_LENGTH=Vn.Propagate=Vn.LogVerbosity=Vn.Status=void 0;var H4;(function(t){t[t.OK=0]="OK",t[t.CANCELLED=1]="CANCELLED",t[t.UNKNOWN=2]="UNKNOWN",t[t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",t[t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",t[t.NOT_FOUND=5]="NOT_FOUND",t[t.ALREADY_EXISTS=6]="ALREADY_EXISTS",t[t.PERMISSION_DENIED=7]="PERMISSION_DENIED",t[t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",t[t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",t[t.ABORTED=10]="ABORTED",t[t.OUT_OF_RANGE=11]="OUT_OF_RANGE",t[t.UNIMPLEMENTED=12]="UNIMPLEMENTED",t[t.INTERNAL=13]="INTERNAL",t[t.UNAVAILABLE=14]="UNAVAILABLE",t[t.DATA_LOSS=15]="DATA_LOSS",t[t.UNAUTHENTICATED=16]="UNAUTHENTICATED";})(H4||(Vn.Status=H4={}));var G4;(function(t){t[t.DEBUG=0]="DEBUG",t[t.INFO=1]="INFO",t[t.ERROR=2]="ERROR",t[t.NONE=3]="NONE";})(G4||(Vn.LogVerbosity=G4={}));var j4;(function(t){t[t.DEADLINE=1]="DEADLINE",t[t.CENSUS_STATS_CONTEXT=2]="CENSUS_STATS_CONTEXT",t[t.CENSUS_TRACING_CONTEXT=4]="CENSUS_TRACING_CONTEXT",t[t.CANCELLATION=8]="CANCELLATION",t[t.DEFAULTS=65535]="DEFAULTS";})(j4||(Vn.Propagate=j4={}));Vn.DEFAULT_MAX_SEND_MESSAGE_LENGTH=-1;Vn.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=4*1024*1024;});var WP=f((Vvt,oxe)=>{oxe.exports={name:"@grpc/grpc-js",version:"1.13.4",description:"gRPC Library for Node - pure JS implementation",homepage:"https://grpc.io/",repository:"https://github.com/grpc/grpc-node/tree/master/packages/grpc-js",main:"build/src/index.js",engines:{node:">=12.10.0"},keywords:[],author:{name:"Google Inc."},types:"build/src/index.d.ts",license:"Apache-2.0",devDependencies:{"@grpc/proto-loader":"file:../proto-loader","@types/gulp":"^4.0.17","@types/gulp-mocha":"0.0.37","@types/lodash":"^4.14.202","@types/mocha":"^10.0.6","@types/ncp":"^2.0.8","@types/node":">=20.11.20","@types/pify":"^5.0.4","@types/semver":"^7.5.8","@typescript-eslint/eslint-plugin":"^7.1.0","@typescript-eslint/parser":"^7.1.0","@typescript-eslint/typescript-estree":"^7.1.0","clang-format":"^1.8.0",eslint:"^8.42.0","eslint-config-prettier":"^8.8.0","eslint-plugin-node":"^11.1.0","eslint-plugin-prettier":"^4.2.1",execa:"^2.0.3",gulp:"^4.0.2","gulp-mocha":"^6.0.0",lodash:"^4.17.21",madge:"^5.0.1","mocha-jenkins-reporter":"^0.4.1",ncp:"^2.0.0",pify:"^4.0.1",prettier:"^2.8.8",rimraf:"^3.0.2",semver:"^7.6.0","ts-node":"^10.9.2",typescript:"^5.3.3"},contributors:[{name:"Google Inc."}],scripts:{build:"npm run compile",clean:"rimraf ./build",compile:"tsc -p .",format:'clang-format -i -style="{Language: JavaScript, BasedOnStyle: Google, ColumnLimit: 80}" src/*.ts test/*.ts',lint:"eslint src/*.ts test/*.ts",prepare:"npm run generate-types && npm run compile",test:"gulp test",check:"npm run lint",fix:"eslint --fix src/*.ts test/*.ts",pretest:"npm run generate-types && npm run generate-test-types && npm run compile",posttest:"npm run check && madge -c ./build/src","generate-types":"proto-loader-gen-types --keepCase --longs String --enums String --defaults --oneofs --includeComments --includeDirs proto/ --include-dirs test/fixtures/ -O src/generated/ --grpcLib ../index channelz.proto","generate-test-types":"proto-loader-gen-types --keepCase --longs String --enums String --defaults --oneofs --includeComments --include-dirs test/fixtures/ -O test/generated/ --grpcLib ../../src/index test_service.proto"},dependencies:{"@grpc/proto-loader":"^0.7.13","@js-sdsl/ordered-map":"^4.4.2"},files:["src/**/*.ts","build/src/**/*.{js,d.ts,js.map}","proto/*.proto","LICENSE","deps/envoy-api/envoy/api/v2/**/*.proto","deps/envoy-api/envoy/config/**/*.proto","deps/envoy-api/envoy/service/**/*.proto","deps/envoy-api/envoy/type/**/*.proto","deps/udpa/udpa/**/*.proto","deps/googleapis/google/api/*.proto","deps/googleapis/google/rpc/*.proto","deps/protoc-gen-validate/validate/**/*.proto"]};});var ut=f(En=>{var XP,QP,JP,ZP;Object.defineProperty(En,"__esModule",{value:true});En.log=En.setLoggerVerbosity=En.setLogger=En.getLogger=void 0;En.trace=mxe;En.isTracerEnabled=Y4;var gs=Ie(),sxe=P("process"),axe=WP().version,cxe={error:(t,...e)=>{console.error("E "+t,...e);},info:(t,...e)=>{console.error("I "+t,...e);},debug:(t,...e)=>{console.error("D "+t,...e);}},Ua=cxe,qu=gs.LogVerbosity.ERROR,uxe=(QP=(XP=process.env.GRPC_NODE_VERBOSITY)!==null&&XP!==void 0?XP:process.env.GRPC_VERBOSITY)!==null&&QP!==void 0?QP:"";switch(uxe.toUpperCase()){case "DEBUG":qu=gs.LogVerbosity.DEBUG;break;case "INFO":qu=gs.LogVerbosity.INFO;break;case "ERROR":qu=gs.LogVerbosity.ERROR;break;case "NONE":qu=gs.LogVerbosity.NONE;break;}var lxe=()=>Ua;En.getLogger=lxe;var dxe=t=>{Ua=t;};En.setLogger=dxe;var pxe=t=>{qu=t;};En.setLoggerVerbosity=pxe;var fxe=(t,...e)=>{let r;if(t>=qu){switch(t){case gs.LogVerbosity.DEBUG:r=Ua.debug;break;case gs.LogVerbosity.INFO:r=Ua.info;break;case gs.LogVerbosity.ERROR:r=Ua.error;break}r||(r=Ua.error),r&&r.bind(Ua)(...e);}};En.log=fxe;var hxe=(ZP=(JP=process.env.GRPC_NODE_TRACE)!==null&&JP!==void 0?JP:process.env.GRPC_TRACE)!==null&&ZP!==void 0?ZP:"",eb=new Set,z4=new Set;for(let t of hxe.split(","))t.startsWith("-")?z4.add(t.substring(1)):eb.add(t);var _xe=eb.has("all");function mxe(t,e,r){Y4(e)&&(0, En.log)(t,new Date().toISOString()+" | v"+axe+" "+sxe.pid+" | "+e+" | "+r);}function Y4(t){return !z4.has(t)&&(_xe||eb.has(t))}});var CS=f(NS=>{Object.defineProperty(NS,"__esModule",{value:true});NS.getErrorMessage=Exe;NS.getErrorCode=Txe;function Exe(t){return t instanceof Error?t.message:String(t)}function Txe(t){return typeof t=="object"&&t!==null&&"code"in t&&typeof t.code=="number"?t.code:null}});var Nr=f(bS=>{Object.defineProperty(bS,"__esModule",{value:true});bS.Metadata=void 0;var Sxe=ut(),gxe=Ie(),yxe=CS(),Axe=/^[0-9a-z_.-]+$/,Rxe=/^[ -~]*$/;function vxe(t){return Axe.test(t)}function Oxe(t){return Rxe.test(t)}function K4(t){return t.endsWith("-bin")}function Nxe(t){return !t.startsWith("grpc-")}function PS(t){return t.toLowerCase()}function $4(t,e){if(!vxe(t))throw new Error('Metadata key "'+t+'" contains illegal characters');if(e!=null)if(K4(t)){if(!Buffer.isBuffer(e))throw new Error("keys that end with '-bin' must have Buffer values")}else {if(Buffer.isBuffer(e))throw new Error("keys that don't end with '-bin' must have String values");if(!Oxe(e))throw new Error('Metadata string value "'+e+'" contains illegal characters')}}var tb=class t{constructor(e={}){this.internalRepr=new Map,this.options=e;}set(e,r){e=PS(e),$4(e,r),this.internalRepr.set(e,[r]);}add(e,r){e=PS(e),$4(e,r);let n=this.internalRepr.get(e);n===void 0?this.internalRepr.set(e,[r]):n.push(r);}remove(e){e=PS(e),this.internalRepr.delete(e);}get(e){return e=PS(e),this.internalRepr.get(e)||[]}getMap(){let e={};for(let[r,n]of this.internalRepr)if(n.length>0){let s=n[0];e[r]=Buffer.isBuffer(s)?Buffer.from(s):s;}return e}clone(){let e=new t(this.options),r=e.internalRepr;for(let[n,s]of this.internalRepr){let a=s.map(o=>Buffer.isBuffer(o)?Buffer.from(o):o);r.set(n,a);}return e}merge(e){for(let[r,n]of e.internalRepr){let s=(this.internalRepr.get(r)||[]).concat(n);this.internalRepr.set(r,s);}}setOptions(e){this.options=e;}getOptions(){return this.options}toHttp2Headers(){let e={};for(let[r,n]of this.internalRepr)e[r]=n.map(Cxe);return e}toJSON(){let e={};for(let[r,n]of this.internalRepr)e[r]=n;return e}static fromHttp2Headers(e){let r=new t;for(let n of Object.keys(e)){if(n.charAt(0)===":")continue;let s=e[n];try{K4(n)?Array.isArray(s)?s.forEach(a=>{r.add(n,Buffer.from(a,"base64"));}):s!==void 0&&(Nxe(n)?s.split(",").forEach(a=>{r.add(n,Buffer.from(a.trim(),"base64"));}):r.add(n,Buffer.from(s,"base64"))):Array.isArray(s)?s.forEach(a=>{r.add(n,a);}):s!==void 0&&r.add(n,s);}catch(a){let o=`Failed to add metadata entry ${n}: ${s}. ${(0, yxe.getErrorMessage)(a)}. For more information see https://github.com/grpc/grpc-node/issues/1173`;(0, Sxe.log)(gxe.LogVerbosity.ERROR,o);}}return r}};bS.Metadata=tb;var Cxe=t=>Buffer.isBuffer(t)?t.toString("base64"):t;});var IS=f(MS=>{Object.defineProperty(MS,"__esModule",{value:true});MS.CallCredentials=void 0;var ob=Nr();function Pxe(t){return "getRequestHeaders"in t&&typeof t.getRequestHeaders=="function"}var Hu=class t{static createFromMetadataGenerator(e){return new nb(e)}static createFromGoogleCredential(e){return t.createFromMetadataGenerator((r,n)=>{let s;Pxe(e)?s=e.getRequestHeaders(r.service_url):s=new Promise((a,o)=>{e.getRequestMetadata(r.service_url,(i,c)=>{if(i){o(i);return}if(!c){o(new Error("Headers not set by metadata plugin"));return}a(c);});}),s.then(a=>{let o=new ob.Metadata;for(let i of Object.keys(a))o.add(i,a[i]);n(null,o);},a=>{n(a);});})}static createEmpty(){return new ib}};MS.CallCredentials=Hu;var rb=class t extends Hu{constructor(e){super(),this.creds=e;}async generateMetadata(e){let r=new ob.Metadata,n=await Promise.all(this.creds.map(s=>s.generateMetadata(e)));for(let s of n)r.merge(s);return r}compose(e){return new t(this.creds.concat([e]))}_equals(e){return this===e?true:e instanceof t?this.creds.every((r,n)=>r._equals(e.creds[n])):false}},nb=class t extends Hu{constructor(e){super(),this.metadataGenerator=e;}generateMetadata(e){return new Promise((r,n)=>{this.metadataGenerator(e,(s,a)=>{a!==void 0?r(a):n(s);});})}compose(e){return new rb([this,e])}_equals(e){return this===e?true:e instanceof t?this.metadataGenerator===e.metadataGenerator:false}},ib=class t extends Hu{generateMetadata(e){return Promise.resolve(new ob.Metadata)}compose(e){return e}_equals(e){return e instanceof t}};});var ab=f(Mf=>{Object.defineProperty(Mf,"__esModule",{value:true});Mf.CIPHER_SUITES=void 0;Mf.getDefaultRootsData=Mxe;var bxe=P("fs");Mf.CIPHER_SUITES=process.env.GRPC_SSL_CIPHER_SUITES;var W4=process.env.GRPC_DEFAULT_SSL_ROOTS_FILE_PATH,sb=null;function Mxe(){return W4?(sb===null&&(sb=bxe.readFileSync(W4)),sb):null}});var nn=f(Gu=>{Object.defineProperty(Gu,"__esModule",{value:true});Gu.parseUri=xxe;Gu.splitHostPort=Lxe;Gu.combineHostPort=Dxe;Gu.uriToString=wxe;var Ixe=/^(?:([A-Za-z0-9+.-]+):)?(?:\/\/([^/]*)\/)?(.+)$/;function xxe(t){let e=Ixe.exec(t);return e===null?null:{scheme:e[1],authority:e[2],path:e[3]}}var X4=/^\d+$/;function Lxe(t){if(t.startsWith("[")){let e=t.indexOf("]");if(e===-1)return null;let r=t.substring(1,e);if(r.indexOf(":")===-1)return null;if(t.length>e+1)if(t[e+1]===":"){let n=t.substring(e+2);return X4.test(n)?{host:r,port:+n}:null}else return null;else return {host:r}}else {let e=t.split(":");return e.length===2?X4.test(e[1])?{host:e[0],port:+e[1]}:null:{host:t}}}function Dxe(t){return t.port===void 0?t.host:t.host.includes(":")?`[${t.host}]:${t.port}`:`${t.host}:${t.port}`}function wxe(t){let e="";return t.scheme!==void 0&&(e+=t.scheme+":"),t.authority!==void 0&&(e+="//"+t.authority+"/"),e+=t.path,e}});var qi=f(ka=>{Object.defineProperty(ka,"__esModule",{value:true});ka.registerResolver=Uxe;ka.registerDefaultScheme=kxe;ka.createResolver=Vxe;ka.getDefaultAuthority=Bxe;ka.mapUriDefaultScheme=Fxe;var ub=nn(),ju={},cb=null;function Uxe(t,e){ju[t]=e;}function kxe(t){cb=t;}function Vxe(t,e,r){if(t.scheme!==void 0&&t.scheme in ju)return new ju[t.scheme](t,e,r);throw new Error(`No resolver could be created for target ${(0, ub.uriToString)(t)}`)}function Bxe(t){if(t.scheme!==void 0&&t.scheme in ju)return ju[t.scheme].getDefaultAuthority(t);throw new Error(`Invalid target ${(0, ub.uriToString)(t)}`)}function Fxe(t){return t.scheme===void 0||!(t.scheme in ju)?cb!==null?{scheme:cb,authority:void 0,path:(0, ub.uriToString)(t)}:null:t}});var Lf=f(xf=>{Object.defineProperty(xf,"__esModule",{value:true});xf.ChannelCredentials=void 0;xf.createCertificateProviderChannelCredentials=jxe;var If=P("tls"),DS=IS(),db=ab(),Q4=nn(),qxe=qi(),Hxe=ut(),Gxe=Ie();function lb(t,e){if(t&&!(t instanceof Buffer))throw new TypeError(`${e}, if provided, must be a Buffer.`)}var Va=class{compose(e){return new hb(this,e)}static createSsl(e,r,n,s){var a;if(lb(e,"Root certificate"),lb(r,"Private key"),lb(n,"Certificate chain"),r&&!n)throw new Error("Private key must be given with accompanying certificate chain");if(!r&&n)throw new Error("Certificate chain must be given with accompanying private key");let o=(0, If.createSecureContext)({ca:(a=e??(0, db.getDefaultRootsData)())!==null&&a!==void 0?a:void 0,key:r??void 0,cert:n??void 0,ciphers:db.CIPHER_SUITES});return new xS(o,s??{})}static createFromSecureContext(e,r){return new xS(e,r??{})}static createInsecure(){return new pb}};xf.ChannelCredentials=Va;var pb=class t extends Va{constructor(){super();}compose(e){throw new Error("Cannot compose insecure credentials")}_isSecure(){return  false}_equals(e){return e instanceof t}_createSecureConnector(e,r,n){return {connect(s){return Promise.resolve({socket:s,secure:false})},waitForReady:()=>Promise.resolve(),getCallCredentials:()=>n??DS.CallCredentials.createEmpty(),destroy(){}}}};function J4(t,e,r,n){var s,a;let o={secureContext:t},i=r;if("grpc.http_connect_target"in n){let d=(0, Q4.parseUri)(n["grpc.http_connect_target"]);d&&(i=d);}let c=(0, qxe.getDefaultAuthority)(i),u=(0, Q4.splitHostPort)(c),l=(s=u?.host)!==null&&s!==void 0?s:c;if(o.host=l,e.checkServerIdentity&&(o.checkServerIdentity=e.checkServerIdentity),e.rejectUnauthorized!==void 0&&(o.rejectUnauthorized=e.rejectUnauthorized),o.ALPNProtocols=["h2"],n["grpc.ssl_target_name_override"]){let d=n["grpc.ssl_target_name_override"],p=(a=o.checkServerIdentity)!==null&&a!==void 0?a:If.checkServerIdentity;o.checkServerIdentity=(h,T)=>p(d,T),o.servername=d;}else o.servername=l;return n["grpc-node.tls_enable_trace"]&&(o.enableTrace=true),o}var fb=class{constructor(e,r){this.connectionOptions=e,this.callCredentials=r;}connect(e){let r=Object.assign({socket:e},this.connectionOptions);return new Promise((n,s)=>{let a=(0, If.connect)(r,()=>{var o;if((!((o=this.connectionOptions.rejectUnauthorized)!==null&&o!==void 0)||o)&&!a.authorized){s(a.authorizationError);return}n({socket:a,secure:true});});a.on("error",o=>{s(o);});})}waitForReady(){return Promise.resolve()}getCallCredentials(){return this.callCredentials}destroy(){}},xS=class t extends Va{constructor(e,r){super(),this.secureContext=e,this.verifyOptions=r;}_isSecure(){return  true}_equals(e){return this===e?true:e instanceof t?this.secureContext===e.secureContext&&this.verifyOptions.checkServerIdentity===e.verifyOptions.checkServerIdentity:false}_createSecureConnector(e,r,n){let s=J4(this.secureContext,this.verifyOptions,e,r);return new fb(s,n??DS.CallCredentials.createEmpty())}},LS=class t extends Va{constructor(e,r,n){super(),this.caCertificateProvider=e,this.identityCertificateProvider=r,this.verifyOptions=n,this.refcount=0,this.latestCaUpdate=void 0,this.latestIdentityUpdate=void 0,this.caCertificateUpdateListener=this.handleCaCertificateUpdate.bind(this),this.identityCertificateUpdateListener=this.handleIdentityCertitificateUpdate.bind(this),this.secureContextWatchers=[];}_isSecure(){return  true}_equals(e){var r,n;return this===e?true:e instanceof t?this.caCertificateProvider===e.caCertificateProvider&&this.identityCertificateProvider===e.identityCertificateProvider&&((r=this.verifyOptions)===null||r===void 0?void 0:r.checkServerIdentity)===((n=e.verifyOptions)===null||n===void 0?void 0:n.checkServerIdentity):false}ref(){var e;this.refcount===0&&(this.caCertificateProvider.addCaCertificateListener(this.caCertificateUpdateListener),(e=this.identityCertificateProvider)===null||e===void 0||e.addIdentityCertificateListener(this.identityCertificateUpdateListener)),this.refcount+=1;}unref(){var e;this.refcount-=1,this.refcount===0&&(this.caCertificateProvider.removeCaCertificateListener(this.caCertificateUpdateListener),(e=this.identityCertificateProvider)===null||e===void 0||e.removeIdentityCertificateListener(this.identityCertificateUpdateListener));}_createSecureConnector(e,r,n){return this.ref(),new t.SecureConnectorImpl(this,e,r,n??DS.CallCredentials.createEmpty())}maybeUpdateWatchers(){if(this.hasReceivedUpdates()){for(let e of this.secureContextWatchers)e(this.getLatestSecureContext());this.secureContextWatchers=[];}}handleCaCertificateUpdate(e){this.latestCaUpdate=e,this.maybeUpdateWatchers();}handleIdentityCertitificateUpdate(e){this.latestIdentityUpdate=e,this.maybeUpdateWatchers();}hasReceivedUpdates(){return !(this.latestCaUpdate===void 0||this.identityCertificateProvider&&this.latestIdentityUpdate===void 0)}getSecureContext(){return this.hasReceivedUpdates()?Promise.resolve(this.getLatestSecureContext()):new Promise(e=>{this.secureContextWatchers.push(e);})}getLatestSecureContext(){var e,r;if(!this.latestCaUpdate||this.identityCertificateProvider!==null&&!this.latestIdentityUpdate)return null;try{return (0,If.createSecureContext)({ca:this.latestCaUpdate.caCertificate,key:(e=this.latestIdentityUpdate)===null||e===void 0?void 0:e.privateKey,cert:(r=this.latestIdentityUpdate)===null||r===void 0?void 0:r.certificate,ciphers:db.CIPHER_SUITES})}catch(n){return (0, Hxe.log)(Gxe.LogVerbosity.ERROR,"Failed to createSecureContext with error "+n.message),null}}};LS.SecureConnectorImpl=class{constructor(t,e,r,n){this.parent=t,this.channelTarget=e,this.options=r,this.callCredentials=n;}connect(t){return new Promise((e,r)=>{let n=this.parent.getLatestSecureContext();if(!n){r(new Error("Failed to load credentials"));return}t.closed&&r(new Error("Socket closed while loading credentials"));let s=J4(n,this.parent.verifyOptions,this.channelTarget,this.options),a=Object.assign({socket:t},s),o=()=>{r(new Error("Socket closed"));},i=u=>{r(u);},c=(0, If.connect)(a,()=>{var u;if(c.removeListener("close",o),c.removeListener("error",i),(!((u=this.parent.verifyOptions.rejectUnauthorized)!==null&&u!==void 0)||u)&&!c.authorized){r(c.authorizationError);return}e({socket:c,secure:true});});c.once("close",o),c.once("error",i);})}async waitForReady(){await this.parent.getSecureContext();}getCallCredentials(){return this.callCredentials}destroy(){this.parent.unref();}};function jxe(t,e,r){return new LS(t,e,r??{})}var hb=class t extends Va{constructor(e,r){if(super(),this.channelCredentials=e,this.callCredentials=r,!e._isSecure())throw new Error("Cannot compose insecure credentials")}compose(e){let r=this.callCredentials.compose(e);return new t(this.channelCredentials,r)}_isSecure(){return  true}_equals(e){return this===e?true:e instanceof t?this.channelCredentials._equals(e.channelCredentials)&&this.callCredentials._equals(e.callCredentials):false}_createSecureConnector(e,r,n){let s=this.callCredentials.compose(n??DS.CallCredentials.createEmpty());return this.channelCredentials._createSecureConnector(e,r,s)}};});var Ba=f(Hi=>{Object.defineProperty(Hi,"__esModule",{value:true});Hi.createChildChannelControlHelper=$xe;Hi.registerLoadBalancerType=Kxe;Hi.registerDefaultLoadBalancerType=Wxe;Hi.createLoadBalancer=Xxe;Hi.isLoadBalancerNameRegistered=Qxe;Hi.parseLoadBalancingConfig=Z4;Hi.getDefaultConfig=Jxe;Hi.selectLbConfigFromList=Zxe;var zxe=ut(),Yxe=Ie();function $xe(t,e){var r,n,s,a,o,i,c,u,l,d;return {createSubchannel:(n=(r=e.createSubchannel)===null||r===void 0?void 0:r.bind(e))!==null&&n!==void 0?n:t.createSubchannel.bind(t),updateState:(a=(s=e.updateState)===null||s===void 0?void 0:s.bind(e))!==null&&a!==void 0?a:t.updateState.bind(t),requestReresolution:(i=(o=e.requestReresolution)===null||o===void 0?void 0:o.bind(e))!==null&&i!==void 0?i:t.requestReresolution.bind(t),addChannelzChild:(u=(c=e.addChannelzChild)===null||c===void 0?void 0:c.bind(e))!==null&&u!==void 0?u:t.addChannelzChild.bind(t),removeChannelzChild:(d=(l=e.removeChannelzChild)===null||l===void 0?void 0:l.bind(e))!==null&&d!==void 0?d:t.removeChannelzChild.bind(t)}}var ys={},Df=null;function Kxe(t,e,r){ys[t]={LoadBalancer:e,LoadBalancingConfig:r};}function Wxe(t){Df=t;}function Xxe(t,e){let r=t.getLoadBalancerName();return r in ys?new ys[r].LoadBalancer(e):null}function Qxe(t){return t in ys}function Z4(t){let e=Object.keys(t);if(e.length!==1)throw new Error("Provided load balancing config has multiple conflicting entries");let r=e[0];if(r in ys)try{return ys[r].LoadBalancingConfig.createFromJson(t[r])}catch(n){throw new Error(`${r}: ${n.message}`)}else throw new Error(`Unrecognized load balancing config name ${r}`)}function Jxe(){if(!Df)throw new Error("No default load balancer type registered");return new ys[Df].LoadBalancingConfig}function Zxe(t,e=false){for(let r of t)try{return Z4(r)}catch(n){(0, zxe.log)(Yxe.LogVerbosity.DEBUG,"Config parsing failed with error",n.message);continue}return e&&Df?new ys[Df].LoadBalancingConfig:null}});var _b=f(wf=>{Object.defineProperty(wf,"__esModule",{value:true});wf.validateRetryThrottling=e6;wf.validateServiceConfig=t6;wf.extractAndSelectServiceConfig=uLe;var eLe=P("os"),wS=Ie(),US=/^\d+(\.\d{1,9})?s$/,tLe="node";function rLe(t){if("service"in t&&t.service!==""){if(typeof t.service!="string")throw new Error(`Invalid method config name: invalid service: expected type string, got ${typeof t.service}`);if("method"in t&&t.method!==""){if(typeof t.method!="string")throw new Error(`Invalid method config name: invalid method: expected type string, got ${typeof t.service}`);return {service:t.service,method:t.method}}else return {service:t.service}}else {if("method"in t&&t.method!==void 0)throw new Error("Invalid method config name: method set with empty or unset service");return {}}}function nLe(t){if(!("maxAttempts"in t)||!Number.isInteger(t.maxAttempts)||t.maxAttempts<2)throw new Error("Invalid method config retry policy: maxAttempts must be an integer at least 2");if(!("initialBackoff"in t)||typeof t.initialBackoff!="string"||!US.test(t.initialBackoff))throw new Error("Invalid method config retry policy: initialBackoff must be a string consisting of a positive integer or decimal followed by s");if(!("maxBackoff"in t)||typeof t.maxBackoff!="string"||!US.test(t.maxBackoff))throw new Error("Invalid method config retry policy: maxBackoff must be a string consisting of a positive integer or decimal followed by s");if(!("backoffMultiplier"in t)||typeof t.backoffMultiplier!="number"||t.backoffMultiplier<=0)throw new Error("Invalid method config retry policy: backoffMultiplier must be a number greater than 0");if(!("retryableStatusCodes"in t&&Array.isArray(t.retryableStatusCodes)))throw new Error("Invalid method config retry policy: retryableStatusCodes is required");if(t.retryableStatusCodes.length===0)throw new Error("Invalid method config retry policy: retryableStatusCodes must be non-empty");for(let e of t.retryableStatusCodes)if(typeof e=="number"){if(!Object.values(wS.Status).includes(e))throw new Error("Invalid method config retry policy: retryableStatusCodes value not in status code range")}else if(typeof e=="string"){if(!Object.values(wS.Status).includes(e.toUpperCase()))throw new Error("Invalid method config retry policy: retryableStatusCodes value not a status code name")}else throw new Error("Invalid method config retry policy: retryableStatusCodes value must be a string or number");return {maxAttempts:t.maxAttempts,initialBackoff:t.initialBackoff,maxBackoff:t.maxBackoff,backoffMultiplier:t.backoffMultiplier,retryableStatusCodes:t.retryableStatusCodes}}function iLe(t){if(!("maxAttempts"in t)||!Number.isInteger(t.maxAttempts)||t.maxAttempts<2)throw new Error("Invalid method config hedging policy: maxAttempts must be an integer at least 2");if("hedgingDelay"in t&&(typeof t.hedgingDelay!="string"||!US.test(t.hedgingDelay)))throw new Error("Invalid method config hedging policy: hedgingDelay must be a string consisting of a positive integer followed by s");if("nonFatalStatusCodes"in t&&Array.isArray(t.nonFatalStatusCodes))for(let r of t.nonFatalStatusCodes)if(typeof r=="number"){if(!Object.values(wS.Status).includes(r))throw new Error("Invalid method config hedging policy: nonFatalStatusCodes value not in status code range")}else if(typeof r=="string"){if(!Object.values(wS.Status).includes(r.toUpperCase()))throw new Error("Invalid method config hedging policy: nonFatalStatusCodes value not a status code name")}else throw new Error("Invalid method config hedging policy: nonFatalStatusCodes value must be a string or number");let e={maxAttempts:t.maxAttempts};return t.hedgingDelay&&(e.hedgingDelay=t.hedgingDelay),t.nonFatalStatusCodes&&(e.nonFatalStatusCodes=t.nonFatalStatusCodes),e}function oLe(t){var e;let r={name:[]};if(!("name"in t)||!Array.isArray(t.name))throw new Error("Invalid method config: invalid name array");for(let n of t.name)r.name.push(rLe(n));if("waitForReady"in t){if(typeof t.waitForReady!="boolean")throw new Error("Invalid method config: invalid waitForReady");r.waitForReady=t.waitForReady;}if("timeout"in t)if(typeof t.timeout=="object"){if(!("seconds"in t.timeout)||typeof t.timeout.seconds!="number")throw new Error("Invalid method config: invalid timeout.seconds");if(!("nanos"in t.timeout)||typeof t.timeout.nanos!="number")throw new Error("Invalid method config: invalid timeout.nanos");r.timeout=t.timeout;}else if(typeof t.timeout=="string"&&US.test(t.timeout)){let n=t.timeout.substring(0,t.timeout.length-1).split(".");r.timeout={seconds:n[0]|0,nanos:((e=n[1])!==null&&e!==void 0?e:0)|0};}else throw new Error("Invalid method config: invalid timeout");if("maxRequestBytes"in t){if(typeof t.maxRequestBytes!="number")throw new Error("Invalid method config: invalid maxRequestBytes");r.maxRequestBytes=t.maxRequestBytes;}if("maxResponseBytes"in t){if(typeof t.maxResponseBytes!="number")throw new Error("Invalid method config: invalid maxRequestBytes");r.maxResponseBytes=t.maxResponseBytes;}if("retryPolicy"in t){if("hedgingPolicy"in t)throw new Error("Invalid method config: retryPolicy and hedgingPolicy cannot both be specified");r.retryPolicy=nLe(t.retryPolicy);}else "hedgingPolicy"in t&&(r.hedgingPolicy=iLe(t.hedgingPolicy));return r}function e6(t){if(!("maxTokens"in t)||typeof t.maxTokens!="number"||t.maxTokens<=0||t.maxTokens>1e3)throw new Error("Invalid retryThrottling: maxTokens must be a number in (0, 1000]");if(!("tokenRatio"in t)||typeof t.tokenRatio!="number"||t.tokenRatio<=0)throw new Error("Invalid retryThrottling: tokenRatio must be a number greater than 0");return {maxTokens:+t.maxTokens.toFixed(3),tokenRatio:+t.tokenRatio.toFixed(3)}}function sLe(t){if(!(typeof t=="object"&&t!==null))throw new Error(`Invalid loadBalancingConfig: unexpected type ${typeof t}`);let e=Object.keys(t);if(e.length>1)throw new Error(`Invalid loadBalancingConfig: unexpected multiple keys ${e}`);if(e.length===0)throw new Error("Invalid loadBalancingConfig: load balancing policy name required");return {[e[0]]:t[e[0]]}}function t6(t){let e={loadBalancingConfig:[],methodConfig:[]};if("loadBalancingPolicy"in t)if(typeof t.loadBalancingPolicy=="string")e.loadBalancingPolicy=t.loadBalancingPolicy;else throw new Error("Invalid service config: invalid loadBalancingPolicy");if("loadBalancingConfig"in t)if(Array.isArray(t.loadBalancingConfig))for(let n of t.loadBalancingConfig)e.loadBalancingConfig.push(sLe(n));else throw new Error("Invalid service config: invalid loadBalancingConfig");if("methodConfig"in t&&Array.isArray(t.methodConfig))for(let n of t.methodConfig)e.methodConfig.push(oLe(n));"retryThrottling"in t&&(e.retryThrottling=e6(t.retryThrottling));let r=[];for(let n of e.methodConfig)for(let s of n.name){for(let a of r)if(s.service===a.service&&s.method===a.method)throw new Error(`Invalid service config: duplicate name ${s.service}/${s.method}`);r.push(s);}return e}function aLe(t){if(!("serviceConfig"in t))throw new Error("Invalid service config choice: missing service config");let e={serviceConfig:t6(t.serviceConfig)};if("clientLanguage"in t)if(Array.isArray(t.clientLanguage)){e.clientLanguage=[];for(let n of t.clientLanguage)if(typeof n=="string")e.clientLanguage.push(n);else throw new Error("Invalid service config choice: invalid clientLanguage")}else throw new Error("Invalid service config choice: invalid clientLanguage");if("clientHostname"in t)if(Array.isArray(t.clientHostname)){e.clientHostname=[];for(let n of t.clientHostname)if(typeof n=="string")e.clientHostname.push(n);else throw new Error("Invalid service config choice: invalid clientHostname")}else throw new Error("Invalid service config choice: invalid clientHostname");if("percentage"in t)if(typeof t.percentage=="number"&&0<=t.percentage&&t.percentage<=100)e.percentage=t.percentage;else throw new Error("Invalid service config choice: invalid percentage");let r=["clientLanguage","percentage","clientHostname","serviceConfig"];for(let n in t)if(!r.includes(n))throw new Error(`Invalid service config choice: unexpected field ${n}`);return e}function cLe(t,e){if(!Array.isArray(t))throw new Error("Invalid service config list");for(let r of t){let n=aLe(r);if(!(typeof n.percentage=="number"&&e>n.percentage)){if(Array.isArray(n.clientHostname)){let s=false;for(let a of n.clientHostname)a===eLe.hostname()&&(s=true);if(!s)continue}if(Array.isArray(n.clientLanguage)){let s=false;for(let a of n.clientLanguage)a===tLe&&(s=true);if(!s)continue}return n.serviceConfig}}throw new Error("No matching service config found")}function uLe(t,e){for(let r of t)if(r.length>0&&r[0].startsWith("grpc_config=")){let n=r.join("").substring(12),s=JSON.parse(n);return cLe(s,e)}return null}});var Bn=f(kS=>{Object.defineProperty(kS,"__esModule",{value:true});kS.ConnectivityState=void 0;var r6;(function(t){t[t.IDLE=0]="IDLE",t[t.CONNECTING=1]="CONNECTING",t[t.READY=2]="READY",t[t.TRANSIENT_FAILURE=3]="TRANSIENT_FAILURE",t[t.SHUTDOWN=4]="SHUTDOWN";})(r6||(kS.ConnectivityState=r6={}));});var Rs=f(As=>{Object.defineProperty(As,"__esModule",{value:true});As.QueuePicker=As.UnavailablePicker=As.PickResultType=void 0;var lLe=Nr(),dLe=Ie(),VS;(function(t){t[t.COMPLETE=0]="COMPLETE",t[t.QUEUE=1]="QUEUE",t[t.TRANSIENT_FAILURE=2]="TRANSIENT_FAILURE",t[t.DROP=3]="DROP";})(VS||(As.PickResultType=VS={}));var mb=class{constructor(e){this.status=Object.assign({code:dLe.Status.UNAVAILABLE,details:"No connection established",metadata:new lLe.Metadata},e);}pick(e){return {pickResultType:VS.TRANSIENT_FAILURE,subchannel:null,status:this.status,onCallStarted:null,onCallEnded:null}}};As.UnavailablePicker=mb;var Eb=class{constructor(e,r){this.loadBalancer=e,this.childPicker=r,this.calledExitIdle=false;}pick(e){return this.calledExitIdle||(process.nextTick(()=>{this.loadBalancer.exitIdle();}),this.calledExitIdle=true),this.childPicker?this.childPicker.pick(e):{pickResultType:VS.QUEUE,subchannel:null,status:null,onCallStarted:null,onCallEnded:null}}};As.QueuePicker=Eb;});var Uf=f(FS=>{Object.defineProperty(FS,"__esModule",{value:true});FS.BackoffTimeout=void 0;var pLe=Ie(),fLe=ut(),hLe="backoff",_Le=1e3,mLe=1.6,ELe=12e4,TLe=.2;function SLe(t,e){return Math.random()*(e-t)+t}var BS=class t{constructor(e,r){this.callback=e,this.initialDelay=_Le,this.multiplier=mLe,this.maxDelay=ELe,this.jitter=TLe,this.running=false,this.hasRef=true,this.startTime=new Date,this.endTime=new Date,this.id=t.getNextId(),r&&(r.initialDelay&&(this.initialDelay=r.initialDelay),r.multiplier&&(this.multiplier=r.multiplier),r.jitter&&(this.jitter=r.jitter),r.maxDelay&&(this.maxDelay=r.maxDelay)),this.trace("constructed initialDelay="+this.initialDelay+" multiplier="+this.multiplier+" jitter="+this.jitter+" maxDelay="+this.maxDelay),this.nextDelay=this.initialDelay,this.timerId=setTimeout(()=>{},0),clearTimeout(this.timerId);}static getNextId(){return this.nextId++}trace(e){fLe.trace(pLe.LogVerbosity.DEBUG,hLe,"{"+this.id+"} "+e);}runTimer(e){var r,n;this.trace("runTimer(delay="+e+")"),this.endTime=this.startTime,this.endTime.setMilliseconds(this.endTime.getMilliseconds()+e),clearTimeout(this.timerId),this.timerId=setTimeout(()=>{this.trace("timer fired"),this.running=false,this.callback();},e),this.hasRef||(n=(r=this.timerId).unref)===null||n===void 0||n.call(r);}runOnce(){this.trace("runOnce()"),this.running=true,this.startTime=new Date,this.runTimer(this.nextDelay);let e=Math.min(this.nextDelay*this.multiplier,this.maxDelay),r=e*this.jitter;this.nextDelay=e+SLe(-r,r);}stop(){this.trace("stop()"),clearTimeout(this.timerId),this.running=false;}reset(){if(this.trace("reset() running="+this.running),this.nextDelay=this.initialDelay,this.running){let e=new Date,r=this.startTime;r.setMilliseconds(r.getMilliseconds()+this.nextDelay),clearTimeout(this.timerId),e<r?this.runTimer(r.getTime()-e.getTime()):this.running=false;}}isRunning(){return this.running}ref(){var e,r;this.hasRef=true,(r=(e=this.timerId).ref)===null||r===void 0||r.call(e);}unref(){var e,r;this.hasRef=false,(r=(e=this.timerId).unref)===null||r===void 0||r.call(e);}getEndTime(){return this.endTime}};FS.BackoffTimeout=BS;BS.nextId=0;});var HS=f(qS=>{Object.defineProperty(qS,"__esModule",{value:true});qS.ChildLoadBalancerHandler=void 0;var gLe=Ba(),yLe=Bn(),ALe="child_load_balancer_helper",Tb=class{constructor(e){this.channelControlHelper=e,this.currentChild=null,this.pendingChild=null,this.latestConfig=null,this.ChildPolicyHelper=class{constructor(r){this.parent=r,this.child=null;}createSubchannel(r,n){return this.parent.channelControlHelper.createSubchannel(r,n)}updateState(r,n,s){var a;if(this.calledByPendingChild()){if(r===yLe.ConnectivityState.CONNECTING)return;(a=this.parent.currentChild)===null||a===void 0||a.destroy(),this.parent.currentChild=this.parent.pendingChild,this.parent.pendingChild=null;}else if(!this.calledByCurrentChild())return;this.parent.channelControlHelper.updateState(r,n,s);}requestReresolution(){var r;let n=(r=this.parent.pendingChild)!==null&&r!==void 0?r:this.parent.currentChild;this.child===n&&this.parent.channelControlHelper.requestReresolution();}setChild(r){this.child=r;}addChannelzChild(r){this.parent.channelControlHelper.addChannelzChild(r);}removeChannelzChild(r){this.parent.channelControlHelper.removeChannelzChild(r);}calledByPendingChild(){return this.child===this.parent.pendingChild}calledByCurrentChild(){return this.child===this.parent.currentChild}};}configUpdateRequiresNewPolicyInstance(e,r){return e.getLoadBalancerName()!==r.getLoadBalancerName()}updateAddressList(e,r,n){let s;if(this.currentChild===null||this.latestConfig===null||this.configUpdateRequiresNewPolicyInstance(this.latestConfig,r)){let a=new this.ChildPolicyHelper(this),o=(0, gLe.createLoadBalancer)(r,a);a.setChild(o),this.currentChild===null?(this.currentChild=o,s=this.currentChild):(this.pendingChild&&this.pendingChild.destroy(),this.pendingChild=o,s=this.pendingChild);}else this.pendingChild===null?s=this.currentChild:s=this.pendingChild;this.latestConfig=r,s.updateAddressList(e,r,n);}exitIdle(){this.currentChild&&(this.currentChild.exitIdle(),this.pendingChild&&this.pendingChild.exitIdle());}resetBackoff(){this.currentChild&&(this.currentChild.resetBackoff(),this.pendingChild&&this.pendingChild.resetBackoff());}destroy(){this.currentChild&&(this.currentChild.destroy(),this.currentChild=null),this.pendingChild&&(this.pendingChild.destroy(),this.pendingChild=null);}getTypeName(){return ALe}};qS.ChildLoadBalancerHandler=Tb;});var i6=f(GS=>{Object.defineProperty(GS,"__esModule",{value:true});GS.ResolvingLoadBalancer=void 0;var RLe=Ba(),vLe=_b(),on=Bn(),OLe=qi(),kf=Rs(),NLe=Uf(),Sb=Ie(),CLe=Nr(),PLe=ut(),bLe=Ie(),MLe=nn(),ILe=HS(),xLe="resolving_load_balancer";function n6(t){PLe.trace(bLe.LogVerbosity.DEBUG,xLe,t);}var LLe=["SERVICE_AND_METHOD","SERVICE","EMPTY"];function DLe(t,e,r,n){for(let s of r.name)switch(n){case "EMPTY":if(!s.service&&!s.method)return  true;break;case "SERVICE":if(s.service===t&&!s.method)return  true;break;case "SERVICE_AND_METHOD":if(s.service===t&&s.method===e)return  true}return  false}function wLe(t,e,r,n){for(let s of r)if(DLe(t,e,s,n))return s;return null}function ULe(t){return {invoke(e,r){var n,s;let a=e.split("/").filter(c=>c.length>0),o=(n=a[0])!==null&&n!==void 0?n:"",i=(s=a[1])!==null&&s!==void 0?s:"";if(t&&t.methodConfig)for(let c of LLe){let u=wLe(o,i,t.methodConfig,c);if(u)return {methodConfig:u,pickInformation:{},status:Sb.Status.OK,dynamicFilterFactories:[]}}return {methodConfig:{name:[]},pickInformation:{},status:Sb.Status.OK,dynamicFilterFactories:[]}},unref(){}}}var gb=class{constructor(e,r,n,s,a){this.target=e,this.channelControlHelper=r,this.channelOptions=n,this.onSuccessfulResolution=s,this.onFailedResolution=a,this.latestChildState=on.ConnectivityState.IDLE,this.latestChildPicker=new kf.QueuePicker(this),this.latestChildErrorMessage=null,this.currentState=on.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=false,n["grpc.service_config"]?this.defaultServiceConfig=(0, vLe.validateServiceConfig)(JSON.parse(n["grpc.service_config"])):this.defaultServiceConfig={loadBalancingConfig:[],methodConfig:[]},this.updateState(on.ConnectivityState.IDLE,new kf.QueuePicker(this),null),this.childLoadBalancer=new ILe.ChildLoadBalancerHandler({createSubchannel:r.createSubchannel.bind(r),requestReresolution:()=>{this.backoffTimeout.isRunning()?(n6("requestReresolution delayed by backoff timer until "+this.backoffTimeout.getEndTime().toISOString()),this.continueResolving=true):this.updateResolution();},updateState:(i,c,u)=>{this.latestChildState=i,this.latestChildPicker=c,this.latestChildErrorMessage=u,this.updateState(i,c,u);},addChannelzChild:r.addChannelzChild.bind(r),removeChannelzChild:r.removeChannelzChild.bind(r)}),this.innerResolver=(0, OLe.createResolver)(e,{onSuccessfulResolution:(i,c,u,l,d)=>{var p;this.backoffTimeout.stop(),this.backoffTimeout.reset();let h=null;c===null?u===null?(this.previousServiceConfig=null,h=this.defaultServiceConfig):this.previousServiceConfig===null?this.handleResolutionFailure(u):h=this.previousServiceConfig:(h=c,this.previousServiceConfig=c);let T=(p=h?.loadBalancingConfig)!==null&&p!==void 0?p:[],g=(0, RLe.selectLbConfigFromList)(T,true);if(g===null){this.handleResolutionFailure({code:Sb.Status.UNAVAILABLE,details:"All load balancer options in service config are not compatible",metadata:new CLe.Metadata}),l?.unref();return}this.childLoadBalancer.updateAddressList(i,g,Object.assign(Object.assign({},this.channelOptions),d));let y=h??this.defaultServiceConfig;this.onSuccessfulResolution(y,l??ULe(y));},onError:i=>{this.handleResolutionFailure(i);}},n);let o={initialDelay:n["grpc.initial_reconnect_backoff_ms"],maxDelay:n["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new NLe.BackoffTimeout(()=>{this.continueResolving?(this.updateResolution(),this.continueResolving=false):this.updateState(this.latestChildState,this.latestChildPicker,this.latestChildErrorMessage);},o),this.backoffTimeout.unref();}updateResolution(){this.innerResolver.updateResolution(),this.currentState===on.ConnectivityState.IDLE&&this.updateState(on.ConnectivityState.CONNECTING,this.latestChildPicker,this.latestChildErrorMessage),this.backoffTimeout.runOnce();}updateState(e,r,n){n6((0, MLe.uriToString)(this.target)+" "+on.ConnectivityState[this.currentState]+" -> "+on.ConnectivityState[e]),e===on.ConnectivityState.IDLE&&(r=new kf.QueuePicker(this,r)),this.currentState=e,this.channelControlHelper.updateState(e,r,n);}handleResolutionFailure(e){this.latestChildState===on.ConnectivityState.IDLE&&(this.updateState(on.ConnectivityState.TRANSIENT_FAILURE,new kf.UnavailablePicker(e),e.details),this.onFailedResolution(e));}exitIdle(){(this.currentState===on.ConnectivityState.IDLE||this.currentState===on.ConnectivityState.TRANSIENT_FAILURE)&&(this.backoffTimeout.isRunning()?this.continueResolving=true:this.updateResolution()),this.childLoadBalancer.exitIdle();}updateAddressList(e,r){throw new Error("updateAddressList not supported on ResolvingLoadBalancer")}resetBackoff(){this.backoffTimeout.reset(),this.childLoadBalancer.resetBackoff();}destroy(){this.childLoadBalancer.destroy(),this.innerResolver.destroy(),this.backoffTimeout.reset(),this.backoffTimeout.stop(),this.latestChildState=on.ConnectivityState.IDLE,this.latestChildPicker=new kf.QueuePicker(this),this.currentState=on.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=false;}getTypeName(){return "resolving_load_balancer"}};GS.ResolvingLoadBalancer=gb;});var o6=f(Vf=>{Object.defineProperty(Vf,"__esModule",{value:true});Vf.recognizedOptions=void 0;Vf.channelOptionsEqual=kLe;Vf.recognizedOptions={"grpc.ssl_target_name_override":true,"grpc.primary_user_agent":true,"grpc.secondary_user_agent":true,"grpc.default_authority":true,"grpc.keepalive_time_ms":true,"grpc.keepalive_timeout_ms":true,"grpc.keepalive_permit_without_calls":true,"grpc.service_config":true,"grpc.max_concurrent_streams":true,"grpc.initial_reconnect_backoff_ms":true,"grpc.max_reconnect_backoff_ms":true,"grpc.use_local_subchannel_pool":true,"grpc.max_send_message_length":true,"grpc.max_receive_message_length":true,"grpc.enable_http_proxy":true,"grpc.enable_channelz":true,"grpc.dns_min_time_between_resolutions_ms":true,"grpc.enable_retries":true,"grpc.per_rpc_retry_buffer_size":true,"grpc.retry_buffer_size":true,"grpc.max_connection_age_ms":true,"grpc.max_connection_age_grace_ms":true,"grpc-node.max_session_memory":true,"grpc.service_config_disable_resolution":true,"grpc.client_idle_timeout_ms":true,"grpc-node.tls_enable_trace":true,"grpc.lb.ring_hash.ring_size_cap":true,"grpc-node.retry_max_attempts_limit":true,"grpc-node.flow_control_window":true};function kLe(t,e){let r=Object.keys(t).sort(),n=Object.keys(e).sort();if(r.length!==n.length)return  false;for(let s=0;s<r.length;s+=1)if(r[s]!==n[s]||t[r[s]]!==e[n[s]])return  false;return  true}});var Fn=f(mi=>{Object.defineProperty(mi,"__esModule",{value:true});mi.EndpointMap=void 0;mi.isTcpSubchannelAddress=Ff;mi.subchannelAddressEqual=jS;mi.subchannelAddressToString=a6;mi.stringToSubchannelAddress=BLe;mi.endpointEqual=FLe;mi.endpointToString=qLe;mi.endpointHasAddress=c6;var s6=P("net");function Ff(t){return "port"in t}function jS(t,e){return !t&&!e?true:!t||!e?false:Ff(t)?Ff(e)&&t.host===e.host&&t.port===e.port:!Ff(e)&&t.path===e.path}function a6(t){return Ff(t)?(0, s6.isIPv6)(t.host)?"["+t.host+"]:"+t.port:t.host+":"+t.port:t.path}var VLe=443;function BLe(t,e){return (0, s6.isIP)(t)?{host:t,port:e??VLe}:{path:t}}function FLe(t,e){if(t.addresses.length!==e.addresses.length)return  false;for(let r=0;r<t.addresses.length;r++)if(!jS(t.addresses[r],e.addresses[r]))return  false;return  true}function qLe(t){return "["+t.addresses.map(a6).join(", ")+"]"}function c6(t,e){for(let r of t.addresses)if(jS(r,e))return  true;return  false}function Bf(t,e){if(t.addresses.length!==e.addresses.length)return  false;for(let r of t.addresses){let n=false;for(let s of e.addresses)if(jS(r,s)){n=true;break}if(!n)return  false}return  true}var yb=class{constructor(){this.map=new Set;}get size(){return this.map.size}getForSubchannelAddress(e){for(let r of this.map)if(c6(r.key,e))return r.value}deleteMissing(e){let r=[];for(let n of this.map){let s=false;for(let a of e)Bf(a,n.key)&&(s=true);s||(r.push(n.value),this.map.delete(n));}return r}get(e){for(let r of this.map)if(Bf(e,r.key))return r.value}set(e,r){for(let n of this.map)if(Bf(e,n.key)){n.value=r;return}this.map.add({key:e,value:r});}delete(e){for(let r of this.map)if(Bf(e,r.key)){this.map.delete(r);return}}has(e){for(let r of this.map)if(Bf(e,r.key))return  true;return  false}clear(){this.map.clear();}*keys(){for(let e of this.map)yield e.key;}*values(){for(let e of this.map)yield e.value;}*entries(){for(let e of this.map)yield [e.key,e.value];}};mi.EndpointMap=yb;});var l6={};Ue(l6,{OrderedMap:()=>WLe});function zu(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Ab(t,e);function r(){this.constructor=t;}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r);}function HLe(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,s,a,o;return o={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function i(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,s&&(a=u[0]&2?s.return:u[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,u[1])).done)return a;switch(s=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r);}catch(l){u=[6,l],s=0;}finally{n=a=0;}if(u[0]&5)throw u[1];return {value:u[0]?u[1]:void 0,done:true}}}function Fa(){throw new RangeError("Iterator access denied!")}var Ab,u6,GLe,jLe,zLe,YLe,$Le,KLe,Po,WLe,d6=E(()=>{Ab=function(t,e){return Ab=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n;}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s]);},Ab(t,e)};u6=function(){function t(e,r,n){n===void 0&&(n=1),this.t=void 0,this.i=void 0,this.h=void 0,this.u=e,this.o=r,this.l=n;}return t.prototype.v=function(){var e=this,r=e.h.h===e;if(r&&e.l===1)e=e.i;else if(e.t)for(e=e.t;e.i;)e=e.i;else {if(r)return e.h;for(var n=e.h;n.t===e;)e=n,n=e.h;e=n;}return e},t.prototype.p=function(){var e=this;if(e.i){for(e=e.i;e.t;)e=e.t;return e}else {for(var r=e.h;r.i===e;)e=r,r=e.h;return e.i!==r?r:e}},t.prototype.T=function(){var e=this.h,r=this.i,n=r.t;return e.h===this?e.h=r:e.t===this?e.t=r:e.i=r,r.h=e,r.t=this,this.h=r,this.i=n,n&&(n.h=this),r},t.prototype.I=function(){var e=this.h,r=this.t,n=r.i;return e.h===this?e.h=r:e.t===this?e.t=r:e.i=r,r.h=e,r.i=this,this.h=r,this.t=n,n&&(n.h=this),r},t}(),GLe=function(t){zu(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.O=1,r}return e.prototype.T=function(){var r=t.prototype.T.call(this);return this.M(),r.M(),r},e.prototype.I=function(){var r=t.prototype.I.call(this);return this.M(),r.M(),r},e.prototype.M=function(){this.O=1,this.t&&(this.O+=this.t.O),this.i&&(this.O+=this.i.O);},e}(u6),jLe=function(){function t(e){e===void 0&&(e=0),this.iteratorType=e;}return t.prototype.equals=function(e){return this.C===e.C},t}(),zLe=function(){function t(){this._=0;}return Object.defineProperty(t.prototype,"length",{get:function(){return this._},enumerable:false,configurable:true}),t.prototype.size=function(){return this._},t.prototype.empty=function(){return this._===0},t}(),YLe=function(t){zu(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(zLe);$Le=function(t){zu(e,t);function e(r,n){r===void 0&&(r=function(a,o){return a<o?-1:a>o?1:0}),n===void 0&&(n=false);var s=t.call(this)||this;return s.N=void 0,s.g=r,s.enableIndex=n,s.S=n?GLe:u6,s.A=new s.S,s}return e.prototype.m=function(r,n){for(var s=this.A;r;){var a=this.g(r.u,n);if(a<0)r=r.i;else if(a>0)s=r,r=r.t;else return r}return s},e.prototype.B=function(r,n){for(var s=this.A;r;){var a=this.g(r.u,n);a<=0?r=r.i:(s=r,r=r.t);}return s},e.prototype.j=function(r,n){for(var s=this.A;r;){var a=this.g(r.u,n);if(a<0)s=r,r=r.i;else if(a>0)r=r.t;else return r}return s},e.prototype.k=function(r,n){for(var s=this.A;r;){var a=this.g(r.u,n);a<0?(s=r,r=r.i):r=r.t;}return s},e.prototype.R=function(r){for(;;){var n=r.h;if(n===this.A)return;if(r.l===1){r.l=0;return}if(r===n.t){var s=n.i;if(s.l===1)s.l=0,n.l=1,n===this.N?this.N=n.T():n.T();else if(s.i&&s.i.l===1){s.l=n.l,n.l=0,s.i.l=0,n===this.N?this.N=n.T():n.T();return}else s.t&&s.t.l===1?(s.l=1,s.t.l=0,s.I()):(s.l=1,r=n);}else {var s=n.t;if(s.l===1)s.l=0,n.l=1,n===this.N?this.N=n.I():n.I();else if(s.t&&s.t.l===1){s.l=n.l,n.l=0,s.t.l=0,n===this.N?this.N=n.I():n.I();return}else s.i&&s.i.l===1?(s.l=1,s.i.l=0,s.T()):(s.l=1,r=n);}}},e.prototype.G=function(r){if(this._===1){this.clear();return}for(var n=r;n.t||n.i;){if(n.i)for(n=n.i;n.t;)n=n.t;else n=n.t;var s=r.u;r.u=n.u,n.u=s;var a=r.o;r.o=n.o,n.o=a,r=n;}this.A.t===n?this.A.t=n.h:this.A.i===n&&(this.A.i=n.h),this.R(n);var o=n.h;if(n===o.t?o.t=void 0:o.i=void 0,this._-=1,this.N.l=0,this.enableIndex)for(;o!==this.A;)o.O-=1,o=o.h;},e.prototype.P=function(r){for(var n=typeof r=="number"?r:void 0,s=typeof r=="function"?r:void 0,a=typeof r>"u"?[]:void 0,o=0,i=this.N,c=[];c.length||i;)if(i)c.push(i),i=i.t;else {if(i=c.pop(),o===n)return i;a&&a.push(i),s&&s(i,o,this),o+=1,i=i.i;}return a},e.prototype.q=function(r){for(;;){var n=r.h;if(n.l===0)return;var s=n.h;if(n===s.t){var a=s.i;if(a&&a.l===1){if(a.l=n.l=0,s===this.N)return;s.l=1,r=s;continue}else if(r===n.i){if(r.l=0,r.t&&(r.t.h=n),r.i&&(r.i.h=s),n.i=r.t,s.t=r.i,r.t=n,r.i=s,s===this.N)this.N=r,this.A.h=r;else {var o=s.h;o.t===s?o.t=r:o.i=r;}r.h=s.h,n.h=r,s.h=r,s.l=1;}else {n.l=0,s===this.N?this.N=s.I():s.I(),s.l=1;return}}else {var a=s.t;if(a&&a.l===1){if(a.l=n.l=0,s===this.N)return;s.l=1,r=s;continue}else if(r===n.t){if(r.l=0,r.t&&(r.t.h=s),r.i&&(r.i.h=n),s.i=r.t,n.t=r.i,r.t=s,r.i=n,s===this.N)this.N=r,this.A.h=r;else {var o=s.h;o.t===s?o.t=r:o.i=r;}r.h=s.h,n.h=r,s.h=r,s.l=1;}else {n.l=0,s===this.N?this.N=s.T():s.T(),s.l=1;return}}this.enableIndex&&(n.M(),s.M(),r.M());return}},e.prototype.D=function(r,n,s){if(this.N===void 0)return this._+=1,this.N=new this.S(r,n,0),this.N.h=this.A,this.A.h=this.A.t=this.A.i=this.N,this._;var a,o=this.A.t,i=this.g(o.u,r);if(i===0)return o.o=n,this._;if(i>0)o.t=new this.S(r,n),o.t.h=o,a=o.t,this.A.t=a;else {var c=this.A.i,u=this.g(c.u,r);if(u===0)return c.o=n,this._;if(u<0)c.i=new this.S(r,n),c.i.h=c,a=c.i,this.A.i=a;else {if(s!==void 0){var l=s.C;if(l!==this.A){var d=this.g(l.u,r);if(d===0)return l.o=n,this._;if(d>0){var p=l.v(),h=this.g(p.u,r);if(h===0)return p.o=n,this._;h<0&&(a=new this.S(r,n),p.i===void 0?(p.i=a,a.h=p):(l.t=a,a.h=l));}}}if(a===void 0)for(a=this.N;;){var T=this.g(a.u,r);if(T>0){if(a.t===void 0){a.t=new this.S(r,n),a.t.h=a,a=a.t;break}a=a.t;}else if(T<0){if(a.i===void 0){a.i=new this.S(r,n),a.i.h=a,a=a.i;break}a=a.i;}else return a.o=n,this._}}}if(this.enableIndex)for(var g=a.h;g!==this.A;)g.O+=1,g=g.h;return this.q(a),this._+=1,this._},e.prototype.F=function(r,n){for(;r;){var s=this.g(r.u,n);if(s<0)r=r.i;else if(s>0)r=r.t;else return r}return r||this.A},e.prototype.clear=function(){this._=0,this.N=void 0,this.A.h=void 0,this.A.t=this.A.i=void 0;},e.prototype.updateKeyByIterator=function(r,n){var s=r.C;if(s===this.A&&Fa(),this._===1)return s.u=n,true;var a=s.p().u;if(s===this.A.t)return this.g(a,n)>0?(s.u=n,true):false;var o=s.v().u;return s===this.A.i?this.g(o,n)<0?(s.u=n,true):false:this.g(o,n)>=0||this.g(a,n)<=0?false:(s.u=n,true)},e.prototype.eraseElementByPos=function(r){if(r<0||r>this._-1)throw new RangeError;var n=this.P(r);return this.G(n),this._},e.prototype.eraseElementByKey=function(r){if(this._===0)return  false;var n=this.F(this.N,r);return n===this.A?false:(this.G(n),true)},e.prototype.eraseElementByIterator=function(r){var n=r.C;n===this.A&&Fa();var s=n.i===void 0,a=r.iteratorType===0;return a?s&&r.next():(!s||n.t===void 0)&&r.next(),this.G(n),r},e.prototype.getHeight=function(){if(this._===0)return 0;function r(n){return n?Math.max(r(n.t),r(n.i))+1:0}return r(this.N)},e}(YLe),KLe=function(t){zu(e,t);function e(r,n,s){var a=t.call(this,s)||this;return a.C=r,a.A=n,a.iteratorType===0?(a.pre=function(){return this.C===this.A.t&&Fa(),this.C=this.C.v(),this},a.next=function(){return this.C===this.A&&Fa(),this.C=this.C.p(),this}):(a.pre=function(){return this.C===this.A.i&&Fa(),this.C=this.C.p(),this},a.next=function(){return this.C===this.A&&Fa(),this.C=this.C.v(),this}),a}return Object.defineProperty(e.prototype,"index",{get:function(){var r=this.C,n=this.A.h;if(r===this.A)return n?n.O-1:0;var s=0;for(r.t&&(s+=r.t.O);r!==n;){var a=r.h;r===a.i&&(s+=1,a.t&&(s+=a.t.O)),r=a;}return s},enumerable:false,configurable:true}),e.prototype.isAccessible=function(){return this.C!==this.A},e}(jLe),Po=function(t){zu(e,t);function e(r,n,s,a){var o=t.call(this,r,n,a)||this;return o.container=s,o}return Object.defineProperty(e.prototype,"pointer",{get:function(){this.C===this.A&&Fa();var r=this;return new Proxy([],{get:function(n,s){return s==="0"?r.C.u:s==="1"?r.C.o:(n[0]=r.C.u,n[1]=r.C.o,n[s])},set:function(n,s,a){if(s!=="1")throw new TypeError("prop must be 1");return r.C.o=a,true}})},enumerable:false,configurable:true}),e.prototype.copy=function(){return new e(this.C,this.A,this.container,this.iteratorType)},e}(KLe),WLe=function(t){zu(e,t);function e(r,n,s){r===void 0&&(r=[]);var a=t.call(this,n,s)||this,o=a;return r.forEach(function(i){o.setElement(i[0],i[1]);}),a}return e.prototype.begin=function(){return new Po(this.A.t||this.A,this.A,this)},e.prototype.end=function(){return new Po(this.A,this.A,this)},e.prototype.rBegin=function(){return new Po(this.A.i||this.A,this.A,this,1)},e.prototype.rEnd=function(){return new Po(this.A,this.A,this,1)},e.prototype.front=function(){if(this._!==0){var r=this.A.t;return [r.u,r.o]}},e.prototype.back=function(){if(this._!==0){var r=this.A.i;return [r.u,r.o]}},e.prototype.lowerBound=function(r){var n=this.m(this.N,r);return new Po(n,this.A,this)},e.prototype.upperBound=function(r){var n=this.B(this.N,r);return new Po(n,this.A,this)},e.prototype.reverseLowerBound=function(r){var n=this.j(this.N,r);return new Po(n,this.A,this)},e.prototype.reverseUpperBound=function(r){var n=this.k(this.N,r);return new Po(n,this.A,this)},e.prototype.forEach=function(r){this.P(function(n,s,a){r([n.u,n.o],s,a);});},e.prototype.setElement=function(r,n,s){return this.D(r,n,s)},e.prototype.getElementByPos=function(r){if(r<0||r>this._-1)throw new RangeError;var n=this.P(r);return [n.u,n.o]},e.prototype.find=function(r){var n=this.F(this.N,r);return new Po(n,this.A,this)},e.prototype.getElementByKey=function(r){var n=this.F(this.N,r);return n.o},e.prototype.union=function(r){var n=this;return r.forEach(function(s){n.setElement(s[0],s[1]);}),this._},e.prototype[Symbol.iterator]=function(){var r,n,s,a;return HLe(this,function(o){switch(o.label){case 0:r=this._,n=this.P(),s=0,o.label=1;case 1:return s<r?(a=n[s],[4,[a.u,a.o]]):[3,4];case 2:o.sent(),o.label=3;case 3:return ++s,[3,1];case 4:return [2]}})},e}($Le);});var YS=f(zS=>{Object.defineProperty(zS,"__esModule",{value:true});zS.registerAdminService=XLe;zS.addAdminServicesToServer=QLe;var p6=[];function XLe(t,e){p6.push({getServiceDefinition:t,getHandlers:e});}function QLe(t){for(let{getServiceDefinition:e,getHandlers:r}of p6)t.addService(e(),r());}});var f6=f(Ei=>{Object.defineProperty(Ei,"__esModule",{value:true});Ei.ClientDuplexStreamImpl=Ei.ClientWritableStreamImpl=Ei.ClientReadableStreamImpl=Ei.ClientUnaryCallImpl=void 0;Ei.callErrorFromStatus=ZLe;var JLe=P("events"),Cb=P("stream"),qf=Ie();function ZLe(t,e){let r=`${t.code} ${qf.Status[t.code]}: ${t.details}`,s=`${new Error(r).stack}
for call at
${e}`;return Object.assign(new Error(r),t,{stack:s})}var Rb=class extends JLe.EventEmitter{constructor(){super();}cancel(){var e;(e=this.call)===null||e===void 0||e.cancelWithStatus(qf.Status.CANCELLED,"Cancelled on client");}getPeer(){var e,r;return (r=(e=this.call)===null||e===void 0?void 0:e.getPeer())!==null&&r!==void 0?r:"unknown"}};Ei.ClientUnaryCallImpl=Rb;var vb=class extends Cb.Readable{constructor(e){super({objectMode:true}),this.deserialize=e;}cancel(){var e;(e=this.call)===null||e===void 0||e.cancelWithStatus(qf.Status.CANCELLED,"Cancelled on client");}getPeer(){var e,r;return (r=(e=this.call)===null||e===void 0?void 0:e.getPeer())!==null&&r!==void 0?r:"unknown"}_read(e){var r;(r=this.call)===null||r===void 0||r.startRead();}};Ei.ClientReadableStreamImpl=vb;var Ob=class extends Cb.Writable{constructor(e){super({objectMode:true}),this.serialize=e;}cancel(){var e;(e=this.call)===null||e===void 0||e.cancelWithStatus(qf.Status.CANCELLED,"Cancelled on client");}getPeer(){var e,r;return (r=(e=this.call)===null||e===void 0?void 0:e.getPeer())!==null&&r!==void 0?r:"unknown"}_write(e,r,n){var s;let a={callback:n},o=Number(r);Number.isNaN(o)||(a.flags=o),(s=this.call)===null||s===void 0||s.sendMessageWithContext(a,e);}_final(e){var r;(r=this.call)===null||r===void 0||r.halfClose(),e();}};Ei.ClientWritableStreamImpl=Ob;var Nb=class extends Cb.Duplex{constructor(e,r){super({objectMode:true}),this.serialize=e,this.deserialize=r;}cancel(){var e;(e=this.call)===null||e===void 0||e.cancelWithStatus(qf.Status.CANCELLED,"Cancelled on client");}getPeer(){var e,r;return (r=(e=this.call)===null||e===void 0?void 0:e.getPeer())!==null&&r!==void 0?r:"unknown"}_read(e){var r;(r=this.call)===null||r===void 0||r.startRead();}_write(e,r,n){var s;let a={callback:n},o=Number(r);Number.isNaN(o)||(a.flags=o),(s=this.call)===null||s===void 0||s.sendMessageWithContext(a,e);}_final(e){var r;(r=this.call)===null||r===void 0||r.halfClose(),e();}};Ei.ClientDuplexStreamImpl=Nb;});var h6=f(Hf=>{Object.defineProperty(Hf,"__esModule",{value:true});Hf.InterceptingListenerImpl=void 0;Hf.isInterceptingListener=eDe;function eDe(t){return t.onReceiveMetadata!==void 0&&t.onReceiveMetadata.length===1}var Pb=class{constructor(e,r){this.listener=e,this.nextListener=r,this.processingMetadata=false,this.hasPendingMessage=false,this.processingMessage=false,this.pendingStatus=null;}processPendingMessage(){this.hasPendingMessage&&(this.nextListener.onReceiveMessage(this.pendingMessage),this.pendingMessage=null,this.hasPendingMessage=false);}processPendingStatus(){this.pendingStatus&&this.nextListener.onReceiveStatus(this.pendingStatus);}onReceiveMetadata(e){this.processingMetadata=true,this.listener.onReceiveMetadata(e,r=>{this.processingMetadata=false,this.nextListener.onReceiveMetadata(r),this.processPendingMessage(),this.processPendingStatus();});}onReceiveMessage(e){this.processingMessage=true,this.listener.onReceiveMessage(e,r=>{this.processingMessage=false,this.processingMetadata?(this.pendingMessage=r,this.hasPendingMessage=true):(this.nextListener.onReceiveMessage(r),this.processPendingStatus());});}onReceiveStatus(e){this.listener.onReceiveStatus(e,r=>{this.processingMetadata||this.processingMessage?this.pendingStatus=r:this.nextListener.onReceiveStatus(r);});}};Hf.InterceptingListenerImpl=Pb;});var wb=f(Ti=>{Object.defineProperty(Ti,"__esModule",{value:true});Ti.InterceptingCall=Ti.RequesterBuilder=Ti.ListenerBuilder=Ti.InterceptorConfigurationError=void 0;Ti.getInterceptingCall=iDe;var tDe=Nr(),_6=h6(),m6=Ie(),E6=CS(),jf=class t extends Error{constructor(e){super(e),this.name="InterceptorConfigurationError",Error.captureStackTrace(this,t);}};Ti.InterceptorConfigurationError=jf;var Mb=class{constructor(){this.metadata=void 0,this.message=void 0,this.status=void 0;}withOnReceiveMetadata(e){return this.metadata=e,this}withOnReceiveMessage(e){return this.message=e,this}withOnReceiveStatus(e){return this.status=e,this}build(){return {onReceiveMetadata:this.metadata,onReceiveMessage:this.message,onReceiveStatus:this.status}}};Ti.ListenerBuilder=Mb;var Ib=class{constructor(){this.start=void 0,this.message=void 0,this.halfClose=void 0,this.cancel=void 0;}withStart(e){return this.start=e,this}withSendMessage(e){return this.message=e,this}withHalfClose(e){return this.halfClose=e,this}withCancel(e){return this.cancel=e,this}build(){return {start:this.start,sendMessage:this.message,halfClose:this.halfClose,cancel:this.cancel}}};Ti.RequesterBuilder=Ib;var bb={onReceiveMetadata:(t,e)=>{e(t);},onReceiveMessage:(t,e)=>{e(t);},onReceiveStatus:(t,e)=>{e(t);}},Gf={start:(t,e,r)=>{r(t,e);},sendMessage:(t,e)=>{e(t);},halfClose:t=>{t();},cancel:t=>{t();}},xb=class{constructor(e,r){var n,s,a,o;this.nextCall=e,this.processingMetadata=false,this.pendingMessageContext=null,this.processingMessage=false,this.pendingHalfClose=false,r?this.requester={start:(n=r.start)!==null&&n!==void 0?n:Gf.start,sendMessage:(s=r.sendMessage)!==null&&s!==void 0?s:Gf.sendMessage,halfClose:(a=r.halfClose)!==null&&a!==void 0?a:Gf.halfClose,cancel:(o=r.cancel)!==null&&o!==void 0?o:Gf.cancel}:this.requester=Gf;}cancelWithStatus(e,r){this.requester.cancel(()=>{this.nextCall.cancelWithStatus(e,r);});}getPeer(){return this.nextCall.getPeer()}processPendingMessage(){this.pendingMessageContext&&(this.nextCall.sendMessageWithContext(this.pendingMessageContext,this.pendingMessage),this.pendingMessageContext=null,this.pendingMessage=null);}processPendingHalfClose(){this.pendingHalfClose&&this.nextCall.halfClose();}start(e,r){var n,s,a,o,i,c;let u={onReceiveMetadata:(s=(n=r?.onReceiveMetadata)===null||n===void 0?void 0:n.bind(r))!==null&&s!==void 0?s:l=>{},onReceiveMessage:(o=(a=r?.onReceiveMessage)===null||a===void 0?void 0:a.bind(r))!==null&&o!==void 0?o:l=>{},onReceiveStatus:(c=(i=r?.onReceiveStatus)===null||i===void 0?void 0:i.bind(r))!==null&&c!==void 0?c:l=>{}};this.processingMetadata=true,this.requester.start(e,u,(l,d)=>{var p,h,T;this.processingMetadata=false;let g;if((0, _6.isInterceptingListener)(d))g=d;else {let y={onReceiveMetadata:(p=d.onReceiveMetadata)!==null&&p!==void 0?p:bb.onReceiveMetadata,onReceiveMessage:(h=d.onReceiveMessage)!==null&&h!==void 0?h:bb.onReceiveMessage,onReceiveStatus:(T=d.onReceiveStatus)!==null&&T!==void 0?T:bb.onReceiveStatus};g=new _6.InterceptingListenerImpl(y,u);}this.nextCall.start(l,g),this.processPendingMessage(),this.processPendingHalfClose();});}sendMessageWithContext(e,r){this.processingMessage=true,this.requester.sendMessage(r,n=>{this.processingMessage=false,this.processingMetadata?(this.pendingMessageContext=e,this.pendingMessage=r):(this.nextCall.sendMessageWithContext(e,n),this.processPendingHalfClose());});}sendMessage(e){this.sendMessageWithContext({},e);}startRead(){this.nextCall.startRead();}halfClose(){this.requester.halfClose(()=>{this.processingMetadata||this.processingMessage?this.pendingHalfClose=true:this.nextCall.halfClose();});}};Ti.InterceptingCall=xb;function rDe(t,e,r){var n,s;let a=(n=r.deadline)!==null&&n!==void 0?n:1/0,o=r.host,i=(s=r.parent)!==null&&s!==void 0?s:null,c=r.propagate_flags,u=r.credentials,l=t.createCall(e,a,o,i,c);return u&&l.setCredentials(u),l}var $S=class{constructor(e,r){this.call=e,this.methodDefinition=r;}cancelWithStatus(e,r){this.call.cancelWithStatus(e,r);}getPeer(){return this.call.getPeer()}sendMessageWithContext(e,r){let n;try{n=this.methodDefinition.requestSerialize(r);}catch(s){this.call.cancelWithStatus(m6.Status.INTERNAL,`Request message serialization failure: ${(0, E6.getErrorMessage)(s)}`);return}this.call.sendMessageWithContext(e,n);}sendMessage(e){this.sendMessageWithContext({},e);}start(e,r){let n=null;this.call.start(e,{onReceiveMetadata:s=>{var a;(a=r?.onReceiveMetadata)===null||a===void 0||a.call(r,s);},onReceiveMessage:s=>{var a;let o;try{o=this.methodDefinition.responseDeserialize(s);}catch(i){n={code:m6.Status.INTERNAL,details:`Response message parsing error: ${(0, E6.getErrorMessage)(i)}`,metadata:new tDe.Metadata},this.call.cancelWithStatus(n.code,n.details);return}(a=r?.onReceiveMessage)===null||a===void 0||a.call(r,o);},onReceiveStatus:s=>{var a,o;n?(a=r?.onReceiveStatus)===null||a===void 0||a.call(r,n):(o=r?.onReceiveStatus)===null||o===void 0||o.call(r,s);}});}startRead(){this.call.startRead();}halfClose(){this.call.halfClose();}},Lb=class extends $S{constructor(e,r){super(e,r);}start(e,r){var n,s;let a=false,o={onReceiveMetadata:(s=(n=r?.onReceiveMetadata)===null||n===void 0?void 0:n.bind(r))!==null&&s!==void 0?s:i=>{},onReceiveMessage:i=>{var c;a=true,(c=r?.onReceiveMessage)===null||c===void 0||c.call(r,i);},onReceiveStatus:i=>{var c,u;a||(c=r?.onReceiveMessage)===null||c===void 0||c.call(r,null),(u=r?.onReceiveStatus)===null||u===void 0||u.call(r,i);}};super.start(e,o),this.call.startRead();}},Db=class extends $S{};function nDe(t,e,r){let n=rDe(t,r.path,e);return r.responseStream?new Db(n,r):new Lb(n,r)}function iDe(t,e,r,n){if(t.clientInterceptors.length>0&&t.clientInterceptorProviders.length>0)throw new jf("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(t.callInterceptors.length>0&&t.callInterceptorProviders.length>0)throw new jf("Both interceptors and interceptor_providers were passed as call options. Only one of these is allowed.");let s=[];t.callInterceptors.length>0||t.callInterceptorProviders.length>0?s=[].concat(t.callInterceptors,t.callInterceptorProviders.map(i=>i(e))).filter(i=>i):s=[].concat(t.clientInterceptors,t.clientInterceptorProviders.map(i=>i(e))).filter(i=>i);let a=Object.assign({},r,{method_definition:e});return s.reduceRight((i,c)=>u=>c(u,i),i=>nDe(n,i,e))(a)}});var Vb=f(WS=>{Object.defineProperty(WS,"__esModule",{value:true});WS.Client=void 0;var Gi=f6(),oDe=Bb(),sDe=Bn(),vs=Ie(),Yu=Nr(),KS=wb(),Si=Symbol(),$u=Symbol(),Ku=Symbol(),bo=Symbol();function Ub(t){return typeof t=="function"}function Wu(t){var e;return ((e=t.stack)===null||e===void 0?void 0:e.split(`
`).slice(1).join(`
`))||"no stack trace available"}var kb=class{constructor(e,r,n={}){var s,a;if(n=Object.assign({},n),this[$u]=(s=n.interceptors)!==null&&s!==void 0?s:[],delete n.interceptors,this[Ku]=(a=n.interceptor_providers)!==null&&a!==void 0?a:[],delete n.interceptor_providers,this[$u].length>0&&this[Ku].length>0)throw new Error("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(this[bo]=n.callInvocationTransformer,delete n.callInvocationTransformer,n.channelOverride)this[Si]=n.channelOverride;else if(n.channelFactoryOverride){let o=n.channelFactoryOverride;delete n.channelFactoryOverride,this[Si]=o(e,r,n);}else this[Si]=new oDe.ChannelImplementation(e,r,n);}close(){this[Si].close();}getChannel(){return this[Si]}waitForReady(e,r){let n=s=>{if(s){r(new Error("Failed to connect before the deadline"));return}let a;try{a=this[Si].getConnectivityState(!0);}catch{r(new Error("The channel has been closed"));return}if(a===sDe.ConnectivityState.READY)r();else try{this[Si].watchConnectivityState(a,e,n);}catch{r(new Error("The channel has been closed"));}};setImmediate(n);}checkOptionalUnaryResponseArguments(e,r,n){if(Ub(e))return {metadata:new Yu.Metadata,options:{},callback:e};if(Ub(r))return e instanceof Yu.Metadata?{metadata:e,options:{},callback:r}:{metadata:new Yu.Metadata,options:e,callback:r};if(!(e instanceof Yu.Metadata&&r instanceof Object&&Ub(n)))throw new Error("Incorrect arguments passed");return {metadata:e,options:r,callback:n}}makeUnaryRequest(e,r,n,s,a,o,i){var c,u;let l=this.checkOptionalUnaryResponseArguments(a,o,i),d={path:e,requestStream:false,responseStream:false,requestSerialize:r,responseDeserialize:n},p={argument:s,metadata:l.metadata,call:new Gi.ClientUnaryCallImpl,channel:this[Si],methodDefinition:d,callOptions:l.options,callback:l.callback};this[bo]&&(p=this[bo](p));let h=p.call,T={clientInterceptors:this[$u],clientInterceptorProviders:this[Ku],callInterceptors:(c=p.callOptions.interceptors)!==null&&c!==void 0?c:[],callInterceptorProviders:(u=p.callOptions.interceptor_providers)!==null&&u!==void 0?u:[]},g=(0, KS.getInterceptingCall)(T,p.methodDefinition,p.callOptions,p.channel);h.call=g;let y=null,R=false,b=new Error;return g.start(p.metadata,{onReceiveMetadata:w=>{h.emit("metadata",w);},onReceiveMessage(w){y!==null&&g.cancelWithStatus(vs.Status.UNIMPLEMENTED,"Too many responses received"),y=w;},onReceiveStatus(w){if(!R){if(R=true,w.code===vs.Status.OK)if(y===null){let v=Wu(b);p.callback((0, Gi.callErrorFromStatus)({code:vs.Status.UNIMPLEMENTED,details:"No message received",metadata:w.metadata},v));}else p.callback(null,y);else {let v=Wu(b);p.callback((0, Gi.callErrorFromStatus)(w,v));}b=null,h.emit("status",w);}}}),g.sendMessage(s),g.halfClose(),h}makeClientStreamRequest(e,r,n,s,a,o){var i,c;let u=this.checkOptionalUnaryResponseArguments(s,a,o),l={path:e,requestStream:true,responseStream:false,requestSerialize:r,responseDeserialize:n},d={metadata:u.metadata,call:new Gi.ClientWritableStreamImpl(r),channel:this[Si],methodDefinition:l,callOptions:u.options,callback:u.callback};this[bo]&&(d=this[bo](d));let p=d.call,h={clientInterceptors:this[$u],clientInterceptorProviders:this[Ku],callInterceptors:(i=d.callOptions.interceptors)!==null&&i!==void 0?i:[],callInterceptorProviders:(c=d.callOptions.interceptor_providers)!==null&&c!==void 0?c:[]},T=(0, KS.getInterceptingCall)(h,d.methodDefinition,d.callOptions,d.channel);p.call=T;let g=null,y=false,R=new Error;return T.start(d.metadata,{onReceiveMetadata:b=>{p.emit("metadata",b);},onReceiveMessage(b){g!==null&&T.cancelWithStatus(vs.Status.UNIMPLEMENTED,"Too many responses received"),g=b,T.startRead();},onReceiveStatus(b){if(!y){if(y=true,b.code===vs.Status.OK)if(g===null){let w=Wu(R);d.callback((0, Gi.callErrorFromStatus)({code:vs.Status.UNIMPLEMENTED,details:"No message received",metadata:b.metadata},w));}else d.callback(null,g);else {let w=Wu(R);d.callback((0, Gi.callErrorFromStatus)(b,w));}R=null,p.emit("status",b);}}}),p}checkMetadataAndOptions(e,r){let n,s;return e instanceof Yu.Metadata?(n=e,r?s=r:s={}):(e?s=e:s={},n=new Yu.Metadata),{metadata:n,options:s}}makeServerStreamRequest(e,r,n,s,a,o){var i,c;let u=this.checkMetadataAndOptions(a,o),l={path:e,requestStream:false,responseStream:true,requestSerialize:r,responseDeserialize:n},d={argument:s,metadata:u.metadata,call:new Gi.ClientReadableStreamImpl(n),channel:this[Si],methodDefinition:l,callOptions:u.options};this[bo]&&(d=this[bo](d));let p=d.call,h={clientInterceptors:this[$u],clientInterceptorProviders:this[Ku],callInterceptors:(i=d.callOptions.interceptors)!==null&&i!==void 0?i:[],callInterceptorProviders:(c=d.callOptions.interceptor_providers)!==null&&c!==void 0?c:[]},T=(0, KS.getInterceptingCall)(h,d.methodDefinition,d.callOptions,d.channel);p.call=T;let g=false,y=new Error;return T.start(d.metadata,{onReceiveMetadata(R){p.emit("metadata",R);},onReceiveMessage(R){p.push(R);},onReceiveStatus(R){if(!g){if(g=true,p.push(null),R.code!==vs.Status.OK){let b=Wu(y);p.emit("error",(0, Gi.callErrorFromStatus)(R,b));}y=null,p.emit("status",R);}}}),T.sendMessage(s),T.halfClose(),p}makeBidiStreamRequest(e,r,n,s,a){var o,i;let c=this.checkMetadataAndOptions(s,a),u={path:e,requestStream:true,responseStream:true,requestSerialize:r,responseDeserialize:n},l={metadata:c.metadata,call:new Gi.ClientDuplexStreamImpl(r,n),channel:this[Si],methodDefinition:u,callOptions:c.options};this[bo]&&(l=this[bo](l));let d=l.call,p={clientInterceptors:this[$u],clientInterceptorProviders:this[Ku],callInterceptors:(o=l.callOptions.interceptors)!==null&&o!==void 0?o:[],callInterceptorProviders:(i=l.callOptions.interceptor_providers)!==null&&i!==void 0?i:[]},h=(0, KS.getInterceptingCall)(p,l.methodDefinition,l.callOptions,l.channel);d.call=h;let T=false,g=new Error;return h.start(l.metadata,{onReceiveMetadata(y){d.emit("metadata",y);},onReceiveMessage(y){d.push(y);},onReceiveStatus(y){if(!T){if(T=true,d.push(null),y.code!==vs.Status.OK){let R=Wu(g);d.emit("error",(0, Gi.callErrorFromStatus)(y,R));}g=null,d.emit("status",y);}}}),d}};WS.Client=kb;});var qb=f(XS=>{Object.defineProperty(XS,"__esModule",{value:true});XS.makeClientConstructor=T6;XS.loadPackageDefinition=lDe;var zf=Vb(),aDe={unary:zf.Client.prototype.makeUnaryRequest,server_stream:zf.Client.prototype.makeServerStreamRequest,client_stream:zf.Client.prototype.makeClientStreamRequest,bidi:zf.Client.prototype.makeBidiStreamRequest};function Fb(t){return ["__proto__","prototype","constructor"].includes(t)}function T6(t,e,r){class n extends zf.Client{}return Object.keys(t).forEach(s=>{if(Fb(s))return;let a=t[s],o;if(typeof s=="string"&&s.charAt(0)==="$")throw new Error("Method names cannot start with $");a.requestStream?a.responseStream?o="bidi":o="client_stream":a.responseStream?o="server_stream":o="unary";let i=a.requestSerialize,c=a.responseDeserialize,u=cDe(aDe[o],a.path,i,c);n.prototype[s]=u,Object.assign(n.prototype[s],a),a.originalName&&!Fb(a.originalName)&&(n.prototype[a.originalName]=n.prototype[s]);}),n.service=t,n.serviceName=e,n}function cDe(t,e,r,n){return function(...s){return t.call(this,e,r,n,...s)}}function uDe(t){return "format"in t}function lDe(t){let e={};for(let r in t)if(Object.prototype.hasOwnProperty.call(t,r)){let n=t[r],s=r.split(".");if(s.some(i=>Fb(i)))continue;let a=s[s.length-1],o=e;for(let i of s.slice(0,-1))o[i]||(o[i]={}),o=o[i];uDe(n)?o[a]=n:o[a]=T6(n,a);}return e}});var G6=f((lOt,H6)=>{var pDe="[object Symbol]",fDe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,hDe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,JS="\\ud800-\\udfff",N6="\\u0300-\\u036f\\ufe20-\\ufe23",C6="\\u20d0-\\u20f0",P6="\\u2700-\\u27bf",b6="a-z\\xdf-\\xf6\\xf8-\\xff",_De="\\xac\\xb1\\xd7\\xf7",mDe="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",EDe="\\u2000-\\u206f",TDe=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",M6="A-Z\\xc0-\\xd6\\xd8-\\xde",I6="\\ufe0e\\ufe0f",x6=_De+mDe+EDe+TDe,Gb="['\u2019]",SDe="["+JS+"]",S6="["+x6+"]",QS="["+N6+C6+"]",L6="\\d+",gDe="["+P6+"]",D6="["+b6+"]",w6="[^"+JS+x6+L6+P6+b6+M6+"]",Hb="\\ud83c[\\udffb-\\udfff]",yDe="(?:"+QS+"|"+Hb+")",U6="[^"+JS+"]",jb="(?:\\ud83c[\\udde6-\\uddff]){2}",zb="[\\ud800-\\udbff][\\udc00-\\udfff]",Xu="["+M6+"]",k6="\\u200d",g6="(?:"+D6+"|"+w6+")",ADe="(?:"+Xu+"|"+w6+")",y6="(?:"+Gb+"(?:d|ll|m|re|s|t|ve))?",A6="(?:"+Gb+"(?:D|LL|M|RE|S|T|VE))?",V6=yDe+"?",B6="["+I6+"]?",RDe="(?:"+k6+"(?:"+[U6,jb,zb].join("|")+")"+B6+V6+")*",F6=B6+V6+RDe,vDe="(?:"+[gDe,jb,zb].join("|")+")"+F6,ODe="(?:"+[U6+QS+"?",QS,jb,zb,SDe].join("|")+")",NDe=RegExp(Gb,"g"),CDe=RegExp(QS,"g"),PDe=RegExp(Hb+"(?="+Hb+")|"+ODe+F6,"g"),bDe=RegExp([Xu+"?"+D6+"+"+y6+"(?="+[S6,Xu,"$"].join("|")+")",ADe+"+"+A6+"(?="+[S6,Xu+g6,"$"].join("|")+")",Xu+"?"+g6+"+"+y6,Xu+"+"+A6,L6,vDe].join("|"),"g"),MDe=RegExp("["+k6+JS+N6+C6+I6+"]"),IDe=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,xDe={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"ss"},LDe=typeof global=="object"&&global&&global.Object===Object&&global,DDe=typeof self=="object"&&self&&self.Object===Object&&self,wDe=LDe||DDe||Function("return this")();function UDe(t,e,r,n){var s=-1,a=t?t.length:0;for(n;++s<a;)r=e(r,t[s],s,t);return r}function kDe(t){return t.split("")}function VDe(t){return t.match(fDe)||[]}function BDe(t){return function(e){return t?.[e]}}var FDe=BDe(xDe);function q6(t){return MDe.test(t)}function qDe(t){return IDe.test(t)}function HDe(t){return q6(t)?GDe(t):kDe(t)}function GDe(t){return t.match(PDe)||[]}function jDe(t){return t.match(bDe)||[]}var zDe=Object.prototype,YDe=zDe.toString,R6=wDe.Symbol,v6=R6?R6.prototype:void 0,O6=v6?v6.toString:void 0;function $De(t,e,r){var n=-1,s=t.length;e<0&&(e=-e>s?0:s+e),r=r>s?s:r,r<0&&(r+=s),s=e>r?0:r-e>>>0,e>>>=0;for(var a=Array(s);++n<s;)a[n]=t[n+e];return a}function KDe(t){if(typeof t=="string")return t;if(ZDe(t))return O6?O6.call(t):"";var e=t+"";return e=="0"&&1/t==-Infinity?"-0":e}function WDe(t,e,r){var n=t.length;return r=r===void 0?n:r,false&&r>=n?t:$De(t,e,r)}function XDe(t){return function(e){e=ZS(e);var r=q6(e)?HDe(e):void 0,n=r?r[0]:e.charAt(0),s=r?WDe(r,1).join(""):e.slice(1);return n[t]()+s}}function QDe(t){return function(e){return UDe(iwe(rwe(e).replace(NDe,"")),t,"")}}function JDe(t){return !!t&&typeof t=="object"}function ZDe(t){return typeof t=="symbol"||JDe(t)&&YDe.call(t)==pDe}function ZS(t){return t==null?"":KDe(t)}var ewe=QDe(function(t,e,r){return e=e.toLowerCase(),t+(r?twe(e):e)});function twe(t){return nwe(ZS(t).toLowerCase())}function rwe(t){return t=ZS(t),t&&t.replace(hDe,FDe).replace(CDe,"")}var nwe=XDe("toUpperCase");function iwe(t,e,r){return t=ZS(t),e=e,e===void 0?qDe(t)?jDe(t):VDe(t):t.match(e)||[]}H6.exports=ewe;});var z6=f((dOt,j6)=>{j6.exports=Yb;function Yb(t,e){typeof t=="string"&&(e=t,t=void 0);var r=[];function n(a){if(typeof a!="string"){var o=s();if(Yb.verbose&&console.log("codegen: "+o),o="return "+o,a){for(var i=Object.keys(a),c=new Array(i.length+1),u=new Array(i.length),l=0;l<i.length;)c[l]=i[l],u[l]=a[i[l++]];return c[l]=o,Function.apply(null,c).apply(null,u)}return Function(o)()}for(var d=new Array(arguments.length-1),p=0;p<d.length;)d[p]=arguments[++p];if(p=0,a=a.replace(/%([%dfijs])/g,function(T,g){var y=d[p++];switch(g){case "d":case "f":return String(Number(y));case "i":return String(Math.floor(y));case "j":return JSON.stringify(y);case "s":return String(y)}return "%"}),p!==d.length)throw Error("parameter count mismatch");return r.push(a),n}function s(a){return "function "+(a||e||"")+"("+(t&&t.join(",")||"")+`){
  `+r.join(`
  `)+`
}`}return n.toString=s,n}Yb.verbose=false;});var $6=f((pOt,Y6)=>{Y6.exports=Yf;var owe=RP(),swe=vP(),$b=swe("fs");function Yf(t,e,r){return typeof e=="function"?(r=e,e={}):e||(e={}),r?!e.xhr&&$b&&$b.readFile?$b.readFile(t,function(s,a){return s&&typeof XMLHttpRequest<"u"?Yf.xhr(t,e,r):s?r(s):r(null,e.binary?a:a.toString("utf8"))}):Yf.xhr(t,e,r):owe(Yf,this,t,e)}Yf.xhr=function(e,r,n){var s=new XMLHttpRequest;s.onreadystatechange=function(){if(s.readyState===4){if(s.status!==0&&s.status!==200)return n(Error("status "+s.status));if(r.binary){var o=s.response;if(!o){o=[];for(var i=0;i<s.responseText.length;++i)o.push(s.responseText.charCodeAt(i)&255);}return n(null,typeof Uint8Array<"u"?new Uint8Array(o):o)}return n(null,s.responseText)}},r.binary&&("overrideMimeType"in s&&s.overrideMimeType("text/plain; charset=x-user-defined"),s.responseType="arraybuffer"),s.open("GET",e),s.send();};});var X6=f(W6=>{var Wb=W6,K6=Wb.isAbsolute=function(e){return /^(?:\/|\w+:)/.test(e)},Kb=Wb.normalize=function(e){e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/");var r=e.split("/"),n=K6(e),s="";n&&(s=r.shift()+"/");for(var a=0;a<r.length;)r[a]===".."?a>0&&r[a-1]!==".."?r.splice(--a,2):n?r.splice(a,1):++a:r[a]==="."?r.splice(a,1):++a;return s+r.join("/")};Wb.resolve=function(e,r,n){return n||(r=Kb(r)),K6(r)?r:(n||(e=Kb(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?Kb(e+"/"+r):r)};});var Ju=f((hOt,Z6)=>{Z6.exports=ke;var eg=Ns();((ke.prototype=Object.create(eg.prototype)).constructor=ke).className="Namespace";var Xb=Os(),tg=ir(),awe=Ga(),qa,Qu,Ha;ke.fromJSON=function(e,r){return new ke(e,r.options).addJSON(r.nested)};function Q6(t,e){if(t&&t.length){for(var r={},n=0;n<t.length;++n)r[t[n].name]=t[n].toJSON(e);return r}}ke.arrayToJSON=Q6;ke.isReservedId=function(e,r){if(e){for(var n=0;n<e.length;++n)if(typeof e[n]!="string"&&e[n][0]<=r&&e[n][1]>r)return  true}return  false};ke.isReservedName=function(e,r){if(e){for(var n=0;n<e.length;++n)if(e[n]===r)return  true}return  false};function ke(t,e){eg.call(this,t,e),this.nested=void 0,this._nestedArray=null,this._lookupCache={},this._needsRecursiveFeatureResolution=true,this._needsRecursiveResolve=true;}function J6(t){t._nestedArray=null,t._lookupCache={};for(var e=t;e=e.parent;)e._lookupCache={};return t}Object.defineProperty(ke.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=tg.toArray(this.nested))}});ke.prototype.toJSON=function(e){return tg.toObject(["options",this.options,"nested",Q6(this.nestedArray,e)])};ke.prototype.addJSON=function(e){var r=this;if(e)for(var n=Object.keys(e),s=0,a;s<n.length;++s)a=e[n[s]],r.add((a.fields!==void 0?qa.fromJSON:a.values!==void 0?Ha.fromJSON:a.methods!==void 0?Qu.fromJSON:a.id!==void 0?Xb.fromJSON:ke.fromJSON)(n[s],a));return this};ke.prototype.get=function(e){return this.nested&&this.nested[e]||null};ke.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof Ha)return this.nested[e].values;throw Error("no such enum: "+e)};ke.prototype.add=function(e){if(!(e instanceof Xb&&e.extend!==void 0||e instanceof qa||e instanceof awe||e instanceof Ha||e instanceof Qu||e instanceof ke))throw TypeError("object must be a valid nested object");if(!this.nested)this.nested={};else {var r=this.get(e.name);if(r)if(r instanceof ke&&e instanceof ke&&!(r instanceof qa||r instanceof Qu)){for(var n=r.nestedArray,s=0;s<n.length;++s)e.add(n[s]);this.remove(r),this.nested||(this.nested={}),e.setOptions(r.options,true);}else throw Error("duplicate name '"+e.name+"' in "+this)}this.nested[e.name]=e,this instanceof qa||this instanceof Qu||this instanceof Ha||this instanceof Xb||e._edition||(e._edition=e._defaultEdition),this._needsRecursiveFeatureResolution=true,this._needsRecursiveResolve=true;for(var a=this;a=a.parent;)a._needsRecursiveFeatureResolution=true,a._needsRecursiveResolve=true;return e.onAdd(this),J6(this)};ke.prototype.remove=function(e){if(!(e instanceof eg))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),J6(this)};ke.prototype.define=function(e,r){if(tg.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&e[0]==="")throw Error("path must be relative");for(var n=this;e.length>0;){var s=e.shift();if(n.nested&&n.nested[s]){if(n=n.nested[s],!(n instanceof ke))throw Error("path conflicts with non-namespace objects")}else n.add(n=new ke(s));}return r&&n.addJSON(r),n};ke.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;this._resolveFeaturesRecursive(this._edition);var e=this.nestedArray,r=0;for(this.resolve();r<e.length;)e[r]instanceof ke?e[r++].resolveAll():e[r++].resolve();return this._needsRecursiveResolve=false,this};ke.prototype._resolveFeaturesRecursive=function(e){return this._needsRecursiveFeatureResolution?(this._needsRecursiveFeatureResolution=false,e=this._edition||e,eg.prototype._resolveFeaturesRecursive.call(this,e),this.nestedArray.forEach(r=>{r._resolveFeaturesRecursive(e);}),this):this};ke.prototype.lookup=function(e,r,n){if(typeof r=="boolean"?(n=r,r=void 0):r&&!Array.isArray(r)&&(r=[r]),tg.isString(e)&&e.length){if(e===".")return this.root;e=e.split(".");}else if(!e.length)return this;var s=e.join(".");if(e[0]==="")return this.root.lookup(e.slice(1),r);var a=this.root._fullyQualifiedObjects&&this.root._fullyQualifiedObjects["."+s];if(a&&(!r||r.indexOf(a.constructor)>-1)||(a=this._lookupImpl(e,s),a&&(!r||r.indexOf(a.constructor)>-1)))return a;if(n)return null;for(var o=this;o.parent;){if(a=o.parent._lookupImpl(e,s),a&&(!r||r.indexOf(a.constructor)>-1))return a;o=o.parent;}return null};ke.prototype._lookupImpl=function(e,r){if(Object.prototype.hasOwnProperty.call(this._lookupCache,r))return this._lookupCache[r];var n=this.get(e[0]),s=null;if(n)e.length===1?s=n:n instanceof ke&&(e=e.slice(1),s=n._lookupImpl(e,e.join(".")));else for(var a=0;a<this.nestedArray.length;++a)this._nestedArray[a]instanceof ke&&(n=this._nestedArray[a]._lookupImpl(e,r))&&(s=n);return this._lookupCache[r]=s,s};ke.prototype.lookupType=function(e){var r=this.lookup(e,[qa]);if(!r)throw Error("no such type: "+e);return r};ke.prototype.lookupEnum=function(e){var r=this.lookup(e,[Ha]);if(!r)throw Error("no such Enum '"+e+"' in "+this);return r};ke.prototype.lookupTypeOrEnum=function(e){var r=this.lookup(e,[qa,Ha]);if(!r)throw Error("no such Type or Enum '"+e+"' in "+this);return r};ke.prototype.lookupService=function(e){var r=this.lookup(e,[Qu]);if(!r)throw Error("no such Service '"+e+"' in "+this);return r};ke._configure=function(t,e,r){qa=t,Qu=e,Ha=r;};});var rg=f((_Ot,e8)=>{e8.exports=Mo;var Qb=Os();((Mo.prototype=Object.create(Qb.prototype)).constructor=Mo).className="MapField";var cwe=ja(),$f=ir();function Mo(t,e,r,n,s,a){if(Qb.call(this,t,e,n,void 0,void 0,s,a),!$f.isString(r))throw TypeError("keyType must be a string");this.keyType=r,this.resolvedKeyType=null,this.map=true;}Mo.fromJSON=function(e,r){return new Mo(e,r.id,r.keyType,r.type,r.options,r.comment)};Mo.prototype.toJSON=function(e){var r=e?!!e.keepComments:false;return $f.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",r?this.comment:void 0])};Mo.prototype.resolve=function(){if(this.resolved)return this;if(cwe.mapKey[this.keyType]===void 0)throw Error("invalid key type: "+this.keyType);return Qb.prototype.resolve.call(this)};Mo.d=function(e,r,n){return typeof n=="function"?n=$f.decorateType(n).name:n&&typeof n=="object"&&(n=$f.decorateEnum(n).name),function(a,o){$f.decorateType(a.constructor).add(new Mo(o,e,r,n));}};});var ng=f((mOt,t8)=>{t8.exports=za;var Jb=Ns();((za.prototype=Object.create(Jb.prototype)).constructor=za).className="Method";var Zu=ir();function za(t,e,r,n,s,a,o,i,c){if(Zu.isObject(s)?(o=s,s=a=void 0):Zu.isObject(a)&&(o=a,a=void 0),!(e===void 0||Zu.isString(e)))throw TypeError("type must be a string");if(!Zu.isString(r))throw TypeError("requestType must be a string");if(!Zu.isString(n))throw TypeError("responseType must be a string");Jb.call(this,t,o),this.type=e||"rpc",this.requestType=r,this.requestStream=s?true:void 0,this.responseType=n,this.responseStream=a?true:void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=i,this.parsedOptions=c;}za.fromJSON=function(e,r){return new za(e,r.type,r.requestType,r.responseType,r.requestStream,r.responseStream,r.options,r.comment,r.parsedOptions)};za.prototype.toJSON=function(e){var r=e?!!e.keepComments:false;return Zu.toObject(["type",this.type!=="rpc"&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",r?this.comment:void 0,"parsedOptions",this.parsedOptions])};za.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),Jb.prototype.resolve.call(this))};});var ig=f((EOt,n8)=>{n8.exports=Tn;var Io=Ju();((Tn.prototype=Object.create(Io.prototype)).constructor=Tn).className="Service";var Zb=ng(),Kf=ir(),uwe=UP();function Tn(t,e){Io.call(this,t,e),this.methods={},this._methodsArray=null;}Tn.fromJSON=function(e,r){var n=new Tn(e,r.options);if(r.methods)for(var s=Object.keys(r.methods),a=0;a<s.length;++a)n.add(Zb.fromJSON(s[a],r.methods[s[a]]));return r.nested&&n.addJSON(r.nested),r.edition&&(n._edition=r.edition),n.comment=r.comment,n._defaultEdition="proto3",n};Tn.prototype.toJSON=function(e){var r=Io.prototype.toJSON.call(this,e),n=e?!!e.keepComments:false;return Kf.toObject(["edition",this._editionToJSON(),"options",r&&r.options||void 0,"methods",Io.arrayToJSON(this.methodsArray,e)||{},"nested",r&&r.nested||void 0,"comment",n?this.comment:void 0])};Object.defineProperty(Tn.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=Kf.toArray(this.methods))}});function r8(t){return t._methodsArray=null,t}Tn.prototype.get=function(e){return this.methods[e]||Io.prototype.get.call(this,e)};Tn.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;Io.prototype.resolve.call(this);for(var e=this.methodsArray,r=0;r<e.length;++r)e[r].resolve();return this};Tn.prototype._resolveFeaturesRecursive=function(e){return this._needsRecursiveFeatureResolution?(e=this._edition||e,Io.prototype._resolveFeaturesRecursive.call(this,e),this.methodsArray.forEach(r=>{r._resolveFeaturesRecursive(e);}),this):this};Tn.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof Zb?(this.methods[e.name]=e,e.parent=this,r8(this)):Io.prototype.add.call(this,e)};Tn.prototype.remove=function(e){if(e instanceof Zb){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,r8(this)}return Io.prototype.remove.call(this,e)};Tn.prototype.create=function(e,r,n){for(var s=new uwe.Service(e,r,n),a=0,o;a<this.methodsArray.length;++a){var i=Kf.lcFirst((o=this._methodsArray[a]).resolve().name).replace(/[^$\w_]/g,"");s[i]=Kf.codegen(["r","c"],Kf.isReserved(i)?i+"_":i)("return this.rpcCall(m,q,s,r,c)")({m:o,q:o.resolvedRequestType.ctor,s:o.resolvedResponseType.ctor});}return s};});var og=f((TOt,i8)=>{i8.exports=ji;var lwe=Vi();function ji(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)this[e[r]]=t[e[r]];}ji.create=function(e){return this.$type.create(e)};ji.encode=function(e,r){return this.$type.encode(e,r)};ji.encodeDelimited=function(e,r){return this.$type.encodeDelimited(e,r)};ji.decode=function(e){return this.$type.decode(e)};ji.decodeDelimited=function(e){return this.$type.decodeDelimited(e)};ji.verify=function(e){return this.$type.verify(e)};ji.fromObject=function(e){return this.$type.fromObject(e)};ji.toObject=function(e,r){return this.$type.toObject(e,r)};ji.prototype.toJSON=function(){return this.$type.toObject(this,lwe.toJSONOptions)};});var eM=f((SOt,s8)=>{s8.exports=fwe;var dwe=gi(),xo=ja(),o8=ir();function pwe(t){return "missing required '"+t.name+"'"}function fwe(t){for(var e=o8.codegen(["r","l","e"],t.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(t.fieldsArray.filter(function(i){return i.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()")("if(t===e)")("break")("switch(t>>>3){"),r=0;r<t.fieldsArray.length;++r){var n=t._fieldsArray[r].resolve(),s=n.resolvedType instanceof dwe?"int32":n.type,a="m"+o8.safeProp(n.name);e("case %i: {",n.id),n.map?(e("if(%s===util.emptyObject)",a)("%s={}",a)("var c2 = r.uint32()+r.pos"),xo.defaults[n.keyType]!==void 0?e("k=%j",xo.defaults[n.keyType]):e("k=null"),xo.defaults[s]!==void 0?e("value=%j",xo.defaults[s]):e("value=null"),e("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",n.keyType)("case 2:"),xo.basic[s]===void 0?e("value=types[%i].decode(r,r.uint32())",r):e("value=r.%s()",s),e("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),xo.long[n.keyType]!==void 0?e('%s[typeof k==="object"?util.longToHash(k):k]=value',a):e("%s[k]=value",a)):n.repeated?(e("if(!(%s&&%s.length))",a,a)("%s=[]",a),xo.packed[s]!==void 0&&e("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",a,s)("}else"),xo.basic[s]===void 0?e(n.delimited?"%s.push(types[%i].decode(r,undefined,((t&~7)|4)))":"%s.push(types[%i].decode(r,r.uint32()))",a,r):e("%s.push(r.%s())",a,s)):xo.basic[s]===void 0?e(n.delimited?"%s=types[%i].decode(r,undefined,((t&~7)|4))":"%s=types[%i].decode(r,r.uint32())",a,r):e("%s=r.%s()",a,s),e("break")("}");}for(e("default:")("r.skipType(t&7)")("break")("}")("}"),r=0;r<t._fieldsArray.length;++r){var o=t._fieldsArray[r];o.required&&e("if(!m.hasOwnProperty(%j))",o.name)("throw util.ProtocolError(%j,{instance:m})",pwe(o));}return e("return m")}});var nM=f((gOt,a8)=>{a8.exports=mwe;var hwe=gi(),tM=ir();function qn(t,e){return t.name+": "+e+(t.repeated&&e!=="array"?"[]":t.map&&e!=="object"?"{k:"+t.keyType+"}":"")+" expected"}function rM(t,e,r,n){if(e.resolvedType)if(e.resolvedType instanceof hwe){t("switch(%s){",n)("default:")("return%j",qn(e,"enum value"));for(var s=Object.keys(e.resolvedType.values),a=0;a<s.length;++a)t("case %i:",e.resolvedType.values[s[a]]);t("break")("}");}else t("{")("var e=types[%i].verify(%s);",r,n)("if(e)")("return%j+e",e.name+".")("}");else switch(e.type){case "int32":case "uint32":case "sint32":case "fixed32":case "sfixed32":t("if(!util.isInteger(%s))",n)("return%j",qn(e,"integer"));break;case "int64":case "uint64":case "sint64":case "fixed64":case "sfixed64":t("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",n,n,n,n)("return%j",qn(e,"integer|Long"));break;case "float":case "double":t('if(typeof %s!=="number")',n)("return%j",qn(e,"number"));break;case "bool":t('if(typeof %s!=="boolean")',n)("return%j",qn(e,"boolean"));break;case "string":t("if(!util.isString(%s))",n)("return%j",qn(e,"string"));break;case "bytes":t('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',n,n,n)("return%j",qn(e,"buffer"));break}return t}function _we(t,e,r){switch(e.keyType){case "int32":case "uint32":case "sint32":case "fixed32":case "sfixed32":t("if(!util.key32Re.test(%s))",r)("return%j",qn(e,"integer key"));break;case "int64":case "uint64":case "sint64":case "fixed64":case "sfixed64":t("if(!util.key64Re.test(%s))",r)("return%j",qn(e,"integer|Long key"));break;case "bool":t("if(!util.key2Re.test(%s))",r)("return%j",qn(e,"boolean key"));break}return t}function mwe(t){var e=tM.codegen(["m"],t.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),r=t.oneofsArray,n={};r.length&&e("var p={}");for(var s=0;s<t.fieldsArray.length;++s){var a=t._fieldsArray[s].resolve(),o="m"+tM.safeProp(a.name);if(a.optional&&e("if(%s!=null&&m.hasOwnProperty(%j)){",o,a.name),a.map)e("if(!util.isObject(%s))",o)("return%j",qn(a,"object"))("var k=Object.keys(%s)",o)("for(var i=0;i<k.length;++i){"),_we(e,a,"k[i]"),rM(e,a,s,o+"[k[i]]")("}");else if(a.repeated)e("if(!Array.isArray(%s))",o)("return%j",qn(a,"array"))("for(var i=0;i<%s.length;++i){",o),rM(e,a,s,o+"[i]")("}");else {if(a.partOf){var i=tM.safeProp(a.partOf.name);n[a.partOf.name]===1&&e("if(p%s===1)",i)("return%j",a.partOf.name+": multiple values"),n[a.partOf.name]=1,e("p%s=1",i);}rM(e,a,s,o);}a.optional&&e("}");}return e("return null")}});var sM=f(u8=>{var c8=u8,Wf=gi(),zi=ir();function iM(t,e,r,n){var s=false;if(e.resolvedType)if(e.resolvedType instanceof Wf){t("switch(d%s){",n);for(var a=e.resolvedType.values,o=Object.keys(a),i=0;i<o.length;++i)a[o[i]]===e.typeDefault&&!s&&(t("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',n,n,n),e.repeated||t("break"),s=true),t("case%j:",o[i])("case %i:",a[o[i]])("m%s=%j",n,a[o[i]])("break");t("}");}else t('if(typeof d%s!=="object")',n)("throw TypeError(%j)",e.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,r,n);else {var c=false;switch(e.type){case "double":case "float":t("m%s=Number(d%s)",n,n);break;case "uint32":case "fixed32":t("m%s=d%s>>>0",n,n);break;case "int32":case "sint32":case "sfixed32":t("m%s=d%s|0",n,n);break;case "uint64":c=true;case "int64":case "sint64":case "fixed64":case "sfixed64":t("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,c)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,c?"true":"");break;case "bytes":t('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length >= 0)",n)("m%s=d%s",n,n);break;case "string":t("m%s=String(d%s)",n,n);break;case "bool":t("m%s=Boolean(d%s)",n,n);break}}return t}c8.fromObject=function(e){var r=e.fieldsArray,n=zi.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!r.length)return n("return new this.ctor");n("var m=new this.ctor");for(var s=0;s<r.length;++s){var a=r[s].resolve(),o=zi.safeProp(a.name);a.map?(n("if(d%s){",o)('if(typeof d%s!=="object")',o)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",o)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",o),iM(n,a,s,o+"[ks[i]]")("}")("}")):a.repeated?(n("if(d%s){",o)("if(!Array.isArray(d%s))",o)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",o)("for(var i=0;i<d%s.length;++i){",o),iM(n,a,s,o+"[i]")("}")("}")):(a.resolvedType instanceof Wf||n("if(d%s!=null){",o),iM(n,a,s,o),a.resolvedType instanceof Wf||n("}"));}return n("return m")};function oM(t,e,r,n){if(e.resolvedType)e.resolvedType instanceof Wf?t("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",n,r,n,n,r,n,n):t("d%s=types[%i].toObject(m%s,o)",n,r,n);else {var s=false;switch(e.type){case "double":case "float":t("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case "uint64":s=true;case "int64":case "sint64":case "fixed64":case "sfixed64":t('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,s?"true":"",n);break;case "bytes":t("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:t("d%s=m%s",n,n);break}}return t}c8.toObject=function(e){var r=e.fieldsArray.slice().sort(zi.compareFieldsById);if(!r.length)return zi.codegen()("return {}");for(var n=zi.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),s=[],a=[],o=[],i=0;i<r.length;++i)r[i].partOf||(r[i].resolve().repeated?s:r[i].map?a:o).push(r[i]);if(s.length){for(n("if(o.arrays||o.defaults){"),i=0;i<s.length;++i)n("d%s=[]",zi.safeProp(s[i].name));n("}");}if(a.length){for(n("if(o.objects||o.defaults){"),i=0;i<a.length;++i)n("d%s={}",zi.safeProp(a[i].name));n("}");}if(o.length){for(n("if(o.defaults){"),i=0;i<o.length;++i){var c=o[i],u=zi.safeProp(c.name);if(c.resolvedType instanceof Wf)n("d%s=o.enums===String?%j:%j",u,c.resolvedType.valuesById[c.typeDefault],c.typeDefault);else if(c.long)n("if(util.Long){")("var n=new util.Long(%i,%i,%j)",c.typeDefault.low,c.typeDefault.high,c.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",u)("}else")("d%s=o.longs===String?%j:%i",u,c.typeDefault.toString(),c.typeDefault.toNumber());else if(c.bytes){var l="["+Array.prototype.slice.call(c.typeDefault).join(",")+"]";n("if(o.bytes===String)d%s=%j",u,String.fromCharCode.apply(String,c.typeDefault))("else{")("d%s=%s",u,l)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",u,u)("}");}else n("d%s=%j",u,c.typeDefault);}n("}");}var d=false;for(i=0;i<r.length;++i){var c=r[i],p=e._fieldsArray.indexOf(c),u=zi.safeProp(c.name);c.map?(d||(d=true,n("var ks2")),n("if(m%s&&(ks2=Object.keys(m%s)).length){",u,u)("d%s={}",u)("for(var j=0;j<ks2.length;++j){"),oM(n,c,p,u+"[ks2[j]]")("}")):c.repeated?(n("if(m%s&&m%s.length){",u,u)("d%s=[]",u)("for(var j=0;j<m%s.length;++j){",u),oM(n,c,p,u+"[j]")("}")):(n("if(m%s!=null&&m.hasOwnProperty(%j)){",u,c.name),oM(n,c,p,u),c.partOf&&n("if(o.oneofs)")("d%s=%j",zi.safeProp(c.partOf.name),c.name)),n("}");}return n("return d")};});var aM=f(l8=>{var Ewe=l8,Twe=og();Ewe[".google.protobuf.Any"]={fromObject:function(t){if(t&&t["@type"]){var e=t["@type"].substring(t["@type"].lastIndexOf("/")+1),r=this.lookup(e);if(r){var n=t["@type"].charAt(0)==="."?t["@type"].slice(1):t["@type"];return n.indexOf("/")===-1&&(n="/"+n),this.create({type_url:n,value:r.encode(r.fromObject(t)).finish()})}}return this.fromObject(t)},toObject:function(t,e){var r="type.googleapis.com/",n="",s="";if(e&&e.json&&t.type_url&&t.value){s=t.type_url.substring(t.type_url.lastIndexOf("/")+1),n=t.type_url.substring(0,t.type_url.lastIndexOf("/")+1);var a=this.lookup(s);a&&(t=a.decode(t.value));}if(!(t instanceof this.ctor)&&t instanceof Twe){var o=t.$type.toObject(t,e),i=t.$type.fullName[0]==="."?t.$type.fullName.slice(1):t.$type.fullName;return n===""&&(n=r),s=n+i,o["@type"]=s,o}return this.toObject(t,e)}};});var cg=f((ROt,p8)=>{p8.exports=ot;var Hn=Ju();((ot.prototype=Object.create(Hn.prototype)).constructor=ot).className="Type";var Swe=gi(),lM=Ga(),sg=Os(),gwe=rg(),ywe=ig(),cM=og(),uM=hS(),Awe=pS(),Cr=ir(),Rwe=dM(),vwe=eM(),Owe=nM(),d8=sM(),Nwe=aM();function ot(t,e){Hn.call(this,t,e),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null;}Object.defineProperties(ot.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var t=Object.keys(this.fields),e=0;e<t.length;++e){var r=this.fields[t[e]],n=r.id;if(this._fieldsById[n])throw Error("duplicate id "+n+" in "+this);this._fieldsById[n]=r;}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=Cr.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=Cr.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=ot.generateConstructor(this)())},set:function(t){var e=t.prototype;e instanceof cM||((t.prototype=new cM).constructor=t,Cr.merge(t.prototype,e)),t.$type=t.prototype.$type=this,Cr.merge(t,cM,true),this._ctor=t;for(var r=0;r<this.fieldsArray.length;++r)this._fieldsArray[r].resolve();var n={};for(r=0;r<this.oneofsArray.length;++r)n[this._oneofsArray[r].resolve().name]={get:Cr.oneOfGetter(this._oneofsArray[r].oneof),set:Cr.oneOfSetter(this._oneofsArray[r].oneof)};r&&Object.defineProperties(t.prototype,n);}}});ot.generateConstructor=function(e){for(var r=Cr.codegen(["p"],e.name),n=0,s;n<e.fieldsArray.length;++n)(s=e._fieldsArray[n]).map?r("this%s={}",Cr.safeProp(s.name)):s.repeated&&r("this%s=[]",Cr.safeProp(s.name));return r("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")};function ag(t){return t._fieldsById=t._fieldsArray=t._oneofsArray=null,delete t.encode,delete t.decode,delete t.verify,t}ot.fromJSON=function(e,r){var n=new ot(e,r.options);n.extensions=r.extensions,n.reserved=r.reserved;for(var s=Object.keys(r.fields),a=0;a<s.length;++a)n.add((typeof r.fields[s[a]].keyType<"u"?gwe.fromJSON:sg.fromJSON)(s[a],r.fields[s[a]]));if(r.oneofs)for(s=Object.keys(r.oneofs),a=0;a<s.length;++a)n.add(lM.fromJSON(s[a],r.oneofs[s[a]]));if(r.nested)for(s=Object.keys(r.nested),a=0;a<s.length;++a){var o=r.nested[s[a]];n.add((o.id!==void 0?sg.fromJSON:o.fields!==void 0?ot.fromJSON:o.values!==void 0?Swe.fromJSON:o.methods!==void 0?ywe.fromJSON:Hn.fromJSON)(s[a],o));}return r.extensions&&r.extensions.length&&(n.extensions=r.extensions),r.reserved&&r.reserved.length&&(n.reserved=r.reserved),r.group&&(n.group=true),r.comment&&(n.comment=r.comment),r.edition&&(n._edition=r.edition),n._defaultEdition="proto3",n};ot.prototype.toJSON=function(e){var r=Hn.prototype.toJSON.call(this,e),n=e?!!e.keepComments:false;return Cr.toObject(["edition",this._editionToJSON(),"options",r&&r.options||void 0,"oneofs",Hn.arrayToJSON(this.oneofsArray,e),"fields",Hn.arrayToJSON(this.fieldsArray.filter(function(s){return !s.declaringField}),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",r&&r.nested||void 0,"comment",n?this.comment:void 0])};ot.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;Hn.prototype.resolveAll.call(this);var e=this.oneofsArray;for(n=0;n<e.length;)e[n++].resolve();for(var r=this.fieldsArray,n=0;n<r.length;)r[n++].resolve();return this};ot.prototype._resolveFeaturesRecursive=function(e){return this._needsRecursiveFeatureResolution?(e=this._edition||e,Hn.prototype._resolveFeaturesRecursive.call(this,e),this.oneofsArray.forEach(r=>{r._resolveFeatures(e);}),this.fieldsArray.forEach(r=>{r._resolveFeatures(e);}),this):this};ot.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null};ot.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof sg&&e.extend===void 0){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),ag(this)}return e instanceof lM?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),ag(this)):Hn.prototype.add.call(this,e)};ot.prototype.remove=function(e){if(e instanceof sg&&e.extend===void 0){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),ag(this)}if(e instanceof lM){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),ag(this)}return Hn.prototype.remove.call(this,e)};ot.prototype.isReservedId=function(e){return Hn.isReservedId(this.reserved,e)};ot.prototype.isReservedName=function(e){return Hn.isReservedName(this.reserved,e)};ot.prototype.create=function(e){return new this.ctor(e)};ot.prototype.setup=function(){for(var e=this.fullName,r=[],n=0;n<this.fieldsArray.length;++n)r.push(this._fieldsArray[n].resolve().resolvedType);this.encode=Rwe(this)({Writer:Awe,types:r,util:Cr}),this.decode=vwe(this)({Reader:uM,types:r,util:Cr}),this.verify=Owe(this)({types:r,util:Cr}),this.fromObject=d8.fromObject(this)({types:r,util:Cr}),this.toObject=d8.toObject(this)({types:r,util:Cr});var s=Nwe[e];if(s){var a=Object.create(this);a.fromObject=this.fromObject,this.fromObject=s.fromObject.bind(a),a.toObject=this.toObject,this.toObject=s.toObject.bind(a);}return this};ot.prototype.encode=function(e,r){return this.setup().encode(e,r)};ot.prototype.encodeDelimited=function(e,r){return this.encode(e,r&&r.len?r.fork():r).ldelim()};ot.prototype.decode=function(e,r){return this.setup().decode(e,r)};ot.prototype.decodeDelimited=function(e){return e instanceof uM||(e=uM.create(e)),this.decode(e,e.uint32())};ot.prototype.verify=function(e){return this.setup().verify(e)};ot.prototype.fromObject=function(e){return this.setup().fromObject(e)};ot.prototype.toObject=function(e,r){return this.setup().toObject(e,r)};ot.d=function(e){return function(n){Cr.decorateType(n,e);}};});var pg=f((vOt,_8)=>{_8.exports=Sn;var dg=Ju();((Sn.prototype=Object.create(dg.prototype)).constructor=Sn).className="Root";var ug=Os(),pM=gi(),Cwe=Ga(),Cs=ir(),fM,hM,Xf;function Sn(t){dg.call(this,"",t),this.deferred=[],this.files=[],this._edition="proto2",this._fullyQualifiedObjects={};}Sn.fromJSON=function(e,r){return r||(r=new Sn),e.options&&r.setOptions(e.options),r.addJSON(e.nested).resolveAll()};Sn.prototype.resolvePath=Cs.path.resolve;Sn.prototype.fetch=Cs.fetch;function h8(){}Sn.prototype.load=function t(e,r,n){typeof r=="function"&&(n=r,r=void 0);var s=this;if(!n)return Cs.asPromise(t,s,e,r);var a=n===h8;function o(h,T){if(n){if(a)throw h;T&&T.resolveAll();var g=n;n=null,g(h,T);}}function i(h){var T=h.lastIndexOf("google/protobuf/");if(T>-1){var g=h.substring(T);if(g in Xf)return g}return null}function c(h,T){try{if(Cs.isString(T)&&T.charAt(0)==="{"&&(T=JSON.parse(T)),!Cs.isString(T))s.setOptions(T.options).addJSON(T.nested);else {hM.filename=h;var g=hM(T,s,r),y,R=0;if(g.imports)for(;R<g.imports.length;++R)(y=i(g.imports[R])||s.resolvePath(h,g.imports[R]))&&u(y);if(g.weakImports)for(R=0;R<g.weakImports.length;++R)(y=i(g.weakImports[R])||s.resolvePath(h,g.weakImports[R]))&&u(y,!0);}}catch(b){o(b);}!a&&!l&&o(null,s);}function u(h,T){if(h=i(h)||h,!(s.files.indexOf(h)>-1)){if(s.files.push(h),h in Xf){a?c(h,Xf[h]):(++l,setTimeout(function(){--l,c(h,Xf[h]);}));return}if(a){var g;try{g=Cs.fs.readFileSync(h).toString("utf8");}catch(y){T||o(y);return}c(h,g);}else ++l,s.fetch(h,function(y,R){if(--l,!!n){if(y){T?l||o(null,s):o(y);return}c(h,R);}});}}var l=0;Cs.isString(e)&&(e=[e]);for(var d=0,p;d<e.length;++d)(p=s.resolvePath("",e[d]))&&u(p);return a?(s.resolveAll(),s):(l||o(null,s),s)};Sn.prototype.loadSync=function(e,r){if(!Cs.isNode)throw Error("not supported");return this.load(e,r,h8)};Sn.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(e){return "'extend "+e.extend+"' in "+e.parent.fullName}).join(", "));return dg.prototype.resolveAll.call(this)};var lg=/^[A-Z]/;function f8(t,e){var r=e.parent.lookup(e.extend);if(r){var n=new ug(e.fullName,e.id,e.type,e.rule,void 0,e.options);return r.get(n.name)||(n.declaringField=e,e.extensionField=n,r.add(n)),true}return  false}Sn.prototype._handleAdd=function(e){if(e instanceof ug)e.extend!==void 0&&!e.extensionField&&(f8(this,e)||this.deferred.push(e));else if(e instanceof pM)lg.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof Cwe)){if(e instanceof fM)for(var r=0;r<this.deferred.length;)f8(this,this.deferred[r])?this.deferred.splice(r,1):++r;for(var n=0;n<e.nestedArray.length;++n)this._handleAdd(e._nestedArray[n]);lg.test(e.name)&&(e.parent[e.name]=e);}(e instanceof fM||e instanceof pM||e instanceof ug)&&(this._fullyQualifiedObjects[e.fullName]=e);};Sn.prototype._handleRemove=function(e){if(e instanceof ug){if(e.extend!==void 0)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else {var r=this.deferred.indexOf(e);r>-1&&this.deferred.splice(r,1);}}else if(e instanceof pM)lg.test(e.name)&&delete e.parent[e.name];else if(e instanceof dg){for(var n=0;n<e.nestedArray.length;++n)this._handleRemove(e._nestedArray[n]);lg.test(e.name)&&delete e.parent[e.name];}delete this._fullyQualifiedObjects[e.fullName];};Sn._configure=function(t,e,r){fM=t,hM=e,Xf=r;};});var ir=f((OOt,E8)=>{var Lt=E8.exports=Vi(),m8=kP(),_M,mM;Lt.codegen=z6();Lt.fetch=$6();Lt.path=X6();Lt.fs=Lt.inquire("fs");Lt.toArray=function(e){if(e){for(var r=Object.keys(e),n=new Array(r.length),s=0;s<r.length;)n[s]=e[r[s++]];return n}return []};Lt.toObject=function(e){for(var r={},n=0;n<e.length;){var s=e[n++],a=e[n++];a!==void 0&&(r[s]=a);}return r};var Pwe=/\\/g,bwe=/"/g;Lt.isReserved=function(e){return /^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)};Lt.safeProp=function(e){return !/^[$\w_]+$/.test(e)||Lt.isReserved(e)?'["'+e.replace(Pwe,"\\\\").replace(bwe,'\\"')+'"]':"."+e};Lt.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var Mwe=/_([a-z])/g;Lt.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(Mwe,function(r,n){return n.toUpperCase()})};Lt.compareFieldsById=function(e,r){return e.id-r.id};Lt.decorateType=function(e,r){if(e.$type)return r&&e.$type.name!==r&&(Lt.decorateRoot.remove(e.$type),e.$type.name=r,Lt.decorateRoot.add(e.$type)),e.$type;_M||(_M=cg());var n=new _M(r||e.name);return Lt.decorateRoot.add(n),n.ctor=e,Object.defineProperty(e,"$type",{value:n,enumerable:false}),Object.defineProperty(e.prototype,"$type",{value:n,enumerable:false}),n};var Iwe=0;Lt.decorateEnum=function(e){if(e.$type)return e.$type;mM||(mM=gi());var r=new mM("Enum"+Iwe++,e);return Lt.decorateRoot.add(r),Object.defineProperty(e,"$type",{value:r,enumerable:false}),r};Lt.setProperty=function(e,r,n,s){function a(o,i,c){var u=i.shift();if(u==="__proto__"||u==="prototype")return o;if(i.length>0)o[u]=a(o[u]||{},i,c);else {var l=o[u];if(l&&s)return o;l&&(c=[].concat(l).concat(c)),o[u]=c;}return o}if(typeof e!="object")throw TypeError("dst must be an object");if(!r)throw TypeError("path must be specified");return r=r.split("."),a(e,r,n)};Object.defineProperty(Lt,"decorateRoot",{get:function(){return m8.decorated||(m8.decorated=new(pg()))}});});var ja=f(T8=>{var Qf=T8,xwe=ir(),Lwe=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function Jf(t,e){var r=0,n={};for(e|=0;r<t.length;)n[Lwe[r+e]]=t[r++];return n}Qf.basic=Jf([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]);Qf.defaults=Jf([0,0,0,0,0,0,0,0,0,0,0,0,false,"",xwe.emptyArray,null]);Qf.long=Jf([0,0,0,1,1],7);Qf.mapKey=Jf([0,0,0,5,5,0,0,0,1,1,0,2],2);Qf.packed=Jf([1,5,0,0,0,5,5,0,0,0,1,1,0]);});var Os=f((COt,g8)=>{g8.exports=or;var eh=Ns();((or.prototype=Object.create(eh.prototype)).constructor=or).className="Field";var S8=gi(),EM=ja(),Ht=ir(),Zf,Dwe=/^required|optional|repeated$/;or.fromJSON=function(e,r){var n=new or(e,r.id,r.type,r.rule,r.extend,r.options,r.comment);return r.edition&&(n._edition=r.edition),n._defaultEdition="proto3",n};function or(t,e,r,n,s,a,o){if(Ht.isObject(n)?(o=s,a=n,n=s=void 0):Ht.isObject(s)&&(o=a,a=s,s=void 0),eh.call(this,t,a),!Ht.isInteger(e)||e<0)throw TypeError("id must be a non-negative integer");if(!Ht.isString(r))throw TypeError("type must be a string");if(n!==void 0&&!Dwe.test(n=n.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(s!==void 0&&!Ht.isString(s))throw TypeError("extend must be a string");n==="proto3_optional"&&(n="optional"),this.rule=n&&n!=="optional"?n:void 0,this.type=r,this.id=e,this.extend=s||void 0,this.repeated=n==="repeated",this.map=false,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=Ht.Long?EM.long[r]!==void 0:false,this.bytes=r==="bytes",this.resolvedType=null,this.extensionField=null,this.declaringField=null,this.comment=o;}Object.defineProperty(or.prototype,"required",{get:function(){return this._features.field_presence==="LEGACY_REQUIRED"}});Object.defineProperty(or.prototype,"optional",{get:function(){return !this.required}});Object.defineProperty(or.prototype,"delimited",{get:function(){return this.resolvedType instanceof Zf&&this._features.message_encoding==="DELIMITED"}});Object.defineProperty(or.prototype,"packed",{get:function(){return this._features.repeated_field_encoding==="PACKED"}});Object.defineProperty(or.prototype,"hasPresence",{get:function(){return this.repeated||this.map?false:this.partOf||this.declaringField||this.extensionField||this._features.field_presence!=="IMPLICIT"}});or.prototype.setOption=function(e,r,n){return eh.prototype.setOption.call(this,e,r,n)};or.prototype.toJSON=function(e){var r=e?!!e.keepComments:false;return Ht.toObject(["edition",this._editionToJSON(),"rule",this.rule!=="optional"&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",r?this.comment:void 0])};or.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=EM.defaults[this.type])===void 0?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof Zf?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&this.options.default!=null&&(this.typeDefault=this.options.default,this.resolvedType instanceof S8&&typeof this.typeDefault=="string"&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(this.options.packed!==void 0&&this.resolvedType&&!(this.resolvedType instanceof S8)&&delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=Ht.Long.fromNumber(this.typeDefault,this.type.charAt(0)==="u"),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&typeof this.typeDefault=="string"){var e;Ht.base64.test(this.typeDefault)?Ht.base64.decode(this.typeDefault,e=Ht.newBuffer(Ht.base64.length(this.typeDefault)),0):Ht.utf8.write(this.typeDefault,e=Ht.newBuffer(Ht.utf8.length(this.typeDefault)),0),this.typeDefault=e;}return this.map?this.defaultValue=Ht.emptyObject:this.repeated?this.defaultValue=Ht.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof Zf&&(this.parent.ctor.prototype[this.name]=this.defaultValue),eh.prototype.resolve.call(this)};or.prototype._inferLegacyProtoFeatures=function(e){if(e!=="proto2"&&e!=="proto3")return {};var r={};if(this.rule==="required"&&(r.field_presence="LEGACY_REQUIRED"),this.parent&&EM.defaults[this.type]===void 0){var n=this.parent.get(this.type.split(".").pop());n&&n instanceof Zf&&n.group&&(r.message_encoding="DELIMITED");}return this.getOption("packed")===true?r.repeated_field_encoding="PACKED":this.getOption("packed")===false&&(r.repeated_field_encoding="EXPANDED"),r};or.prototype._resolveFeatures=function(e){return eh.prototype._resolveFeatures.call(this,this._edition||e)};or.d=function(e,r,n,s){return typeof r=="function"?r=Ht.decorateType(r).name:r&&typeof r=="object"&&(r=Ht.decorateEnum(r).name),function(o,i){Ht.decorateType(o.constructor).add(new or(i,e,r,n,{default:s}));}};or._configure=function(e){Zf=e;};});var Ga=f((POt,R8)=>{R8.exports=gn;var hg=Ns();((gn.prototype=Object.create(hg.prototype)).constructor=gn).className="OneOf";var y8=Os(),fg=ir();function gn(t,e,r,n){if(Array.isArray(e)||(r=e,e=void 0),hg.call(this,t,r),!(e===void 0||Array.isArray(e)))throw TypeError("fieldNames must be an Array");this.oneof=e||[],this.fieldsArray=[],this.comment=n;}gn.fromJSON=function(e,r){return new gn(e,r.oneof,r.options,r.comment)};gn.prototype.toJSON=function(e){var r=e?!!e.keepComments:false;return fg.toObject(["options",this.options,"oneof",this.oneof,"comment",r?this.comment:void 0])};function A8(t){if(t.parent)for(var e=0;e<t.fieldsArray.length;++e)t.fieldsArray[e].parent||t.parent.add(t.fieldsArray[e]);}gn.prototype.add=function(e){if(!(e instanceof y8))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,A8(this),this};gn.prototype.remove=function(e){if(!(e instanceof y8))throw TypeError("field must be a Field");var r=this.fieldsArray.indexOf(e);if(r<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(r,1),r=this.oneof.indexOf(e.name),r>-1&&this.oneof.splice(r,1),e.partOf=null,this};gn.prototype.onAdd=function(e){hg.prototype.onAdd.call(this,e);for(var r=this,n=0;n<this.oneof.length;++n){var s=e.get(this.oneof[n]);s&&!s.partOf&&(s.partOf=r,r.fieldsArray.push(s));}A8(this);};gn.prototype.onRemove=function(e){for(var r=0,n;r<this.fieldsArray.length;++r)(n=this.fieldsArray[r]).parent&&n.parent.remove(n);hg.prototype.onRemove.call(this,e);};Object.defineProperty(gn.prototype,"isProto3Optional",{get:function(){if(this.fieldsArray==null||this.fieldsArray.length!==1)return  false;var t=this.fieldsArray[0];return t.options!=null&&t.options.proto3_optional===true}});gn.d=function(){for(var e=new Array(arguments.length),r=0;r<arguments.length;)e[r]=arguments[r++];return function(s,a){fg.decorateType(s.constructor).add(new gn(a,e)),Object.defineProperty(s,a,{get:fg.oneOfGetter(e),set:fg.oneOfSetter(e)});}};});var Ns=f((bOt,v8)=>{v8.exports=_r;_r.className="ReflectionObject";var wwe=Ga(),th=ir(),_g,Uwe={enum_type:"OPEN",field_presence:"EXPLICIT",json_format:"ALLOW",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"PACKED",utf8_validation:"VERIFY"},kwe={enum_type:"CLOSED",field_presence:"EXPLICIT",json_format:"LEGACY_BEST_EFFORT",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"EXPANDED",utf8_validation:"NONE"},Vwe={enum_type:"OPEN",field_presence:"IMPLICIT",json_format:"ALLOW",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"PACKED",utf8_validation:"VERIFY"};function _r(t,e){if(!th.isString(t))throw TypeError("name must be a string");if(e&&!th.isObject(e))throw TypeError("options must be an object");this.options=e,this.parsedOptions=null,this.name=t,this._edition=null,this._defaultEdition="proto2",this._features={},this._featuresResolved=false,this.parent=null,this.resolved=false,this.comment=null,this.filename=null;}Object.defineProperties(_r.prototype,{root:{get:function(){for(var t=this;t.parent!==null;)t=t.parent;return t}},fullName:{get:function(){for(var t=[this.name],e=this.parent;e;)t.unshift(e.name),e=e.parent;return t.join(".")}}});_r.prototype.toJSON=function(){throw Error()};_r.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=false;var r=e.root;r instanceof _g&&r._handleAdd(this);};_r.prototype.onRemove=function(e){var r=e.root;r instanceof _g&&r._handleRemove(this),this.parent=null,this.resolved=false;};_r.prototype.resolve=function(){return this.resolved?this:(this.root instanceof _g&&(this.resolved=true),this)};_r.prototype._resolveFeaturesRecursive=function(e){return this._resolveFeatures(this._edition||e)};_r.prototype._resolveFeatures=function(e){if(!this._featuresResolved){var r={};if(!e)throw new Error("Unknown edition for "+this.fullName);var n=Object.assign(this.options?Object.assign({},this.options.features):{},this._inferLegacyProtoFeatures(e));if(this._edition){if(e==="proto2")r=Object.assign({},kwe);else if(e==="proto3")r=Object.assign({},Vwe);else if(e==="2023")r=Object.assign({},Uwe);else throw new Error("Unknown edition: "+e);this._features=Object.assign(r,n||{}),this._featuresResolved=true;return}if(this.partOf instanceof wwe){var s=Object.assign({},this.partOf._features);this._features=Object.assign(s,n||{});}else if(!this.declaringField)if(this.parent){var a=Object.assign({},this.parent._features);this._features=Object.assign(a,n||{});}else throw new Error("Unable to find a parent for "+this.fullName);this.extensionField&&(this.extensionField._features=this._features),this._featuresResolved=true;}};_r.prototype._inferLegacyProtoFeatures=function(){return {}};_r.prototype.getOption=function(e){if(this.options)return this.options[e]};_r.prototype.setOption=function(e,r,n){return this.options||(this.options={}),/^features\./.test(e)?th.setProperty(this.options,e,r,n):(!n||this.options[e]===void 0)&&(this.getOption(e)!==r&&(this.resolved=false),this.options[e]=r),this};_r.prototype.setParsedOption=function(e,r,n){this.parsedOptions||(this.parsedOptions=[]);var s=this.parsedOptions;if(n){var a=s.find(function(c){return Object.prototype.hasOwnProperty.call(c,e)});if(a){var o=a[e];th.setProperty(o,n,r);}else a={},a[e]=th.setProperty({},n,r),s.push(a);}else {var i={};i[e]=r,s.push(i);}return this};_r.prototype.setOptions=function(e,r){if(e)for(var n=Object.keys(e),s=0;s<n.length;++s)this.setOption(n[s],e[n[s]],r);return this};_r.prototype.toString=function(){var e=this.constructor.className,r=this.fullName;return r.length?e+" "+r:e};_r.prototype._editionToJSON=function(){if(!(!this._edition||this._edition==="proto3"))return this._edition};_r._configure=function(t){_g=t;};});var gi=f((MOt,N8)=>{N8.exports=yi;var TM=Ns();((yi.prototype=Object.create(TM.prototype)).constructor=yi).className="Enum";var O8=Ju(),mg=ir();function yi(t,e,r,n,s,a){if(TM.call(this,t,r),e&&typeof e!="object")throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=n,this.comments=s||{},this.valuesOptions=a,this._valuesFeatures={},this.reserved=void 0,e)for(var o=Object.keys(e),i=0;i<o.length;++i)typeof e[o[i]]=="number"&&(this.valuesById[this.values[o[i]]=e[o[i]]]=o[i]);}yi.prototype._resolveFeatures=function(e){return e=this._edition||e,TM.prototype._resolveFeatures.call(this,e),Object.keys(this.values).forEach(r=>{var n=Object.assign({},this._features);this._valuesFeatures[r]=Object.assign(n,this.valuesOptions&&this.valuesOptions[r]&&this.valuesOptions[r].features);}),this};yi.fromJSON=function(e,r){var n=new yi(e,r.values,r.options,r.comment,r.comments);return n.reserved=r.reserved,r.edition&&(n._edition=r.edition),n._defaultEdition="proto3",n};yi.prototype.toJSON=function(e){var r=e?!!e.keepComments:false;return mg.toObject(["edition",this._editionToJSON(),"options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",r?this.comment:void 0,"comments",r?this.comments:void 0])};yi.prototype.add=function(e,r,n,s){if(!mg.isString(e))throw TypeError("name must be a string");if(!mg.isInteger(r))throw TypeError("id must be an integer");if(this.values[e]!==void 0)throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(r))throw Error("id "+r+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(this.valuesById[r]!==void 0){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+r+" in "+this);this.values[e]=r;}else this.valuesById[this.values[e]=r]=e;return s&&(this.valuesOptions===void 0&&(this.valuesOptions={}),this.valuesOptions[e]=s||null),this.comments[e]=n||null,this};yi.prototype.remove=function(e){if(!mg.isString(e))throw TypeError("name must be a string");var r=this.values[e];if(r==null)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[r],delete this.values[e],delete this.comments[e],this.valuesOptions&&delete this.valuesOptions[e],this};yi.prototype.isReservedId=function(e){return O8.isReservedId(this.reserved,e)};yi.prototype.isReservedName=function(e){return O8.isReservedName(this.reserved,e)};});var dM=f((IOt,P8)=>{P8.exports=Fwe;var Bwe=gi(),SM=ja(),gM=ir();function C8(t,e,r,n){return e.delimited?t("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",r,n,(e.id<<3|3)>>>0,(e.id<<3|4)>>>0):t("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",r,n,(e.id<<3|2)>>>0)}function Fwe(t){for(var e=gM.codegen(["m","w"],t.name+"$encode")("if(!w)")("w=Writer.create()"),r,n,s=t.fieldsArray.slice().sort(gM.compareFieldsById),r=0;r<s.length;++r){var a=s[r].resolve(),o=t._fieldsArray.indexOf(a),i=a.resolvedType instanceof Bwe?"int32":a.type,c=SM.basic[i];n="m"+gM.safeProp(a.name),a.map?(e("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",n,a.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",n)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(a.id<<3|2)>>>0,8|SM.mapKey[a.keyType],a.keyType),c===void 0?e("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",o,n):e(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|c,i,n),e("}")("}")):a.repeated?(e("if(%s!=null&&%s.length){",n,n),a.packed&&SM.packed[i]!==void 0?e("w.uint32(%i).fork()",(a.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",n)("w.%s(%s[i])",i,n)("w.ldelim()"):(e("for(var i=0;i<%s.length;++i)",n),c===void 0?C8(e,a,o,n+"[i]"):e("w.uint32(%i).%s(%s[i])",(a.id<<3|c)>>>0,i,n)),e("}")):(a.optional&&e("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",n,a.name),c===void 0?C8(e,a,o,n):e("w.uint32(%i).%s(%s)",(a.id<<3|c)>>>0,i,n));}return e("return w")}});var M8=f((xOt,b8)=>{var Ve=b8.exports=VP();Ve.build="light";function qwe(t,e,r){return typeof e=="function"?(r=e,e=new Ve.Root):e||(e=new Ve.Root),e.load(t,r)}Ve.load=qwe;function Hwe(t,e){return e||(e=new Ve.Root),e.loadSync(t)}Ve.loadSync=Hwe;Ve.encoder=dM();Ve.decoder=eM();Ve.verifier=nM();Ve.converter=sM();Ve.ReflectionObject=Ns();Ve.Namespace=Ju();Ve.Root=pg();Ve.Enum=gi();Ve.Type=cg();Ve.Field=Os();Ve.OneOf=Ga();Ve.MapField=rg();Ve.Service=ig();Ve.Method=ng();Ve.Message=og();Ve.wrappers=aM();Ve.types=ja();Ve.util=ir();Ve.ReflectionObject._configure(Ve.Root);Ve.Namespace._configure(Ve.Type,Ve.Service,Ve.Enum);Ve.Root._configure(Ve.Type);Ve.Field._configure(Ve.Type);});var AM=f((LOt,L8)=>{L8.exports=x8;var yM=/[\s{}=;:[\],'"()<>]/g,Gwe=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,jwe=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,zwe=/^ *[*/]+ */,Ywe=/^\s*\*?\/*/,$we=/\n/g,Kwe=/\s/,Wwe=/\\(.?)/g,Xwe={0:"\0",r:"\r",n:`
`,t:"	"};function I8(t){return t.replace(Wwe,function(e,r){switch(r){case "\\":case "":return r;default:return Xwe[r]||""}})}x8.unescape=I8;function x8(t,e){t=t.toString();var r=0,n=t.length,s=1,a=0,o={},i=[],c=null;function u(v){return Error("illegal "+v+" (line "+s+")")}function l(){var v=c==="'"?jwe:Gwe;v.lastIndex=r-1;var V=v.exec(t);if(!V)throw u("string");return r=v.lastIndex,y(c),c=null,I8(V[1])}function d(v){return t.charAt(v)}function p(v,V,B){var F={type:t.charAt(v++),lineEmpty:false,leading:B},te;e?te=2:te=3;var K=v-te,Ee;do if(--K<0||(Ee=t.charAt(K))===`
`){F.lineEmpty=true;break}while(Ee===" "||Ee==="	");for(var C=t.substring(v,V).split($we),ie=0;ie<C.length;++ie)C[ie]=C[ie].replace(e?Ywe:zwe,"").trim();F.text=C.join(`
`).trim(),o[s]=F,a=s;}function h(v){var V=T(v),B=t.substring(v,V),F=/^\s*\/\//.test(B);return F}function T(v){for(var V=v;V<n&&d(V)!==`
`;)V++;return V}function g(){if(i.length>0)return i.shift();if(c)return l();var v,V,B,F,te,K=r===0;do{if(r===n)return null;for(v=false;Kwe.test(B=d(r));)if(B===`
`&&(K=true,++s),++r===n)return null;if(d(r)==="/"){if(++r===n)throw u("comment");if(d(r)==="/")if(e){if(F=r,te=false,h(r-1)){te=true;do if(r=T(r),r===n||(r++,!K))break;while(h(r))}else r=Math.min(n,T(r)+1);te&&(p(F,r,K),K=true),s++,v=true;}else {for(te=d(F=r+1)==="/";d(++r)!==`
`;)if(r===n)return null;++r,te&&(p(F,r-1,K),K=true),++s,v=true;}else if((B=d(r))==="*"){F=r+1,te=e||d(F)==="*";do{if(B===`
`&&++s,++r===n)throw u("comment");V=B,B=d(r);}while(V!=="*"||B!=="/");++r,te&&(p(F,r-2,K),K=true),v=true;}else return "/"}}while(v);var Ee=r;yM.lastIndex=0;var C=yM.test(d(Ee++));if(!C)for(;Ee<n&&!yM.test(d(Ee));)++Ee;var ie=t.substring(r,r=Ee);return (ie==='"'||ie==="'")&&(c=ie),ie}function y(v){i.push(v);}function R(){if(!i.length){var v=g();if(v===null)return null;y(v);}return i[0]}function b(v,V){var B=R(),F=B===v;if(F)return g(),true;if(!V)throw u("token '"+B+"', '"+v+"' expected");return  false}function w(v){var V=null,B;return v===void 0?(B=o[s-1],delete o[s-1],B&&(e||B.type==="*"||B.lineEmpty)&&(V=B.leading?B.text:null)):(a<v&&R(),B=o[v],delete o[v],B&&!B.lineEmpty&&(e||B.type==="/")&&(V=B.leading?null:B.text)),V}return Object.defineProperty({next:g,peek:R,push:y,skip:b,cmnt:w},"line",{get:function(){return s}})}});var B8=f((DOt,V8)=>{V8.exports=Lo;Lo.filename=null;Lo.defaults={keepCase:false};var Qwe=AM(),D8=pg(),w8=cg(),U8=Os(),Jwe=rg(),k8=Ga(),Zwe=gi(),eUe=ig(),tUe=ng(),rUe=Ns(),nUe=ja(),RM=ir(),iUe=/^[1-9][0-9]*$/,oUe=/^-?[1-9][0-9]*$/,sUe=/^0[x][0-9a-fA-F]+$/,aUe=/^-?0[x][0-9a-fA-F]+$/,cUe=/^0[0-7]+$/,uUe=/^-?0[0-7]+$/,lUe=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,Yi=/^[a-zA-Z_][a-zA-Z_0-9]*$/,$i=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/;function Lo(t,e,r){e instanceof D8||(r=e,e=new D8),r||(r=Lo.defaults);var n=r.preferTrailingComment||false,s=Qwe(t,r.alternateCommentMode||false),a=s.next,o=s.push,i=s.peek,c=s.skip,u=s.cmnt,l=true,d,p,h,T="proto2",g=e,y=[],R={},b=r.keepCase?function(D){return D}:RM.camelCase;function w(){y.forEach(D=>{D._edition=T,Object.keys(R).forEach(L=>{D.getOption(L)===void 0&&D.setOption(L,R[L],true);});});}function v(D,L,U){var Y=Lo.filename;return U||(Lo.filename=null),Error("illegal "+(L||"token")+" '"+D+"' ("+(Y?Y+", ":"")+"line "+s.line+")")}function V(){var D=[],L;do{if((L=a())!=='"'&&L!=="'")throw v(L);D.push(a()),c(L),L=i();}while(L==='"'||L==="'");return D.join("")}function B(D){var L=a();switch(L){case "'":case '"':return o(L),V();case "true":case "TRUE":return  true;case "false":case "FALSE":return  false}try{return te(L,!0)}catch{if($i.test(L))return L;throw v(L,"value")}}function F(D,L){var U,Y;do if(L&&((U=i())==='"'||U==="'")){var z=V();if(D.push(z),T>=2023)throw v(z,"id")}else try{D.push([Y=K(a()),c("to",!0)?K(a()):Y]);}catch(Et){if(L&&$i.test(U)&&T>=2023)D.push(U);else throw Et}while(c(",",true));var Te={options:void 0};Te.setOption=function(Et,Tr){this.options===void 0&&(this.options={}),this.options[Et]=Tr;},x(Te,function(Tr){if(Tr==="option")ue(Te,Tr),c(";");else throw v(Tr)},function(){Yt(Te);});}function te(D,L){var U=1;switch(D.charAt(0)==="-"&&(U=-1,D=D.substring(1)),D){case "inf":case "INF":case "Inf":return U*(1/0);case "nan":case "NAN":case "Nan":case "NaN":return NaN;case "0":return 0}if(iUe.test(D))return U*parseInt(D,10);if(sUe.test(D))return U*parseInt(D,16);if(cUe.test(D))return U*parseInt(D,8);if(lUe.test(D))return U*parseFloat(D);throw v(D,"number",L)}function K(D,L){switch(D){case "max":case "MAX":case "Max":return 536870911;case "0":return 0}if(!L&&D.charAt(0)==="-")throw v(D,"id");if(oUe.test(D))return parseInt(D,10);if(aUe.test(D))return parseInt(D,16);if(uUe.test(D))return parseInt(D,8);throw v(D,"id")}function Ee(){if(d!==void 0)throw v("package");if(d=a(),!$i.test(d))throw v(d,"name");g=g.define(d),c(";");}function C(){var D=i(),L;switch(D){case "weak":L=h||(h=[]),a();break;case "public":a();default:L=p||(p=[]);break}D=V(),c(";"),L.push(D);}function ie(){if(c("="),T=V(),T<2023)throw v(T,"syntax");c(";");}function I(){if(c("="),T=V(),!["2023"].includes(T))throw v(T,"edition");c(";");}function S(D,L){switch(L){case "option":return ue(D,L),c(";"),true;case "message":return ce(D,L),true;case "enum":return gt(D,L),true;case "service":return jc(D,L),true;case "extend":return da(D,L),true}return  false}function x(D,L,U){var Y=s.line;if(D&&(typeof D.comment!="string"&&(D.comment=u()),D.filename=Lo.filename),c("{",true)){for(var z;(z=a())!=="}";)L(z);c(";",true);}else U&&U(),c(";"),D&&(typeof D.comment!="string"||n)&&(D.comment=u(Y)||D.comment);}function ce(D,L){if(!Yi.test(L=a()))throw v(L,"type name");var U=new w8(L);x(U,function(z){if(!S(U,z))switch(z){case "map":be(U);break;case "required":if(T!=="proto2")throw v(z);case "repeated":W(U,z);break;case "optional":if(T==="proto3")W(U,"proto3_optional");else {if(T!=="proto2")throw v(z);W(U,"optional");}break;case "oneof":st(U,z);break;case "extensions":F(U.extensions||(U.extensions=[]));break;case "reserved":F(U.reserved||(U.reserved=[]),true);break;default:if(T==="proto2"||!$i.test(z))throw v(z);o(z),W(U,"optional");break}}),D.add(U),D===g&&y.push(U);}function W(D,L,U){var Y=a();if(Y==="group"){oe(D,L);return}for(;Y.endsWith(".")||i().startsWith(".");)Y+=a();if(!$i.test(Y))throw v(Y,"type");var z=a();if(!Yi.test(z))throw v(z,"name");z=b(z),c("=");var Te=new U8(z,K(a()),Y,L,U);if(x(Te,function(Lr){if(Lr==="option")ue(Te,Lr),c(";");else throw v(Lr)},function(){Yt(Te);}),L==="proto3_optional"){var Et=new k8("_"+z);Te.setOption("proto3_optional",true),Et.add(Te),D.add(Et);}else D.add(Te);D===g&&y.push(Te);}function oe(D,L){if(T>=2023)throw v("group");var U=a();if(!Yi.test(U))throw v(U,"name");var Y=RM.lcFirst(U);U===Y&&(U=RM.ucFirst(U)),c("=");var z=K(a()),Te=new w8(U);Te.group=true;var Et=new U8(Y,z,U,L);Et.filename=Lo.filename,x(Te,function(Lr){switch(Lr){case "option":ue(Te,Lr),c(";");break;case "required":case "repeated":W(Te,Lr);break;case "optional":T==="proto3"?W(Te,"proto3_optional"):W(Te,"optional");break;case "message":ce(Te,Lr);break;case "enum":gt(Te,Lr);break;case "reserved":F(Te.reserved||(Te.reserved=[]),true);break;default:throw v(Lr)}}),D.add(Te).add(Et);}function be(D){c("<");var L=a();if(nUe.mapKey[L]===void 0)throw v(L,"type");c(",");var U=a();if(!$i.test(U))throw v(U,"type");c(">");var Y=a();if(!Yi.test(Y))throw v(Y,"name");c("=");var z=new Jwe(b(Y),K(a()),L,U);x(z,function(Et){if(Et==="option")ue(z,Et),c(";");else throw v(Et)},function(){Yt(z);}),D.add(z);}function st(D,L){if(!Yi.test(L=a()))throw v(L,"name");var U=new k8(b(L));x(U,function(z){z==="option"?(ue(U,z),c(";")):(o(z),W(U,"optional"));}),D.add(U);}function gt(D,L){if(!Yi.test(L=a()))throw v(L,"name");var U=new Zwe(L);x(U,function(z){switch(z){case "option":ue(U,z),c(";");break;case "reserved":F(U.reserved||(U.reserved=[]),true),U.reserved===void 0&&(U.reserved=[]);break;default:Xe(U,z);}}),D.add(U),D===g&&y.push(U);}function Xe(D,L){if(!Yi.test(L))throw v(L,"name");c("=");var U=K(a(),true),Y={options:void 0};Y.getOption=function(z){return this.options[z]},Y.setOption=function(z,Te){rUe.prototype.setOption.call(Y,z,Te);},Y.setParsedOption=function(){},x(Y,function(Te){if(Te==="option")ue(Y,Te),c(";");else throw v(Te)},function(){Yt(Y);}),D.add(L,U,Y.comment,Y.parsedOptions||Y.options);}function ue(D,L){var U,Y,z=true;for(L==="option"&&(L=a());L!=="=";){if(L==="("){var Te=a();c(")"),L="("+Te+")";}if(z){if(z=false,L.includes(".")&&!L.includes("(")){var Et=L.split(".");U=Et[0]+".",L=Et[1];continue}U=L;}else Y=Y?Y+=L:L;L=a();}var Tr=Y?U.concat(Y):U,Lr=Bt(D,Tr);Y=Y&&Y[0]==="."?Y.slice(1):Y,U=U&&U[U.length-1]==="."?U.slice(0,-1):U,Ct(D,U,Lr,Y);}function Bt(D,L){if(c("{",true)){for(var U={};!c("}",true);){if(!Yi.test(Ft=a()))throw v(Ft,"name");if(Ft===null)throw v(Ft,"end of input");var Y,z=Ft;if(c(":",true),i()==="{")Y=Bt(D,L+"."+Ft);else if(i()==="["){Y=[];var Te;if(c("[",true)){do Te=B(),Y.push(Te);while(c(",",true));c("]"),typeof Te<"u"&&je(D,L+"."+Ft,Te);}}else Y=B(),je(D,L+"."+Ft,Y);var Et=U[z];Et&&(Y=[].concat(Et).concat(Y)),U[z]=Y,c(",",true),c(";",true);}return U}var Tr=B();return je(D,L,Tr),Tr}function je(D,L,U){if(g===D&&/^features\./.test(L)){R[L]=U;return}D.setOption&&D.setOption(L,U);}function Ct(D,L,U,Y){D.setParsedOption&&D.setParsedOption(L,U,Y);}function Yt(D){if(c("[",true)){do ue(D,"option");while(c(",",true));c("]");}return D}function jc(D,L){if(!Yi.test(L=a()))throw v(L,"service name");var U=new eUe(L);x(U,function(z){if(!S(U,z))if(z==="rpc")zc(U,z);else throw v(z)}),D.add(U),D===g&&y.push(U);}function zc(D,L){var U=u(),Y=L;if(!Yi.test(L=a()))throw v(L,"name");var z=L,Te,Et,Tr,Lr;if(c("("),c("stream",true)&&(Et=true),!$i.test(L=a())||(Te=L,c(")"),c("returns"),c("("),c("stream",true)&&(Lr=true),!$i.test(L=a())))throw v(L);Tr=L,c(")");var Im=new tUe(z,Y,Te,Tr,Et,Lr);Im.comment=U,x(Im,function(tN){if(tN==="option")ue(Im,tN),c(";");else throw v(tN)}),D.add(Im);}function da(D,L){if(!$i.test(L=a()))throw v(L,"reference");var U=L;x(null,function(z){switch(z){case "required":case "repeated":W(D,z,U);break;case "optional":T==="proto3"?W(D,"proto3_optional",U):W(D,"optional",U);break;default:if(T==="proto2"||!$i.test(z))throw v(z);o(z),W(D,"optional",U);break}});}for(var Ft;(Ft=a())!==null;)switch(Ft){case "package":if(!l)throw v(Ft);Ee();break;case "import":if(!l)throw v(Ft);C();break;case "syntax":if(!l)throw v(Ft);ie();break;case "edition":if(!l)throw v(Ft);I();break;case "option":ue(g,Ft),c(";",true);break;default:if(S(g,Ft)){l=false;continue}throw v(Ft)}return w(),Lo.filename=null,{package:d,imports:p,weakImports:h,root:e}}});var H8=f((wOt,q8)=>{q8.exports=Ai;var dUe=/\/|\./;function Ai(t,e){dUe.test(t)||(t="google/protobuf/"+t+".proto",e={nested:{google:{nested:{protobuf:{nested:e}}}}}),Ai[t]=e;}Ai("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}});var F8;Ai("duration",{Duration:F8={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}});Ai("timestamp",{Timestamp:F8});Ai("empty",{Empty:{fields:{}}});Ai("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}});Ai("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}});Ai("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}});Ai.get=function(e){return Ai[e]||null};});var j8=f((UOt,G8)=>{var Ps=G8.exports=M8();Ps.build="full";Ps.tokenize=AM();Ps.parse=B8();Ps.common=H8();Ps.Root._configure(Ps.Type,Ps.parse,Ps.common);});var Eg=f((kOt,z8)=>{z8.exports=j8();});var vM=f((VOt,pUe)=>{pUe.exports={nested:{google:{nested:{protobuf:{options:{go_package:"google.golang.org/protobuf/types/descriptorpb",java_package:"com.google.protobuf",java_outer_classname:"DescriptorProtos",csharp_namespace:"Google.Protobuf.Reflection",objc_class_prefix:"GPB",cc_enable_arenas:true,optimize_for:"SPEED"},nested:{FileDescriptorSet:{edition:"proto2",fields:{file:{rule:"repeated",type:"FileDescriptorProto",id:1}},extensions:[[536e6,536e6]]},Edition:{edition:"proto2",values:{EDITION_UNKNOWN:0,EDITION_LEGACY:900,EDITION_PROTO2:998,EDITION_PROTO3:999,EDITION_2023:1e3,EDITION_2024:1001,EDITION_1_TEST_ONLY:1,EDITION_2_TEST_ONLY:2,EDITION_99997_TEST_ONLY:99997,EDITION_99998_TEST_ONLY:99998,EDITION_99999_TEST_ONLY:99999,EDITION_MAX:2147483647}},FileDescriptorProto:{edition:"proto2",fields:{name:{type:"string",id:1},package:{type:"string",id:2},dependency:{rule:"repeated",type:"string",id:3},publicDependency:{rule:"repeated",type:"int32",id:10},weakDependency:{rule:"repeated",type:"int32",id:11},optionDependency:{rule:"repeated",type:"string",id:15},messageType:{rule:"repeated",type:"DescriptorProto",id:4},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:5},service:{rule:"repeated",type:"ServiceDescriptorProto",id:6},extension:{rule:"repeated",type:"FieldDescriptorProto",id:7},options:{type:"FileOptions",id:8},sourceCodeInfo:{type:"SourceCodeInfo",id:9},syntax:{type:"string",id:12},edition:{type:"Edition",id:14}}},DescriptorProto:{edition:"proto2",fields:{name:{type:"string",id:1},field:{rule:"repeated",type:"FieldDescriptorProto",id:2},extension:{rule:"repeated",type:"FieldDescriptorProto",id:6},nestedType:{rule:"repeated",type:"DescriptorProto",id:3},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:4},extensionRange:{rule:"repeated",type:"ExtensionRange",id:5},oneofDecl:{rule:"repeated",type:"OneofDescriptorProto",id:8},options:{type:"MessageOptions",id:7},reservedRange:{rule:"repeated",type:"ReservedRange",id:9},reservedName:{rule:"repeated",type:"string",id:10},visibility:{type:"SymbolVisibility",id:11}},nested:{ExtensionRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2},options:{type:"ExtensionRangeOptions",id:3}}},ReservedRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}}}},ExtensionRangeOptions:{edition:"proto2",fields:{uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999},declaration:{rule:"repeated",type:"Declaration",id:2,options:{retention:"RETENTION_SOURCE"}},features:{type:"FeatureSet",id:50},verification:{type:"VerificationState",id:3,options:{default:"UNVERIFIED",retention:"RETENTION_SOURCE"}}},extensions:[[1e3,536870911]],nested:{Declaration:{fields:{number:{type:"int32",id:1},fullName:{type:"string",id:2},type:{type:"string",id:3},reserved:{type:"bool",id:5},repeated:{type:"bool",id:6}},reserved:[[4,4]]},VerificationState:{values:{DECLARATION:0,UNVERIFIED:1}}}},FieldDescriptorProto:{edition:"proto2",fields:{name:{type:"string",id:1},number:{type:"int32",id:3},label:{type:"Label",id:4},type:{type:"Type",id:5},typeName:{type:"string",id:6},extendee:{type:"string",id:2},defaultValue:{type:"string",id:7},oneofIndex:{type:"int32",id:9},jsonName:{type:"string",id:10},options:{type:"FieldOptions",id:8},proto3Optional:{type:"bool",id:17}},nested:{Type:{values:{TYPE_DOUBLE:1,TYPE_FLOAT:2,TYPE_INT64:3,TYPE_UINT64:4,TYPE_INT32:5,TYPE_FIXED64:6,TYPE_FIXED32:7,TYPE_BOOL:8,TYPE_STRING:9,TYPE_GROUP:10,TYPE_MESSAGE:11,TYPE_BYTES:12,TYPE_UINT32:13,TYPE_ENUM:14,TYPE_SFIXED32:15,TYPE_SFIXED64:16,TYPE_SINT32:17,TYPE_SINT64:18}},Label:{values:{LABEL_OPTIONAL:1,LABEL_REPEATED:3,LABEL_REQUIRED:2}}}},OneofDescriptorProto:{edition:"proto2",fields:{name:{type:"string",id:1},options:{type:"OneofOptions",id:2}}},EnumDescriptorProto:{edition:"proto2",fields:{name:{type:"string",id:1},value:{rule:"repeated",type:"EnumValueDescriptorProto",id:2},options:{type:"EnumOptions",id:3},reservedRange:{rule:"repeated",type:"EnumReservedRange",id:4},reservedName:{rule:"repeated",type:"string",id:5},visibility:{type:"SymbolVisibility",id:6}},nested:{EnumReservedRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}}}},EnumValueDescriptorProto:{edition:"proto2",fields:{name:{type:"string",id:1},number:{type:"int32",id:2},options:{type:"EnumValueOptions",id:3}}},ServiceDescriptorProto:{edition:"proto2",fields:{name:{type:"string",id:1},method:{rule:"repeated",type:"MethodDescriptorProto",id:2},options:{type:"ServiceOptions",id:3}}},MethodDescriptorProto:{edition:"proto2",fields:{name:{type:"string",id:1},inputType:{type:"string",id:2},outputType:{type:"string",id:3},options:{type:"MethodOptions",id:4},clientStreaming:{type:"bool",id:5},serverStreaming:{type:"bool",id:6}}},FileOptions:{edition:"proto2",fields:{javaPackage:{type:"string",id:1},javaOuterClassname:{type:"string",id:8},javaMultipleFiles:{type:"bool",id:10},javaGenerateEqualsAndHash:{type:"bool",id:20,options:{deprecated:true}},javaStringCheckUtf8:{type:"bool",id:27},optimizeFor:{type:"OptimizeMode",id:9,options:{default:"SPEED"}},goPackage:{type:"string",id:11},ccGenericServices:{type:"bool",id:16},javaGenericServices:{type:"bool",id:17},pyGenericServices:{type:"bool",id:18},deprecated:{type:"bool",id:23},ccEnableArenas:{type:"bool",id:31,options:{default:true}},objcClassPrefix:{type:"string",id:36},csharpNamespace:{type:"string",id:37},swiftPrefix:{type:"string",id:39},phpClassPrefix:{type:"string",id:40},phpNamespace:{type:"string",id:41},phpMetadataNamespace:{type:"string",id:44},rubyPackage:{type:"string",id:45},features:{type:"FeatureSet",id:50},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[42,42],[38,38],"php_generic_services"],nested:{OptimizeMode:{values:{SPEED:1,CODE_SIZE:2,LITE_RUNTIME:3}}}},MessageOptions:{edition:"proto2",fields:{messageSetWireFormat:{type:"bool",id:1},noStandardDescriptorAccessor:{type:"bool",id:2},deprecated:{type:"bool",id:3},mapEntry:{type:"bool",id:7},deprecatedLegacyJsonFieldConflicts:{type:"bool",id:11,options:{deprecated:true}},features:{type:"FeatureSet",id:12},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[4,4],[5,5],[6,6],[8,8],[9,9]]},FieldOptions:{edition:"proto2",fields:{ctype:{type:"CType",id:1,options:{default:"STRING"}},packed:{type:"bool",id:2},jstype:{type:"JSType",id:6,options:{default:"JS_NORMAL"}},lazy:{type:"bool",id:5},unverifiedLazy:{type:"bool",id:15},deprecated:{type:"bool",id:3},weak:{type:"bool",id:10,options:{deprecated:true}},debugRedact:{type:"bool",id:16},retention:{type:"OptionRetention",id:17},targets:{rule:"repeated",type:"OptionTargetType",id:19},editionDefaults:{rule:"repeated",type:"EditionDefault",id:20},features:{type:"FeatureSet",id:21},featureSupport:{type:"FeatureSupport",id:22},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[4,4],[18,18]],nested:{CType:{values:{STRING:0,CORD:1,STRING_PIECE:2}},JSType:{values:{JS_NORMAL:0,JS_STRING:1,JS_NUMBER:2}},OptionRetention:{values:{RETENTION_UNKNOWN:0,RETENTION_RUNTIME:1,RETENTION_SOURCE:2}},OptionTargetType:{values:{TARGET_TYPE_UNKNOWN:0,TARGET_TYPE_FILE:1,TARGET_TYPE_EXTENSION_RANGE:2,TARGET_TYPE_MESSAGE:3,TARGET_TYPE_FIELD:4,TARGET_TYPE_ONEOF:5,TARGET_TYPE_ENUM:6,TARGET_TYPE_ENUM_ENTRY:7,TARGET_TYPE_SERVICE:8,TARGET_TYPE_METHOD:9}},EditionDefault:{fields:{edition:{type:"Edition",id:3},value:{type:"string",id:2}}},FeatureSupport:{fields:{editionIntroduced:{type:"Edition",id:1},editionDeprecated:{type:"Edition",id:2},deprecationWarning:{type:"string",id:3},editionRemoved:{type:"Edition",id:4}}}}},OneofOptions:{edition:"proto2",fields:{features:{type:"FeatureSet",id:1},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumOptions:{edition:"proto2",fields:{allowAlias:{type:"bool",id:2},deprecated:{type:"bool",id:3},deprecatedLegacyJsonFieldConflicts:{type:"bool",id:6,options:{deprecated:true}},features:{type:"FeatureSet",id:7},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[5,5]]},EnumValueOptions:{edition:"proto2",fields:{deprecated:{type:"bool",id:1},features:{type:"FeatureSet",id:2},debugRedact:{type:"bool",id:3},featureSupport:{type:"FieldOptions.FeatureSupport",id:4},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},ServiceOptions:{edition:"proto2",fields:{features:{type:"FeatureSet",id:34},deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},MethodOptions:{edition:"proto2",fields:{deprecated:{type:"bool",id:33},idempotencyLevel:{type:"IdempotencyLevel",id:34,options:{default:"IDEMPOTENCY_UNKNOWN"}},features:{type:"FeatureSet",id:35},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],nested:{IdempotencyLevel:{values:{IDEMPOTENCY_UNKNOWN:0,NO_SIDE_EFFECTS:1,IDEMPOTENT:2}}}},UninterpretedOption:{edition:"proto2",fields:{name:{rule:"repeated",type:"NamePart",id:2},identifierValue:{type:"string",id:3},positiveIntValue:{type:"uint64",id:4},negativeIntValue:{type:"int64",id:5},doubleValue:{type:"double",id:6},stringValue:{type:"bytes",id:7},aggregateValue:{type:"string",id:8}},nested:{NamePart:{fields:{namePart:{rule:"required",type:"string",id:1},isExtension:{rule:"required",type:"bool",id:2}}}}},FeatureSet:{edition:"proto2",fields:{fieldPresence:{type:"FieldPresence",id:1,options:{retention:"RETENTION_RUNTIME",targets:"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_2023","edition_defaults.value":"EXPLICIT"}},enumType:{type:"EnumType",id:2,options:{retention:"RETENTION_RUNTIME",targets:"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"OPEN"}},repeatedFieldEncoding:{type:"RepeatedFieldEncoding",id:3,options:{retention:"RETENTION_RUNTIME",targets:"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"PACKED"}},utf8Validation:{type:"Utf8Validation",id:4,options:{retention:"RETENTION_RUNTIME",targets:"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"VERIFY"}},messageEncoding:{type:"MessageEncoding",id:5,options:{retention:"RETENTION_RUNTIME",targets:"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_LEGACY","edition_defaults.value":"LENGTH_PREFIXED"}},jsonFormat:{type:"JsonFormat",id:6,options:{retention:"RETENTION_RUNTIME",targets:"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"ALLOW"}},enforceNamingStyle:{type:"EnforceNamingStyle",id:7,options:{retention:"RETENTION_SOURCE",targets:"TARGET_TYPE_METHOD","feature_support.edition_introduced":"EDITION_2024","edition_defaults.edition":"EDITION_2024","edition_defaults.value":"STYLE2024"}},defaultSymbolVisibility:{type:"VisibilityFeature.DefaultSymbolVisibility",id:8,options:{retention:"RETENTION_SOURCE",targets:"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2024","edition_defaults.edition":"EDITION_2024","edition_defaults.value":"EXPORT_TOP_LEVEL"}}},extensions:[[1e3,9994],[9995,9999],[1e4,1e4]],reserved:[[999,999]],nested:{FieldPresence:{values:{FIELD_PRESENCE_UNKNOWN:0,EXPLICIT:1,IMPLICIT:2,LEGACY_REQUIRED:3}},EnumType:{values:{ENUM_TYPE_UNKNOWN:0,OPEN:1,CLOSED:2}},RepeatedFieldEncoding:{values:{REPEATED_FIELD_ENCODING_UNKNOWN:0,PACKED:1,EXPANDED:2}},Utf8Validation:{values:{UTF8_VALIDATION_UNKNOWN:0,VERIFY:2,NONE:3}},MessageEncoding:{values:{MESSAGE_ENCODING_UNKNOWN:0,LENGTH_PREFIXED:1,DELIMITED:2}},JsonFormat:{values:{JSON_FORMAT_UNKNOWN:0,ALLOW:1,LEGACY_BEST_EFFORT:2}},EnforceNamingStyle:{values:{ENFORCE_NAMING_STYLE_UNKNOWN:0,STYLE2024:1,STYLE_LEGACY:2}},VisibilityFeature:{fields:{},reserved:[[1,536870911]],nested:{DefaultSymbolVisibility:{values:{DEFAULT_SYMBOL_VISIBILITY_UNKNOWN:0,EXPORT_ALL:1,EXPORT_TOP_LEVEL:2,LOCAL_ALL:3,STRICT:4}}}}}},FeatureSetDefaults:{edition:"proto2",fields:{defaults:{rule:"repeated",type:"FeatureSetEditionDefault",id:1},minimumEdition:{type:"Edition",id:4},maximumEdition:{type:"Edition",id:5}},nested:{FeatureSetEditionDefault:{fields:{edition:{type:"Edition",id:3},overridableFeatures:{type:"FeatureSet",id:4},fixedFeatures:{type:"FeatureSet",id:5}},reserved:[[1,1],[2,2],"features"]}}},SourceCodeInfo:{edition:"proto2",fields:{location:{rule:"repeated",type:"Location",id:1}},extensions:[[536e6,536e6]],nested:{Location:{fields:{path:{rule:"repeated",type:"int32",id:1,options:{packed:true}},span:{rule:"repeated",type:"int32",id:2,options:{packed:true}},leadingComments:{type:"string",id:3},trailingComments:{type:"string",id:4},leadingDetachedComments:{rule:"repeated",type:"string",id:6}}}}},GeneratedCodeInfo:{edition:"proto2",fields:{annotation:{rule:"repeated",type:"Annotation",id:1}},nested:{Annotation:{fields:{path:{rule:"repeated",type:"int32",id:1,options:{packed:true}},sourceFile:{type:"string",id:2},begin:{type:"int32",id:3},end:{type:"int32",id:4},semantic:{type:"Semantic",id:5}},nested:{Semantic:{values:{NONE:0,SET:1,ALIAS:2}}}}}},SymbolVisibility:{edition:"proto2",values:{VISIBILITY_UNSET:0,VISIBILITY_LOCAL:1,VISIBILITY_EXPORT:2}}}}}}}};});var J8=f((Re,Q8)=>{var yn=Eg();Q8.exports=Re=yn.descriptor=yn.Root.fromJSON(vM()).lookup(".google.protobuf");var Y8=yn.Namespace,rh=yn.Root,Do=yn.Enum,Ki=yn.Type,bs=yn.Field,fUe=yn.MapField,Tg=yn.OneOf,nh=yn.Service,Sg=yn.Method;rh.fromDescriptor=function(e){typeof e.length=="number"&&(e=Re.FileDescriptorSet.decode(e));var r=new rh;if(e.file)for(var n,s,a=0,o;a<e.file.length;++a){s=r,(n=e.file[a]).package&&n.package.length&&(s=r.define(n.package));var i=RUe(n);if(n.name&&n.name.length&&r.files.push(s.filename=n.name),n.messageType)for(o=0;o<n.messageType.length;++o)s.add(Ki.fromDescriptor(n.messageType[o],i));if(n.enumType)for(o=0;o<n.enumType.length;++o)s.add(Do.fromDescriptor(n.enumType[o],i));if(n.extension)for(o=0;o<n.extension.length;++o)s.add(bs.fromDescriptor(n.extension[o],i));if(n.service)for(o=0;o<n.service.length;++o)s.add(nh.fromDescriptor(n.service[o],i));var c=el(n.options,Re.FileOptions);if(c){var u=Object.keys(c);for(o=0;o<u.length;++o)s.setOption(u[o],c[u[o]]);}}return r.resolveAll()};rh.prototype.toDescriptor=function(e){var r=Re.FileDescriptorSet.create();return $8(this,r.file,e),r};function $8(t,e,r){var n=Re.FileDescriptorProto.create({name:t.filename||(t.fullName.substring(1).replace(/\./g,"_")||"root")+".proto"});vUe(r,n),t instanceof rh||(n.package=t.fullName.substring(1));for(var s=0,a;s<t.nestedArray.length;++s)(a=t._nestedArray[s])instanceof Ki?n.messageType.push(a.toDescriptor(r)):a instanceof Do?n.enumType.push(a.toDescriptor()):a instanceof bs?n.extension.push(a.toDescriptor(r)):a instanceof nh?n.service.push(a.toDescriptor()):a instanceof Y8&&$8(a,e,r);n.options=tl(t.options,Re.FileOptions),n.messageType.length+n.enumType.length+n.extension.length+n.service.length&&e.push(n);}var hUe=0;Ki.fromDescriptor=function(e,r,n){typeof e.length=="number"&&(e=Re.DescriptorProto.decode(e));var s=new Ki(e.name.length?e.name:"Type"+hUe++,el(e.options,Re.MessageOptions)),a;if(n||(s._edition=r),e.oneofDecl)for(a=0;a<e.oneofDecl.length;++a)s.add(Tg.fromDescriptor(e.oneofDecl[a]));if(e.field)for(a=0;a<e.field.length;++a){var o=bs.fromDescriptor(e.field[a],r,true);s.add(o),e.field[a].hasOwnProperty("oneofIndex")&&s.oneofsArray[e.field[a].oneofIndex].add(o);}if(e.extension)for(a=0;a<e.extension.length;++a)s.add(bs.fromDescriptor(e.extension[a],r,true));if(e.nestedType)for(a=0;a<e.nestedType.length;++a)s.add(Ki.fromDescriptor(e.nestedType[a],r,true)),e.nestedType[a].options&&e.nestedType[a].options.mapEntry&&s.setOption("map_entry",true);if(e.enumType)for(a=0;a<e.enumType.length;++a)s.add(Do.fromDescriptor(e.enumType[a],r,true));if(e.extensionRange&&e.extensionRange.length)for(s.extensions=[],a=0;a<e.extensionRange.length;++a)s.extensions.push([e.extensionRange[a].start,e.extensionRange[a].end]);if(e.reservedRange&&e.reservedRange.length||e.reservedName&&e.reservedName.length){if(s.reserved=[],e.reservedRange)for(a=0;a<e.reservedRange.length;++a)s.reserved.push([e.reservedRange[a].start,e.reservedRange[a].end]);if(e.reservedName)for(a=0;a<e.reservedName.length;++a)s.reserved.push(e.reservedName[a]);}return s};Ki.prototype.toDescriptor=function(e){var r=Re.DescriptorProto.create({name:this.name}),n;for(n=0;n<this.fieldsArray.length;++n){var s;if(r.field.push(s=this._fieldsArray[n].toDescriptor(e)),this._fieldsArray[n]instanceof fUe){var a=OM(this._fieldsArray[n].keyType,this._fieldsArray[n].resolvedKeyType,false),o=OM(this._fieldsArray[n].type,this._fieldsArray[n].resolvedType,false),i=o===11||o===14?this._fieldsArray[n].resolvedType&&X8(this.parent,this._fieldsArray[n].resolvedType)||this._fieldsArray[n].type:void 0;r.nestedType.push(Re.DescriptorProto.create({name:s.typeName,field:[Re.FieldDescriptorProto.create({name:"key",number:1,label:1,type:a}),Re.FieldDescriptorProto.create({name:"value",number:2,label:1,type:o,typeName:i})],options:Re.MessageOptions.create({mapEntry:true})}));}}for(n=0;n<this.oneofsArray.length;++n)r.oneofDecl.push(this._oneofsArray[n].toDescriptor());for(n=0;n<this.nestedArray.length;++n)this._nestedArray[n]instanceof bs?r.field.push(this._nestedArray[n].toDescriptor(e)):this._nestedArray[n]instanceof Ki?r.nestedType.push(this._nestedArray[n].toDescriptor(e)):this._nestedArray[n]instanceof Do&&r.enumType.push(this._nestedArray[n].toDescriptor());if(this.extensions)for(n=0;n<this.extensions.length;++n)r.extensionRange.push(Re.DescriptorProto.ExtensionRange.create({start:this.extensions[n][0],end:this.extensions[n][1]}));if(this.reserved)for(n=0;n<this.reserved.length;++n)typeof this.reserved[n]=="string"?r.reservedName.push(this.reserved[n]):r.reservedRange.push(Re.DescriptorProto.ReservedRange.create({start:this.reserved[n][0],end:this.reserved[n][1]}));return r.options=tl(this.options,Re.MessageOptions),r};var _Ue=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/;bs.fromDescriptor=function(e,r,n){if(typeof e.length=="number"&&(e=Re.DescriptorProto.decode(e)),typeof e.number!="number")throw Error("missing field id");var s;e.typeName&&e.typeName.length?s=e.typeName:s=gUe(e.type);var a;switch(e.label){case 1:a=void 0;break;case 2:a="required";break;case 3:a="repeated";break;default:throw Error("illegal label: "+e.label)}var o=e.extendee;e.extendee!==void 0&&(o=o.length?o:void 0);var i=new bs(e.name.length?e.name:"field"+e.number,e.number,s,a,o);if(n||(i._edition=r),i.options=el(e.options,Re.FieldOptions),e.proto3_optional&&(i.options.proto3_optional=true),e.defaultValue&&e.defaultValue.length){var c=e.defaultValue;switch(c){case "true":case "TRUE":c=true;break;case "false":case "FALSE":c=false;break;default:var u=_Ue.exec(c);u&&(c=parseInt(c));break}i.setOption("default",c);}return yUe(e.type)&&(r==="proto3"?e.options&&!e.options.packed&&i.setOption("packed",false):(!r||r==="proto2")&&e.options&&e.options.packed&&i.setOption("packed",true)),i};bs.prototype.toDescriptor=function(e){var r=Re.FieldDescriptorProto.create({name:this.name,number:this.id});if(this.map)r.type=11,r.typeName=yn.util.ucFirst(this.name),r.label=3;else {switch(r.type=OM(this.type,this.resolve().resolvedType,this.delimited)){case 10:case 11:case 14:r.typeName=this.resolvedType?X8(this.parent,this.resolvedType):this.type;break}this.rule==="repeated"?r.label=3:this.required&&e==="proto2"?r.label=2:r.label=1;}if(r.extendee=this.extensionField?this.extensionField.parent.fullName:this.extend,this.partOf&&(r.oneofIndex=this.parent.oneofsArray.indexOf(this.partOf))<0)throw Error("missing oneof");return this.options&&(r.options=tl(this.options,Re.FieldOptions),this.options.default!=null&&(r.defaultValue=String(this.options.default)),this.options.proto3_optional&&(r.proto3_optional=true)),e==="proto3"?this.packed||((r.options||(r.options=Re.FieldOptions.create())).packed=false):(!e||e==="proto2")&&this.packed&&((r.options||(r.options=Re.FieldOptions.create())).packed=true),r};var mUe=0;Do.fromDescriptor=function(e,r,n){typeof e.length=="number"&&(e=Re.EnumDescriptorProto.decode(e));var s={};if(e.value)for(var a=0;a<e.value.length;++a){var o=e.value[a].name,i=e.value[a].number||0;s[o&&o.length?o:"NAME"+i]=i;}var c=new Do(e.name&&e.name.length?e.name:"Enum"+mUe++,s,el(e.options,Re.EnumOptions));return n||(c._edition=r),c};Do.prototype.toDescriptor=function(){for(var e=[],r=0,n=Object.keys(this.values);r<n.length;++r)e.push(Re.EnumValueDescriptorProto.create({name:n[r],number:this.values[n[r]]}));return Re.EnumDescriptorProto.create({name:this.name,value:e,options:tl(this.options,Re.EnumOptions)})};var EUe=0;Tg.fromDescriptor=function(e){return typeof e.length=="number"&&(e=Re.OneofDescriptorProto.decode(e)),new Tg(e.name&&e.name.length?e.name:"oneof"+EUe++)};Tg.prototype.toDescriptor=function(){return Re.OneofDescriptorProto.create({name:this.name})};var TUe=0;nh.fromDescriptor=function(e,r,n){typeof e.length=="number"&&(e=Re.ServiceDescriptorProto.decode(e));var s=new nh(e.name&&e.name.length?e.name:"Service"+TUe++,el(e.options,Re.ServiceOptions));if(n||(s._edition=r),e.method)for(var a=0;a<e.method.length;++a)s.add(Sg.fromDescriptor(e.method[a]));return s};nh.prototype.toDescriptor=function(){for(var e=[],r=0;r<this.methodsArray.length;++r)e.push(this._methodsArray[r].toDescriptor());return Re.ServiceDescriptorProto.create({name:this.name,method:e,options:tl(this.options,Re.ServiceOptions)})};var SUe=0;Sg.fromDescriptor=function(e){return typeof e.length=="number"&&(e=Re.MethodDescriptorProto.decode(e)),new Sg(e.name&&e.name.length?e.name:"Method"+SUe++,"rpc",e.inputType,e.outputType,!!e.clientStreaming,!!e.serverStreaming,el(e.options,Re.MethodOptions))};Sg.prototype.toDescriptor=function(){return Re.MethodDescriptorProto.create({name:this.name,inputType:this.resolvedRequestType?this.resolvedRequestType.fullName:this.requestType,outputType:this.resolvedResponseType?this.resolvedResponseType.fullName:this.responseType,clientStreaming:this.requestStream,serverStreaming:this.responseStream,options:tl(this.options,Re.MethodOptions)})};function gUe(t){switch(t){case 1:return "double";case 2:return "float";case 3:return "int64";case 4:return "uint64";case 5:return "int32";case 6:return "fixed64";case 7:return "fixed32";case 8:return "bool";case 9:return "string";case 12:return "bytes";case 13:return "uint32";case 15:return "sfixed32";case 16:return "sfixed64";case 17:return "sint32";case 18:return "sint64"}throw Error("illegal type: "+t)}function yUe(t){switch(t){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 13:case 14:case 15:case 16:case 17:case 18:return  true}return  false}function OM(t,e,r){switch(t){case "double":return 1;case "float":return 2;case "int64":return 3;case "uint64":return 4;case "int32":return 5;case "fixed64":return 6;case "fixed32":return 7;case "bool":return 8;case "string":return 9;case "bytes":return 12;case "uint32":return 13;case "sfixed32":return 15;case "sfixed64":return 16;case "sint32":return 17;case "sint64":return 18}if(e instanceof Do)return 14;if(e instanceof Ki)return r?10:11;throw Error("illegal type: "+t)}function K8(t,e){for(var r={},n=0,s,a;n<e.fieldsArray.length;++n)if((a=(s=e._fieldsArray[n]).name)!=="uninterpretedOption"&&Object.prototype.hasOwnProperty.call(t,a)){var o=AUe(a);s.resolvedType instanceof Ki?r[o]=K8(t[a],s.resolvedType):s.resolvedType instanceof Do?r[o]=s.resolvedType.valuesById[t[a]]:r[o]=t[a];}return r}function el(t,e){if(t)return K8(e.toObject(t),e)}function W8(t,e){for(var r={},n=Object.keys(t),s=0;s<n.length;++s){var a=n[s],o=yn.util.camelCase(a);if(Object.prototype.hasOwnProperty.call(e.fields,o)){var i=e.fields[o];i.resolvedType instanceof Ki?r[o]=W8(t[a],i.resolvedType):r[o]=t[a],i.repeated&&!Array.isArray(r[o])&&(r[o]=[r[o]]);}}return r}function tl(t,e){if(t)return e.fromObject(W8(t,e))}function X8(t,e){var r=t.fullName.split("."),n=e.fullName.split("."),s=0,a=0,o=n.length-1;if(!(t instanceof rh)&&e instanceof Y8)for(;s<r.length&&a<o&&r[s]===n[a];){var i=e.lookup(r[s++],true);if(i!==null&&i!==e)break;++a;}else for(;s<r.length&&a<o&&r[s]===n[a];++s,++a);return n.slice(a).join(".")}function AUe(t){return t.substring(0,1)+t.substring(1).replace(/([A-Z])(?=[a-z]|$)/g,function(e,r){return "_"+r.toLowerCase()})}function RUe(t){if(t.syntax==="editions")switch(t.edition){case Re.Edition.EDITION_2023:return "2023";default:throw new Error("Unsupported edition "+t.edition)}return t.syntax==="proto3"?"proto3":"proto2"}function vUe(t,e){if(t)if(t==="proto2"||t==="proto3")e.syntax=t;else switch(e.syntax="editions",t){case "2023":e.edition=Re.Edition.EDITION_2023;break;default:throw new Error("Unsupported edition "+t)}}});var Z8=f((BOt,OUe)=>{OUe.exports={nested:{google:{nested:{protobuf:{nested:{Api:{fields:{name:{type:"string",id:1},methods:{rule:"repeated",type:"Method",id:2},options:{rule:"repeated",type:"Option",id:3},version:{type:"string",id:4},sourceContext:{type:"SourceContext",id:5},mixins:{rule:"repeated",type:"Mixin",id:6},syntax:{type:"Syntax",id:7}}},Method:{fields:{name:{type:"string",id:1},requestTypeUrl:{type:"string",id:2},requestStreaming:{type:"bool",id:3},responseTypeUrl:{type:"string",id:4},responseStreaming:{type:"bool",id:5},options:{rule:"repeated",type:"Option",id:6},syntax:{type:"Syntax",id:7}}},Mixin:{fields:{name:{type:"string",id:1},root:{type:"string",id:2}}},SourceContext:{fields:{fileName:{type:"string",id:1}}},Option:{fields:{name:{type:"string",id:1},value:{type:"Any",id:2}}},Syntax:{values:{SYNTAX_PROTO2:0,SYNTAX_PROTO3:1}}}}}}}};});var e5=f((FOt,NUe)=>{NUe.exports={nested:{google:{nested:{protobuf:{nested:{SourceContext:{fields:{fileName:{type:"string",id:1}}}}}}}}};});var t5=f((qOt,CUe)=>{CUe.exports={nested:{google:{nested:{protobuf:{nested:{Type:{fields:{name:{type:"string",id:1},fields:{rule:"repeated",type:"Field",id:2},oneofs:{rule:"repeated",type:"string",id:3},options:{rule:"repeated",type:"Option",id:4},sourceContext:{type:"SourceContext",id:5},syntax:{type:"Syntax",id:6}}},Field:{fields:{kind:{type:"Kind",id:1},cardinality:{type:"Cardinality",id:2},number:{type:"int32",id:3},name:{type:"string",id:4},typeUrl:{type:"string",id:6},oneofIndex:{type:"int32",id:7},packed:{type:"bool",id:8},options:{rule:"repeated",type:"Option",id:9},jsonName:{type:"string",id:10},defaultValue:{type:"string",id:11}},nested:{Kind:{values:{TYPE_UNKNOWN:0,TYPE_DOUBLE:1,TYPE_FLOAT:2,TYPE_INT64:3,TYPE_UINT64:4,TYPE_INT32:5,TYPE_FIXED64:6,TYPE_FIXED32:7,TYPE_BOOL:8,TYPE_STRING:9,TYPE_GROUP:10,TYPE_MESSAGE:11,TYPE_BYTES:12,TYPE_UINT32:13,TYPE_ENUM:14,TYPE_SFIXED32:15,TYPE_SFIXED64:16,TYPE_SINT32:17,TYPE_SINT64:18}},Cardinality:{values:{CARDINALITY_UNKNOWN:0,CARDINALITY_OPTIONAL:1,CARDINALITY_REQUIRED:2,CARDINALITY_REPEATED:3}}}},Enum:{fields:{name:{type:"string",id:1},enumvalue:{rule:"repeated",type:"EnumValue",id:2},options:{rule:"repeated",type:"Option",id:3},sourceContext:{type:"SourceContext",id:4},syntax:{type:"Syntax",id:5}}},EnumValue:{fields:{name:{type:"string",id:1},number:{type:"int32",id:2},options:{rule:"repeated",type:"Option",id:3}}},Option:{fields:{name:{type:"string",id:1},value:{type:"Any",id:2}}},Syntax:{values:{SYNTAX_PROTO2:0,SYNTAX_PROTO3:1}},Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}},SourceContext:{fields:{fileName:{type:"string",id:1}}}}}}}}};});var o5=f(Ms=>{Object.defineProperty(Ms,"__esModule",{value:true});Ms.addCommonProtos=Ms.loadProtosWithOptionsSync=Ms.loadProtosWithOptions=void 0;var r5=P("fs"),n5=P("path"),rl=Eg();function i5(t,e){let r=t.resolvePath;t.resolvePath=(n,s)=>{if(n5.isAbsolute(s))return s;for(let a of e){let o=n5.join(a,s);try{return r5.accessSync(o,r5.constants.R_OK),o}catch{continue}}return process.emitWarning(`${s} not found in any of the include paths ${e}`),r(n,s)};}async function PUe(t,e){let r=new rl.Root;if(e=e||{},e.includeDirs){if(!Array.isArray(e.includeDirs))return Promise.reject(new Error("The includeDirs option must be an array"));i5(r,e.includeDirs);}let n=await r.load(t,e);return n.resolveAll(),n}Ms.loadProtosWithOptions=PUe;function bUe(t,e){let r=new rl.Root;if(e=e||{},e.includeDirs){if(!Array.isArray(e.includeDirs))throw new Error("The includeDirs option must be an array");i5(r,e.includeDirs);}let n=r.loadSync(t,e);return n.resolveAll(),n}Ms.loadProtosWithOptionsSync=bUe;function MUe(){let t=Z8(),e=vM(),r=e5(),n=t5();rl.common("api",t.nested.google.nested.protobuf.nested),rl.common("descriptor",e.nested.google.nested.protobuf.nested),rl.common("source_context",r.nested.google.nested.protobuf.nested),rl.common("type",n.nested.google.nested.protobuf.nested);}Ms.addCommonProtos=MUe;});var s5=f((ih,NM)=>{(function(t,e){function r(n){return n.default||n}typeof define=="function"&&define.amd?define([],function(){var n={};return e(n),r(n)}):typeof ih=="object"?(e(ih),typeof NM=="object"&&(NM.exports=r(ih))):function(){var n={};e(n),t.Long=r(n);}();})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:ih,function(t){Object.defineProperty(t,"__esModule",{value:true}),t.default=void 0;var e=null;try{e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports;}catch{}function r(I,S,x){this.low=I|0,this.high=S|0,this.unsigned=!!x;}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:true});function n(I){return (I&&I.__isLong__)===true}function s(I){var S=Math.clz32(I&-I);return I?31-S:S}r.isLong=n;var a={},o={};function i(I,S){var x,ce,W;return S?(I>>>=0,(W=0<=I&&I<256)&&(ce=o[I],ce)?ce:(x=u(I,0,true),W&&(o[I]=x),x)):(I|=0,(W=-128<=I&&I<128)&&(ce=a[I],ce)?ce:(x=u(I,I<0?-1:0,false),W&&(a[I]=x),x))}r.fromInt=i;function c(I,S){if(isNaN(I))return S?v:w;if(S){if(I<0)return v;if(I>=y)return K}else {if(I<=-9223372036854776e3)return Ee;if(I+1>=R)return te}return I<0?c(-I,S).neg():u(I%g|0,I/g|0,S)}r.fromNumber=c;function u(I,S,x){return new r(I,S,x)}r.fromBits=u;var l=Math.pow;function d(I,S,x){if(I.length===0)throw Error("empty string");if(typeof S=="number"?(x=S,S=false):S=!!S,I==="NaN"||I==="Infinity"||I==="+Infinity"||I==="-Infinity")return S?v:w;if(x=x||10,x<2||36<x)throw RangeError("radix");var ce;if((ce=I.indexOf("-"))>0)throw Error("interior hyphen");if(ce===0)return d(I.substring(1),S,x).neg();for(var W=c(l(x,8)),oe=w,be=0;be<I.length;be+=8){var st=Math.min(8,I.length-be),gt=parseInt(I.substring(be,be+st),x);if(st<8){var Xe=c(l(x,st));oe=oe.mul(Xe).add(c(gt));}else oe=oe.mul(W),oe=oe.add(c(gt));}return oe.unsigned=S,oe}r.fromString=d;function p(I,S){return typeof I=="number"?c(I,S):typeof I=="string"?d(I,S):u(I.low,I.high,typeof S=="boolean"?S:I.unsigned)}r.fromValue=p;var h=65536,T=1<<24,g=h*h,y=g*g,R=y/2,b=i(T),w=i(0);r.ZERO=w;var v=i(0,true);r.UZERO=v;var V=i(1);r.ONE=V;var B=i(1,true);r.UONE=B;var F=i(-1);r.NEG_ONE=F;var te=u(-1,2147483647,false);r.MAX_VALUE=te;var K=u(-1,-1,true);r.MAX_UNSIGNED_VALUE=K;var Ee=u(0,-2147483648,false);r.MIN_VALUE=Ee;var C=r.prototype;C.toInt=function(){return this.unsigned?this.low>>>0:this.low},C.toNumber=function(){return this.unsigned?(this.high>>>0)*g+(this.low>>>0):this.high*g+(this.low>>>0)},C.toString=function(S){if(S=S||10,S<2||36<S)throw RangeError("radix");if(this.isZero())return "0";if(this.isNegative())if(this.eq(Ee)){var x=c(S),ce=this.div(x),W=ce.mul(x).sub(this);return ce.toString(S)+W.toInt().toString(S)}else return "-"+this.neg().toString(S);for(var oe=c(l(S,6),this.unsigned),be=this,st="";;){var gt=be.div(oe),Xe=be.sub(gt.mul(oe)).toInt()>>>0,ue=Xe.toString(S);if(be=gt,be.isZero())return ue+st;for(;ue.length<6;)ue="0"+ue;st=""+ue+st;}},C.getHighBits=function(){return this.high},C.getHighBitsUnsigned=function(){return this.high>>>0},C.getLowBits=function(){return this.low},C.getLowBitsUnsigned=function(){return this.low>>>0},C.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Ee)?64:this.neg().getNumBitsAbs();for(var S=this.high!=0?this.high:this.low,x=31;x>0&&(S&1<<x)==0;x--);return this.high!=0?x+33:x+1},C.isSafeInteger=function(){var S=this.high>>21;return S?this.unsigned?false:S===-1&&!(this.low===0&&this.high===-2097152):true},C.isZero=function(){return this.high===0&&this.low===0},C.eqz=C.isZero,C.isNegative=function(){return !this.unsigned&&this.high<0},C.isPositive=function(){return this.unsigned||this.high>=0},C.isOdd=function(){return (this.low&1)===1},C.isEven=function(){return (this.low&1)===0},C.equals=function(S){return n(S)||(S=p(S)),this.unsigned!==S.unsigned&&this.high>>>31===1&&S.high>>>31===1?false:this.high===S.high&&this.low===S.low},C.eq=C.equals,C.notEquals=function(S){return !this.eq(S)},C.neq=C.notEquals,C.ne=C.notEquals,C.lessThan=function(S){return this.comp(S)<0},C.lt=C.lessThan,C.lessThanOrEqual=function(S){return this.comp(S)<=0},C.lte=C.lessThanOrEqual,C.le=C.lessThanOrEqual,C.greaterThan=function(S){return this.comp(S)>0},C.gt=C.greaterThan,C.greaterThanOrEqual=function(S){return this.comp(S)>=0},C.gte=C.greaterThanOrEqual,C.ge=C.greaterThanOrEqual,C.compare=function(S){if(n(S)||(S=p(S)),this.eq(S))return 0;var x=this.isNegative(),ce=S.isNegative();return x&&!ce?-1:!x&&ce?1:this.unsigned?S.high>>>0>this.high>>>0||S.high===this.high&&S.low>>>0>this.low>>>0?-1:1:this.sub(S).isNegative()?-1:1},C.comp=C.compare,C.negate=function(){return !this.unsigned&&this.eq(Ee)?Ee:this.not().add(V)},C.neg=C.negate,C.add=function(S){n(S)||(S=p(S));var x=this.high>>>16,ce=this.high&65535,W=this.low>>>16,oe=this.low&65535,be=S.high>>>16,st=S.high&65535,gt=S.low>>>16,Xe=S.low&65535,ue=0,Bt=0,je=0,Ct=0;return Ct+=oe+Xe,je+=Ct>>>16,Ct&=65535,je+=W+gt,Bt+=je>>>16,je&=65535,Bt+=ce+st,ue+=Bt>>>16,Bt&=65535,ue+=x+be,ue&=65535,u(je<<16|Ct,ue<<16|Bt,this.unsigned)},C.subtract=function(S){return n(S)||(S=p(S)),this.add(S.neg())},C.sub=C.subtract,C.multiply=function(S){if(this.isZero())return this;if(n(S)||(S=p(S)),e){var x=e.mul(this.low,this.high,S.low,S.high);return u(x,e.get_high(),this.unsigned)}if(S.isZero())return this.unsigned?v:w;if(this.eq(Ee))return S.isOdd()?Ee:w;if(S.eq(Ee))return this.isOdd()?Ee:w;if(this.isNegative())return S.isNegative()?this.neg().mul(S.neg()):this.neg().mul(S).neg();if(S.isNegative())return this.mul(S.neg()).neg();if(this.lt(b)&&S.lt(b))return c(this.toNumber()*S.toNumber(),this.unsigned);var ce=this.high>>>16,W=this.high&65535,oe=this.low>>>16,be=this.low&65535,st=S.high>>>16,gt=S.high&65535,Xe=S.low>>>16,ue=S.low&65535,Bt=0,je=0,Ct=0,Yt=0;return Yt+=be*ue,Ct+=Yt>>>16,Yt&=65535,Ct+=oe*ue,je+=Ct>>>16,Ct&=65535,Ct+=be*Xe,je+=Ct>>>16,Ct&=65535,je+=W*ue,Bt+=je>>>16,je&=65535,je+=oe*Xe,Bt+=je>>>16,je&=65535,je+=be*gt,Bt+=je>>>16,je&=65535,Bt+=ce*ue+W*Xe+oe*gt+be*st,Bt&=65535,u(Ct<<16|Yt,Bt<<16|je,this.unsigned)},C.mul=C.multiply,C.divide=function(S){if(n(S)||(S=p(S)),S.isZero())throw Error("division by zero");if(e){if(!this.unsigned&&this.high===-2147483648&&S.low===-1&&S.high===-1)return this;var x=(this.unsigned?e.div_u:e.div_s)(this.low,this.high,S.low,S.high);return u(x,e.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?v:w;var ce,W,oe;if(this.unsigned){if(S.unsigned||(S=S.toUnsigned()),S.gt(this))return v;if(S.gt(this.shru(1)))return B;oe=v;}else {if(this.eq(Ee)){if(S.eq(V)||S.eq(F))return Ee;if(S.eq(Ee))return V;var be=this.shr(1);return ce=be.div(S).shl(1),ce.eq(w)?S.isNegative()?V:F:(W=this.sub(S.mul(ce)),oe=ce.add(W.div(S)),oe)}else if(S.eq(Ee))return this.unsigned?v:w;if(this.isNegative())return S.isNegative()?this.neg().div(S.neg()):this.neg().div(S).neg();if(S.isNegative())return this.div(S.neg()).neg();oe=w;}for(W=this;W.gte(S);){ce=Math.max(1,Math.floor(W.toNumber()/S.toNumber()));for(var st=Math.ceil(Math.log(ce)/Math.LN2),gt=st<=48?1:l(2,st-48),Xe=c(ce),ue=Xe.mul(S);ue.isNegative()||ue.gt(W);)ce-=gt,Xe=c(ce,this.unsigned),ue=Xe.mul(S);Xe.isZero()&&(Xe=V),oe=oe.add(Xe),W=W.sub(ue);}return oe},C.div=C.divide,C.modulo=function(S){if(n(S)||(S=p(S)),e){var x=(this.unsigned?e.rem_u:e.rem_s)(this.low,this.high,S.low,S.high);return u(x,e.get_high(),this.unsigned)}return this.sub(this.div(S).mul(S))},C.mod=C.modulo,C.rem=C.modulo,C.not=function(){return u(~this.low,~this.high,this.unsigned)},C.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},C.clz=C.countLeadingZeros,C.countTrailingZeros=function(){return this.low?s(this.low):s(this.high)+32},C.ctz=C.countTrailingZeros,C.and=function(S){return n(S)||(S=p(S)),u(this.low&S.low,this.high&S.high,this.unsigned)},C.or=function(S){return n(S)||(S=p(S)),u(this.low|S.low,this.high|S.high,this.unsigned)},C.xor=function(S){return n(S)||(S=p(S)),u(this.low^S.low,this.high^S.high,this.unsigned)},C.shiftLeft=function(S){return n(S)&&(S=S.toInt()),(S&=63)===0?this:S<32?u(this.low<<S,this.high<<S|this.low>>>32-S,this.unsigned):u(0,this.low<<S-32,this.unsigned)},C.shl=C.shiftLeft,C.shiftRight=function(S){return n(S)&&(S=S.toInt()),(S&=63)===0?this:S<32?u(this.low>>>S|this.high<<32-S,this.high>>S,this.unsigned):u(this.high>>S-32,this.high>=0?0:-1,this.unsigned)},C.shr=C.shiftRight,C.shiftRightUnsigned=function(S){return n(S)&&(S=S.toInt()),(S&=63)===0?this:S<32?u(this.low>>>S|this.high<<32-S,this.high>>>S,this.unsigned):S===32?u(this.high,0,this.unsigned):u(this.high>>>S-32,0,this.unsigned)},C.shru=C.shiftRightUnsigned,C.shr_u=C.shiftRightUnsigned,C.rotateLeft=function(S){var x;return n(S)&&(S=S.toInt()),(S&=63)===0?this:S===32?u(this.high,this.low,this.unsigned):S<32?(x=32-S,u(this.low<<S|this.high>>>x,this.high<<S|this.low>>>x,this.unsigned)):(S-=32,x=32-S,u(this.high<<S|this.low>>>x,this.low<<S|this.high>>>x,this.unsigned))},C.rotl=C.rotateLeft,C.rotateRight=function(S){var x;return n(S)&&(S=S.toInt()),(S&=63)===0?this:S===32?u(this.high,this.low,this.unsigned):S<32?(x=32-S,u(this.high<<x|this.low>>>S,this.low<<x|this.high>>>S,this.unsigned)):(S-=32,x=32-S,u(this.low<<x|this.high>>>S,this.high<<x|this.low>>>S,this.unsigned))},C.rotr=C.rotateRight,C.toSigned=function(){return this.unsigned?u(this.low,this.high,false):this},C.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,true)},C.toBytes=function(S){return S?this.toBytesLE():this.toBytesBE()},C.toBytesLE=function(){var S=this.high,x=this.low;return [x&255,x>>>8&255,x>>>16&255,x>>>24,S&255,S>>>8&255,S>>>16&255,S>>>24]},C.toBytesBE=function(){var S=this.high,x=this.low;return [S>>>24,S>>>16&255,S>>>8&255,S&255,x>>>24,x>>>16&255,x>>>8&255,x&255]},r.fromBytes=function(S,x,ce){return ce?r.fromBytesLE(S,x):r.fromBytesBE(S,x)},r.fromBytesLE=function(S,x){return new r(S[0]|S[1]<<8|S[2]<<16|S[3]<<24,S[4]|S[5]<<8|S[6]<<16|S[7]<<24,x)},r.fromBytesBE=function(S,x){return new r(S[4]<<24|S[5]<<16|S[6]<<8|S[7],S[0]<<24|S[1]<<16|S[2]<<8|S[3],x)},typeof BigInt=="function"&&(r.fromBigInt=function(S,x){var ce=Number(BigInt.asIntN(32,S)),W=Number(BigInt.asIntN(32,S>>BigInt(32)));return u(ce,W,x)},r.fromValue=function(S,x){return typeof S=="bigint"?r.fromBigInt(S,x):p(S,x)},C.toBigInt=function(){var S=BigInt(this.low>>>0),x=BigInt(this.unsigned?this.high>>>0:this.high);return x<<BigInt(32)|S});t.default=r;});});var f5=f(Kt=>{Object.defineProperty(Kt,"__esModule",{value:true});Kt.loadFileDescriptorSetFromObject=Kt.loadFileDescriptorSetFromBuffer=Kt.fromJSON=Kt.loadSync=Kt.load=Kt.IdempotencyLevel=Kt.isAnyExtension=Kt.Long=void 0;var IUe=G6(),Wi=Eg(),PM=J8(),bM=o5(),xUe=s5();Kt.Long=xUe;function LUe(t){return "@type"in t&&typeof t["@type"]=="string"}Kt.isAnyExtension=LUe;var u5;(function(t){t.IDEMPOTENCY_UNKNOWN="IDEMPOTENCY_UNKNOWN",t.NO_SIDE_EFFECTS="NO_SIDE_EFFECTS",t.IDEMPOTENT="IDEMPOTENT";})(u5=Kt.IdempotencyLevel||(Kt.IdempotencyLevel={}));var l5={longs:String,enums:String,bytes:String,defaults:true,oneofs:true,json:true};function DUe(t,e){return t===""?e:t+"."+e}function wUe(t){return t instanceof Wi.Service||t instanceof Wi.Type||t instanceof Wi.Enum}function UUe(t){return t instanceof Wi.Namespace||t instanceof Wi.Root}function d5(t,e){let r=DUe(e,t.name);return wUe(t)?[[r,t]]:UUe(t)&&typeof t.nested<"u"?Object.keys(t.nested).map(n=>d5(t.nested[n],r)).reduce((n,s)=>n.concat(s),[]):[]}function a5(t,e){return function(n){return t.toObject(t.decode(n),e)}}function c5(t){return function(r){if(Array.isArray(r))throw new Error(`Failed to serialize message: expected object with ${t.name} structure, got array instead`);let n=t.fromObject(r);return t.encode(n).finish()}}function kUe(t){return (t||[]).reduce((e,r)=>{for(let[n,s]of Object.entries(r))switch(n){case "uninterpreted_option":e.uninterpreted_option.push(r.uninterpreted_option);break;default:e[n]=s;}return e},{deprecated:false,idempotency_level:u5.IDEMPOTENCY_UNKNOWN,uninterpreted_option:[]})}function VUe(t,e,r,n){let s=t.resolvedRequestType,a=t.resolvedResponseType;return {path:"/"+e+"/"+t.name,requestStream:!!t.requestStream,responseStream:!!t.responseStream,requestSerialize:c5(s),requestDeserialize:a5(s,r),responseSerialize:c5(a),responseDeserialize:a5(a,r),originalName:IUe(t.name),requestType:CM(s,n),responseType:CM(a,n),options:kUe(t.parsedOptions)}}function BUe(t,e,r,n){let s={};for(let a of t.methodsArray)s[a.name]=VUe(a,e,r,n);return s}function CM(t,e){let r=t.toDescriptor("proto3");return {format:"Protocol Buffer 3 DescriptorProto",type:r.$type.toObject(r,l5),fileDescriptorProtos:e}}function FUe(t,e){let r=t.toDescriptor("proto3");return {format:"Protocol Buffer 3 EnumDescriptorProto",type:r.$type.toObject(r,l5),fileDescriptorProtos:e}}function qUe(t,e,r,n){if(t instanceof Wi.Service)return BUe(t,e,r,n);if(t instanceof Wi.Type)return CM(t,n);if(t instanceof Wi.Enum)return FUe(t,n);throw new Error("Type mismatch in reflection object handling")}function gg(t,e){let r={};t.resolveAll();let s=t.toDescriptor("proto3").file.map(a=>Buffer.from(PM.FileDescriptorProto.encode(a).finish()));for(let[a,o]of d5(t,""))r[a]=qUe(o,a,e,s);return r}function p5(t,e){e=e||{};let r=Wi.Root.fromDescriptor(t);return r.resolveAll(),gg(r,e)}function HUe(t,e){return (0, bM.loadProtosWithOptions)(t,e).then(r=>gg(r,e))}Kt.load=HUe;function GUe(t,e){let r=(0, bM.loadProtosWithOptionsSync)(t,e);return gg(r,e)}Kt.loadSync=GUe;function jUe(t,e){e=e||{};let r=Wi.Root.fromJSON(t);return r.resolveAll(),gg(r,e)}Kt.fromJSON=jUe;function zUe(t,e){let r=PM.FileDescriptorSet.decode(t);return p5(r,e)}Kt.loadFileDescriptorSetFromBuffer=zUe;function YUe(t,e){let r=PM.FileDescriptorSet.fromObject(t);return p5(r,e)}Kt.loadFileDescriptorSetFromObject=YUe;(0, bM.addCommonProtos)();});var $a=f(lt=>{Object.defineProperty(lt,"__esModule",{value:true});lt.registerChannelzSocket=lt.registerChannelzServer=lt.registerChannelzSubchannel=lt.registerChannelzChannel=lt.ChannelzCallTrackerStub=lt.ChannelzCallTracker=lt.ChannelzChildrenTrackerStub=lt.ChannelzChildrenTracker=lt.ChannelzTrace=lt.ChannelzTraceStub=void 0;lt.unregisterChannelzRef=QUe;lt.getChannelzHandlers=y5;lt.getChannelzServiceDefinition=A5;lt.setup=c1e;var Ag=P("net"),Ya=(d6(),A(l6)),oh=Bn(),sh=Ie(),$Ue=Fn(),KUe=YS(),WUe=qb();function MM(t){return {channel_id:t.id,name:t.name}}function wM(t){return {subchannel_id:t.id,name:t.name}}function XUe(t){return {server_id:t.id}}function Og(t){return {socket_id:t.id,name:t.name}}var h5=32,UM=100,IM=class{constructor(){this.events=[],this.creationTimestamp=new Date,this.eventsLogged=0;}addTrace(){}getTraceMessage(){return {creation_timestamp:Xi(this.creationTimestamp),num_events_logged:this.eventsLogged,events:[]}}};lt.ChannelzTraceStub=IM;var xM=class{constructor(){this.events=[],this.eventsLogged=0,this.creationTimestamp=new Date;}addTrace(e,r,n){let s=new Date;this.events.push({description:r,severity:e,timestamp:s,childChannel:n?.kind==="channel"?n:void 0,childSubchannel:n?.kind==="subchannel"?n:void 0}),this.events.length>=h5*2&&(this.events=this.events.slice(h5)),this.eventsLogged+=1;}getTraceMessage(){return {creation_timestamp:Xi(this.creationTimestamp),num_events_logged:this.eventsLogged,events:this.events.map(e=>({description:e.description,severity:e.severity,timestamp:Xi(e.timestamp),channel_ref:e.childChannel?MM(e.childChannel):null,subchannel_ref:e.childSubchannel?wM(e.childSubchannel):null}))}}};lt.ChannelzTrace=xM;var Rg=class{constructor(){this.channelChildren=new Ya.OrderedMap,this.subchannelChildren=new Ya.OrderedMap,this.socketChildren=new Ya.OrderedMap,this.trackerMap={channel:this.channelChildren,subchannel:this.subchannelChildren,socket:this.socketChildren};}refChild(e){let r=this.trackerMap[e.kind],n=r.find(e.id);n.equals(r.end())?r.setElement(e.id,{ref:e,count:1},n):n.pointer[1].count+=1;}unrefChild(e){let r=this.trackerMap[e.kind],n=r.getElementByKey(e.id);n!==void 0&&(n.count-=1,n.count===0&&r.eraseElementByKey(e.id));}getChildLists(){return {channels:this.channelChildren,subchannels:this.subchannelChildren,sockets:this.socketChildren}}};lt.ChannelzChildrenTracker=Rg;var LM=class extends Rg{refChild(){}unrefChild(){}};lt.ChannelzChildrenTrackerStub=LM;var vg=class{constructor(){this.callsStarted=0,this.callsSucceeded=0,this.callsFailed=0,this.lastCallStartedTimestamp=null;}addCallStarted(){this.callsStarted+=1,this.lastCallStartedTimestamp=new Date;}addCallSucceeded(){this.callsSucceeded+=1;}addCallFailed(){this.callsFailed+=1;}};lt.ChannelzCallTracker=vg;var DM=class extends vg{addCallStarted(){}addCallSucceeded(){}addCallFailed(){}};lt.ChannelzCallTrackerStub=DM;var wo={channel:new Ya.OrderedMap,subchannel:new Ya.OrderedMap,server:new Ya.OrderedMap,socket:new Ya.OrderedMap},Ng=t=>{let e=1;function r(){return e++}let n=wo[t];return (s,a,o)=>{let i=r(),c={id:i,name:s,kind:t};return o&&n.setElement(i,{ref:c,getInfo:a}),c}};lt.registerChannelzChannel=Ng("channel");lt.registerChannelzSubchannel=Ng("subchannel");lt.registerChannelzServer=Ng("server");lt.registerChannelzSocket=Ng("socket");function QUe(t){wo[t.kind].eraseElementByKey(t.id);}function JUe(t){let e=Number.parseInt(t,16);return [e/256|0,e%256]}function _5(t){if(t==="")return [];let e=t.split(":").map(n=>JUe(n));return [].concat(...e)}function ZUe(t){return (0, Ag.isIPv6)(t)&&t.toLowerCase().startsWith("::ffff:")&&(0, Ag.isIPv4)(t.substring(7))}function m5(t){return Buffer.from(Uint8Array.from(t.split(".").map(e=>Number.parseInt(e))))}function e1e(t){if((0, Ag.isIPv4)(t))return m5(t);if(ZUe(t))return m5(t.substring(7));if((0, Ag.isIPv6)(t)){let e,r,n=t.indexOf("::");n===-1?(e=t,r=""):(e=t.substring(0,n),r=t.substring(n+2));let s=Buffer.from(_5(e)),a=Buffer.from(_5(r)),o=Buffer.alloc(16-s.length-a.length,0);return Buffer.concat([s,o,a])}else return null}function T5(t){switch(t){case oh.ConnectivityState.CONNECTING:return {state:"CONNECTING"};case oh.ConnectivityState.IDLE:return {state:"IDLE"};case oh.ConnectivityState.READY:return {state:"READY"};case oh.ConnectivityState.SHUTDOWN:return {state:"SHUTDOWN"};case oh.ConnectivityState.TRANSIENT_FAILURE:return {state:"TRANSIENT_FAILURE"};default:return {state:"UNKNOWN"}}}function Xi(t){if(!t)return null;let e=t.getTime();return {seconds:e/1e3|0,nanos:e%1e3*1e6}}function S5(t){let e=t.getInfo(),r=[],n=[];return e.children.channels.forEach(s=>{r.push(MM(s[1].ref));}),e.children.subchannels.forEach(s=>{n.push(wM(s[1].ref));}),{ref:MM(t.ref),data:{target:e.target,state:T5(e.state),calls_started:e.callTracker.callsStarted,calls_succeeded:e.callTracker.callsSucceeded,calls_failed:e.callTracker.callsFailed,last_call_started_timestamp:Xi(e.callTracker.lastCallStartedTimestamp),trace:e.trace.getTraceMessage()},channel_ref:r,subchannel_ref:n}}function t1e(t,e){let r=parseInt(t.request.channel_id,10),n=wo.channel.getElementByKey(r);if(n===void 0){e({code:sh.Status.NOT_FOUND,details:"No channel data found for id "+r});return}e(null,{channel:S5(n)});}function r1e(t,e){let r=parseInt(t.request.max_results,10)||UM,n=[],s=parseInt(t.request.start_channel_id,10),a=wo.channel,o;for(o=a.lowerBound(s);!o.equals(a.end())&&n.length<r;o=o.next())n.push(S5(o.pointer[1]));e(null,{channel:n,end:o.equals(a.end())});}function g5(t){let e=t.getInfo(),r=[];return e.listenerChildren.sockets.forEach(n=>{r.push(Og(n[1].ref));}),{ref:XUe(t.ref),data:{calls_started:e.callTracker.callsStarted,calls_succeeded:e.callTracker.callsSucceeded,calls_failed:e.callTracker.callsFailed,last_call_started_timestamp:Xi(e.callTracker.lastCallStartedTimestamp),trace:e.trace.getTraceMessage()},listen_socket:r}}function n1e(t,e){let r=parseInt(t.request.server_id,10),s=wo.server.getElementByKey(r);if(s===void 0){e({code:sh.Status.NOT_FOUND,details:"No server data found for id "+r});return}e(null,{server:g5(s)});}function i1e(t,e){let r=parseInt(t.request.max_results,10)||UM,n=parseInt(t.request.start_server_id,10),s=wo.server,a=[],o;for(o=s.lowerBound(n);!o.equals(s.end())&&a.length<r;o=o.next())a.push(g5(o.pointer[1]));e(null,{server:a,end:o.equals(s.end())});}function o1e(t,e){let r=parseInt(t.request.subchannel_id,10),n=wo.subchannel.getElementByKey(r);if(n===void 0){e({code:sh.Status.NOT_FOUND,details:"No subchannel data found for id "+r});return}let s=n.getInfo(),a=[];s.children.sockets.forEach(i=>{a.push(Og(i[1].ref));});let o={ref:wM(n.ref),data:{target:s.target,state:T5(s.state),calls_started:s.callTracker.callsStarted,calls_succeeded:s.callTracker.callsSucceeded,calls_failed:s.callTracker.callsFailed,last_call_started_timestamp:Xi(s.callTracker.lastCallStartedTimestamp),trace:s.trace.getTraceMessage()},socket_ref:a};e(null,{subchannel:o});}function E5(t){var e;return (0, $Ue.isTcpSubchannelAddress)(t)?{address:"tcpip_address",tcpip_address:{ip_address:(e=e1e(t.host))!==null&&e!==void 0?e:void 0,port:t.port}}:{address:"uds_address",uds_address:{filename:t.path}}}function s1e(t,e){var r,n,s,a,o;let i=parseInt(t.request.socket_id,10),c=wo.socket.getElementByKey(i);if(c===void 0){e({code:sh.Status.NOT_FOUND,details:"No socket data found for id "+i});return}let u=c.getInfo(),l=u.security?{model:"tls",tls:{cipher_suite:u.security.cipherSuiteStandardName?"standard_name":"other_name",standard_name:(r=u.security.cipherSuiteStandardName)!==null&&r!==void 0?r:void 0,other_name:(n=u.security.cipherSuiteOtherName)!==null&&n!==void 0?n:void 0,local_certificate:(s=u.security.localCertificate)!==null&&s!==void 0?s:void 0,remote_certificate:(a=u.security.remoteCertificate)!==null&&a!==void 0?a:void 0}}:null,d={ref:Og(c.ref),local:u.localAddress?E5(u.localAddress):null,remote:u.remoteAddress?E5(u.remoteAddress):null,remote_name:(o=u.remoteName)!==null&&o!==void 0?o:void 0,security:l,data:{keep_alives_sent:u.keepAlivesSent,streams_started:u.streamsStarted,streams_succeeded:u.streamsSucceeded,streams_failed:u.streamsFailed,last_local_stream_created_timestamp:Xi(u.lastLocalStreamCreatedTimestamp),last_remote_stream_created_timestamp:Xi(u.lastRemoteStreamCreatedTimestamp),messages_received:u.messagesReceived,messages_sent:u.messagesSent,last_message_received_timestamp:Xi(u.lastMessageReceivedTimestamp),last_message_sent_timestamp:Xi(u.lastMessageSentTimestamp),local_flow_control_window:u.localFlowControlWindow?{value:u.localFlowControlWindow}:null,remote_flow_control_window:u.remoteFlowControlWindow?{value:u.remoteFlowControlWindow}:null}};e(null,{socket:d});}function a1e(t,e){let r=parseInt(t.request.server_id,10),n=wo.server.getElementByKey(r);if(n===void 0){e({code:sh.Status.NOT_FOUND,details:"No server data found for id "+r});return}let s=parseInt(t.request.start_socket_id,10),a=parseInt(t.request.max_results,10)||UM,i=n.getInfo().sessionChildren.sockets,c=[],u;for(u=i.lowerBound(s);!u.equals(i.end())&&c.length<a;u=u.next())c.push(Og(u.pointer[1].ref));e(null,{socket_ref:c,end:u.equals(i.end())});}function y5(){return {GetChannel:t1e,GetTopChannels:r1e,GetServer:n1e,GetServers:i1e,GetSubchannel:o1e,GetSocket:s1e,GetServerSockets:a1e}}var yg=null;function A5(){if(yg)return yg;let t=f5().loadSync,e=t("channelz.proto",{keepCase:true,longs:String,enums:String,defaults:true,oneofs:true,includeDirs:[`${__dirname}/../../proto`]});return yg=(0, WUe.loadPackageDefinition)(e).grpc.channelz.v1.Channelz.service,yg}function c1e(){(0, KUe.registerAdminService)(A5,y5);}});var R5=f(Pg=>{Object.defineProperty(Pg,"__esModule",{value:true});Pg.Subchannel=void 0;var tt=Bn(),u1e=Uf(),kM=ut(),Cg=Ie(),l1e=nn(),d1e=Fn(),Qi=$a(),p1e="subchannel",f1e=2147483647,VM=class{constructor(e,r,n,s,a){var o;this.channelTarget=e,this.subchannelAddress=r,this.options=n,this.connector=a,this.connectivityState=tt.ConnectivityState.IDLE,this.transport=null,this.continueConnecting=false,this.stateListeners=new Set,this.refcount=0,this.channelzEnabled=true;let i={initialDelay:n["grpc.initial_reconnect_backoff_ms"],maxDelay:n["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new u1e.BackoffTimeout(()=>{this.handleBackoffTimer();},i),this.backoffTimeout.unref(),this.subchannelAddressString=(0, d1e.subchannelAddressToString)(r),this.keepaliveTime=(o=n["grpc.keepalive_time_ms"])!==null&&o!==void 0?o:-1,n["grpc.enable_channelz"]===0?(this.channelzEnabled=false,this.channelzTrace=new Qi.ChannelzTraceStub,this.callTracker=new Qi.ChannelzCallTrackerStub,this.childrenTracker=new Qi.ChannelzChildrenTrackerStub,this.streamTracker=new Qi.ChannelzCallTrackerStub):(this.channelzTrace=new Qi.ChannelzTrace,this.callTracker=new Qi.ChannelzCallTracker,this.childrenTracker=new Qi.ChannelzChildrenTracker,this.streamTracker=new Qi.ChannelzCallTracker),this.channelzRef=(0, Qi.registerChannelzSubchannel)(this.subchannelAddressString,()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzTrace.addTrace("CT_INFO","Subchannel created"),this.trace("Subchannel constructed with options "+JSON.stringify(n,void 0,2)),this.secureConnector=s._createSecureConnector(e,n);}getChannelzInfo(){return {state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists(),target:this.subchannelAddressString}}trace(e){kM.trace(Cg.LogVerbosity.DEBUG,p1e,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e);}refTrace(e){kM.trace(Cg.LogVerbosity.DEBUG,"subchannel_refcount","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e);}handleBackoffTimer(){this.continueConnecting?this.transitionToState([tt.ConnectivityState.TRANSIENT_FAILURE],tt.ConnectivityState.CONNECTING):this.transitionToState([tt.ConnectivityState.TRANSIENT_FAILURE],tt.ConnectivityState.IDLE);}startBackoff(){this.backoffTimeout.runOnce();}stopBackoff(){this.backoffTimeout.stop(),this.backoffTimeout.reset();}startConnectingInternal(){let e=this.options;if(e["grpc.keepalive_time_ms"]){let r=Math.min(this.keepaliveTime,f1e);e=Object.assign(Object.assign({},e),{"grpc.keepalive_time_ms":r});}this.connector.connect(this.subchannelAddress,this.secureConnector,e).then(r=>{this.transitionToState([tt.ConnectivityState.CONNECTING],tt.ConnectivityState.READY)?(this.transport=r,this.channelzEnabled&&this.childrenTracker.refChild(r.getChannelzRef()),r.addDisconnectListener(n=>{this.transitionToState([tt.ConnectivityState.READY],tt.ConnectivityState.IDLE),n&&this.keepaliveTime>0&&(this.keepaliveTime*=2,kM.log(Cg.LogVerbosity.ERROR,`Connection to ${(0, l1e.uriToString)(this.channelTarget)} at ${this.subchannelAddressString} rejected by server because of excess pings. Increasing ping interval to ${this.keepaliveTime} ms`));})):r.shutdown();},r=>{this.transitionToState([tt.ConnectivityState.CONNECTING],tt.ConnectivityState.TRANSIENT_FAILURE,`${r}`);});}transitionToState(e,r,n){var s,a;if(e.indexOf(this.connectivityState)===-1)return  false;n?this.trace(tt.ConnectivityState[this.connectivityState]+" -> "+tt.ConnectivityState[r]+' with error "'+n+'"'):this.trace(tt.ConnectivityState[this.connectivityState]+" -> "+tt.ConnectivityState[r]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connectivity state change to "+tt.ConnectivityState[r]);let o=this.connectivityState;switch(this.connectivityState=r,r){case tt.ConnectivityState.READY:this.stopBackoff();break;case tt.ConnectivityState.CONNECTING:this.startBackoff(),this.startConnectingInternal(),this.continueConnecting=false;break;case tt.ConnectivityState.TRANSIENT_FAILURE:this.channelzEnabled&&this.transport&&this.childrenTracker.unrefChild(this.transport.getChannelzRef()),(s=this.transport)===null||s===void 0||s.shutdown(),this.transport=null,this.backoffTimeout.isRunning()||process.nextTick(()=>{this.handleBackoffTimer();});break;case tt.ConnectivityState.IDLE:this.channelzEnabled&&this.transport&&this.childrenTracker.unrefChild(this.transport.getChannelzRef()),(a=this.transport)===null||a===void 0||a.shutdown(),this.transport=null;break;default:throw new Error(`Invalid state: unknown ConnectivityState ${r}`)}for(let i of this.stateListeners)i(this,o,r,this.keepaliveTime,n);return  true}ref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount+1)),this.refcount+=1;}unref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount-1)),this.refcount-=1,this.refcount===0&&(this.channelzTrace.addTrace("CT_INFO","Shutting down"),(0, Qi.unregisterChannelzRef)(this.channelzRef),this.secureConnector.destroy(),process.nextTick(()=>{this.transitionToState([tt.ConnectivityState.CONNECTING,tt.ConnectivityState.READY],tt.ConnectivityState.IDLE);}));}unrefIfOneRef(){return this.refcount===1?(this.unref(),true):false}createCall(e,r,n,s){if(!this.transport)throw new Error("Cannot create call, subchannel not READY");let a;return this.channelzEnabled?(this.callTracker.addCallStarted(),this.streamTracker.addCallStarted(),a={onCallEnd:o=>{o.code===Cg.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed();}}):a={},this.transport.createCall(e,r,n,s,a)}startConnecting(){process.nextTick(()=>{this.transitionToState([tt.ConnectivityState.IDLE],tt.ConnectivityState.CONNECTING)||this.connectivityState===tt.ConnectivityState.TRANSIENT_FAILURE&&(this.continueConnecting=true);});}getConnectivityState(){return this.connectivityState}addConnectivityStateListener(e){this.stateListeners.add(e);}removeConnectivityStateListener(e){this.stateListeners.delete(e);}resetBackoff(){process.nextTick(()=>{this.backoffTimeout.reset(),this.transitionToState([tt.ConnectivityState.TRANSIENT_FAILURE],tt.ConnectivityState.CONNECTING);});}getAddress(){return this.subchannelAddressString}getChannelzRef(){return this.channelzRef}isHealthy(){return  true}addHealthStateWatcher(e){}removeHealthStateWatcher(e){}getRealSubchannel(){return this}realSubchannelEquals(e){return e.getRealSubchannel()===this}throttleKeepalive(e){e>this.keepaliveTime&&(this.keepaliveTime=e);}getCallCredentials(){return this.secureConnector.getCallCredentials()}};Pg.Subchannel=VM;});var v5=f(bg=>{var BM;Object.defineProperty(bg,"__esModule",{value:true});bg.GRPC_NODE_USE_ALTERNATIVE_RESOLVER=void 0;bg.GRPC_NODE_USE_ALTERNATIVE_RESOLVER=((BM=process.env.GRPC_NODE_USE_ALTERNATIVE_RESOLVER)!==null&&BM!==void 0?BM:"false")==="true";});var jM=f(Ka=>{Object.defineProperty(Ka,"__esModule",{value:true});Ka.DEFAULT_PORT=void 0;Ka.setup=g1e;var O5=qi(),FM=P("dns"),h1e=_b(),qM=Ie(),HM=Nr(),_1e=ut(),m1e=Ie(),Is=nn(),N5=P("net"),E1e=Uf(),C5=v5(),T1e="dns_resolver";function Ji(t){_1e.trace(m1e.LogVerbosity.DEBUG,T1e,t);}Ka.DEFAULT_PORT=443;var S1e=3e4,GM=class{constructor(e,r,n){var s,a,o;this.target=e,this.listener=r,this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfig=null,this.latestServiceConfigError=null,this.continueResolving=false,this.isNextResolutionTimerRunning=false,this.isServiceConfigEnabled=true,this.returnedIpResult=false,this.alternativeResolver=new FM.promises.Resolver,Ji("Resolver constructed for target "+(0, Is.uriToString)(e)),e.authority&&this.alternativeResolver.setServers([e.authority]);let i=(0, Is.splitHostPort)(e.path);i===null?(this.ipResult=null,this.dnsHostname=null,this.port=null):(0, N5.isIPv4)(i.host)||(0, N5.isIPv6)(i.host)?(this.ipResult=[{addresses:[{host:i.host,port:(s=i.port)!==null&&s!==void 0?s:Ka.DEFAULT_PORT}]}],this.dnsHostname=null,this.port=null):(this.ipResult=null,this.dnsHostname=i.host,this.port=(a=i.port)!==null&&a!==void 0?a:Ka.DEFAULT_PORT),this.percentage=Math.random()*100,n["grpc.service_config_disable_resolution"]===1&&(this.isServiceConfigEnabled=false),this.defaultResolutionError={code:qM.Status.UNAVAILABLE,details:`Name resolution failed for target ${(0, Is.uriToString)(this.target)}`,metadata:new HM.Metadata};let c={initialDelay:n["grpc.initial_reconnect_backoff_ms"],maxDelay:n["grpc.max_reconnect_backoff_ms"]};this.backoff=new E1e.BackoffTimeout(()=>{this.continueResolving&&this.startResolutionWithBackoff();},c),this.backoff.unref(),this.minTimeBetweenResolutionsMs=(o=n["grpc.dns_min_time_between_resolutions_ms"])!==null&&o!==void 0?o:S1e,this.nextResolutionTimer=setTimeout(()=>{},0),clearTimeout(this.nextResolutionTimer);}startResolution(){if(this.ipResult!==null){this.returnedIpResult||(Ji("Returning IP address for target "+(0, Is.uriToString)(this.target)),setImmediate(()=>{this.listener.onSuccessfulResolution(this.ipResult,null,null,null,{});}),this.returnedIpResult=true),this.backoff.stop(),this.backoff.reset(),this.stopNextResolutionTimer();return}if(this.dnsHostname===null)Ji("Failed to parse DNS address "+(0, Is.uriToString)(this.target)),setImmediate(()=>{this.listener.onError({code:qM.Status.UNAVAILABLE,details:`Failed to parse DNS address ${(0, Is.uriToString)(this.target)}`,metadata:new HM.Metadata});}),this.stopNextResolutionTimer();else {if(this.pendingLookupPromise!==null)return;Ji("Looking up DNS hostname "+this.dnsHostname),this.latestLookupResult=null;let e=this.dnsHostname;this.pendingLookupPromise=this.lookup(e),this.pendingLookupPromise.then(r=>{if(this.pendingLookupPromise===null)return;this.pendingLookupPromise=null,this.backoff.reset(),this.backoff.stop(),this.latestLookupResult=r.map(s=>({addresses:[s]}));let n="["+r.map(s=>s.host+":"+s.port).join(",")+"]";if(Ji("Resolved addresses for target "+(0, Is.uriToString)(this.target)+": "+n),this.latestLookupResult.length===0){this.listener.onError(this.defaultResolutionError);return}this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{});},r=>{this.pendingLookupPromise!==null&&(Ji("Resolution error for target "+(0, Is.uriToString)(this.target)+": "+r.message),this.pendingLookupPromise=null,this.stopNextResolutionTimer(),this.listener.onError(this.defaultResolutionError));}),this.isServiceConfigEnabled&&this.pendingTxtPromise===null&&(this.pendingTxtPromise=this.resolveTxt(e),this.pendingTxtPromise.then(r=>{if(this.pendingTxtPromise!==null){this.pendingTxtPromise=null;try{this.latestServiceConfig=(0,h1e.extractAndSelectServiceConfig)(r,this.percentage);}catch(n){this.latestServiceConfigError={code:qM.Status.UNAVAILABLE,details:`Parsing service config failed with error ${n.message}`,metadata:new HM.Metadata};}this.latestLookupResult!==null&&this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{});}},r=>{}));}}async lookup(e){if(C5.GRPC_NODE_USE_ALTERNATIVE_RESOLVER){Ji("Using alternative DNS resolver.");let n=await Promise.allSettled([this.alternativeResolver.resolve4(e),this.alternativeResolver.resolve6(e)]);if(n.every(s=>s.status==="rejected"))throw new Error(n[0].reason);return n.reduce((s,a)=>a.status==="fulfilled"?[...s,...a.value]:s,[]).map(s=>({host:s,port:+this.port}))}return (await FM.promises.lookup(e,{all:true})).map(n=>({host:n.address,port:+this.port}))}async resolveTxt(e){return C5.GRPC_NODE_USE_ALTERNATIVE_RESOLVER?(Ji("Using alternative DNS resolver."),this.alternativeResolver.resolveTxt(e)):FM.promises.resolveTxt(e)}startNextResolutionTimer(){var e,r;clearTimeout(this.nextResolutionTimer),this.nextResolutionTimer=setTimeout(()=>{this.stopNextResolutionTimer(),this.continueResolving&&this.startResolutionWithBackoff();},this.minTimeBetweenResolutionsMs),(r=(e=this.nextResolutionTimer).unref)===null||r===void 0||r.call(e),this.isNextResolutionTimerRunning=true;}stopNextResolutionTimer(){clearTimeout(this.nextResolutionTimer),this.isNextResolutionTimerRunning=false;}startResolutionWithBackoff(){this.pendingLookupPromise===null&&(this.continueResolving=false,this.backoff.runOnce(),this.startNextResolutionTimer(),this.startResolution());}updateResolution(){this.pendingLookupPromise===null&&(this.isNextResolutionTimerRunning||this.backoff.isRunning()?(this.isNextResolutionTimerRunning?Ji('resolution update delayed by "min time between resolutions" rate limit'):Ji("resolution update delayed by backoff timer until "+this.backoff.getEndTime().toISOString()),this.continueResolving=true):this.startResolutionWithBackoff());}destroy(){this.continueResolving=false,this.backoff.reset(),this.backoff.stop(),this.stopNextResolutionTimer(),this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfig=null,this.latestServiceConfigError=null,this.returnedIpResult=false;}static getDefaultAuthority(e){return e.path}};function g1e(){(0, O5.registerResolver)("dns",GM),(0, O5.registerDefaultScheme)("dns");}});var zM=f(uh=>{Object.defineProperty(uh,"__esModule",{value:true});uh.parseCIDR=M5;uh.mapProxyName=M1e;uh.getProxiedConnection=I1e;var ah=ut(),nl=Ie(),b5=P("net"),y1e=P("http"),A1e=ut(),P5=Fn(),ch=nn(),R1e=P("url"),v1e=jM(),O1e="proxy";function il(t){A1e.trace(nl.LogVerbosity.DEBUG,O1e,t);}function N1e(){let t="",e="";if(process.env.grpc_proxy)e="grpc_proxy",t=process.env.grpc_proxy;else if(process.env.https_proxy)e="https_proxy",t=process.env.https_proxy;else if(process.env.http_proxy)e="http_proxy",t=process.env.http_proxy;else return {};let r;try{r=new R1e.URL(t);}catch{return (0, ah.log)(nl.LogVerbosity.ERROR,`cannot parse value of "${e}" env var`),{}}if(r.protocol!=="http:")return (0, ah.log)(nl.LogVerbosity.ERROR,`"${r.protocol}" scheme not supported in proxy URI`),{};let n=null;r.username&&(r.password?((0, ah.log)(nl.LogVerbosity.INFO,"userinfo found in proxy URI"),n=decodeURIComponent(`${r.username}:${r.password}`)):n=r.username);let s=r.hostname,a=r.port;a===""&&(a="80");let o={address:`${s}:${a}`};return n&&(o.creds=n),il("Proxy server "+o.address+" set by environment variable "+e),o}function C1e(){let t=process.env.no_grpc_proxy,e="no_grpc_proxy";return t||(t=process.env.no_proxy,e="no_proxy"),t?(il("No proxy server list set by environment variable "+e),t.split(",")):[]}function M5(t){let e=t.split("/");if(e.length!==2)return null;let r=parseInt(e[1],10);return !(0, b5.isIPv4)(e[0])||Number.isNaN(r)||r<0||r>32?null:{ip:I5(e[0]),prefixLength:r}}function I5(t){return t.split(".").reduce((e,r)=>(e<<8)+parseInt(r,10),0)}function P1e(t,e){let r=t.ip,n=-1<<32-t.prefixLength;return (I5(e)&n)===(r&n)}function b1e(t){for(let e of C1e()){let r=M5(e);if((0, b5.isIPv4)(t)&&r&&P1e(r,t))return  true;if(t.endsWith(e))return  true}return  false}function M1e(t,e){var r;let n={target:t,extraOptions:{}};if(((r=e["grpc.enable_http_proxy"])!==null&&r!==void 0?r:1)===0||t.scheme==="unix")return n;let s=N1e();if(!s.address)return n;let a=(0, ch.splitHostPort)(t.path);if(!a)return n;let o=a.host;if(b1e(o))return il("Not using proxy for target in no_proxy list: "+(0, ch.uriToString)(t)),n;let i={"grpc.http_connect_target":(0, ch.uriToString)(t)};return s.creds&&(i["grpc.http_connect_creds"]=s.creds),{target:{scheme:"dns",path:s.address},extraOptions:i}}function I1e(t,e){var r;if(!("grpc.http_connect_target"in e))return Promise.resolve(null);let n=e["grpc.http_connect_target"],s=(0, ch.parseUri)(n);if(s===null)return Promise.resolve(null);let a=(0, ch.splitHostPort)(s.path);if(a===null)return Promise.resolve(null);let o=`${a.host}:${(r=a.port)!==null&&r!==void 0?r:v1e.DEFAULT_PORT}`,i={method:"CONNECT",path:o},c={Host:o};(0, P5.isTcpSubchannelAddress)(t)?(i.host=t.host,i.port=t.port):i.socketPath=t.path,"grpc.http_connect_creds"in e&&(c["Proxy-Authorization"]="Basic "+Buffer.from(e["grpc.http_connect_creds"]).toString("base64")),i.headers=c;let u=(0, P5.subchannelAddressToString)(t);return il("Using proxy "+u+" to connect to "+i.path),new Promise((l,d)=>{let p=y1e.request(i);p.once("connect",(h,T,g)=>{p.removeAllListeners(),T.removeAllListeners(),h.statusCode===200?(il("Successfully connected to "+i.path+" through proxy "+u),g.length>0&&T.unshift(g),il("Successfully established a plaintext connection to "+i.path+" through proxy "+u),l(T)):((0, ah.log)(nl.LogVerbosity.ERROR,"Failed to connect to "+i.path+" through proxy "+u+" with status "+h.statusCode),d());}),p.once("error",h=>{p.removeAllListeners(),(0, ah.log)(nl.LogVerbosity.ERROR,"Failed to connect to proxy "+u+" with error "+h.message),d();}),p.end();})}});var $M=f(Mg=>{Object.defineProperty(Mg,"__esModule",{value:true});Mg.StreamDecoder=void 0;var Zi;(function(t){t[t.NO_DATA=0]="NO_DATA",t[t.READING_SIZE=1]="READING_SIZE",t[t.READING_MESSAGE=2]="READING_MESSAGE";})(Zi||(Zi={}));var YM=class{constructor(e){this.maxReadMessageLength=e,this.readState=Zi.NO_DATA,this.readCompressFlag=Buffer.alloc(1),this.readPartialSize=Buffer.alloc(4),this.readSizeRemaining=4,this.readMessageSize=0,this.readPartialMessage=[],this.readMessageRemaining=0;}write(e){let r=0,n,s=[];for(;r<e.length;)switch(this.readState){case Zi.NO_DATA:this.readCompressFlag=e.slice(r,r+1),r+=1,this.readState=Zi.READING_SIZE,this.readPartialSize.fill(0),this.readSizeRemaining=4,this.readMessageSize=0,this.readMessageRemaining=0,this.readPartialMessage=[];break;case Zi.READING_SIZE:if(n=Math.min(e.length-r,this.readSizeRemaining),e.copy(this.readPartialSize,4-this.readSizeRemaining,r,r+n),this.readSizeRemaining-=n,r+=n,this.readSizeRemaining===0){if(this.readMessageSize=this.readPartialSize.readUInt32BE(0),this.maxReadMessageLength!==-1&&this.readMessageSize>this.maxReadMessageLength)throw new Error(`Received message larger than max (${this.readMessageSize} vs ${this.maxReadMessageLength})`);if(this.readMessageRemaining=this.readMessageSize,this.readMessageRemaining>0)this.readState=Zi.READING_MESSAGE;else {let a=Buffer.concat([this.readCompressFlag,this.readPartialSize],5);this.readState=Zi.NO_DATA,s.push(a);}}break;case Zi.READING_MESSAGE:if(n=Math.min(e.length-r,this.readMessageRemaining),this.readPartialMessage.push(e.slice(r,r+n)),this.readMessageRemaining-=n,r+=n,this.readMessageRemaining===0){let a=[this.readCompressFlag,this.readPartialSize].concat(this.readPartialMessage),o=Buffer.concat(a,this.readMessageSize+5);this.readState=Zi.NO_DATA,s.push(o);}break;default:throw new Error("Unexpected read state")}return s}};Mg.StreamDecoder=YM;});var x5=f(Ig=>{Object.defineProperty(Ig,"__esModule",{value:true});Ig.Http2SubchannelCall=void 0;var Uo=P("http2"),x1e=P("os"),rt=Ie(),ko=Nr(),L1e=$M(),D1e=ut(),w1e=Ie(),U1e="subchannel_call";function k1e(t){for(let[e,r]of Object.entries(x1e.constants.errno))if(r===t)return e;return "Unknown system error "+t}function KM(t){let e=`Received HTTP status code ${t}`,r;switch(t){case 400:r=rt.Status.INTERNAL;break;case 401:r=rt.Status.UNAUTHENTICATED;break;case 403:r=rt.Status.PERMISSION_DENIED;break;case 404:r=rt.Status.UNIMPLEMENTED;break;case 429:case 502:case 503:case 504:r=rt.Status.UNAVAILABLE;break;default:r=rt.Status.UNKNOWN;}return {code:r,details:e,metadata:new ko.Metadata}}var WM=class{constructor(e,r,n,s,a){var o;this.http2Stream=e,this.callEventTracker=r,this.listener=n,this.transport=s,this.callId=a,this.isReadFilterPending=false,this.isPushPending=false,this.canPush=false,this.readsClosed=false,this.statusOutput=false,this.unpushedReadMessages=[],this.finalStatus=null,this.internalError=null,this.serverEndedCall=false,this.connectionDropped=false;let i=(o=s.getOptions()["grpc.max_receive_message_length"])!==null&&o!==void 0?o:rt.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH;this.decoder=new L1e.StreamDecoder(i),e.on("response",(c,u)=>{let l="";for(let d of Object.keys(c))l+="		"+d+": "+c[d]+`
`;if(this.trace(`Received server headers:
`+l),this.httpStatusCode=c[":status"],u&Uo.constants.NGHTTP2_FLAG_END_STREAM)this.handleTrailers(c);else {let d;try{d=ko.Metadata.fromHttp2Headers(c);}catch(p){this.endCall({code:rt.Status.UNKNOWN,details:p.message,metadata:new ko.Metadata});return}this.listener.onReceiveMetadata(d);}}),e.on("trailers",c=>{this.handleTrailers(c);}),e.on("data",c=>{if(this.statusOutput)return;this.trace("receive HTTP/2 data frame of length "+c.length);let u;try{u=this.decoder.write(c);}catch(l){if(this.httpStatusCode!==void 0&&this.httpStatusCode!==200){let d=KM(this.httpStatusCode);this.cancelWithStatus(d.code,d.details);}else this.cancelWithStatus(rt.Status.RESOURCE_EXHAUSTED,l.message);return}for(let l of u)this.trace("parsed message of length "+l.length),this.callEventTracker.addMessageReceived(),this.tryPush(l);}),e.on("end",()=>{this.readsClosed=true,this.maybeOutputStatus();}),e.on("close",()=>{this.serverEndedCall=true,process.nextTick(()=>{var c;if(this.trace("HTTP/2 stream closed with code "+e.rstCode),((c=this.finalStatus)===null||c===void 0?void 0:c.code)===rt.Status.OK)return;let u,l="";switch(e.rstCode){case Uo.constants.NGHTTP2_NO_ERROR:if(this.finalStatus!==null)return;if(this.httpStatusCode&&this.httpStatusCode!==200){let d=KM(this.httpStatusCode);u=d.code,l=d.details;}else u=rt.Status.INTERNAL,l=`Received RST_STREAM with code ${e.rstCode} (Call ended without gRPC status)`;break;case Uo.constants.NGHTTP2_REFUSED_STREAM:u=rt.Status.UNAVAILABLE,l="Stream refused by server";break;case Uo.constants.NGHTTP2_CANCEL:this.connectionDropped?(u=rt.Status.UNAVAILABLE,l="Connection dropped"):(u=rt.Status.CANCELLED,l="Call cancelled");break;case Uo.constants.NGHTTP2_ENHANCE_YOUR_CALM:u=rt.Status.RESOURCE_EXHAUSTED,l="Bandwidth exhausted or memory limit exceeded";break;case Uo.constants.NGHTTP2_INADEQUATE_SECURITY:u=rt.Status.PERMISSION_DENIED,l="Protocol not secure enough";break;case Uo.constants.NGHTTP2_INTERNAL_ERROR:u=rt.Status.INTERNAL,this.internalError===null?l=`Received RST_STREAM with code ${e.rstCode} (Internal server error)`:this.internalError.code==="ECONNRESET"||this.internalError.code==="ETIMEDOUT"?(u=rt.Status.UNAVAILABLE,l=this.internalError.message):l=`Received RST_STREAM with code ${e.rstCode} triggered by internal client error: ${this.internalError.message}`;break;default:u=rt.Status.INTERNAL,l=`Received RST_STREAM with code ${e.rstCode}`;}this.endCall({code:u,details:l,metadata:new ko.Metadata,rstCode:e.rstCode});});}),e.on("error",c=>{c.code!=="ERR_HTTP2_STREAM_ERROR"&&(this.trace("Node error event: message="+c.message+" code="+c.code+" errno="+k1e(c.errno)+" syscall="+c.syscall),this.internalError=c),this.callEventTracker.onStreamEnd(false);});}getDeadlineInfo(){return [`remote_addr=${this.getPeer()}`]}onDisconnect(){this.connectionDropped=true,setImmediate(()=>{this.endCall({code:rt.Status.UNAVAILABLE,details:"Connection dropped",metadata:new ko.Metadata});});}outputStatus(){this.statusOutput||(this.statusOutput=true,this.trace("ended with status: code="+this.finalStatus.code+' details="'+this.finalStatus.details+'"'),this.callEventTracker.onCallEnd(this.finalStatus),process.nextTick(()=>{this.listener.onReceiveStatus(this.finalStatus);}),this.http2Stream.resume());}trace(e){D1e.trace(w1e.LogVerbosity.DEBUG,U1e,"["+this.callId+"] "+e);}endCall(e){(this.finalStatus===null||this.finalStatus.code===rt.Status.OK)&&(this.finalStatus=e,this.maybeOutputStatus()),this.destroyHttp2Stream();}maybeOutputStatus(){this.finalStatus!==null&&(this.finalStatus.code!==rt.Status.OK||this.readsClosed&&this.unpushedReadMessages.length===0&&!this.isReadFilterPending&&!this.isPushPending)&&this.outputStatus();}push(e){this.trace("pushing to reader message of length "+(e instanceof Buffer?e.length:null)),this.canPush=false,this.isPushPending=true,process.nextTick(()=>{this.isPushPending=false,!this.statusOutput&&(this.listener.onReceiveMessage(e),this.maybeOutputStatus());});}tryPush(e){this.canPush?(this.http2Stream.pause(),this.push(e)):(this.trace("unpushedReadMessages.push message of length "+e.length),this.unpushedReadMessages.push(e));}handleTrailers(e){this.serverEndedCall=true,this.callEventTracker.onStreamEnd(true);let r="";for(let o of Object.keys(e))r+="		"+o+": "+e[o]+`
`;this.trace(`Received server trailers:
`+r);let n;try{n=ko.Metadata.fromHttp2Headers(e);}catch{n=new ko.Metadata;}let s=n.getMap(),a;if(typeof s["grpc-status"]=="string"){let o=Number(s["grpc-status"]);this.trace("received status code "+o+" from server"),n.remove("grpc-status");let i="";if(typeof s["grpc-message"]=="string"){try{i=decodeURI(s["grpc-message"]);}catch{i=s["grpc-message"];}n.remove("grpc-message"),this.trace('received status details string "'+i+'" from server');}a={code:o,details:i,metadata:n};}else this.httpStatusCode?(a=KM(this.httpStatusCode),a.metadata=n):a={code:rt.Status.UNKNOWN,details:"No status information received",metadata:n};this.endCall(a);}destroyHttp2Stream(){var e;if(!this.http2Stream.destroyed)if(this.serverEndedCall)this.http2Stream.end();else {let r;((e=this.finalStatus)===null||e===void 0?void 0:e.code)===rt.Status.OK?r=Uo.constants.NGHTTP2_NO_ERROR:r=Uo.constants.NGHTTP2_CANCEL,this.trace("close http2 stream with code "+r),this.http2Stream.close(r);}}cancelWithStatus(e,r){this.trace("cancelWithStatus code: "+e+' details: "'+r+'"'),this.endCall({code:e,details:r,metadata:new ko.Metadata});}getStatus(){return this.finalStatus}getPeer(){return this.transport.getPeerName()}getCallNumber(){return this.callId}startRead(){if(this.finalStatus!==null&&this.finalStatus.code!==rt.Status.OK){this.readsClosed=true,this.maybeOutputStatus();return}if(this.canPush=true,this.unpushedReadMessages.length>0){let e=this.unpushedReadMessages.shift();this.push(e);return}this.http2Stream.resume();}sendMessageWithContext(e,r){this.trace("write() called with message of length "+r.length);let n=s=>{process.nextTick(()=>{var a;let o=rt.Status.UNAVAILABLE;s?.code==="ERR_STREAM_WRITE_AFTER_END"&&(o=rt.Status.INTERNAL),s&&this.cancelWithStatus(o,`Write error: ${s.message}`),(a=e.callback)===null||a===void 0||a.call(e);});};this.trace("sending data chunk of length "+r.length),this.callEventTracker.addMessageSent();try{this.http2Stream.write(r,n);}catch(s){this.endCall({code:rt.Status.UNAVAILABLE,details:`Write failed with error ${s.message}`,metadata:new ko.Metadata});}}halfClose(){this.trace("end() called"),this.trace("calling end() on HTTP/2 stream"),this.http2Stream.end();}};Ig.Http2SubchannelCall=WM;});var QM=f(XM=>{Object.defineProperty(XM,"__esModule",{value:true});XM.getNextCallNumber=B1e;var V1e=0;function B1e(){return V1e++}});var L5=f(Dg=>{Object.defineProperty(Dg,"__esModule",{value:true});Dg.Http2SubchannelConnector=void 0;var rI=P("http2"),xg=$a(),lh=Ie(),F1e=zM(),ol=ut(),q1e=qi(),Lg=Fn(),JM=nn(),H1e=P("net"),G1e=x5(),j1e=QM(),ZM="transport",z1e="transport_flowctrl",Y1e=WP().version,{HTTP2_HEADER_AUTHORITY:$1e,HTTP2_HEADER_CONTENT_TYPE:K1e,HTTP2_HEADER_METHOD:W1e,HTTP2_HEADER_PATH:X1e,HTTP2_HEADER_TE:Q1e,HTTP2_HEADER_USER_AGENT:J1e}=rI.constants,Z1e=2e4,eke=Buffer.from("too_many_pings","ascii"),eI=class{constructor(e,r,n,s){this.session=e,this.options=n,this.remoteName=s,this.keepaliveTimer=null,this.pendingSendKeepalivePing=false,this.activeCalls=new Set,this.disconnectListeners=[],this.disconnectHandled=false,this.channelzEnabled=true,this.keepalivesSent=0,this.messagesSent=0,this.messagesReceived=0,this.lastMessageSentTimestamp=null,this.lastMessageReceivedTimestamp=null,this.subchannelAddressString=(0, Lg.subchannelAddressToString)(r),n["grpc.enable_channelz"]===0?(this.channelzEnabled=false,this.streamTracker=new xg.ChannelzCallTrackerStub):this.streamTracker=new xg.ChannelzCallTracker,this.channelzRef=(0, xg.registerChannelzSocket)(this.subchannelAddressString,()=>this.getChannelzInfo(),this.channelzEnabled),this.userAgent=[n["grpc.primary_user_agent"],`grpc-node-js/${Y1e}`,n["grpc.secondary_user_agent"]].filter(a=>a).join(" "),"grpc.keepalive_time_ms"in n?this.keepaliveTimeMs=n["grpc.keepalive_time_ms"]:this.keepaliveTimeMs=-1,"grpc.keepalive_timeout_ms"in n?this.keepaliveTimeoutMs=n["grpc.keepalive_timeout_ms"]:this.keepaliveTimeoutMs=Z1e,"grpc.keepalive_permit_without_calls"in n?this.keepaliveWithoutCalls=n["grpc.keepalive_permit_without_calls"]===1:this.keepaliveWithoutCalls=false,e.once("close",()=>{this.trace("session closed"),this.handleDisconnect();}),e.once("goaway",(a,o,i)=>{let c=false;a===rI.constants.NGHTTP2_ENHANCE_YOUR_CALM&&i&&i.equals(eke)&&(c=true),this.trace("connection closed by GOAWAY with code "+a+" and data "+i?.toString()),this.reportDisconnectToOwner(c);}),e.once("error",a=>{this.trace("connection closed with error "+a.message),this.handleDisconnect();}),e.socket.once("close",a=>{this.trace("connection closed. hadError="+a),this.handleDisconnect();}),ol.isTracerEnabled(ZM)&&(e.on("remoteSettings",a=>{this.trace("new settings received"+(this.session!==e?" on the old connection":"")+": "+JSON.stringify(a));}),e.on("localSettings",a=>{this.trace("local settings acknowledged by remote"+(this.session!==e?" on the old connection":"")+": "+JSON.stringify(a));})),this.keepaliveWithoutCalls&&this.maybeStartKeepalivePingTimer();}getChannelzInfo(){var e,r,n;let s=this.session.socket,a=s.remoteAddress?(0, Lg.stringToSubchannelAddress)(s.remoteAddress,s.remotePort):null,o=s.localAddress?(0, Lg.stringToSubchannelAddress)(s.localAddress,s.localPort):null,i;if(this.session.encrypted){let u=s,l=u.getCipher(),d=u.getCertificate(),p=u.getPeerCertificate();i={cipherSuiteStandardName:(e=l.standardName)!==null&&e!==void 0?e:null,cipherSuiteOtherName:l.standardName?null:l.name,localCertificate:d&&"raw"in d?d.raw:null,remoteCertificate:p&&"raw"in p?p.raw:null};}else i=null;return {remoteAddress:a,localAddress:o,security:i,remoteName:this.remoteName,streamsStarted:this.streamTracker.callsStarted,streamsSucceeded:this.streamTracker.callsSucceeded,streamsFailed:this.streamTracker.callsFailed,messagesSent:this.messagesSent,messagesReceived:this.messagesReceived,keepAlivesSent:this.keepalivesSent,lastLocalStreamCreatedTimestamp:this.streamTracker.lastCallStartedTimestamp,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:this.lastMessageSentTimestamp,lastMessageReceivedTimestamp:this.lastMessageReceivedTimestamp,localFlowControlWindow:(r=this.session.state.localWindowSize)!==null&&r!==void 0?r:null,remoteFlowControlWindow:(n=this.session.state.remoteWindowSize)!==null&&n!==void 0?n:null}}trace(e){ol.trace(lh.LogVerbosity.DEBUG,ZM,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e);}keepaliveTrace(e){ol.trace(lh.LogVerbosity.DEBUG,"keepalive","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e);}flowControlTrace(e){ol.trace(lh.LogVerbosity.DEBUG,z1e,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e);}internalsTrace(e){ol.trace(lh.LogVerbosity.DEBUG,"transport_internals","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e);}reportDisconnectToOwner(e){this.disconnectHandled||(this.disconnectHandled=true,this.disconnectListeners.forEach(r=>r(e)));}handleDisconnect(){this.clearKeepaliveTimeout(),this.reportDisconnectToOwner(false);for(let e of this.activeCalls)e.onDisconnect();setImmediate(()=>{this.session.destroy();});}addDisconnectListener(e){this.disconnectListeners.push(e);}canSendPing(){return !this.session.destroyed&&this.keepaliveTimeMs>0&&(this.keepaliveWithoutCalls||this.activeCalls.size>0)}maybeSendPing(){var e,r;if(!this.canSendPing()){this.pendingSendKeepalivePing=true;return}if(this.keepaliveTimer){console.error("keepaliveTimeout is not null");return}this.channelzEnabled&&(this.keepalivesSent+=1),this.keepaliveTrace("Sending ping with timeout "+this.keepaliveTimeoutMs+"ms"),this.keepaliveTimer=setTimeout(()=>{this.keepaliveTimer=null,this.keepaliveTrace("Ping timeout passed without response"),this.handleDisconnect();},this.keepaliveTimeoutMs),(r=(e=this.keepaliveTimer).unref)===null||r===void 0||r.call(e);let n="";try{this.session.ping((a,o,i)=>{this.clearKeepaliveTimeout(),a?(this.keepaliveTrace("Ping failed with error "+a.message),this.handleDisconnect()):(this.keepaliveTrace("Received ping response"),this.maybeStartKeepalivePingTimer());})||(n="Ping returned false");}catch(s){n=(s instanceof Error?s.message:"")||"Unknown error";}n&&(this.keepaliveTrace("Ping send failed: "+n),this.handleDisconnect());}maybeStartKeepalivePingTimer(){var e,r;this.canSendPing()&&(this.pendingSendKeepalivePing?(this.pendingSendKeepalivePing=false,this.maybeSendPing()):this.keepaliveTimer||(this.keepaliveTrace("Starting keepalive timer for "+this.keepaliveTimeMs+"ms"),this.keepaliveTimer=setTimeout(()=>{this.keepaliveTimer=null,this.maybeSendPing();},this.keepaliveTimeMs),(r=(e=this.keepaliveTimer).unref)===null||r===void 0||r.call(e)));}clearKeepaliveTimeout(){this.keepaliveTimer&&(clearTimeout(this.keepaliveTimer),this.keepaliveTimer=null);}removeActiveCall(e){this.activeCalls.delete(e),this.activeCalls.size===0&&this.session.unref();}addActiveCall(e){this.activeCalls.add(e),this.activeCalls.size===1&&(this.session.ref(),this.keepaliveWithoutCalls||this.maybeStartKeepalivePingTimer());}createCall(e,r,n,s,a){let o=e.toHttp2Headers();o[$1e]=r,o[J1e]=this.userAgent,o[K1e]="application/grpc",o[W1e]="POST",o[X1e]=n,o[Q1e]="trailers";let i;try{i=this.session.request(o);}catch(l){throw this.handleDisconnect(),l}this.flowControlTrace("local window size: "+this.session.state.localWindowSize+" remote window size: "+this.session.state.remoteWindowSize),this.internalsTrace("session.closed="+this.session.closed+" session.destroyed="+this.session.destroyed+" session.socket.destroyed="+this.session.socket.destroyed);let c,u;return this.channelzEnabled?(this.streamTracker.addCallStarted(),c={addMessageSent:()=>{var l;this.messagesSent+=1,this.lastMessageSentTimestamp=new Date,(l=a.addMessageSent)===null||l===void 0||l.call(a);},addMessageReceived:()=>{var l;this.messagesReceived+=1,this.lastMessageReceivedTimestamp=new Date,(l=a.addMessageReceived)===null||l===void 0||l.call(a);},onCallEnd:l=>{var d;(d=a.onCallEnd)===null||d===void 0||d.call(a,l),this.removeActiveCall(u);},onStreamEnd:l=>{var d;l?this.streamTracker.addCallSucceeded():this.streamTracker.addCallFailed(),(d=a.onStreamEnd)===null||d===void 0||d.call(a,l);}}):c={addMessageSent:()=>{var l;(l=a.addMessageSent)===null||l===void 0||l.call(a);},addMessageReceived:()=>{var l;(l=a.addMessageReceived)===null||l===void 0||l.call(a);},onCallEnd:l=>{var d;(d=a.onCallEnd)===null||d===void 0||d.call(a,l),this.removeActiveCall(u);},onStreamEnd:l=>{var d;(d=a.onStreamEnd)===null||d===void 0||d.call(a,l);}},u=new G1e.Http2SubchannelCall(i,c,s,this,(0, j1e.getNextCallNumber)()),this.addActiveCall(u),u}getChannelzRef(){return this.channelzRef}getPeerName(){return this.subchannelAddressString}getOptions(){return this.options}shutdown(){this.session.close(),(0, xg.unregisterChannelzRef)(this.channelzRef);}},tI=class{constructor(e){this.channelTarget=e,this.session=null,this.isShutdown=false;}trace(e){ol.trace(lh.LogVerbosity.DEBUG,ZM,(0, JM.uriToString)(this.channelTarget)+" "+e);}createSession(e,r,n){return this.isShutdown?Promise.reject():e.socket.closed?Promise.reject("Connection closed before starting HTTP/2 handshake"):new Promise((s,a)=>{let o=null,i=this.channelTarget;if("grpc.http_connect_target"in n){let y=(0, JM.parseUri)(n["grpc.http_connect_target"]);y&&(i=y,o=(0, JM.uriToString)(y));}let c=e.secure?"https":"http",u=(0, q1e.getDefaultAuthority)(i),l=()=>{var y;(y=this.session)===null||y===void 0||y.destroy(),this.session=null,setImmediate(()=>{g||(g=true,a(`${T.trim()} (${new Date().toISOString()})`));});},d=y=>{var R;(R=this.session)===null||R===void 0||R.destroy(),T=y.message,this.trace("connection failed with error "+T),g||(g=true,a(`${T} (${new Date().toISOString()})`));},p={createConnection:(y,R)=>e.socket};n["grpc-node.flow_control_window"]!==void 0&&(p.settings={initialWindowSize:n["grpc-node.flow_control_window"]});let h=rI.connect(`${c}://${u}`,p);this.session=h;let T="Failed to connect",g=false;h.unref(),h.once("remoteSettings",()=>{h.removeAllListeners(),e.socket.removeListener("close",l),e.socket.removeListener("error",d),s(new eI(h,r,n,o)),this.session=null;}),h.once("close",l),h.once("error",d),e.socket.once("close",l),e.socket.once("error",d);})}tcpConnect(e,r){return (0, F1e.getProxiedConnection)(e,r).then(n=>n||new Promise((s,a)=>{let o=()=>{a(new Error("Socket closed"));},i=u=>{a(u);},c=H1e.connect(e,()=>{c.removeListener("close",o),c.removeListener("error",i),s(c);});c.once("close",o),c.once("error",i);}))}async connect(e,r,n){if(this.isShutdown)return Promise.reject();let s=null,a=null,o=(0, Lg.subchannelAddressToString)(e);try{return this.trace(o+" Waiting for secureConnector to be ready"),await r.waitForReady(),this.trace(o+" secureConnector is ready"),s=await this.tcpConnect(e,n),s.setNoDelay(),this.trace(o+" Established TCP connection"),a=await r.connect(s),this.trace(o+" Established secure connection"),this.createSession(a,e,n)}catch(i){throw s?.destroy(),a?.socket.destroy(),i}}shutdown(){var e;this.isShutdown=true,(e=this.session)===null||e===void 0||e.close(),this.session=null;}};Dg.Http2SubchannelConnector=tI;});var D5=f(ph=>{Object.defineProperty(ph,"__esModule",{value:true});ph.SubchannelPool=void 0;ph.getSubchannelPool=cke;var tke=o6(),rke=R5(),nke=Fn(),ike=nn(),oke=L5(),ske=1e4,dh=class{constructor(){this.pool=Object.create(null),this.cleanupTimer=null;}unrefUnusedSubchannels(){let e=true;for(let r in this.pool){let s=this.pool[r].filter(a=>!a.subchannel.unrefIfOneRef());s.length>0&&(e=false),this.pool[r]=s;}e&&this.cleanupTimer!==null&&(clearInterval(this.cleanupTimer),this.cleanupTimer=null);}ensureCleanupTask(){var e,r;this.cleanupTimer===null&&(this.cleanupTimer=setInterval(()=>{this.unrefUnusedSubchannels();},ske),(r=(e=this.cleanupTimer).unref)===null||r===void 0||r.call(e));}getOrCreateSubchannel(e,r,n,s){this.ensureCleanupTask();let a=(0, ike.uriToString)(e);if(a in this.pool){let i=this.pool[a];for(let c of i)if((0, nke.subchannelAddressEqual)(r,c.subchannelAddress)&&(0, tke.channelOptionsEqual)(n,c.channelArguments)&&s._equals(c.channelCredentials))return c.subchannel}let o=new rke.Subchannel(e,r,n,s,new oke.Http2SubchannelConnector(e));return a in this.pool||(this.pool[a]=[]),this.pool[a].push({subchannelAddress:r,channelArguments:n,channelCredentials:s,subchannel:o}),o.ref(),o}};ph.SubchannelPool=dh;var ake=new dh;function cke(t){return t?ake:new dh}});var iI=f(sl=>{Object.defineProperty(sl,"__esModule",{value:true});sl.FilterStackFactory=sl.FilterStack=void 0;var wg=class{constructor(e){this.filters=e;}sendMetadata(e){let r=e;for(let n=0;n<this.filters.length;n++)r=this.filters[n].sendMetadata(r);return r}receiveMetadata(e){let r=e;for(let n=this.filters.length-1;n>=0;n--)r=this.filters[n].receiveMetadata(r);return r}sendMessage(e){let r=e;for(let n=0;n<this.filters.length;n++)r=this.filters[n].sendMessage(r);return r}receiveMessage(e){let r=e;for(let n=this.filters.length-1;n>=0;n--)r=this.filters[n].receiveMessage(r);return r}receiveTrailers(e){let r=e;for(let n=this.filters.length-1;n>=0;n--)r=this.filters[n].receiveTrailers(r);return r}push(e){this.filters.unshift(...e);}getFilters(){return this.filters}};sl.FilterStack=wg;var nI=class t{constructor(e){this.factories=e;}push(e){this.factories.unshift(...e);}clone(){return new t([...this.factories])}createFilter(){return new wg(this.factories.map(e=>e.createFilter()))}};sl.FilterStackFactory=nI;});var oI=f(Ug=>{Object.defineProperty(Ug,"__esModule",{value:true});Ug.CompressionAlgorithms=void 0;var w5;(function(t){t[t.identity=0]="identity",t[t.deflate=1]="deflate",t[t.gzip=2]="gzip";})(w5||(Ug.CompressionAlgorithms=w5={}));});var aI=f(kg=>{Object.defineProperty(kg,"__esModule",{value:true});kg.BaseFilter=void 0;var sI=class{async sendMetadata(e){return e}receiveMetadata(e){return e}async sendMessage(e){return e}async receiveMessage(e){return e}receiveTrailers(e){return e}};kg.BaseFilter=sI;});var V5=f(ul=>{Object.defineProperty(ul,"__esModule",{value:true});ul.CompressionFilterFactory=ul.CompressionFilter=void 0;var Vg=P("zlib"),k5=oI(),al=Ie(),uke=aI(),lke=ut(),dke=t=>typeof t=="number"&&typeof k5.CompressionAlgorithms[t]=="string",cl=class{async writeMessage(e,r){let n=e;r&&(n=await this.compressMessage(n));let s=Buffer.allocUnsafe(n.length+5);return s.writeUInt8(r?1:0,0),s.writeUInt32BE(n.length,1),n.copy(s,5),s}async readMessage(e){let r=e.readUInt8(0)===1,n=e.slice(5);return r&&(n=await this.decompressMessage(n)),n}},Wa=class extends cl{async compressMessage(e){return e}async writeMessage(e,r){let n=Buffer.allocUnsafe(e.length+5);return n.writeUInt8(0,0),n.writeUInt32BE(e.length,1),e.copy(n,5),n}decompressMessage(e){return Promise.reject(new Error('Received compressed message but "grpc-encoding" header was identity'))}},cI=class extends cl{constructor(e){super(),this.maxRecvMessageLength=e;}compressMessage(e){return new Promise((r,n)=>{Vg.deflate(e,(s,a)=>{s?n(s):r(a);});})}decompressMessage(e){return new Promise((r,n)=>{let s=0,a=[],o=Vg.createInflate();o.on("data",i=>{a.push(i),s+=i.byteLength,this.maxRecvMessageLength!==-1&&s>this.maxRecvMessageLength&&(o.destroy(),n({code:al.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxRecvMessageLength}`}));}),o.on("end",()=>{r(Buffer.concat(a));}),o.write(e),o.end();})}},uI=class extends cl{constructor(e){super(),this.maxRecvMessageLength=e;}compressMessage(e){return new Promise((r,n)=>{Vg.gzip(e,(s,a)=>{s?n(s):r(a);});})}decompressMessage(e){return new Promise((r,n)=>{let s=0,a=[],o=Vg.createGunzip();o.on("data",i=>{a.push(i),s+=i.byteLength,this.maxRecvMessageLength!==-1&&s>this.maxRecvMessageLength&&(o.destroy(),n({code:al.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxRecvMessageLength}`}));}),o.on("end",()=>{r(Buffer.concat(a));}),o.write(e),o.end();})}},lI=class extends cl{constructor(e){super(),this.compressionName=e;}compressMessage(e){return Promise.reject(new Error(`Received message compressed with unsupported compression method ${this.compressionName}`))}decompressMessage(e){return Promise.reject(new Error(`Compression method not supported: ${this.compressionName}`))}};function U5(t,e){switch(t){case "identity":return new Wa;case "deflate":return new cI(e);case "gzip":return new uI(e);default:return new lI(t)}}var Bg=class extends uke.BaseFilter{constructor(e,r){var n,s,a;super(),this.sharedFilterConfig=r,this.sendCompression=new Wa,this.receiveCompression=new Wa,this.currentCompressionAlgorithm="identity";let o=e["grpc.default_compression_algorithm"];if(this.maxReceiveMessageLength=(n=e["grpc.max_receive_message_length"])!==null&&n!==void 0?n:al.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,this.maxSendMessageLength=(s=e["grpc.max_send_message_length"])!==null&&s!==void 0?s:al.DEFAULT_MAX_SEND_MESSAGE_LENGTH,o!==void 0)if(dke(o)){let i=k5.CompressionAlgorithms[o],c=(a=r.serverSupportedEncodingHeader)===null||a===void 0?void 0:a.split(",");(!c||c.includes(i))&&(this.currentCompressionAlgorithm=i,this.sendCompression=U5(this.currentCompressionAlgorithm,-1));}else lke.log(al.LogVerbosity.ERROR,`Invalid value provided for grpc.default_compression_algorithm option: ${o}`);}async sendMetadata(e){let r=await e;return r.set("grpc-accept-encoding","identity,deflate,gzip"),r.set("accept-encoding","identity"),this.currentCompressionAlgorithm==="identity"?r.remove("grpc-encoding"):r.set("grpc-encoding",this.currentCompressionAlgorithm),r}receiveMetadata(e){let r=e.get("grpc-encoding");if(r.length>0){let s=r[0];typeof s=="string"&&(this.receiveCompression=U5(s,this.maxReceiveMessageLength));}e.remove("grpc-encoding");let n=e.get("grpc-accept-encoding")[0];return n&&(this.sharedFilterConfig.serverSupportedEncodingHeader=n,n.split(",").includes(this.currentCompressionAlgorithm)||(this.sendCompression=new Wa,this.currentCompressionAlgorithm="identity")),e.remove("grpc-accept-encoding"),e}async sendMessage(e){var r;let n=await e;if(this.maxSendMessageLength!==-1&&n.message.length>this.maxSendMessageLength)throw {code:al.Status.RESOURCE_EXHAUSTED,details:`Attempted to send message with a size larger than ${this.maxSendMessageLength}`};let s;return this.sendCompression instanceof Wa?s=false:s=(((r=n.flags)!==null&&r!==void 0?r:0)&2)===0,{message:await this.sendCompression.writeMessage(n.message,s),flags:n.flags}}async receiveMessage(e){return this.receiveCompression.readMessage(await e)}};ul.CompressionFilter=Bg;var dI=class{constructor(e,r){this.options=r,this.sharedFilterConfig={};}createFilter(){return new Bg(this.options,this.sharedFilterConfig)}};ul.CompressionFilterFactory=dI;});var fh=f(Xa=>{Object.defineProperty(Xa,"__esModule",{value:true});Xa.minDeadline=pke;Xa.getDeadlineTimeoutString=hke;Xa.getRelativeTimeout=mke;Xa.deadlineToString=Eke;Xa.formatDateDifference=Tke;function pke(...t){let e=1/0;for(let r of t){let n=r instanceof Date?r.getTime():r;n<e&&(e=n);}return e}var fke=[["m",1],["S",1e3],["M",60*1e3],["H",60*60*1e3]];function hke(t){let e=new Date().getTime();t instanceof Date&&(t=t.getTime());let r=Math.max(t-e,0);for(let[n,s]of fke){let a=r/s;if(a<1e8)return String(Math.ceil(a))+n}throw new Error("Deadline is too far in the future")}var _ke=2147483647;function mke(t){let e=t instanceof Date?t.getTime():t,r=new Date().getTime(),n=e-r;return n<0?0:n>_ke?1/0:n}function Eke(t){if(t instanceof Date)return t.toISOString();{let e=new Date(t);return Number.isNaN(e.getTime())?""+t:e.toISOString()}}function Tke(t,e){return ((e.getTime()-t.getTime())/1e3).toFixed(3)+"s"}});var Fg=f(pI=>{Object.defineProperty(pI,"__esModule",{value:true});pI.restrictControlPlaneStatusCode=gke;var eo=Ie(),Ske=[eo.Status.OK,eo.Status.INVALID_ARGUMENT,eo.Status.NOT_FOUND,eo.Status.ALREADY_EXISTS,eo.Status.FAILED_PRECONDITION,eo.Status.ABORTED,eo.Status.OUT_OF_RANGE,eo.Status.DATA_LOSS];function gke(t,e){return Ske.includes(t)?{code:eo.Status.INTERNAL,details:`Invalid status from control plane: ${t} ${eo.Status[t]} ${e}`}:{code:t,details:e}}});var q5=f(Gg=>{Object.defineProperty(Gg,"__esModule",{value:true});Gg.LoadBalancingCall=void 0;var B5=Bn(),qg=Ie(),F5=fh(),Hg=Nr(),hh=Rs(),yke=nn(),Ake=ut(),fI=Fg(),Rke=P("http2"),vke="load_balancing_call",hI=class{constructor(e,r,n,s,a,o,i){var c,u;this.channel=e,this.callConfig=r,this.methodName=n,this.host=s,this.credentials=a,this.deadline=o,this.callNumber=i,this.child=null,this.readPending=false,this.pendingMessage=null,this.pendingHalfClose=false,this.ended=false,this.metadata=null,this.listener=null,this.onCallEnded=null,this.childStartTime=null;let l=this.methodName.split("/"),d="";l.length>=2&&(d=l[1]);let p=(u=(c=(0, yke.splitHostPort)(this.host))===null||c===void 0?void 0:c.host)!==null&&u!==void 0?u:"localhost";this.serviceUrl=`https://${p}/${d}`,this.startTime=new Date;}getDeadlineInfo(){var e,r;let n=[];return this.childStartTime?(this.childStartTime>this.startTime&&(!((e=this.metadata)===null||e===void 0)&&e.getOptions().waitForReady&&n.push("wait_for_ready"),n.push(`LB pick: ${(0, F5.formatDateDifference)(this.startTime,this.childStartTime)}`)),n.push(...this.child.getDeadlineInfo()),n):(!((r=this.metadata)===null||r===void 0)&&r.getOptions().waitForReady&&n.push("wait_for_ready"),n.push("Waiting for LB pick"),n)}trace(e){Ake.trace(qg.LogVerbosity.DEBUG,vke,"["+this.callNumber+"] "+e);}outputStatus(e,r){var n,s;if(!this.ended){this.ended=true,this.trace("ended with status: code="+e.code+' details="'+e.details+'" start time='+this.startTime.toISOString());let a=Object.assign(Object.assign({},e),{progress:r});(n=this.listener)===null||n===void 0||n.onReceiveStatus(a),(s=this.onCallEnded)===null||s===void 0||s.call(this,a.code);}}doPick(){var e,r;if(this.ended)return;if(!this.metadata)throw new Error("doPick called before start");this.trace("Pick called");let n=this.metadata.clone(),s=this.channel.doPick(n,this.callConfig.pickInformation),a=s.subchannel?"("+s.subchannel.getChannelzRef().id+") "+s.subchannel.getAddress():""+s.subchannel;switch(this.trace("Pick result: "+hh.PickResultType[s.pickResultType]+" subchannel: "+a+" status: "+((e=s.status)===null||e===void 0?void 0:e.code)+" "+((r=s.status)===null||r===void 0?void 0:r.details)),s.pickResultType){case hh.PickResultType.COMPLETE:this.credentials.compose(s.subchannel.getCallCredentials()).generateMetadata({method_name:this.methodName,service_url:this.serviceUrl}).then(u=>{var l;if(this.ended){this.trace("Credentials metadata generation finished after call ended");return}if(n.merge(u),n.get("authorization").length>1&&this.outputStatus({code:qg.Status.INTERNAL,details:'"authorization" metadata cannot have multiple values',metadata:new Hg.Metadata},"PROCESSED"),s.subchannel.getConnectivityState()!==B5.ConnectivityState.READY){this.trace("Picked subchannel "+a+" has state "+B5.ConnectivityState[s.subchannel.getConnectivityState()]+" after getting credentials metadata. Retrying pick"),this.doPick();return}this.deadline!==1/0&&n.set("grpc-timeout",(0, F5.getDeadlineTimeoutString)(this.deadline));try{this.child=s.subchannel.getRealSubchannel().createCall(n,this.host,this.methodName,{onReceiveMetadata:d=>{this.trace("Received metadata"),this.listener.onReceiveMetadata(d);},onReceiveMessage:d=>{this.trace("Received message"),this.listener.onReceiveMessage(d);},onReceiveStatus:d=>{this.trace("Received status"),d.rstCode===Rke.constants.NGHTTP2_REFUSED_STREAM?this.outputStatus(d,"REFUSED"):this.outputStatus(d,"PROCESSED");}}),this.childStartTime=new Date;}catch(d){this.trace("Failed to start call on picked subchannel "+a+" with error "+d.message),this.outputStatus({code:qg.Status.INTERNAL,details:"Failed to start HTTP/2 stream with error "+d.message,metadata:new Hg.Metadata},"NOT_STARTED");return}(l=s.onCallStarted)===null||l===void 0||l.call(s),this.onCallEnded=s.onCallEnded,this.trace("Created child call ["+this.child.getCallNumber()+"]"),this.readPending&&this.child.startRead(),this.pendingMessage&&this.child.sendMessageWithContext(this.pendingMessage.context,this.pendingMessage.message),this.pendingHalfClose&&this.child.halfClose();},u=>{let{code:l,details:d}=(0, fI.restrictControlPlaneStatusCode)(typeof u.code=="number"?u.code:qg.Status.UNKNOWN,`Getting metadata from plugin failed with error: ${u.message}`);this.outputStatus({code:l,details:d,metadata:new Hg.Metadata},"PROCESSED");});break;case hh.PickResultType.DROP:let{code:i,details:c}=(0, fI.restrictControlPlaneStatusCode)(s.status.code,s.status.details);setImmediate(()=>{this.outputStatus({code:i,details:c,metadata:s.status.metadata},"DROP");});break;case hh.PickResultType.TRANSIENT_FAILURE:if(this.metadata.getOptions().waitForReady)this.channel.queueCallForPick(this);else {let{code:u,details:l}=(0, fI.restrictControlPlaneStatusCode)(s.status.code,s.status.details);setImmediate(()=>{this.outputStatus({code:u,details:l,metadata:s.status.metadata},"PROCESSED");});}break;case hh.PickResultType.QUEUE:this.channel.queueCallForPick(this);}}cancelWithStatus(e,r){var n;this.trace("cancelWithStatus code: "+e+' details: "'+r+'"'),(n=this.child)===null||n===void 0||n.cancelWithStatus(e,r),this.outputStatus({code:e,details:r,metadata:new Hg.Metadata},"PROCESSED");}getPeer(){var e,r;return (r=(e=this.child)===null||e===void 0?void 0:e.getPeer())!==null&&r!==void 0?r:this.channel.getTarget()}start(e,r){this.trace("start called"),this.listener=r,this.metadata=e,this.doPick();}sendMessageWithContext(e,r){this.trace("write() called with message of length "+r.length),this.child?this.child.sendMessageWithContext(e,r):this.pendingMessage={context:e,message:r};}startRead(){this.trace("startRead called"),this.child?this.child.startRead():this.readPending=true;}halfClose(){this.trace("halfClose called"),this.child?this.child.halfClose():this.pendingHalfClose=true;}setCredentials(e){throw new Error("Method not implemented.")}getCallNumber(){return this.callNumber}};Gg.LoadBalancingCall=hI;});var G5=f(jg=>{Object.defineProperty(jg,"__esModule",{value:true});jg.ResolvingCall=void 0;var Oke=IS(),Qa=Ie(),Ja=fh(),H5=Nr(),Nke=ut(),Cke=Fg(),Pke="resolving_call",_I=class{constructor(e,r,n,s,a){this.channel=e,this.method=r,this.filterStackFactory=s,this.callNumber=a,this.child=null,this.readPending=false,this.pendingMessage=null,this.pendingHalfClose=false,this.ended=false,this.readFilterPending=false,this.writeFilterPending=false,this.pendingChildStatus=null,this.metadata=null,this.listener=null,this.statusWatchers=[],this.deadlineTimer=setTimeout(()=>{},0),this.filterStack=null,this.deadlineStartTime=null,this.configReceivedTime=null,this.childStartTime=null,this.credentials=Oke.CallCredentials.createEmpty(),this.deadline=n.deadline,this.host=n.host,n.parentCall&&(n.flags&Qa.Propagate.CANCELLATION&&n.parentCall.on("cancelled",()=>{this.cancelWithStatus(Qa.Status.CANCELLED,"Cancelled by parent call");}),n.flags&Qa.Propagate.DEADLINE&&(this.trace("Propagating deadline from parent: "+n.parentCall.getDeadline()),this.deadline=(0, Ja.minDeadline)(this.deadline,n.parentCall.getDeadline()))),this.trace("Created"),this.runDeadlineTimer();}trace(e){Nke.trace(Qa.LogVerbosity.DEBUG,Pke,"["+this.callNumber+"] "+e);}runDeadlineTimer(){clearTimeout(this.deadlineTimer),this.deadlineStartTime=new Date,this.trace("Deadline: "+(0, Ja.deadlineToString)(this.deadline));let e=(0, Ja.getRelativeTimeout)(this.deadline);if(e!==1/0){this.trace("Deadline will be reached in "+e+"ms");let r=()=>{if(!this.deadlineStartTime){this.cancelWithStatus(Qa.Status.DEADLINE_EXCEEDED,"Deadline exceeded");return}let n=[],s=new Date;n.push(`Deadline exceeded after ${(0, Ja.formatDateDifference)(this.deadlineStartTime,s)}`),this.configReceivedTime?(this.configReceivedTime>this.deadlineStartTime&&n.push(`name resolution: ${(0, Ja.formatDateDifference)(this.deadlineStartTime,this.configReceivedTime)}`),this.childStartTime?this.childStartTime>this.configReceivedTime&&n.push(`metadata filters: ${(0, Ja.formatDateDifference)(this.configReceivedTime,this.childStartTime)}`):n.push("waiting for metadata filters")):n.push("waiting for name resolution"),this.child&&n.push(...this.child.getDeadlineInfo()),this.cancelWithStatus(Qa.Status.DEADLINE_EXCEEDED,n.join(","));};e<=0?process.nextTick(r):this.deadlineTimer=setTimeout(r,e);}}outputStatus(e){if(!this.ended){this.ended=true,this.filterStack||(this.filterStack=this.filterStackFactory.createFilter()),clearTimeout(this.deadlineTimer);let r=this.filterStack.receiveTrailers(e);this.trace("ended with status: code="+r.code+' details="'+r.details+'"'),this.statusWatchers.forEach(n=>n(r)),process.nextTick(()=>{var n;(n=this.listener)===null||n===void 0||n.onReceiveStatus(r);});}}sendMessageOnChild(e,r){if(!this.child)throw new Error("sendMessageonChild called with child not populated");let n=this.child;this.writeFilterPending=true,this.filterStack.sendMessage(Promise.resolve({message:r,flags:e.flags})).then(s=>{this.writeFilterPending=false,n.sendMessageWithContext(e,s.message),this.pendingHalfClose&&n.halfClose();},s=>{this.cancelWithStatus(s.code,s.details);});}getConfig(){if(this.ended)return;if(!this.metadata||!this.listener)throw new Error("getConfig called before start");let e=this.channel.getConfig(this.method,this.metadata);if(e.type==="NONE"){this.channel.queueCallForConfig(this);return}else if(e.type==="ERROR"){this.metadata.getOptions().waitForReady?this.channel.queueCallForConfig(this):this.outputStatus(e.error);return}this.configReceivedTime=new Date;let r=e.config;if(r.status!==Qa.Status.OK){let{code:n,details:s}=(0, Cke.restrictControlPlaneStatusCode)(r.status,"Failed to route call to method "+this.method);this.outputStatus({code:n,details:s,metadata:new H5.Metadata});return}if(r.methodConfig.timeout){let n=new Date;n.setSeconds(n.getSeconds()+r.methodConfig.timeout.seconds),n.setMilliseconds(n.getMilliseconds()+r.methodConfig.timeout.nanos/1e6),this.deadline=(0, Ja.minDeadline)(this.deadline,n),this.runDeadlineTimer();}this.filterStackFactory.push(r.dynamicFilterFactories),this.filterStack=this.filterStackFactory.createFilter(),this.filterStack.sendMetadata(Promise.resolve(this.metadata)).then(n=>{this.child=this.channel.createRetryingCall(r,this.method,this.host,this.credentials,this.deadline),this.trace("Created child ["+this.child.getCallNumber()+"]"),this.childStartTime=new Date,this.child.start(n,{onReceiveMetadata:s=>{this.trace("Received metadata"),this.listener.onReceiveMetadata(this.filterStack.receiveMetadata(s));},onReceiveMessage:s=>{this.trace("Received message"),this.readFilterPending=true,this.filterStack.receiveMessage(s).then(a=>{this.trace("Finished filtering received message"),this.readFilterPending=false,this.listener.onReceiveMessage(a),this.pendingChildStatus&&this.outputStatus(this.pendingChildStatus);},a=>{this.cancelWithStatus(a.code,a.details);});},onReceiveStatus:s=>{this.trace("Received status"),this.readFilterPending?this.pendingChildStatus=s:this.outputStatus(s);}}),this.readPending&&this.child.startRead(),this.pendingMessage?this.sendMessageOnChild(this.pendingMessage.context,this.pendingMessage.message):this.pendingHalfClose&&this.child.halfClose();},n=>{this.outputStatus(n);});}reportResolverError(e){var r;!((r=this.metadata)===null||r===void 0)&&r.getOptions().waitForReady?this.channel.queueCallForConfig(this):this.outputStatus(e);}cancelWithStatus(e,r){var n;this.trace("cancelWithStatus code: "+e+' details: "'+r+'"'),(n=this.child)===null||n===void 0||n.cancelWithStatus(e,r),this.outputStatus({code:e,details:r,metadata:new H5.Metadata});}getPeer(){var e,r;return (r=(e=this.child)===null||e===void 0?void 0:e.getPeer())!==null&&r!==void 0?r:this.channel.getTarget()}start(e,r){this.trace("start called"),this.metadata=e.clone(),this.listener=r,this.getConfig();}sendMessageWithContext(e,r){this.trace("write() called with message of length "+r.length),this.child?this.sendMessageOnChild(e,r):this.pendingMessage={context:e,message:r};}startRead(){this.trace("startRead called"),this.child?this.child.startRead():this.readPending=true;}halfClose(){this.trace("halfClose called"),this.child&&!this.writeFilterPending?this.child.halfClose():this.pendingHalfClose=true;}setCredentials(e){this.credentials=e;}addStatusWatcher(e){this.statusWatchers.push(e);}getCallNumber(){return this.callNumber}};jg.ResolvingCall=_I;});var j5=f(xs=>{Object.defineProperty(xs,"__esModule",{value:true});xs.RetryingCall=xs.MessageBufferTracker=xs.RetryThrottler=void 0;var zg=Ie(),bke=fh(),Mke=Nr(),Ike=ut(),xke="retrying_call",EI=class{constructor(e,r,n){this.maxTokens=e,this.tokenRatio=r,n?this.tokens=n.tokens*(e/n.maxTokens):this.tokens=e;}addCallSucceeded(){this.tokens=Math.min(this.tokens+this.tokenRatio,this.maxTokens);}addCallFailed(){this.tokens=Math.max(this.tokens-1,0);}canRetryCall(){return this.tokens>this.maxTokens/2}};xs.RetryThrottler=EI;var TI=class{constructor(e,r){this.totalLimit=e,this.limitPerCall=r,this.totalAllocated=0,this.allocatedPerCall=new Map;}allocate(e,r){var n;let s=(n=this.allocatedPerCall.get(r))!==null&&n!==void 0?n:0;return this.limitPerCall-s<e||this.totalLimit-this.totalAllocated<e?false:(this.allocatedPerCall.set(r,s+e),this.totalAllocated+=e,true)}free(e,r){var n;if(this.totalAllocated<e)throw new Error(`Invalid buffer allocation state: call ${r} freed ${e} > total allocated ${this.totalAllocated}`);this.totalAllocated-=e;let s=(n=this.allocatedPerCall.get(r))!==null&&n!==void 0?n:0;if(s<e)throw new Error(`Invalid buffer allocation state: call ${r} freed ${e} > allocated for call ${s}`);this.allocatedPerCall.set(r,s-e);}freeAll(e){var r;let n=(r=this.allocatedPerCall.get(e))!==null&&r!==void 0?r:0;if(this.totalAllocated<n)throw new Error(`Invalid buffer allocation state: call ${e} allocated ${n} > total allocated ${this.totalAllocated}`);this.totalAllocated-=n,this.allocatedPerCall.delete(e);}};xs.MessageBufferTracker=TI;var mI="grpc-previous-rpc-attempts",Lke=5,SI=class{constructor(e,r,n,s,a,o,i,c,u){var l;this.channel=e,this.callConfig=r,this.methodName=n,this.host=s,this.credentials=a,this.deadline=o,this.callNumber=i,this.bufferTracker=c,this.retryThrottler=u,this.listener=null,this.initialMetadata=null,this.underlyingCalls=[],this.writeBuffer=[],this.writeBufferOffset=0,this.readStarted=false,this.transparentRetryUsed=false,this.attempts=0,this.hedgingTimer=null,this.committedCallIndex=null,this.initialRetryBackoffSec=0,this.nextRetryBackoffSec=0;let d=(l=e.getOptions()["grpc-node.retry_max_attempts_limit"])!==null&&l!==void 0?l:Lke;if(e.getOptions()["grpc.enable_retries"]===0)this.state="NO_RETRY",this.maxAttempts=1;else if(r.methodConfig.retryPolicy){this.state="RETRY";let p=r.methodConfig.retryPolicy;this.nextRetryBackoffSec=this.initialRetryBackoffSec=Number(p.initialBackoff.substring(0,p.initialBackoff.length-1)),this.maxAttempts=Math.min(p.maxAttempts,d);}else r.methodConfig.hedgingPolicy?(this.state="HEDGING",this.maxAttempts=Math.min(r.methodConfig.hedgingPolicy.maxAttempts,d)):(this.state="TRANSPARENT_ONLY",this.maxAttempts=1);this.startTime=new Date;}getDeadlineInfo(){if(this.underlyingCalls.length===0)return [];let e=[],r=this.underlyingCalls[this.underlyingCalls.length-1];return this.underlyingCalls.length>1&&e.push(`previous attempts: ${this.underlyingCalls.length-1}`),r.startTime>this.startTime&&e.push(`time to current attempt start: ${(0, bke.formatDateDifference)(this.startTime,r.startTime)}`),e.push(...r.call.getDeadlineInfo()),e}getCallNumber(){return this.callNumber}trace(e){Ike.trace(zg.LogVerbosity.DEBUG,xke,"["+this.callNumber+"] "+e);}reportStatus(e){this.trace("ended with status: code="+e.code+' details="'+e.details+'" start time='+this.startTime.toISOString()),this.bufferTracker.freeAll(this.callNumber),this.writeBufferOffset=this.writeBufferOffset+this.writeBuffer.length,this.writeBuffer=[],process.nextTick(()=>{var r;(r=this.listener)===null||r===void 0||r.onReceiveStatus({code:e.code,details:e.details,metadata:e.metadata});});}cancelWithStatus(e,r){this.trace("cancelWithStatus code: "+e+' details: "'+r+'"'),this.reportStatus({code:e,details:r,metadata:new Mke.Metadata});for(let{call:n}of this.underlyingCalls)n.cancelWithStatus(e,r);}getPeer(){return this.committedCallIndex!==null?this.underlyingCalls[this.committedCallIndex].call.getPeer():"unknown"}getBufferEntry(e){var r;return (r=this.writeBuffer[e-this.writeBufferOffset])!==null&&r!==void 0?r:{entryType:"FREED",allocated:false}}getNextBufferIndex(){return this.writeBufferOffset+this.writeBuffer.length}clearSentMessages(){if(this.state!=="COMMITTED")return;let e;this.underlyingCalls[this.committedCallIndex].state==="COMPLETED"?e=this.getNextBufferIndex():e=this.underlyingCalls[this.committedCallIndex].nextMessageToSend;for(let r=this.writeBufferOffset;r<e;r++){let n=this.getBufferEntry(r);n.allocated&&this.bufferTracker.free(n.message.message.length,this.callNumber);}this.writeBuffer=this.writeBuffer.slice(e-this.writeBufferOffset),this.writeBufferOffset=e;}commitCall(e){var r,n;if(this.state!=="COMMITTED"){this.trace("Committing call ["+this.underlyingCalls[e].call.getCallNumber()+"] at index "+e),this.state="COMMITTED",(n=(r=this.callConfig).onCommitted)===null||n===void 0||n.call(r),this.committedCallIndex=e;for(let s=0;s<this.underlyingCalls.length;s++)s!==e&&this.underlyingCalls[s].state!=="COMPLETED"&&(this.underlyingCalls[s].state="COMPLETED",this.underlyingCalls[s].call.cancelWithStatus(zg.Status.CANCELLED,"Discarded in favor of other hedged attempt"));this.clearSentMessages();}}commitCallWithMostMessages(){if(this.state==="COMMITTED")return;let e=-1,r=-1;for(let[n,s]of this.underlyingCalls.entries())s.state==="ACTIVE"&&s.nextMessageToSend>e&&(e=s.nextMessageToSend,r=n);r===-1?this.state="TRANSPARENT_ONLY":this.commitCall(r);}isStatusCodeInList(e,r){return e.some(n=>{var s;return n===r||n.toString().toLowerCase()===((s=zg.Status[r])===null||s===void 0?void 0:s.toLowerCase())})}getNextRetryBackoffMs(){var e;let r=(e=this.callConfig)===null||e===void 0?void 0:e.methodConfig.retryPolicy;if(!r)return 0;let n=Math.random()*this.nextRetryBackoffSec*1e3,s=Number(r.maxBackoff.substring(0,r.maxBackoff.length-1));return this.nextRetryBackoffSec=Math.min(this.nextRetryBackoffSec*r.backoffMultiplier,s),n}maybeRetryCall(e,r){if(this.state!=="RETRY"){r(false);return}if(this.attempts>=this.maxAttempts){r(false);return}let n;if(e===null)n=this.getNextRetryBackoffMs();else if(e<0){this.state="TRANSPARENT_ONLY",r(false);return}else n=e,this.nextRetryBackoffSec=this.initialRetryBackoffSec;setTimeout(()=>{var s,a;if(this.state!=="RETRY"){r(false);return}!((a=(s=this.retryThrottler)===null||s===void 0?void 0:s.canRetryCall())!==null&&a!==void 0)||a?(r(true),this.attempts+=1,this.startNewAttempt()):(this.trace("Retry attempt denied by throttling policy"),r(false));},n);}countActiveCalls(){let e=0;for(let r of this.underlyingCalls)r?.state==="ACTIVE"&&(e+=1);return e}handleProcessedStatus(e,r,n){var s,a,o;switch(this.state){case "COMMITTED":case "NO_RETRY":case "TRANSPARENT_ONLY":this.commitCall(r),this.reportStatus(e);break;case "HEDGING":if(this.isStatusCodeInList((s=this.callConfig.methodConfig.hedgingPolicy.nonFatalStatusCodes)!==null&&s!==void 0?s:[],e.code)){(a=this.retryThrottler)===null||a===void 0||a.addCallFailed();let i;if(n===null)i=0;else if(n<0){this.state="TRANSPARENT_ONLY",this.commitCall(r),this.reportStatus(e);return}else i=n;setTimeout(()=>{this.maybeStartHedgingAttempt(),this.countActiveCalls()===0&&(this.commitCall(r),this.reportStatus(e));},i);}else this.commitCall(r),this.reportStatus(e);break;case "RETRY":this.isStatusCodeInList(this.callConfig.methodConfig.retryPolicy.retryableStatusCodes,e.code)?((o=this.retryThrottler)===null||o===void 0||o.addCallFailed(),this.maybeRetryCall(n,i=>{i||(this.commitCall(r),this.reportStatus(e));})):(this.commitCall(r),this.reportStatus(e));break}}getPushback(e){let r=e.get("grpc-retry-pushback-ms");if(r.length===0)return null;try{return parseInt(r[0])}catch{return  -1}}handleChildStatus(e,r){var n;if(this.underlyingCalls[r].state==="COMPLETED")return;if(this.trace("state="+this.state+" handling status with progress "+e.progress+" from child ["+this.underlyingCalls[r].call.getCallNumber()+"] in state "+this.underlyingCalls[r].state),this.underlyingCalls[r].state="COMPLETED",e.code===zg.Status.OK){(n=this.retryThrottler)===null||n===void 0||n.addCallSucceeded(),this.commitCall(r),this.reportStatus(e);return}if(this.state==="NO_RETRY"){this.commitCall(r),this.reportStatus(e);return}if(this.state==="COMMITTED"){this.reportStatus(e);return}let s=this.getPushback(e.metadata);switch(e.progress){case "NOT_STARTED":this.startNewAttempt();break;case "REFUSED":this.transparentRetryUsed?this.handleProcessedStatus(e,r,s):(this.transparentRetryUsed=true,this.startNewAttempt());break;case "DROP":this.commitCall(r),this.reportStatus(e);break;case "PROCESSED":this.handleProcessedStatus(e,r,s);break}}maybeStartHedgingAttempt(){this.state==="HEDGING"&&this.callConfig.methodConfig.hedgingPolicy&&(this.attempts>=this.maxAttempts||(this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer()));}maybeStartHedgingTimer(){var e,r,n;if(this.hedgingTimer&&clearTimeout(this.hedgingTimer),this.state!=="HEDGING"||!this.callConfig.methodConfig.hedgingPolicy)return;let s=this.callConfig.methodConfig.hedgingPolicy;if(this.attempts>=this.maxAttempts)return;let a=(e=s.hedgingDelay)!==null&&e!==void 0?e:"0s",o=Number(a.substring(0,a.length-1));this.hedgingTimer=setTimeout(()=>{this.maybeStartHedgingAttempt();},o*1e3),(n=(r=this.hedgingTimer).unref)===null||n===void 0||n.call(r);}startNewAttempt(){let e=this.channel.createLoadBalancingCall(this.callConfig,this.methodName,this.host,this.credentials,this.deadline);this.trace("Created child call ["+e.getCallNumber()+"] for attempt "+this.attempts);let r=this.underlyingCalls.length;this.underlyingCalls.push({state:"ACTIVE",call:e,nextMessageToSend:0,startTime:new Date});let n=this.attempts-1,s=this.initialMetadata.clone();n>0&&s.set(mI,`${n}`);let a=false;e.start(s,{onReceiveMetadata:o=>{this.trace("Received metadata from child ["+e.getCallNumber()+"]"),this.commitCall(r),a=true,n>0&&o.set(mI,`${n}`),this.underlyingCalls[r].state==="ACTIVE"&&this.listener.onReceiveMetadata(o);},onReceiveMessage:o=>{this.trace("Received message from child ["+e.getCallNumber()+"]"),this.commitCall(r),this.underlyingCalls[r].state==="ACTIVE"&&this.listener.onReceiveMessage(o);},onReceiveStatus:o=>{this.trace("Received status from child ["+e.getCallNumber()+"]"),!a&&n>0&&o.metadata.set(mI,`${n}`),this.handleChildStatus(o,r);}}),this.sendNextChildMessage(r),this.readStarted&&e.startRead();}start(e,r){this.trace("start called"),this.listener=r,this.initialMetadata=e,this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer();}handleChildWriteCompleted(e){var r,n;let s=this.underlyingCalls[e],a=s.nextMessageToSend;(n=(r=this.getBufferEntry(a)).callback)===null||n===void 0||n.call(r),this.clearSentMessages(),s.nextMessageToSend+=1,this.sendNextChildMessage(e);}sendNextChildMessage(e){let r=this.underlyingCalls[e];if(r.state!=="COMPLETED"&&this.getBufferEntry(r.nextMessageToSend)){let n=this.getBufferEntry(r.nextMessageToSend);switch(n.entryType){case "MESSAGE":r.call.sendMessageWithContext({callback:s=>{this.handleChildWriteCompleted(e);}},n.message.message);break;case "HALF_CLOSE":r.nextMessageToSend+=1,r.call.halfClose();break;}}}sendMessageWithContext(e,r){var n;this.trace("write() called with message of length "+r.length);let s={message:r,flags:e.flags},a=this.getNextBufferIndex(),o={entryType:"MESSAGE",message:s,allocated:this.bufferTracker.allocate(r.length,this.callNumber)};if(this.writeBuffer.push(o),o.allocated){(n=e.callback)===null||n===void 0||n.call(e);for(let[i,c]of this.underlyingCalls.entries())c.state==="ACTIVE"&&c.nextMessageToSend===a&&c.call.sendMessageWithContext({callback:u=>{this.handleChildWriteCompleted(i);}},r);}else {if(this.commitCallWithMostMessages(),this.committedCallIndex===null)return;let i=this.underlyingCalls[this.committedCallIndex];o.callback=e.callback,i.state==="ACTIVE"&&i.nextMessageToSend===a&&i.call.sendMessageWithContext({callback:c=>{this.handleChildWriteCompleted(this.committedCallIndex);}},r);}}startRead(){this.trace("startRead called"),this.readStarted=true;for(let e of this.underlyingCalls)e?.state==="ACTIVE"&&e.call.startRead();}halfClose(){this.trace("halfClose called");let e=this.getNextBufferIndex();this.writeBuffer.push({entryType:"HALF_CLOSE",allocated:false});for(let r of this.underlyingCalls)r?.state==="ACTIVE"&&r.nextMessageToSend===e&&(r.nextMessageToSend+=1,r.call.halfClose());}setCredentials(e){throw new Error("Method not implemented.")}getMethod(){return this.methodName}getHost(){return this.host}};xs.RetryingCall=SI;});var $g=f(Yg=>{Object.defineProperty(Yg,"__esModule",{value:true});Yg.BaseSubchannelWrapper=void 0;var gI=class{constructor(e){this.child=e,this.healthy=true,this.healthListeners=new Set,e.addHealthStateWatcher(r=>{this.healthy&&this.updateHealthListeners();});}updateHealthListeners(){for(let e of this.healthListeners)e(this.isHealthy());}getConnectivityState(){return this.child.getConnectivityState()}addConnectivityStateListener(e){this.child.addConnectivityStateListener(e);}removeConnectivityStateListener(e){this.child.removeConnectivityStateListener(e);}startConnecting(){this.child.startConnecting();}getAddress(){return this.child.getAddress()}throttleKeepalive(e){this.child.throttleKeepalive(e);}ref(){this.child.ref();}unref(){this.child.unref();}getChannelzRef(){return this.child.getChannelzRef()}isHealthy(){return this.healthy&&this.child.isHealthy()}addHealthStateWatcher(e){this.healthListeners.add(e);}removeHealthStateWatcher(e){this.healthListeners.delete(e);}setHealthy(e){e!==this.healthy&&(this.healthy=e,this.child.isHealthy()&&this.updateHealthListeners());}getRealSubchannel(){return this.child.getRealSubchannel()}realSubchannelEquals(e){return this.getRealSubchannel()===e.getRealSubchannel()}getCallCredentials(){return this.child.getCallCredentials()}};Yg.BaseSubchannelWrapper=gI;});var PI=f(Za=>{Object.defineProperty(Za,"__esModule",{value:true});Za.InternalChannel=Za.SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX=void 0;var Dke=Lf(),wke=i6(),Uke=D5(),RI=Rs(),kke=Nr(),Ls=Ie(),Vke=iI(),Bke=V5(),z5=qi(),Kg=ut(),Fke=zM(),Wg=nn(),Gn=Bn(),_h=$a(),qke=q5(),Hke=fh(),Gke=G5(),yI=QM(),jke=Fg(),AI=j5(),zke=$g(),Yke=2147483647,$ke=1e3,Kke=30*60*1e3,Xg=new Map,Wke=1<<24,Xke=1<<20,vI=class extends zke.BaseSubchannelWrapper{constructor(e,r){super(e),this.channel=r,this.refCount=0,this.subchannelStateListener=(n,s,a,o)=>{r.throttleKeepalive(o);};}ref(){this.refCount===0&&(this.child.addConnectivityStateListener(this.subchannelStateListener),this.channel.addWrappedSubchannel(this)),this.child.ref(),this.refCount+=1;}unref(){this.child.unref(),this.refCount-=1,this.refCount<=0&&(this.child.removeConnectivityStateListener(this.subchannelStateListener),this.channel.removeWrappedSubchannel(this));}},OI=class{pick(e){return {pickResultType:RI.PickResultType.DROP,status:{code:Ls.Status.UNAVAILABLE,details:"Channel closed before call started",metadata:new kke.Metadata},subchannel:null,onCallStarted:null,onCallEnded:null}}};Za.SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX="grpc.internal.no_subchannel";var NI=class{constructor(e){this.target=e,this.trace=new _h.ChannelzTrace,this.callTracker=new _h.ChannelzCallTracker,this.childrenTracker=new _h.ChannelzChildrenTracker,this.state=Gn.ConnectivityState.IDLE;}getChannelzInfoCallback(){return ()=>({target:this.target,state:this.state,trace:this.trace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists()})}},CI=class{constructor(e,r,n){var s,a,o,i,c,u;if(this.credentials=r,this.options=n,this.connectivityState=Gn.ConnectivityState.IDLE,this.currentPicker=new RI.UnavailablePicker,this.configSelectionQueue=[],this.pickQueue=[],this.connectivityStateWatchers=[],this.callRefTimer=null,this.configSelector=null,this.currentResolutionError=null,this.wrappedSubchannels=new Set,this.callCount=0,this.idleTimer=null,this.channelzEnabled=true,this.randomChannelId=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER),typeof e!="string")throw new TypeError("Channel target must be a string");if(!(r instanceof Dke.ChannelCredentials))throw new TypeError("Channel credentials must be a ChannelCredentials object");if(n&&typeof n!="object")throw new TypeError("Channel options must be an object");this.channelzInfoTracker=new NI(e);let l=(0, Wg.parseUri)(e);if(l===null)throw new Error(`Could not parse target name "${e}"`);let d=(0, z5.mapUriDefaultScheme)(l);if(d===null)throw new Error(`Could not find a default scheme for target name "${e}"`);this.options["grpc.enable_channelz"]===0&&(this.channelzEnabled=false),this.channelzRef=(0, _h.registerChannelzChannel)(e,this.channelzInfoTracker.getChannelzInfoCallback(),this.channelzEnabled),this.channelzEnabled&&this.channelzInfoTracker.trace.addTrace("CT_INFO","Channel created"),this.options["grpc.default_authority"]?this.defaultAuthority=this.options["grpc.default_authority"]:this.defaultAuthority=(0, z5.getDefaultAuthority)(d);let p=(0, Fke.mapProxyName)(d,n);this.target=p.target,this.options=Object.assign({},this.options,p.extraOptions),this.subchannelPool=(0, Uke.getSubchannelPool)(((s=this.options["grpc.use_local_subchannel_pool"])!==null&&s!==void 0?s:0)===0),this.retryBufferTracker=new AI.MessageBufferTracker((a=this.options["grpc.retry_buffer_size"])!==null&&a!==void 0?a:Wke,(o=this.options["grpc.per_rpc_retry_buffer_size"])!==null&&o!==void 0?o:Xke),this.keepaliveTime=(i=this.options["grpc.keepalive_time_ms"])!==null&&i!==void 0?i:-1,this.idleTimeoutMs=Math.max((c=this.options["grpc.client_idle_timeout_ms"])!==null&&c!==void 0?c:Kke,$ke);let h={createSubchannel:(g,y)=>{let R={};for(let[v,V]of Object.entries(y))v.startsWith(Za.SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX)||(R[v]=V);let b=this.subchannelPool.getOrCreateSubchannel(this.target,g,R,this.credentials);return b.throttleKeepalive(this.keepaliveTime),this.channelzEnabled&&this.channelzInfoTracker.trace.addTrace("CT_INFO","Created subchannel or used existing subchannel",b.getChannelzRef()),new vI(b,this)},updateState:(g,y)=>{this.currentPicker=y;let R=this.pickQueue.slice();this.pickQueue=[],R.length>0&&this.callRefTimerUnref();for(let b of R)b.doPick();this.updateState(g);},requestReresolution:()=>{throw new Error("Resolving load balancer should never call requestReresolution")},addChannelzChild:g=>{this.channelzEnabled&&this.channelzInfoTracker.childrenTracker.refChild(g);},removeChannelzChild:g=>{this.channelzEnabled&&this.channelzInfoTracker.childrenTracker.unrefChild(g);}};this.resolvingLoadBalancer=new wke.ResolvingLoadBalancer(this.target,h,this.options,(g,y)=>{var R;g.retryThrottling?Xg.set(this.getTarget(),new AI.RetryThrottler(g.retryThrottling.maxTokens,g.retryThrottling.tokenRatio,Xg.get(this.getTarget()))):Xg.delete(this.getTarget()),this.channelzEnabled&&this.channelzInfoTracker.trace.addTrace("CT_INFO","Address resolution succeeded"),(R=this.configSelector)===null||R===void 0||R.unref(),this.configSelector=y,this.currentResolutionError=null,process.nextTick(()=>{let b=this.configSelectionQueue;this.configSelectionQueue=[],b.length>0&&this.callRefTimerUnref();for(let w of b)w.getConfig();});},g=>{this.channelzEnabled&&this.channelzInfoTracker.trace.addTrace("CT_WARNING","Address resolution failed with code "+g.code+' and details "'+g.details+'"'),this.configSelectionQueue.length>0&&this.trace("Name resolution failed with calls queued for config selection"),this.configSelector===null&&(this.currentResolutionError=Object.assign(Object.assign({},(0, jke.restrictControlPlaneStatusCode)(g.code,g.details)),{metadata:g.metadata}));let y=this.configSelectionQueue;this.configSelectionQueue=[],y.length>0&&this.callRefTimerUnref();for(let R of y)R.reportResolverError(g);}),this.filterStackFactory=new Vke.FilterStackFactory([new Bke.CompressionFilterFactory(this,this.options)]),this.trace("Channel constructed with options "+JSON.stringify(n,void 0,2));let T=new Error;(0, Kg.isTracerEnabled)("channel_stacktrace")&&(0, Kg.trace)(Ls.LogVerbosity.DEBUG,"channel_stacktrace","("+this.channelzRef.id+`) Channel constructed 
`+((u=T.stack)===null||u===void 0?void 0:u.substring(T.stack.indexOf(`
`)+1))),this.lastActivityTimestamp=new Date;}trace(e,r){(0, Kg.trace)(r??Ls.LogVerbosity.DEBUG,"channel","("+this.channelzRef.id+") "+(0, Wg.uriToString)(this.target)+" "+e);}callRefTimerRef(){var e,r,n,s;this.callRefTimer||(this.callRefTimer=setInterval(()=>{},Yke)),!((r=(e=this.callRefTimer).hasRef)===null||r===void 0)&&r.call(e)||(this.trace("callRefTimer.ref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),(s=(n=this.callRefTimer).ref)===null||s===void 0||s.call(n));}callRefTimerUnref(){var e,r,n;(!(!((e=this.callRefTimer)===null||e===void 0)&&e.hasRef)||this.callRefTimer.hasRef())&&(this.trace("callRefTimer.unref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),(n=(r=this.callRefTimer)===null||r===void 0?void 0:r.unref)===null||n===void 0||n.call(r));}removeConnectivityStateWatcher(e){let r=this.connectivityStateWatchers.findIndex(n=>n===e);r>=0&&this.connectivityStateWatchers.splice(r,1);}updateState(e){(0, Kg.trace)(Ls.LogVerbosity.DEBUG,"connectivity_state","("+this.channelzRef.id+") "+(0, Wg.uriToString)(this.target)+" "+Gn.ConnectivityState[this.connectivityState]+" -> "+Gn.ConnectivityState[e]),this.channelzEnabled&&this.channelzInfoTracker.trace.addTrace("CT_INFO","Connectivity state change to "+Gn.ConnectivityState[e]),this.connectivityState=e,this.channelzInfoTracker.state=e;let r=this.connectivityStateWatchers.slice();for(let n of r)e!==n.currentState&&(n.timer&&clearTimeout(n.timer),this.removeConnectivityStateWatcher(n),n.callback());e!==Gn.ConnectivityState.TRANSIENT_FAILURE&&(this.currentResolutionError=null);}throttleKeepalive(e){if(e>this.keepaliveTime){this.keepaliveTime=e;for(let r of this.wrappedSubchannels)r.throttleKeepalive(e);}}addWrappedSubchannel(e){this.wrappedSubchannels.add(e);}removeWrappedSubchannel(e){this.wrappedSubchannels.delete(e);}doPick(e,r){return this.currentPicker.pick({metadata:e,extraPickInfo:r})}queueCallForPick(e){this.pickQueue.push(e),this.callRefTimerRef();}getConfig(e,r){return this.connectivityState!==Gn.ConnectivityState.SHUTDOWN&&this.resolvingLoadBalancer.exitIdle(),this.configSelector?{type:"SUCCESS",config:this.configSelector.invoke(e,r,this.randomChannelId)}:this.currentResolutionError?{type:"ERROR",error:this.currentResolutionError}:{type:"NONE"}}queueCallForConfig(e){this.configSelectionQueue.push(e),this.callRefTimerRef();}enterIdle(){this.resolvingLoadBalancer.destroy(),this.updateState(Gn.ConnectivityState.IDLE),this.currentPicker=new RI.QueuePicker(this.resolvingLoadBalancer),this.idleTimer&&(clearTimeout(this.idleTimer),this.idleTimer=null),this.callRefTimer&&(clearInterval(this.callRefTimer),this.callRefTimer=null);}startIdleTimeout(e){var r,n;this.idleTimer=setTimeout(()=>{if(this.callCount>0){this.startIdleTimeout(this.idleTimeoutMs);return}let a=new Date().valueOf()-this.lastActivityTimestamp.valueOf();a>=this.idleTimeoutMs?(this.trace("Idle timer triggered after "+this.idleTimeoutMs+"ms of inactivity"),this.enterIdle()):this.startIdleTimeout(this.idleTimeoutMs-a);},e),(n=(r=this.idleTimer).unref)===null||n===void 0||n.call(r);}maybeStartIdleTimer(){this.connectivityState!==Gn.ConnectivityState.SHUTDOWN&&!this.idleTimer&&this.startIdleTimeout(this.idleTimeoutMs);}onCallStart(){this.channelzEnabled&&this.channelzInfoTracker.callTracker.addCallStarted(),this.callCount+=1;}onCallEnd(e){this.channelzEnabled&&(e.code===Ls.Status.OK?this.channelzInfoTracker.callTracker.addCallSucceeded():this.channelzInfoTracker.callTracker.addCallFailed()),this.callCount-=1,this.lastActivityTimestamp=new Date,this.maybeStartIdleTimer();}createLoadBalancingCall(e,r,n,s,a){let o=(0, yI.getNextCallNumber)();return this.trace("createLoadBalancingCall ["+o+'] method="'+r+'"'),new qke.LoadBalancingCall(this,e,r,n,s,a,o)}createRetryingCall(e,r,n,s,a){let o=(0, yI.getNextCallNumber)();return this.trace("createRetryingCall ["+o+'] method="'+r+'"'),new AI.RetryingCall(this,e,r,n,s,a,o,this.retryBufferTracker,Xg.get(this.getTarget()))}createResolvingCall(e,r,n,s,a){let o=(0, yI.getNextCallNumber)();this.trace("createResolvingCall ["+o+'] method="'+e+'", deadline='+(0, Hke.deadlineToString)(r));let i={deadline:r,flags:a??Ls.Propagate.DEFAULTS,host:n??this.defaultAuthority,parentCall:s},c=new Gke.ResolvingCall(this,e,i,this.filterStackFactory.clone(),o);return this.onCallStart(),c.addStatusWatcher(u=>{this.onCallEnd(u);}),c}close(){var e;this.resolvingLoadBalancer.destroy(),this.updateState(Gn.ConnectivityState.SHUTDOWN),this.currentPicker=new OI;for(let r of this.configSelectionQueue)r.cancelWithStatus(Ls.Status.UNAVAILABLE,"Channel closed before call started");this.configSelectionQueue=[];for(let r of this.pickQueue)r.cancelWithStatus(Ls.Status.UNAVAILABLE,"Channel closed before call started");this.pickQueue=[],this.callRefTimer&&clearInterval(this.callRefTimer),this.idleTimer&&clearTimeout(this.idleTimer),this.channelzEnabled&&(0, _h.unregisterChannelzRef)(this.channelzRef),this.subchannelPool.unrefUnusedSubchannels(),(e=this.configSelector)===null||e===void 0||e.unref(),this.configSelector=null;}getTarget(){return (0, Wg.uriToString)(this.target)}getConnectivityState(e){let r=this.connectivityState;return e&&(this.resolvingLoadBalancer.exitIdle(),this.lastActivityTimestamp=new Date,this.maybeStartIdleTimer()),r}watchConnectivityState(e,r,n){if(this.connectivityState===Gn.ConnectivityState.SHUTDOWN)throw new Error("Channel has been shut down");let s=null;if(r!==1/0){let o=r instanceof Date?r:new Date(r),i=new Date;if(r===-1/0||o<=i){process.nextTick(n,new Error("Deadline passed without connectivity state change"));return}s=setTimeout(()=>{this.removeConnectivityStateWatcher(a),n(new Error("Deadline passed without connectivity state change"));},o.getTime()-i.getTime());}let a={currentState:e,callback:n,timer:s};this.connectivityStateWatchers.push(a);}getChannelzRef(){return this.channelzRef}createCall(e,r,n,s,a){if(typeof e!="string")throw new TypeError("Channel#createCall: method must be a string");if(!(typeof r=="number"||r instanceof Date))throw new TypeError("Channel#createCall: deadline must be a number or Date");if(this.connectivityState===Gn.ConnectivityState.SHUTDOWN)throw new Error("Channel has been shut down");return this.createResolvingCall(e,r,n,s,a)}getOptions(){return this.options}};Za.InternalChannel=CI;});var Bb=f(Qg=>{Object.defineProperty(Qg,"__esModule",{value:true});Qg.ChannelImplementation=void 0;var Qke=Lf(),Jke=PI(),bI=class{constructor(e,r,n){if(typeof e!="string")throw new TypeError("Channel target must be a string");if(!(r instanceof Qke.ChannelCredentials))throw new TypeError("Channel credentials must be a ChannelCredentials object");if(n&&typeof n!="object")throw new TypeError("Channel options must be an object");this.internalChannel=new Jke.InternalChannel(e,r,n);}close(){this.internalChannel.close();}getTarget(){return this.internalChannel.getTarget()}getConnectivityState(e){return this.internalChannel.getConnectivityState(e)}watchConnectivityState(e,r,n){this.internalChannel.watchConnectivityState(e,r,n);}getChannelzRef(){return this.internalChannel.getChannelzRef()}createCall(e,r,n,s,a){if(typeof e!="string")throw new TypeError("Channel#createCall: method must be a string");if(!(typeof r=="number"||r instanceof Date))throw new TypeError("Channel#createCall: deadline must be a number or Date");return this.internalChannel.createCall(e,r,n,s,a)}};Qg.ChannelImplementation=bI;});var $5=f(Ri=>{Object.defineProperty(Ri,"__esModule",{value:true});Ri.ServerDuplexStreamImpl=Ri.ServerWritableStreamImpl=Ri.ServerReadableStreamImpl=Ri.ServerUnaryCallImpl=void 0;Ri.serverErrorToStatus=UI;var Zke=P("events"),DI=P("stream"),wI=Ie(),Y5=Nr();function UI(t,e){var r;let n={code:wI.Status.UNKNOWN,details:"message"in t?t.message:"Unknown Error",metadata:(r=e??t.metadata)!==null&&r!==void 0?r:null};return "code"in t&&typeof t.code=="number"&&Number.isInteger(t.code)&&(n.code=t.code,"details"in t&&typeof t.details=="string"&&(n.details=t.details)),n}var MI=class extends Zke.EventEmitter{constructor(e,r,n,s){super(),this.path=e,this.call=r,this.metadata=n,this.request=s,this.cancelled=false;}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e);}getDeadline(){return this.call.getDeadline()}getPath(){return this.path}getHost(){return this.call.getHost()}};Ri.ServerUnaryCallImpl=MI;var II=class extends DI.Readable{constructor(e,r,n){super({objectMode:true}),this.path=e,this.call=r,this.metadata=n,this.cancelled=false;}_read(e){this.call.startRead();}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e);}getDeadline(){return this.call.getDeadline()}getPath(){return this.path}getHost(){return this.call.getHost()}};Ri.ServerReadableStreamImpl=II;var xI=class extends DI.Writable{constructor(e,r,n,s){super({objectMode:true}),this.path=e,this.call=r,this.metadata=n,this.request=s,this.pendingStatus={code:wI.Status.OK,details:"OK"},this.cancelled=false,this.trailingMetadata=new Y5.Metadata,this.on("error",a=>{this.pendingStatus=UI(a),this.end();});}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e);}getDeadline(){return this.call.getDeadline()}getPath(){return this.path}getHost(){return this.call.getHost()}_write(e,r,n){this.call.sendMessage(e,n);}_final(e){var r;e(null),this.call.sendStatus(Object.assign(Object.assign({},this.pendingStatus),{metadata:(r=this.pendingStatus.metadata)!==null&&r!==void 0?r:this.trailingMetadata}));}end(e){return e&&(this.trailingMetadata=e),super.end()}};Ri.ServerWritableStreamImpl=xI;var LI=class extends DI.Duplex{constructor(e,r,n){super({objectMode:true}),this.path=e,this.call=r,this.metadata=n,this.pendingStatus={code:wI.Status.OK,details:"OK"},this.cancelled=false,this.trailingMetadata=new Y5.Metadata,this.on("error",s=>{this.pendingStatus=UI(s),this.end();});}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e);}getDeadline(){return this.call.getDeadline()}getPath(){return this.path}getHost(){return this.call.getHost()}_read(e){this.call.startRead();}_write(e,r,n){this.call.sendMessage(e,n);}_final(e){var r;e(null),this.call.sendStatus(Object.assign(Object.assign({},this.pendingStatus),{metadata:(r=this.pendingStatus.metadata)!==null&&r!==void 0?r:this.trailingMetadata}));}end(e){return e&&(this.trailingMetadata=e),super.end()}};Ri.ServerDuplexStreamImpl=LI;});var Jg=f(ll=>{Object.defineProperty(ll,"__esModule",{value:true});ll.ServerCredentials=void 0;ll.createCertificateProviderServerCredentials=eVe;ll.createServerCredentialsWithInterceptors=tVe;var kI=ab(),ec=class{constructor(e,r){this.serverConstructorOptions=e,this.watchers=new Set,this.latestContextOptions=null,this.latestContextOptions=r??null;}_addWatcher(e){this.watchers.add(e);}_removeWatcher(e){this.watchers.delete(e);}getWatcherCount(){return this.watchers.size}updateSecureContextOptions(e){this.latestContextOptions=e;for(let r of this.watchers)r(this.latestContextOptions);}_isSecure(){return this.serverConstructorOptions!==null}_getSecureContextOptions(){return this.latestContextOptions}_getConstructorOptions(){return this.serverConstructorOptions}_getInterceptors(){return []}static createInsecure(){return new VI}static createSsl(e,r,n=false){var s;if(e!==null&&!Buffer.isBuffer(e))throw new TypeError("rootCerts must be null or a Buffer");if(!Array.isArray(r))throw new TypeError("keyCertPairs must be an array");if(typeof n!="boolean")throw new TypeError("checkClientCertificate must be a boolean");let a=[],o=[];for(let i=0;i<r.length;i++){let c=r[i];if(c===null||typeof c!="object")throw new TypeError(`keyCertPair[${i}] must be an object`);if(!Buffer.isBuffer(c.private_key))throw new TypeError(`keyCertPair[${i}].private_key must be a Buffer`);if(!Buffer.isBuffer(c.cert_chain))throw new TypeError(`keyCertPair[${i}].cert_chain must be a Buffer`);a.push(c.cert_chain),o.push(c.private_key);}return new BI({requestCert:n,ciphers:kI.CIPHER_SUITES},{ca:(s=e??(0, kI.getDefaultRootsData)())!==null&&s!==void 0?s:void 0,cert:a,key:o})}};ll.ServerCredentials=ec;var VI=class t extends ec{constructor(){super(null);}_getSettings(){return null}_equals(e){return e instanceof t}},BI=class t extends ec{constructor(e,r){super(e,r),this.options=Object.assign(Object.assign({},e),r);}_equals(e){if(this===e)return  true;if(!(e instanceof t))return  false;if(Buffer.isBuffer(this.options.ca)&&Buffer.isBuffer(e.options.ca)){if(!this.options.ca.equals(e.options.ca))return  false}else if(this.options.ca!==e.options.ca)return  false;if(Array.isArray(this.options.cert)&&Array.isArray(e.options.cert)){if(this.options.cert.length!==e.options.cert.length)return  false;for(let r=0;r<this.options.cert.length;r++){let n=this.options.cert[r],s=e.options.cert[r];if(Buffer.isBuffer(n)&&Buffer.isBuffer(s)){if(!n.equals(s))return  false}else if(n!==s)return  false}}else if(this.options.cert!==e.options.cert)return  false;if(Array.isArray(this.options.key)&&Array.isArray(e.options.key)){if(this.options.key.length!==e.options.key.length)return  false;for(let r=0;r<this.options.key.length;r++){let n=this.options.key[r],s=e.options.key[r];if(Buffer.isBuffer(n)&&Buffer.isBuffer(s)){if(!n.equals(s))return  false}else if(n!==s)return  false}}else if(this.options.key!==e.options.key)return  false;return this.options.requestCert===e.options.requestCert}},FI=class t extends ec{constructor(e,r,n){super({requestCert:r!==null,rejectUnauthorized:n,ciphers:kI.CIPHER_SUITES}),this.identityCertificateProvider=e,this.caCertificateProvider=r,this.requireClientCertificate=n,this.latestCaUpdate=null,this.latestIdentityUpdate=null,this.caCertificateUpdateListener=this.handleCaCertificateUpdate.bind(this),this.identityCertificateUpdateListener=this.handleIdentityCertitificateUpdate.bind(this);}_addWatcher(e){var r;this.getWatcherCount()===0&&((r=this.caCertificateProvider)===null||r===void 0||r.addCaCertificateListener(this.caCertificateUpdateListener),this.identityCertificateProvider.addIdentityCertificateListener(this.identityCertificateUpdateListener)),super._addWatcher(e);}_removeWatcher(e){var r;super._removeWatcher(e),this.getWatcherCount()===0&&((r=this.caCertificateProvider)===null||r===void 0||r.removeCaCertificateListener(this.caCertificateUpdateListener),this.identityCertificateProvider.removeIdentityCertificateListener(this.identityCertificateUpdateListener));}_equals(e){return this===e?true:e instanceof t?this.caCertificateProvider===e.caCertificateProvider&&this.identityCertificateProvider===e.identityCertificateProvider&&this.requireClientCertificate===e.requireClientCertificate:false}calculateSecureContextOptions(){var e;return this.latestIdentityUpdate===null||this.caCertificateProvider!==null&&this.latestCaUpdate===null?null:{ca:(e=this.latestCaUpdate)===null||e===void 0?void 0:e.caCertificate,cert:[this.latestIdentityUpdate.certificate],key:[this.latestIdentityUpdate.privateKey]}}finalizeUpdate(){let e=this.calculateSecureContextOptions();this.updateSecureContextOptions(e);}handleCaCertificateUpdate(e){this.latestCaUpdate=e,this.finalizeUpdate();}handleIdentityCertitificateUpdate(e){this.latestIdentityUpdate=e,this.finalizeUpdate();}};function eVe(t,e,r){return new FI(t,e,r)}var qI=class t extends ec{constructor(e,r){super({}),this.childCredentials=e,this.interceptors=r;}_isSecure(){return this.childCredentials._isSecure()}_equals(e){if(!(e instanceof t)||!this.childCredentials._equals(e.childCredentials)||this.interceptors.length!==e.interceptors.length)return  false;for(let r=0;r<this.interceptors.length;r++)if(this.interceptors[r]!==e.interceptors[r])return  false;return  true}_getInterceptors(){return this.interceptors}_addWatcher(e){this.childCredentials._addWatcher(e);}_removeWatcher(e){this.childCredentials._removeWatcher(e);}_getConstructorOptions(){return this.childCredentials._getConstructorOptions()}_getSecureContextOptions(){return this.childCredentials._getSecureContextOptions()}};function tVe(t,e){return new qI(t,e)}});var WI=f(jn=>{Object.defineProperty(jn,"__esModule",{value:true});jn.BaseServerInterceptingCall=jn.ServerInterceptingCall=jn.ResponderBuilder=jn.ServerListenerBuilder=void 0;jn.isInterceptingServerListener=nVe;jn.getServerInterceptingCall=cVe;var GI=Nr(),sn=Ie(),dl=P("http2"),K5=CS(),W5=P("zlib"),rVe=$M(),Z5=ut(),eX="server_call";function tc(t){Z5.trace(sn.LogVerbosity.DEBUG,eX,t);}var jI=class{constructor(){this.metadata=void 0,this.message=void 0,this.halfClose=void 0,this.cancel=void 0;}withOnReceiveMetadata(e){return this.metadata=e,this}withOnReceiveMessage(e){return this.message=e,this}withOnReceiveHalfClose(e){return this.halfClose=e,this}withOnCancel(e){return this.cancel=e,this}build(){return {onReceiveMetadata:this.metadata,onReceiveMessage:this.message,onReceiveHalfClose:this.halfClose,onCancel:this.cancel}}};jn.ServerListenerBuilder=jI;function nVe(t){return t.onReceiveMetadata!==void 0&&t.onReceiveMetadata.length===1}var zI=class{constructor(e,r){this.listener=e,this.nextListener=r,this.cancelled=false,this.processingMetadata=false,this.hasPendingMessage=false,this.pendingMessage=null,this.processingMessage=false,this.hasPendingHalfClose=false;}processPendingMessage(){this.hasPendingMessage&&(this.nextListener.onReceiveMessage(this.pendingMessage),this.pendingMessage=null,this.hasPendingMessage=false);}processPendingHalfClose(){this.hasPendingHalfClose&&(this.nextListener.onReceiveHalfClose(),this.hasPendingHalfClose=false);}onReceiveMetadata(e){this.cancelled||(this.processingMetadata=true,this.listener.onReceiveMetadata(e,r=>{this.processingMetadata=false,!this.cancelled&&(this.nextListener.onReceiveMetadata(r),this.processPendingMessage(),this.processPendingHalfClose());}));}onReceiveMessage(e){this.cancelled||(this.processingMessage=true,this.listener.onReceiveMessage(e,r=>{this.processingMessage=false,!this.cancelled&&(this.processingMetadata?(this.pendingMessage=r,this.hasPendingMessage=true):(this.nextListener.onReceiveMessage(r),this.processPendingHalfClose()));}));}onReceiveHalfClose(){this.cancelled||this.listener.onReceiveHalfClose(()=>{this.cancelled||(this.processingMetadata||this.processingMessage?this.hasPendingHalfClose=true:this.nextListener.onReceiveHalfClose());});}onCancel(){this.cancelled=true,this.listener.onCancel(),this.nextListener.onCancel();}},YI=class{constructor(){this.start=void 0,this.metadata=void 0,this.message=void 0,this.status=void 0;}withStart(e){return this.start=e,this}withSendMetadata(e){return this.metadata=e,this}withSendMessage(e){return this.message=e,this}withSendStatus(e){return this.status=e,this}build(){return {start:this.start,sendMetadata:this.metadata,sendMessage:this.message,sendStatus:this.status}}};jn.ResponderBuilder=YI;var Zg={onReceiveMetadata:(t,e)=>{e(t);},onReceiveMessage:(t,e)=>{e(t);},onReceiveHalfClose:t=>{t();},onCancel:()=>{}},ey={start:t=>{t();},sendMetadata:(t,e)=>{e(t);},sendMessage:(t,e)=>{e(t);},sendStatus:(t,e)=>{e(t);}},$I=class{constructor(e,r){var n,s,a,o;this.nextCall=e,this.processingMetadata=false,this.sentMetadata=false,this.processingMessage=false,this.pendingMessage=null,this.pendingMessageCallback=null,this.pendingStatus=null,this.responder={start:(n=r?.start)!==null&&n!==void 0?n:ey.start,sendMetadata:(s=r?.sendMetadata)!==null&&s!==void 0?s:ey.sendMetadata,sendMessage:(a=r?.sendMessage)!==null&&a!==void 0?a:ey.sendMessage,sendStatus:(o=r?.sendStatus)!==null&&o!==void 0?o:ey.sendStatus};}processPendingMessage(){this.pendingMessageCallback&&(this.nextCall.sendMessage(this.pendingMessage,this.pendingMessageCallback),this.pendingMessage=null,this.pendingMessageCallback=null);}processPendingStatus(){this.pendingStatus&&(this.nextCall.sendStatus(this.pendingStatus),this.pendingStatus=null);}start(e){this.responder.start(r=>{var n,s,a,o;let i={onReceiveMetadata:(n=r?.onReceiveMetadata)!==null&&n!==void 0?n:Zg.onReceiveMetadata,onReceiveMessage:(s=r?.onReceiveMessage)!==null&&s!==void 0?s:Zg.onReceiveMessage,onReceiveHalfClose:(a=r?.onReceiveHalfClose)!==null&&a!==void 0?a:Zg.onReceiveHalfClose,onCancel:(o=r?.onCancel)!==null&&o!==void 0?o:Zg.onCancel},c=new zI(i,e);this.nextCall.start(c);});}sendMetadata(e){this.processingMetadata=true,this.sentMetadata=true,this.responder.sendMetadata(e,r=>{this.processingMetadata=false,this.nextCall.sendMetadata(r),this.processPendingMessage(),this.processPendingStatus();});}sendMessage(e,r){this.processingMessage=true,this.sentMetadata||this.sendMetadata(new GI.Metadata),this.responder.sendMessage(e,n=>{this.processingMessage=false,this.processingMetadata?(this.pendingMessage=n,this.pendingMessageCallback=r):this.nextCall.sendMessage(n,r);});}sendStatus(e){this.responder.sendStatus(e,r=>{this.processingMetadata||this.processingMessage?this.pendingStatus=r:this.nextCall.sendStatus(r);});}startRead(){this.nextCall.startRead();}getPeer(){return this.nextCall.getPeer()}getDeadline(){return this.nextCall.getDeadline()}getHost(){return this.nextCall.getHost()}};jn.ServerInterceptingCall=$I;var tX="grpc-accept-encoding",KI="grpc-encoding",X5="grpc-message",Q5="grpc-status",HI="grpc-timeout",iVe=/(\d{1,8})\s*([HMSmun])/,oVe={H:36e5,M:6e4,S:1e3,m:1,u:.001,n:1e-6},sVe={[tX]:"identity,deflate,gzip",[KI]:"identity"},J5={[dl.constants.HTTP2_HEADER_STATUS]:dl.constants.HTTP_STATUS_OK,[dl.constants.HTTP2_HEADER_CONTENT_TYPE]:"application/grpc+proto"},aVe={waitForTrailers:true},ty=class{constructor(e,r,n,s,a){var o;this.stream=e,this.callEventTracker=n,this.handler=s,this.listener=null,this.deadlineTimer=null,this.deadline=1/0,this.maxSendMessageSize=sn.DEFAULT_MAX_SEND_MESSAGE_LENGTH,this.maxReceiveMessageSize=sn.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,this.cancelled=false,this.metadataSent=false,this.wantTrailers=false,this.cancelNotified=false,this.incomingEncoding="identity",this.readQueue=[],this.isReadPending=false,this.receivedHalfClose=false,this.streamEnded=false,this.stream.once("error",l=>{}),this.stream.once("close",()=>{var l;tc("Request to method "+((l=this.handler)===null||l===void 0?void 0:l.path)+" stream closed with rstCode "+this.stream.rstCode),this.callEventTracker&&!this.streamEnded&&(this.streamEnded=true,this.callEventTracker.onStreamEnd(false),this.callEventTracker.onCallEnd({code:sn.Status.CANCELLED,details:"Stream closed before sending status",metadata:null})),this.notifyOnCancel();}),this.stream.on("data",l=>{this.handleDataFrame(l);}),this.stream.pause(),this.stream.on("end",()=>{this.handleEndEvent();}),"grpc.max_send_message_length"in a&&(this.maxSendMessageSize=a["grpc.max_send_message_length"]),"grpc.max_receive_message_length"in a&&(this.maxReceiveMessageSize=a["grpc.max_receive_message_length"]),this.host=(o=r[":authority"])!==null&&o!==void 0?o:r.host,this.decoder=new rVe.StreamDecoder(this.maxReceiveMessageSize);let i=GI.Metadata.fromHttp2Headers(r);Z5.isTracerEnabled(eX)&&tc("Request to "+this.handler.path+" received headers "+JSON.stringify(i.toJSON()));let c=i.get(HI);c.length>0&&this.handleTimeoutHeader(c[0]);let u=i.get(KI);u.length>0&&(this.incomingEncoding=u[0]),i.remove(HI),i.remove(KI),i.remove(tX),i.remove(dl.constants.HTTP2_HEADER_ACCEPT_ENCODING),i.remove(dl.constants.HTTP2_HEADER_TE),i.remove(dl.constants.HTTP2_HEADER_CONTENT_TYPE),this.metadata=i;}handleTimeoutHeader(e){let r=e.toString().match(iVe);if(r===null){let a={code:sn.Status.INTERNAL,details:`Invalid ${HI} value "${e}"`,metadata:null};process.nextTick(()=>{this.sendStatus(a);});return}let n=+r[1]*oVe[r[2]]|0,s=new Date;this.deadline=s.setMilliseconds(s.getMilliseconds()+n),this.deadlineTimer=setTimeout(()=>{let a={code:sn.Status.DEADLINE_EXCEEDED,details:"Deadline exceeded",metadata:null};this.sendStatus(a);},n);}checkCancelled(){return !this.cancelled&&(this.stream.destroyed||this.stream.closed)&&(this.notifyOnCancel(),this.cancelled=true),this.cancelled}notifyOnCancel(){this.cancelNotified||(this.cancelNotified=true,this.cancelled=true,process.nextTick(()=>{var e;(e=this.listener)===null||e===void 0||e.onCancel();}),this.deadlineTimer&&clearTimeout(this.deadlineTimer),this.stream.resume());}maybeSendMetadata(){this.metadataSent||this.sendMetadata(new GI.Metadata);}serializeMessage(e){let r=this.handler.serialize(e),n=r.byteLength,s=Buffer.allocUnsafe(n+5);return s.writeUInt8(0,0),s.writeUInt32BE(n,1),r.copy(s,5),s}decompressMessage(e,r){let n=e.subarray(5);if(r==="identity")return n;if(r==="deflate"||r==="gzip"){let s;return r==="deflate"?s=W5.createInflate():s=W5.createGunzip(),new Promise((a,o)=>{let i=0,c=[];s.on("data",u=>{c.push(u),i+=u.byteLength,this.maxReceiveMessageSize!==-1&&i>this.maxReceiveMessageSize&&(s.destroy(),o({code:sn.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxReceiveMessageSize}`}));}),s.on("end",()=>{a(Buffer.concat(c));}),s.write(n),s.end();})}else return Promise.reject({code:sn.Status.UNIMPLEMENTED,details:`Received message compressed with unsupported encoding "${r}"`})}async decompressAndMaybePush(e){if(e.type!=="COMPRESSED")throw new Error(`Invalid queue entry type: ${e.type}`);let n=e.compressedMessage.readUInt8(0)===1?this.incomingEncoding:"identity",s;try{s=await this.decompressMessage(e.compressedMessage,n);}catch(a){this.sendStatus(a);return}try{e.parsedMessage=this.handler.deserialize(s);}catch(a){this.sendStatus({code:sn.Status.INTERNAL,details:`Error deserializing request: ${a.message}`});return}e.type="READABLE",this.maybePushNextMessage();}maybePushNextMessage(){if(this.listener&&this.isReadPending&&this.readQueue.length>0&&this.readQueue[0].type!=="COMPRESSED"){this.isReadPending=false;let e=this.readQueue.shift();e.type==="READABLE"?this.listener.onReceiveMessage(e.parsedMessage):this.listener.onReceiveHalfClose();}}handleDataFrame(e){var r;if(this.checkCancelled())return;tc("Request to "+this.handler.path+" received data frame of size "+e.length);let n;try{n=this.decoder.write(e);}catch(s){this.sendStatus({code:sn.Status.RESOURCE_EXHAUSTED,details:s.message});return}for(let s of n){this.stream.pause();let a={type:"COMPRESSED",compressedMessage:s,parsedMessage:null};this.readQueue.push(a),this.decompressAndMaybePush(a),(r=this.callEventTracker)===null||r===void 0||r.addMessageReceived();}}handleEndEvent(){this.readQueue.push({type:"HALF_CLOSE",compressedMessage:null,parsedMessage:null}),this.receivedHalfClose=true,this.maybePushNextMessage();}start(e){tc("Request to "+this.handler.path+" start called"),!this.checkCancelled()&&(this.listener=e,e.onReceiveMetadata(this.metadata));}sendMetadata(e){if(this.checkCancelled()||this.metadataSent)return;this.metadataSent=true;let r=e?e.toHttp2Headers():null,n=Object.assign(Object.assign(Object.assign({},J5),sVe),r);this.stream.respond(n,aVe);}sendMessage(e,r){if(this.checkCancelled())return;let n;try{n=this.serializeMessage(e);}catch(s){this.sendStatus({code:sn.Status.INTERNAL,details:`Error serializing response: ${(0, K5.getErrorMessage)(s)}`,metadata:null});return}if(this.maxSendMessageSize!==-1&&n.length-5>this.maxSendMessageSize){this.sendStatus({code:sn.Status.RESOURCE_EXHAUSTED,details:`Sent message larger than max (${n.length} vs. ${this.maxSendMessageSize})`,metadata:null});return}this.maybeSendMetadata(),tc("Request to "+this.handler.path+" sent data frame of size "+n.length),this.stream.write(n,s=>{var a;if(s){this.sendStatus({code:sn.Status.INTERNAL,details:`Error writing message: ${(0, K5.getErrorMessage)(s)}`,metadata:null});return}(a=this.callEventTracker)===null||a===void 0||a.addMessageSent(),r();});}sendStatus(e){var r,n;if(!this.checkCancelled())if(tc("Request to method "+((r=this.handler)===null||r===void 0?void 0:r.path)+" ended with status code: "+sn.Status[e.code]+" details: "+e.details),this.metadataSent)this.wantTrailers?this.notifyOnCancel():(this.wantTrailers=true,this.stream.once("wantTrailers",()=>{var s;this.callEventTracker&&!this.streamEnded&&(this.streamEnded=true,this.callEventTracker.onStreamEnd(true),this.callEventTracker.onCallEnd(e));let a=Object.assign({[Q5]:e.code,[X5]:encodeURI(e.details)},(s=e.metadata)===null||s===void 0?void 0:s.toHttp2Headers());this.stream.sendTrailers(a),this.notifyOnCancel();}),this.stream.end());else {this.callEventTracker&&!this.streamEnded&&(this.streamEnded=true,this.callEventTracker.onStreamEnd(true),this.callEventTracker.onCallEnd(e));let s=Object.assign(Object.assign({[Q5]:e.code,[X5]:encodeURI(e.details)},J5),(n=e.metadata)===null||n===void 0?void 0:n.toHttp2Headers());this.stream.respond(s,{endStream:true}),this.notifyOnCancel();}}startRead(){tc("Request to "+this.handler.path+" startRead called"),!this.checkCancelled()&&(this.isReadPending=true,this.readQueue.length===0?this.receivedHalfClose||this.stream.resume():this.maybePushNextMessage());}getPeer(){var e;let r=(e=this.stream.session)===null||e===void 0?void 0:e.socket;return r?.remoteAddress?r.remotePort?`${r.remoteAddress}:${r.remotePort}`:r.remoteAddress:"unknown"}getDeadline(){return this.deadline}getHost(){return this.host}};jn.BaseServerInterceptingCall=ty;function cVe(t,e,r,n,s,a){let o={path:s.path,requestStream:s.type==="clientStream"||s.type==="bidi",responseStream:s.type==="serverStream"||s.type==="bidi",requestDeserialize:s.deserialize,responseSerialize:s.serialize},i=new ty(e,r,n,s,a);return t.reduce((c,u)=>u(o,c),i)}});var cX=f(ws=>{var uVe=ws&&ws.__runInitializers||function(t,e,r){for(var n=arguments.length>2,s=0;s<e.length;s++)r=n?e[s].call(t,r):e[s].call(t);return n?r:void 0},lVe=ws&&ws.__esDecorate||function(t,e,r,n,s,a){function o(R){if(R!==void 0&&typeof R!="function")throw new TypeError("Function expected");return R}for(var i=n.kind,c=i==="getter"?"get":i==="setter"?"set":"value",u=!e&&t?n.static?t:t.prototype:null,l=e||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),d,p=false,h=r.length-1;h>=0;h--){var T={};for(var g in n)T[g]=g==="access"?{}:n[g];for(var g in n.access)T.access[g]=n.access[g];T.addInitializer=function(R){if(p)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(R||null));};var y=(0, r[h])(i==="accessor"?{get:l.get,set:l.set}:l[c],T);if(i==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(d=o(y.get))&&(l.get=d),(d=o(y.set))&&(l.set=d),(d=o(y.init))&&s.unshift(d);}else (d=o(y))&&(i==="field"?s.unshift(d):l[c]=d);}u&&Object.defineProperty(u,n.name,l),p=true;};Object.defineProperty(ws,"__esModule",{value:true});ws.Server=void 0;var an=P("http2"),dVe=P("util"),Dt=Ie(),hl=$5(),XI=Jg(),rX=qi(),fl=ut(),Ds=Fn(),vi=nn(),Wt=$a(),nX=WI(),pl=2147483647,QI=2147483647,pVe=2e4,iX=2147483647,{HTTP2_HEADER_PATH:oX}=an.constants,fVe="server",sX=Buffer.from("max_age");function aX(t){fl.trace(Dt.LogVerbosity.DEBUG,"server_call",t);}function hVe(){}function _Ve(t){return function(e,r){return dVe.deprecate(e,t)}}function JI(t){return {code:Dt.Status.UNIMPLEMENTED,details:`The server does not implement the method ${t}`}}function mVe(t,e){let r=JI(e);switch(t){case "unary":return (n,s)=>{s(r,null);};case "clientStream":return (n,s)=>{s(r,null);};case "serverStream":return n=>{n.emit("error",r);};case "bidi":return n=>{n.emit("error",r);};default:throw new Error(`Invalid handlerType ${t}`)}}var EVe=(()=>{var t;let e=[],r;return t=class{constructor(s){var a,o,i,c,u,l;this.boundPorts=(uVe(this,e),new Map),this.http2Servers=new Map,this.sessionIdleTimeouts=new Map,this.handlers=new Map,this.sessions=new Map,this.started=false,this.shutdown=false,this.serverAddressString="null",this.channelzEnabled=true,this.options=s??{},this.options["grpc.enable_channelz"]===0?(this.channelzEnabled=false,this.channelzTrace=new Wt.ChannelzTraceStub,this.callTracker=new Wt.ChannelzCallTrackerStub,this.listenerChildrenTracker=new Wt.ChannelzChildrenTrackerStub,this.sessionChildrenTracker=new Wt.ChannelzChildrenTrackerStub):(this.channelzTrace=new Wt.ChannelzTrace,this.callTracker=new Wt.ChannelzCallTracker,this.listenerChildrenTracker=new Wt.ChannelzChildrenTracker,this.sessionChildrenTracker=new Wt.ChannelzChildrenTracker),this.channelzRef=(0, Wt.registerChannelzServer)("server",()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzTrace.addTrace("CT_INFO","Server created"),this.maxConnectionAgeMs=(a=this.options["grpc.max_connection_age_ms"])!==null&&a!==void 0?a:pl,this.maxConnectionAgeGraceMs=(o=this.options["grpc.max_connection_age_grace_ms"])!==null&&o!==void 0?o:pl,this.keepaliveTimeMs=(i=this.options["grpc.keepalive_time_ms"])!==null&&i!==void 0?i:QI,this.keepaliveTimeoutMs=(c=this.options["grpc.keepalive_timeout_ms"])!==null&&c!==void 0?c:pVe,this.sessionIdleTimeout=(u=this.options["grpc.max_connection_idle_ms"])!==null&&u!==void 0?u:iX,this.commonServerOptions={maxSendHeaderBlockLength:Number.MAX_SAFE_INTEGER},"grpc-node.max_session_memory"in this.options?this.commonServerOptions.maxSessionMemory=this.options["grpc-node.max_session_memory"]:this.commonServerOptions.maxSessionMemory=Number.MAX_SAFE_INTEGER,"grpc.max_concurrent_streams"in this.options&&(this.commonServerOptions.settings={maxConcurrentStreams:this.options["grpc.max_concurrent_streams"]}),this.interceptors=(l=this.options.interceptors)!==null&&l!==void 0?l:[],this.trace("Server constructed");}getChannelzInfo(){return {trace:this.channelzTrace,callTracker:this.callTracker,listenerChildren:this.listenerChildrenTracker.getChildLists(),sessionChildren:this.sessionChildrenTracker.getChildLists()}}getChannelzSessionInfo(s){var a,o,i;let c=this.sessions.get(s),u=s.socket,l=u.remoteAddress?(0, Ds.stringToSubchannelAddress)(u.remoteAddress,u.remotePort):null,d=u.localAddress?(0, Ds.stringToSubchannelAddress)(u.localAddress,u.localPort):null,p;if(s.encrypted){let T=u,g=T.getCipher(),y=T.getCertificate(),R=T.getPeerCertificate();p={cipherSuiteStandardName:(a=g.standardName)!==null&&a!==void 0?a:null,cipherSuiteOtherName:g.standardName?null:g.name,localCertificate:y&&"raw"in y?y.raw:null,remoteCertificate:R&&"raw"in R?R.raw:null};}else p=null;return {remoteAddress:l,localAddress:d,security:p,remoteName:null,streamsStarted:c.streamTracker.callsStarted,streamsSucceeded:c.streamTracker.callsSucceeded,streamsFailed:c.streamTracker.callsFailed,messagesSent:c.messagesSent,messagesReceived:c.messagesReceived,keepAlivesSent:c.keepAlivesSent,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:c.streamTracker.lastCallStartedTimestamp,lastMessageSentTimestamp:c.lastMessageSentTimestamp,lastMessageReceivedTimestamp:c.lastMessageReceivedTimestamp,localFlowControlWindow:(o=s.state.localWindowSize)!==null&&o!==void 0?o:null,remoteFlowControlWindow:(i=s.state.remoteWindowSize)!==null&&i!==void 0?i:null}}trace(s){fl.trace(Dt.LogVerbosity.DEBUG,fVe,"("+this.channelzRef.id+") "+s);}keepaliveTrace(s){fl.trace(Dt.LogVerbosity.DEBUG,"keepalive","("+this.channelzRef.id+") "+s);}addProtoService(){throw new Error("Not implemented. Use addService() instead")}addService(s,a){if(s===null||typeof s!="object"||a===null||typeof a!="object")throw new Error("addService() requires two objects as arguments");let o=Object.keys(s);if(o.length===0)throw new Error("Cannot add an empty service to a server");o.forEach(i=>{let c=s[i],u;c.requestStream?c.responseStream?u="bidi":u="clientStream":c.responseStream?u="serverStream":u="unary";let l=a[i],d;if(l===void 0&&typeof c.originalName=="string"&&(l=a[c.originalName]),l!==void 0?d=l.bind(a):d=mVe(u,i),this.register(c.path,d,c.responseSerialize,c.requestDeserialize,u)===false)throw new Error(`Method handler for ${c.path} already provided.`)});}removeService(s){if(s===null||typeof s!="object")throw new Error("removeService() requires object as argument");Object.keys(s).forEach(o=>{let i=s[o];this.unregister(i.path);});}bind(s,a){throw new Error("Not implemented. Use bindAsync() instead")}experimentalRegisterListenerToChannelz(s){return (0, Wt.registerChannelzSocket)((0, Ds.subchannelAddressToString)(s),()=>({localAddress:s,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}),this.channelzEnabled)}experimentalUnregisterListenerFromChannelz(s){(0, Wt.unregisterChannelzRef)(s);}createHttp2Server(s){let a;if(s._isSecure()){let o=s._getConstructorOptions(),i=s._getSecureContextOptions(),c=Object.assign(Object.assign(Object.assign(Object.assign({},this.commonServerOptions),o),i),{enableTrace:this.options["grpc-node.tls_enable_trace"]===1}),u=i!==null;this.trace("Initial credentials valid: "+u),a=an.createSecureServer(c),a.prependListener("connection",d=>{u||(this.trace("Dropped connection from "+JSON.stringify(d.address())+" due to unloaded credentials"),d.destroy());}),a.on("secureConnection",d=>{d.on("error",p=>{this.trace("An incoming TLS connection closed with error: "+p.message);});});let l=d=>{if(d){let p=a;try{p.setSecureContext(d);}catch(h){fl.log(Dt.LogVerbosity.ERROR,"Failed to set secure context with error "+h.message),d=null;}}u=d!==null,this.trace("Post-update credentials valid: "+u);};s._addWatcher(l),a.on("close",()=>{s._removeWatcher(l);});}else a=an.createServer(this.commonServerOptions);return a.setTimeout(0,hVe),this._setupHandlers(a,s._getInterceptors()),a}bindOneAddress(s,a){this.trace("Attempting to bind "+(0, Ds.subchannelAddressToString)(s));let o=this.createHttp2Server(a.credentials);return new Promise((i,c)=>{let u=l=>{this.trace("Failed to bind "+(0, Ds.subchannelAddressToString)(s)+" with error "+l.message),i({port:"port"in s?s.port:1,error:l.message});};o.once("error",u),o.listen(s,()=>{let l=o.address(),d;typeof l=="string"?d={path:l}:d={host:l.address,port:l.port};let p=this.experimentalRegisterListenerToChannelz(d);this.listenerChildrenTracker.refChild(p),this.http2Servers.set(o,{channelzRef:p,sessions:new Set,ownsChannelzRef:true}),a.listeningServers.add(o),this.trace("Successfully bound "+(0, Ds.subchannelAddressToString)(d)),i({port:"port"in d?d.port:1}),o.removeListener("error",u);});})}async bindManyPorts(s,a){if(s.length===0)return {count:0,port:0,errors:[]};if((0, Ds.isTcpSubchannelAddress)(s[0])&&s[0].port===0){let o=await this.bindOneAddress(s[0],a);if(o.error){let i=await this.bindManyPorts(s.slice(1),a);return Object.assign(Object.assign({},i),{errors:[o.error,...i.errors]})}else {let i=s.slice(1).map(l=>(0, Ds.isTcpSubchannelAddress)(l)?{host:l.host,port:o.port}:l),c=await Promise.all(i.map(l=>this.bindOneAddress(l,a))),u=[o,...c];return {count:u.filter(l=>l.error===void 0).length,port:o.port,errors:u.filter(l=>l.error).map(l=>l.error)}}}else {let o=await Promise.all(s.map(i=>this.bindOneAddress(i,a)));return {count:o.filter(i=>i.error===void 0).length,port:o[0].port,errors:o.filter(i=>i.error).map(i=>i.error)}}}async bindAddressList(s,a){let o=await this.bindManyPorts(s,a);if(o.count>0)return o.count<s.length&&fl.log(Dt.LogVerbosity.INFO,`WARNING Only ${o.count} addresses added out of total ${s.length} resolved`),o.port;{let i=`No address added out of total ${s.length} resolved`;throw fl.log(Dt.LogVerbosity.ERROR,i),new Error(`${i} errors: [${o.errors.join(",")}]`)}}resolvePort(s){return new Promise((a,o)=>{let i={onSuccessfulResolution:(u,l,d)=>{i.onSuccessfulResolution=()=>{};let p=[].concat(...u.map(h=>h.addresses));if(p.length===0){o(new Error(`No addresses resolved for port ${s}`));return}a(p);},onError:u=>{o(new Error(u.details));}};(0, rX.createResolver)(s,i,this.options).updateResolution();})}async bindPort(s,a){let o=await this.resolvePort(s);if(a.cancelled)throw this.completeUnbind(a),new Error("bindAsync operation cancelled by unbind call");let i=await this.bindAddressList(o,a);if(a.cancelled)throw this.completeUnbind(a),new Error("bindAsync operation cancelled by unbind call");return i}normalizePort(s){let a=(0, vi.parseUri)(s);if(a===null)throw new Error(`Could not parse port "${s}"`);let o=(0, rX.mapUriDefaultScheme)(a);if(o===null)throw new Error(`Could not get a default scheme for port "${s}"`);return o}bindAsync(s,a,o){if(this.shutdown)throw new Error("bindAsync called after shutdown");if(typeof s!="string")throw new TypeError("port must be a string");if(a===null||!(a instanceof XI.ServerCredentials))throw new TypeError("creds must be a ServerCredentials object");if(typeof o!="function")throw new TypeError("callback must be a function");this.trace("bindAsync port="+s);let i=this.normalizePort(s),c=(p,h)=>{process.nextTick(()=>o(p,h));},u=this.boundPorts.get((0, vi.uriToString)(i));if(u){if(!a._equals(u.credentials)){c(new Error(`${s} already bound with incompatible credentials`),0);return}u.cancelled=false,u.completionPromise?u.completionPromise.then(p=>o(null,p),p=>o(p,0)):c(null,u.portNumber);return}u={mapKey:(0, vi.uriToString)(i),originalUri:i,completionPromise:null,cancelled:false,portNumber:0,credentials:a,listeningServers:new Set};let l=(0, vi.splitHostPort)(i.path),d=this.bindPort(i,u);u.completionPromise=d,l?.port===0?d.then(p=>{let h={scheme:i.scheme,authority:i.authority,path:(0, vi.combineHostPort)({host:l.host,port:p})};u.mapKey=(0, vi.uriToString)(h),u.completionPromise=null,u.portNumber=p,this.boundPorts.set(u.mapKey,u),o(null,p);},p=>{o(p,0);}):(this.boundPorts.set(u.mapKey,u),d.then(p=>{u.completionPromise=null,u.portNumber=p,o(null,p);},p=>{o(p,0);}));}registerInjectorToChannelz(){return (0, Wt.registerChannelzSocket)("injector",()=>({localAddress:null,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}),this.channelzEnabled)}experimentalCreateConnectionInjectorWithChannelzRef(s,a,o=false){if(s===null||!(s instanceof XI.ServerCredentials))throw new TypeError("creds must be a ServerCredentials object");this.channelzEnabled&&this.listenerChildrenTracker.refChild(a);let i=this.createHttp2Server(s),c=new Set;return this.http2Servers.set(i,{channelzRef:a,sessions:c,ownsChannelzRef:o}),{injectConnection:u=>{i.emit("connection",u);},drain:u=>{var l,d;for(let p of c)this.closeSession(p);(d=(l=setTimeout(()=>{for(let p of c)p.destroy(an.constants.NGHTTP2_CANCEL);},u)).unref)===null||d===void 0||d.call(l);},destroy:()=>{this.closeServer(i);for(let u of c)this.closeSession(u);}}}createConnectionInjector(s){if(s===null||!(s instanceof XI.ServerCredentials))throw new TypeError("creds must be a ServerCredentials object");let a=this.registerInjectorToChannelz();return this.experimentalCreateConnectionInjectorWithChannelzRef(s,a,true)}closeServer(s,a){this.trace("Closing server with address "+JSON.stringify(s.address()));let o=this.http2Servers.get(s);s.close(()=>{o&&o.ownsChannelzRef&&(this.listenerChildrenTracker.unrefChild(o.channelzRef),(0, Wt.unregisterChannelzRef)(o.channelzRef)),this.http2Servers.delete(s),a?.();});}closeSession(s,a){var o;this.trace("Closing session initiated by "+((o=s.socket)===null||o===void 0?void 0:o.remoteAddress));let i=this.sessions.get(s),c=()=>{i&&(this.sessionChildrenTracker.unrefChild(i.ref),(0, Wt.unregisterChannelzRef)(i.ref)),a?.();};s.closed?queueMicrotask(c):s.close(c);}completeUnbind(s){for(let a of s.listeningServers){let o=this.http2Servers.get(a);if(this.closeServer(a,()=>{s.listeningServers.delete(a);}),o)for(let i of o.sessions)this.closeSession(i);}this.boundPorts.delete(s.mapKey);}unbind(s){this.trace("unbind port="+s);let a=this.normalizePort(s),o=(0, vi.splitHostPort)(a.path);if(o?.port===0)throw new Error("Cannot unbind port 0");let i=this.boundPorts.get((0, vi.uriToString)(a));i&&(this.trace("unbinding "+i.mapKey+" originally bound as "+(0, vi.uriToString)(i.originalUri)),i.completionPromise?i.cancelled=true:this.completeUnbind(i));}drain(s,a){var o,i;this.trace("drain port="+s+" graceTimeMs="+a);let c=this.normalizePort(s),u=(0, vi.splitHostPort)(c.path);if(u?.port===0)throw new Error("Cannot drain port 0");let l=this.boundPorts.get((0, vi.uriToString)(c));if(!l)return;let d=new Set;for(let p of l.listeningServers){let h=this.http2Servers.get(p);if(h)for(let T of h.sessions)d.add(T),this.closeSession(T,()=>{d.delete(T);});}(i=(o=setTimeout(()=>{for(let p of d)p.destroy(an.constants.NGHTTP2_CANCEL);},a)).unref)===null||i===void 0||i.call(o);}forceShutdown(){for(let s of this.boundPorts.values())s.cancelled=true;this.boundPorts.clear();for(let s of this.http2Servers.keys())this.closeServer(s);this.sessions.forEach((s,a)=>{this.closeSession(a),a.destroy(an.constants.NGHTTP2_CANCEL);}),this.sessions.clear(),(0, Wt.unregisterChannelzRef)(this.channelzRef),this.shutdown=true;}register(s,a,o,i,c){return this.handlers.has(s)?false:(this.handlers.set(s,{func:a,serialize:o,deserialize:i,type:c,path:s}),true)}unregister(s){return this.handlers.delete(s)}start(){if(this.http2Servers.size===0||[...this.http2Servers.keys()].every(s=>!s.listening))throw new Error("server must be bound in order to start");if(this.started===true)throw new Error("server is already started");this.started=true;}tryShutdown(s){var a;let o=u=>{(0, Wt.unregisterChannelzRef)(this.channelzRef),s(u);},i=0;function c(){i--,i===0&&o();}this.shutdown=true;for(let[u,l]of this.http2Servers.entries()){i++;let d=l.channelzRef.name;this.trace("Waiting for server "+d+" to close"),this.closeServer(u,()=>{this.trace("Server "+d+" finished closing"),c();});for(let p of l.sessions.keys()){i++;let h=(a=p.socket)===null||a===void 0?void 0:a.remoteAddress;this.trace("Waiting for session "+h+" to close"),this.closeSession(p,()=>{this.trace("Session "+h+" finished closing"),c();});}}i===0&&o();}addHttp2Port(){throw new Error("Not yet implemented")}getChannelzRef(){return this.channelzRef}_verifyContentType(s,a){let o=a[an.constants.HTTP2_HEADER_CONTENT_TYPE];return typeof o!="string"||!o.startsWith("application/grpc")?(s.respond({[an.constants.HTTP2_HEADER_STATUS]:an.constants.HTTP_STATUS_UNSUPPORTED_MEDIA_TYPE},{endStream:true}),false):true}_retrieveHandler(s){aX("Received call to method "+s+" at address "+this.serverAddressString);let a=this.handlers.get(s);return a===void 0?(aX("No handler registered for method "+s+". Sending UNIMPLEMENTED status."),null):a}_respondWithError(s,a,o=null){var i,c;let u=Object.assign({"grpc-status":(i=s.code)!==null&&i!==void 0?i:Dt.Status.INTERNAL,"grpc-message":s.details,[an.constants.HTTP2_HEADER_STATUS]:an.constants.HTTP_STATUS_OK,[an.constants.HTTP2_HEADER_CONTENT_TYPE]:"application/grpc+proto"},(c=s.metadata)===null||c===void 0?void 0:c.toHttp2Headers());a.respond(u,{endStream:true}),this.callTracker.addCallFailed(),o?.streamTracker.addCallFailed();}_channelzHandler(s,a,o){this.onStreamOpened(a);let i=this.sessions.get(a.session);if(this.callTracker.addCallStarted(),i?.streamTracker.addCallStarted(),!this._verifyContentType(a,o)){this.callTracker.addCallFailed(),i?.streamTracker.addCallFailed();return}let c=o[oX],u=this._retrieveHandler(c);if(!u){this._respondWithError(JI(c),a,i);return}let l={addMessageSent:()=>{i&&(i.messagesSent+=1,i.lastMessageSentTimestamp=new Date);},addMessageReceived:()=>{i&&(i.messagesReceived+=1,i.lastMessageReceivedTimestamp=new Date);},onCallEnd:p=>{p.code===Dt.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed();},onStreamEnd:p=>{i&&(p?i.streamTracker.addCallSucceeded():i.streamTracker.addCallFailed());}},d=(0, nX.getServerInterceptingCall)([...s,...this.interceptors],a,o,l,u,this.options);this._runHandlerForCall(d,u)||(this.callTracker.addCallFailed(),i?.streamTracker.addCallFailed(),d.sendStatus({code:Dt.Status.INTERNAL,details:`Unknown handler type: ${u.type}`}));}_streamHandler(s,a,o){if(this.onStreamOpened(a),this._verifyContentType(a,o)!==true)return;let i=o[oX],c=this._retrieveHandler(i);if(!c){this._respondWithError(JI(i),a,null);return}let u=(0, nX.getServerInterceptingCall)([...s,...this.interceptors],a,o,null,c,this.options);this._runHandlerForCall(u,c)||u.sendStatus({code:Dt.Status.INTERNAL,details:`Unknown handler type: ${c.type}`});}_runHandlerForCall(s,a){let{type:o}=a;if(o==="unary")TVe(s,a);else if(o==="clientStream")SVe(s,a);else if(o==="serverStream")gVe(s,a);else if(o==="bidi")yVe(s,a);else return  false;return  true}_setupHandlers(s,a){if(s===null)return;let o=s.address(),i="null";o&&(typeof o=="string"?i=o:i=o.address+":"+o.port),this.serverAddressString=i;let c=this.channelzEnabled?this._channelzHandler:this._streamHandler,u=this.channelzEnabled?this._channelzSessionHandler(s):this._sessionHandler(s);s.on("stream",c.bind(this,a)),s.on("session",u);}_sessionHandler(s){return a=>{var o,i;(o=this.http2Servers.get(s))===null||o===void 0||o.sessions.add(a);let c=null,u=null,l=null,d=false,p=this.enableIdleTimeout(a);if(this.maxConnectionAgeMs!==pl){let R=this.maxConnectionAgeMs/10,b=Math.random()*R*2-R;c=setTimeout(()=>{var w,v;d=true,this.trace("Connection dropped by max connection age: "+((w=a.socket)===null||w===void 0?void 0:w.remoteAddress));try{a.goaway(an.constants.NGHTTP2_NO_ERROR,~(1<<31),sX);}catch{a.destroy();return}a.close(),this.maxConnectionAgeGraceMs!==pl&&(u=setTimeout(()=>{a.destroy();},this.maxConnectionAgeGraceMs),(v=u.unref)===null||v===void 0||v.call(u));},this.maxConnectionAgeMs+b),(i=c.unref)===null||i===void 0||i.call(c);}let h=()=>{l&&(clearTimeout(l),l=null);},T=()=>!a.destroyed&&this.keepaliveTimeMs<QI&&this.keepaliveTimeMs>0,g,y=()=>{var R;T()&&(this.keepaliveTrace("Starting keepalive timer for "+this.keepaliveTimeMs+"ms"),l=setTimeout(()=>{h(),g();},this.keepaliveTimeMs),(R=l.unref)===null||R===void 0||R.call(l));};g=()=>{var R;if(!T())return;this.keepaliveTrace("Sending ping with timeout "+this.keepaliveTimeoutMs+"ms");let b="";try{a.ping((v,V,B)=>{h(),v?(this.keepaliveTrace("Ping failed with error: "+v.message),d=!0,a.close()):(this.keepaliveTrace("Received ping response"),y());})||(b="Ping returned false");}catch(w){b=(w instanceof Error?w.message:"")||"Unknown error";}if(b){this.keepaliveTrace("Ping send failed: "+b),this.trace("Connection dropped due to ping send error: "+b),d=true,a.close();return}l=setTimeout(()=>{h(),this.keepaliveTrace("Ping timeout passed without response"),this.trace("Connection dropped by keepalive timeout"),d=true,a.close();},this.keepaliveTimeoutMs),(R=l.unref)===null||R===void 0||R.call(l);},y(),a.on("close",()=>{var R,b;d||this.trace(`Connection dropped by client ${(R=a.socket)===null||R===void 0?void 0:R.remoteAddress}`),c&&clearTimeout(c),u&&clearTimeout(u),h(),p!==null&&(clearTimeout(p.timeout),this.sessionIdleTimeouts.delete(a)),(b=this.http2Servers.get(s))===null||b===void 0||b.sessions.delete(a);});}}_channelzSessionHandler(s){return a=>{var o,i,c,u;let l=(0, Wt.registerChannelzSocket)((i=(o=a.socket)===null||o===void 0?void 0:o.remoteAddress)!==null&&i!==void 0?i:"unknown",this.getChannelzSessionInfo.bind(this,a),this.channelzEnabled),d={ref:l,streamTracker:new Wt.ChannelzCallTracker,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null};(c=this.http2Servers.get(s))===null||c===void 0||c.sessions.add(a),this.sessions.set(a,d);let p=`${a.socket.remoteAddress}:${a.socket.remotePort}`;this.channelzTrace.addTrace("CT_INFO","Connection established by client "+p),this.trace("Connection established by client "+p),this.sessionChildrenTracker.refChild(l);let h=null,T=null,g=null,y=false,R=this.enableIdleTimeout(a);if(this.maxConnectionAgeMs!==pl){let B=this.maxConnectionAgeMs/10,F=Math.random()*B*2-B;h=setTimeout(()=>{var te;y=true,this.channelzTrace.addTrace("CT_INFO","Connection dropped by max connection age from "+p);try{a.goaway(an.constants.NGHTTP2_NO_ERROR,~(1<<31),sX);}catch{a.destroy();return}a.close(),this.maxConnectionAgeGraceMs!==pl&&(T=setTimeout(()=>{a.destroy();},this.maxConnectionAgeGraceMs),(te=T.unref)===null||te===void 0||te.call(T));},this.maxConnectionAgeMs+F),(u=h.unref)===null||u===void 0||u.call(h);}let b=()=>{g&&(clearTimeout(g),g=null);},w=()=>!a.destroyed&&this.keepaliveTimeMs<QI&&this.keepaliveTimeMs>0,v,V=()=>{var B;w()&&(this.keepaliveTrace("Starting keepalive timer for "+this.keepaliveTimeMs+"ms"),g=setTimeout(()=>{b(),v();},this.keepaliveTimeMs),(B=g.unref)===null||B===void 0||B.call(g));};v=()=>{var B;if(!w())return;this.keepaliveTrace("Sending ping with timeout "+this.keepaliveTimeoutMs+"ms");let F="";try{a.ping((K,Ee,C)=>{b(),K?(this.keepaliveTrace("Ping failed with error: "+K.message),this.channelzTrace.addTrace("CT_INFO","Connection dropped due to error of a ping frame "+K.message+" return in "+Ee),y=!0,a.close()):(this.keepaliveTrace("Received ping response"),V());})||(F="Ping returned false");}catch(te){F=(te instanceof Error?te.message:"")||"Unknown error";}if(F){this.keepaliveTrace("Ping send failed: "+F),this.channelzTrace.addTrace("CT_INFO","Connection dropped due to ping send error: "+F),y=true,a.close();return}d.keepAlivesSent+=1,g=setTimeout(()=>{b(),this.keepaliveTrace("Ping timeout passed without response"),this.channelzTrace.addTrace("CT_INFO","Connection dropped by keepalive timeout from "+p),y=true,a.close();},this.keepaliveTimeoutMs),(B=g.unref)===null||B===void 0||B.call(g);},V(),a.on("close",()=>{var B;y||this.channelzTrace.addTrace("CT_INFO","Connection dropped by client "+p),this.sessionChildrenTracker.unrefChild(l),(0, Wt.unregisterChannelzRef)(l),h&&clearTimeout(h),T&&clearTimeout(T),b(),R!==null&&(clearTimeout(R.timeout),this.sessionIdleTimeouts.delete(a)),(B=this.http2Servers.get(s))===null||B===void 0||B.sessions.delete(a),this.sessions.delete(a);});}}enableIdleTimeout(s){var a,o;if(this.sessionIdleTimeout>=iX)return null;let i={activeStreams:0,lastIdle:Date.now(),onClose:this.onStreamClose.bind(this,s),timeout:setTimeout(this.onIdleTimeout,this.sessionIdleTimeout,this,s)};(o=(a=i.timeout).unref)===null||o===void 0||o.call(a),this.sessionIdleTimeouts.set(s,i);let{socket:c}=s;return this.trace("Enable idle timeout for "+c.remoteAddress+":"+c.remotePort),i}onIdleTimeout(s,a){let{socket:o}=a,i=s.sessionIdleTimeouts.get(a);i!==void 0&&i.activeStreams===0&&(Date.now()-i.lastIdle>=s.sessionIdleTimeout?(s.trace("Session idle timeout triggered for "+o?.remoteAddress+":"+o?.remotePort+" last idle at "+i.lastIdle),s.closeSession(a)):i.timeout.refresh());}onStreamOpened(s){let a=s.session,o=this.sessionIdleTimeouts.get(a);o&&(o.activeStreams+=1,s.once("close",o.onClose));}onStreamClose(s){var a,o;let i=this.sessionIdleTimeouts.get(s);i&&(i.activeStreams-=1,i.activeStreams===0&&(i.lastIdle=Date.now(),i.timeout.refresh(),this.trace("Session onStreamClose"+((a=s.socket)===null||a===void 0?void 0:a.remoteAddress)+":"+((o=s.socket)===null||o===void 0?void 0:o.remotePort)+" at "+i.lastIdle)));}},(()=>{let n=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;r=[_Ve("Calling start() is no longer necessary. It can be safely omitted.")],lVe(t,null,r,{kind:"method",name:"start",static:false,private:false,access:{has:s=>"start"in s,get:s=>s.start},metadata:n},null,e),n&&Object.defineProperty(t,Symbol.metadata,{enumerable:true,configurable:true,writable:true,value:n});})(),t})();ws.Server=EVe;async function TVe(t,e){let r;function n(o,i,c,u){if(o){t.sendStatus((0, hl.serverErrorToStatus)(o,c));return}t.sendMessage(i,()=>{t.sendStatus({code:Dt.Status.OK,details:"OK",metadata:c??null});});}let s,a=null;t.start({onReceiveMetadata(o){s=o,t.startRead();},onReceiveMessage(o){if(a){t.sendStatus({code:Dt.Status.UNIMPLEMENTED,details:`Received a second request message for server streaming method ${e.path}`,metadata:null});return}a=o,t.startRead();},onReceiveHalfClose(){if(!a){t.sendStatus({code:Dt.Status.UNIMPLEMENTED,details:`Received no request message for server streaming method ${e.path}`,metadata:null});return}r=new hl.ServerWritableStreamImpl(e.path,t,s,a);try{e.func(r,n);}catch(o){t.sendStatus({code:Dt.Status.UNKNOWN,details:`Server method handler threw error ${o.message}`,metadata:null});}},onCancel(){r&&(r.cancelled=true,r.emit("cancelled","cancelled"));}});}function SVe(t,e){let r;function n(s,a,o,i){if(s){t.sendStatus((0, hl.serverErrorToStatus)(s,o));return}t.sendMessage(a,()=>{t.sendStatus({code:Dt.Status.OK,details:"OK",metadata:o??null});});}t.start({onReceiveMetadata(s){r=new hl.ServerDuplexStreamImpl(e.path,t,s);try{e.func(r,n);}catch(a){t.sendStatus({code:Dt.Status.UNKNOWN,details:`Server method handler threw error ${a.message}`,metadata:null});}},onReceiveMessage(s){r.push(s);},onReceiveHalfClose(){r.push(null);},onCancel(){r&&(r.cancelled=true,r.emit("cancelled","cancelled"),r.destroy());}});}function gVe(t,e){let r,n,s=null;t.start({onReceiveMetadata(a){n=a,t.startRead();},onReceiveMessage(a){if(s){t.sendStatus({code:Dt.Status.UNIMPLEMENTED,details:`Received a second request message for server streaming method ${e.path}`,metadata:null});return}s=a,t.startRead();},onReceiveHalfClose(){if(!s){t.sendStatus({code:Dt.Status.UNIMPLEMENTED,details:`Received no request message for server streaming method ${e.path}`,metadata:null});return}r=new hl.ServerWritableStreamImpl(e.path,t,n,s);try{e.func(r);}catch(a){t.sendStatus({code:Dt.Status.UNKNOWN,details:`Server method handler threw error ${a.message}`,metadata:null});}},onCancel(){r&&(r.cancelled=true,r.emit("cancelled","cancelled"),r.destroy());}});}function yVe(t,e){let r;t.start({onReceiveMetadata(n){r=new hl.ServerDuplexStreamImpl(e.path,t,n);try{e.func(r);}catch(s){t.sendStatus({code:Dt.Status.UNKNOWN,details:`Server method handler threw error ${s.message}`,metadata:null});}},onReceiveMessage(n){r.push(n);},onReceiveHalfClose(){r.push(null);},onCancel(){r&&(r.cancelled=true,r.emit("cancelled","cancelled"),r.destroy());}});}});var uX=f(ry=>{Object.defineProperty(ry,"__esModule",{value:true});ry.StatusBuilder=void 0;var ZI=class{constructor(){this.code=null,this.details=null,this.metadata=null;}withCode(e){return this.code=e,this}withDetails(e){return this.details=e,this}withMetadata(e){return this.metadata=e,this}build(){let e={};return this.code!==null&&(e.code=this.code),this.details!==null&&(e.details=this.details),this.metadata!==null&&(e.metadata=this.metadata),e}};ry.StatusBuilder=ZI;});var e0=f(_l=>{Object.defineProperty(_l,"__esModule",{value:true});_l.msToDuration=AVe;_l.durationToMs=RVe;_l.isDuration=vVe;_l.parseDuration=NVe;function AVe(t){return {seconds:t/1e3|0,nanos:t%1e3*1e6|0}}function RVe(t){return t.seconds*1e3+t.nanos/1e6|0}function vVe(t){return typeof t.seconds=="number"&&typeof t.nanos=="number"}var OVe=/^(\d+)(?:\.(\d+))?s$/;function NVe(t){let e=t.match(OVe);return e?{seconds:Number.parseInt(e[1],10),nanos:e[2]?Number.parseInt(e[2].padEnd(9,"0"),10):0}:null}});var ny=f(to=>{Object.defineProperty(to,"__esModule",{value:true});to.LeafLoadBalancer=to.PickFirstLoadBalancer=to.PickFirstLoadBalancingConfig=void 0;to.shuffled=fX;to.setup=LVe;var t0=Ba(),Gt=Bn(),rc=Rs(),lX=Fn(),CVe=ut(),PVe=Ie(),dX=Fn(),pX=P("net"),bVe="pick_first";function mh(t){CVe.trace(PVe.LogVerbosity.DEBUG,bVe,t);}var Eh="pick_first",MVe=250,ml=class t{constructor(e){this.shuffleAddressList=e;}getLoadBalancerName(){return Eh}toJsonObject(){return {[Eh]:{shuffleAddressList:this.shuffleAddressList}}}getShuffleAddressList(){return this.shuffleAddressList}static createFromJson(e){if("shuffleAddressList"in e&&typeof e.shuffleAddressList!="boolean")throw new Error("pick_first config field shuffleAddressList must be a boolean if provided");return new t(e.shuffleAddressList===true)}};to.PickFirstLoadBalancingConfig=ml;var r0=class{constructor(e){this.subchannel=e;}pick(e){return {pickResultType:rc.PickResultType.COMPLETE,subchannel:this.subchannel,status:null,onCallStarted:null,onCallEnded:null}}};function fX(t){let e=t.slice();for(let r=e.length-1;r>1;r--){let n=Math.floor(Math.random()*(r+1)),s=e[r];e[r]=e[n],e[n]=s;}return e}function IVe(t){if(t.length===0)return [];let e=[],r=[],n=[],s=(0, dX.isTcpSubchannelAddress)(t[0])&&(0, pX.isIPv6)(t[0].host);for(let i of t)(0, dX.isTcpSubchannelAddress)(i)&&(0, pX.isIPv6)(i.host)?r.push(i):n.push(i);let a=s?r:n,o=s?n:r;for(let i=0;i<Math.max(a.length,o.length);i++)i<a.length&&e.push(a[i]),i<o.length&&e.push(o[i]);return e}var hX="grpc-node.internal.pick-first.report_health_status",Th=class{constructor(e){this.channelControlHelper=e,this.children=[],this.currentState=Gt.ConnectivityState.IDLE,this.currentSubchannelIndex=0,this.currentPick=null,this.subchannelStateListener=(r,n,s,a,o)=>{this.onSubchannelStateUpdate(r,n,s,o);},this.pickedSubchannelHealthListener=()=>this.calculateAndReportNewState(),this.stickyTransientFailureMode=false,this.reportHealthStatus=false,this.lastError=null,this.latestAddressList=null,this.latestOptions={},this.connectionDelayTimeout=setTimeout(()=>{},0),clearTimeout(this.connectionDelayTimeout);}allChildrenHaveReportedTF(){return this.children.every(e=>e.hasReportedTransientFailure)}resetChildrenReportedTF(){this.children.every(e=>e.hasReportedTransientFailure=false);}calculateAndReportNewState(){var e;if(this.currentPick)if(this.reportHealthStatus&&!this.currentPick.isHealthy()){let r=`Picked subchannel ${this.currentPick.getAddress()} is unhealthy`;this.updateState(Gt.ConnectivityState.TRANSIENT_FAILURE,new rc.UnavailablePicker({details:r}),r);}else this.updateState(Gt.ConnectivityState.READY,new r0(this.currentPick),null);else if(((e=this.latestAddressList)===null||e===void 0?void 0:e.length)===0){let r=`No connection established. Last error: ${this.lastError}`;this.updateState(Gt.ConnectivityState.TRANSIENT_FAILURE,new rc.UnavailablePicker({details:r}),r);}else if(this.children.length===0)this.updateState(Gt.ConnectivityState.IDLE,new rc.QueuePicker(this),null);else if(this.stickyTransientFailureMode){let r=`No connection established. Last error: ${this.lastError}`;this.updateState(Gt.ConnectivityState.TRANSIENT_FAILURE,new rc.UnavailablePicker({details:r}),r);}else this.updateState(Gt.ConnectivityState.CONNECTING,new rc.QueuePicker(this),null);}requestReresolution(){this.channelControlHelper.requestReresolution();}maybeEnterStickyTransientFailureMode(){if(this.allChildrenHaveReportedTF()){if(this.requestReresolution(),this.resetChildrenReportedTF(),this.stickyTransientFailureMode){this.calculateAndReportNewState();return}this.stickyTransientFailureMode=true;for(let{subchannel:e}of this.children)e.startConnecting();this.calculateAndReportNewState();}}removeCurrentPick(){this.currentPick!==null&&(this.currentPick.removeConnectivityStateListener(this.subchannelStateListener),this.channelControlHelper.removeChannelzChild(this.currentPick.getChannelzRef()),this.currentPick.removeHealthStateWatcher(this.pickedSubchannelHealthListener),this.currentPick.unref(),this.currentPick=null);}onSubchannelStateUpdate(e,r,n,s){var a;if(!((a=this.currentPick)===null||a===void 0)&&a.realSubchannelEquals(e)){n!==Gt.ConnectivityState.READY&&(this.removeCurrentPick(),this.calculateAndReportNewState());return}for(let[o,i]of this.children.entries())if(e.realSubchannelEquals(i.subchannel)){n===Gt.ConnectivityState.READY&&this.pickSubchannel(i.subchannel),n===Gt.ConnectivityState.TRANSIENT_FAILURE&&(i.hasReportedTransientFailure=true,s&&(this.lastError=s),this.maybeEnterStickyTransientFailureMode(),o===this.currentSubchannelIndex&&this.startNextSubchannelConnecting(o+1)),i.subchannel.startConnecting();return}}startNextSubchannelConnecting(e){clearTimeout(this.connectionDelayTimeout);for(let[r,n]of this.children.entries())if(r>=e){let s=n.subchannel.getConnectivityState();if(s===Gt.ConnectivityState.IDLE||s===Gt.ConnectivityState.CONNECTING){this.startConnecting(r);return}}this.maybeEnterStickyTransientFailureMode();}startConnecting(e){var r,n;clearTimeout(this.connectionDelayTimeout),this.currentSubchannelIndex=e,this.children[e].subchannel.getConnectivityState()===Gt.ConnectivityState.IDLE&&(mh("Start connecting to subchannel with address "+this.children[e].subchannel.getAddress()),process.nextTick(()=>{var s;(s=this.children[e])===null||s===void 0||s.subchannel.startConnecting();})),this.connectionDelayTimeout=setTimeout(()=>{this.startNextSubchannelConnecting(e+1);},MVe),(n=(r=this.connectionDelayTimeout).unref)===null||n===void 0||n.call(r);}pickSubchannel(e){mh("Pick subchannel with address "+e.getAddress()),this.stickyTransientFailureMode=false,e.ref(),this.channelControlHelper.addChannelzChild(e.getChannelzRef()),this.removeCurrentPick(),this.resetSubchannelList(),e.addConnectivityStateListener(this.subchannelStateListener),e.addHealthStateWatcher(this.pickedSubchannelHealthListener),this.currentPick=e,clearTimeout(this.connectionDelayTimeout),this.calculateAndReportNewState();}updateState(e,r,n){mh(Gt.ConnectivityState[this.currentState]+" -> "+Gt.ConnectivityState[e]),this.currentState=e,this.channelControlHelper.updateState(e,r,n);}resetSubchannelList(){for(let e of this.children)e.subchannel.removeConnectivityStateListener(this.subchannelStateListener),e.subchannel.unref(),this.channelControlHelper.removeChannelzChild(e.subchannel.getChannelzRef());this.currentSubchannelIndex=0,this.children=[];}connectToAddressList(e,r){mh("connectToAddressList(["+e.map(s=>(0, lX.subchannelAddressToString)(s))+"])");let n=e.map(s=>({subchannel:this.channelControlHelper.createSubchannel(s,r),hasReportedTransientFailure:false}));for(let{subchannel:s}of n)if(s.getConnectivityState()===Gt.ConnectivityState.READY){this.pickSubchannel(s);return}for(let{subchannel:s}of n)s.ref(),this.channelControlHelper.addChannelzChild(s.getChannelzRef());this.resetSubchannelList(),this.children=n;for(let{subchannel:s}of this.children)s.addConnectivityStateListener(this.subchannelStateListener);for(let s of this.children)s.subchannel.getConnectivityState()===Gt.ConnectivityState.TRANSIENT_FAILURE&&(s.hasReportedTransientFailure=true);this.startNextSubchannelConnecting(0),this.calculateAndReportNewState();}updateAddressList(e,r,n){if(!(r instanceof ml))return;this.reportHealthStatus=n[hX],r.getShuffleAddressList()&&(e=fX(e));let s=[].concat(...e.map(o=>o.addresses));mh("updateAddressList(["+s.map(o=>(0, lX.subchannelAddressToString)(o))+"])"),s.length===0&&(this.lastError="No addresses resolved");let a=IVe(s);this.latestAddressList=a,this.latestOptions=n,this.connectToAddressList(a,n);}exitIdle(){this.currentState===Gt.ConnectivityState.IDLE&&this.latestAddressList&&this.connectToAddressList(this.latestAddressList,this.latestOptions);}resetBackoff(){}destroy(){this.resetSubchannelList(),this.removeCurrentPick();}getTypeName(){return Eh}};to.PickFirstLoadBalancer=Th;var xVe=new ml(false),n0=class{constructor(e,r,n){this.endpoint=e,this.options=n,this.latestState=Gt.ConnectivityState.IDLE;let s=(0, t0.createChildChannelControlHelper)(r,{updateState:(a,o,i)=>{this.latestState=a,this.latestPicker=o,r.updateState(a,o,i);}});this.pickFirstBalancer=new Th(s),this.latestPicker=new rc.QueuePicker(this.pickFirstBalancer);}startConnecting(){this.pickFirstBalancer.updateAddressList([this.endpoint],xVe,Object.assign(Object.assign({},this.options),{[hX]:true}));}updateEndpoint(e,r){this.options=r,this.endpoint=e,this.latestState!==Gt.ConnectivityState.IDLE&&this.startConnecting();}getConnectivityState(){return this.latestState}getPicker(){return this.latestPicker}getEndpoint(){return this.endpoint}exitIdle(){this.pickFirstBalancer.exitIdle();}destroy(){this.pickFirstBalancer.destroy();}};to.LeafLoadBalancer=n0;function LVe(){(0, t0.registerLoadBalancerType)(Eh,Th,ml),(0, t0.registerDefaultLoadBalancerType)(Eh);}});var _X=f(oy=>{Object.defineProperty(oy,"__esModule",{value:true});oy.FileWatcherCertificateProvider=void 0;var DVe=P("fs"),wVe=ut(),UVe=Ie(),kVe=P("util"),VVe="certificate_provider";function iy(t){wVe.trace(UVe.LogVerbosity.DEBUG,VVe,t);}var i0=(0, kVe.promisify)(DVe.readFile),o0=class{constructor(e){if(this.config=e,this.refreshTimer=null,this.fileResultPromise=null,this.latestCaUpdate=void 0,this.caListeners=new Set,this.latestIdentityUpdate=void 0,this.identityListeners=new Set,this.lastUpdateTime=null,e.certificateFile===void 0!=(e.privateKeyFile===void 0))throw new Error("certificateFile and privateKeyFile must be set or unset together");if(e.certificateFile===void 0&&e.caCertificateFile===void 0)throw new Error("At least one of certificateFile and caCertificateFile must be set");iy("File watcher constructed with config "+JSON.stringify(e));}updateCertificates(){this.fileResultPromise||(this.fileResultPromise=Promise.allSettled([this.config.certificateFile?i0(this.config.certificateFile):Promise.reject(),this.config.privateKeyFile?i0(this.config.privateKeyFile):Promise.reject(),this.config.caCertificateFile?i0(this.config.caCertificateFile):Promise.reject()]),this.fileResultPromise.then(([e,r,n])=>{if(this.refreshTimer){iy("File watcher read certificates certificate "+e.status+", privateKey "+r.status+", CA certificate "+n.status),this.lastUpdateTime=new Date,this.fileResultPromise=null,e.status==="fulfilled"&&r.status==="fulfilled"?this.latestIdentityUpdate={certificate:e.value,privateKey:r.value}:this.latestIdentityUpdate=null,n.status==="fulfilled"?this.latestCaUpdate={caCertificate:n.value}:this.latestCaUpdate=null;for(let s of this.identityListeners)s(this.latestIdentityUpdate);for(let s of this.caListeners)s(this.latestCaUpdate);}}),iy("File watcher initiated certificate update"));}maybeStartWatchingFiles(){if(!this.refreshTimer){let e=this.lastUpdateTime?new Date().getTime()-this.lastUpdateTime.getTime():1/0;e>this.config.refreshIntervalMs&&this.updateCertificates(),e>this.config.refreshIntervalMs*2&&(this.latestCaUpdate=void 0,this.latestIdentityUpdate=void 0),this.refreshTimer=setInterval(()=>this.updateCertificates(),this.config.refreshIntervalMs),iy("File watcher started watching");}}maybeStopWatchingFiles(){this.caListeners.size===0&&this.identityListeners.size===0&&(this.fileResultPromise=null,this.refreshTimer&&(clearInterval(this.refreshTimer),this.refreshTimer=null));}addCaCertificateListener(e){this.caListeners.add(e),this.maybeStartWatchingFiles(),this.latestCaUpdate!==void 0&&process.nextTick(e,this.latestCaUpdate);}removeCaCertificateListener(e){this.caListeners.delete(e),this.maybeStopWatchingFiles();}addIdentityCertificateListener(e){this.identityListeners.add(e),this.maybeStartWatchingFiles(),this.latestIdentityUpdate!==void 0&&process.nextTick(e,this.latestIdentityUpdate);}removeIdentityCertificateListener(e){this.identityListeners.delete(e),this.maybeStopWatchingFiles();}};oy.FileWatcherCertificateProvider=o0;});var a0=f(j=>{Object.defineProperty(j,"__esModule",{value:true});j.SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX=j.createCertificateProviderChannelCredentials=j.FileWatcherCertificateProvider=j.createCertificateProviderServerCredentials=j.createServerCredentialsWithInterceptors=j.BaseSubchannelWrapper=j.registerAdminService=j.FilterStackFactory=j.BaseFilter=j.PickResultType=j.QueuePicker=j.UnavailablePicker=j.ChildLoadBalancerHandler=j.EndpointMap=j.endpointHasAddress=j.endpointToString=j.subchannelAddressToString=j.LeafLoadBalancer=j.isLoadBalancerNameRegistered=j.parseLoadBalancingConfig=j.selectLbConfigFromList=j.registerLoadBalancerType=j.createChildChannelControlHelper=j.BackoffTimeout=j.parseDuration=j.durationToMs=j.splitHostPort=j.uriToString=j.createResolver=j.registerResolver=j.log=j.trace=void 0;var mX=ut();Object.defineProperty(j,"trace",{enumerable:true,get:function(){return mX.trace}});Object.defineProperty(j,"log",{enumerable:true,get:function(){return mX.log}});var EX=qi();Object.defineProperty(j,"registerResolver",{enumerable:true,get:function(){return EX.registerResolver}});Object.defineProperty(j,"createResolver",{enumerable:true,get:function(){return EX.createResolver}});var TX=nn();Object.defineProperty(j,"uriToString",{enumerable:true,get:function(){return TX.uriToString}});Object.defineProperty(j,"splitHostPort",{enumerable:true,get:function(){return TX.splitHostPort}});var SX=e0();Object.defineProperty(j,"durationToMs",{enumerable:true,get:function(){return SX.durationToMs}});Object.defineProperty(j,"parseDuration",{enumerable:true,get:function(){return SX.parseDuration}});var BVe=Uf();Object.defineProperty(j,"BackoffTimeout",{enumerable:true,get:function(){return BVe.BackoffTimeout}});var Sh=Ba();Object.defineProperty(j,"createChildChannelControlHelper",{enumerable:true,get:function(){return Sh.createChildChannelControlHelper}});Object.defineProperty(j,"registerLoadBalancerType",{enumerable:true,get:function(){return Sh.registerLoadBalancerType}});Object.defineProperty(j,"selectLbConfigFromList",{enumerable:true,get:function(){return Sh.selectLbConfigFromList}});Object.defineProperty(j,"parseLoadBalancingConfig",{enumerable:true,get:function(){return Sh.parseLoadBalancingConfig}});Object.defineProperty(j,"isLoadBalancerNameRegistered",{enumerable:true,get:function(){return Sh.isLoadBalancerNameRegistered}});var FVe=ny();Object.defineProperty(j,"LeafLoadBalancer",{enumerable:true,get:function(){return FVe.LeafLoadBalancer}});var sy=Fn();Object.defineProperty(j,"subchannelAddressToString",{enumerable:true,get:function(){return sy.subchannelAddressToString}});Object.defineProperty(j,"endpointToString",{enumerable:true,get:function(){return sy.endpointToString}});Object.defineProperty(j,"endpointHasAddress",{enumerable:true,get:function(){return sy.endpointHasAddress}});Object.defineProperty(j,"EndpointMap",{enumerable:true,get:function(){return sy.EndpointMap}});var qVe=HS();Object.defineProperty(j,"ChildLoadBalancerHandler",{enumerable:true,get:function(){return qVe.ChildLoadBalancerHandler}});var s0=Rs();Object.defineProperty(j,"UnavailablePicker",{enumerable:true,get:function(){return s0.UnavailablePicker}});Object.defineProperty(j,"QueuePicker",{enumerable:true,get:function(){return s0.QueuePicker}});Object.defineProperty(j,"PickResultType",{enumerable:true,get:function(){return s0.PickResultType}});var HVe=aI();Object.defineProperty(j,"BaseFilter",{enumerable:true,get:function(){return HVe.BaseFilter}});var GVe=iI();Object.defineProperty(j,"FilterStackFactory",{enumerable:true,get:function(){return GVe.FilterStackFactory}});var jVe=YS();Object.defineProperty(j,"registerAdminService",{enumerable:true,get:function(){return jVe.registerAdminService}});var zVe=$g();Object.defineProperty(j,"BaseSubchannelWrapper",{enumerable:true,get:function(){return zVe.BaseSubchannelWrapper}});var gX=Jg();Object.defineProperty(j,"createServerCredentialsWithInterceptors",{enumerable:true,get:function(){return gX.createServerCredentialsWithInterceptors}});Object.defineProperty(j,"createCertificateProviderServerCredentials",{enumerable:true,get:function(){return gX.createCertificateProviderServerCredentials}});var YVe=_X();Object.defineProperty(j,"FileWatcherCertificateProvider",{enumerable:true,get:function(){return YVe.FileWatcherCertificateProvider}});var $Ve=Lf();Object.defineProperty(j,"createCertificateProviderChannelCredentials",{enumerable:true,get:function(){return $Ve.createCertificateProviderChannelCredentials}});var KVe=PI();Object.defineProperty(j,"SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX",{enumerable:true,get:function(){return KVe.SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX}});});var yX=f(u0=>{Object.defineProperty(u0,"__esModule",{value:true});u0.setup=XVe;var WVe=qi(),c0=class{constructor(e,r,n){this.listener=r,this.hasReturnedResult=false,this.endpoints=[];let s;e.authority===""?s="/"+e.path:s=e.path,this.endpoints=[{addresses:[{path:s}]}];}updateResolution(){this.hasReturnedResult||(this.hasReturnedResult=true,process.nextTick(this.listener.onSuccessfulResolution,this.endpoints,null,null,null,{}));}destroy(){this.hasReturnedResult=false;}static getDefaultAuthority(e){return "localhost"}};function XVe(){(0, WVe.registerResolver)("unix",c0);}});var NX=f(f0=>{Object.defineProperty(f0,"__esModule",{value:true});f0.setup=eBe;var AX=P("net"),ay=Ie(),l0=Nr(),RX=qi(),vX=nn(),QVe=ut(),JVe="ip_resolver";function OX(t){QVe.trace(ay.LogVerbosity.DEBUG,JVe,t);}var d0="ipv4",p0="ipv6",ZVe=443,cy=class{constructor(e,r,n){var s;this.listener=r,this.endpoints=[],this.error=null,this.hasReturnedResult=false,OX("Resolver constructed for target "+(0, vX.uriToString)(e));let a=[];if(!(e.scheme===d0||e.scheme===p0)){this.error={code:ay.Status.UNAVAILABLE,details:`Unrecognized scheme ${e.scheme} in IP resolver`,metadata:new l0.Metadata};return}let o=e.path.split(",");for(let i of o){let c=(0, vX.splitHostPort)(i);if(c===null){this.error={code:ay.Status.UNAVAILABLE,details:`Failed to parse ${e.scheme} address ${i}`,metadata:new l0.Metadata};return}if(e.scheme===d0&&!(0, AX.isIPv4)(c.host)||e.scheme===p0&&!(0, AX.isIPv6)(c.host)){this.error={code:ay.Status.UNAVAILABLE,details:`Failed to parse ${e.scheme} address ${i}`,metadata:new l0.Metadata};return}a.push({host:c.host,port:(s=c.port)!==null&&s!==void 0?s:ZVe});}this.endpoints=a.map(i=>({addresses:[i]})),OX("Parsed "+e.scheme+" address list "+a);}updateResolution(){this.hasReturnedResult||(this.hasReturnedResult=true,process.nextTick(()=>{this.error?this.listener.onError(this.error):this.listener.onSuccessfulResolution(this.endpoints,null,null,null,{});}));}destroy(){this.hasReturnedResult=false;}static getDefaultAuthority(e){return e.path.split(",")[0]}};function eBe(){(0, RX.registerResolver)(d0,cy),(0, RX.registerResolver)(p0,cy);}});var MX=f(gh=>{Object.defineProperty(gh,"__esModule",{value:true});gh.RoundRobinLoadBalancer=void 0;gh.setup=oBe;var bX=Ba(),kr=Bn(),h0=Rs(),tBe=ut(),rBe=Ie(),CX=Fn(),nBe=ny(),iBe="round_robin";function PX(t){tBe.trace(rBe.LogVerbosity.DEBUG,iBe,t);}var uy="round_robin",_0=class t{getLoadBalancerName(){return uy}constructor(){}toJsonObject(){return {[uy]:{}}}static createFromJson(e){return new t}},m0=class{constructor(e,r=0){this.children=e,this.nextIndex=r;}pick(e){let r=this.children[this.nextIndex].picker;return this.nextIndex=(this.nextIndex+1)%this.children.length,r.pick(e)}peekNextEndpoint(){return this.children[this.nextIndex].endpoint}},ly=class{constructor(e){this.channelControlHelper=e,this.children=[],this.currentState=kr.ConnectivityState.IDLE,this.currentReadyPicker=null,this.updatesPaused=false,this.lastError=null,this.childChannelControlHelper=(0, bX.createChildChannelControlHelper)(e,{updateState:(r,n,s)=>{this.currentState===kr.ConnectivityState.READY&&r!==kr.ConnectivityState.READY&&this.channelControlHelper.requestReresolution(),s&&(this.lastError=s),this.calculateAndUpdateState();}});}countChildrenWithState(e){return this.children.filter(r=>r.getConnectivityState()===e).length}calculateAndUpdateState(){if(!this.updatesPaused){if(this.countChildrenWithState(kr.ConnectivityState.READY)>0){let e=this.children.filter(n=>n.getConnectivityState()===kr.ConnectivityState.READY),r=0;if(this.currentReadyPicker!==null){let n=this.currentReadyPicker.peekNextEndpoint();r=e.findIndex(s=>(0, CX.endpointEqual)(s.getEndpoint(),n)),r<0&&(r=0);}this.updateState(kr.ConnectivityState.READY,new m0(e.map(n=>({endpoint:n.getEndpoint(),picker:n.getPicker()})),r),null);}else if(this.countChildrenWithState(kr.ConnectivityState.CONNECTING)>0)this.updateState(kr.ConnectivityState.CONNECTING,new h0.QueuePicker(this),null);else if(this.countChildrenWithState(kr.ConnectivityState.TRANSIENT_FAILURE)>0){let e=`round_robin: No connection established. Last error: ${this.lastError}`;this.updateState(kr.ConnectivityState.TRANSIENT_FAILURE,new h0.UnavailablePicker({details:e}),e);}else this.updateState(kr.ConnectivityState.IDLE,new h0.QueuePicker(this),null);for(let e of this.children)e.getConnectivityState()===kr.ConnectivityState.IDLE&&e.exitIdle();}}updateState(e,r,n){PX(kr.ConnectivityState[this.currentState]+" -> "+kr.ConnectivityState[e]),e===kr.ConnectivityState.READY?this.currentReadyPicker=r:this.currentReadyPicker=null,this.currentState=e,this.channelControlHelper.updateState(e,r,n);}resetSubchannelList(){for(let e of this.children)e.destroy();}updateAddressList(e,r,n){this.resetSubchannelList(),PX("Connect to endpoint list "+e.map(CX.endpointToString)),this.updatesPaused=true,this.children=e.map(s=>new nBe.LeafLoadBalancer(s,this.childChannelControlHelper,n));for(let s of this.children)s.startConnecting();this.updatesPaused=false,this.calculateAndUpdateState();}exitIdle(){}resetBackoff(){}destroy(){this.resetSubchannelList();}getTypeName(){return uy}};gh.RoundRobinLoadBalancer=ly;function oBe(){(0, bX.registerLoadBalancerType)(uy,ly,_0);}});var LX=f(ic=>{var E0;Object.defineProperty(ic,"__esModule",{value:true});ic.OutlierDetectionLoadBalancer=ic.OutlierDetectionLoadBalancingConfig=void 0;ic.setup=mBe;var sBe=Bn(),IX=Ie(),nc=e0(),xX=a0(),aBe=Ba(),cBe=HS(),uBe=Rs(),T0=Fn(),lBe=$g(),dBe=ut(),pBe="outlier_detection";function sr(t){dBe.trace(IX.LogVerbosity.DEBUG,pBe,t);}var v0="outlier_detection",fBe=((E0=process.env.GRPC_EXPERIMENTAL_ENABLE_OUTLIER_DETECTION)!==null&&E0!==void 0?E0:"true")==="true",hBe={stdev_factor:1900,enforcement_percentage:100,minimum_hosts:5,request_volume:100},_Be={threshold:85,enforcement_percentage:100,minimum_hosts:5,request_volume:50};function El(t,e,r,n){if(e in t&&t[e]!==void 0&&typeof t[e]!==r){let s=n?`${n}.${e}`:e;throw new Error(`outlier detection config ${s} parse error: expected ${r}, got ${typeof t[e]}`)}}function S0(t,e,r){let n=e;if(e in t&&t[e]!==void 0){if(!(0, nc.isDuration)(t[e]))throw new Error(`outlier detection config ${n} parse error: expected Duration, got ${typeof t[e]}`);if(!(t[e].seconds>=0&&t[e].seconds<=315576e6&&t[e].nanos>=0&&t[e].nanos<=999999999))throw new Error(`outlier detection config ${n} parse error: values out of range for non-negative Duaration`)}}function dy(t,e,r){let n=r?`${r}.${e}`:e;if(El(t,e,"number",r),e in t&&t[e]!==void 0&&!(t[e]>=0&&t[e]<=100))throw new Error(`outlier detection config ${n} parse error: value out of range for percentage (0-100)`)}var yh=class t{constructor(e,r,n,s,a,o,i){if(this.childPolicy=i,i.getLoadBalancerName()==="pick_first")throw new Error("outlier_detection LB policy cannot have a pick_first child policy");this.intervalMs=e??1e4,this.baseEjectionTimeMs=r??3e4,this.maxEjectionTimeMs=n??3e5,this.maxEjectionPercent=s??10,this.successRateEjection=a?Object.assign(Object.assign({},hBe),a):null,this.failurePercentageEjection=o?Object.assign(Object.assign({},_Be),o):null;}getLoadBalancerName(){return v0}toJsonObject(){var e,r;return {outlier_detection:{interval:(0, nc.msToDuration)(this.intervalMs),base_ejection_time:(0, nc.msToDuration)(this.baseEjectionTimeMs),max_ejection_time:(0, nc.msToDuration)(this.maxEjectionTimeMs),max_ejection_percent:this.maxEjectionPercent,success_rate_ejection:(e=this.successRateEjection)!==null&&e!==void 0?e:void 0,failure_percentage_ejection:(r=this.failurePercentageEjection)!==null&&r!==void 0?r:void 0,child_policy:[this.childPolicy.toJsonObject()]}}}getIntervalMs(){return this.intervalMs}getBaseEjectionTimeMs(){return this.baseEjectionTimeMs}getMaxEjectionTimeMs(){return this.maxEjectionTimeMs}getMaxEjectionPercent(){return this.maxEjectionPercent}getSuccessRateEjectionConfig(){return this.successRateEjection}getFailurePercentageEjectionConfig(){return this.failurePercentageEjection}getChildPolicy(){return this.childPolicy}static createFromJson(e){var r;if(S0(e,"interval"),S0(e,"base_ejection_time"),S0(e,"max_ejection_time"),dy(e,"max_ejection_percent"),"success_rate_ejection"in e&&e.success_rate_ejection!==void 0){if(typeof e.success_rate_ejection!="object")throw new Error("outlier detection config success_rate_ejection must be an object");El(e.success_rate_ejection,"stdev_factor","number","success_rate_ejection"),dy(e.success_rate_ejection,"enforcement_percentage","success_rate_ejection"),El(e.success_rate_ejection,"minimum_hosts","number","success_rate_ejection"),El(e.success_rate_ejection,"request_volume","number","success_rate_ejection");}if("failure_percentage_ejection"in e&&e.failure_percentage_ejection!==void 0){if(typeof e.failure_percentage_ejection!="object")throw new Error("outlier detection config failure_percentage_ejection must be an object");dy(e.failure_percentage_ejection,"threshold","failure_percentage_ejection"),dy(e.failure_percentage_ejection,"enforcement_percentage","failure_percentage_ejection"),El(e.failure_percentage_ejection,"minimum_hosts","number","failure_percentage_ejection"),El(e.failure_percentage_ejection,"request_volume","number","failure_percentage_ejection");}if(!("child_policy"in e)||!Array.isArray(e.child_policy))throw new Error("outlier detection config child_policy must be an array");let n=(0, aBe.selectLbConfigFromList)(e.child_policy);if(!n)throw new Error("outlier detection config child_policy: no valid recognized policy found");return new t(e.interval?(0, nc.durationToMs)(e.interval):null,e.base_ejection_time?(0, nc.durationToMs)(e.base_ejection_time):null,e.max_ejection_time?(0, nc.durationToMs)(e.max_ejection_time):null,(r=e.max_ejection_percent)!==null&&r!==void 0?r:null,e.success_rate_ejection,e.failure_percentage_ejection,n)}};ic.OutlierDetectionLoadBalancingConfig=yh;var y0=class extends lBe.BaseSubchannelWrapper{constructor(e,r){super(e),this.mapEntry=r,this.refCount=0;}ref(){this.child.ref(),this.refCount+=1;}unref(){if(this.child.unref(),this.refCount-=1,this.refCount<=0&&this.mapEntry){let e=this.mapEntry.subchannelWrappers.indexOf(this);e>=0&&this.mapEntry.subchannelWrappers.splice(e,1);}}eject(){this.setHealthy(false);}uneject(){this.setHealthy(true);}getMapEntry(){return this.mapEntry}getWrappedSubchannel(){return this.child}};function g0(){return {success:0,failure:0}}var A0=class{constructor(){this.activeBucket=g0(),this.inactiveBucket=g0();}addSuccess(){this.activeBucket.success+=1;}addFailure(){this.activeBucket.failure+=1;}switchBuckets(){this.inactiveBucket=this.activeBucket,this.activeBucket=g0();}getLastSuccesses(){return this.inactiveBucket.success}getLastFailures(){return this.inactiveBucket.failure}},R0=class{constructor(e,r){this.wrappedPicker=e,this.countCalls=r;}pick(e){let r=this.wrappedPicker.pick(e);if(r.pickResultType===uBe.PickResultType.COMPLETE){let n=r.subchannel,s=n.getMapEntry();if(s){let a=r.onCallEnded;return this.countCalls&&(a=o=>{var i;o===IX.Status.OK?s.counter.addSuccess():s.counter.addFailure(),(i=r.onCallEnded)===null||i===void 0||i.call(r,o);}),Object.assign(Object.assign({},r),{subchannel:n.getWrappedSubchannel(),onCallEnded:a})}else return Object.assign(Object.assign({},r),{subchannel:n.getWrappedSubchannel()})}else return r}},py=class{constructor(e){this.entryMap=new T0.EndpointMap,this.latestConfig=null,this.timerStartTime=null,this.childBalancer=new cBe.ChildLoadBalancerHandler((0, xX.createChildChannelControlHelper)(e,{createSubchannel:(r,n)=>{let s=e.createSubchannel(r,n),a=this.entryMap.getForSubchannelAddress(r),o=new y0(s,a);return a?.currentEjectionTimestamp!==null&&o.eject(),a?.subchannelWrappers.push(o),o},updateState:(r,n,s)=>{r===sBe.ConnectivityState.READY?e.updateState(r,new R0(n,this.isCountingEnabled()),s):e.updateState(r,n,s);}})),this.ejectionTimer=setInterval(()=>{},0),clearInterval(this.ejectionTimer);}isCountingEnabled(){return this.latestConfig!==null&&(this.latestConfig.getSuccessRateEjectionConfig()!==null||this.latestConfig.getFailurePercentageEjectionConfig()!==null)}getCurrentEjectionPercent(){let e=0;for(let r of this.entryMap.values())r.currentEjectionTimestamp!==null&&(e+=1);return e*100/this.entryMap.size}runSuccessRateCheck(e){if(!this.latestConfig)return;let r=this.latestConfig.getSuccessRateEjectionConfig();if(!r)return;sr("Running success rate check");let n=r.request_volume,s=0,a=[];for(let[d,p]of this.entryMap.entries()){let h=p.counter.getLastSuccesses(),T=p.counter.getLastFailures();sr("Stats for "+(0, T0.endpointToString)(d)+": successes="+h+" failures="+T+" targetRequestVolume="+n),h+T>=n&&(s+=1,a.push(h/(h+T)));}if(sr("Found "+s+" success rate candidates; currentEjectionPercent="+this.getCurrentEjectionPercent()+" successRates=["+a+"]"),s<r.minimum_hosts)return;let o=a.reduce((d,p)=>d+p)/a.length,i=0;for(let d of a){let p=d-o;i+=p*p;}let c=i/a.length,u=Math.sqrt(c),l=o-u*(r.stdev_factor/1e3);sr("stdev="+u+" ejectionThreshold="+l);for(let[d,p]of this.entryMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;let h=p.counter.getLastSuccesses(),T=p.counter.getLastFailures();if(h+T<n)continue;let g=h/(h+T);if(sr("Checking candidate "+d+" successRate="+g),g<l){let y=Math.random()*100;sr("Candidate "+d+" randomNumber="+y+" enforcement_percentage="+r.enforcement_percentage),y<r.enforcement_percentage&&(sr("Ejecting candidate "+d),this.eject(p,e));}}}runFailurePercentageCheck(e){if(!this.latestConfig)return;let r=this.latestConfig.getFailurePercentageEjectionConfig();if(!r)return;sr("Running failure percentage check. threshold="+r.threshold+" request volume threshold="+r.request_volume);let n=0;for(let s of this.entryMap.values()){let a=s.counter.getLastSuccesses(),o=s.counter.getLastFailures();a+o>=r.request_volume&&(n+=1);}if(!(n<r.minimum_hosts))for(let[s,a]of this.entryMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;let o=a.counter.getLastSuccesses(),i=a.counter.getLastFailures();if(sr("Candidate successes="+o+" failures="+i),o+i<r.request_volume)continue;if(i*100/(i+o)>r.threshold){let u=Math.random()*100;sr("Candidate "+s+" randomNumber="+u+" enforcement_percentage="+r.enforcement_percentage),u<r.enforcement_percentage&&(sr("Ejecting candidate "+s),this.eject(a,e));}}}eject(e,r){e.currentEjectionTimestamp=new Date,e.ejectionTimeMultiplier+=1;for(let n of e.subchannelWrappers)n.eject();}uneject(e){e.currentEjectionTimestamp=null;for(let r of e.subchannelWrappers)r.uneject();}switchAllBuckets(){for(let e of this.entryMap.values())e.counter.switchBuckets();}startTimer(e){var r,n;this.ejectionTimer=setTimeout(()=>this.runChecks(),e),(n=(r=this.ejectionTimer).unref)===null||n===void 0||n.call(r);}runChecks(){let e=new Date;if(sr("Ejection timer running"),this.switchAllBuckets(),!!this.latestConfig){this.timerStartTime=e,this.startTimer(this.latestConfig.getIntervalMs()),this.runSuccessRateCheck(e),this.runFailurePercentageCheck(e);for(let[r,n]of this.entryMap.entries())if(n.currentEjectionTimestamp===null)n.ejectionTimeMultiplier>0&&(n.ejectionTimeMultiplier-=1);else {let s=this.latestConfig.getBaseEjectionTimeMs(),a=this.latestConfig.getMaxEjectionTimeMs(),o=new Date(n.currentEjectionTimestamp.getTime());o.setMilliseconds(o.getMilliseconds()+Math.min(s*n.ejectionTimeMultiplier,Math.max(s,a))),o<new Date&&(sr("Unejecting "+r),this.uneject(n));}}}updateAddressList(e,r,n){if(!(r instanceof yh))return;sr("Received update with config: "+JSON.stringify(r.toJsonObject(),void 0,2));for(let a of e)this.entryMap.has(a)||(sr("Adding map entry for "+(0, T0.endpointToString)(a)),this.entryMap.set(a,{counter:new A0,currentEjectionTimestamp:null,ejectionTimeMultiplier:0,subchannelWrappers:[]}));this.entryMap.deleteMissing(e);let s=r.getChildPolicy();if(this.childBalancer.updateAddressList(e,s,n),r.getSuccessRateEjectionConfig()||r.getFailurePercentageEjectionConfig())if(this.timerStartTime){sr("Previous timer existed. Replacing timer"),clearTimeout(this.ejectionTimer);let a=r.getIntervalMs()-(new Date().getTime()-this.timerStartTime.getTime());this.startTimer(a);}else sr("Starting new timer"),this.timerStartTime=new Date,this.startTimer(r.getIntervalMs()),this.switchAllBuckets();else {sr("Counting disabled. Cancelling timer."),this.timerStartTime=null,clearTimeout(this.ejectionTimer);for(let a of this.entryMap.values())this.uneject(a),a.ejectionTimeMultiplier=0;}this.latestConfig=r;}exitIdle(){this.childBalancer.exitIdle();}resetBackoff(){this.childBalancer.resetBackoff();}destroy(){clearTimeout(this.ejectionTimer),this.childBalancer.destroy();}getTypeName(){return v0}};ic.OutlierDetectionLoadBalancer=py;function mBe(){fBe&&(0, xX.registerLoadBalancerType)(v0,py,yh);}});var Ah=f(q=>{Object.defineProperty(q,"__esModule",{value:true});q.experimental=q.ServerInterceptingCall=q.ResponderBuilder=q.ServerListenerBuilder=q.addAdminServicesToServer=q.getChannelzHandlers=q.getChannelzServiceDefinition=q.InterceptorConfigurationError=q.InterceptingCall=q.RequesterBuilder=q.ListenerBuilder=q.StatusBuilder=q.getClientChannel=q.ServerCredentials=q.Server=q.setLogVerbosity=q.setLogger=q.load=q.loadObject=q.CallCredentials=q.ChannelCredentials=q.waitForClientReady=q.closeClient=q.Channel=q.makeGenericClientConstructor=q.makeClientConstructor=q.loadPackageDefinition=q.Client=q.compressionAlgorithms=q.propagate=q.connectivityState=q.status=q.logVerbosity=q.Metadata=q.credentials=void 0;var fy=IS();Object.defineProperty(q,"CallCredentials",{enumerable:true,get:function(){return fy.CallCredentials}});var EBe=Bb();Object.defineProperty(q,"Channel",{enumerable:true,get:function(){return EBe.ChannelImplementation}});var TBe=oI();Object.defineProperty(q,"compressionAlgorithms",{enumerable:true,get:function(){return TBe.CompressionAlgorithms}});var SBe=Bn();Object.defineProperty(q,"connectivityState",{enumerable:true,get:function(){return SBe.ConnectivityState}});var hy=Lf();Object.defineProperty(q,"ChannelCredentials",{enumerable:true,get:function(){return hy.ChannelCredentials}});var DX=Vb();Object.defineProperty(q,"Client",{enumerable:true,get:function(){return DX.Client}});var O0=Ie();Object.defineProperty(q,"logVerbosity",{enumerable:true,get:function(){return O0.LogVerbosity}});Object.defineProperty(q,"status",{enumerable:true,get:function(){return O0.Status}});Object.defineProperty(q,"propagate",{enumerable:true,get:function(){return O0.Propagate}});var wX=ut(),N0=qb();Object.defineProperty(q,"loadPackageDefinition",{enumerable:true,get:function(){return N0.loadPackageDefinition}});Object.defineProperty(q,"makeClientConstructor",{enumerable:true,get:function(){return N0.makeClientConstructor}});Object.defineProperty(q,"makeGenericClientConstructor",{enumerable:true,get:function(){return N0.makeClientConstructor}});var gBe=Nr();Object.defineProperty(q,"Metadata",{enumerable:true,get:function(){return gBe.Metadata}});var yBe=cX();Object.defineProperty(q,"Server",{enumerable:true,get:function(){return yBe.Server}});var ABe=Jg();Object.defineProperty(q,"ServerCredentials",{enumerable:true,get:function(){return ABe.ServerCredentials}});var RBe=uX();Object.defineProperty(q,"StatusBuilder",{enumerable:true,get:function(){return RBe.StatusBuilder}});q.credentials={combineChannelCredentials:(t,...e)=>e.reduce((r,n)=>r.compose(n),t),combineCallCredentials:(t,...e)=>e.reduce((r,n)=>r.compose(n),t),createInsecure:hy.ChannelCredentials.createInsecure,createSsl:hy.ChannelCredentials.createSsl,createFromSecureContext:hy.ChannelCredentials.createFromSecureContext,createFromMetadataGenerator:fy.CallCredentials.createFromMetadataGenerator,createFromGoogleCredential:fy.CallCredentials.createFromGoogleCredential,createEmpty:fy.CallCredentials.createEmpty};var vBe=t=>t.close();q.closeClient=vBe;var OBe=(t,e,r)=>t.waitForReady(e,r);q.waitForClientReady=OBe;var NBe=(t,e)=>{throw new Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")};q.loadObject=NBe;var CBe=(t,e,r)=>{throw new Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")};q.load=CBe;var PBe=t=>{wX.setLogger(t);};q.setLogger=PBe;var bBe=t=>{wX.setLoggerVerbosity(t);};q.setLogVerbosity=bBe;var MBe=t=>DX.Client.prototype.getChannel.call(t);q.getClientChannel=MBe;var _y=wb();Object.defineProperty(q,"ListenerBuilder",{enumerable:true,get:function(){return _y.ListenerBuilder}});Object.defineProperty(q,"RequesterBuilder",{enumerable:true,get:function(){return _y.RequesterBuilder}});Object.defineProperty(q,"InterceptingCall",{enumerable:true,get:function(){return _y.InterceptingCall}});Object.defineProperty(q,"InterceptorConfigurationError",{enumerable:true,get:function(){return _y.InterceptorConfigurationError}});var UX=$a();Object.defineProperty(q,"getChannelzServiceDefinition",{enumerable:true,get:function(){return UX.getChannelzServiceDefinition}});Object.defineProperty(q,"getChannelzHandlers",{enumerable:true,get:function(){return UX.getChannelzHandlers}});var IBe=YS();Object.defineProperty(q,"addAdminServicesToServer",{enumerable:true,get:function(){return IBe.addAdminServicesToServer}});var C0=WI();Object.defineProperty(q,"ServerListenerBuilder",{enumerable:true,get:function(){return C0.ServerListenerBuilder}});Object.defineProperty(q,"ResponderBuilder",{enumerable:true,get:function(){return C0.ResponderBuilder}});Object.defineProperty(q,"ServerInterceptingCall",{enumerable:true,get:function(){return C0.ServerInterceptingCall}});var xBe=a0();q.experimental=xBe;var LBe=jM(),DBe=yX(),wBe=NX(),UBe=ny(),kBe=MX(),VBe=LX(),BBe=$a();LBe.setup(),DBe.setup(),wBe.setup(),UBe.setup(),kBe.setup(),VBe.setup(),BBe.setup();});var kX=f(my=>{Object.defineProperty(my,"__esModule",{value:true});my.createServiceClientConstructor=void 0;var FBe=Ah();function qBe(t,e){let r={export:{path:t,requestStream:false,responseStream:false,requestSerialize:n=>n,requestDeserialize:n=>n,responseSerialize:n=>n,responseDeserialize:n=>n}};return FBe.makeGenericClientConstructor(r,e)}my.createServiceClientConstructor=qBe;});var Rh=f(zn=>{Object.defineProperty(zn,"__esModule",{value:true});zn.createOtlpGrpcExporterTransport=zn.GrpcExporterTransport=zn.createEmptyMetadata=zn.createSslCredentials=zn.createInsecureCredentials=void 0;var HBe=0,GBe=2;function jBe(t){return t==="gzip"?GBe:HBe}function zBe(){let{credentials:t}=Ah();return t.createInsecure()}zn.createInsecureCredentials=zBe;function YBe(t,e,r){let{credentials:n}=Ah();return n.createSsl(t,e,r)}zn.createSslCredentials=YBe;function $Be(){let{Metadata:t}=Ah();return new t}zn.createEmptyMetadata=$Be;var Ey=class{_parameters;_client;_metadata;constructor(e){this._parameters=e;}shutdown(){this._client?.close();}send(e,r){let n=Buffer.from(e);if(this._client==null){let{createServiceClientConstructor:s}=kX();try{this._metadata=this._parameters.metadata();}catch(o){return Promise.resolve({status:"failure",error:o})}let a=s(this._parameters.grpcPath,this._parameters.grpcName);try{this._client=new a(this._parameters.address,this._parameters.credentials(),{"grpc.default_compression_algorithm":jBe(this._parameters.compression)});}catch(o){return Promise.resolve({status:"failure",error:o})}}return new Promise(s=>{let a=Date.now()+r;if(this._metadata==null)return s({error:new Error("metadata was null"),status:"failure"});this._client.export(n,this._metadata,{deadline:a},(o,i)=>{s(o?{status:"failure",error:o}:{data:i,status:"success"});});})}};zn.GrpcExporterTransport=Ey;function KBe(t){return new Ey(t)}zn.createOtlpGrpcExporterTransport=KBe;});var VX=f(Ty=>{Object.defineProperty(Ty,"__esModule",{value:true});Ty.VERSION=void 0;Ty.VERSION="0.204.0";});var GX=f(Us=>{Object.defineProperty(Us,"__esModule",{value:true});Us.getOtlpGrpcDefaultConfiguration=Us.mergeOtlpGrpcConfigurationWithDefaults=Us.validateAndNormalizeUrl=void 0;var qX=(ki(),A(Tf)),vh=Rh(),WBe=VX(),XBe=P("url"),BX=(M(),A(H));function HX(t){t=t.trim(),t.match(/^([\w]{1,8}):\/\//)||(t=`https://${t}`);let r=new XBe.URL(t);return r.protocol==="unix:"?t:(r.pathname&&r.pathname!=="/"&&BX.diag.warn("URL path should not be set when using grpc, the path part of the URL will be ignored."),r.protocol!==""&&!r.protocol?.match(/^(http)s?:$/)&&BX.diag.warn("URL protocol should be http(s)://. Using http://."),r.host)}Us.validateAndNormalizeUrl=HX;function FX(t,e){for(let[r,n]of Object.entries(e.getMap()))t.get(r).length<1&&t.set(r,n);}function QBe(t,e,r){let n=t.url??e.url??r.url;return {...(0, qX.mergeOtlpSharedConfigurationWithDefaults)(t,e,r),metadata:()=>{let s=r.metadata();return FX(s,t.metadata?.().clone()??(0, vh.createEmptyMetadata)()),FX(s,e.metadata?.()??(0, vh.createEmptyMetadata)()),s},url:HX(n),credentials:t.credentials??e.credentials?.(n)??r.credentials(n)}}Us.mergeOtlpGrpcConfigurationWithDefaults=QBe;function JBe(){return {...(0, qX.getSharedConfigurationDefaults)(),metadata:()=>{let t=(0, vh.createEmptyMetadata)();return t.set("User-Agent",`OTel-OTLP-Exporter-JavaScript/${WBe.VERSION}`),t},url:"http://localhost:4317",credentials:t=>t.startsWith("http://")?()=>(0, vh.createInsecureCredentials)():()=>(0, vh.createSslCredentials)()}}Us.getOtlpGrpcDefaultConfiguration=JBe;});var KX=f(Sy=>{Object.defineProperty(Sy,"__esModule",{value:true});Sy.getOtlpGrpcConfigurationFromEnv=void 0;var jX=(G(),A(Ze)),Oh=Rh(),ZBe=(Ss(),A(U4)),eFe=P("fs"),tFe=P("path"),YX=(M(),A(H));function P0(t,e){if(t!=null&&t!=="")return t;if(e!=null&&e!=="")return e}function rFe(t){let e=process.env[`OTEL_EXPORTER_OTLP_${t}_HEADERS`]?.trim(),r=process.env.OTEL_EXPORTER_OTLP_HEADERS?.trim(),n=(0, jX.parseKeyPairsIntoRecord)(e),s=(0, jX.parseKeyPairsIntoRecord)(r);if(Object.keys(n).length===0&&Object.keys(s).length===0)return;let a=Object.assign({},s,n),o=(0, Oh.createEmptyMetadata)();for(let[i,c]of Object.entries(a))o.set(i,c);return o}function nFe(t){let e=rFe(t);if(e!=null)return ()=>e}function iFe(t){let e=process.env[`OTEL_EXPORTER_OTLP_${t}_ENDPOINT`]?.trim(),r=process.env.OTEL_EXPORTER_OTLP_ENDPOINT?.trim();return P0(e,r)}function oFe(t){let e=process.env[`OTEL_EXPORTER_OTLP_${t}_INSECURE`]?.toLowerCase().trim(),r=process.env.OTEL_EXPORTER_OTLP_INSECURE?.toLowerCase().trim();return P0(e,r)==="true"}function b0(t,e,r){let n=process.env[t]?.trim(),s=process.env[e]?.trim(),a=P0(n,s);if(a!=null)try{return eFe.readFileSync(tFe.resolve(process.cwd(),a))}catch{YX.diag.warn(r);return}else return}function sFe(t){return b0(`OTEL_EXPORTER_OTLP_${t}_CLIENT_CERTIFICATE`,"OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE","Failed to read client certificate chain file")}function aFe(t){return b0(`OTEL_EXPORTER_OTLP_${t}_CLIENT_KEY`,"OTEL_EXPORTER_OTLP_CLIENT_KEY","Failed to read client certificate private key file")}function zX(t){return b0(`OTEL_EXPORTER_OTLP_${t}_CERTIFICATE`,"OTEL_EXPORTER_OTLP_CERTIFICATE","Failed to read root certificate file")}function $X(t){let e=aFe(t),r=sFe(t),n=zX(t),s=e!=null&&r!=null;return n!=null&&!s?(YX.diag.warn("Client key and certificate must both be provided, but one was missing - attempting to create credentials from just the root certificate"),(0, Oh.createSslCredentials)(zX(t))):(0, Oh.createSslCredentials)(n,e,r)}function cFe(t){return oFe(t)?(0, Oh.createInsecureCredentials)():$X(t)}function uFe(t){return {...(0, ZBe.getSharedConfigurationFromEnvironment)(t),metadata:nFe(t),url:iFe(t),credentials:e=>e.startsWith("http://")?()=>(0, Oh.createInsecureCredentials)():e.startsWith("https://")?()=>$X(t):()=>cFe(t)}}Sy.getOtlpGrpcConfigurationFromEnv=uFe;});var XX=f(gy=>{Object.defineProperty(gy,"__esModule",{value:true});gy.convertLegacyOtlpGrpcOptions=void 0;var lFe=(M(),A(H)),WX=GX(),dFe=Rh(),pFe=KX();function fFe(t,e){t.headers&&lFe.diag.warn("Headers cannot be set when using grpc");let r=t.credentials;return (0, WX.mergeOtlpGrpcConfigurationWithDefaults)({url:t.url,metadata:()=>t.metadata??(0, dFe.createEmptyMetadata)(),compression:t.compression,timeoutMillis:t.timeoutMillis,concurrencyLimit:t.concurrencyLimit,credentials:r!=null?()=>r:void 0},(0, pFe.getOtlpGrpcConfigurationFromEnv)(e),(0, WX.getOtlpGrpcDefaultConfiguration)())}gy.convertLegacyOtlpGrpcOptions=fFe;});var QX=f(yy=>{Object.defineProperty(yy,"__esModule",{value:true});yy.createOtlpGrpcExportDelegate=void 0;var hFe=(ki(),A(Tf)),_Fe=Rh();function mFe(t,e,r,n){return (0, hFe.createOtlpNetworkExportDelegate)(t,e,(0, _Fe.createOtlpGrpcExporterTransport)({address:t.url,compression:t.compression,credentials:t.credentials,metadata:t.metadata,grpcName:r,grpcPath:n}))}yy.createOtlpGrpcExportDelegate=mFe;});var Ay=f(Tl=>{Object.defineProperty(Tl,"__esModule",{value:true});Tl.createOtlpGrpcExportDelegate=Tl.convertLegacyOtlpGrpcOptions=void 0;var EFe=XX();Object.defineProperty(Tl,"convertLegacyOtlpGrpcOptions",{enumerable:true,get:function(){return EFe.convertLegacyOtlpGrpcOptions}});var TFe=QX();Object.defineProperty(Tl,"createOtlpGrpcExportDelegate",{enumerable:true,get:function(){return TFe.createOtlpGrpcExportDelegate}});});var ZX=f(Ry=>{Object.defineProperty(Ry,"__esModule",{value:true});Ry.OTLPLogExporter=void 0;var JX=Ay(),SFe=(Fi(),A(vS)),gFe=(ki(),A(Tf)),M0=class extends gFe.OTLPExporterBase{constructor(e={}){super((0, JX.createOtlpGrpcExportDelegate)((0, JX.convertLegacyOtlpGrpcOptions)(e,"LOGS"),SFe.ProtobufLogsSerializer,"LogsExportService","/opentelemetry.proto.collector.logs.v1.LogsService/Export"));}};Ry.OTLPLogExporter=M0;});var e9=f(vy=>{Object.defineProperty(vy,"__esModule",{value:true});vy.OTLPLogExporter=void 0;var yFe=ZX();Object.defineProperty(vy,"OTLPLogExporter",{enumerable:true,get:function(){return yFe.OTLPLogExporter}});});var t9,r9=E(()=>{t9="0.204.0";});var Sl,n9=E(()=>{ki();Fi();Ss();r9();Sl=class extends Zr{constructor(e={}){super(tn(rn(e,"LOGS","v1/logs",{"User-Agent":`OTel-OTLP-Exporter-JavaScript/${t9}`,"Content-Type":"application/x-protobuf"}),Af));}};});var i9=E(()=>{n9();});var o9=E(()=>{i9();});var s9={};Ue(s9,{OTLPLogExporter:()=>Sl});var a9=E(()=>{o9();});var oc,I0=E(()=>{(function(t){t[t.DELTA=0]="DELTA",t[t.CUMULATIVE=1]="CUMULATIVE",t[t.LOWMEMORY=2]="LOWMEMORY";})(oc||(oc={}));});function AFe(){let t=($t("OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE")??"cumulative").toLowerCase();return t==="cumulative"?Nh:t==="delta"?Oy:t==="lowmemory"?Ny:(N.warn(`OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE is set to '${t}', but only 'cumulative' and 'delta' are allowed. Using default ('cumulative') instead.`),Nh)}function RFe(t){return t!=null?t===oc.DELTA?Oy:t===oc.LOWMEMORY?Ny:Nh:AFe()}function OFe(t){return t?.aggregationPreference??(()=>vFe)}var Nh,Oy,Ny,vFe,ks,x0=E(()=>{G();er();I0();ki();M();Nh=()=>fr.CUMULATIVE,Oy=t=>{switch(t){case le.COUNTER:case le.OBSERVABLE_COUNTER:case le.GAUGE:case le.HISTOGRAM:case le.OBSERVABLE_GAUGE:return fr.DELTA;case le.UP_DOWN_COUNTER:case le.OBSERVABLE_UP_DOWN_COUNTER:return fr.CUMULATIVE}},Ny=t=>{switch(t){case le.COUNTER:case le.HISTOGRAM:return fr.DELTA;case le.GAUGE:case le.UP_DOWN_COUNTER:case le.OBSERVABLE_UP_DOWN_COUNTER:case le.OBSERVABLE_COUNTER:case le.OBSERVABLE_GAUGE:return fr.CUMULATIVE}};vFe=Object.freeze({type:Rr.DEFAULT});ks=class extends Zr{_aggregationTemporalitySelector;_aggregationSelector;constructor(e,r){super(e),this._aggregationSelector=OFe(r),this._aggregationTemporalitySelector=RFe(r?.temporalityPreference);}selectAggregation(e){return this._aggregationSelector(e)}selectAggregationTemporality(e){return this._aggregationTemporalitySelector(e)}};});var c9,u9=E(()=>{c9="0.204.0";});var NFe,gl,l9=E(()=>{x0();Fi();u9();Ss();NFe={"User-Agent":`OTel-OTLP-Exporter-JavaScript/${c9}`},gl=class extends ks{constructor(e){super(tn(rn(e??{},"METRICS","v1/metrics",{...NFe,"Content-Type":"application/json"}),Cf),e);}};});var d9=E(()=>{l9();});var p9=E(()=>{d9();});var L0={};Ue(L0,{AggregationTemporalityPreference:()=>oc,CumulativeTemporalitySelector:()=>Nh,DeltaTemporalitySelector:()=>Oy,LowMemoryTemporalitySelector:()=>Ny,OTLPMetricExporter:()=>gl,OTLPMetricExporterBase:()=>ks});var Cy=E(()=>{p9();I0();x0();});var h9=f(Py=>{Object.defineProperty(Py,"__esModule",{value:true});Py.OTLPMetricExporter=void 0;var CFe=(Cy(),A(L0)),f9=Ay(),PFe=(Fi(),A(vS)),D0=class extends CFe.OTLPMetricExporterBase{constructor(e){super((0, f9.createOtlpGrpcExportDelegate)((0, f9.convertLegacyOtlpGrpcOptions)(e??{},"METRICS"),PFe.ProtobufMetricsSerializer,"MetricsExportService","/opentelemetry.proto.collector.metrics.v1.MetricsService/Export"),e);}};Py.OTLPMetricExporter=D0;});var _9=f(by=>{Object.defineProperty(by,"__esModule",{value:true});by.OTLPMetricExporter=void 0;var bFe=h9();Object.defineProperty(by,"OTLPMetricExporter",{enumerable:true,get:function(){return bFe.OTLPMetricExporter}});});var m9,E9=E(()=>{m9="0.204.0";});var yl,T9=E(()=>{Cy();Fi();E9();Ss();yl=class extends ks{constructor(e){super(tn(rn(e??{},"METRICS","v1/metrics",{"User-Agent":`OTel-OTLP-Exporter-JavaScript/${m9}`,"Content-Type":"application/x-protobuf"}),vf),e);}};});var S9=E(()=>{T9();});var g9=E(()=>{S9();});var y9={};Ue(y9,{OTLPMetricExporter:()=>yl});var A9=E(()=>{g9();});var V0=f(xy=>{Object.defineProperty(xy,"__esModule",{value:true});xy.PrometheusSerializer=void 0;var MFe=(M(),A(H)),sc=(er(),A(vr)),R9=(G(),A(Ze));function Iy(t){return t.replace(/\\/g,"\\\\").replace(/\n/g,"\\n")}function v9(t=""){return typeof t!="string"&&(t=JSON.stringify(t)),Iy(t).replace(/"/g,'\\"')}var IFe=/[^a-z0-9_]/gi,xFe=/_{2,}/g;function U0(t){return t.replace(IFe,"_").replace(xFe,"_")}function w0(t,e){return !t.endsWith("_total")&&e.dataPointType===sc.DataPointType.SUM&&e.isMonotonic&&(t=t+"_total"),t}function LFe(t){return t===1/0?"+Inf":t===-1/0?"-Inf":`${t}`}function DFe(t){switch(t.dataPointType){case sc.DataPointType.SUM:return t.isMonotonic?"counter":"gauge";case sc.DataPointType.GAUGE:return "gauge";case sc.DataPointType.HISTOGRAM:return "histogram";default:return "untyped"}}function My(t,e,r,n,s){let a=false,o="";for(let[i,c]of Object.entries(e)){let u=U0(i);a=true,o+=`${o.length>0?",":""}${u}="${v9(c)}"`;}if(s)for(let[i,c]of Object.entries(s)){let u=U0(i);a=true,o+=`${o.length>0?",":""}${u}="${v9(c)}"`;}return a&&(t+=`{${o}}`),`${t} ${LFe(r)}${n!==void 0?" "+String(n):""}
`}var wFe="# no registered metrics",k0=class{_prefix;_appendTimestamp;_additionalAttributes;_withResourceConstantLabels;constructor(e,r=false,n){e&&(this._prefix=e+"_"),this._appendTimestamp=r,this._withResourceConstantLabels=n;}serialize(e){let r="";this._additionalAttributes=this._filterResourceConstantLabels(e.resource.attributes,this._withResourceConstantLabels);for(let n of e.scopeMetrics)r+=this._serializeScopeMetrics(n);return r===""&&(r+=wFe),this._serializeResource(e.resource)+r}_filterResourceConstantLabels(e,r){if(r){let n={};for(let[s,a]of Object.entries(e))s.match(r)&&(n[s]=a);return n}}_serializeScopeMetrics(e){let r="";for(let n of e.metrics)r+=this._serializeMetricData(n)+`
`;return r}_serializeMetricData(e){let r=U0(Iy(e.descriptor.name));this._prefix&&(r=`${this._prefix}${r}`);let n=e.dataPointType;r=w0(r,e);let s=`# HELP ${r} ${Iy(e.descriptor.description||"description missing")}`,a=e.descriptor.unit?`
# UNIT ${r} ${Iy(e.descriptor.unit)}`:"",o=`# TYPE ${r} ${DFe(e)}`,i="";switch(n){case sc.DataPointType.SUM:case sc.DataPointType.GAUGE:{i=e.dataPoints.map(c=>this._serializeSingularDataPoint(r,e,c)).join("");break}case sc.DataPointType.HISTOGRAM:{i=e.dataPoints.map(c=>this._serializeHistogramDataPoint(r,e,c)).join("");break}default:MFe.diag.error(`Unrecognizable DataPointType: ${n} for metric "${r}"`);}return `${s}${a}
${o}
${i}`.trim()}_serializeSingularDataPoint(e,r,n){let s="";e=w0(e,r);let{value:a,attributes:o}=n,i=(0, R9.hrTimeToMilliseconds)(n.endTime);return s+=My(e,o,a,this._appendTimestamp?i:void 0,this._additionalAttributes),s}_serializeHistogramDataPoint(e,r,n){let s="";e=w0(e,r);let a=n.attributes,o=n.value,i=(0, R9.hrTimeToMilliseconds)(n.endTime);for(let d of ["count","sum"]){let p=o[d];p!=null&&(s+=My(e+"_"+d,a,p,this._appendTimestamp?i:void 0,this._additionalAttributes));}let c=0,u=o.buckets.counts.entries(),l=false;for(let[d,p]of u){c+=p;let h=o.buckets.boundaries[d];if(h===void 0&&l)break;h===1/0&&(l=true),s+=My(e+"_bucket",a,c,this._appendTimestamp?i:void 0,Object.assign({},this._additionalAttributes??{},{le:h===void 0||h===1/0?"+Inf":String(h)}));}return s}_serializeResource(e){let r="target_info",n=`# HELP ${r} Target metadata`,s=`# TYPE ${r} gauge`,a=My(r,e.attributes,1).trim();return `${n}
${s}
${a}
`}};xy.PrometheusSerializer=k0;});var O9=f(Ly=>{Object.defineProperty(Ly,"__esModule",{value:true});Ly.PrometheusExporter=void 0;var Ch=(M(),A(H)),UFe=(G(),A(Ze)),B0=(er(),A(vr)),kFe=P("http"),VFe=V0(),BFe=P("url"),F0=class t extends B0.MetricReader{static DEFAULT_OPTIONS={host:void 0,port:9464,endpoint:"/metrics",prefix:"",appendTimestamp:false,withResourceConstantLabels:void 0};_host;_port;_baseUrl;_endpoint;_server;_prefix;_appendTimestamp;_serializer;_startServerPromise;constructor(e={},r=()=>{}){super({aggregationSelector:s=>({type:B0.AggregationType.DEFAULT}),aggregationTemporalitySelector:s=>B0.AggregationTemporality.CUMULATIVE,metricProducers:e.metricProducers}),this._host=e.host||process.env.OTEL_EXPORTER_PROMETHEUS_HOST||t.DEFAULT_OPTIONS.host,this._port=e.port||Number(process.env.OTEL_EXPORTER_PROMETHEUS_PORT)||t.DEFAULT_OPTIONS.port,this._prefix=e.prefix||t.DEFAULT_OPTIONS.prefix,this._appendTimestamp=typeof e.appendTimestamp=="boolean"?e.appendTimestamp:t.DEFAULT_OPTIONS.appendTimestamp;let n=e.withResourceConstantLabels||t.DEFAULT_OPTIONS.withResourceConstantLabels;this._server=(0, kFe.createServer)(this._requestHandler).unref(),this._serializer=new VFe.PrometheusSerializer(this._prefix,this._appendTimestamp,n),this._baseUrl=`http://${this._host}:${this._port}/`,this._endpoint=(e.endpoint||t.DEFAULT_OPTIONS.endpoint).replace(/^([^/])/,"/$1"),e.preventServerStart!==true?this.startServer().then(r,s=>{Ch.diag.error(s),r(s);}):r&&queueMicrotask(r);}async onForceFlush(){}onShutdown(){return this.stopServer()}stopServer(){return this._server?new Promise(e=>{this._server.close(r=>{r?r.code!=="ERR_SERVER_NOT_RUNNING"&&(0, UFe.globalErrorHandler)(r):Ch.diag.debug("Prometheus exporter was stopped"),e();});}):(Ch.diag.debug("Prometheus stopServer() was called but server was never started."),Promise.resolve())}startServer(){return this._startServerPromise??=new Promise((e,r)=>{this._server.once("error",r),this._server.listen({port:this._port,host:this._host},()=>{Ch.diag.debug(`Prometheus exporter server started: ${this._host}:${this._port}/${this._endpoint}`),e();});}),this._startServerPromise}getMetricsRequestHandler(e,r){this._exportMetrics(r);}_requestHandler=(e,r)=>{e.url!=null&&new BFe.URL(e.url,this._baseUrl).pathname===this._endpoint?this._exportMetrics(r):this._notFound(r);};_exportMetrics=e=>{e.statusCode=200,e.setHeader("content-type","text/plain"),this.collect().then(r=>{let{resourceMetrics:n,errors:s}=r;s.length&&Ch.diag.error("PrometheusExporter: metrics collection errors",...s),e.end(this._serializer.serialize(n));},r=>{e.end(`# failed to export metrics: ${r}`);});};_notFound=e=>{e.statusCode=404,e.end();}};Ly.PrometheusExporter=F0;});var N9=f(Al=>{Object.defineProperty(Al,"__esModule",{value:true});Al.PrometheusSerializer=Al.PrometheusExporter=void 0;var FFe=O9();Object.defineProperty(Al,"PrometheusExporter",{enumerable:true,get:function(){return FFe.PrometheusExporter}});var qFe=V0();Object.defineProperty(Al,"PrometheusSerializer",{enumerable:true,get:function(){return qFe.PrometheusSerializer}});});var C9,P9=E(()=>{C9="0.204.0";});var Rl,b9=E(()=>{ki();Fi();P9();Ss();Rl=class extends Zr{constructor(e={}){super(tn(rn(e,"TRACES","v1/traces",{"User-Agent":`OTel-OTLP-Exporter-JavaScript/${C9}`,"Content-Type":"application/x-protobuf"}),Of));}};});var M9=E(()=>{b9();});var I9=E(()=>{M9();});var x9={};Ue(x9,{OTLPTraceExporter:()=>Rl});var L9=E(()=>{I9();});var D9,w9=E(()=>{D9="0.204.0";});var vl,U9=E(()=>{ki();w9();Fi();Ss();vl=class extends Zr{constructor(e={}){super(tn(rn(e,"TRACES","v1/traces",{"User-Agent":`OTel-OTLP-Exporter-JavaScript/${D9}`,"Content-Type":"application/json"}),Pf));}};});var k9=E(()=>{U9();});var V9=E(()=>{k9();});var B9={};Ue(B9,{OTLPTraceExporter:()=>vl});var F9=E(()=>{V9();});var H9=f(Dy=>{Object.defineProperty(Dy,"__esModule",{value:true});Dy.OTLPTraceExporter=void 0;var q9=Ay(),HFe=(Fi(),A(vS)),GFe=(ki(),A(Tf)),q0=class extends GFe.OTLPExporterBase{constructor(e={}){super((0, q9.createOtlpGrpcExportDelegate)((0, q9.convertLegacyOtlpGrpcOptions)(e,"TRACES"),HFe.ProtobufTraceSerializer,"TraceExportService","/opentelemetry.proto.collector.trace.v1.TraceService/Export"));}};Dy.OTLPTraceExporter=q0;});var G9=f(wy=>{Object.defineProperty(wy,"__esModule",{value:true});wy.OTLPTraceExporter=void 0;var jFe=H9();Object.defineProperty(wy,"OTLPTraceExporter",{enumerable:true,get:function(){return jFe.OTLPTraceExporter}});});function ac(t,e){let r=new URL(t),n=Object.assign({method:"POST",headers:{"Content-Type":"application/json",...e}});return function(a,o){if(a.length===0)return N.debug("Zipkin send with empty spans"),o({code:de.SUCCESS});let{request:i}=r.protocol==="http:"?zFe__namespace:YFe__namespace,c=i(r,n,l=>{let d="";l.on("data",p=>{d+=p;}),l.on("end",()=>{let p=l.statusCode||0;return N.debug(`Zipkin response status code: ${p}, body: ${d}`),p<400?o({code:de.SUCCESS}):o({code:de.FAILED,error:new Error(`Got unexpected status code from zipkin: ${p}`)})});});c.on("error",l=>o({code:de.FAILED,error:l}));let u=JSON.stringify(a);N.debug(`Zipkin request payload: ${u}`),c.write(u,"utf8"),c.end();}}var j9=E(()=>{M();G();});var z9=E(()=>{j9();});var H0=E(()=>{z9();});var cc,Y9=E(()=>{(function(t){t.CLIENT="CLIENT",t.SERVER="SERVER",t.CONSUMER="CONSUMER",t.PRODUCER="PRODUCER";})(cc||(cc={}));});function W9(t,e,r,n){return {traceId:t.spanContext().traceId,parentId:t.parentSpanContext?.spanId,name:t.name,id:t.spanContext().spanId,kind:KFe[t.kind],timestamp:Ar(t.startTime),duration:Math.round(Ar(t.duration)),localEndpoint:{serviceName:e},tags:WFe(t,r,n),annotations:t.events.length?XFe(t.events):void 0}}function WFe({attributes:t,resource:e,status:r,droppedAttributesCount:n,droppedEventsCount:s,droppedLinksCount:a},o,i){let c={};for(let u of Object.keys(t))c[u]=String(t[u]);return r.code!==bn.UNSET&&(c[o]=String(bn[r.code])),r.code===bn.ERROR&&r.message&&(c[i]=r.message),n&&(c["otel.dropped_attributes_count"]=String(n)),s&&(c["otel.dropped_events_count"]=String(s)),a&&(c["otel.dropped_links_count"]=String(a)),Object.keys(e.attributes).forEach(u=>c[u]=String(e.attributes[u])),c}function XFe(t){return t.map(e=>({timestamp:Math.round(Ar(e.time)),value:e.name}))}var KFe,$9,K9,X9=E(()=>{M();G();Y9();KFe={[Kr.CLIENT]:cc.CLIENT,[Kr.SERVER]:cc.SERVER,[Kr.CONSUMER]:cc.CONSUMER,[Kr.PRODUCER]:cc.PRODUCER,[Kr.INTERNAL]:void 0},$9="otel.status_code",K9="error";});function Q9(t){return function(){return t()}}var J9=E(()=>{});var Uy,Z9=E(()=>{M();G();H0();X9();ct();J9();Uy=class{DEFAULT_SERVICE_NAME="OpenTelemetry Service";_statusCodeTagName;_statusDescriptionTagName;_urlStr;_send;_getHeaders;_serviceName;_isShutdown;_sendingPromises=[];constructor(e={}){this._urlStr=e.url||($t("OTEL_EXPORTER_ZIPKIN_ENDPOINT")??"http://localhost:9411/api/v2/spans"),this._send=ac(this._urlStr,e.headers),this._serviceName=e.serviceName,this._statusCodeTagName=e.statusCodeTagName||$9,this._statusDescriptionTagName=e.statusDescriptionTagName||K9,this._isShutdown=false,typeof e.getExportRequestHeaders=="function"?this._getHeaders=Q9(e.getExportRequestHeaders):this._beforeSend=function(){};}export(e,r){let n=String(this._serviceName||e[0].resource.attributes[Ao]||this.DEFAULT_SERVICE_NAME);if(N.debug("Zipkin exporter export"),this._isShutdown){setTimeout(()=>r({code:de.FAILED,error:new Error("Exporter has been shutdown")}));return}let s=new Promise(o=>{this._sendSpans(e,n,i=>{o(),r(i);});});this._sendingPromises.push(s);let a=()=>{let o=this._sendingPromises.indexOf(s);this._sendingPromises.splice(o,1);};s.then(a,a);}shutdown(){return N.debug("Zipkin exporter shutdown"),this._isShutdown=true,this.forceFlush()}forceFlush(){return new Promise((e,r)=>{Promise.all(this._sendingPromises).then(()=>{e();},r);})}_beforeSend(){this._getHeaders&&(this._send=ac(this._urlStr,this._getHeaders()));}_sendSpans(e,r,n){let s=e.map(a=>W9(a,String(a.attributes[Ao]||a.resource.attributes[Ao]||r),this._statusCodeTagName,this._statusDescriptionTagName));return this._beforeSend(),this._send(s,a=>{if(n)return n(a)})}};});var eQ={};Ue(eQ,{ZipkinExporter:()=>Uy,prepareSend:()=>ac});var tQ=E(()=>{H0();Z9();});var Ol,G0=E(()=>{M();Ol=Pn("OpenTelemetry Context Key B3 Debug Flag");});var Vs,Nl,Cl,Pl,ky,bl,Ph=E(()=>{Vs="b3",Nl="x-b3-traceid",Cl="x-b3-spanid",Pl="x-b3-sampled",ky="x-b3-parentspanid",bl="x-b3-flags";});function ZFe(t){return t===ze.SAMPLED||t===ze.NONE}function eqe(t){return Array.isArray(t)?t[0]:t}function By(t,e,r){let n=e.get(t,r);return eqe(n)}function tqe(t,e){let r=By(t,e,Nl);return typeof r=="string"?r.padStart(32,"0"):""}function rqe(t,e){let r=By(t,e,Cl);return typeof r=="string"?r:""}function rQ(t,e){return By(t,e,bl)==="1"?"1":void 0}function nqe(t,e){let r=By(t,e,Pl);if(rQ(t,e)==="1"||QFe.has(r))return ze.SAMPLED;if(r===void 0||JFe.has(r))return ze.NONE}var QFe,JFe,Vy,nQ=E(()=>{M();G();G0();Ph();QFe=new Set([true,"true","True","1",1]),JFe=new Set([false,"false","False","0",0]);Vy=class{inject(e,r,n){let s=ge.getSpanContext(e);if(!s||!gr(s)||yr(e))return;let a=e.getValue(Ol);n.set(r,Nl,s.traceId),n.set(r,Cl,s.spanId),a==="1"?n.set(r,bl,a):s.traceFlags!==void 0&&n.set(r,Pl,(ze.SAMPLED&s.traceFlags)===ze.SAMPLED?"1":"0");}extract(e,r,n){let s=tqe(r,n),a=rqe(r,n),o=nqe(r,n),i=rQ(r,n);return go(s)&&_a(a)&&ZFe(o)?(e=e.setValue(Ol,i),ge.setSpanContext(e,{traceId:s,spanId:a,isRemote:true,traceFlags:o})):e}fields(){return [Nl,Cl,bl,Pl,ky]}};});function cqe(t){return t.length===32?t:`${oqe}${t}`}function uqe(t){return t&&sqe.has(t)?ze.SAMPLED:ze.NONE}var iqe,oqe,sqe,aqe,Fy,iQ=E(()=>{M();G();G0();Ph();iqe=/((?:[0-9a-f]{16}){1,2})-([0-9a-f]{16})(?:-([01d](?![0-9a-f])))?(?:-([0-9a-f]{16}))?/,oqe="0".repeat(16),sqe=new Set(["d","1"]),aqe="d";Fy=class{inject(e,r,n){let s=ge.getSpanContext(e);if(!s||!gr(s)||yr(e))return;let a=e.getValue(Ol)||s.traceFlags&1,o=`${s.traceId}-${s.spanId}-${a}`;n.set(r,Vs,o);}extract(e,r,n){let s=n.get(r,Vs),a=Array.isArray(s)?s[0]:s;if(typeof a!="string")return e;let o=a.match(iqe);if(!o)return e;let[,i,c,u]=o,l=cqe(i);if(!go(l)||!_a(c))return e;let d=uqe(u);return u===aqe&&(e=e.setValue(Ol,u)),ge.setSpanContext(e,{traceId:l,spanId:c,isRemote:true,traceFlags:d})}fields(){return [Vs]}};});var Ml,j0=E(()=>{(function(t){t[t.SINGLE_HEADER=0]="SINGLE_HEADER",t[t.MULTI_HEADER=1]="MULTI_HEADER";})(Ml||(Ml={}));});var qy,oQ=E(()=>{G();nQ();iQ();Ph();j0();qy=class{_b3MultiPropagator=new Vy;_b3SinglePropagator=new Fy;_inject;_fields;constructor(e={}){e.injectEncoding===Ml.MULTI_HEADER?(this._inject=this._b3MultiPropagator.inject,this._fields=this._b3MultiPropagator.fields()):(this._inject=this._b3SinglePropagator.inject,this._fields=this._b3SinglePropagator.fields());}inject(e,r,n){yr(e)||this._inject(e,r,n);}extract(e,r,n){let s=n.get(r,Vs);return (Array.isArray(s)?s[0]:s)?this._b3SinglePropagator.extract(e,r,n):this._b3MultiPropagator.extract(e,r,n)}fields(){return this._fields}};});var sQ={};Ue(sQ,{B3InjectEncoding:()=>Ml,B3Propagator:()=>qy,B3_CONTEXT_HEADER:()=>Vs,X_B3_FLAGS:()=>bl,X_B3_PARENT_SPAN_ID:()=>ky,X_B3_SAMPLED:()=>Pl,X_B3_SPAN_ID:()=>Cl,X_B3_TRACE_ID:()=>Nl});var aQ=E(()=>{oQ();Ph();j0();});function dqe(t){let e=decodeURIComponent(t).split(":");if(e.length!==4)return null;let[r,n,,s]=e,a=r.padStart(32,"0"),o=n.padStart(16,"0"),i=lqe.test(s)?parseInt(s,16)&1:1;return {traceId:a,spanId:o,isRemote:true,traceFlags:i}}var z0,Hy,Gy,lqe,cQ=E(()=>{M();G();z0="uber-trace-id",Hy="uberctx",Gy=class{_jaegerTraceHeader;_jaegerBaggageHeaderPrefix;constructor(e){typeof e=="string"?(this._jaegerTraceHeader=e,this._jaegerBaggageHeaderPrefix=Hy):(this._jaegerTraceHeader=e?.customTraceHeader||z0,this._jaegerBaggageHeaderPrefix=e?.customBaggageHeaderPrefix||Hy);}inject(e,r,n){let s=ge.getSpanContext(e),a=Mn.getBaggage(e);if(s&&yr(e)===false){let o=`0${(s.traceFlags||ze.NONE).toString(16)}`;n.set(r,this._jaegerTraceHeader,`${s.traceId}:${s.spanId}:0:${o}`);}if(a)for(let[o,i]of a.getAllEntries())n.set(r,`${this._jaegerBaggageHeaderPrefix}-${o}`,encodeURIComponent(i.value));}extract(e,r,n){let s=n.get(r,this._jaegerTraceHeader),a=Array.isArray(s)?s[0]:s,o=n.keys(r).filter(u=>u.startsWith(`${this._jaegerBaggageHeaderPrefix}-`)).map(u=>{let l=n.get(r,u);return {key:u.substring(this._jaegerBaggageHeaderPrefix.length+1),value:Array.isArray(l)?l[0]:l}}),i=e;if(typeof a=="string"){let u=dqe(a);u&&(i=ge.setSpanContext(i,u));}if(o.length===0)return i;let c=Mn.getBaggage(e)??Mn.createBaggage();for(let u of o)u.value!==void 0&&(c=c.setEntry(u.key,{value:decodeURIComponent(u.value)}));return i=Mn.setBaggage(i,c),i}fields(){return [this._jaegerTraceHeader]}},lqe=/^[0-9a-f]{1,2}$/i;});var uQ={};Ue(uQ,{JaegerPropagator:()=>Gy,UBER_BAGGAGE_HEADER_PREFIX:()=>Hy,UBER_TRACE_ID_HEADER:()=>z0});var lQ=E(()=>{cQ();});var hQ=f(Yn=>{Object.defineProperty(Yn,"__esModule",{value:true});Yn.getPropagatorFromEnv=Yn.getSpanProcessorsFromEnv=Yn.getOtlpProtocolFromEnv=Yn.filterBlanksAndNulls=Yn.getResourceDetectorsFromEnv=void 0;var Bs=(M(),A(H)),Fs=(G(),A(Ze)),dQ=(L9(),A(x9)),pqe=(F9(),A(B9)),fqe=G9(),hqe=(tQ(),A(eQ)),bh=(xi(),A(Ra)),jy=(di(),A(li)),Y0=(aQ(),A(sQ)),_qe=(lQ(),A(uQ)),mqe="env",Eqe="host",Tqe="os",Sqe="process",gqe="serviceinstance";function yqe(){let t=new Map([[mqe,bh.envDetector],[Eqe,bh.hostDetector],[Tqe,bh.osDetector],[gqe,bh.serviceInstanceIdDetector],[Sqe,bh.processDetector]]),e=(0, Fs.getStringListFromEnv)("OTEL_NODE_RESOURCE_DETECTORS")??["all"];return e.includes("all")?[...t.values()].flat():e.includes("none")?[]:e.flatMap(r=>{let n=t.get(r);return n||Bs.diag.warn(`Invalid resource detector "${r}" specified in the environment variable OTEL_NODE_RESOURCE_DETECTORS`),n||[]})}Yn.getResourceDetectorsFromEnv=yqe;function pQ(t){return t.map(e=>e.trim()).filter(e=>e!=="null"&&e!=="")}Yn.filterBlanksAndNulls=pQ;function fQ(){return (0, Fs.getStringFromEnv)("OTEL_EXPORTER_OTLP_TRACES_PROTOCOL")??(0, Fs.getStringFromEnv)("OTEL_EXPORTER_OTLP_PROTOCOL")??"http/protobuf"}Yn.getOtlpProtocolFromEnv=fQ;function Aqe(){let t=fQ();switch(t){case "grpc":return new fqe.OTLPTraceExporter;case "http/json":return new pqe.OTLPTraceExporter;case "http/protobuf":return new dQ.OTLPTraceExporter;default:return Bs.diag.warn(`Unsupported OTLP traces protocol: ${t}. Using http/protobuf.`),new dQ.OTLPTraceExporter}}function Rqe(){try{let{JaegerExporter:t}=P("@opentelemetry/exporter-jaeger");return new t}catch(t){throw new Error(`Could not instantiate JaegerExporter. This could be due to the JaegerExporter's lack of support for bundling. If possible, use @opentelemetry/exporter-trace-otlp-proto instead. Original Error: ${t}`)}}function vqe(){let t=new Map([["otlp",()=>Aqe()],["zipkin",()=>new hqe.ZipkinExporter],["console",()=>new jy.ConsoleSpanExporter],["jaeger",()=>Rqe()]]),e=[],r=[],n=pQ(Array.from(new Set((0, Fs.getStringListFromEnv)("OTEL_TRACES_EXPORTER"))));if(n[0]==="none")return Bs.diag.warn('OTEL_TRACES_EXPORTER contains "none". SDK will not be initialized.'),[];n.length===0?(Bs.diag.debug("OTEL_TRACES_EXPORTER is empty. Using default otlp exporter."),n=["otlp"]):n.length>1&&n.includes("none")&&(Bs.diag.warn('OTEL_TRACES_EXPORTER contains "none" along with other exporters. Using default otlp exporter.'),n=["otlp"]);for(let s of n){let a=t.get(s)?.();a?e.push(a):Bs.diag.warn(`Unrecognized OTEL_TRACES_EXPORTER value: ${s}.`);}for(let s of e)s instanceof jy.ConsoleSpanExporter?r.push(new jy.SimpleSpanProcessor(s)):r.push(new jy.BatchSpanProcessor(s));return e.length===0&&Bs.diag.warn("Unable to set up trace exporter(s) due to invalid exporter and/or protocol values."),r}Yn.getSpanProcessorsFromEnv=vqe;function Oqe(){let t=(0, Fs.getStringListFromEnv)("OTEL_PROPAGATORS");if(t==null)return;let e=new Map([["tracecontext",()=>new Fs.W3CTraceContextPropagator],["baggage",()=>new Fs.W3CBaggagePropagator],["b3",()=>new Y0.B3Propagator],["b3multi",()=>new Y0.B3Propagator({injectEncoding:Y0.B3InjectEncoding.MULTI_HEADER})],["jaeger",()=>new _qe.JaegerPropagator]]),r=Array.from(new Set(t)),s=r.map(a=>{let o=e.get(a)?.();if(!o){Bs.diag.warn(`Propagator "${a}" requested through environment variable is unavailable.`);return}return o}).reduce((a,o)=>(o&&a.push(o),a),[]);return s.length===0?null:r.length===1?s[0]:new Fs.CompositePropagator({propagators:s})}Yn.getPropagatorFromEnv=Oqe;});var EQ=f(zy=>{Object.defineProperty(zy,"__esModule",{value:true});zy.NodeSDK=void 0;var Vr=(M(),A(H)),Nqe=(In(),A(yo)),Cqe=(Jr(),A(Qr)),Il=(xi(),A(Ra)),Mh=(DE(),A(LE)),Pqe=(q4(),A(F4)),bqe=e9(),$0=(a9(),A(s9)),Mqe=_9(),_Q=(A9(),A(y9)),Iqe=(Cy(),A(L0)),xqe=N9(),uc=(er(),A(vr)),Lqe=(di(),A(li)),Dqe=jC(),wqe=(ct(),A(Zt)),qs=(G(),A(Ze)),K0=hQ();function mQ(t,e){return parseInt(process.env[t]||"")||e}function Uqe(){let t=[],e=(0, qs.getStringListFromEnv)("OTEL_METRICS_EXPORTER");return e?(e.length===0&&Vr.diag.debug("OTEL_METRICS_EXPORTER is empty. Using default otlp exporter."),e.includes("none")?(Vr.diag.info('OTEL_METRICS_EXPORTER contains "none". Metric provider will not be initialized.'),t):(e.forEach(r=>{if(r==="otlp"){let n=process.env.OTEL_EXPORTER_OTLP_METRICS_PROTOCOL?.trim()||process.env.OTEL_EXPORTER_OTLP_PROTOCOL?.trim(),s=mQ("OTEL_METRIC_EXPORT_INTERVAL",6e4),a=mQ("OTEL_METRIC_EXPORT_TIMEOUT",3e4);switch(n){case "grpc":t.push(new uc.PeriodicExportingMetricReader({exporter:new Mqe.OTLPMetricExporter,exportIntervalMillis:s,exportTimeoutMillis:a}));break;case "http/json":t.push(new uc.PeriodicExportingMetricReader({exporter:new Iqe.OTLPMetricExporter,exportIntervalMillis:s,exportTimeoutMillis:a}));break;case "http/protobuf":t.push(new uc.PeriodicExportingMetricReader({exporter:new _Q.OTLPMetricExporter,exportIntervalMillis:s,exportTimeoutMillis:a}));break;default:Vr.diag.warn(`Unsupported OTLP metrics protocol: "${n}". Using http/protobuf.`),t.push(new uc.PeriodicExportingMetricReader({exporter:new _Q.OTLPMetricExporter,exportIntervalMillis:s,exportTimeoutMillis:a}));}}else r==="console"?t.push(new uc.PeriodicExportingMetricReader({exporter:new uc.ConsoleMetricExporter})):r==="prometheus"?t.push(new xqe.PrometheusExporter):Vr.diag.warn(`Unsupported OTEL_METRICS_EXPORTER value: "${r}". Supported values are: otlp, console, prometheus, none.`);}),t)):t}var W0=class{_tracerProviderConfig;_loggerProviderConfig;_meterProviderConfig;_instrumentations;_resource;_resourceDetectors;_autoDetectResources;_tracerProvider;_loggerProvider;_meterProvider;_serviceName;_configuration;_disabled;constructor(e={}){(0, qs.getBooleanFromEnv)("OTEL_SDK_DISABLED")&&(this._disabled=true);let r=(0, qs.getStringFromEnv)("OTEL_LOG_LEVEL");if(r!=null&&Vr.diag.setLogger(new Vr.DiagConsoleLogger,{logLevel:(0, qs.diagLogLevelFromString)(r)}),this._configuration=e,this._resource=e.resource??(0, Il.defaultResource)(),this._autoDetectResources=e.autoDetectResources??true,this._autoDetectResources?e.resourceDetectors!=null?this._resourceDetectors=e.resourceDetectors:(0, qs.getStringFromEnv)("OTEL_NODE_RESOURCE_DETECTORS")?this._resourceDetectors=(0, K0.getResourceDetectorsFromEnv)():this._resourceDetectors=[Il.envDetector,Il.processDetector,Il.hostDetector]:this._resourceDetectors=[],this._serviceName=e.serviceName,e.traceExporter||e.spanProcessor||e.spanProcessors){let n={};e.sampler&&(n.sampler=e.sampler),e.spanLimits&&(n.spanLimits=e.spanLimits),e.idGenerator&&(n.idGenerator=e.idGenerator),e.spanProcessor&&Vr.diag.warn("The 'spanProcessor' option is deprecated. Please use 'spanProcessors' instead.");let s=e.spanProcessor??new Lqe.BatchSpanProcessor(e.traceExporter),a=e.spanProcessors??[s];this._tracerProviderConfig={tracerConfig:n,spanProcessors:a,contextManager:e.contextManager,textMapPropagator:e.textMapPropagator};}if(e.logRecordProcessors?this._loggerProviderConfig={logRecordProcessors:e.logRecordProcessors}:e.logRecordProcessor?(this._loggerProviderConfig={logRecordProcessors:[e.logRecordProcessor]},Vr.diag.warn("The 'logRecordProcessor' option is deprecated. Please use 'logRecordProcessors' instead.")):this.configureLoggerProviderFromEnv(),e.metricReaders||e.metricReader||e.views){let n={};e.metricReaders?n.readers=e.metricReaders:e.metricReader&&(n.readers=[e.metricReader],Vr.diag.warn("The 'metricReader' option is deprecated. Please use 'metricReaders' instead.")),e.views&&(n.views=e.views),this._meterProviderConfig=n;}this._instrumentations=e.instrumentations?.flat()??[];}start(){if(this._disabled)return;if((0, Cqe.registerInstrumentations)({instrumentations:this._instrumentations}),this._autoDetectResources){let n={detectors:this._resourceDetectors};this._resource=this._resource.merge((0, Il.detectResources)(n));}this._resource=this._serviceName===void 0?this._resource:this._resource.merge((0, Il.resourceFromAttributes)({[wqe.ATTR_SERVICE_NAME]:this._serviceName}));let e=this._tracerProviderConfig?this._tracerProviderConfig.spanProcessors:(0, K0.getSpanProcessorsFromEnv)();if(this._tracerProvider=new Dqe.NodeTracerProvider({...this._configuration,resource:this._resource,spanProcessors:e}),e.length>0&&this._tracerProvider.register({contextManager:this._tracerProviderConfig?.contextManager??this._configuration?.contextManager,propagator:this._tracerProviderConfig?.textMapPropagator??(0, K0.getPropagatorFromEnv)()}),this._loggerProviderConfig){let n=new Mh.LoggerProvider({resource:this._resource,processors:this._loggerProviderConfig.logRecordProcessors});this._loggerProvider=n,Nqe.logs.setGlobalLoggerProvider(n);}let r=Uqe();if(this._meterProviderConfig||r.length>0){let n=[];this._meterProviderConfig?.readers&&n.push(...this._meterProviderConfig.readers),n.length===0&&r.forEach(a=>n.push(a));let s=new uc.MeterProvider({resource:this._resource,views:this._meterProviderConfig?.views??[],readers:n});this._meterProvider=s,Vr.metrics.setGlobalMeterProvider(s);for(let a of this._instrumentations)a.setMeterProvider(Vr.metrics.getMeterProvider());}}shutdown(){let e=[];return this._tracerProvider&&e.push(this._tracerProvider.shutdown()),this._loggerProvider&&e.push(this._loggerProvider.shutdown()),this._meterProvider&&e.push(this._meterProvider.shutdown()),Promise.all(e).then(()=>{})}configureLoggerProviderFromEnv(){let e=(0, qs.getStringListFromEnv)("OTEL_LOGS_EXPORTER")??[];if(e.length===0&&(Vr.diag.debug("OTEL_LOGS_EXPORTER is empty. Using default otlp exporter."),e.push("otlp")),e.includes("none")){Vr.diag.info('OTEL_LOGS_EXPORTER contains "none". Logger provider will not be initialized.');return}let r=[];e.forEach(n=>{if(n==="otlp"){let s=((0, qs.getStringFromEnv)("OTEL_EXPORTER_OTLP_LOGS_PROTOCOL")??(0, qs.getStringFromEnv)("OTEL_EXPORTER_OTLP_PROTOCOL"))?.trim();switch(s){case "grpc":r.push(new bqe.OTLPLogExporter);break;case "http/json":r.push(new Pqe.OTLPLogExporter);break;case "http/protobuf":r.push(new $0.OTLPLogExporter);break;case void 0:case "":r.push(new $0.OTLPLogExporter);break;default:Vr.diag.warn(`Unsupported OTLP logs protocol: "${s}". Using http/protobuf.`),r.push(new $0.OTLPLogExporter);}}else n==="console"?r.push(new Mh.ConsoleLogRecordExporter):Vr.diag.warn(`Unsupported OTEL_LOGS_EXPORTER value: "${n}". Supported values are: otlp, console, none.`);}),r.length>0&&(this._loggerProviderConfig={logRecordProcessors:r.map(n=>n instanceof Mh.ConsoleLogRecordExporter?new Mh.SimpleLogRecordProcessor(n):new Mh.BatchLogRecordProcessor(n))});}};zy.NodeSDK=W0;});var TQ=f(jt=>{Object.defineProperty(jt,"__esModule",{value:true});jt.NodeSDK=jt.tracing=jt.resources=jt.node=jt.metrics=jt.logs=jt.core=jt.contextBase=jt.api=void 0;jt.api=(M(),A(H));jt.contextBase=(M(),A(H));jt.core=(G(),A(Ze));jt.logs=(DE(),A(LE));jt.metrics=(er(),A(vr));jt.node=jC();jt.resources=(xi(),A(Ra));jt.tracing=(di(),A(li));var kqe=EQ();Object.defineProperty(jt,"NodeSDK",{enumerable:true,get:function(){return kqe.NodeSDK}});});var Ne={};Ue(Ne,{__addDisposableResource:()=>GQ,__assign:()=>Yy,__asyncDelegator:()=>wQ,__asyncGenerator:()=>DQ,__asyncValues:()=>UQ,__await:()=>xl,__awaiter:()=>PQ,__classPrivateFieldGet:()=>FQ,__classPrivateFieldIn:()=>HQ,__classPrivateFieldSet:()=>qQ,__createBinding:()=>Ky,__decorate:()=>yQ,__disposeResources:()=>jQ,__esDecorate:()=>RQ,__exportStar:()=>MQ,__extends:()=>SQ,__generator:()=>bQ,__importDefault:()=>BQ,__importStar:()=>VQ,__makeTemplateObject:()=>kQ,__metadata:()=>CQ,__param:()=>AQ,__propKey:()=>OQ,__read:()=>J0,__rest:()=>gQ,__rewriteRelativeImportExtension:()=>zQ,__runInitializers:()=>vQ,__setFunctionName:()=>NQ,__spread:()=>IQ,__spreadArray:()=>LQ,__spreadArrays:()=>xQ,__values:()=>$y,default:()=>Fqe});function SQ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");X0(t,e);function r(){this.constructor=t;}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r);}function gQ(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function yQ(t,e,r,n){var s=arguments.length,a=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,r,n);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(a=(s<3?o(a):s>3?o(e,r,a):o(e,r))||a);return s>3&&a&&Object.defineProperty(e,r,a),a}function AQ(t,e){return function(r,n){e(r,n,t);}}function RQ(t,e,r,n,s,a){function o(R){if(R!==void 0&&typeof R!="function")throw new TypeError("Function expected");return R}for(var i=n.kind,c=i==="getter"?"get":i==="setter"?"set":"value",u=!e&&t?n.static?t:t.prototype:null,l=e||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),d,p=false,h=r.length-1;h>=0;h--){var T={};for(var g in n)T[g]=g==="access"?{}:n[g];for(var g in n.access)T.access[g]=n.access[g];T.addInitializer=function(R){if(p)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(R||null));};var y=(0, r[h])(i==="accessor"?{get:l.get,set:l.set}:l[c],T);if(i==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(d=o(y.get))&&(l.get=d),(d=o(y.set))&&(l.set=d),(d=o(y.init))&&s.unshift(d);}else (d=o(y))&&(i==="field"?s.unshift(d):l[c]=d);}u&&Object.defineProperty(u,n.name,l),p=true;}function vQ(t,e,r){for(var n=arguments.length>2,s=0;s<e.length;s++)r=n?e[s].call(t,r):e[s].call(t);return n?r:void 0}function OQ(t){return typeof t=="symbol"?t:"".concat(t)}function NQ(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:true,value:r?"".concat(r," ",e):e})}function CQ(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function PQ(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a);})}return new(r||(r=Promise))(function(a,o){function i(l){try{u(n.next(l));}catch(d){o(d);}}function c(l){try{u(n.throw(l));}catch(d){o(d);}}function u(l){l.done?a(l.value):s(l.value).then(i,c);}u((n=n.apply(t,e||[])).next());})}function bQ(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,s,a,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=i(0),o.throw=i(1),o.return=i(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function i(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,s&&(a=u[0]&2?s.return:u[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,u[1])).done)return a;switch(s=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r);}catch(l){u=[6,l],s=0;}finally{n=a=0;}if(u[0]&5)throw u[1];return {value:u[0]?u[1]:void 0,done:true}}}function MQ(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Ky(e,t,r);}function $y(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return {next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function J0(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,a=[],o;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)a.push(s.value);}catch(i){o={error:i};}finally{try{s&&!s.done&&(r=n.return)&&r.call(n);}finally{if(o)throw o.error}}return a}function IQ(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(J0(arguments[e]));return t}function xQ(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var a=arguments[e],o=0,i=a.length;o<i;o++,s++)n[s]=a[o];return n}function LQ(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,a;n<s;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))}function xl(t){return this instanceof xl?(this.v=t,this):new xl(t)}function DQ(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),i("next"),i("throw"),i("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(h){return function(T){return Promise.resolve(T).then(h,d)}}function i(h,T){n[h]&&(s[h]=function(g){return new Promise(function(y,R){a.push([h,g,y,R])>1||c(h,g);})},T&&(s[h]=T(s[h])));}function c(h,T){try{u(n[h](T));}catch(g){p(a[0][3],g);}}function u(h){h.value instanceof xl?Promise.resolve(h.value.v).then(l,d):p(a[0][2],h);}function l(h){c("next",h);}function d(h){c("throw",h);}function p(h,T){h(T),a.shift(),a.length&&c(a[0][0],a[0][1]);}}function wQ(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,a){e[s]=t[s]?function(o){return (r=!r)?{value:xl(t[s](o)),done:false}:a?a(o):o}:a;}}function UQ(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof $y=="function"?$y(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(a){r[a]=t[a]&&function(o){return new Promise(function(i,c){o=t[a](o),s(i,c,o.done,o.value);})};}function s(a,o,i,c){Promise.resolve(c).then(function(u){a({value:u,done:i});},o);}}function kQ(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function VQ(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=Q0(t),n=0;n<r.length;n++)r[n]!=="default"&&Ky(e,t,r[n]);return Vqe(e,t),e}function BQ(t){return t&&t.__esModule?t:{default:t}}function FQ(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function qQ(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r}function HQ(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function GQ(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose];}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(s=n);}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this);}catch(a){return Promise.reject(a)}}),t.stack.push({value:e,dispose:n,async:r});}else r&&t.stack.push({async:true});return e}function jQ(t){function e(a){t.error=t.hasError?new Bqe(a,t.error,"An error was suppressed during disposal."):a,t.hasError=true;}var r,n=0;function s(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(s);if(r.dispose){var a=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(a).then(s,function(o){return e(o),s()})}else n|=1;}catch(o){e(o);}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}function zQ(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,s,a,o){return n?e?".jsx":".js":s&&(!a||!o)?r:s+a+"."+o.toLowerCase()+"js"}):t}var X0,Yy,Ky,Vqe,Q0,Bqe,Fqe,Ce=E(()=>{X0=function(t,e){return X0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n;}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s]);},X0(t,e)};Yy=function(){return Yy=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);}return e},Yy.apply(this,arguments)};Ky=Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:true,get:function(){return e[r]}}),Object.defineProperty(t,n,s);}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r];};Vqe=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e});}:function(t,e){t.default=e;},Q0=function(t){return Q0=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},Q0(t)};Bqe=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};Fqe={__extends:SQ,__assign:Yy,__rest:gQ,__decorate:yQ,__param:AQ,__esDecorate:RQ,__runInitializers:vQ,__propKey:OQ,__setFunctionName:NQ,__metadata:CQ,__awaiter:PQ,__generator:bQ,__createBinding:Ky,__exportStar:MQ,__values:$y,__read:J0,__spread:IQ,__spreadArrays:xQ,__spreadArray:LQ,__await:xl,__asyncGenerator:DQ,__asyncDelegator:wQ,__asyncValues:UQ,__makeTemplateObject:kQ,__importStar:VQ,__importDefault:BQ,__classPrivateFieldGet:FQ,__classPrivateFieldSet:qQ,__classPrivateFieldIn:HQ,__addDisposableResource:GQ,__disposeResources:jQ,__rewriteRelativeImportExtension:zQ};});var $Q=f(Z0=>{Object.defineProperty(Z0,"__esModule",{value:true});Z0.log=jqe;var YQ=(Ce(),A(Ne)),qqe=P("os"),Hqe=YQ.__importDefault(P("util")),Gqe=YQ.__importStar(P("process"));function jqe(t,...e){Gqe.stderr.write(`${Hqe.default.format(t,...e)}${qqe.EOL}`);}});var JQ=f(ix=>{Object.defineProperty(ix,"__esModule",{value:true});var zqe=$Q(),KQ=typeof process<"u"&&process.env&&process.env.DEBUG||void 0,WQ,ex=[],tx=[],Wy=[];KQ&&rx(KQ);var XQ=Object.assign(t=>QQ(t),{enable:rx,enabled:nx,disable:Yqe,log:zqe.log});function rx(t){WQ=t,ex=[],tx=[];let e=/\*/g,r=t.split(",").map(n=>n.trim().replace(e,".*?"));for(let n of r)n.startsWith("-")?tx.push(new RegExp(`^${n.substr(1)}$`)):ex.push(new RegExp(`^${n}$`));for(let n of Wy)n.enabled=nx(n.namespace);}function nx(t){if(t.endsWith("*"))return  true;for(let e of tx)if(e.test(t))return  false;for(let e of ex)if(e.test(t))return  true;return  false}function Yqe(){let t=WQ||"";return rx(""),t}function QQ(t){let e=Object.assign(r,{enabled:nx(t),destroy:$qe,log:XQ.log,namespace:t,extend:Kqe});function r(...n){e.enabled&&(n.length>0&&(n[0]=`${t} ${n[0]}`),e.log(...n));}return Wy.push(e),e}function $qe(){let t=Wy.indexOf(this);return t>=0?(Wy.splice(t,1),true):false}function Kqe(t){let e=QQ(`${this.namespace}:${t}`);return e.log=this.log,e}ix.default=XQ;});var xh=f(Hs=>{Object.defineProperty(Hs,"__esModule",{value:true});Hs.TypeSpecRuntimeLogger=void 0;Hs.createLoggerContext=rJ;Hs.setLogLevel=Xqe;Hs.getLogLevel=Qqe;Hs.createClientLogger=Jqe;var Wqe=(Ce(),A(Ne)),Ih=Wqe.__importDefault(JQ()),ox=["verbose","info","warning","error"],ZQ={verbose:400,info:300,warning:200,error:100};function eJ(t,e){e.log=(...r)=>{t.log(...r);};}function tJ(t){return ox.includes(t)}function rJ(t){let e=new Set,r=typeof process<"u"&&process.env&&process.env[t.logLevelEnvVarName]||void 0,n,s=(0, Ih.default)(t.namespace);s.log=(...l)=>{Ih.default.log(...l);};function a(l){if(l&&!tJ(l))throw new Error(`Unknown log level '${l}'. Acceptable values: ${ox.join(",")}`);n=l;let d=[];for(let p of e)o(p)&&d.push(p.namespace);Ih.default.enable(d.join(","));}r&&(tJ(r)?a(r):console.error(`${t.logLevelEnvVarName} set to unknown log level '${r}'; logging is not enabled. Acceptable values: ${ox.join(", ")}.`));function o(l){return !!(n&&ZQ[l.level]<=ZQ[n])}function i(l,d){let p=Object.assign(l.extend(d),{level:d});if(eJ(l,p),o(p)){let h=Ih.default.disable();Ih.default.enable(h+","+p.namespace);}return e.add(p),p}function c(){return n}function u(l){let d=s.extend(l);return eJ(s,d),{error:i(d,"error"),warning:i(d,"warning"),info:i(d,"info"),verbose:i(d,"verbose")}}return {setLogLevel:a,getLogLevel:c,createClientLogger:u,logger:s}}var Xy=rJ({logLevelEnvVarName:"TYPESPEC_RUNTIME_LOG_LEVEL",namespace:"typeSpecRuntime"});Hs.TypeSpecRuntimeLogger=Xy.logger;function Xqe(t){Xy.setLogLevel(t);}function Qqe(){return Xy.getLogLevel()}function Jqe(t){return Xy.createClientLogger(t)}});var nJ=f(Qy=>{Object.defineProperty(Qy,"__esModule",{value:true});Qy.createLoggerContext=void 0;var Zqe=xh();Object.defineProperty(Qy,"createLoggerContext",{enumerable:true,get:function(){return Zqe.createLoggerContext}});});var Ll=f(lc=>{Object.defineProperty(lc,"__esModule",{value:true});lc.AzureLogger=void 0;lc.setLogLevel=tHe;lc.getLogLevel=rHe;lc.createClientLogger=nHe;var eHe=nJ(),Jy=(0, eHe.createLoggerContext)({logLevelEnvVarName:"AZURE_LOG_LEVEL",namespace:"azure"});lc.AzureLogger=Jy.logger;function tHe(t){Jy.setLogLevel(t);}function rHe(){return Jy.getLogLevel()}function nHe(t){return Jy.createClientLogger(t)}});var sJ=f(qe=>{Object.defineProperty(qe,"__esModule",{value:true});qe.getShallowFileSize=qe.getShallowDirectorySizeSync=qe.getShallowDirectorySize=qe.confirmDirExists=qe.unlinkAsync=qe.readdirAsync=qe.readFileAsync=qe.writeFileAsync=qe.appendFileAsync=qe.accessAsync=qe.mkdirAsync=qe.lstatAsync=qe.statAsync=void 0;var iJ=(Ce(),A(Ne)),Oi=iJ.__importDefault(P("fs")),oJ=iJ.__importDefault(P("path")),Vo=P("util");qe.statAsync=(0, Vo.promisify)(Oi.default.stat);qe.lstatAsync=(0, Vo.promisify)(Oi.default.lstat);qe.mkdirAsync=(0, Vo.promisify)(Oi.default.mkdir);qe.accessAsync=(0, Vo.promisify)(Oi.default.access);qe.appendFileAsync=(0, Vo.promisify)(Oi.default.appendFile);qe.writeFileAsync=(0, Vo.promisify)(Oi.default.writeFile);qe.readFileAsync=(0, Vo.promisify)(Oi.default.readFile);qe.readdirAsync=(0, Vo.promisify)(Oi.default.readdir);qe.unlinkAsync=(0, Vo.promisify)(Oi.default.unlink);var iHe=async t=>{try{if(!(await(0,qe.lstatAsync)(t)).isDirectory())throw new Error("Path existed but was not a directory")}catch(e){if(e&&e.code==="ENOENT")try{await(0,qe.mkdirAsync)(t);}catch(r){if(r&&r.code!=="EEXIST")throw r}}};qe.confirmDirExists=iHe;var oHe=async t=>{let e=await(0, qe.readdirAsync)(t),r=0;for(let n of e){let s=await(0, qe.statAsync)(oJ.default.join(t,n));s.isFile()&&(r+=s.size);}return r};qe.getShallowDirectorySize=oHe;var sHe=t=>{let e=Oi.default.readdirSync(t),r=0;for(let n=0;n<e.length;n++)r+=Oi.default.statSync(oJ.default.join(t,e[n])).size;return r};qe.getShallowDirectorySizeSync=sHe;var aHe=async t=>{let e=await(0, qe.statAsync)(t);return e.isFile()?e.size:null};qe.getShallowFileSize=aHe;});var dc=f(dt=>{Object.defineProperty(dt,"__esModule",{value:true});dt.getResourceProvider=dt.isAks=dt.isFunctionApp=dt.isAppService=dt.getOsPrefix=dt.isDarwin=dt.isLinux=dt.isWindows=void 0;dt.ignoreOutgoingRequestHook=uHe;dt.msToTimeSpan=THe;dt.parseResourceDetectorsFromEnvVar=SHe;var Gs=(xi(),A(Ra)),cHe=(M(),A(H));function uHe(t){if(t&&t.headers&&!Array.isArray(t.headers)){let e=t.headers;if(e["User-Agent"]&&e["User-Agent"].toString().indexOf("azsdk-js-monitor-opentelemetry-exporter")>-1||e["user-agent"]&&e["user-agent"].toString().indexOf("azsdk-js-monitor-opentelemetry-exporter")>-1)return  true}return  false}var lHe=()=>process.platform==="win32";dt.isWindows=lHe;var dHe=()=>process.platform==="linux";dt.isLinux=dHe;var pHe=()=>process.platform==="darwin";dt.isDarwin=pHe;var fHe=()=>(0, dt.isWindows)()?"w":(0, dt.isLinux)()?"l":"u";dt.getOsPrefix=fHe;var hHe=()=>!!(process.env.WEBSITE_SITE_NAME&&!process.env.FUNCTIONS_WORKER_RUNTIME);dt.isAppService=hHe;var _He=()=>!!process.env.FUNCTIONS_WORKER_RUNTIME;dt.isFunctionApp=_He;var mHe=()=>!!(process.env.AKS_ARM_NAMESPACE_ID||process.env.KUBERNETES_SERVICE_HOST);dt.isAks=mHe;var EHe=()=>(0, dt.isAppService)()?"a":(0, dt.isFunctionApp)()?"f":(0, dt.isAks)()?"k":"u";dt.getResourceProvider=EHe;function THe(t){let e=t;(Number.isNaN(e)||e<0||!Number.isFinite(t))&&(e=0);let r=(e/1e3%60).toFixed(7).replace(/0{0,4}$/,""),n=`${Math.floor(e/(1e3*60))%60}`,s=`${Math.floor(e/(1e3*60*60))%24}`,a=Math.floor(e/(1e3*60*60*24));return r=r.indexOf(".")<2?`0${r}`:r,n=n.length<2?`0${n}`:n,s=s.length<2?`0${s}`:s,`${(a>0?`${a}.`:"")+s}:${n}:${r}`}function SHe(){let t=new Map([["env",Gs.envDetector],["host",Gs.hostDetector],["os",Gs.osDetector],["process",Gs.processDetector],["serviceinstance",Gs.serviceInstanceIdDetector]]);if(process.env.OTEL_NODE_RESOURCE_DETECTORS!=null){let e=process.env.OTEL_NODE_RESOURCE_DETECTORS?.split(",")??["env","host","os"];return e.includes("all")?[...t.values()]:e.includes("none")?[]:e.flatMap(r=>{let n=t.get(r);return n?[n]:(cHe.diag.error(`Invalid resource detector "${r}" specified in the environment variable OTEL_NODE_RESOURCE_DETECTORS`),[])})}else return [Gs.envDetector,Gs.hostDetector,Gs.osDetector]}});var aJ=f(Ye=>{Object.defineProperty(Ye,"__esModule",{value:true});Ye.ignoreOutgoingRequestHook=Ye.unlinkAsync=Ye.writeFileAsync=Ye.mkdirAsync=Ye.lstatAsync=Ye.statAsync=Ye.readFileAsync=Ye.readdirAsync=Ye.getShallowFileSize=Ye.getShallowDirectorySizeSync=Ye.getShallowDirectorySize=Ye.confirmDirExists=Ye.appendFileAsync=Ye.accessAsync=void 0;var An=sJ();Object.defineProperty(Ye,"accessAsync",{enumerable:true,get:function(){return An.accessAsync}});Object.defineProperty(Ye,"appendFileAsync",{enumerable:true,get:function(){return An.appendFileAsync}});Object.defineProperty(Ye,"confirmDirExists",{enumerable:true,get:function(){return An.confirmDirExists}});Object.defineProperty(Ye,"getShallowDirectorySize",{enumerable:true,get:function(){return An.getShallowDirectorySize}});Object.defineProperty(Ye,"getShallowDirectorySizeSync",{enumerable:true,get:function(){return An.getShallowDirectorySizeSync}});Object.defineProperty(Ye,"getShallowFileSize",{enumerable:true,get:function(){return An.getShallowFileSize}});Object.defineProperty(Ye,"readdirAsync",{enumerable:true,get:function(){return An.readdirAsync}});Object.defineProperty(Ye,"readFileAsync",{enumerable:true,get:function(){return An.readFileAsync}});Object.defineProperty(Ye,"statAsync",{enumerable:true,get:function(){return An.statAsync}});Object.defineProperty(Ye,"lstatAsync",{enumerable:true,get:function(){return An.lstatAsync}});Object.defineProperty(Ye,"mkdirAsync",{enumerable:true,get:function(){return An.mkdirAsync}});Object.defineProperty(Ye,"writeFileAsync",{enumerable:true,get:function(){return An.writeFileAsync}});Object.defineProperty(Ye,"unlinkAsync",{enumerable:true,get:function(){return An.unlinkAsync}});var gHe=dc();Object.defineProperty(Ye,"ignoreOutgoingRequestHook",{enumerable:true,get:function(){return gHe.ignoreOutgoingRequestHook}});});var cJ=f(Zy=>{Object.defineProperty(Zy,"__esModule",{value:true});Zy.DiagFileConsoleLogger=void 0;var ax=(Ce(),A(Ne)),yHe=ax.__importDefault(P("fs")),AHe=ax.__importDefault(P("os")),pc=ax.__importDefault(P("path")),ro=aJ(),sx=class{_TAG="DiagFileConsoleLogger:";_cleanupTimeOut=60*30*1e3;_fileCleanupTimer=null;_tempDir;_logFileName;_fileFullPath;_backUpNameFormat;_logToFile=false;_logToConsole=true;_maxHistory;_maxSizeBytes;_logDestination;constructor(){this._logDestination=process.env.APPLICATIONINSIGHTS_LOG_DESTINATION,this._logDestination==="file+console"&&(this._logToFile=true),this._logDestination==="file"&&(this._logToFile=true,this._logToConsole=false),this._maxSizeBytes=5e4,this._maxHistory=1,this._logFileName="applicationinsights.log";let e=process.env.APPLICATIONINSIGHTS_LOGDIR;e?pc.default.isAbsolute(e)?this._tempDir=e:this._tempDir=pc.default.join(process.cwd(),e):this._tempDir=pc.default.join(AHe.default.tmpdir(),"appInsights-node"),this._fileFullPath=pc.default.join(this._tempDir,this._logFileName),this._backUpNameFormat=`.${this._logFileName}`,this._logToFile&&(this._fileCleanupTimer||(this._fileCleanupTimer=setInterval(()=>{this._fileCleanupTask();},this._cleanupTimeOut),this._fileCleanupTimer.unref()));}error(e,...r){this._shouldFilterResourceAttributeWarning(e,r)||this.logMessage(e,r);}warn(e,...r){this._shouldFilterResourceAttributeWarning(e,r)||this.logMessage(e,r);}info(e,...r){this.logMessage(e,r);}debug(e,...r){this.logMessage(e,r);}verbose(e,...r){this.logMessage(e,r);}async logMessage(e,...r){try{let n=e?[e,...r]:r;this._logToFile&&await this._storeToDisk(n),this._logToConsole&&console.log(...n);}catch(n){console.log(this._TAG,`Failed to log to file: ${n&&n.message}`);}}_shouldFilterResourceAttributeWarning(e,r){let n=["accessing resource attributes before async attributes settled","resource attributes being accessed before async attributes finished","async attributes settled","resource attributes accessed before async detection completed","module @azure/core-tracing has been loaded before @azure/opentelemetry-instrumentation-azure-sdk"];if(typeof e=="string"&&n.some(s=>e.toLowerCase().includes(s)))return  true;if(r&&Array.isArray(r)){for(let s of r)if(typeof s=="string"&&n.some(a=>s.toLowerCase().includes(a)))return  true}if(typeof e=="string"){let s=e.split(" ");if(s.length>=3&&s[0].toLowerCase()==="accessing"&&s[1].toLowerCase()==="resource"&&s[2].toLowerCase()==="attributes")return  true}return  false}async _storeToDisk(e){let r=`${e}\r
`;try{await(0,ro.confirmDirExists)(this._tempDir);}catch(s){console.log(this._TAG,`Failed to create directory for log file: ${s&&s.message}`);return}try{await(0,ro.accessAsync)(this._fileFullPath,yHe.default.constants.F_OK);}catch{try{await(0,ro.appendFileAsync)(this._fileFullPath,r);}catch(a){console.log(this._TAG,`Failed to put log into file: ${a&&a.message}`);return}}let n=await(0, ro.getShallowFileSize)(this._fileFullPath);n&&n>this._maxSizeBytes?await this._createBackupFile(r):await(0, ro.appendFileAsync)(this._fileFullPath,r);}async _createBackupFile(e){try{let r=await(0,ro.readFileAsync)(this._fileFullPath),n=pc.default.join(this._tempDir,`${new Date().getTime()}.${this._logFileName}`);await(0,ro.writeFileAsync)(n,r);}catch(r){console.log("Failed to generate backup log file",r);}finally{await(0, ro.writeFileAsync)(this._fileFullPath,e);}}async _fileCleanupTask(){try{let e=await(0,ro.readdirAsync)(this._tempDir);e=e.filter(n=>pc.default.basename(n).indexOf(this._backUpNameFormat)>-1),e.sort((n,s)=>{let a=new Date(parseInt(n.split(this._backUpNameFormat)[0])),o=new Date(parseInt(s.split(this._backUpNameFormat)[0]));return a<o?-1:1});let r=e.length;for(let n=0;n<r-this._maxHistory;n++){let s=pc.default.join(this._tempDir,e[n]);await(0,ro.unlinkAsync)(s);}}catch(e){console.log(this._TAG,`Failed to cleanup log files: ${e&&e.message}`);}}};Zy.DiagFileConsoleLogger=sx;});var Dl=f(eA=>{Object.defineProperty(eA,"__esModule",{value:true});eA.Logger=void 0;var fc=Ll(),no=(M(),A(H)),RHe=cJ(),cx=class t{static instance;diagLevel;azureLogger;openTelemetryLogger;logToAzureLogger;logToOpenTelemetry;static getInstance(){return t.instance||(t.instance=new t),t.instance}constructor(){this.azureLogger=(0, fc.createClientLogger)("@azure/monitor-opentelemetry"),this.openTelemetryLogger=no.diag.createComponentLogger({namespace:"@azure/monitor-opentelemetry"}),this.logToOpenTelemetry=true,this.logToAzureLogger=false;let e=process.env.APPLICATIONINSIGHTS_INSTRUMENTATION_LOGGING_LEVEL||process.env.OTEL_LOG_LEVEL;switch(this.diagLevel=no.DiagLogLevel.WARN,e){case "ALL":this.diagLevel=no.DiagLogLevel.ALL;break;case "DEBUG":this.diagLevel=no.DiagLogLevel.DEBUG;break;case "ERROR":this.diagLevel=no.DiagLogLevel.ERROR;break;case "INFO":this.diagLevel=no.DiagLogLevel.INFO;break;case "NONE":this.diagLevel=no.DiagLogLevel.NONE;break;case "VERBOSE":this.diagLevel=no.DiagLogLevel.VERBOSE;break;case "WARN":this.diagLevel=no.DiagLogLevel.WARN;break}let r=new RHe.DiagFileConsoleLogger;switch(no.diag.setLogger(r,{logLevel:this.diagLevel,suppressOverrideMessage:true}),process.env.APPLICATIONINSIGHTS_INSTRUMENTATION_LOGGING_LEVEL){case "VERBOSE":(0, fc.setLogLevel)("verbose");break;case "INFO":(0, fc.setLogLevel)("info");break;case "WARN":(0, fc.setLogLevel)("warning");break;case "ERROR":(0, fc.setLogLevel)("error");break;default:(0, fc.setLogLevel)(process.env.AZURE_LOG_LEVEL||"warning");break}fc.AzureLogger.log=(...s)=>{r.logMessage(...s);};}error(e,...r){this.logToAzureLogger&&this.azureLogger.error(e,r),this.logToOpenTelemetry&&this.openTelemetryLogger.error(e,r);}warn(e,...r){this.logToAzureLogger&&this.azureLogger.warning(e,r),this.logToOpenTelemetry&&this.openTelemetryLogger.warn(e,r);}info(e,...r){this.logToAzureLogger&&this.azureLogger.info(e,r),this.logToOpenTelemetry&&this.openTelemetryLogger.info(e,r);}debug(e,...r){this.logToAzureLogger&&this.azureLogger.verbose(e,r),this.logToOpenTelemetry&&this.openTelemetryLogger.debug(e,r);}verbose(e,...r){this.logToAzureLogger&&this.azureLogger.verbose(e,r),this.logToOpenTelemetry&&this.openTelemetryLogger.verbose(e,r);}setLogToAzureLogger(e){this.logToAzureLogger=e;}setLogToOpenTelemetry(e){this.logToOpenTelemetry=e;}};eA.Logger=cx;});var io=f(tA=>{Object.defineProperty(tA,"__esModule",{value:true});tA.Logger=void 0;var vHe=Dl();Object.defineProperty(tA,"Logger",{enumerable:true,get:function(){return vHe.Logger}});});var lJ=f(rA=>{Object.defineProperty(rA,"__esModule",{value:true});rA.EnvConfig=void 0;var uJ=io(),OHe="OTEL_TRACES_SAMPLER",NHe="OTEL_TRACES_SAMPLER_ARG",ux="microsoft.rate_limited",lx="microsoft.fixed_percentage",dx=class t{samplingRatio;tracesPerSecond;static instance;static getInstance(){return t.instance||(t.instance=new t),t.instance}constructor(){let e=process.env[OHe],r=process.env[NHe];if(e&&r)if(e===ux||e===lx){let n=Number(r);isNaN(n)||n<0?uJ.Logger.getInstance().warn("Invalid value for OTEL_TRACES_SAMPLER_ARG. It should be a non-negative number."):e===ux?this.tracesPerSecond=n:e===lx&&(this.samplingRatio=n);}else uJ.Logger.getInstance().warn(`Unsupported value for OTEL_TRACES_SAMPLER: ${e}. Supported values are: ${ux}, ${lx}.`);}};rA.EnvConfig=dx;});var px=f(nA=>{Object.defineProperty(nA,"__esModule",{value:true});nA.loadAzureFunctionCore=CHe;nA.dirName=PHe;function CHe(){try{return P("@azure/functions-core")}catch{return}}function PHe(){return __dirname}});var fJ=f(oA=>{Object.defineProperty(oA,"__esModule",{value:true});oA.JsonConfig=void 0;var pJ=(Ce(),A(Ne)),bHe=pJ.__importDefault(P("fs")),iA=pJ.__importDefault(P("path")),dJ=io(),MHe=px(),IHe="APPLICATIONINSIGHTS_CONFIGURATION_FILE",xHe="APPLICATIONINSIGHTS_CONFIGURATION_CONTENT",fx=class t{samplingRatio;tracesPerSecond;azureMonitorExporterOptions;instrumentationOptions;enableLiveMetrics;enableStandardMetrics;enableTraceBasedSamplingForLogs;enablePerformanceCounters;browserSdkLoaderOptions;static _instance;_tempDir;static getInstance(){return t._instance||(t._instance=new t),t._instance}constructor(){let e="";this._tempDir="";let r=process.env[xHe];if(r)e=r;else {let n="applicationinsights.json",s=iA.default.join((0, MHe.dirName)(),"../../../");this._tempDir=iA.default.join(s,n);let a=process.env[IHe];a&&(iA.default.isAbsolute(a)?this._tempDir=a:this._tempDir=iA.default.join(s,a));try{e=bHe.default.readFileSync(this._tempDir,"utf8");}catch(o){dJ.Logger.getInstance().info("Failed to read JSON config file: ",o);}}try{let n=JSON.parse(e);this.azureMonitorExporterOptions=n.azureMonitorExporterOptions,this.samplingRatio=n.samplingRatio,this.tracesPerSecond=n.tracesPerSecond,this.instrumentationOptions=n.instrumentationOptions,this.browserSdkLoaderOptions=n.browserSdkLoaderOptions,this.enableLiveMetrics=n.enableLiveMetrics,this.enableStandardMetrics=n.enableStandardMetrics,this.enableTraceBasedSamplingForLogs=n.enableTraceBasedSamplingForLogs;}catch(n){dJ.Logger.getInstance().info("Missing or invalid JSON config file: ",n);}}};oA.JsonConfig=fx;});var hJ,hc,sA,_J,mJ,Lh,EJ,TJ,Dh,SJ,gJ,yJ,hx,AJ,RJ,_x,mx,wh=E(()=>{hJ="azure.app.service.stamp",hc="cloud.resource_id",sA="REGION_NAME",_J="WEBSITE_HOME_STAMPNAME",mJ="WEBSITE_HOSTNAME",Lh="WEBSITE_INSTANCE_ID",EJ="WEBSITE_OWNER_NAME",TJ="WEBSITE_RESOURCE_GROUP",Dh="WEBSITE_SITE_NAME",SJ="WEBSITE_SLOT_NAME",gJ="WEBSITE_SKU",yJ="FUNCTIONS_EXTENSION_VERSION",hx="WEBSITE_MEMORY_LIMIT_MB",AJ="169.254.169.254",RJ="/metadata/instance/compute?api-version=2021-12-13&format=json",_x="azure.vm.scaleset.name",mx="azure.vm.sku";});function aA(t){let e=process.env[TJ],r=process.env[EJ],n=r;if(r&&r.indexOf("+")!==-1&&(n=r.split("+")[0]),!(!n&&!r))return `/subscriptions/${n}/resourceGroups/${e}/providers/Microsoft.Web/sites/${t}`}function cA(){return !!(process.env[yJ]||process.env[gJ]==="FlexConsumption")}var Ex=E(()=>{wh();});var LHe,Tx,Sx,vJ=E(()=>{wh();ct();Ex();LHe={[as]:sA,[xN]:SJ,[Jc]:mJ,[DN]:Lh,[hJ]:_J},Tx=class{detect(){let e={},r=process.env[Dh];if(r&&!cA()){e={...e,[Zc]:r},e={...e,[ss]:ga},e={...e,[cs]:kN};let n=aA(r);n&&(e={...e,[hc]:n});for(let[s,a]of Object.entries(LHe)){let o=process.env[a];o&&(e={...e,[s]:o});}}return {attributes:e}}},Sx=new Tx;});var DHe,gx,yx,OJ=E(()=>{ct();wh();Ex();DHe={[Zc]:Dh,[sE]:Lh,[aE]:hx},gx=class{detect(){let e={},r=process.env[Dh];if(r&&cA()){let n=process.env[Lh],s=process.env[hx];e={[ss]:ga,[cs]:UN,[as]:process.env[sA],[LN]:process.pid},r&&(e={...e,[Zc]:r}),n&&(e={...e,[sE]:n}),s&&(e={...e,[aE]:s});let a=aA(r);a&&(e={...e,[hc]:a});for(let[o,i]of Object.entries(DHe)){let c=process.env[i];c&&(e={...e,[o]:c});}}return {attributes:e}}},yx=new gx;});var Ax,Rx,CJ=E(()=>{M();G();ct();wh();Ax=class{detect(){let e=yt.with(ns(yt.active()),()=>this.getAzureVmMetadata()),r=[_x,mx,cs,ss,as,hc,Jc,cE,uE,lE],n={};return r.forEach(s=>{n[s]=e.then(a=>a[s]);}),{attributes:n}}async getAzureVmMetadata(){try{let e={host:AJ,path:RJ,method:"GET",timeout:5e3,headers:{Metadata:"True"}},r=await new Promise((s,a)=>{let o=setTimeout(()=>{i.destroy(),a(new Error("Azure metadata service request timed out."));},1e3),i=zFe__namespace.request(e,c=>{clearTimeout(o);let{statusCode:u}=c;c.setEncoding("utf8");let l="";c.on("data",d=>l+=d),c.on("end",()=>{if(u&&u>=200&&u<300)try{s(JSON.parse(l));}catch(d){a(d);}else a(new Error("Failed to load page, status code: "+u));});});i.on("error",c=>{clearTimeout(o),a(c);}),i.end();});return {[_x]:r.vmScaleSetName,[mx]:r.sku,[cs]:wN,[ss]:ga,[as]:r.location,[hc]:r.resourceId,[Jc]:r.vmId,[cE]:r.name,[uE]:r.vmSize,[lE]:r.version}}catch(e){return N.debug("AzureVmResourceDetector: not running in an Azure VM:",e.message),{}}}},Rx=new Ax;});var PJ=E(()=>{vJ();OJ();CJ();});var bJ={};Ue(bJ,{azureAppServiceDetector:()=>Sx,azureFunctionsDetector:()=>yx,azureVmDetector:()=>Rx});var MJ=E(()=>{PJ();});var IJ=f(uA=>{Object.defineProperty(uA,"__esModule",{value:true});uA.InternalConfig=void 0;var wl=(xi(),A(Ra)),wHe=lJ(),UHe=fJ(),kHe=io(),vx=(MJ(),A(bJ)),Ox=class{samplingRatio;tracesPerSecond;azureMonitorExporterOptions;instrumentationOptions;enableLiveMetrics;enableStandardMetrics;enableTraceBasedSamplingForLogs;enablePerformanceCounters;metricExportIntervalMillis;_resource=(0, wl.emptyResource)();set resource(e){this._resource=this._resource.merge(e);}get resource(){return this._resource}browserSdkLoaderOptions;constructor(e){this.azureMonitorExporterOptions={},this.samplingRatio=1,this.tracesPerSecond=void 0,this.enableLiveMetrics=true,this.enableStandardMetrics=true,this.enableTraceBasedSamplingForLogs=false,this.enablePerformanceCounters=true,this.metricExportIntervalMillis=this.calculateMetricExportInterval(),this.instrumentationOptions={http:{enabled:true},azureSdk:{enabled:true},mongoDb:{enabled:true},mySql:{enabled:true},postgreSql:{enabled:true},redis:{enabled:true},redis4:{enabled:true}},this._setDefaultResource(),this.browserSdkLoaderOptions={enabled:false,connectionString:""},e&&(this.azureMonitorExporterOptions=Object.assign(this.azureMonitorExporterOptions,e.azureMonitorExporterOptions),this.instrumentationOptions=Object.assign(this.instrumentationOptions,e.instrumentationOptions),this.resource=Object.assign(this.resource,e.resource),this.samplingRatio=e.samplingRatio!==void 0?e.samplingRatio:this.samplingRatio,this.tracesPerSecond=e.tracesPerSecond!==void 0?e.tracesPerSecond:this.tracesPerSecond,this.browserSdkLoaderOptions=Object.assign(this.browserSdkLoaderOptions,e.browserSdkLoaderOptions),this.enableLiveMetrics=e.enableLiveMetrics!==void 0?e.enableLiveMetrics:this.enableLiveMetrics,this.enableStandardMetrics=e.enableStandardMetrics!==void 0?e.enableStandardMetrics:this.enableStandardMetrics,this.enableTraceBasedSamplingForLogs=e.enableTraceBasedSamplingForLogs!==void 0?e.enableTraceBasedSamplingForLogs:this.enableTraceBasedSamplingForLogs,this.enablePerformanceCounters=e.enablePerformanceCounters!==void 0?e.enablePerformanceCounters:this.enablePerformanceCounters),this._mergeJsonConfig(),this._mergeEnvConfig();}_mergeEnvConfig(){let e=wHe.EnvConfig.getInstance();this.samplingRatio=e.samplingRatio!==void 0?e.samplingRatio:this.samplingRatio,this.tracesPerSecond=e.tracesPerSecond!==void 0?e.tracesPerSecond:this.tracesPerSecond;}_mergeJsonConfig(){try{let e=UHe.JsonConfig.getInstance();this.samplingRatio=e.samplingRatio!==void 0?e.samplingRatio:this.samplingRatio,this.tracesPerSecond=e.tracesPerSecond!==void 0?e.tracesPerSecond:this.tracesPerSecond,this.browserSdkLoaderOptions=Object.assign(this.browserSdkLoaderOptions,e.browserSdkLoaderOptions),this.enableLiveMetrics=e.enableLiveMetrics!==void 0?e.enableLiveMetrics:this.enableLiveMetrics,this.enableStandardMetrics=e.enableStandardMetrics!==void 0?e.enableStandardMetrics:this.enableStandardMetrics,this.enableTraceBasedSamplingForLogs=e.enableTraceBasedSamplingForLogs!==void 0?e.enableTraceBasedSamplingForLogs:this.enableTraceBasedSamplingForLogs,this.azureMonitorExporterOptions=Object.assign(this.azureMonitorExporterOptions,e.azureMonitorExporterOptions),this.instrumentationOptions=Object.assign(this.instrumentationOptions,e.instrumentationOptions);}catch(e){kHe.Logger.getInstance().error("Failed to load JSON config file values.",e);}}_setDefaultResource(){let e=(0, wl.defaultResource)(),r={detectors:[wl.envDetector]},n=(0, wl.detectResources)(r);e=e.merge(n);let s=(0, wl.detectResources)({detectors:[vx.azureAppServiceDetector,vx.azureFunctionsDetector]});this._resource=e.merge(s),this._initializeVmResourceAsync();}_initializeVmResourceAsync(){let e=(0, wl.detectResources)({detectors:[vx.azureVmDetector]});e.asyncAttributesPending?e.waitForAsyncAttributes?.().then(()=>{this._resource=this._resource.merge(e);}).catch(()=>{}):this._resource=this._resource.merge(e);}calculateMetricExportInterval(e){if(process.env.OTEL_METRIC_EXPORT_INTERVAL){let n=parseInt(process.env.OTEL_METRIC_EXPORT_INTERVAL.trim(),10);if(!isNaN(n)&&n>0)return n}return e?.collectionInterval?e.collectionInterval:6e4}};uA.InternalConfig=Ox;});var Bo=f(ve=>{Object.defineProperty(ve,"__esModule",{value:true});ve.ApplicationInsightsEventBaseType=ve.ApplicationInsightsAvailabilityBaseType=ve.ApplicationInsightsPageViewBaseType=ve.ApplicationInsightsExceptionBaseType=ve.ApplicationInsightsMessageBaseType=ve.ApplicationInsightsEventName=ve.ApplicationInsightsAvailabilityName=ve.ApplicationInsightsPageViewName=ve.ApplicationInsightsExceptionName=ve.ApplicationInsightsMessageName=ve.MicrosoftClientIp=ve.ApplicationInsightsCustomEventName=ve.ApplicationInsightsBaseType=ve.AzureMonitorSampleRate=ve.DependencyTypes=ve.packageVersion=ve.TIME_SINCE_ENQUEUED=ve.ENQUEUED_TIME=ve.MS_LINKS=void 0;ve.MS_LINKS="_MS.links";ve.ENQUEUED_TIME="enqueuedTime";ve.TIME_SINCE_ENQUEUED="timeSinceEnqueued";ve.packageVersion="1.0.0-beta.35";var xJ;(function(t){t.InProc="InProc",t.QueueMessage="Queue Message",t.Sql="SQL",t.Http="Http",t.Grpc="GRPC",t.Wcf="WCF Service";})(xJ||(ve.DependencyTypes=xJ={}));ve.AzureMonitorSampleRate="microsoft.sample_rate";ve.ApplicationInsightsBaseType="_MS.baseType";ve.ApplicationInsightsCustomEventName="microsoft.custom_event.name";ve.MicrosoftClientIp="microsoft.client.ip";ve.ApplicationInsightsMessageName="Microsoft.ApplicationInsights.Message";ve.ApplicationInsightsExceptionName="Microsoft.ApplicationInsights.Exception";ve.ApplicationInsightsPageViewName="Microsoft.ApplicationInsights.PageView";ve.ApplicationInsightsAvailabilityName="Microsoft.ApplicationInsights.Availability";ve.ApplicationInsightsEventName="Microsoft.ApplicationInsights.Event";ve.ApplicationInsightsMessageBaseType="MessageData";ve.ApplicationInsightsExceptionBaseType="ExceptionData";ve.ApplicationInsightsPageViewBaseType="PageViewData";ve.ApplicationInsightsAvailabilityBaseType="AvailabilityData";ve.ApplicationInsightsEventBaseType="EventData";});var Nx=f(Uh=>{Object.defineProperty(Uh,"__esModule",{value:true});Uh.getSamplingHashCode=DJ;Uh.roundDownToNearest=VHe;Uh.shouldSample=BHe;var Ul=(M(),A(H)),LJ=Bo();function DJ(t){let n=5381;if(!t)return 0;let s=t;for(;s.length<8;)s=s+s;for(let a=0;a<s.length;a++)n=((n<<5)+n|0)+s.charCodeAt(a)|0;return n=n<=-2147483648?2147483647:Math.abs(n),n/2147483647*100}function VHe(t){if(t===0)return 0;let e=100/t;return 100/Math.ceil(e)}function BHe(t,e,r,n){let s=t,a;if(s===100)a=true;else if(s===0)a=false;else {let o=Ul.trace.getSpan(e),i=o?.spanContext();if(i&&Ul.trace.isSpanContextValid(i)&&!i.isRemote){(i.traceFlags&Ul.TraceFlags.SAMPLED)===Ul.TraceFlags.SAMPLED?a=true:(i.traceFlags&Ul.TraceFlags.NONE)===Ul.TraceFlags.NONE&&(a=false);let c=Number(o.attributes?.[LJ.AzureMonitorSampleRate]);isNaN(c)||(s=Number(c));}}return s!==100&&(n=n||{},n[LJ.AzureMonitorSampleRate]=s),a===void 0?DJ(r)<s:a}});var UJ=f(lA=>{Object.defineProperty(lA,"__esModule",{value:true});lA.ApplicationInsightsSampler=void 0;var wJ=(di(),A(li)),FHe=Nx(),Cx=class{_sampleRate;samplingRatio;constructor(e=1){if(this.samplingRatio=e,this.samplingRatio>1||this.samplingRatio<0||!Number.isFinite(this.samplingRatio))throw new Error("Wrong sampling rate, data will not be sampled out");this._sampleRate=Math.round(this.samplingRatio*100);}shouldSample(e,r,n,s,a,o){return (0, FHe.shouldSample)(this._sampleRate,e,r,a)?{decision:wJ.SamplingDecision.RECORD_AND_SAMPLED,attributes:a}:{decision:wJ.SamplingDecision.NOT_RECORD,attributes:a}}toString(){return `ApplicationInsightsSampler{${this.samplingRatio}}`}};lA.ApplicationInsightsSampler=Cx;});var BJ=f(dA=>{Object.defineProperty(dA,"__esModule",{value:true});dA.RateLimitedSampler=void 0;var kJ=(di(),A(li)),VJ=Nx(),Px=class{nanoTimeSupplier;inverseAdaptationTimeNanos;targetSpansPerNanosecondLimit;state;roundToNearest;tracesPerSecond;constructor(e){if(this.tracesPerSecond=e,this.tracesPerSecond<0)throw new Error("Limit for sampled traces per second must be nonnegative");let r=.1;this.nanoTimeSupplier=()=>Number(process.hrtime.bigint()),this.inverseAdaptationTimeNanos=1e-9/r,this.targetSpansPerNanosecondLimit=1e-9*this.tracesPerSecond;let n=this.nanoTimeSupplier();this.state={effectiveWindowCount:0,effectiveWindowNanos:0,lastNanoTime:n},this.roundToNearest=true;}updateState(e,r){if(r<=e.lastNanoTime)return {effectiveWindowCount:e.effectiveWindowCount+1,effectiveWindowNanos:e.effectiveWindowNanos,lastNanoTime:e.lastNanoTime};let n=r-e.lastNanoTime,s=Math.exp(-n*this.inverseAdaptationTimeNanos),a=e.effectiveWindowCount*s+1,o=e.effectiveWindowNanos*s+n;return {effectiveWindowCount:a,effectiveWindowNanos:o,lastNanoTime:r}}getSampleRate(){let e=this.nanoTimeSupplier();this.state=this.updateState(this.state,e);let r=this.state.effectiveWindowNanos*this.targetSpansPerNanosecondLimit/this.state.effectiveWindowCount,n=100*Math.min(r,1);return this.roundToNearest&&(n=(0, VJ.roundDownToNearest)(n)),n}shouldSample(e,r,n,s,a,o){let i=this.getSampleRate();return (0, VJ.shouldSample)(i,e,r,a)?{decision:kJ.SamplingDecision.RECORD_AND_SAMPLED,attributes:a}:{decision:kJ.SamplingDecision.NOT_RECORD,attributes:a}}toString(){return `RateLimitedSampler{${this.tracesPerSecond}}`}};dA.RateLimitedSampler=Px;});var oo=f(se=>{Object.defineProperty(se,"__esModule",{value:true});se.PerformanceToQuickPulseCounter=se.PerformanceCounter=se.QuickPulseCounter=se.ENV_APPLICATIONINSIGHTS_SDKSTATS_EXPORT_INTERVAL=se.ENV_APPLICATIONINSIGHTS_SDKSTATS_ENABLED_PREVIEW=se.ENV_AZURE_MONITOR_DISTRO_VERSION=se.ENV_AZURE_MONITOR_PREFIX=se.ENV_APPLICATIONINSIGHTS_SHIM_VERSION=se.RetriableRestErrorTypes=se.ENV_APPLICATIONINSIGHTS_METRICS_TO_LOGANALYTICS_ENABLED=se.ENV_AZURE_MONITOR_AUTO_ATTACH=se.ENV_OTEL_METRICS_EXPORTER=se.ENV_OTLP_METRICS_ENDPOINT=se.ENV_OPENTELEMETRY_RESOURCE_METRIC_DISABLED=se.LEGACY_ENV_DISABLE_STATSBEAT=se.ENV_DISABLE_STATSBEAT=se.ENV_INSTRUMENTATION_KEY=se.ENV_CONNECTION_STRING=se.DEFAULT_LIVEMETRICS_HOST=se.DEFAULT_LIVEMETRICS_ENDPOINT=se.DEFAULT_BREEZE_API_VERSION=se.DEFAULT_BREEZE_ENDPOINT=se.AI_OPERATION_NAME=se.ServiceApiVersion=void 0;var bx;(function(t){t.V2="2020-09-15_Preview";})(bx||(se.ServiceApiVersion=bx={}));se.AI_OPERATION_NAME="ai.operation.name";se.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com";se.DEFAULT_BREEZE_API_VERSION=bx.V2;se.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com";se.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";se.ENV_CONNECTION_STRING="APPLICATIONINSIGHTS_CONNECTION_STRING";se.ENV_INSTRUMENTATION_KEY="APPINSIGHTS_INSTRUMENTATIONKEY";se.ENV_DISABLE_STATSBEAT="APPLICATIONINSIGHTS_STATSBEAT_DISABLED";se.LEGACY_ENV_DISABLE_STATSBEAT="APPLICATION_INSIGHTS_NO_STATSBEAT";se.ENV_OPENTELEMETRY_RESOURCE_METRIC_DISABLED="APPLICATIONINSIGHTS_OPENTELEMETRY_RESOURCE_METRIC_DISABLED";se.ENV_OTLP_METRICS_ENDPOINT="OTEL_EXPORTER_OTLP_METRICS_ENDPOINT";se.ENV_OTEL_METRICS_EXPORTER="OTEL_METRICS_EXPORTER";se.ENV_AZURE_MONITOR_AUTO_ATTACH="AZURE_MONITOR_AUTO_ATTACH";se.ENV_APPLICATIONINSIGHTS_METRICS_TO_LOGANALYTICS_ENABLED="APPLICATIONINSIGHTS_METRICS_TO_LOGANALYTICS_ENABLED";var FJ;(function(t){t.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR",t.DNS_LOOKUP_TIMEOUT="EAI_AGAIN";})(FJ||(se.RetriableRestErrorTypes=FJ={}));se.ENV_APPLICATIONINSIGHTS_SHIM_VERSION="APPLICATION_INSIGHTS_SHIM_VERSION";se.ENV_AZURE_MONITOR_PREFIX="AZURE_MONITOR_PREFIX";se.ENV_AZURE_MONITOR_DISTRO_VERSION="AZURE_MONITOR_DISTRO_VERSION";se.ENV_APPLICATIONINSIGHTS_SDKSTATS_ENABLED_PREVIEW="APPLICATIONINSIGHTS_SDKSTATS_ENABLED_PREVIEW";se.ENV_APPLICATIONINSIGHTS_SDKSTATS_EXPORT_INTERVAL="APPLICATIONINSIGHTS_SDKSTATS_EXPORT_INTERVAL";var mr;(function(t){t.COMMITTED_BYTES="\\Memory\\Committed Bytes",t.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",t.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",t.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",t.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",t.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",t.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",t.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",t.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec";})(mr||(se.QuickPulseCounter=mr={}));var kh;(function(t){t.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",t.AVAILABLE_BYTES="\\Memory\\Available Bytes",t.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",t.PROCESS_TIME_STANDARD="\\Process(??APP_WIN32_PROC??)\\% Processor Time",t.PROCESS_TIME_NORMALIZED="\\Process(??APP_WIN32_PROC??)\\% Processor Time Normalized",t.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",t.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time",t.EXCEPTION_RATE="\\.NET CLR Exceptions(??APP_CLR_PROC??)\\# of Exceps Thrown / sec",t.IO_RATE="\\Process(??APP_WIN32_PROC??)\\IO Data Bytes/sec";})(kh||(se.PerformanceCounter=kh={}));se.PerformanceToQuickPulseCounter={[kh.PROCESSOR_TIME]:mr.PROCESSOR_TIME,[kh.REQUEST_RATE]:mr.REQUEST_RATE,[kh.REQUEST_DURATION]:mr.REQUEST_DURATION,[mr.COMMITTED_BYTES]:mr.COMMITTED_BYTES,[mr.REQUEST_FAILURE_RATE]:mr.REQUEST_FAILURE_RATE,[mr.DEPENDENCY_RATE]:mr.DEPENDENCY_RATE,[mr.DEPENDENCY_FAILURE_RATE]:mr.DEPENDENCY_FAILURE_RATE,[mr.DEPENDENCY_DURATION]:mr.DEPENDENCY_DURATION,[mr.EXCEPTION_RATE]:mr.EXCEPTION_RATE};});var HJ=f(pA=>{Object.defineProperty(pA,"__esModule",{value:true});pA.ConnectionStringParser=void 0;var qHe=(Ce(),A(Ne)),Mx=(M(),A(H)),qJ=qHe.__importStar(oo()),Ix=class t{static FIELDS_SEPARATOR=";";static FIELD_KEY_VALUE_SEPARATOR="=";static parse(e){if(!e)return {};let r=e.split(t.FIELDS_SEPARATOR),n=true,s=r.reduce((a,o)=>{let i=o.split(t.FIELD_KEY_VALUE_SEPARATOR);if(i.length===2){let c=i[0].toLowerCase(),u=i[1];return {...a,[c]:u}}return Mx.diag.error("Connection string key-value pair is invalid: Entire connection string will be discarded"),n=false,a},{});if(n&&Object.keys(s).length>0){if(s.endpointsuffix){let a=s.location?`${s.location}.`:"";s.ingestionendpoint=s.ingestionendpoint||`https://${a}dc.${s.endpointsuffix}`,s.liveendpoint=s.liveendpoint||`https://${a}live.${s.endpointsuffix}`;}s.ingestionendpoint=s.ingestionendpoint?t.sanitizeUrl(s.ingestionendpoint):qJ.DEFAULT_BREEZE_ENDPOINT,s.liveendpoint=s.liveendpoint?t.sanitizeUrl(s.liveendpoint):qJ.DEFAULT_LIVEMETRICS_ENDPOINT,s.authorization&&s.authorization.toLowerCase()!=="ikey"&&Mx.diag.warn("Connection String contains an unsupported 'Authorization' value. Defaulting to 'Authorization=ikey'");}else Mx.diag.error("An invalid connection string was passed in. There may be telemetry loss");return s}static sanitizeUrl(e){let r=e.trim();return r.indexOf("https://")<0&&(r=r.replace("http://","https://")),r[r.length-1]==="/"&&(r=r.slice(0,-1)),r}static validateInstrumentationKey(e){if(e.startsWith("InstrumentationKey=")){let s=e.indexOf("InstrumentationKey=")+19,a=e.indexOf(";",s);e=e.substring(s,a);}let r="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$";return new RegExp(r).test(e)}};pA.ConnectionStringParser=Ix;});var kl=f(fA=>{Object.defineProperty(fA,"__esModule",{value:true});fA.AzureMonitorBaseExporter=void 0;var xx=(M(),A(H)),GJ=HJ(),Lx=oo(),Dx=class{instrumentationKey="";endpointUrl="";trackStatsbeat=false;aadAudience;isStatsbeatExporter;options;constructor(e={},r){this.options=e,this.instrumentationKey="",this.endpointUrl=Lx.DEFAULT_BREEZE_ENDPOINT;let n=this.options.connectionString||process.env[Lx.ENV_CONNECTION_STRING];if(this.isStatsbeatExporter=r||false,n){let s=GJ.ConnectionStringParser.parse(n);this.instrumentationKey=s.instrumentationkey||this.instrumentationKey,this.endpointUrl=s.ingestionendpoint?.trim()||this.endpointUrl,this.aadAudience=s.aadaudience;}if(!this.instrumentationKey){let s="No instrumentation key or connection string was provided to the Azure Monitor Exporter";throw xx.diag.error(s),new Error(s)}if(!GJ.ConnectionStringParser.validateInstrumentationKey(this.instrumentationKey)){let s="Invalid instrumentation key was provided to the Azure Monitor Exporter";throw xx.diag.error(s),new Error(s)}this.trackStatsbeat=!this.isStatsbeatExporter&&!process.env[Lx.LEGACY_ENV_DISABLE_STATSBEAT],xx.diag.debug("AzureMonitorExporter was successfully setup");}};fA.AzureMonitorBaseExporter=Dx;});function wt(t){let e={},r=t.length;for(let n=0;n<r;n++){let s=t[n];s&&(e[String(s).toUpperCase().replace(/[-.]/g,"_")]=s);}return e}var wx=E(()=>{});var jJ,zJ,YJ,$J,KJ,WJ,XJ,QJ,JJ,ZJ,e7,t7,r7,n7,i7,o7,s7,a7,c7,u7,l7,d7,p7,f7,h7,_7,m7,E7,T7,S7,g7,y7,A7,R7,v7,O7,N7,C7,P7,b7,M7,I7,x7,L7,D7,w7,U7,k7,V7,B7,F7,q7,H7,G7,j7,z7,Y7,$7,K7,W7,X7,Q7,J7,Z7,eZ,tZ,rZ,nZ,iZ,oZ,sZ,aZ,cZ,uZ,lZ,dZ,pZ,fZ,hZ,_Z,mZ,EZ,TZ,SZ,gZ,yZ,AZ,RZ,vZ,OZ,NZ,CZ,PZ,bZ,MZ,IZ,xZ,LZ,DZ,wZ,UZ,kZ,VZ,BZ,FZ,qZ,HZ,GZ,jZ,zZ,YZ,$Z,KZ,WZ,XZ,QZ,JZ,ZZ,eee,tee,ree,nee,iee,oee,see,aee,cee,uee,HHe,GHe,jHe,zHe,YHe,$He,KHe,WHe,XHe,QHe,JHe,ZHe,eGe,tGe,rGe,nGe,iGe,oGe,sGe,aGe,cGe,uGe,lGe,dGe,pGe,fGe,hGe,_Ge,mGe,EGe,TGe,SGe,gGe,yGe,AGe,RGe,vGe,OGe,NGe,CGe,PGe,bGe,MGe,IGe,xGe,LGe,DGe,wGe,UGe,kGe,VGe,BGe,FGe,qGe,HGe,GGe,jGe,zGe,YGe,$Ge,KGe,WGe,XGe,QGe,JGe,ZGe,eje,tje,rje,nje,ije,oje,sje,aje,cje,uje,lje,dje,pje,fje,hje,_je,mje,Eje,Tje,Sje,gje,yje,Aje,Rje,vje,Oje,Nje,Cje,Pje,bje,Mje,Ije,xje,Lje,Dje,wje,Uje,kje,Vje,Bje,Fje,qje,Hje,Gje,jje,zje,Yje,$je,Kje,Wje,Xje,Qje,Jje,Zje,e2e,t2e,r2e,n2e,i2e,o2e,s2e,a2e,c2e,lee,dee,pee,fee,hee,_ee,mee,Eee,Tee,See,gee,yee,Aee,Ree,vee,Oee,Nee,Cee,Pee,bee,Mee,Iee,xee,Lee,Dee,wee,Uee,kee,Vee,Bee,Fee,qee,Hee,Gee,jee,zee,Yee,$ee,Kee,Wee,Xee,Qee,Jee,Zee,ete,tte,rte,u2e,l2e,d2e,p2e,f2e,h2e,_2e,m2e,E2e,T2e,S2e,g2e,y2e,A2e,R2e,v2e,O2e,N2e,C2e,P2e,b2e,M2e,I2e,x2e,L2e,D2e,w2e,U2e,k2e,V2e,B2e,F2e,q2e,H2e,G2e,j2e,z2e,Y2e,$2e,K2e,W2e,X2e,Q2e,J2e,Z2e,eze,tze,rze,nte,ite,ote,ste,ate,cte,ute,lte,dte,pte,fte,nze,ize,oze,sze,aze,cze,uze,lze,dze,pze,fze,hze,hte,_te,mte,Ete,Tte,_ze,mze,Eze,Tze,Sze,gze,Ste,gte,yte,yze,Aze,Rze,vze,Ate,Rte,vte,Ote,Oze,Nze,Cze,Pze,bze,Nte,Cte,Pte,bte,Mte,Ite,xte,Mze,Ize,xze,Lze,Dze,wze,Uze,kze,Lte,Dte,wte,Ute,kte,Vze,Bze,Fze,qze,Hze,Gze,Vte,Bte,Fte,qte,Hte,Gte,jte,zte,Yte,$te,Kte,Wte,Xte,Qte,Jte,Zte,ere,tre,rre,nre,ire,jze,zze,Yze,$ze,Kze,Wze,Xze,Qze,Jze,Zze,e3e,t3e,r3e,n3e,i3e,o3e,s3e,a3e,c3e,u3e,l3e,d3e,ore,sre,are,cre,ure,p3e,f3e,h3e,_3e,m3e,E3e,lre,dre,T3e,S3e,g3e,pre,fre,y3e,A3e,R3e,hre,_re,mre,Ere,Tre,Sre,gre,yre,Are,Rre,vre,Ore,Nre,Cre,Pre,bre,Mre,v3e,O3e,N3e,C3e,P3e,b3e,M3e,I3e,x3e,L3e,D3e,w3e,U3e,k3e,V3e,B3e,F3e,q3e,Ire,xre,H3e,G3e,j3e,Lre=E(()=>{wx();jJ="aws.lambda.invoked_arn",zJ="db.system",YJ="db.connection_string",$J="db.user",KJ="db.jdbc.driver_classname",WJ="db.name",XJ="db.statement",QJ="db.operation",JJ="db.mssql.instance_name",ZJ="db.cassandra.keyspace",e7="db.cassandra.page_size",t7="db.cassandra.consistency_level",r7="db.cassandra.table",n7="db.cassandra.idempotence",i7="db.cassandra.speculative_execution_count",o7="db.cassandra.coordinator.id",s7="db.cassandra.coordinator.dc",a7="db.hbase.namespace",c7="db.redis.database_index",u7="db.mongodb.collection",l7="db.sql.table",d7="exception.type",p7="exception.message",f7="exception.stacktrace",h7="exception.escaped",_7="faas.trigger",m7="faas.execution",E7="faas.document.collection",T7="faas.document.operation",S7="faas.document.time",g7="faas.document.name",y7="faas.time",A7="faas.cron",R7="faas.coldstart",v7="faas.invoked_name",O7="faas.invoked_provider",N7="faas.invoked_region",C7="net.transport",P7="net.peer.ip",b7="net.peer.port",M7="net.peer.name",I7="net.host.ip",x7="net.host.port",L7="net.host.name",D7="net.host.connection.type",w7="net.host.connection.subtype",U7="net.host.carrier.name",k7="net.host.carrier.mcc",V7="net.host.carrier.mnc",B7="net.host.carrier.icc",F7="peer.service",q7="enduser.id",H7="enduser.role",G7="enduser.scope",j7="thread.id",z7="thread.name",Y7="code.function",$7="code.namespace",K7="code.filepath",W7="code.lineno",X7="http.method",Q7="http.url",J7="http.target",Z7="http.host",eZ="http.scheme",tZ="http.status_code",rZ="http.flavor",nZ="http.user_agent",iZ="http.request_content_length",oZ="http.request_content_length_uncompressed",sZ="http.response_content_length",aZ="http.response_content_length_uncompressed",cZ="http.server_name",uZ="http.route",lZ="http.client_ip",dZ="aws.dynamodb.table_names",pZ="aws.dynamodb.consumed_capacity",fZ="aws.dynamodb.item_collection_metrics",hZ="aws.dynamodb.provisioned_read_capacity",_Z="aws.dynamodb.provisioned_write_capacity",mZ="aws.dynamodb.consistent_read",EZ="aws.dynamodb.projection",TZ="aws.dynamodb.limit",SZ="aws.dynamodb.attributes_to_get",gZ="aws.dynamodb.index_name",yZ="aws.dynamodb.select",AZ="aws.dynamodb.global_secondary_indexes",RZ="aws.dynamodb.local_secondary_indexes",vZ="aws.dynamodb.exclusive_start_table",OZ="aws.dynamodb.table_count",NZ="aws.dynamodb.scan_forward",CZ="aws.dynamodb.segment",PZ="aws.dynamodb.total_segments",bZ="aws.dynamodb.count",MZ="aws.dynamodb.scanned_count",IZ="aws.dynamodb.attribute_definitions",xZ="aws.dynamodb.global_secondary_index_updates",LZ="messaging.system",DZ="messaging.destination",wZ="messaging.destination_kind",UZ="messaging.temp_destination",kZ="messaging.protocol",VZ="messaging.protocol_version",BZ="messaging.url",FZ="messaging.message_id",qZ="messaging.conversation_id",HZ="messaging.message_payload_size_bytes",GZ="messaging.message_payload_compressed_size_bytes",jZ="messaging.operation",zZ="messaging.consumer_id",YZ="messaging.rabbitmq.routing_key",$Z="messaging.kafka.message_key",KZ="messaging.kafka.consumer_group",WZ="messaging.kafka.client_id",XZ="messaging.kafka.partition",QZ="messaging.kafka.tombstone",JZ="rpc.system",ZZ="rpc.service",eee="rpc.method",tee="rpc.grpc.status_code",ree="rpc.jsonrpc.version",nee="rpc.jsonrpc.request_id",iee="rpc.jsonrpc.error_code",oee="rpc.jsonrpc.error_message",see="message.type",aee="message.id",cee="message.compressed_size",uee="message.uncompressed_size",HHe=jJ,GHe=zJ,jHe=YJ,zHe=$J,YHe=KJ,$He=WJ,KHe=XJ,WHe=QJ,XHe=JJ,QHe=ZJ,JHe=e7,ZHe=t7,eGe=r7,tGe=n7,rGe=i7,nGe=o7,iGe=s7,oGe=a7,sGe=c7,aGe=u7,cGe=l7,uGe=d7,lGe=p7,dGe=f7,pGe=h7,fGe=_7,hGe=m7,_Ge=E7,mGe=T7,EGe=S7,TGe=g7,SGe=y7,gGe=A7,yGe=R7,AGe=v7,RGe=O7,vGe=N7,OGe=C7,NGe=P7,CGe=b7,PGe=M7,bGe=I7,MGe=x7,IGe=L7,xGe=D7,LGe=w7,DGe=U7,wGe=k7,UGe=V7,kGe=B7,VGe=F7,BGe=q7,FGe=H7,qGe=G7,HGe=j7,GGe=z7,jGe=Y7,zGe=$7,YGe=K7,$Ge=W7,KGe=X7,WGe=Q7,XGe=J7,QGe=Z7,JGe=eZ,ZGe=tZ,eje=rZ,tje=nZ,rje=iZ,nje=oZ,ije=sZ,oje=aZ,sje=cZ,aje=uZ,cje=lZ,uje=dZ,lje=pZ,dje=fZ,pje=hZ,fje=_Z,hje=mZ,_je=EZ,mje=TZ,Eje=SZ,Tje=gZ,Sje=yZ,gje=AZ,yje=RZ,Aje=vZ,Rje=OZ,vje=NZ,Oje=CZ,Nje=PZ,Cje=bZ,Pje=MZ,bje=IZ,Mje=xZ,Ije=LZ,xje=DZ,Lje=wZ,Dje=UZ,wje=kZ,Uje=VZ,kje=BZ,Vje=FZ,Bje=qZ,Fje=HZ,qje=GZ,Hje=jZ,Gje=zZ,jje=YZ,zje=$Z,Yje=KZ,$je=WZ,Kje=XZ,Wje=QZ,Xje=JZ,Qje=ZZ,Jje=eee,Zje=tee,e2e=ree,t2e=nee,r2e=iee,n2e=oee,i2e=see,o2e=aee,s2e=cee,a2e=uee,c2e=wt([jJ,zJ,YJ,$J,KJ,WJ,XJ,QJ,JJ,ZJ,e7,t7,r7,n7,i7,o7,s7,a7,c7,u7,l7,d7,p7,f7,h7,_7,m7,E7,T7,S7,g7,y7,A7,R7,v7,O7,N7,C7,P7,b7,M7,I7,x7,L7,D7,w7,U7,k7,V7,B7,F7,q7,H7,G7,j7,z7,Y7,$7,K7,W7,X7,Q7,J7,Z7,eZ,tZ,rZ,nZ,iZ,oZ,sZ,aZ,cZ,uZ,lZ,dZ,pZ,fZ,hZ,_Z,mZ,EZ,TZ,SZ,gZ,yZ,AZ,RZ,vZ,OZ,NZ,CZ,PZ,bZ,MZ,IZ,xZ,LZ,DZ,wZ,UZ,kZ,VZ,BZ,FZ,qZ,HZ,GZ,jZ,zZ,YZ,$Z,KZ,WZ,XZ,QZ,JZ,ZZ,eee,tee,ree,nee,iee,oee,see,aee,cee,uee]),lee="other_sql",dee="mssql",pee="mysql",fee="oracle",hee="db2",_ee="postgresql",mee="redshift",Eee="hive",Tee="cloudscape",See="hsqldb",gee="progress",yee="maxdb",Aee="hanadb",Ree="ingres",vee="firstsql",Oee="edb",Nee="cache",Cee="adabas",Pee="firebird",bee="derby",Mee="filemaker",Iee="informix",xee="instantdb",Lee="interbase",Dee="mariadb",wee="netezza",Uee="pervasive",kee="pointbase",Vee="sqlite",Bee="sybase",Fee="teradata",qee="vertica",Hee="h2",Gee="coldfusion",jee="cassandra",zee="hbase",Yee="mongodb",$ee="redis",Kee="couchbase",Wee="couchdb",Xee="cosmosdb",Qee="dynamodb",Jee="neo4j",Zee="geode",ete="elasticsearch",tte="memcached",rte="cockroachdb",u2e=lee,l2e=dee,d2e=pee,p2e=fee,f2e=hee,h2e=_ee,_2e=mee,m2e=Eee,E2e=Tee,T2e=See,S2e=gee,g2e=yee,y2e=Aee,A2e=Ree,R2e=vee,v2e=Oee,O2e=Nee,N2e=Cee,C2e=Pee,P2e=bee,b2e=Mee,M2e=Iee,I2e=xee,x2e=Lee,L2e=Dee,D2e=wee,w2e=Uee,U2e=kee,k2e=Vee,V2e=Bee,B2e=Fee,F2e=qee,q2e=Hee,H2e=Gee,G2e=jee,j2e=zee,z2e=Yee,Y2e=$ee,$2e=Kee,K2e=Wee,W2e=Xee,X2e=Qee,Q2e=Jee,J2e=Zee,Z2e=ete,eze=tte,tze=rte,rze=wt([lee,dee,pee,fee,hee,_ee,mee,Eee,Tee,See,gee,yee,Aee,Ree,vee,Oee,Nee,Cee,Pee,bee,Mee,Iee,xee,Lee,Dee,wee,Uee,kee,Vee,Bee,Fee,qee,Hee,Gee,jee,zee,Yee,$ee,Kee,Wee,Xee,Qee,Jee,Zee,ete,tte,rte]),nte="all",ite="each_quorum",ote="quorum",ste="local_quorum",ate="one",cte="two",ute="three",lte="local_one",dte="any",pte="serial",fte="local_serial",nze=nte,ize=ite,oze=ote,sze=ste,aze=ate,cze=cte,uze=ute,lze=lte,dze=dte,pze=pte,fze=fte,hze=wt([nte,ite,ote,ste,ate,cte,ute,lte,dte,pte,fte]),hte="datasource",_te="http",mte="pubsub",Ete="timer",Tte="other",_ze=hte,mze=_te,Eze=mte,Tze=Ete,Sze=Tte,gze=wt([hte,_te,mte,Ete,Tte]),Ste="insert",gte="edit",yte="delete",yze=Ste,Aze=gte,Rze=yte,vze=wt([Ste,gte,yte]),Ate="alibaba_cloud",Rte="aws",vte="azure",Ote="gcp",Oze=Ate,Nze=Rte,Cze=vte,Pze=Ote,bze=wt([Ate,Rte,vte,Ote]),Nte="ip_tcp",Cte="ip_udp",Pte="ip",bte="unix",Mte="pipe",Ite="inproc",xte="other",Mze=Nte,Ize=Cte,xze=Pte,Lze=bte,Dze=Mte,wze=Ite,Uze=xte,kze=wt([Nte,Cte,Pte,bte,Mte,Ite,xte]),Lte="wifi",Dte="wired",wte="cell",Ute="unavailable",kte="unknown",Vze=Lte,Bze=Dte,Fze=wte,qze=Ute,Hze=kte,Gze=wt([Lte,Dte,wte,Ute,kte]),Vte="gprs",Bte="edge",Fte="umts",qte="cdma",Hte="evdo_0",Gte="evdo_a",jte="cdma2000_1xrtt",zte="hsdpa",Yte="hsupa",$te="hspa",Kte="iden",Wte="evdo_b",Xte="lte",Qte="ehrpd",Jte="hspap",Zte="gsm",ere="td_scdma",tre="iwlan",rre="nr",nre="nrnsa",ire="lte_ca",jze=Vte,zze=Bte,Yze=Fte,$ze=qte,Kze=Hte,Wze=Gte,Xze=jte,Qze=zte,Jze=Yte,Zze=$te,e3e=Kte,t3e=Wte,r3e=Xte,n3e=Qte,i3e=Jte,o3e=Zte,s3e=ere,a3e=tre,c3e=rre,u3e=nre,l3e=ire,d3e=wt([Vte,Bte,Fte,qte,Hte,Gte,jte,zte,Yte,$te,Kte,Wte,Xte,Qte,Jte,Zte,ere,tre,rre,nre,ire]),ore="1.0",sre="1.1",are="2.0",cre="SPDY",ure="QUIC",p3e=ore,f3e=sre,h3e=are,_3e=cre,m3e=ure,E3e={HTTP_1_0:ore,HTTP_1_1:sre,HTTP_2_0:are,SPDY:cre,QUIC:ure},lre="queue",dre="topic",T3e=lre,S3e=dre,g3e=wt([lre,dre]),pre="receive",fre="process",y3e=pre,A3e=fre,R3e=wt([pre,fre]),hre=0,_re=1,mre=2,Ere=3,Tre=4,Sre=5,gre=6,yre=7,Are=8,Rre=9,vre=10,Ore=11,Nre=12,Cre=13,Pre=14,bre=15,Mre=16,v3e=hre,O3e=_re,N3e=mre,C3e=Ere,P3e=Tre,b3e=Sre,M3e=gre,I3e=yre,x3e=Are,L3e=Rre,D3e=vre,w3e=Ore,U3e=Nre,k3e=Cre,V3e=Pre,B3e=bre,F3e=Mre,q3e={OK:hre,CANCELLED:_re,UNKNOWN:mre,INVALID_ARGUMENT:Ere,DEADLINE_EXCEEDED:Tre,NOT_FOUND:Sre,ALREADY_EXISTS:gre,PERMISSION_DENIED:yre,RESOURCE_EXHAUSTED:Are,FAILED_PRECONDITION:Rre,ABORTED:vre,OUT_OF_RANGE:Ore,UNIMPLEMENTED:Nre,INTERNAL:Cre,UNAVAILABLE:Pre,DATA_LOSS:bre,UNAUTHENTICATED:Mre},Ire="SENT",xre="RECEIVED",H3e=Ire,G3e=xre,j3e=wt([Ire,xre]);});var Dre=E(()=>{Lre();});var wre,Ure,kre,Vre,Bre,Fre,qre,Hre,Gre,jre,zre,Yre,$re,Kre,Wre,Xre,Qre,Jre,Zre,ene,tne,rne,nne,ine,one,sne,ane,cne,une,lne,dne,pne,fne,hne,_ne,mne,Ene,Tne,Sne,gne,yne,Ane,Rne,vne,One,Nne,Cne,Pne,bne,Mne,Ine,xne,Lne,Dne,wne,Une,kne,Vne,Bne,Fne,qne,Hne,Gne,jne,zne,Yne,$ne,Kne,Wne,Xne,Qne,Jne,Zne,eie,tie,rie,nie,iie,oie,sie,aie,z3e,Y3e,$3e,K3e,W3e,X3e,Q3e,J3e,Z3e,eYe,tYe,rYe,nYe,iYe,oYe,sYe,aYe,cYe,uYe,lYe,dYe,pYe,fYe,hYe,_Ye,mYe,EYe,TYe,SYe,gYe,yYe,AYe,RYe,vYe,OYe,NYe,CYe,PYe,bYe,MYe,IYe,xYe,LYe,DYe,wYe,UYe,kYe,VYe,BYe,FYe,qYe,HYe,GYe,jYe,zYe,YYe,$Ye,KYe,WYe,XYe,QYe,JYe,ZYe,e$e,t$e,r$e,n$e,i$e,o$e,s$e,a$e,c$e,u$e,l$e,d$e,p$e,f$e,h$e,_$e,m$e,E$e,T$e,cie,uie,lie,die,S$e,g$e,y$e,A$e,R$e,pie,fie,hie,_ie,mie,Eie,Tie,Sie,gie,yie,Aie,Rie,vie,Oie,Nie,Cie,Pie,v$e,O$e,N$e,C$e,P$e,b$e,M$e,I$e,x$e,L$e,D$e,w$e,U$e,k$e,V$e,B$e,F$e,q$e,bie,Mie,H$e,G$e,j$e,Iie,xie,Lie,Die,wie,Uie,kie,z$e,Y$e,$$e,K$e,W$e,X$e,Q$e,J$e,Vie,Bie,Fie,qie,Hie,Gie,jie,zie,Yie,$ie,Kie,Z$e,eKe,tKe,rKe,nKe,iKe,oKe,sKe,aKe,cKe,uKe,lKe,Wie,Xie,Qie,Jie,Zie,eoe,toe,roe,noe,ioe,dKe,pKe,fKe,hKe,_Ke,mKe,EKe,TKe,SKe,gKe,yKe,ooe=E(()=>{wx();wre="cloud.provider",Ure="cloud.account.id",kre="cloud.region",Vre="cloud.availability_zone",Bre="cloud.platform",Fre="aws.ecs.container.arn",qre="aws.ecs.cluster.arn",Hre="aws.ecs.launchtype",Gre="aws.ecs.task.arn",jre="aws.ecs.task.family",zre="aws.ecs.task.revision",Yre="aws.eks.cluster.arn",$re="aws.log.group.names",Kre="aws.log.group.arns",Wre="aws.log.stream.names",Xre="aws.log.stream.arns",Qre="container.name",Jre="container.id",Zre="container.runtime",ene="container.image.name",tne="container.image.tag",rne="deployment.environment",nne="device.id",ine="device.model.identifier",one="device.model.name",sne="faas.name",ane="faas.id",cne="faas.version",une="faas.instance",lne="faas.max_memory",dne="host.id",pne="host.name",fne="host.type",hne="host.arch",_ne="host.image.name",mne="host.image.id",Ene="host.image.version",Tne="k8s.cluster.name",Sne="k8s.node.name",gne="k8s.node.uid",yne="k8s.namespace.name",Ane="k8s.pod.uid",Rne="k8s.pod.name",vne="k8s.container.name",One="k8s.replicaset.uid",Nne="k8s.replicaset.name",Cne="k8s.deployment.uid",Pne="k8s.deployment.name",bne="k8s.statefulset.uid",Mne="k8s.statefulset.name",Ine="k8s.daemonset.uid",xne="k8s.daemonset.name",Lne="k8s.job.uid",Dne="k8s.job.name",wne="k8s.cronjob.uid",Une="k8s.cronjob.name",kne="os.type",Vne="os.description",Bne="os.name",Fne="os.version",qne="process.pid",Hne="process.executable.name",Gne="process.executable.path",jne="process.command",zne="process.command_line",Yne="process.command_args",$ne="process.owner",Kne="process.runtime.name",Wne="process.runtime.version",Xne="process.runtime.description",Qne="service.name",Jne="service.namespace",Zne="service.instance.id",eie="service.version",tie="telemetry.sdk.name",rie="telemetry.sdk.language",nie="telemetry.sdk.version",iie="telemetry.auto.version",oie="webengine.name",sie="webengine.version",aie="webengine.description",z3e=wre,Y3e=Ure,$3e=kre,K3e=Vre,W3e=Bre,X3e=Fre,Q3e=qre,J3e=Hre,Z3e=Gre,eYe=jre,tYe=zre,rYe=Yre,nYe=$re,iYe=Kre,oYe=Wre,sYe=Xre,aYe=Qre,cYe=Jre,uYe=Zre,lYe=ene,dYe=tne,pYe=rne,fYe=nne,hYe=ine,_Ye=one,mYe=sne,EYe=ane,TYe=cne,SYe=une,gYe=lne,yYe=dne,AYe=pne,RYe=fne,vYe=hne,OYe=_ne,NYe=mne,CYe=Ene,PYe=Tne,bYe=Sne,MYe=gne,IYe=yne,xYe=Ane,LYe=Rne,DYe=vne,wYe=One,UYe=Nne,kYe=Cne,VYe=Pne,BYe=bne,FYe=Mne,qYe=Ine,HYe=xne,GYe=Lne,jYe=Dne,zYe=wne,YYe=Une,$Ye=kne,KYe=Vne,WYe=Bne,XYe=Fne,QYe=qne,JYe=Hne,ZYe=Gne,e$e=jne,t$e=zne,r$e=Yne,n$e=$ne,i$e=Kne,o$e=Wne,s$e=Xne,a$e=Qne,c$e=Jne,u$e=Zne,l$e=eie,d$e=tie,p$e=rie,f$e=nie,h$e=iie,_$e=oie,m$e=sie,E$e=aie,T$e=wt([wre,Ure,kre,Vre,Bre,Fre,qre,Hre,Gre,jre,zre,Yre,$re,Kre,Wre,Xre,Qre,Jre,Zre,ene,tne,rne,nne,ine,one,sne,ane,cne,une,lne,dne,pne,fne,hne,_ne,mne,Ene,Tne,Sne,gne,yne,Ane,Rne,vne,One,Nne,Cne,Pne,bne,Mne,Ine,xne,Lne,Dne,wne,Une,kne,Vne,Bne,Fne,qne,Hne,Gne,jne,zne,Yne,$ne,Kne,Wne,Xne,Qne,Jne,Zne,eie,tie,rie,nie,iie,oie,sie,aie]),cie="alibaba_cloud",uie="aws",lie="azure",die="gcp",S$e=cie,g$e=uie,y$e=lie,A$e=die,R$e=wt([cie,uie,lie,die]),pie="alibaba_cloud_ecs",fie="alibaba_cloud_fc",hie="aws_ec2",_ie="aws_ecs",mie="aws_eks",Eie="aws_lambda",Tie="aws_elastic_beanstalk",Sie="azure_vm",gie="azure_container_instances",yie="azure_aks",Aie="azure_functions",Rie="azure_app_service",vie="gcp_compute_engine",Oie="gcp_cloud_run",Nie="gcp_kubernetes_engine",Cie="gcp_cloud_functions",Pie="gcp_app_engine",v$e=pie,O$e=fie,N$e=hie,C$e=_ie,P$e=mie,b$e=Eie,M$e=Tie,I$e=Sie,x$e=gie,L$e=yie,D$e=Aie,w$e=Rie,U$e=vie,k$e=Oie,V$e=Nie,B$e=Cie,F$e=Pie,q$e=wt([pie,fie,hie,_ie,mie,Eie,Tie,Sie,gie,yie,Aie,Rie,vie,Oie,Nie,Cie,Pie]),bie="ec2",Mie="fargate",H$e=bie,G$e=Mie,j$e=wt([bie,Mie]),Iie="amd64",xie="arm32",Lie="arm64",Die="ia64",wie="ppc32",Uie="ppc64",kie="x86",z$e=Iie,Y$e=xie,$$e=Lie,K$e=Die,W$e=wie,X$e=Uie,Q$e=kie,J$e=wt([Iie,xie,Lie,Die,wie,Uie,kie]),Vie="windows",Bie="linux",Fie="darwin",qie="freebsd",Hie="netbsd",Gie="openbsd",jie="dragonflybsd",zie="hpux",Yie="aix",$ie="solaris",Kie="z_os",Z$e=Vie,eKe=Bie,tKe=Fie,rKe=qie,nKe=Hie,iKe=Gie,oKe=jie,sKe=zie,aKe=Yie,cKe=$ie,uKe=Kie,lKe=wt([Vie,Bie,Fie,qie,Hie,Gie,jie,zie,Yie,$ie,Kie]),Wie="cpp",Xie="dotnet",Qie="erlang",Jie="go",Zie="java",eoe="nodejs",toe="php",roe="python",noe="ruby",ioe="webjs",dKe=Wie,pKe=Xie,fKe=Qie,hKe=Jie,_Ke=Zie,mKe=eoe,EKe=toe,TKe=roe,SKe=noe,gKe=ioe,yKe=wt([Wie,Xie,Qie,Jie,Zie,eoe,toe,roe,noe,ioe]);});var soe=E(()=>{ooe();});var AKe,RKe,vKe,OKe,NKe,CKe,PKe,bKe,MKe,IKe,xKe,LKe,DKe,wKe,UKe,kKe,VKe,BKe,FKe,qKe,HKe,GKe,jKe,zKe,YKe,$Ke,KKe,WKe,XKe,QKe,JKe,ZKe,eWe,tWe,rWe,nWe,iWe,oWe,sWe,aWe,cWe,uWe,lWe,dWe,pWe,fWe,hWe,_We,mWe,EWe,TWe,SWe,gWe,yWe,AWe,RWe,vWe,OWe,NWe,CWe,PWe,bWe,MWe,IWe,xWe,LWe,DWe,wWe,UWe,kWe,VWe,BWe,FWe,qWe,HWe,GWe,jWe,zWe,YWe,$We,KWe,WWe,XWe,QWe,JWe,ZWe,e4e,t4e,r4e,n4e,i4e,o4e,s4e,a4e,c4e,u4e,l4e,d4e,p4e,f4e,h4e,_4e,m4e,E4e,T4e,S4e,g4e,y4e,A4e,R4e,v4e,O4e,N4e,C4e,P4e,b4e,M4e,I4e,x4e,L4e,D4e,w4e,U4e,k4e,V4e,B4e,F4e,q4e,H4e,G4e,j4e,z4e,Y4e,$4e,K4e,aoe=E(()=>{AKe="aspnetcore.diagnostics.exception.result",RKe="aborted",vKe="handled",OKe="skipped",NKe="unhandled",CKe="aspnetcore.diagnostics.handler.type",PKe="aspnetcore.rate_limiting.policy",bKe="aspnetcore.rate_limiting.result",MKe="acquired",IKe="endpoint_limiter",xKe="global_limiter",LKe="request_canceled",DKe="aspnetcore.request.is_unhandled",wKe="aspnetcore.routing.is_fallback",UKe="aspnetcore.routing.match_status",kKe="failure",VKe="success",BKe="aspnetcore.user.is_authenticated",FKe="client.address",qKe="client.port",HKe="code.column.number",GKe="code.file.path",jKe="code.function.name",zKe="code.line.number",YKe="code.stacktrace",$Ke="db.collection.name",KKe="db.namespace",WKe="db.operation.batch.size",XKe="db.operation.name",QKe="db.query.summary",JKe="db.query.text",ZKe="db.response.status_code",eWe="db.stored_procedure.name",tWe="db.system.name",rWe="mariadb",nWe="microsoft.sql_server",iWe="mysql",oWe="postgresql",sWe="dotnet.gc.heap.generation",aWe="gen0",cWe="gen1",uWe="gen2",lWe="loh",dWe="poh",pWe="error.type",fWe="_OTHER",hWe="exception.escaped",_We="exception.message",mWe="exception.stacktrace",EWe="exception.type",TWe=t=>`http.request.header.${t}`,SWe="http.request.method",gWe="_OTHER",yWe="CONNECT",AWe="DELETE",RWe="GET",vWe="HEAD",OWe="OPTIONS",NWe="PATCH",CWe="POST",PWe="PUT",bWe="TRACE",MWe="http.request.method_original",IWe="http.request.resend_count",xWe=t=>`http.response.header.${t}`,LWe="http.response.status_code",DWe="http.route",wWe="jvm.gc.action",UWe="jvm.gc.name",kWe="jvm.memory.pool.name",VWe="jvm.memory.type",BWe="heap",FWe="non_heap",qWe="jvm.thread.daemon",HWe="jvm.thread.state",GWe="blocked",jWe="new",zWe="runnable",YWe="terminated",$We="timed_waiting",KWe="waiting",WWe="network.local.address",XWe="network.local.port",QWe="network.peer.address",JWe="network.peer.port",ZWe="network.protocol.name",e4e="network.protocol.version",t4e="network.transport",r4e="pipe",n4e="quic",i4e="tcp",o4e="udp",s4e="unix",a4e="network.type",c4e="ipv4",u4e="ipv6",l4e="otel.scope.name",d4e="otel.scope.version",p4e="otel.status_code",f4e="ERROR",h4e="OK",_4e="otel.status_description",m4e="server.address",E4e="server.port",T4e="service.name",S4e="service.version",g4e="signalr.connection.status",y4e="app_shutdown",A4e="normal_closure",R4e="timeout",v4e="signalr.transport",O4e="long_polling",N4e="server_sent_events",C4e="web_sockets",P4e="telemetry.sdk.language",b4e="cpp",M4e="dotnet",I4e="erlang",x4e="go",L4e="java",D4e="nodejs",w4e="php",U4e="python",k4e="ruby",V4e="rust",B4e="swift",F4e="webjs",q4e="telemetry.sdk.name",H4e="telemetry.sdk.version",G4e="url.fragment",j4e="url.full",z4e="url.path",Y4e="url.query",$4e="url.scheme",K4e="user_agent.original";});var W4e,X4e,Q4e,J4e,Z4e,e6e,t6e,r6e,n6e,i6e,o6e,s6e,a6e,c6e,u6e,l6e,d6e,p6e,f6e,h6e,_6e,m6e,E6e,T6e,S6e,g6e,y6e,A6e,R6e,v6e,O6e,N6e,C6e,P6e,b6e,M6e,I6e,x6e,L6e,D6e,w6e,U6e,k6e,V6e,B6e,F6e,q6e,H6e,G6e,j6e,z6e,coe=E(()=>{W4e="aspnetcore.diagnostics.exceptions",X4e="aspnetcore.rate_limiting.active_request_leases",Q4e="aspnetcore.rate_limiting.queued_requests",J4e="aspnetcore.rate_limiting.request.time_in_queue",Z4e="aspnetcore.rate_limiting.request_lease.duration",e6e="aspnetcore.rate_limiting.requests",t6e="aspnetcore.routing.match_attempts",r6e="db.client.operation.duration",n6e="dotnet.assembly.count",i6e="dotnet.exceptions",o6e="dotnet.gc.collections",s6e="dotnet.gc.heap.total_allocated",a6e="dotnet.gc.last_collection.heap.fragmentation.size",c6e="dotnet.gc.last_collection.heap.size",u6e="dotnet.gc.last_collection.memory.committed_size",l6e="dotnet.gc.pause.time",d6e="dotnet.jit.compilation.time",p6e="dotnet.jit.compiled_il.size",f6e="dotnet.jit.compiled_methods",h6e="dotnet.monitor.lock_contentions",_6e="dotnet.process.cpu.count",m6e="dotnet.process.cpu.time",E6e="dotnet.process.memory.working_set",T6e="dotnet.thread_pool.queue.length",S6e="dotnet.thread_pool.thread.count",g6e="dotnet.thread_pool.work_item.count",y6e="dotnet.timer.count",A6e="http.client.request.duration",R6e="http.server.request.duration",v6e="jvm.class.count",O6e="jvm.class.loaded",N6e="jvm.class.unloaded",C6e="jvm.cpu.count",P6e="jvm.cpu.recent_utilization",b6e="jvm.cpu.time",M6e="jvm.gc.duration",I6e="jvm.memory.committed",x6e="jvm.memory.limit",L6e="jvm.memory.used",D6e="jvm.memory.used_after_last_gc",w6e="jvm.thread.count",U6e="kestrel.active_connections",k6e="kestrel.active_tls_handshakes",V6e="kestrel.connection.duration",B6e="kestrel.queued_connections",F6e="kestrel.queued_requests",q6e="kestrel.rejected_connections",H6e="kestrel.tls_handshake.duration",G6e="kestrel.upgraded_connections",j6e="signalr.server.active_connections",z6e="signalr.server.connection.duration";});var Y6e,uoe=E(()=>{Y6e="exception";});var _c={};Ue(_c,{ASPNETCORE_DIAGNOSTICS_EXCEPTION_RESULT_VALUE_ABORTED:()=>RKe,ASPNETCORE_DIAGNOSTICS_EXCEPTION_RESULT_VALUE_HANDLED:()=>vKe,ASPNETCORE_DIAGNOSTICS_EXCEPTION_RESULT_VALUE_SKIPPED:()=>OKe,ASPNETCORE_DIAGNOSTICS_EXCEPTION_RESULT_VALUE_UNHANDLED:()=>NKe,ASPNETCORE_RATE_LIMITING_RESULT_VALUE_ACQUIRED:()=>MKe,ASPNETCORE_RATE_LIMITING_RESULT_VALUE_ENDPOINT_LIMITER:()=>IKe,ASPNETCORE_RATE_LIMITING_RESULT_VALUE_GLOBAL_LIMITER:()=>xKe,ASPNETCORE_RATE_LIMITING_RESULT_VALUE_REQUEST_CANCELED:()=>LKe,ASPNETCORE_ROUTING_MATCH_STATUS_VALUE_FAILURE:()=>kKe,ASPNETCORE_ROUTING_MATCH_STATUS_VALUE_SUCCESS:()=>VKe,ATTR_ASPNETCORE_DIAGNOSTICS_EXCEPTION_RESULT:()=>AKe,ATTR_ASPNETCORE_DIAGNOSTICS_HANDLER_TYPE:()=>CKe,ATTR_ASPNETCORE_RATE_LIMITING_POLICY:()=>PKe,ATTR_ASPNETCORE_RATE_LIMITING_RESULT:()=>bKe,ATTR_ASPNETCORE_REQUEST_IS_UNHANDLED:()=>DKe,ATTR_ASPNETCORE_ROUTING_IS_FALLBACK:()=>wKe,ATTR_ASPNETCORE_ROUTING_MATCH_STATUS:()=>UKe,ATTR_ASPNETCORE_USER_IS_AUTHENTICATED:()=>BKe,ATTR_CLIENT_ADDRESS:()=>FKe,ATTR_CLIENT_PORT:()=>qKe,ATTR_CODE_COLUMN_NUMBER:()=>HKe,ATTR_CODE_FILE_PATH:()=>GKe,ATTR_CODE_FUNCTION_NAME:()=>jKe,ATTR_CODE_LINE_NUMBER:()=>zKe,ATTR_CODE_STACKTRACE:()=>YKe,ATTR_DB_COLLECTION_NAME:()=>$Ke,ATTR_DB_NAMESPACE:()=>KKe,ATTR_DB_OPERATION_BATCH_SIZE:()=>WKe,ATTR_DB_OPERATION_NAME:()=>XKe,ATTR_DB_QUERY_SUMMARY:()=>QKe,ATTR_DB_QUERY_TEXT:()=>JKe,ATTR_DB_RESPONSE_STATUS_CODE:()=>ZKe,ATTR_DB_STORED_PROCEDURE_NAME:()=>eWe,ATTR_DB_SYSTEM_NAME:()=>tWe,ATTR_DOTNET_GC_HEAP_GENERATION:()=>sWe,ATTR_ERROR_TYPE:()=>pWe,ATTR_EXCEPTION_ESCAPED:()=>hWe,ATTR_EXCEPTION_MESSAGE:()=>_We,ATTR_EXCEPTION_STACKTRACE:()=>mWe,ATTR_EXCEPTION_TYPE:()=>EWe,ATTR_HTTP_REQUEST_HEADER:()=>TWe,ATTR_HTTP_REQUEST_METHOD:()=>SWe,ATTR_HTTP_REQUEST_METHOD_ORIGINAL:()=>MWe,ATTR_HTTP_REQUEST_RESEND_COUNT:()=>IWe,ATTR_HTTP_RESPONSE_HEADER:()=>xWe,ATTR_HTTP_RESPONSE_STATUS_CODE:()=>LWe,ATTR_HTTP_ROUTE:()=>DWe,ATTR_JVM_GC_ACTION:()=>wWe,ATTR_JVM_GC_NAME:()=>UWe,ATTR_JVM_MEMORY_POOL_NAME:()=>kWe,ATTR_JVM_MEMORY_TYPE:()=>VWe,ATTR_JVM_THREAD_DAEMON:()=>qWe,ATTR_JVM_THREAD_STATE:()=>HWe,ATTR_NETWORK_LOCAL_ADDRESS:()=>WWe,ATTR_NETWORK_LOCAL_PORT:()=>XWe,ATTR_NETWORK_PEER_ADDRESS:()=>QWe,ATTR_NETWORK_PEER_PORT:()=>JWe,ATTR_NETWORK_PROTOCOL_NAME:()=>ZWe,ATTR_NETWORK_PROTOCOL_VERSION:()=>e4e,ATTR_NETWORK_TRANSPORT:()=>t4e,ATTR_NETWORK_TYPE:()=>a4e,ATTR_OTEL_SCOPE_NAME:()=>l4e,ATTR_OTEL_SCOPE_VERSION:()=>d4e,ATTR_OTEL_STATUS_CODE:()=>p4e,ATTR_OTEL_STATUS_DESCRIPTION:()=>_4e,ATTR_SERVER_ADDRESS:()=>m4e,ATTR_SERVER_PORT:()=>E4e,ATTR_SERVICE_NAME:()=>T4e,ATTR_SERVICE_VERSION:()=>S4e,ATTR_SIGNALR_CONNECTION_STATUS:()=>g4e,ATTR_SIGNALR_TRANSPORT:()=>v4e,ATTR_TELEMETRY_SDK_LANGUAGE:()=>P4e,ATTR_TELEMETRY_SDK_NAME:()=>q4e,ATTR_TELEMETRY_SDK_VERSION:()=>H4e,ATTR_URL_FRAGMENT:()=>G4e,ATTR_URL_FULL:()=>j4e,ATTR_URL_PATH:()=>z4e,ATTR_URL_QUERY:()=>Y4e,ATTR_URL_SCHEME:()=>$4e,ATTR_USER_AGENT_ORIGINAL:()=>K4e,AWSECSLAUNCHTYPEVALUES_EC2:()=>H$e,AWSECSLAUNCHTYPEVALUES_FARGATE:()=>G$e,AwsEcsLaunchtypeValues:()=>j$e,CLOUDPLATFORMVALUES_ALIBABA_CLOUD_ECS:()=>v$e,CLOUDPLATFORMVALUES_ALIBABA_CLOUD_FC:()=>O$e,CLOUDPLATFORMVALUES_AWS_EC2:()=>N$e,CLOUDPLATFORMVALUES_AWS_ECS:()=>C$e,CLOUDPLATFORMVALUES_AWS_EKS:()=>P$e,CLOUDPLATFORMVALUES_AWS_ELASTIC_BEANSTALK:()=>M$e,CLOUDPLATFORMVALUES_AWS_LAMBDA:()=>b$e,CLOUDPLATFORMVALUES_AZURE_AKS:()=>L$e,CLOUDPLATFORMVALUES_AZURE_APP_SERVICE:()=>w$e,CLOUDPLATFORMVALUES_AZURE_CONTAINER_INSTANCES:()=>x$e,CLOUDPLATFORMVALUES_AZURE_FUNCTIONS:()=>D$e,CLOUDPLATFORMVALUES_AZURE_VM:()=>I$e,CLOUDPLATFORMVALUES_GCP_APP_ENGINE:()=>F$e,CLOUDPLATFORMVALUES_GCP_CLOUD_FUNCTIONS:()=>B$e,CLOUDPLATFORMVALUES_GCP_CLOUD_RUN:()=>k$e,CLOUDPLATFORMVALUES_GCP_COMPUTE_ENGINE:()=>U$e,CLOUDPLATFORMVALUES_GCP_KUBERNETES_ENGINE:()=>V$e,CLOUDPROVIDERVALUES_ALIBABA_CLOUD:()=>S$e,CLOUDPROVIDERVALUES_AWS:()=>g$e,CLOUDPROVIDERVALUES_AZURE:()=>y$e,CLOUDPROVIDERVALUES_GCP:()=>A$e,CloudPlatformValues:()=>q$e,CloudProviderValues:()=>R$e,DBCASSANDRACONSISTENCYLEVELVALUES_ALL:()=>nze,DBCASSANDRACONSISTENCYLEVELVALUES_ANY:()=>dze,DBCASSANDRACONSISTENCYLEVELVALUES_EACH_QUORUM:()=>ize,DBCASSANDRACONSISTENCYLEVELVALUES_LOCAL_ONE:()=>lze,DBCASSANDRACONSISTENCYLEVELVALUES_LOCAL_QUORUM:()=>sze,DBCASSANDRACONSISTENCYLEVELVALUES_LOCAL_SERIAL:()=>fze,DBCASSANDRACONSISTENCYLEVELVALUES_ONE:()=>aze,DBCASSANDRACONSISTENCYLEVELVALUES_QUORUM:()=>oze,DBCASSANDRACONSISTENCYLEVELVALUES_SERIAL:()=>pze,DBCASSANDRACONSISTENCYLEVELVALUES_THREE:()=>uze,DBCASSANDRACONSISTENCYLEVELVALUES_TWO:()=>cze,DBSYSTEMVALUES_ADABAS:()=>N2e,DBSYSTEMVALUES_CACHE:()=>O2e,DBSYSTEMVALUES_CASSANDRA:()=>G2e,DBSYSTEMVALUES_CLOUDSCAPE:()=>E2e,DBSYSTEMVALUES_COCKROACHDB:()=>tze,DBSYSTEMVALUES_COLDFUSION:()=>H2e,DBSYSTEMVALUES_COSMOSDB:()=>W2e,DBSYSTEMVALUES_COUCHBASE:()=>$2e,DBSYSTEMVALUES_COUCHDB:()=>K2e,DBSYSTEMVALUES_DB2:()=>f2e,DBSYSTEMVALUES_DERBY:()=>P2e,DBSYSTEMVALUES_DYNAMODB:()=>X2e,DBSYSTEMVALUES_EDB:()=>v2e,DBSYSTEMVALUES_ELASTICSEARCH:()=>Z2e,DBSYSTEMVALUES_FILEMAKER:()=>b2e,DBSYSTEMVALUES_FIREBIRD:()=>C2e,DBSYSTEMVALUES_FIRSTSQL:()=>R2e,DBSYSTEMVALUES_GEODE:()=>J2e,DBSYSTEMVALUES_H2:()=>q2e,DBSYSTEMVALUES_HANADB:()=>y2e,DBSYSTEMVALUES_HBASE:()=>j2e,DBSYSTEMVALUES_HIVE:()=>m2e,DBSYSTEMVALUES_HSQLDB:()=>T2e,DBSYSTEMVALUES_INFORMIX:()=>M2e,DBSYSTEMVALUES_INGRES:()=>A2e,DBSYSTEMVALUES_INSTANTDB:()=>I2e,DBSYSTEMVALUES_INTERBASE:()=>x2e,DBSYSTEMVALUES_MARIADB:()=>L2e,DBSYSTEMVALUES_MAXDB:()=>g2e,DBSYSTEMVALUES_MEMCACHED:()=>eze,DBSYSTEMVALUES_MONGODB:()=>z2e,DBSYSTEMVALUES_MSSQL:()=>l2e,DBSYSTEMVALUES_MYSQL:()=>d2e,DBSYSTEMVALUES_NEO4J:()=>Q2e,DBSYSTEMVALUES_NETEZZA:()=>D2e,DBSYSTEMVALUES_ORACLE:()=>p2e,DBSYSTEMVALUES_OTHER_SQL:()=>u2e,DBSYSTEMVALUES_PERVASIVE:()=>w2e,DBSYSTEMVALUES_POINTBASE:()=>U2e,DBSYSTEMVALUES_POSTGRESQL:()=>h2e,DBSYSTEMVALUES_PROGRESS:()=>S2e,DBSYSTEMVALUES_REDIS:()=>Y2e,DBSYSTEMVALUES_REDSHIFT:()=>_2e,DBSYSTEMVALUES_SQLITE:()=>k2e,DBSYSTEMVALUES_SYBASE:()=>V2e,DBSYSTEMVALUES_TERADATA:()=>B2e,DBSYSTEMVALUES_VERTICA:()=>F2e,DB_SYSTEM_NAME_VALUE_MARIADB:()=>rWe,DB_SYSTEM_NAME_VALUE_MICROSOFT_SQL_SERVER:()=>nWe,DB_SYSTEM_NAME_VALUE_MYSQL:()=>iWe,DB_SYSTEM_NAME_VALUE_POSTGRESQL:()=>oWe,DOTNET_GC_HEAP_GENERATION_VALUE_GEN0:()=>aWe,DOTNET_GC_HEAP_GENERATION_VALUE_GEN1:()=>cWe,DOTNET_GC_HEAP_GENERATION_VALUE_GEN2:()=>uWe,DOTNET_GC_HEAP_GENERATION_VALUE_LOH:()=>lWe,DOTNET_GC_HEAP_GENERATION_VALUE_POH:()=>dWe,DbCassandraConsistencyLevelValues:()=>hze,DbSystemValues:()=>rze,ERROR_TYPE_VALUE_OTHER:()=>fWe,EVENT_EXCEPTION:()=>Y6e,FAASDOCUMENTOPERATIONVALUES_DELETE:()=>Rze,FAASDOCUMENTOPERATIONVALUES_EDIT:()=>Aze,FAASDOCUMENTOPERATIONVALUES_INSERT:()=>yze,FAASINVOKEDPROVIDERVALUES_ALIBABA_CLOUD:()=>Oze,FAASINVOKEDPROVIDERVALUES_AWS:()=>Nze,FAASINVOKEDPROVIDERVALUES_AZURE:()=>Cze,FAASINVOKEDPROVIDERVALUES_GCP:()=>Pze,FAASTRIGGERVALUES_DATASOURCE:()=>_ze,FAASTRIGGERVALUES_HTTP:()=>mze,FAASTRIGGERVALUES_OTHER:()=>Sze,FAASTRIGGERVALUES_PUBSUB:()=>Eze,FAASTRIGGERVALUES_TIMER:()=>Tze,FaasDocumentOperationValues:()=>vze,FaasInvokedProviderValues:()=>bze,FaasTriggerValues:()=>gze,HOSTARCHVALUES_AMD64:()=>z$e,HOSTARCHVALUES_ARM32:()=>Y$e,HOSTARCHVALUES_ARM64:()=>$$e,HOSTARCHVALUES_IA64:()=>K$e,HOSTARCHVALUES_PPC32:()=>W$e,HOSTARCHVALUES_PPC64:()=>X$e,HOSTARCHVALUES_X86:()=>Q$e,HTTPFLAVORVALUES_HTTP_1_0:()=>p3e,HTTPFLAVORVALUES_HTTP_1_1:()=>f3e,HTTPFLAVORVALUES_HTTP_2_0:()=>h3e,HTTPFLAVORVALUES_QUIC:()=>m3e,HTTPFLAVORVALUES_SPDY:()=>_3e,HTTP_REQUEST_METHOD_VALUE_CONNECT:()=>yWe,HTTP_REQUEST_METHOD_VALUE_DELETE:()=>AWe,HTTP_REQUEST_METHOD_VALUE_GET:()=>RWe,HTTP_REQUEST_METHOD_VALUE_HEAD:()=>vWe,HTTP_REQUEST_METHOD_VALUE_OPTIONS:()=>OWe,HTTP_REQUEST_METHOD_VALUE_OTHER:()=>gWe,HTTP_REQUEST_METHOD_VALUE_PATCH:()=>NWe,HTTP_REQUEST_METHOD_VALUE_POST:()=>CWe,HTTP_REQUEST_METHOD_VALUE_PUT:()=>PWe,HTTP_REQUEST_METHOD_VALUE_TRACE:()=>bWe,HostArchValues:()=>J$e,HttpFlavorValues:()=>E3e,JVM_MEMORY_TYPE_VALUE_HEAP:()=>BWe,JVM_MEMORY_TYPE_VALUE_NON_HEAP:()=>FWe,JVM_THREAD_STATE_VALUE_BLOCKED:()=>GWe,JVM_THREAD_STATE_VALUE_NEW:()=>jWe,JVM_THREAD_STATE_VALUE_RUNNABLE:()=>zWe,JVM_THREAD_STATE_VALUE_TERMINATED:()=>YWe,JVM_THREAD_STATE_VALUE_TIMED_WAITING:()=>$We,JVM_THREAD_STATE_VALUE_WAITING:()=>KWe,MESSAGETYPEVALUES_RECEIVED:()=>G3e,MESSAGETYPEVALUES_SENT:()=>H3e,MESSAGINGDESTINATIONKINDVALUES_QUEUE:()=>T3e,MESSAGINGDESTINATIONKINDVALUES_TOPIC:()=>S3e,MESSAGINGOPERATIONVALUES_PROCESS:()=>A3e,MESSAGINGOPERATIONVALUES_RECEIVE:()=>y3e,METRIC_ASPNETCORE_DIAGNOSTICS_EXCEPTIONS:()=>W4e,METRIC_ASPNETCORE_RATE_LIMITING_ACTIVE_REQUEST_LEASES:()=>X4e,METRIC_ASPNETCORE_RATE_LIMITING_QUEUED_REQUESTS:()=>Q4e,METRIC_ASPNETCORE_RATE_LIMITING_REQUESTS:()=>e6e,METRIC_ASPNETCORE_RATE_LIMITING_REQUEST_LEASE_DURATION:()=>Z4e,METRIC_ASPNETCORE_RATE_LIMITING_REQUEST_TIME_IN_QUEUE:()=>J4e,METRIC_ASPNETCORE_ROUTING_MATCH_ATTEMPTS:()=>t6e,METRIC_DB_CLIENT_OPERATION_DURATION:()=>r6e,METRIC_DOTNET_ASSEMBLY_COUNT:()=>n6e,METRIC_DOTNET_EXCEPTIONS:()=>i6e,METRIC_DOTNET_GC_COLLECTIONS:()=>o6e,METRIC_DOTNET_GC_HEAP_TOTAL_ALLOCATED:()=>s6e,METRIC_DOTNET_GC_LAST_COLLECTION_HEAP_FRAGMENTATION_SIZE:()=>a6e,METRIC_DOTNET_GC_LAST_COLLECTION_HEAP_SIZE:()=>c6e,METRIC_DOTNET_GC_LAST_COLLECTION_MEMORY_COMMITTED_SIZE:()=>u6e,METRIC_DOTNET_GC_PAUSE_TIME:()=>l6e,METRIC_DOTNET_JIT_COMPILATION_TIME:()=>d6e,METRIC_DOTNET_JIT_COMPILED_IL_SIZE:()=>p6e,METRIC_DOTNET_JIT_COMPILED_METHODS:()=>f6e,METRIC_DOTNET_MONITOR_LOCK_CONTENTIONS:()=>h6e,METRIC_DOTNET_PROCESS_CPU_COUNT:()=>_6e,METRIC_DOTNET_PROCESS_CPU_TIME:()=>m6e,METRIC_DOTNET_PROCESS_MEMORY_WORKING_SET:()=>E6e,METRIC_DOTNET_THREAD_POOL_QUEUE_LENGTH:()=>T6e,METRIC_DOTNET_THREAD_POOL_THREAD_COUNT:()=>S6e,METRIC_DOTNET_THREAD_POOL_WORK_ITEM_COUNT:()=>g6e,METRIC_DOTNET_TIMER_COUNT:()=>y6e,METRIC_HTTP_CLIENT_REQUEST_DURATION:()=>A6e,METRIC_HTTP_SERVER_REQUEST_DURATION:()=>R6e,METRIC_JVM_CLASS_COUNT:()=>v6e,METRIC_JVM_CLASS_LOADED:()=>O6e,METRIC_JVM_CLASS_UNLOADED:()=>N6e,METRIC_JVM_CPU_COUNT:()=>C6e,METRIC_JVM_CPU_RECENT_UTILIZATION:()=>P6e,METRIC_JVM_CPU_TIME:()=>b6e,METRIC_JVM_GC_DURATION:()=>M6e,METRIC_JVM_MEMORY_COMMITTED:()=>I6e,METRIC_JVM_MEMORY_LIMIT:()=>x6e,METRIC_JVM_MEMORY_USED:()=>L6e,METRIC_JVM_MEMORY_USED_AFTER_LAST_GC:()=>D6e,METRIC_JVM_THREAD_COUNT:()=>w6e,METRIC_KESTREL_ACTIVE_CONNECTIONS:()=>U6e,METRIC_KESTREL_ACTIVE_TLS_HANDSHAKES:()=>k6e,METRIC_KESTREL_CONNECTION_DURATION:()=>V6e,METRIC_KESTREL_QUEUED_CONNECTIONS:()=>B6e,METRIC_KESTREL_QUEUED_REQUESTS:()=>F6e,METRIC_KESTREL_REJECTED_CONNECTIONS:()=>q6e,METRIC_KESTREL_TLS_HANDSHAKE_DURATION:()=>H6e,METRIC_KESTREL_UPGRADED_CONNECTIONS:()=>G6e,METRIC_SIGNALR_SERVER_ACTIVE_CONNECTIONS:()=>j6e,METRIC_SIGNALR_SERVER_CONNECTION_DURATION:()=>z6e,MessageTypeValues:()=>j3e,MessagingDestinationKindValues:()=>g3e,MessagingOperationValues:()=>R3e,NETHOSTCONNECTIONSUBTYPEVALUES_CDMA:()=>$ze,NETHOSTCONNECTIONSUBTYPEVALUES_CDMA2000_1XRTT:()=>Xze,NETHOSTCONNECTIONSUBTYPEVALUES_EDGE:()=>zze,NETHOSTCONNECTIONSUBTYPEVALUES_EHRPD:()=>n3e,NETHOSTCONNECTIONSUBTYPEVALUES_EVDO_0:()=>Kze,NETHOSTCONNECTIONSUBTYPEVALUES_EVDO_A:()=>Wze,NETHOSTCONNECTIONSUBTYPEVALUES_EVDO_B:()=>t3e,NETHOSTCONNECTIONSUBTYPEVALUES_GPRS:()=>jze,NETHOSTCONNECTIONSUBTYPEVALUES_GSM:()=>o3e,NETHOSTCONNECTIONSUBTYPEVALUES_HSDPA:()=>Qze,NETHOSTCONNECTIONSUBTYPEVALUES_HSPA:()=>Zze,NETHOSTCONNECTIONSUBTYPEVALUES_HSPAP:()=>i3e,NETHOSTCONNECTIONSUBTYPEVALUES_HSUPA:()=>Jze,NETHOSTCONNECTIONSUBTYPEVALUES_IDEN:()=>e3e,NETHOSTCONNECTIONSUBTYPEVALUES_IWLAN:()=>a3e,NETHOSTCONNECTIONSUBTYPEVALUES_LTE:()=>r3e,NETHOSTCONNECTIONSUBTYPEVALUES_LTE_CA:()=>l3e,NETHOSTCONNECTIONSUBTYPEVALUES_NR:()=>c3e,NETHOSTCONNECTIONSUBTYPEVALUES_NRNSA:()=>u3e,NETHOSTCONNECTIONSUBTYPEVALUES_TD_SCDMA:()=>s3e,NETHOSTCONNECTIONSUBTYPEVALUES_UMTS:()=>Yze,NETHOSTCONNECTIONTYPEVALUES_CELL:()=>Fze,NETHOSTCONNECTIONTYPEVALUES_UNAVAILABLE:()=>qze,NETHOSTCONNECTIONTYPEVALUES_UNKNOWN:()=>Hze,NETHOSTCONNECTIONTYPEVALUES_WIFI:()=>Vze,NETHOSTCONNECTIONTYPEVALUES_WIRED:()=>Bze,NETTRANSPORTVALUES_INPROC:()=>wze,NETTRANSPORTVALUES_IP:()=>xze,NETTRANSPORTVALUES_IP_TCP:()=>Mze,NETTRANSPORTVALUES_IP_UDP:()=>Ize,NETTRANSPORTVALUES_OTHER:()=>Uze,NETTRANSPORTVALUES_PIPE:()=>Dze,NETTRANSPORTVALUES_UNIX:()=>Lze,NETWORK_TRANSPORT_VALUE_PIPE:()=>r4e,NETWORK_TRANSPORT_VALUE_QUIC:()=>n4e,NETWORK_TRANSPORT_VALUE_TCP:()=>i4e,NETWORK_TRANSPORT_VALUE_UDP:()=>o4e,NETWORK_TRANSPORT_VALUE_UNIX:()=>s4e,NETWORK_TYPE_VALUE_IPV4:()=>c4e,NETWORK_TYPE_VALUE_IPV6:()=>u4e,NetHostConnectionSubtypeValues:()=>d3e,NetHostConnectionTypeValues:()=>Gze,NetTransportValues:()=>kze,OSTYPEVALUES_AIX:()=>aKe,OSTYPEVALUES_DARWIN:()=>tKe,OSTYPEVALUES_DRAGONFLYBSD:()=>oKe,OSTYPEVALUES_FREEBSD:()=>rKe,OSTYPEVALUES_HPUX:()=>sKe,OSTYPEVALUES_LINUX:()=>eKe,OSTYPEVALUES_NETBSD:()=>nKe,OSTYPEVALUES_OPENBSD:()=>iKe,OSTYPEVALUES_SOLARIS:()=>cKe,OSTYPEVALUES_WINDOWS:()=>Z$e,OSTYPEVALUES_Z_OS:()=>uKe,OTEL_STATUS_CODE_VALUE_ERROR:()=>f4e,OTEL_STATUS_CODE_VALUE_OK:()=>h4e,OsTypeValues:()=>lKe,RPCGRPCSTATUSCODEVALUES_ABORTED:()=>D3e,RPCGRPCSTATUSCODEVALUES_ALREADY_EXISTS:()=>M3e,RPCGRPCSTATUSCODEVALUES_CANCELLED:()=>O3e,RPCGRPCSTATUSCODEVALUES_DATA_LOSS:()=>B3e,RPCGRPCSTATUSCODEVALUES_DEADLINE_EXCEEDED:()=>P3e,RPCGRPCSTATUSCODEVALUES_FAILED_PRECONDITION:()=>L3e,RPCGRPCSTATUSCODEVALUES_INTERNAL:()=>k3e,RPCGRPCSTATUSCODEVALUES_INVALID_ARGUMENT:()=>C3e,RPCGRPCSTATUSCODEVALUES_NOT_FOUND:()=>b3e,RPCGRPCSTATUSCODEVALUES_OK:()=>v3e,RPCGRPCSTATUSCODEVALUES_OUT_OF_RANGE:()=>w3e,RPCGRPCSTATUSCODEVALUES_PERMISSION_DENIED:()=>I3e,RPCGRPCSTATUSCODEVALUES_RESOURCE_EXHAUSTED:()=>x3e,RPCGRPCSTATUSCODEVALUES_UNAUTHENTICATED:()=>F3e,RPCGRPCSTATUSCODEVALUES_UNAVAILABLE:()=>V3e,RPCGRPCSTATUSCODEVALUES_UNIMPLEMENTED:()=>U3e,RPCGRPCSTATUSCODEVALUES_UNKNOWN:()=>N3e,RpcGrpcStatusCodeValues:()=>q3e,SEMATTRS_AWS_DYNAMODB_ATTRIBUTES_TO_GET:()=>Eje,SEMATTRS_AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:()=>bje,SEMATTRS_AWS_DYNAMODB_CONSISTENT_READ:()=>hje,SEMATTRS_AWS_DYNAMODB_CONSUMED_CAPACITY:()=>lje,SEMATTRS_AWS_DYNAMODB_COUNT:()=>Cje,SEMATTRS_AWS_DYNAMODB_EXCLUSIVE_START_TABLE:()=>Aje,SEMATTRS_AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:()=>gje,SEMATTRS_AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:()=>Mje,SEMATTRS_AWS_DYNAMODB_INDEX_NAME:()=>Tje,SEMATTRS_AWS_DYNAMODB_ITEM_COLLECTION_METRICS:()=>dje,SEMATTRS_AWS_DYNAMODB_LIMIT:()=>mje,SEMATTRS_AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:()=>yje,SEMATTRS_AWS_DYNAMODB_PROJECTION:()=>_je,SEMATTRS_AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:()=>pje,SEMATTRS_AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:()=>fje,SEMATTRS_AWS_DYNAMODB_SCANNED_COUNT:()=>Pje,SEMATTRS_AWS_DYNAMODB_SCAN_FORWARD:()=>vje,SEMATTRS_AWS_DYNAMODB_SEGMENT:()=>Oje,SEMATTRS_AWS_DYNAMODB_SELECT:()=>Sje,SEMATTRS_AWS_DYNAMODB_TABLE_COUNT:()=>Rje,SEMATTRS_AWS_DYNAMODB_TABLE_NAMES:()=>uje,SEMATTRS_AWS_DYNAMODB_TOTAL_SEGMENTS:()=>Nje,SEMATTRS_AWS_LAMBDA_INVOKED_ARN:()=>HHe,SEMATTRS_CODE_FILEPATH:()=>YGe,SEMATTRS_CODE_FUNCTION:()=>jGe,SEMATTRS_CODE_LINENO:()=>$Ge,SEMATTRS_CODE_NAMESPACE:()=>zGe,SEMATTRS_DB_CASSANDRA_CONSISTENCY_LEVEL:()=>ZHe,SEMATTRS_DB_CASSANDRA_COORDINATOR_DC:()=>iGe,SEMATTRS_DB_CASSANDRA_COORDINATOR_ID:()=>nGe,SEMATTRS_DB_CASSANDRA_IDEMPOTENCE:()=>tGe,SEMATTRS_DB_CASSANDRA_KEYSPACE:()=>QHe,SEMATTRS_DB_CASSANDRA_PAGE_SIZE:()=>JHe,SEMATTRS_DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:()=>rGe,SEMATTRS_DB_CASSANDRA_TABLE:()=>eGe,SEMATTRS_DB_CONNECTION_STRING:()=>jHe,SEMATTRS_DB_HBASE_NAMESPACE:()=>oGe,SEMATTRS_DB_JDBC_DRIVER_CLASSNAME:()=>YHe,SEMATTRS_DB_MONGODB_COLLECTION:()=>aGe,SEMATTRS_DB_MSSQL_INSTANCE_NAME:()=>XHe,SEMATTRS_DB_NAME:()=>$He,SEMATTRS_DB_OPERATION:()=>WHe,SEMATTRS_DB_REDIS_DATABASE_INDEX:()=>sGe,SEMATTRS_DB_SQL_TABLE:()=>cGe,SEMATTRS_DB_STATEMENT:()=>KHe,SEMATTRS_DB_SYSTEM:()=>GHe,SEMATTRS_DB_USER:()=>zHe,SEMATTRS_ENDUSER_ID:()=>BGe,SEMATTRS_ENDUSER_ROLE:()=>FGe,SEMATTRS_ENDUSER_SCOPE:()=>qGe,SEMATTRS_EXCEPTION_ESCAPED:()=>pGe,SEMATTRS_EXCEPTION_MESSAGE:()=>lGe,SEMATTRS_EXCEPTION_STACKTRACE:()=>dGe,SEMATTRS_EXCEPTION_TYPE:()=>uGe,SEMATTRS_FAAS_COLDSTART:()=>yGe,SEMATTRS_FAAS_CRON:()=>gGe,SEMATTRS_FAAS_DOCUMENT_COLLECTION:()=>_Ge,SEMATTRS_FAAS_DOCUMENT_NAME:()=>TGe,SEMATTRS_FAAS_DOCUMENT_OPERATION:()=>mGe,SEMATTRS_FAAS_DOCUMENT_TIME:()=>EGe,SEMATTRS_FAAS_EXECUTION:()=>hGe,SEMATTRS_FAAS_INVOKED_NAME:()=>AGe,SEMATTRS_FAAS_INVOKED_PROVIDER:()=>RGe,SEMATTRS_FAAS_INVOKED_REGION:()=>vGe,SEMATTRS_FAAS_TIME:()=>SGe,SEMATTRS_FAAS_TRIGGER:()=>fGe,SEMATTRS_HTTP_CLIENT_IP:()=>cje,SEMATTRS_HTTP_FLAVOR:()=>eje,SEMATTRS_HTTP_HOST:()=>QGe,SEMATTRS_HTTP_METHOD:()=>KGe,SEMATTRS_HTTP_REQUEST_CONTENT_LENGTH:()=>rje,SEMATTRS_HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:()=>nje,SEMATTRS_HTTP_RESPONSE_CONTENT_LENGTH:()=>ije,SEMATTRS_HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:()=>oje,SEMATTRS_HTTP_ROUTE:()=>aje,SEMATTRS_HTTP_SCHEME:()=>JGe,SEMATTRS_HTTP_SERVER_NAME:()=>sje,SEMATTRS_HTTP_STATUS_CODE:()=>ZGe,SEMATTRS_HTTP_TARGET:()=>XGe,SEMATTRS_HTTP_URL:()=>WGe,SEMATTRS_HTTP_USER_AGENT:()=>tje,SEMATTRS_MESSAGE_COMPRESSED_SIZE:()=>s2e,SEMATTRS_MESSAGE_ID:()=>o2e,SEMATTRS_MESSAGE_TYPE:()=>i2e,SEMATTRS_MESSAGE_UNCOMPRESSED_SIZE:()=>a2e,SEMATTRS_MESSAGING_CONSUMER_ID:()=>Gje,SEMATTRS_MESSAGING_CONVERSATION_ID:()=>Bje,SEMATTRS_MESSAGING_DESTINATION:()=>xje,SEMATTRS_MESSAGING_DESTINATION_KIND:()=>Lje,SEMATTRS_MESSAGING_KAFKA_CLIENT_ID:()=>$je,SEMATTRS_MESSAGING_KAFKA_CONSUMER_GROUP:()=>Yje,SEMATTRS_MESSAGING_KAFKA_MESSAGE_KEY:()=>zje,SEMATTRS_MESSAGING_KAFKA_PARTITION:()=>Kje,SEMATTRS_MESSAGING_KAFKA_TOMBSTONE:()=>Wje,SEMATTRS_MESSAGING_MESSAGE_ID:()=>Vje,SEMATTRS_MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:()=>qje,SEMATTRS_MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:()=>Fje,SEMATTRS_MESSAGING_OPERATION:()=>Hje,SEMATTRS_MESSAGING_PROTOCOL:()=>wje,SEMATTRS_MESSAGING_PROTOCOL_VERSION:()=>Uje,SEMATTRS_MESSAGING_RABBITMQ_ROUTING_KEY:()=>jje,SEMATTRS_MESSAGING_SYSTEM:()=>Ije,SEMATTRS_MESSAGING_TEMP_DESTINATION:()=>Dje,SEMATTRS_MESSAGING_URL:()=>kje,SEMATTRS_NET_HOST_CARRIER_ICC:()=>kGe,SEMATTRS_NET_HOST_CARRIER_MCC:()=>wGe,SEMATTRS_NET_HOST_CARRIER_MNC:()=>UGe,SEMATTRS_NET_HOST_CARRIER_NAME:()=>DGe,SEMATTRS_NET_HOST_CONNECTION_SUBTYPE:()=>LGe,SEMATTRS_NET_HOST_CONNECTION_TYPE:()=>xGe,SEMATTRS_NET_HOST_IP:()=>bGe,SEMATTRS_NET_HOST_NAME:()=>IGe,SEMATTRS_NET_HOST_PORT:()=>MGe,SEMATTRS_NET_PEER_IP:()=>NGe,SEMATTRS_NET_PEER_NAME:()=>PGe,SEMATTRS_NET_PEER_PORT:()=>CGe,SEMATTRS_NET_TRANSPORT:()=>OGe,SEMATTRS_PEER_SERVICE:()=>VGe,SEMATTRS_RPC_GRPC_STATUS_CODE:()=>Zje,SEMATTRS_RPC_JSONRPC_ERROR_CODE:()=>r2e,SEMATTRS_RPC_JSONRPC_ERROR_MESSAGE:()=>n2e,SEMATTRS_RPC_JSONRPC_REQUEST_ID:()=>t2e,SEMATTRS_RPC_JSONRPC_VERSION:()=>e2e,SEMATTRS_RPC_METHOD:()=>Jje,SEMATTRS_RPC_SERVICE:()=>Qje,SEMATTRS_RPC_SYSTEM:()=>Xje,SEMATTRS_THREAD_ID:()=>HGe,SEMATTRS_THREAD_NAME:()=>GGe,SEMRESATTRS_AWS_ECS_CLUSTER_ARN:()=>Q3e,SEMRESATTRS_AWS_ECS_CONTAINER_ARN:()=>X3e,SEMRESATTRS_AWS_ECS_LAUNCHTYPE:()=>J3e,SEMRESATTRS_AWS_ECS_TASK_ARN:()=>Z3e,SEMRESATTRS_AWS_ECS_TASK_FAMILY:()=>eYe,SEMRESATTRS_AWS_ECS_TASK_REVISION:()=>tYe,SEMRESATTRS_AWS_EKS_CLUSTER_ARN:()=>rYe,SEMRESATTRS_AWS_LOG_GROUP_ARNS:()=>iYe,SEMRESATTRS_AWS_LOG_GROUP_NAMES:()=>nYe,SEMRESATTRS_AWS_LOG_STREAM_ARNS:()=>sYe,SEMRESATTRS_AWS_LOG_STREAM_NAMES:()=>oYe,SEMRESATTRS_CLOUD_ACCOUNT_ID:()=>Y3e,SEMRESATTRS_CLOUD_AVAILABILITY_ZONE:()=>K3e,SEMRESATTRS_CLOUD_PLATFORM:()=>W3e,SEMRESATTRS_CLOUD_PROVIDER:()=>z3e,SEMRESATTRS_CLOUD_REGION:()=>$3e,SEMRESATTRS_CONTAINER_ID:()=>cYe,SEMRESATTRS_CONTAINER_IMAGE_NAME:()=>lYe,SEMRESATTRS_CONTAINER_IMAGE_TAG:()=>dYe,SEMRESATTRS_CONTAINER_NAME:()=>aYe,SEMRESATTRS_CONTAINER_RUNTIME:()=>uYe,SEMRESATTRS_DEPLOYMENT_ENVIRONMENT:()=>pYe,SEMRESATTRS_DEVICE_ID:()=>fYe,SEMRESATTRS_DEVICE_MODEL_IDENTIFIER:()=>hYe,SEMRESATTRS_DEVICE_MODEL_NAME:()=>_Ye,SEMRESATTRS_FAAS_ID:()=>EYe,SEMRESATTRS_FAAS_INSTANCE:()=>SYe,SEMRESATTRS_FAAS_MAX_MEMORY:()=>gYe,SEMRESATTRS_FAAS_NAME:()=>mYe,SEMRESATTRS_FAAS_VERSION:()=>TYe,SEMRESATTRS_HOST_ARCH:()=>vYe,SEMRESATTRS_HOST_ID:()=>yYe,SEMRESATTRS_HOST_IMAGE_ID:()=>NYe,SEMRESATTRS_HOST_IMAGE_NAME:()=>OYe,SEMRESATTRS_HOST_IMAGE_VERSION:()=>CYe,SEMRESATTRS_HOST_NAME:()=>AYe,SEMRESATTRS_HOST_TYPE:()=>RYe,SEMRESATTRS_K8S_CLUSTER_NAME:()=>PYe,SEMRESATTRS_K8S_CONTAINER_NAME:()=>DYe,SEMRESATTRS_K8S_CRONJOB_NAME:()=>YYe,SEMRESATTRS_K8S_CRONJOB_UID:()=>zYe,SEMRESATTRS_K8S_DAEMONSET_NAME:()=>HYe,SEMRESATTRS_K8S_DAEMONSET_UID:()=>qYe,SEMRESATTRS_K8S_DEPLOYMENT_NAME:()=>VYe,SEMRESATTRS_K8S_DEPLOYMENT_UID:()=>kYe,SEMRESATTRS_K8S_JOB_NAME:()=>jYe,SEMRESATTRS_K8S_JOB_UID:()=>GYe,SEMRESATTRS_K8S_NAMESPACE_NAME:()=>IYe,SEMRESATTRS_K8S_NODE_NAME:()=>bYe,SEMRESATTRS_K8S_NODE_UID:()=>MYe,SEMRESATTRS_K8S_POD_NAME:()=>LYe,SEMRESATTRS_K8S_POD_UID:()=>xYe,SEMRESATTRS_K8S_REPLICASET_NAME:()=>UYe,SEMRESATTRS_K8S_REPLICASET_UID:()=>wYe,SEMRESATTRS_K8S_STATEFULSET_NAME:()=>FYe,SEMRESATTRS_K8S_STATEFULSET_UID:()=>BYe,SEMRESATTRS_OS_DESCRIPTION:()=>KYe,SEMRESATTRS_OS_NAME:()=>WYe,SEMRESATTRS_OS_TYPE:()=>$Ye,SEMRESATTRS_OS_VERSION:()=>XYe,SEMRESATTRS_PROCESS_COMMAND:()=>e$e,SEMRESATTRS_PROCESS_COMMAND_ARGS:()=>r$e,SEMRESATTRS_PROCESS_COMMAND_LINE:()=>t$e,SEMRESATTRS_PROCESS_EXECUTABLE_NAME:()=>JYe,SEMRESATTRS_PROCESS_EXECUTABLE_PATH:()=>ZYe,SEMRESATTRS_PROCESS_OWNER:()=>n$e,SEMRESATTRS_PROCESS_PID:()=>QYe,SEMRESATTRS_PROCESS_RUNTIME_DESCRIPTION:()=>s$e,SEMRESATTRS_PROCESS_RUNTIME_NAME:()=>i$e,SEMRESATTRS_PROCESS_RUNTIME_VERSION:()=>o$e,SEMRESATTRS_SERVICE_INSTANCE_ID:()=>u$e,SEMRESATTRS_SERVICE_NAME:()=>a$e,SEMRESATTRS_SERVICE_NAMESPACE:()=>c$e,SEMRESATTRS_SERVICE_VERSION:()=>l$e,SEMRESATTRS_TELEMETRY_AUTO_VERSION:()=>h$e,SEMRESATTRS_TELEMETRY_SDK_LANGUAGE:()=>p$e,SEMRESATTRS_TELEMETRY_SDK_NAME:()=>d$e,SEMRESATTRS_TELEMETRY_SDK_VERSION:()=>f$e,SEMRESATTRS_WEBENGINE_DESCRIPTION:()=>E$e,SEMRESATTRS_WEBENGINE_NAME:()=>_$e,SEMRESATTRS_WEBENGINE_VERSION:()=>m$e,SIGNALR_CONNECTION_STATUS_VALUE_APP_SHUTDOWN:()=>y4e,SIGNALR_CONNECTION_STATUS_VALUE_NORMAL_CLOSURE:()=>A4e,SIGNALR_CONNECTION_STATUS_VALUE_TIMEOUT:()=>R4e,SIGNALR_TRANSPORT_VALUE_LONG_POLLING:()=>O4e,SIGNALR_TRANSPORT_VALUE_SERVER_SENT_EVENTS:()=>N4e,SIGNALR_TRANSPORT_VALUE_WEB_SOCKETS:()=>C4e,SemanticAttributes:()=>c2e,SemanticResourceAttributes:()=>T$e,TELEMETRYSDKLANGUAGEVALUES_CPP:()=>dKe,TELEMETRYSDKLANGUAGEVALUES_DOTNET:()=>pKe,TELEMETRYSDKLANGUAGEVALUES_ERLANG:()=>fKe,TELEMETRYSDKLANGUAGEVALUES_GO:()=>hKe,TELEMETRYSDKLANGUAGEVALUES_JAVA:()=>_Ke,TELEMETRYSDKLANGUAGEVALUES_NODEJS:()=>mKe,TELEMETRYSDKLANGUAGEVALUES_PHP:()=>EKe,TELEMETRYSDKLANGUAGEVALUES_PYTHON:()=>TKe,TELEMETRYSDKLANGUAGEVALUES_RUBY:()=>SKe,TELEMETRYSDKLANGUAGEVALUES_WEBJS:()=>gKe,TELEMETRY_SDK_LANGUAGE_VALUE_CPP:()=>b4e,TELEMETRY_SDK_LANGUAGE_VALUE_DOTNET:()=>M4e,TELEMETRY_SDK_LANGUAGE_VALUE_ERLANG:()=>I4e,TELEMETRY_SDK_LANGUAGE_VALUE_GO:()=>x4e,TELEMETRY_SDK_LANGUAGE_VALUE_JAVA:()=>L4e,TELEMETRY_SDK_LANGUAGE_VALUE_NODEJS:()=>D4e,TELEMETRY_SDK_LANGUAGE_VALUE_PHP:()=>w4e,TELEMETRY_SDK_LANGUAGE_VALUE_PYTHON:()=>U4e,TELEMETRY_SDK_LANGUAGE_VALUE_RUBY:()=>k4e,TELEMETRY_SDK_LANGUAGE_VALUE_RUST:()=>V4e,TELEMETRY_SDK_LANGUAGE_VALUE_SWIFT:()=>B4e,TELEMETRY_SDK_LANGUAGE_VALUE_WEBJS:()=>F4e,TelemetrySdkLanguageValues:()=>yKe});var mc=E(()=>{Dre();soe();aoe();coe();uoe();});var Ec=f(Pr=>{Object.defineProperty(Pr,"__esModule",{value:true});Pr.internalMicrosoftAttributes=Pr.httpSemanticValues=Pr.experimentalOpenTelemetryValues=Pr.legacySemanticValues=Pr.MaxPropertyLengths=Pr.BreezePerformanceCounterNames=Pr.OTelPerformanceCounterNames=void 0;var ae=(mc(),A(_c)),loe;(function(t){t.PRIVATE_BYTES="Private_Bytes",t.AVAILABLE_BYTES="Available_Bytes",t.PROCESSOR_TIME="Processor_Time",t.PROCESS_TIME_STANDARD="Process_Time_Standard",t.REQUEST_RATE="Request_Rate",t.REQUEST_DURATION="Request_Execution_Time",t.PROCESS_TIME_NORMALIZED="Process_Time_Normalized",t.EXCEPTION_RATE="Exception_Rate";})(loe||(Pr.OTelPerformanceCounterNames=loe={}));var doe;(function(t){t.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",t.AVAILABLE_BYTES="\\Memory\\Available Bytes",t.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",t.PROCESS_TIME_STANDARD="\\Process(??APP_WIN32_PROC??)\\% Processor Time",t.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",t.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time",t.PROCESS_TIME_NORMALIZED="\\Process(??APP_WIN32_PROC??)\\% Processor Time Normalized",t.EXCEPTION_RATE="\\.NET CLR Exceptions(??APP_CLR_PROC??)\\# of Exceps Thrown / sec";})(doe||(Pr.BreezePerformanceCounterNames=doe={}));var poe;(function(t){t[t.NINE_BIT=512]="NINE_BIT",t[t.TEN_BIT=1024]="TEN_BIT",t[t.THIRTEEN_BIT=8192]="THIRTEEN_BIT",t[t.FIFTEEN_BIT=32768]="FIFTEEN_BIT";})(poe||(Pr.MaxPropertyLengths=poe={}));Pr.legacySemanticValues=[ae.SEMATTRS_NET_PEER_IP,ae.SEMATTRS_NET_PEER_NAME,ae.SEMATTRS_NET_HOST_IP,ae.SEMATTRS_PEER_SERVICE,ae.SEMATTRS_HTTP_USER_AGENT,ae.SEMATTRS_HTTP_METHOD,ae.SEMATTRS_HTTP_URL,ae.SEMATTRS_HTTP_STATUS_CODE,ae.SEMATTRS_HTTP_ROUTE,ae.SEMATTRS_HTTP_HOST,ae.SEMATTRS_DB_SYSTEM,ae.SEMATTRS_DB_STATEMENT,ae.SEMATTRS_DB_OPERATION,ae.SEMATTRS_DB_NAME,ae.SEMATTRS_RPC_SYSTEM,ae.SEMATTRS_RPC_GRPC_STATUS_CODE,ae.SEMATTRS_EXCEPTION_TYPE,ae.SEMATTRS_EXCEPTION_MESSAGE,ae.SEMATTRS_EXCEPTION_STACKTRACE,ae.SEMATTRS_HTTP_SCHEME,ae.SEMATTRS_HTTP_TARGET,ae.SEMATTRS_HTTP_FLAVOR,ae.SEMATTRS_NET_TRANSPORT,ae.SEMATTRS_NET_HOST_NAME,ae.SEMATTRS_NET_HOST_PORT,ae.SEMATTRS_NET_PEER_PORT,ae.SEMATTRS_HTTP_CLIENT_IP,ae.SEMATTRS_ENDUSER_ID,"http.status_text"];var Vh;(function(t){t.SYNTHETIC_TYPE="user_agent.synthetic.type",t.ATTR_ENDUSER_PSEUDO_ID="enduser.pseudo.id",t.ATTR_ENDUSER_ID="enduser.id";})(Vh||(Pr.experimentalOpenTelemetryValues=Vh={}));Pr.httpSemanticValues=[ae.ATTR_CLIENT_ADDRESS,ae.ATTR_CLIENT_PORT,ae.ATTR_SERVER_ADDRESS,ae.ATTR_SERVER_PORT,ae.ATTR_URL_FULL,ae.ATTR_URL_PATH,ae.ATTR_URL_QUERY,ae.ATTR_URL_SCHEME,ae.ATTR_ERROR_TYPE,ae.ATTR_NETWORK_LOCAL_ADDRESS,ae.ATTR_NETWORK_LOCAL_PORT,ae.ATTR_NETWORK_PROTOCOL_NAME,ae.ATTR_NETWORK_PEER_ADDRESS,ae.ATTR_NETWORK_PEER_PORT,ae.ATTR_NETWORK_PROTOCOL_VERSION,ae.ATTR_NETWORK_TRANSPORT,ae.ATTR_USER_AGENT_ORIGINAL,ae.ATTR_HTTP_REQUEST_METHOD,ae.ATTR_HTTP_RESPONSE_STATUS_CODE,ae.ATTR_EXCEPTION_TYPE,ae.ATTR_EXCEPTION_MESSAGE,ae.ATTR_EXCEPTION_STACKTRACE,Vh.ATTR_ENDUSER_ID,Vh.ATTR_ENDUSER_PSEUDO_ID,Vh.SYNTHETIC_TYPE];Pr.internalMicrosoftAttributes=["_MS.ProcessedByMetricExtractors"];});var foe=f(hA=>{Object.defineProperty(hA,"__esModule",{value:true});hA.SDK_INFO=void 0;hA.SDK_INFO={NAME:"opentelemetry",RUNTIME:"node",LANGUAGE:"nodejs"};});var _oe=f(_A=>{Object.defineProperty(_A,"__esModule",{value:true});_A.FileAccessControl=void 0;var $6e=(Ce(),A(Ne)),K6e=P("fs"),W6e=P("os"),Vl=P("child_process"),X6e=(M(),A(H)),hoe=$6e.__importDefault(P("process")),Ux=class t{static ICACLS_PATH=`${hoe.default.env.SYSTEMDRIVE}/windows/system32/icacls.exe`;static POWERSHELL_PATH=`${hoe.default.env.SYSTEMDRIVE}/windows/system32/windowspowershell/v1.0/powershell.exe`;static ACLED_DIRECTORIES={};static ACL_IDENTITY=null;static OS_FILE_PROTECTION_CHECKED=false;static OS_PROVIDES_FILE_PROTECTION=false;static USE_ICACLS=(0, W6e.type)()==="Windows_NT";static checkFileProtection(){if(!t.OS_PROVIDES_FILE_PROTECTION&&!t.OS_FILE_PROTECTION_CHECKED)if(t.OS_FILE_PROTECTION_CHECKED=true,t.USE_ICACLS){try{t.OS_PROVIDES_FILE_PROTECTION=(0,K6e.existsSync)(t.ICACLS_PATH);}catch{}t.OS_PROVIDES_FILE_PROTECTION||X6e.diag.warn("Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.");}else t.OS_PROVIDES_FILE_PROTECTION=true;}static async applyACLRules(e){if(t.USE_ICACLS){if(t.ACLED_DIRECTORIES[e]===void 0){t.ACLED_DIRECTORIES[e]=false;try{let r=await this._getACLIdentity();await this._runICACLS(this._getACLArguments(e,r)),t.ACLED_DIRECTORIES[e]=!0;}catch(r){throw t.ACLED_DIRECTORIES[e]=false,r}}else if(!t.ACLED_DIRECTORIES[e])throw new Error("Setting ACL restrictions did not succeed (cached result)")}}static applyACLRulesSync(e){if(t.USE_ICACLS){if(t.ACLED_DIRECTORIES[e]===void 0){this._runICACLSSync(this._getACLArguments(e,this._getACLIdentitySync())),t.ACLED_DIRECTORIES[e]=true;return}else if(!t.ACLED_DIRECTORIES[e])throw new Error("Setting ACL restrictions did not succeed (cached result)")}}static _runICACLS(e){return new Promise((r,n)=>{let s=(0, Vl.spawn)(t.ICACLS_PATH,e,{windowsHide:true});s.on("error",a=>n(a)),s.on("close",a=>{a===0?r():n(new Error(`Setting ACL restrictions did not succeed (ICACLS returned code ${a})`));});})}static _runICACLSSync(e){if(Vl.spawnSync){let r=(0, Vl.spawnSync)(t.ICACLS_PATH,e,{windowsHide:true});if(r.error)throw r.error;if(r.status!==0)throw new Error(`Setting ACL restrictions did not succeed (ICACLS returned code ${r.status})`)}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")}static _getACLIdentity(){return new Promise((e,r)=>{t.ACL_IDENTITY&&e(t.ACL_IDENTITY);let n=(0, Vl.spawn)(t.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:true,stdio:["ignore","pipe","pipe"]}),s="";n.stdout.on("data",a=>s+=a),n.on("error",a=>r(a)),n.on("close",a=>{t.ACL_IDENTITY=s&&s.trim(),a===0?e(t.ACL_IDENTITY):r(new Error(`Getting ACL identity did not succeed (PS returned code ${a})`));});})}static _getACLIdentitySync(){if(t.ACL_IDENTITY)return t.ACL_IDENTITY;if(Vl.spawnSync){let e=(0, Vl.spawnSync)(t.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:true,stdio:["ignore","pipe","pipe"]});if(e.error)throw e.error;if(e.status!==0)throw new Error(`Getting ACL identity did not succeed (PS returned code ${e.status})`);return t.ACL_IDENTITY=e.stdout&&e.stdout.toString().trim(),t.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")}static _getACLArguments(e,r){return [e,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",`${r}:(OI)(CI)F`,"/inheritance:r"]}};_A.FileAccessControl=Ux;});var moe=f(Bl=>{Object.defineProperty(Bl,"__esModule",{value:true});Bl.confirmDirExists=Bl.getShallowDirectorySize=void 0;var Q6e=(M(),A(H)),J6e=P("path"),mA=P("fs/promises"),Z6e=async t=>{let e=0;try{let r=await(0,mA.readdir)(t);for(let n of r){let s=await(0,mA.stat)((0,J6e.join)(t,n));s.isFile()&&(e+=s.size);}return e}catch(r){return Q6e.diag.error(`Error getting directory size: ${r}`),0}};Bl.getShallowDirectorySize=Z6e;var e8e=async t=>{try{if(!(await(0,mA.lstat)(t)).isDirectory())throw new Error("Path existed but was not a directory")}catch(e){if(e&&e.code==="ENOENT")try{let r={recursive:!0};await(0,mA.mkdir)(t,r);}catch(r){if(r&&r.code!=="EEXIST")throw r}}};Bl.confirmDirExists=e8e;});var so=f(ne=>{Object.defineProperty(ne,"__esModule",{value:true});ne.RetryReason=ne.DropReason=ne.ExceptionType=ne.StatsbeatFeatureType=ne.RetryCode=ne.DropCode=ne.TelemetryType=ne.EU_ENDPOINTS=ne.EU_CONNECTION_STRING=ne.NON_EU_CONNECTION_STRING=ne.AIMS_FORMAT=ne.AIMS_API_VERSION=ne.AIMS_URI=ne.CustomStatsbeatCounter=ne.CustomSDKStatsCounter=ne.StatsbeatCounter=ne.AttachTypeName=ne.StatsbeatResourceProvider=ne.MAX_STATSBEAT_FAILURES=ne.AZURE_MONITOR_AUTO_ATTACH=ne.STATSBEAT_LANGUAGE=ne.CustomerStatsbeat=ne.CustomerSDKStats=ne.NetworkStatsbeat=void 0;ne.isStatsbeatShutdownStatus=t8e;var kx=class{time;lastTime;endpoint;host;totalRequestCount;lastRequestCount;totalSuccessfulRequestCount;totalReadFailureCount;totalWriteFailureCount;totalFailedRequestCount;retryCount;exceptionCount;throttleCount;intervalRequestExecutionTime;lastIntervalRequestExecutionTime;averageRequestExecutionTime;constructor(e,r){this.endpoint=e,this.host=r,this.totalRequestCount=0,this.totalSuccessfulRequestCount=0,this.totalReadFailureCount=0,this.totalWriteFailureCount=0,this.totalFailedRequestCount=[],this.retryCount=[],this.exceptionCount=[],this.throttleCount=[],this.intervalRequestExecutionTime=0,this.lastIntervalRequestExecutionTime=0,this.lastTime=+new Date,this.lastRequestCount=0,this.averageRequestExecutionTime=0;}};ne.NetworkStatsbeat=kx;var EA=class{totalItemSuccessCount;totalItemDropCount;totalItemRetryCount;constructor(){this.totalItemSuccessCount=new Map,this.totalItemDropCount=new Map,this.totalItemRetryCount=new Map;}};ne.CustomerSDKStats=EA;ne.CustomerStatsbeat=EA;ne.STATSBEAT_LANGUAGE="node";ne.AZURE_MONITOR_AUTO_ATTACH="AZURE_MONITOR_AUTO_ATTACH";ne.MAX_STATSBEAT_FAILURES=3;ne.StatsbeatResourceProvider={appsvc:"appsvc",aks:"aks",functions:"functions",vm:"vm",unknown:"unknown"};var Eoe;(function(t){t.INTEGRATED_AUTO="IntegratedAuto",t.MANUAL="Manual";})(Eoe||(ne.AttachTypeName=Eoe={}));var Toe;(function(t){t.SUCCESS_COUNT="Request_Success_Count",t.FAILURE_COUNT="Request_Failure_Count",t.RETRY_COUNT="Retry_Count",t.THROTTLE_COUNT="Throttle_Count",t.EXCEPTION_COUNT="Exception_Count",t.AVERAGE_DURATION="Request_Duration",t.READ_FAILURE_COUNT="Read_Failure_Count",t.WRITE_FAILURE_COUNT="Write_Failure_Count",t.ATTACH="Attach",t.FEATURE="Feature";})(Toe||(ne.StatsbeatCounter=Toe={}));var Vx;(function(t){t.ITEM_SUCCESS_COUNT="preview.item.success.count",t.ITEM_DROP_COUNT="preview.item.dropped.count",t.ITEM_RETRY_COUNT="preview.item.retry.count";})(Vx||(ne.CustomSDKStatsCounter=Vx={}));ne.CustomStatsbeatCounter=Vx;ne.AIMS_URI="http://169.254.169.254/metadata/instance/compute";ne.AIMS_API_VERSION="api-version=2017-12-01";ne.AIMS_FORMAT="format=json";ne.NON_EU_CONNECTION_STRING="InstrumentationKey=c4a29126-a7cb-47e5-b348-11414998b11e;IngestionEndpoint=https://westus-0.in.applicationinsights.azure.com";ne.EU_CONNECTION_STRING="InstrumentationKey=7dc56bab-3c0c-4e9f-9ebb-d1acadee8d0f;IngestionEndpoint=https://westeurope-5.in.applicationinsights.azure.com";ne.EU_ENDPOINTS=["westeurope","northeurope","francecentral","francesouth","germanywestcentral","norwayeast","norwaywest","swedencentral","switzerlandnorth","switzerlandwest","uksouth","ukwest"];var Soe;(function(t){t.AVAILABILITY="AVAILABILITY",t.CUSTOM_EVENT="CUSTOM_EVENT",t.CUSTOM_METRIC="CUSTOM_METRIC",t.DEPENDENCY="DEPENDENCY",t.EXCEPTION="EXCEPTION",t.PAGE_VIEW="PAGE_VIEW",t.PERFORMANCE_COUNTER="PERFORMANCE_COUNTER",t.REQUEST="REQUEST",t.TRACE="TRACE",t.UNKNOWN="UNKNOWN";})(Soe||(ne.TelemetryType=Soe={}));var goe;(function(t){t.CLIENT_EXCEPTION="CLIENT_EXCEPTION",t.CLIENT_READONLY="CLIENT_READONLY",t.CLIENT_PERSISTENCE_CAPACITY="CLIENT_PERSISTENCE_CAPACITY",t.CLIENT_STORAGE_DISABLED="CLIENT_STORAGE_DISABLED",t.UNKNOWN="UNKNOWN";})(goe||(ne.DropCode=goe={}));var yoe;(function(t){t.CLIENT_EXCEPTION="CLIENT_EXCEPTION",t.CLIENT_TIMEOUT="CLIENT_TIMEOUT",t.UNKNOWN="UNKNOWN";})(yoe||(ne.RetryCode=yoe={}));var Aoe;(function(t){t[t.FEATURE=0]="FEATURE",t[t.INSTRUMENTATION=1]="INSTRUMENTATION";})(Aoe||(ne.StatsbeatFeatureType=Aoe={}));var Roe;(function(t){t.CLIENT_EXCEPTION="Client exception",t.NETWORK_EXCEPTION="Network exception",t.STORAGE_EXCEPTION="Storage exception",t.TIMEOUT_EXCEPTION="Timeout exception";})(Roe||(ne.ExceptionType=Roe={}));var voe;(function(t){t.CLIENT_READONLY="Client readonly",t.CLIENT_PERSISTENCE_CAPACITY="Client persistence capacity",t.CLIENT_STORAGE_DISABLED="Client local storage disabled",t.UNKNOWN="Unknown reason";})(voe||(ne.DropReason=voe={}));var Ooe;(function(t){t.CLIENT_TIMEOUT="Client timeout",t.UNKNOWN="Unknown reason";})(Ooe||(ne.RetryReason=Ooe={}));function t8e(t){return t===401||t===403||t===503}});var Poe=f(SA=>{Object.defineProperty(SA,"__esModule",{value:true});SA.FileSystemPersist=void 0;var r8e=P("os"),Fl=P("path"),$n=(M(),A(H)),Noe=_oe(),Coe=moe(),js=P("fs/promises"),TA=so(),Bx=class t{_options;_customerSDKStatsMetrics;static TEMPDIR_PREFIX="ot-azure-exporter-";static FILENAME_SUFFIX=".ai.json";fileRetemptionPeriod=2*24*60*60*1e3;cleanupTimeOut=60*60*1e3;maxBytesOnDisk=5e7;_enabled;_tempDirectory="";_fileCleanupTimer=null;_instrumentationKey;constructor(e,r,n){if(this._options=r,this._customerSDKStatsMetrics=n,this._instrumentationKey=e,this._options?.disableOfflineStorage){this._enabled=false;return}this._enabled=true,Noe.FileAccessControl.checkFileProtection(),Noe.FileAccessControl.OS_PROVIDES_FILE_PROTECTION||(this._enabled=false,$n.diag.error("Sufficient file protection capabilities were not detected. Files will not be persisted")),this._instrumentationKey||(this._enabled=false,$n.diag.error("No instrumentation key was provided to FileSystemPersister. Files will not be persisted")),this._enabled&&(this._tempDirectory=(0, Fl.join)(this._options?.storageDirectory||(0, r8e.tmpdir)(),"Microsoft","AzureMonitor",t.TEMPDIR_PREFIX+this._instrumentationKey),this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout(()=>{this._fileCleanupTask();},this.cleanupTimeOut),this._fileCleanupTimer.unref()));}push(e){return this._enabled?($n.diag.debug("Pushing value to persistent storage",e.toString()),this._storeToDisk(JSON.stringify(e),e)):this._options?.disableOfflineStorage?new Promise(r=>{r(true);}):new Promise(r=>{r(false);})}async shift(){if(this._enabled){$n.diag.debug("Searching for filesystem persisted files");try{let e=await this._getFirstFileOnDisk();if(e)return JSON.parse(e.toString("utf8"))}catch(e){$n.diag.debug("Failed to read persisted file",e);}return null}return new Promise(e=>{e(null);})}async _getFirstFileOnDisk(){try{if((await(0,js.stat)(this._tempDirectory)).isDirectory()){let n=(await(0,js.readdir)(this._tempDirectory)).filter(s=>(0,Fl.basename)(s).includes(t.FILENAME_SUFFIX));if(n.length===0)return null;{let s=n[0],a=(0,Fl.join)(this._tempDirectory,s),o=await(0,js.readFile)(a);return await(0,js.unlink)(a),o}}return null}catch(e){if(e.code==="ENOENT")return null;throw e}}async _storeToDisk(e,r){try{await(0,Coe.confirmDirExists)(this._tempDirectory);}catch(a){return a?.code==="EACCES"||a?.code==="EPERM"?(this._customerSDKStatsMetrics?.countDroppedItems(r,TA.DropCode.CLIENT_READONLY),$n.diag.warn(`Permission denied while checking/creating directory: ${this._tempDirectory}`,a?.message)):$n.diag.warn("Error while checking/creating directory: ",a&&a.message),false}try{let a=await(0,Coe.getShallowDirectorySize)(this._tempDirectory);if(a>this.maxBytesOnDisk)return this._customerSDKStatsMetrics?.countDroppedItems(r,TA.DropCode.CLIENT_PERSISTENCE_CAPACITY),$n.diag.warn(`Not saving data due to max size limit being met. Directory size in bytes is: ${a}`),!1}catch(a){return $n.diag.warn("Error while checking size of persistence directory: ",a&&a.message),false}let n=`${new Date().getTime()}${t.FILENAME_SUFFIX}`,s=(0, Fl.join)(this._tempDirectory,n);$n.diag.info(`saving data to disk at: ${s}`);try{await(0,js.writeFile)(s,e,{mode:384});}catch(a){return this._customerSDKStatsMetrics?.countDroppedItems(r,TA.DropCode.CLIENT_EXCEPTION,a?.message,TA.ExceptionType.STORAGE_EXCEPTION),$n.diag.warn("Error writing file to persistent file storage",a),false}return  true}async _fileCleanupTask(){try{if((await(0,js.stat)(this._tempDirectory)).isDirectory()){let n=(await(0,js.readdir)(this._tempDirectory)).filter(s=>(0,Fl.basename)(s).includes(t.FILENAME_SUFFIX));return n.length===0?!1:(n.forEach(async s=>{let a=new Date(parseInt(s.split(t.FILENAME_SUFFIX)[0]));if(new Date(+new Date-this.fileRetemptionPeriod)>a){let i=(0,Fl.join)(this._tempDirectory,s);await(0,js.unlink)(i);}}),!0)}return !1}catch(e){return $n.diag.info("Failed cleanup of persistent file storage expired files",e),false}}};SA.FileSystemPersist=Bx;});var qx=f(Fx=>{Object.defineProperty(Fx,"__esModule",{value:true});var n8e=(Ce(),A(Ne));n8e.__exportStar(Poe(),Fx);});var Bh=f(gA=>{Object.defineProperty(gA,"__esModule",{value:true});gA.AbortError=void 0;var Hx=class extends Error{constructor(e){super(e),this.name="AbortError";}};gA.AbortError=Hx;});var zs=f(jx=>{Object.defineProperty(jx,"__esModule",{value:true});jx.createHttpHeaders=o8e;function yA(t){return t.toLowerCase()}function*i8e(t){for(let e of t.values())yield [e.name,e.value];}var Gx=class{constructor(e){if(this._headersMap=new Map,e)for(let r of Object.keys(e))this.set(r,e[r]);}set(e,r){this._headersMap.set(yA(e),{name:e,value:String(r).trim()});}get(e){var r;return (r=this._headersMap.get(yA(e)))===null||r===void 0?void 0:r.value}has(e){return this._headersMap.has(yA(e))}delete(e){this._headersMap.delete(yA(e));}toJSON(e={}){let r={};if(e.preserveCase)for(let n of this._headersMap.values())r[n.name]=n.value;else for(let[n,s]of this._headersMap)r[n]=s.value;return r}toString(){return JSON.stringify(this.toJSON({preserveCase:true}))}[Symbol.iterator](){return i8e(this._headersMap)}};function o8e(t){return new Gx(t)}});var Moe=f(boe=>{Object.defineProperty(boe,"__esModule",{value:true});});var xoe=f(Ioe=>{Object.defineProperty(Ioe,"__esModule",{value:true});});var AA=f(Yx=>{var zx;Object.defineProperty(Yx,"__esModule",{value:true});Yx.randomUUID=c8e;var s8e=P("crypto"),a8e=typeof((zx=globalThis?.crypto)===null||zx===void 0?void 0:zx.randomUUID)=="function"?globalThis.crypto.randomUUID.bind(globalThis.crypto):s8e.randomUUID;function c8e(){return a8e()}});var Wx=f(Kx=>{Object.defineProperty(Kx,"__esModule",{value:true});Kx.createPipelineRequest=d8e;var u8e=zs(),l8e=AA(),$x=class{constructor(e){var r,n,s,a,o,i,c;this.url=e.url,this.body=e.body,this.headers=(r=e.headers)!==null&&r!==void 0?r:(0, u8e.createHttpHeaders)(),this.method=(n=e.method)!==null&&n!==void 0?n:"GET",this.timeout=(s=e.timeout)!==null&&s!==void 0?s:0,this.multipartBody=e.multipartBody,this.formData=e.formData,this.disableKeepAlive=(a=e.disableKeepAlive)!==null&&a!==void 0?a:false,this.proxySettings=e.proxySettings,this.streamResponseStatusCodes=e.streamResponseStatusCodes,this.withCredentials=(o=e.withCredentials)!==null&&o!==void 0?o:false,this.abortSignal=e.abortSignal,this.onUploadProgress=e.onUploadProgress,this.onDownloadProgress=e.onDownloadProgress,this.requestId=e.requestId||(0, l8e.randomUUID)(),this.allowInsecureConnection=(i=e.allowInsecureConnection)!==null&&i!==void 0?i:false,this.enableBrowserStreams=(c=e.enableBrowserStreams)!==null&&c!==void 0?c:false,this.requestOverrides=e.requestOverrides,this.authSchemes=e.authSchemes;}};function d8e(t){return new $x(t)}});var Jx=f(Qx=>{Object.defineProperty(Qx,"__esModule",{value:true});Qx.createEmptyPipeline=p8e;var Loe=new Set(["Deserialize","Serialize","Retry","Sign"]),Xx=class t{constructor(e){var r;this._policies=[],this._policies=(r=e?.slice(0))!==null&&r!==void 0?r:[],this._orderedPolicies=void 0;}addPolicy(e,r={}){if(r.phase&&r.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(r.phase&&!Loe.has(r.phase))throw new Error(`Invalid phase name: ${r.phase}`);if(r.afterPhase&&!Loe.has(r.afterPhase))throw new Error(`Invalid afterPhase name: ${r.afterPhase}`);this._policies.push({policy:e,options:r}),this._orderedPolicies=void 0;}removePolicy(e){let r=[];return this._policies=this._policies.filter(n=>e.name&&n.policy.name===e.name||e.phase&&n.options.phase===e.phase?(r.push(n.policy),false):true),this._orderedPolicies=void 0,r}sendRequest(e,r){return this.getOrderedPolicies().reduceRight((a,o)=>i=>o.sendRequest(i,a),a=>e.sendRequest(a))(r)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new t(this._policies)}static create(){return new t}orderPolicies(){let e=[],r=new Map;function n(T){return {name:T,policies:new Set,hasRun:false,hasAfterPolicies:false}}let s=n("Serialize"),a=n("None"),o=n("Deserialize"),i=n("Retry"),c=n("Sign"),u=[s,a,o,i,c];function l(T){return T==="Retry"?i:T==="Serialize"?s:T==="Deserialize"?o:T==="Sign"?c:a}for(let T of this._policies){let g=T.policy,y=T.options,R=g.name;if(r.has(R))throw new Error("Duplicate policy names not allowed in pipeline");let b={policy:g,dependsOn:new Set,dependants:new Set};y.afterPhase&&(b.afterPhase=l(y.afterPhase),b.afterPhase.hasAfterPolicies=true),r.set(R,b),l(y.phase).policies.add(b);}for(let T of this._policies){let{policy:g,options:y}=T,R=g.name,b=r.get(R);if(!b)throw new Error(`Missing node for policy ${R}`);if(y.afterPolicies)for(let w of y.afterPolicies){let v=r.get(w);v&&(b.dependsOn.add(v),v.dependants.add(b));}if(y.beforePolicies)for(let w of y.beforePolicies){let v=r.get(w);v&&(v.dependsOn.add(b),b.dependants.add(v));}}function d(T){T.hasRun=true;for(let g of T.policies)if(!(g.afterPhase&&(!g.afterPhase.hasRun||g.afterPhase.policies.size))&&g.dependsOn.size===0){e.push(g.policy);for(let y of g.dependants)y.dependsOn.delete(g);r.delete(g.policy.name),T.policies.delete(g);}}function p(){for(let T of u){if(d(T),T.policies.size>0&&T!==a){a.hasRun||d(a);return}T.hasAfterPolicies&&d(a);}}let h=0;for(;r.size>0;){h++;let T=e.length;if(p(),e.length<=T&&h>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return e}};function p8e(){return Xx.create()}});var RA=f(Zx=>{Object.defineProperty(Zx,"__esModule",{value:true});Zx.isObject=f8e;function f8e(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}});var tL=f(eL=>{Object.defineProperty(eL,"__esModule",{value:true});eL.isError=_8e;var h8e=RA();function _8e(t){if((0, h8e.isObject)(t)){let e=typeof t.name=="string",r=typeof t.message=="string";return e&&r}return  false}});var Doe=f(vA=>{Object.defineProperty(vA,"__esModule",{value:true});vA.custom=void 0;var m8e=P("util");vA.custom=m8e.inspect.custom;});var Fh=f(OA=>{Object.defineProperty(OA,"__esModule",{value:true});OA.Sanitizer=void 0;var E8e=RA(),rL="REDACTED",T8e=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],S8e=["api-version"],nL=class{constructor({additionalAllowedHeaderNames:e=[],additionalAllowedQueryParameters:r=[]}={}){e=T8e.concat(e),r=S8e.concat(r),this.allowedHeaderNames=new Set(e.map(n=>n.toLowerCase())),this.allowedQueryParameters=new Set(r.map(n=>n.toLowerCase()));}sanitize(e){let r=new Set;return JSON.stringify(e,(n,s)=>{if(s instanceof Error)return Object.assign(Object.assign({},s),{name:s.name,message:s.message});if(n==="headers")return this.sanitizeHeaders(s);if(n==="url")return this.sanitizeUrl(s);if(n==="query")return this.sanitizeQuery(s);if(n==="body")return;if(n==="response")return;if(n==="operationSpec")return;if(Array.isArray(s)||(0, E8e.isObject)(s)){if(r.has(s))return "[Circular]";r.add(s);}return s},2)}sanitizeUrl(e){if(typeof e!="string"||e===null||e==="")return e;let r=new URL(e);if(!r.search)return e;for(let[n]of r.searchParams)this.allowedQueryParameters.has(n.toLowerCase())||r.searchParams.set(n,rL);return r.toString()}sanitizeHeaders(e){let r={};for(let n of Object.keys(e))this.allowedHeaderNames.has(n.toLowerCase())?r[n]=e[n]:r[n]=rL;return r}sanitizeQuery(e){if(typeof e!="object"||e===null)return e;let r={};for(let n of Object.keys(e))this.allowedQueryParameters.has(n.toLowerCase())?r[n]=e[n]:r[n]=rL;return r}};OA.Sanitizer=nL;});var Hl=f(qh=>{Object.defineProperty(qh,"__esModule",{value:true});qh.RestError=void 0;qh.isRestError=v8e;var g8e=tL(),y8e=Doe(),A8e=Fh(),R8e=new A8e.Sanitizer,ql=class t extends Error{constructor(e,r={}){super(e),this.name="RestError",this.code=r.code,this.statusCode=r.statusCode,Object.defineProperty(this,"request",{value:r.request,enumerable:false}),Object.defineProperty(this,"response",{value:r.response,enumerable:false}),Object.defineProperty(this,y8e.custom,{value:()=>`RestError: ${this.message} 
 ${R8e.sanitize(Object.assign(Object.assign({},this),{request:this.request,response:this.response}))}`,enumerable:false}),Object.setPrototypeOf(this,t.prototype);}};qh.RestError=ql;ql.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR";ql.PARSE_ERROR="PARSE_ERROR";function v8e(t){return t instanceof ql?true:(0, g8e.isError)(t)&&t.name==="RestError"}});var Tc=f(NA=>{Object.defineProperty(NA,"__esModule",{value:true});NA.uint8ArrayToString=O8e;NA.stringToUint8Array=N8e;function O8e(t,e){return Buffer.from(t).toString(e)}function N8e(t,e){return Buffer.from(t,e)}});var Hh=f(CA=>{Object.defineProperty(CA,"__esModule",{value:true});CA.logger=void 0;var C8e=xh();CA.logger=(0, C8e.createClientLogger)("ts-http-runtime");});var Foe=f(bA=>{Object.defineProperty(bA,"__esModule",{value:true});bA.getBodyLength=Boe;bA.createNodeHttpClient=w8e;var aL=(Ce(),A(Ne)),iL=aL.__importStar(P("http")),oL=aL.__importStar(P("https")),woe=aL.__importStar(P("zlib")),P8e=P("stream"),Uoe=Bh(),b8e=zs(),jh=Hl(),Gl=Hh(),M8e=Fh(),I8e={};function Gh(t){return t&&typeof t.pipe=="function"}function koe(t){return t.readable===false?Promise.resolve():new Promise(e=>{let r=()=>{e(),t.removeListener("close",r),t.removeListener("end",r),t.removeListener("error",r);};t.on("close",r),t.on("end",r),t.on("error",r);})}function Voe(t){return t&&typeof t.byteLength=="number"}var PA=class extends P8e.Transform{_transform(e,r,n){this.push(e),this.loadedBytes+=e.length;try{this.progressCallback({loadedBytes:this.loadedBytes}),n();}catch(s){n(s);}}constructor(e){super(),this.loadedBytes=0,this.progressCallback=e;}},sL=class{constructor(){this.cachedHttpsAgents=new WeakMap;}async sendRequest(e){var r,n,s;let a=new AbortController,o;if(e.abortSignal){if(e.abortSignal.aborted)throw new Uoe.AbortError("The operation was aborted. Request has already been canceled.");o=p=>{p.type==="abort"&&a.abort();},e.abortSignal.addEventListener("abort",o);}let i;e.timeout>0&&(i=setTimeout(()=>{let p=new M8e.Sanitizer;Gl.logger.info(`request to '${p.sanitizeUrl(e.url)}' timed out. canceling...`),a.abort();},e.timeout));let c=e.headers.get("Accept-Encoding"),u=c?.includes("gzip")||c?.includes("deflate"),l=typeof e.body=="function"?e.body():e.body;if(l&&!e.headers.has("Content-Length")){let p=Boe(l);p!==null&&e.headers.set("Content-Length",p);}let d;try{if(l&&e.onUploadProgress){let R=e.onUploadProgress,b=new PA(R);b.on("error",w=>{Gl.logger.error("Error in upload progress",w);}),Gh(l)?l.pipe(b):b.end(l),l=b;}let p=await this.makeRequest(e,a,l);i!==void 0&&clearTimeout(i);let h=x8e(p),g={status:(r=p.statusCode)!==null&&r!==void 0?r:0,headers:h,request:e};if(e.method==="HEAD")return p.resume(),g;d=u?L8e(p,h):p;let y=e.onDownloadProgress;if(y){let R=new PA(y);R.on("error",b=>{Gl.logger.error("Error in download progress",b);}),d.pipe(R),d=R;}return !((n=e.streamResponseStatusCodes)===null||n===void 0)&&n.has(Number.POSITIVE_INFINITY)||!((s=e.streamResponseStatusCodes)===null||s===void 0)&&s.has(g.status)?g.readableStreamBody=d:g.bodyAsText=await D8e(d),g}finally{if(e.abortSignal&&o){let p=Promise.resolve();Gh(l)&&(p=koe(l));let h=Promise.resolve();Gh(d)&&(h=koe(d)),Promise.all([p,h]).then(()=>{var T;o&&((T=e.abortSignal)===null||T===void 0||T.removeEventListener("abort",o));}).catch(T=>{Gl.logger.warning("Error when cleaning up abortListener on httpRequest",T);});}}}makeRequest(e,r,n){var s;let a=new URL(e.url),o=a.protocol!=="https:";if(o&&!e.allowInsecureConnection)throw new Error(`Cannot connect to ${e.url} while allowInsecureConnection is false.`);let i=(s=e.agent)!==null&&s!==void 0?s:this.getOrCreateAgent(e,o),c=Object.assign({agent:i,hostname:a.hostname,path:`${a.pathname}${a.search}`,port:a.port,method:e.method,headers:e.headers.toJSON({preserveCase:true})},e.requestOverrides);return new Promise((u,l)=>{let d=o?iL.request(c,u):oL.request(c,u);d.once("error",p=>{var h;l(new jh.RestError(p.message,{code:(h=p.code)!==null&&h!==void 0?h:jh.RestError.REQUEST_SEND_ERROR,request:e}));}),r.signal.addEventListener("abort",()=>{let p=new Uoe.AbortError("The operation was aborted. Rejecting from abort signal callback while making request.");d.destroy(p),l(p);}),n&&Gh(n)?n.pipe(d):n?typeof n=="string"||Buffer.isBuffer(n)?d.end(n):Voe(n)?d.end(ArrayBuffer.isView(n)?Buffer.from(n.buffer):Buffer.from(n)):(Gl.logger.error("Unrecognized body type",n),l(new jh.RestError("Unrecognized body type"))):d.end();})}getOrCreateAgent(e,r){var n;let s=e.disableKeepAlive;if(r)return s?iL.globalAgent:(this.cachedHttpAgent||(this.cachedHttpAgent=new iL.Agent({keepAlive:true})),this.cachedHttpAgent);{if(s&&!e.tlsSettings)return oL.globalAgent;let a=(n=e.tlsSettings)!==null&&n!==void 0?n:I8e,o=this.cachedHttpsAgents.get(a);return o&&o.options.keepAlive===!s||(Gl.logger.info("No cached TLS Agent exist, creating a new Agent"),o=new oL.Agent(Object.assign({keepAlive:!s},a)),this.cachedHttpsAgents.set(a,o)),o}}};function x8e(t){let e=(0, b8e.createHttpHeaders)();for(let r of Object.keys(t.headers)){let n=t.headers[r];Array.isArray(n)?n.length>0&&e.set(r,n[0]):n&&e.set(r,n);}return e}function L8e(t,e){let r=e.get("Content-Encoding");if(r==="gzip"){let n=woe.createGunzip();return t.pipe(n),n}else if(r==="deflate"){let n=woe.createInflate();return t.pipe(n),n}return t}function D8e(t){return new Promise((e,r)=>{let n=[];t.on("data",s=>{Buffer.isBuffer(s)?n.push(s):n.push(Buffer.from(s));}),t.on("end",()=>{e(Buffer.concat(n).toString("utf8"));}),t.on("error",s=>{s&&s?.name==="AbortError"?r(s):r(new jh.RestError(`Error reading response as text: ${s.message}`,{code:jh.RestError.PARSE_ERROR}));});})}function Boe(t){return t?Buffer.isBuffer(t)?t.length:Gh(t)?null:Voe(t)?t.byteLength:typeof t=="string"?Buffer.from(t).length:null:0}function w8e(){return new sL}});var uL=f(cL=>{Object.defineProperty(cL,"__esModule",{value:true});cL.createDefaultHttpClient=k8e;var U8e=Foe();function k8e(){return (0, U8e.createNodeHttpClient)()}});var lL=f(jl=>{Object.defineProperty(jl,"__esModule",{value:true});jl.logPolicyName=void 0;jl.logPolicy=F8e;var V8e=Hh(),B8e=Fh();jl.logPolicyName="logPolicy";function F8e(t={}){var e;let r=(e=t.logger)!==null&&e!==void 0?e:V8e.logger.info,n=new B8e.Sanitizer({additionalAllowedHeaderNames:t.additionalAllowedHeaderNames,additionalAllowedQueryParameters:t.additionalAllowedQueryParameters});return {name:jl.logPolicyName,async sendRequest(s,a){if(!r.enabled)return a(s);r(`Request: ${n.sanitize(s)}`);let o=await a(s);return r(`Response status code: ${o.status}`),r(`Headers: ${n.sanitize(o.headers)}`),o}}}});var dL=f(zl=>{Object.defineProperty(zl,"__esModule",{value:true});zl.redirectPolicyName=void 0;zl.redirectPolicy=q8e;zl.redirectPolicyName="redirectPolicy";var qoe=["GET","HEAD"];function q8e(t={}){let{maxRetries:e=20}=t;return {name:zl.redirectPolicyName,async sendRequest(r,n){let s=await n(r);return Hoe(n,s,e)}}}async function Hoe(t,e,r,n=0){let{request:s,status:a,headers:o}=e,i=o.get("location");if(i&&(a===300||a===301&&qoe.includes(s.method)||a===302&&qoe.includes(s.method)||a===303&&s.method==="POST"||a===307)&&n<r){let c=new URL(i,s.url);s.url=c.toString(),a===303&&(s.method="GET",s.headers.delete("Content-Length"),delete s.body),s.headers.delete("Authorization");let u=await t(s);return Hoe(t,u,r,n+1)}return e}});var joe=f(MA=>{Object.defineProperty(MA,"__esModule",{value:true});MA.getHeaderName=H8e;MA.setPlatformSpecificData=G8e;var Goe=(Ce(),A(Ne)),pL=Goe.__importStar(P("os")),fL=Goe.__importStar(P("process"));function H8e(){return "User-Agent"}async function G8e(t){if(fL&&fL.versions){let e=fL.versions;e.bun?t.set("Bun",e.bun):e.deno?t.set("Deno",e.deno):e.node&&t.set("Node",e.node);}t.set("OS",`(${pL.arch()}-${pL.type()}-${pL.release()})`);}});var Sc=f(Yl=>{Object.defineProperty(Yl,"__esModule",{value:true});Yl.DEFAULT_RETRY_POLICY_COUNT=Yl.SDK_VERSION=void 0;Yl.SDK_VERSION="0.3.0";Yl.DEFAULT_RETRY_POLICY_COUNT=3;});var Yoe=f(IA=>{Object.defineProperty(IA,"__esModule",{value:true});IA.getUserAgentHeaderName=Y8e;IA.getUserAgentValue=$8e;var zoe=joe(),j8e=Sc();function z8e(t){let e=[];for(let[r,n]of t){let s=n?`${r}/${n}`:r;e.push(s);}return e.join(" ")}function Y8e(){return (0, zoe.getHeaderName)()}async function $8e(t){let e=new Map;e.set("ts-http-runtime",j8e.SDK_VERSION),await(0, zoe.setPlatformSpecificData)(e);let r=z8e(e);return t?`${t} ${r}`:r}});var hL=f($l=>{Object.defineProperty($l,"__esModule",{value:true});$l.userAgentPolicyName=void 0;$l.userAgentPolicy=K8e;var Koe=Yoe(),$oe=(0, Koe.getUserAgentHeaderName)();$l.userAgentPolicyName="userAgentPolicy";function K8e(t={}){let e=(0, Koe.getUserAgentValue)(t.userAgentPrefix);return {name:$l.userAgentPolicyName,async sendRequest(r,n){return r.headers.has($oe)||r.headers.set($oe,await e),n(r)}}}});var _L=f(Kl=>{Object.defineProperty(Kl,"__esModule",{value:true});Kl.decompressResponsePolicyName=void 0;Kl.decompressResponsePolicy=W8e;Kl.decompressResponsePolicyName="decompressResponsePolicy";function W8e(){return {name:Kl.decompressResponsePolicyName,async sendRequest(t,e){return t.method!=="HEAD"&&t.headers.set("Accept-Encoding","gzip,deflate"),e(t)}}}});var EL=f(mL=>{Object.defineProperty(mL,"__esModule",{value:true});mL.getRandomIntegerInclusive=X8e;function X8e(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}});var SL=f(TL=>{Object.defineProperty(TL,"__esModule",{value:true});TL.calculateRetryDelay=J8e;var Q8e=EL();function J8e(t,e){let r=e.retryDelayInMs*Math.pow(2,t),n=Math.min(e.maxRetryDelayInMs,r);return {retryAfterInMs:n/2+(0, Q8e.getRandomIntegerInclusive)(0,n/2)}}});var gL=f(xA=>{Object.defineProperty(xA,"__esModule",{value:true});xA.delay=t5e;xA.parseHeaderValueAsNumber=r5e;var Z8e=Bh(),e5e="The operation was aborted.";function t5e(t,e,r){return new Promise((n,s)=>{let a,o,i=()=>s(new Z8e.AbortError(r?.abortErrorMsg?r?.abortErrorMsg:e5e)),c=()=>{r?.abortSignal&&o&&r.abortSignal.removeEventListener("abort",o);};if(o=()=>(a&&clearTimeout(a),c(),i()),r?.abortSignal&&r.abortSignal.aborted)return i();a=setTimeout(()=>{c(),n(e);},t),r?.abortSignal&&r.abortSignal.addEventListener("abort",o);})}function r5e(t,e){let r=t.headers.get(e);if(!r)return;let n=Number(r);if(!Number.isNaN(n))return n}});var DA=f(LA=>{Object.defineProperty(LA,"__esModule",{value:true});LA.isThrottlingRetryResponse=o5e;LA.throttlingRetryStrategy=s5e;var n5e=gL(),yL="Retry-After",i5e=["retry-after-ms","x-ms-retry-after-ms",yL];function Woe(t){if(t&&[429,503].includes(t.status))try{for(let s of i5e){let a=(0,n5e.parseHeaderValueAsNumber)(t,s);if(a===0||a)return a*(s===yL?1e3:1)}let e=t.headers.get(yL);if(!e)return;let n=Date.parse(e)-Date.now();return Number.isFinite(n)?Math.max(0,n):void 0}catch{return}}function o5e(t){return Number.isFinite(Woe(t))}function s5e(){return {name:"throttlingRetryStrategy",retry({response:t}){let e=Woe(t);return Number.isFinite(e)?{retryAfterInMs:e}:{skipStrategy:true}}}}});var wA=f(zh=>{Object.defineProperty(zh,"__esModule",{value:true});zh.exponentialRetryStrategy=d5e;zh.isExponentialRetryResponse=Xoe;zh.isSystemError=Qoe;var a5e=SL(),c5e=DA(),u5e=1e3,l5e=1e3*64;function d5e(t={}){var e,r;let n=(e=t.retryDelayInMs)!==null&&e!==void 0?e:u5e,s=(r=t.maxRetryDelayInMs)!==null&&r!==void 0?r:l5e;return {name:"exponentialRetryStrategy",retry({retryCount:a,response:o,responseError:i}){let c=Qoe(i),u=c&&t.ignoreSystemErrors,l=Xoe(o),d=l&&t.ignoreHttpStatusCodes;return o&&((0, c5e.isThrottlingRetryResponse)(o)||!l)||d||u?{skipStrategy:true}:i&&!c&&!l?{errorToThrow:i}:(0, a5e.calculateRetryDelay)(a,{retryDelayInMs:n,maxRetryDelayInMs:s})}}}function Xoe(t){return !!(t&&t.status!==void 0&&(t.status>=500||t.status===408)&&t.status!==501&&t.status!==505)}function Qoe(t){return t?t.code==="ETIMEDOUT"||t.code==="ESOCKETTIMEDOUT"||t.code==="ECONNREFUSED"||t.code==="ECONNRESET"||t.code==="ENOENT"||t.code==="ENOTFOUND":false}});var Wl=f(AL=>{Object.defineProperty(AL,"__esModule",{value:true});AL.retryPolicy=E5e;var p5e=gL(),f5e=Bh(),h5e=xh(),Joe=Sc(),_5e=(0, h5e.createClientLogger)("ts-http-runtime retryPolicy"),m5e="retryPolicy";function E5e(t,e={maxRetries:Joe.DEFAULT_RETRY_POLICY_COUNT}){let r=e.logger||_5e;return {name:m5e,async sendRequest(n,s){var a,o;let i,c,u=-1;e:for(;;){u+=1,i=void 0,c=void 0;try{r.info(`Retry ${u}: Attempting to send request`,n.requestId),i=await s(n),r.info(`Retry ${u}: Received a response from request`,n.requestId);}catch(l){if(r.error(`Retry ${u}: Received an error from request`,n.requestId),c=l,!l||c.name!=="RestError")throw l;i=c.response;}if(!((a=n.abortSignal)===null||a===void 0)&&a.aborted)throw r.error(`Retry ${u}: Request aborted.`),new f5e.AbortError;if(u>=((o=e.maxRetries)!==null&&o!==void 0?o:Joe.DEFAULT_RETRY_POLICY_COUNT)){if(r.info(`Retry ${u}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),c)throw c;if(i)return i;throw new Error("Maximum retries reached with no response or error to throw")}r.info(`Retry ${u}: Processing ${t.length} retry strategies.`);t:for(let l of t){let d=l.logger||r;d.info(`Retry ${u}: Processing retry strategy ${l.name}.`);let p=l.retry({retryCount:u,response:i,responseError:c});if(p.skipStrategy){d.info(`Retry ${u}: Skipped.`);continue t}let{errorToThrow:h,retryAfterInMs:T,redirectTo:g}=p;if(h)throw d.error(`Retry ${u}: Retry strategy ${l.name} throws error:`,h),h;if(T||T===0){d.info(`Retry ${u}: Retry strategy ${l.name} retries after ${T}`),await(0, p5e.delay)(T,void 0,{abortSignal:n.abortSignal});continue e}if(g){d.info(`Retry ${u}: Retry strategy ${l.name} redirects to ${g}`),n.url=g;continue e}}if(c)throw r.info("None of the retry strategies could work with the received error. Throwing it."),c;if(i)return r.info("None of the retry strategies could work with the received response. Returning it."),i}}}}});var RL=f(Xl=>{Object.defineProperty(Xl,"__esModule",{value:true});Xl.defaultRetryPolicyName=void 0;Xl.defaultRetryPolicy=A5e;var T5e=wA(),S5e=DA(),g5e=Wl(),y5e=Sc();Xl.defaultRetryPolicyName="defaultRetryPolicy";function A5e(t={}){var e;return {name:Xl.defaultRetryPolicyName,sendRequest:(0, g5e.retryPolicy)([(0, S5e.throttlingRetryStrategy)(),(0, T5e.exponentialRetryStrategy)(t)],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:y5e.DEFAULT_RETRY_POLICY_COUNT}).sendRequest}}});var Yh=f(Xt=>{var vL,OL,NL,CL;Object.defineProperty(Xt,"__esModule",{value:true});Xt.isReactNative=Xt.isNodeRuntime=Xt.isNodeLike=Xt.isBun=Xt.isDeno=Xt.isWebWorker=Xt.isBrowser=void 0;Xt.isBrowser=typeof window<"u"&&typeof window.document<"u";Xt.isWebWorker=typeof self=="object"&&typeof self?.importScripts=="function"&&(((vL=self.constructor)===null||vL===void 0?void 0:vL.name)==="DedicatedWorkerGlobalScope"||((OL=self.constructor)===null||OL===void 0?void 0:OL.name)==="ServiceWorkerGlobalScope"||((NL=self.constructor)===null||NL===void 0?void 0:NL.name)==="SharedWorkerGlobalScope");Xt.isDeno=typeof Deno<"u"&&typeof Deno.version<"u"&&typeof Deno.version.deno<"u";Xt.isBun=typeof Bun<"u"&&typeof Bun.version<"u";Xt.isNodeLike=typeof globalThis.process<"u"&&!!globalThis.process.version&&!!(!((CL=globalThis.process.versions)===null||CL===void 0)&&CL.node);Xt.isNodeRuntime=Xt.isNodeLike&&!Xt.isBun&&!Xt.isDeno;Xt.isReactNative=typeof navigator<"u"&&navigator?.product==="ReactNative";});var PL=f(Ql=>{Object.defineProperty(Ql,"__esModule",{value:true});Ql.formDataPolicyName=void 0;Ql.formDataPolicy=N5e;var R5e=Tc(),v5e=Yh(),Zoe=zs();Ql.formDataPolicyName="formDataPolicy";function O5e(t){var e;let r={};for(let[n,s]of t.entries())(e=r[n])!==null&&e!==void 0||(r[n]=[]),r[n].push(s);return r}function N5e(){return {name:Ql.formDataPolicyName,async sendRequest(t,e){if(v5e.isNodeLike&&typeof FormData<"u"&&t.body instanceof FormData&&(t.formData=O5e(t.body),t.body=void 0),t.formData){let r=t.headers.get("Content-Type");r&&r.indexOf("application/x-www-form-urlencoded")!==-1?t.body=C5e(t.formData):await P5e(t.formData,t),t.formData=void 0;}return e(t)}}}function C5e(t){let e=new URLSearchParams;for(let[r,n]of Object.entries(t))if(Array.isArray(n))for(let s of n)e.append(r,s.toString());else e.append(r,n.toString());return e.toString()}async function P5e(t,e){let r=e.headers.get("Content-Type");if(r&&!r.startsWith("multipart/form-data"))return;e.headers.set("Content-Type",r??"multipart/form-data");let n=[];for(let[s,a]of Object.entries(t))for(let o of Array.isArray(a)?a:[a])if(typeof o=="string")n.push({headers:(0, Zoe.createHttpHeaders)({"Content-Disposition":`form-data; name="${s}"`}),body:(0, R5e.stringToUint8Array)(o,"utf-8")});else {if(o==null||typeof o!="object")throw new Error(`Unexpected value for key ${s}: ${o}. Value should be serialized to string first.`);{let i=o.name||"blob",c=(0, Zoe.createHttpHeaders)();c.set("Content-Disposition",`form-data; name="${s}"; filename="${i}"`),c.set("Content-Type",o.type||"application/octet-stream"),n.push({headers:c,body:o});}}e.multipartBody={parts:n};}});var rse=f(cn=>{var b5e=cn&&cn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:true,get:function(){return e[r]}}),Object.defineProperty(t,n,s);}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r];}),M5e=cn&&cn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e});}:function(t,e){t.default=e;}),ese=cn&&cn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&b5e(e,t,r);return M5e(e,t),e};Object.defineProperty(cn,"__esModule",{value:true});cn.req=cn.json=cn.toBuffer=void 0;var I5e=ese(P("http")),x5e=ese(P("https"));async function tse(t){let e=0,r=[];for await(let n of t)e+=n.length,r.push(n);return Buffer.concat(r,e)}cn.toBuffer=tse;async function L5e(t){let r=(await tse(t)).toString("utf8");try{return JSON.parse(r)}catch(n){let s=n;throw s.message+=` (input: ${r})`,s}}cn.json=L5e;function D5e(t,e={}){let n=((typeof t=="string"?t:t.href).startsWith("https:")?x5e:I5e).request(t,e),s=new Promise((a,o)=>{n.once("response",a).once("error",o).end();});return n.then=s.then.bind(s),n}cn.req=D5e;});var ML=f(Rn=>{var ise=Rn&&Rn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:true,get:function(){return e[r]}}),Object.defineProperty(t,n,s);}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r];}),w5e=Rn&&Rn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e});}:function(t,e){t.default=e;}),ose=Rn&&Rn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ise(e,t,r);return w5e(e,t),e},U5e=Rn&&Rn.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&ise(e,t,r);};Object.defineProperty(Rn,"__esModule",{value:true});Rn.Agent=void 0;var k5e=ose(P("net")),nse=ose(P("http")),V5e=P("https");U5e(rse(),Rn);var ao=Symbol("AgentBaseInternalState"),bL=class extends nse.Agent{constructor(e){super(e),this[ao]={};}isSecureEndpoint(e){if(e){if(typeof e.secureEndpoint=="boolean")return e.secureEndpoint;if(typeof e.protocol=="string")return e.protocol==="https:"}let{stack:r}=new Error;return typeof r!="string"?false:r.split(`
`).some(n=>n.indexOf("(https.js:")!==-1||n.indexOf("node:https:")!==-1)}incrementSockets(e){if(this.maxSockets===1/0&&this.maxTotalSockets===1/0)return null;this.sockets[e]||(this.sockets[e]=[]);let r=new k5e.Socket({writable:false});return this.sockets[e].push(r),this.totalSocketCount++,r}decrementSockets(e,r){if(!this.sockets[e]||r===null)return;let n=this.sockets[e],s=n.indexOf(r);s!==-1&&(n.splice(s,1),this.totalSocketCount--,n.length===0&&delete this.sockets[e]);}getName(e){return this.isSecureEndpoint(e)?V5e.Agent.prototype.getName.call(this,e):super.getName(e)}createSocket(e,r,n){let s={...r,secureEndpoint:this.isSecureEndpoint(r)},a=this.getName(s),o=this.incrementSockets(a);Promise.resolve().then(()=>this.connect(e,s)).then(i=>{if(this.decrementSockets(a,o),i instanceof nse.Agent)try{return i.addRequest(e,s)}catch(c){return n(c)}this[ao].currentSocket=i,super.createSocket(e,r,n);},i=>{this.decrementSockets(a,o),n(i);});}createConnection(){let e=this[ao].currentSocket;if(this[ao].currentSocket=void 0,!e)throw new Error("No socket was returned in the `connect()` function");return e}get defaultPort(){return this[ao].defaultPort??(this.protocol==="https:"?443:80)}set defaultPort(e){this[ao]&&(this[ao].defaultPort=e);}get protocol(){return this[ao].protocol??(this.isSecureEndpoint()?"https:":"http:")}set protocol(e){this[ao]&&(this[ao].protocol=e);}};Rn.Agent=bL;});var sse=f(Jl=>{var B5e=Jl&&Jl.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Jl,"__esModule",{value:true});Jl.parseProxyResponse=void 0;var F5e=B5e(uf()),UA=(0, F5e.default)("https-proxy-agent:parse-proxy-response");function q5e(t){return new Promise((e,r)=>{let n=0,s=[];function a(){let l=t.read();l?u(l):t.once("readable",a);}function o(){t.removeListener("end",i),t.removeListener("error",c),t.removeListener("readable",a);}function i(){o(),UA("onend"),r(new Error("Proxy connection ended before receiving CONNECT response"));}function c(l){o(),UA("onerror %o",l),r(l);}function u(l){s.push(l),n+=l.length;let d=Buffer.concat(s,n),p=d.indexOf(`\r
\r
`);if(p===-1){UA("have not received end of HTTP headers yet..."),a();return}let h=d.slice(0,p).toString("ascii").split(`\r
`),T=h.shift();if(!T)return t.destroy(),r(new Error("No header received from proxy CONNECT response"));let g=T.split(" "),y=+g[1],R=g.slice(2).join(" "),b={};for(let w of h){if(!w)continue;let v=w.indexOf(":");if(v===-1)return t.destroy(),r(new Error(`Invalid header from proxy CONNECT response: "${w}"`));let V=w.slice(0,v).toLowerCase(),B=w.slice(v+1).trimStart(),F=b[V];typeof F=="string"?b[V]=[F,B]:Array.isArray(F)?F.push(B):b[V]=B;}UA("got proxy server response: %o %o",T,b),o(),e({connect:{statusCode:y,statusText:R,headers:b},buffered:d});}t.on("error",c),t.on("end",i),a();})}Jl.parseProxyResponse=q5e;});var pse=f(Kn=>{var H5e=Kn&&Kn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:true,get:function(){return e[r]}}),Object.defineProperty(t,n,s);}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r];}),G5e=Kn&&Kn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e});}:function(t,e){t.default=e;}),lse=Kn&&Kn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&H5e(e,t,r);return G5e(e,t),e},dse=Kn&&Kn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Kn,"__esModule",{value:true});Kn.HttpsProxyAgent=void 0;var kA=lse(P("net")),ase=lse(P("tls")),j5e=dse(P("assert")),z5e=dse(uf()),Y5e=ML(),$5e=P("url"),K5e=sse(),$h=(0, z5e.default)("https-proxy-agent"),cse=t=>t.servername===void 0&&t.host&&!kA.isIP(t.host)?{...t,servername:t.host}:t,VA=class extends Y5e.Agent{constructor(e,r){super(r),this.options={path:void 0},this.proxy=typeof e=="string"?new $5e.URL(e):e,this.proxyHeaders=r?.headers??{},$h("Creating new HttpsProxyAgent instance: %o",this.proxy.href);let n=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),s=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={ALPNProtocols:["http/1.1"],...r?use(r,"headers"):null,host:n,port:s};}async connect(e,r){let{proxy:n}=this;if(!r.host)throw new TypeError('No "host" provided');let s;n.protocol==="https:"?($h("Creating `tls.Socket`: %o",this.connectOpts),s=ase.connect(cse(this.connectOpts))):($h("Creating `net.Socket`: %o",this.connectOpts),s=kA.connect(this.connectOpts));let a=typeof this.proxyHeaders=="function"?this.proxyHeaders():{...this.proxyHeaders},o=kA.isIPv6(r.host)?`[${r.host}]`:r.host,i=`CONNECT ${o}:${r.port} HTTP/1.1\r
`;if(n.username||n.password){let p=`${decodeURIComponent(n.username)}:${decodeURIComponent(n.password)}`;a["Proxy-Authorization"]=`Basic ${Buffer.from(p).toString("base64")}`;}a.Host=`${o}:${r.port}`,a["Proxy-Connection"]||(a["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(let p of Object.keys(a))i+=`${p}: ${a[p]}\r
`;let c=(0, K5e.parseProxyResponse)(s);s.write(`${i}\r
`);let{connect:u,buffered:l}=await c;if(e.emit("proxyConnect",u),this.emit("proxyConnect",u,e),u.statusCode===200)return e.once("socket",W5e),r.secureEndpoint?($h("Upgrading socket connection to TLS"),ase.connect({...use(cse(r),"host","path","port"),socket:s})):s;s.destroy();let d=new kA.Socket({writable:false});return d.readable=true,e.once("socket",p=>{$h("Replaying proxy buffer for failed request"),(0, j5e.default)(p.listenerCount("data")>0),p.push(l),p.push(null);}),d}};VA.protocols=["http","https"];Kn.HttpsProxyAgent=VA;function W5e(t){t.resume();}function use(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}});var _se=f(Wn=>{var X5e=Wn&&Wn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:true,get:function(){return e[r]}}),Object.defineProperty(t,n,s);}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r];}),Q5e=Wn&&Wn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e});}:function(t,e){t.default=e;}),hse=Wn&&Wn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&X5e(e,t,r);return Q5e(e,t),e},J5e=Wn&&Wn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Wn,"__esModule",{value:true});Wn.HttpProxyAgent=void 0;var Z5e=hse(P("net")),eXe=hse(P("tls")),tXe=J5e(uf()),rXe=P("events"),nXe=ML(),fse=P("url"),Zl=(0, tXe.default)("http-proxy-agent"),BA=class extends nXe.Agent{constructor(e,r){super(r),this.proxy=typeof e=="string"?new fse.URL(e):e,this.proxyHeaders=r?.headers??{},Zl("Creating new HttpProxyAgent instance: %o",this.proxy.href);let n=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),s=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={...r?iXe(r,"headers"):null,host:n,port:s};}addRequest(e,r){e._header=null,this.setRequestProps(e,r),super.addRequest(e,r);}setRequestProps(e,r){let{proxy:n}=this,s=r.secureEndpoint?"https:":"http:",a=e.getHeader("host")||"localhost",o=`${s}//${a}`,i=new fse.URL(e.path,o);r.port!==80&&(i.port=String(r.port)),e.path=String(i);let c=typeof this.proxyHeaders=="function"?this.proxyHeaders():{...this.proxyHeaders};if(n.username||n.password){let u=`${decodeURIComponent(n.username)}:${decodeURIComponent(n.password)}`;c["Proxy-Authorization"]=`Basic ${Buffer.from(u).toString("base64")}`;}c["Proxy-Connection"]||(c["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(let u of Object.keys(c)){let l=c[u];l&&e.setHeader(u,l);}}async connect(e,r){e._header=null,e.path.includes("://")||this.setRequestProps(e,r);let n,s;Zl("Regenerating stored HTTP header string for request"),e._implicitHeader(),e.outputData&&e.outputData.length>0&&(Zl("Patching connection write() output buffer with updated header"),n=e.outputData[0].data,s=n.indexOf(`\r
\r
`)+4,e.outputData[0].data=e._header+n.substring(s),Zl("Output buffer: %o",e.outputData[0].data));let a;return this.proxy.protocol==="https:"?(Zl("Creating `tls.Socket`: %o",this.connectOpts),a=eXe.connect(this.connectOpts)):(Zl("Creating `net.Socket`: %o",this.connectOpts),a=Z5e.connect(this.connectOpts)),await(0, rXe.once)(a,"connect"),a}};BA.protocols=["http","https"];Wn.HttpProxyAgent=BA;function iXe(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}});var IL=f(Xn=>{Object.defineProperty(Xn,"__esModule",{value:true});Xn.globalNoProxyList=Xn.proxyPolicyName=void 0;Xn.loadNoProxy=gse;Xn.getDefaultProxySettings=hXe;Xn.proxyPolicy=mXe;var oXe=pse(),sXe=_se(),aXe=Hh(),cXe="HTTPS_PROXY",uXe="HTTP_PROXY",lXe="ALL_PROXY",dXe="NO_PROXY";Xn.proxyPolicyName="proxyPolicy";Xn.globalNoProxyList=[];var Tse=false,pXe=new Map;function FA(t){if(process.env[t])return process.env[t];if(process.env[t.toLowerCase()])return process.env[t.toLowerCase()]}function Sse(){if(!process)return;let t=FA(cXe),e=FA(lXe),r=FA(uXe);return t||e||r}function fXe(t,e,r){if(e.length===0)return  false;let n=new URL(t).hostname;if(r?.has(n))return r.get(n);let s=false;for(let a of e)a[0]==="."?(n.endsWith(a)||n.length===a.length-1&&n===a.slice(1))&&(s=true):n===a&&(s=true);return r?.set(n,s),s}function gse(){let t=FA(dXe);return Tse=true,t?t.split(",").map(e=>e.trim()).filter(e=>e.length):[]}function hXe(t){if(!t&&(t=Sse(),!t))return;let e=new URL(t);return {host:(e.protocol?e.protocol+"//":"")+e.hostname,port:Number.parseInt(e.port||"80"),username:e.username,password:e.password}}function _Xe(){let t=Sse();return t?new URL(t):void 0}function mse(t){let e;try{e=new URL(t.host);}catch{throw new Error(`Expecting a valid host string in proxy settings, but found "${t.host}".`)}return e.port=String(t.port),t.username&&(e.username=t.username),t.password&&(e.password=t.password),e}function Ese(t,e,r){if(t.agent)return;let s=new URL(t.url).protocol!=="https:";t.tlsSettings&&aXe.logger.warning("TLS settings are not supported in combination with custom Proxy, certificates provided to the client will be ignored.");let a=t.headers.toJSON();s?(e.httpProxyAgent||(e.httpProxyAgent=new sXe.HttpProxyAgent(r,{headers:a})),t.agent=e.httpProxyAgent):(e.httpsProxyAgent||(e.httpsProxyAgent=new oXe.HttpsProxyAgent(r,{headers:a})),t.agent=e.httpsProxyAgent);}function mXe(t,e){Tse||Xn.globalNoProxyList.push(...gse());let r=t?mse(t):_Xe(),n={};return {name:Xn.proxyPolicyName,async sendRequest(s,a){var o;return !s.proxySettings&&r&&!fXe(s.url,(o=e?.customNoProxyList)!==null&&o!==void 0?o:Xn.globalNoProxyList,e?.customNoProxyList?void 0:pXe)?Ese(s,n,r):s.proxySettings&&Ese(s,n,mse(s.proxySettings)),a(s)}}}});var xL=f(ed=>{Object.defineProperty(ed,"__esModule",{value:true});ed.agentPolicyName=void 0;ed.agentPolicy=EXe;ed.agentPolicyName="agentPolicy";function EXe(t){return {name:ed.agentPolicyName,sendRequest:async(e,r)=>(e.agent||(e.agent=t),r(e))}}});var LL=f(td=>{Object.defineProperty(td,"__esModule",{value:true});td.tlsPolicyName=void 0;td.tlsPolicy=TXe;td.tlsPolicyName="tlsPolicy";function TXe(t){return {name:td.tlsPolicyName,sendRequest:async(e,r)=>(e.tlsSettings||(e.tlsSettings=t),r(e))}}});var Kh=f(gc=>{Object.defineProperty(gc,"__esModule",{value:true});gc.isNodeReadableStream=yse;gc.isWebReadableStream=Ase;gc.isBinaryBody=SXe;gc.isReadableStream=Rse;gc.isBlob=gXe;function yse(t){return !!(t&&typeof t.pipe=="function")}function Ase(t){return !!(t&&typeof t.getReader=="function"&&typeof t.tee=="function")}function SXe(t){return t!==void 0&&(t instanceof Uint8Array||Rse(t)||typeof t=="function"||t instanceof Blob)}function Rse(t){return yse(t)||Ase(t)}function gXe(t){return typeof t.stream=="function"}});var Nse=f(wL=>{Object.defineProperty(wL,"__esModule",{value:true});wL.concat=vXe;var Fo=(Ce(),A(Ne)),DL=P("stream"),yXe=Kh();function vse(){return Fo.__asyncGenerator(this,arguments,function*(){let e=this.getReader();try{for(;;){let{done:r,value:n}=yield Fo.__await(e.read());if(r)return yield Fo.__await(void 0);yield yield Fo.__await(n);}}finally{e.releaseLock();}})}function AXe(t){t[Symbol.asyncIterator]||(t[Symbol.asyncIterator]=vse.bind(t)),t.values||(t.values=vse.bind(t));}function Ose(t){return t instanceof ReadableStream?(AXe(t),DL.Readable.fromWeb(t)):t}function RXe(t){return t instanceof Uint8Array?DL.Readable.from(Buffer.from(t)):(0, yXe.isBlob)(t)?Ose(t.stream()):Ose(t)}async function vXe(t){return function(){let e=t.map(r=>typeof r=="function"?r():r).map(RXe);return DL.Readable.from(function(){return Fo.__asyncGenerator(this,arguments,function*(){var r,n,s,a;for(let u of e)try{for(var o=!0,i=(n=void 0,Fo.__asyncValues(u)),c;c=yield Fo.__await(i.next()),r=c.done,!r;o=!0){a=c.value,o=!1;let l=a;yield yield Fo.__await(l);}}catch(l){n={error:l};}finally{try{!o&&!r&&(s=i.return)&&(yield Fo.__await(s.call(i)));}finally{if(n)throw n.error}}})}())}}});var UL=f(nd=>{Object.defineProperty(nd,"__esModule",{value:true});nd.multipartPolicyName=void 0;nd.multipartPolicy=UXe;var rd=Tc(),OXe=Kh(),NXe=AA(),CXe=Nse();function PXe(){return `----AzSDKFormBoundary${(0, NXe.randomUUID)()}`}function bXe(t){let e="";for(let[r,n]of t)e+=`${r}: ${n}\r
`;return e}function MXe(t){return t instanceof Uint8Array?t.byteLength:(0, OXe.isBlob)(t)?t.size===-1?void 0:t.size:void 0}function IXe(t){let e=0;for(let r of t){let n=MXe(r);if(n===void 0)return;e+=n;}return e}async function xXe(t,e,r){let n=[(0, rd.stringToUint8Array)(`--${r}`,"utf-8"),...e.flatMap(a=>[(0, rd.stringToUint8Array)(`\r
`,"utf-8"),(0, rd.stringToUint8Array)(bXe(a.headers),"utf-8"),(0, rd.stringToUint8Array)(`\r
`,"utf-8"),a.body,(0, rd.stringToUint8Array)(`\r
--${r}`,"utf-8")]),(0, rd.stringToUint8Array)(`--\r
\r
`,"utf-8")],s=IXe(n);s&&t.headers.set("Content-Length",s),t.body=await(0, CXe.concat)(n);}nd.multipartPolicyName="multipartPolicy";var LXe=70,DXe=new Set("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'()+,-./:=?");function wXe(t){if(t.length>LXe)throw new Error(`Multipart boundary "${t}" exceeds maximum length of 70 characters`);if(Array.from(t).some(e=>!DXe.has(e)))throw new Error(`Multipart boundary "${t}" contains invalid characters`)}function UXe(){return {name:nd.multipartPolicyName,async sendRequest(t,e){var r;if(!t.multipartBody)return e(t);if(t.body)throw new Error("multipartBody and regular body cannot be set at the same time");let n=t.multipartBody.boundary,s=(r=t.headers.get("Content-Type"))!==null&&r!==void 0?r:"multipart/mixed",a=s.match(/^(multipart\/[^ ;]+)(?:; *boundary=(.+))?$/);if(!a)throw new Error(`Got multipart request body, but content-type header was not multipart: ${s}`);let[,o,i]=a;if(i&&n&&i!==n)throw new Error(`Multipart boundary was specified as ${i} in the header, but got ${n} in the request body`);return n??(n=i),n?wXe(n):n=PXe(),t.headers.set("Content-Type",`${o}; boundary=${n}`),await xXe(t,t.multipartBody.parts,n),t.multipartBody=void 0,e(t)}}}});var bse=f(kL=>{Object.defineProperty(kL,"__esModule",{value:true});kL.createPipelineFromOptions=$Xe;var kXe=lL(),VXe=Jx(),BXe=dL(),FXe=hL(),qXe=_L(),HXe=RL(),GXe=PL(),Cse=Yh(),jXe=IL(),zXe=xL(),YXe=LL(),Pse=UL();function $Xe(t){let e=(0, VXe.createEmptyPipeline)();return Cse.isNodeLike&&(t.agent&&e.addPolicy((0, zXe.agentPolicy)(t.agent)),t.tlsOptions&&e.addPolicy((0, YXe.tlsPolicy)(t.tlsOptions)),e.addPolicy((0, jXe.proxyPolicy)(t.proxyOptions)),e.addPolicy((0, qXe.decompressResponsePolicy)())),e.addPolicy((0, GXe.formDataPolicy)(),{beforePolicies:[Pse.multipartPolicyName]}),e.addPolicy((0, FXe.userAgentPolicy)(t.userAgentOptions)),e.addPolicy((0, Pse.multipartPolicy)(),{afterPhase:"Deserialize"}),e.addPolicy((0, HXe.defaultRetryPolicy)(t.retryOptions),{phase:"Retry"}),Cse.isNodeLike&&e.addPolicy((0, BXe.redirectPolicy)(t.redirectOptions),{afterPhase:"Retry"}),e.addPolicy((0, kXe.logPolicy)(t.loggingOptions),{afterPhase:"Sign"}),e}});var Mse=f(id=>{Object.defineProperty(id,"__esModule",{value:true});id.apiVersionPolicyName=void 0;id.apiVersionPolicy=KXe;id.apiVersionPolicyName="ApiVersionPolicy";function KXe(t){return {name:id.apiVersionPolicyName,sendRequest:(e,r)=>{let n=new URL(e.url);return !n.searchParams.get("api-version")&&t.apiVersion&&(e.url=`${e.url}${Array.from(n.searchParams.keys()).length>0?"&":"?"}api-version=${t.apiVersion}`),r(e)}}}});var Ise=f(od=>{Object.defineProperty(od,"__esModule",{value:true});od.isOAuth2TokenCredential=WXe;od.isBearerTokenCredential=XXe;od.isBasicCredential=QXe;od.isApiKeyCredential=JXe;function WXe(t){return "getOAuth2Token"in t}function XXe(t){return "getBearerToken"in t}function QXe(t){return "username"in t&&"password"in t}function JXe(t){return "key"in t}});var Wh=f(VL=>{Object.defineProperty(VL,"__esModule",{value:true});VL.ensureSecureConnection=r9e;var ZXe=Hh(),xse=false;function e9e(t,e){if(e.allowInsecureConnection&&t.allowInsecureConnection){let r=new URL(t.url);if(r.hostname==="localhost"||r.hostname==="127.0.0.1")return  true}return  false}function t9e(){let t="Sending token over insecure transport. Assume any token issued is compromised.";ZXe.logger.warning(t),typeof(process==null?void 0:process.emitWarning)=="function"&&!xse&&(xse=true,process.emitWarning(t));}function r9e(t,e){if(!t.url.toLowerCase().startsWith("https://"))if(e9e(t,e))t9e();else throw new Error("Authentication is not permitted for non-TLS protected (non-https) URLs when allowInsecureConnection is false.")}});var Lse=f(sd=>{Object.defineProperty(sd,"__esModule",{value:true});sd.apiKeyAuthenticationPolicyName=void 0;sd.apiKeyAuthenticationPolicy=i9e;var n9e=Wh();sd.apiKeyAuthenticationPolicyName="apiKeyAuthenticationPolicy";function i9e(t){return {name:sd.apiKeyAuthenticationPolicyName,async sendRequest(e,r){var n,s;(0, n9e.ensureSecureConnection)(e,t);let a=(s=(n=e.authSchemes)!==null&&n!==void 0?n:t.authSchemes)===null||s===void 0?void 0:s.find(o=>o.kind==="apiKey");if(!a)return r(e);if(a.apiKeyLocation!=="header")throw new Error(`Unsupported API key location: ${a.apiKeyLocation}`);return e.headers.set(a.name,t.credential.key),r(e)}}}});var wse=f(ad=>{Object.defineProperty(ad,"__esModule",{value:true});ad.basicAuthenticationPolicyName=void 0;ad.basicAuthenticationPolicy=s9e;var Dse=Tc(),o9e=Wh();ad.basicAuthenticationPolicyName="bearerAuthenticationPolicy";function s9e(t){return {name:ad.basicAuthenticationPolicyName,async sendRequest(e,r){var n,s;if((0, o9e.ensureSecureConnection)(e,t),!((s=(n=e.authSchemes)!==null&&n!==void 0?n:t.authSchemes)===null||s===void 0?void 0:s.find(u=>u.kind==="http"&&u.scheme==="basic")))return r(e);let{username:o,password:i}=t.credential,c=(0, Dse.uint8ArrayToString)((0, Dse.stringToUint8Array)(`${o}:${i}`,"utf-8"),"base64");return e.headers.set("Authorization",`Basic ${c}`),r(e)}}}});var Use=f(cd=>{Object.defineProperty(cd,"__esModule",{value:true});cd.bearerAuthenticationPolicyName=void 0;cd.bearerAuthenticationPolicy=c9e;var a9e=Wh();cd.bearerAuthenticationPolicyName="bearerAuthenticationPolicy";function c9e(t){return {name:cd.bearerAuthenticationPolicyName,async sendRequest(e,r){var n,s;if((0, a9e.ensureSecureConnection)(e,t),!((s=(n=e.authSchemes)!==null&&n!==void 0?n:t.authSchemes)===null||s===void 0?void 0:s.find(i=>i.kind==="http"&&i.scheme==="bearer")))return r(e);let o=await t.credential.getBearerToken({abortSignal:e.abortSignal});return e.headers.set("Authorization",`Bearer ${o}`),r(e)}}}});var kse=f(ud=>{Object.defineProperty(ud,"__esModule",{value:true});ud.oauth2AuthenticationPolicyName=void 0;ud.oauth2AuthenticationPolicy=l9e;var u9e=Wh();ud.oauth2AuthenticationPolicyName="oauth2AuthenticationPolicy";function l9e(t){return {name:ud.oauth2AuthenticationPolicyName,async sendRequest(e,r){var n,s;(0, u9e.ensureSecureConnection)(e,t);let a=(s=(n=e.authSchemes)!==null&&n!==void 0?n:t.authSchemes)===null||s===void 0?void 0:s.find(i=>i.kind==="oauth2");if(!a)return r(e);let o=await t.credential.getOAuth2Token(a.flows,{abortSignal:e.abortSignal});return e.headers.set("Authorization",`Bearer ${o}`),r(e)}}}});var FL=f(HA=>{Object.defineProperty(HA,"__esModule",{value:true});HA.createDefaultPipeline=T9e;HA.getCachedDefaultHttpsClient=S9e;var d9e=uL(),p9e=bse(),f9e=Mse(),qA=Ise(),h9e=Lse(),_9e=wse(),m9e=Use(),E9e=kse(),BL;function T9e(t={}){let e=(0, p9e.createPipelineFromOptions)(t);e.addPolicy((0, f9e.apiVersionPolicy)(t));let{credential:r,authSchemes:n,allowInsecureConnection:s}=t;return r&&((0, qA.isApiKeyCredential)(r)?e.addPolicy((0, h9e.apiKeyAuthenticationPolicy)({authSchemes:n,credential:r,allowInsecureConnection:s})):(0, qA.isBasicCredential)(r)?e.addPolicy((0, _9e.basicAuthenticationPolicy)({authSchemes:n,credential:r,allowInsecureConnection:s})):(0, qA.isBearerTokenCredential)(r)?e.addPolicy((0, m9e.bearerAuthenticationPolicy)({authSchemes:n,credential:r,allowInsecureConnection:s})):(0, qA.isOAuth2TokenCredential)(r)&&e.addPolicy((0, E9e.oauth2AuthenticationPolicy)({authSchemes:n,credential:r,allowInsecureConnection:s}))),e}function S9e(){return BL||(BL=(0, d9e.createDefaultHttpClient)()),BL}});var Gse=f(GA=>{Object.defineProperty(GA,"__esModule",{value:true});GA.buildBodyPart=Hse;GA.buildMultipartBody=O9e;var g9e=Hl(),y9e=zs(),Vse=Tc(),Fse=Kh();function qse(t,e){if(t.headers){let r=Object.keys(t.headers).find(n=>n.toLowerCase()===e.toLowerCase());if(r)return t.headers[r]}}function A9e(t){let e=qse(t,"content-type");if(e)return e;if(t.contentType===null)return;if(t.contentType)return t.contentType;let{body:r}=t;if(r!=null)return typeof r=="string"||typeof r=="number"||typeof r=="boolean"?"text/plain; charset=UTF-8":r instanceof Blob?r.type||"application/octet-stream":(0, Fse.isBinaryBody)(r)?"application/octet-stream":"application/json"}function Bse(t){return JSON.stringify(t)}function R9e(t){var e;let r=qse(t,"content-disposition");if(r)return r;if(t.dispositionType===void 0&&t.name===void 0&&t.filename===void 0)return;let s=(e=t.dispositionType)!==null&&e!==void 0?e:"form-data";t.name&&(s+=`; name=${Bse(t.name)}`);let a;if(t.filename)a=t.filename;else if(typeof File<"u"&&t.body instanceof File){let o=t.body.name;o!==""&&(a=o);}return a&&(s+=`; filename=${Bse(a)}`),s}function v9e(t,e){if(t===void 0)return new Uint8Array([]);if((0, Fse.isBinaryBody)(t))return t;if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")return (0, Vse.stringToUint8Array)(String(t),"utf-8");if(e&&/application\/(.+\+)?json(;.+)?/i.test(String(e)))return (0, Vse.stringToUint8Array)(JSON.stringify(t),"utf-8");throw new g9e.RestError(`Unsupported body/content-type combination: ${t}, ${e}`)}function Hse(t){var e;let r=A9e(t),n=R9e(t),s=(0, y9e.createHttpHeaders)((e=t.headers)!==null&&e!==void 0?e:{});r&&s.set("content-type",r),n&&s.set("content-disposition",n);let a=v9e(t.body,r);return {headers:s,body:a}}function O9e(t){return {parts:t.map(Hse)}}});var jse=f(HL=>{Object.defineProperty(HL,"__esModule",{value:true});HL.sendRequest=I9e;var qL=Hl(),N9e=zs(),C9e=Wx(),P9e=FL(),b9e=Kh(),M9e=Gse();async function I9e(t,e,r,n={},s){var a;let o=s??(0, P9e.getCachedDefaultHttpsClient)(),i=D9e(t,e,n);try{let c=await r.sendRequest(o,i),u=c.headers.toJSON(),l=(a=c.readableStreamBody)!==null&&a!==void 0?a:c.browserStreamBody,d=n.responseAsStream||l!==void 0?void 0:U9e(c),p=l??d;return n?.onResponse&&n.onResponse(Object.assign(Object.assign({},c),{request:i,rawHeaders:u,parsedBody:d})),{request:i,headers:u,status:`${c.status}`,body:p}}catch(c){if((0, qL.isRestError)(c)&&c.response&&n.onResponse){let{response:u}=c,l=u.headers.toJSON();n?.onResponse(Object.assign(Object.assign({},u),{request:i,rawHeaders:l}),c);}throw c}}function x9e(t={}){var e,r,n;return (n=(e=t.contentType)!==null&&e!==void 0?e:(r=t.headers)===null||r===void 0?void 0:r["content-type"])!==null&&n!==void 0?n:L9e(t.body)}function L9e(t){if(ArrayBuffer.isView(t))return "application/octet-stream";if(typeof t=="string")try{return JSON.parse(t),"application/json"}catch{return}return "application/json"}function D9e(t,e,r={}){var n,s,a;let o=x9e(r),{body:i,multipartBody:c}=w9e(r.body,o),u=i!==void 0||c!==void 0,l=(0, N9e.createHttpHeaders)(Object.assign(Object.assign(Object.assign({},r.headers?r.headers:{}),{accept:(a=(n=r.accept)!==null&&n!==void 0?n:(s=r.headers)===null||s===void 0?void 0:s.accept)!==null&&a!==void 0?a:"application/json"}),u&&o&&{"content-type":o}));return (0, C9e.createPipelineRequest)({url:e,method:t,body:i,multipartBody:c,headers:l,allowInsecureConnection:r.allowInsecureConnection,abortSignal:r.abortSignal,onUploadProgress:r.onUploadProgress,onDownloadProgress:r.onDownloadProgress,timeout:r.timeout,enableBrowserStreams:true,streamResponseStatusCodes:r.responseAsStream?new Set([Number.POSITIVE_INFINITY]):void 0})}function w9e(t,e=""){if(t===void 0)return {body:void 0};if(typeof FormData<"u"&&t instanceof FormData)return {body:t};if((0, b9e.isReadableStream)(t))return {body:t};if(ArrayBuffer.isView(t))return {body:t instanceof Uint8Array?t:JSON.stringify(t)};switch(e.split(";")[0]){case "application/json":return {body:JSON.stringify(t)};case "multipart/form-data":return Array.isArray(t)?{multipartBody:(0, M9e.buildMultipartBody)(t)}:{body:JSON.stringify(t)};case "text/plain":return {body:String(t)};default:return typeof t=="string"?{body:t}:{body:JSON.stringify(t)}}}function U9e(t){var e,r;let s=((e=t.headers.get("content-type"))!==null&&e!==void 0?e:"").split(";")[0],a=(r=t.bodyAsText)!==null&&r!==void 0?r:"";if(s==="text/plain")return String(a);try{return a?JSON.parse(a):void 0}catch(o){if(s==="application/json")throw k9e(t,o);return String(a)}}function k9e(t,e){var r;let n=`Error "${e}" occurred while parsing the response body - ${t.bodyAsText}.`,s=(r=e.code)!==null&&r!==void 0?r:qL.RestError.PARSE_ERROR;return new qL.RestError(n,{code:s,statusCode:t.status,request:t.request,response:t})}});var $se=f(Xh=>{Object.defineProperty(Xh,"__esModule",{value:true});Xh.buildRequestUrl=B9e;Xh.buildBaseUrl=zse;Xh.replaceAll=Yse;function V9e(t){let e=t.value;return e!==void 0&&e.toString!==void 0&&typeof e.toString=="function"}function B9e(t,e,r,n={}){if(e.startsWith("https://")||e.startsWith("http://"))return e;t=zse(t,n),e=q9e(e,r,n);let s=F9e(`${t}/${e}`,n);return new URL(s).toString().replace(/([^:]\/)\/+/g,"$1")}function GL(t,e,r,n){let s;r==="pipeDelimited"?s="|":r==="spaceDelimited"?s="%20":s=",";let a;Array.isArray(n)?a=n:typeof n=="object"&&n.toString===Object.prototype.toString?a=Object.entries(n).flat():a=[n];let o=a.map(i=>{if(i==null)return "";if(!i.toString||typeof i.toString!="function")throw new Error(`Query parameters must be able to be represented as string, ${t} can't`);let c=i.toISOString!==void 0?i.toISOString():i.toString();return e?c:encodeURIComponent(c)}).join(s);return `${e?t:encodeURIComponent(t)}=${o}`}function F9e(t,e={}){var r,n,s,a;if(!e.queryParameters)return t;let o=new URL(t),i=e.queryParameters,c=[];for(let u of Object.keys(i)){let l=i[u];if(l==null)continue;let d=V9e(l),p=d?l.value:l,h=d&&(r=l.explode)!==null&&r!==void 0?r:false,T=d&&l.style?l.style:"form";if(h)if(Array.isArray(p))for(let g of p)c.push(GL(u,(n=e.skipUrlEncoding)!==null&&n!==void 0?n:false,T,g));else if(typeof p=="object")for(let[g,y]of Object.entries(p))c.push(GL(g,(s=e.skipUrlEncoding)!==null&&s!==void 0?s:false,T,y));else throw new Error("explode can only be set to true for objects and arrays");else c.push(GL(u,(a=e.skipUrlEncoding)!==null&&a!==void 0?a:false,T,p));}return o.search!==""&&(o.search+="&"),o.search+=c.join("&"),o.toString()}function zse(t,e){var r;if(!e.pathParameters)return t;let n=e.pathParameters;for(let[s,a]of Object.entries(n)){if(a==null)throw new Error(`Path parameters ${s} must not be undefined or null`);if(!a.toString||typeof a.toString!="function")throw new Error(`Path parameters must be able to be represented as string, ${s} can't`);let o=a.toISOString!==void 0?a.toISOString():String(a);e.skipUrlEncoding||(o=encodeURIComponent(a)),t=(r=Yse(t,`{${s}}`,o))!==null&&r!==void 0?r:"";}return t}function q9e(t,e,r={}){var n;for(let s of e){let a=typeof s=="object"&&((n=s.allowReserved)!==null&&n!==void 0?n:false),o=typeof s=="object"?s.value:s;!r.skipUrlEncoding&&!a&&(o=encodeURIComponent(o)),t=t.replace(/\{[\w-]+\}/,String(o));}return t}function Yse(t,e,r){return !t||!e?t:t.split(e).join(r||"")}});var Wse=f(zL=>{Object.defineProperty(zL,"__esModule",{value:true});zL.getClient=j9e;var H9e=FL(),jL=jse(),G9e=$se(),Kse=Yh();function j9e(t,e={}){var r,n,s;let a=(r=e.pipeline)!==null&&r!==void 0?r:(0, H9e.createDefaultPipeline)(e);if(!((n=e.additionalPolicies)===null||n===void 0)&&n.length)for(let{policy:l,position:d}of e.additionalPolicies){let p=d==="perRetry"?"Sign":void 0;a.addPolicy(l,{afterPhase:p});}let{allowInsecureConnection:o,httpClient:i}=e,c=(s=e.endpoint)!==null&&s!==void 0?s:t,u=(l,...d)=>{let p=h=>(0, G9e.buildRequestUrl)(c,l,d,Object.assign({allowInsecureConnection:o},h));return {get:(h={})=>Ys("GET",p(h),a,h,o,i),post:(h={})=>Ys("POST",p(h),a,h,o,i),put:(h={})=>Ys("PUT",p(h),a,h,o,i),patch:(h={})=>Ys("PATCH",p(h),a,h,o,i),delete:(h={})=>Ys("DELETE",p(h),a,h,o,i),head:(h={})=>Ys("HEAD",p(h),a,h,o,i),options:(h={})=>Ys("OPTIONS",p(h),a,h,o,i),trace:(h={})=>Ys("TRACE",p(h),a,h,o,i)}};return {path:u,pathUnchecked:u,pipeline:a}}function Ys(t,e,r,n,s,a){var o;return s=(o=n.allowInsecureConnection)!==null&&o!==void 0?o:s,{then:function(i,c){return (0, jL.sendRequest)(t,e,r,Object.assign(Object.assign({},n),{allowInsecureConnection:s}),a).then(i,c)},async asBrowserStream(){if(Kse.isNodeLike)throw new Error("`asBrowserStream` is supported only in the browser environment. Use `asNodeStream` instead to obtain the response body stream. If you require a Web stream of the response in Node, consider using `Readable.toWeb` on the result of `asNodeStream`.");return (0, jL.sendRequest)(t,e,r,Object.assign(Object.assign({},n),{allowInsecureConnection:s,responseAsStream:true}),a)},async asNodeStream(){if(Kse.isNodeLike)return (0, jL.sendRequest)(t,e,r,Object.assign(Object.assign({},n),{allowInsecureConnection:s,responseAsStream:true}),a);throw new Error("`isNodeStream` is not supported in the browser environment. Use `asBrowserStream` to obtain the response body stream.")}}}});var Xse=f(YL=>{Object.defineProperty(YL,"__esModule",{value:true});YL.operationOptionsToRequestParameters=z9e;function z9e(t){var e,r,n,s,a,o;return {allowInsecureConnection:(e=t.requestOptions)===null||e===void 0?void 0:e.allowInsecureConnection,timeout:(r=t.requestOptions)===null||r===void 0?void 0:r.timeout,skipUrlEncoding:(n=t.requestOptions)===null||n===void 0?void 0:n.skipUrlEncoding,abortSignal:t.abortSignal,onUploadProgress:(s=t.requestOptions)===null||s===void 0?void 0:s.onUploadProgress,onDownloadProgress:(a=t.requestOptions)===null||a===void 0?void 0:a.onDownloadProgress,headers:Object.assign({},(o=t.requestOptions)===null||o===void 0?void 0:o.headers),onResponse:t.onResponse}}});var Jse=f($L=>{Object.defineProperty($L,"__esModule",{value:true});$L.createRestError=K9e;var Y9e=Hl(),$9e=zs();function K9e(t,e){var r,n,s;let a=typeof t=="string"?e:t,o=(n=(r=a.body)===null||r===void 0?void 0:r.error)!==null&&n!==void 0?n:a.body,i=typeof t=="string"?t:(s=o?.message)!==null&&s!==void 0?s:`Unexpected status code: ${a.status}`;return new Y9e.RestError(i,{statusCode:Qse(a.status),code:o?.code,request:a.request,response:W9e(a)})}function W9e(t){var e;return {headers:(0, $9e.createHttpHeaders)(t.headers),request:t.request,status:(e=Qse(t.status))!==null&&e!==void 0?e:-1}}function Qse(t){let e=Number.parseInt(t);return Number.isNaN(e)?void 0:e}});var ld=f(xe=>{Object.defineProperty(xe,"__esModule",{value:true});xe.createRestError=xe.operationOptionsToRequestParameters=xe.getClient=xe.createDefaultHttpClient=xe.uint8ArrayToString=xe.stringToUint8Array=xe.isRestError=xe.RestError=xe.createEmptyPipeline=xe.createPipelineRequest=xe.createHttpHeaders=xe.TypeSpecRuntimeLogger=xe.setLogLevel=xe.getLogLevel=xe.createClientLogger=xe.AbortError=void 0;var Zse=(Ce(),A(Ne)),X9e=Bh();Object.defineProperty(xe,"AbortError",{enumerable:true,get:function(){return X9e.AbortError}});var jA=xh();Object.defineProperty(xe,"createClientLogger",{enumerable:true,get:function(){return jA.createClientLogger}});Object.defineProperty(xe,"getLogLevel",{enumerable:true,get:function(){return jA.getLogLevel}});Object.defineProperty(xe,"setLogLevel",{enumerable:true,get:function(){return jA.setLogLevel}});Object.defineProperty(xe,"TypeSpecRuntimeLogger",{enumerable:true,get:function(){return jA.TypeSpecRuntimeLogger}});var Q9e=zs();Object.defineProperty(xe,"createHttpHeaders",{enumerable:true,get:function(){return Q9e.createHttpHeaders}});Zse.__exportStar(Moe(),xe);Zse.__exportStar(xoe(),xe);var J9e=Wx();Object.defineProperty(xe,"createPipelineRequest",{enumerable:true,get:function(){return J9e.createPipelineRequest}});var Z9e=Jx();Object.defineProperty(xe,"createEmptyPipeline",{enumerable:true,get:function(){return Z9e.createEmptyPipeline}});var eae=Hl();Object.defineProperty(xe,"RestError",{enumerable:true,get:function(){return eae.RestError}});Object.defineProperty(xe,"isRestError",{enumerable:true,get:function(){return eae.isRestError}});var tae=Tc();Object.defineProperty(xe,"stringToUint8Array",{enumerable:true,get:function(){return tae.stringToUint8Array}});Object.defineProperty(xe,"uint8ArrayToString",{enumerable:true,get:function(){return tae.uint8ArrayToString}});var eQe=uL();Object.defineProperty(xe,"createDefaultHttpClient",{enumerable:true,get:function(){return eQe.createDefaultHttpClient}});var tQe=Wse();Object.defineProperty(xe,"getClient",{enumerable:true,get:function(){return tQe.getClient}});var rQe=Xse();Object.defineProperty(xe,"operationOptionsToRequestParameters",{enumerable:true,get:function(){return rQe.operationOptionsToRequestParameters}});var nQe=Jse();Object.defineProperty(xe,"createRestError",{enumerable:true,get:function(){return nQe.createRestError}});});var WL=f(KL=>{Object.defineProperty(KL,"__esModule",{value:true});KL.createEmptyPipeline=oQe;var iQe=ld();function oQe(){return (0, iQe.createEmptyPipeline)()}});var Qh=f(zA=>{Object.defineProperty(zA,"__esModule",{value:true});zA.logger=void 0;var sQe=Ll();zA.logger=(0, sQe.createClientLogger)("core-rest-pipeline");});var rae=f(Jh=>{Object.defineProperty(Jh,"__esModule",{value:true});Jh.exponentialRetryPolicyName=void 0;Jh.exponentialRetryPolicy=lQe;var aQe=wA(),cQe=Wl(),uQe=Sc();Jh.exponentialRetryPolicyName="exponentialRetryPolicy";function lQe(t={}){var e;return (0, cQe.retryPolicy)([(0, aQe.exponentialRetryStrategy)(Object.assign(Object.assign({},t),{ignoreSystemErrors:true}))],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:uQe.DEFAULT_RETRY_POLICY_COUNT})}});var nae=f(dd=>{Object.defineProperty(dd,"__esModule",{value:true});dd.systemErrorRetryPolicyName=void 0;dd.systemErrorRetryPolicy=hQe;var dQe=wA(),pQe=Wl(),fQe=Sc();dd.systemErrorRetryPolicyName="systemErrorRetryPolicy";function hQe(t={}){var e;return {name:dd.systemErrorRetryPolicyName,sendRequest:(0, pQe.retryPolicy)([(0, dQe.exponentialRetryStrategy)(Object.assign(Object.assign({},t),{ignoreHttpStatusCodes:true}))],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:fQe.DEFAULT_RETRY_POLICY_COUNT}).sendRequest}}});var iae=f(pd=>{Object.defineProperty(pd,"__esModule",{value:true});pd.throttlingRetryPolicyName=void 0;pd.throttlingRetryPolicy=TQe;var _Qe=DA(),mQe=Wl(),EQe=Sc();pd.throttlingRetryPolicyName="throttlingRetryPolicy";function TQe(t={}){var e;return {name:pd.throttlingRetryPolicyName,sendRequest:(0, mQe.retryPolicy)([(0, _Qe.throttlingRetryStrategy)()],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:EQe.DEFAULT_RETRY_POLICY_COUNT}).sendRequest}}});var un=f(X=>{Object.defineProperty(X,"__esModule",{value:true});X.userAgentPolicyName=X.userAgentPolicy=X.tlsPolicyName=X.tlsPolicy=X.redirectPolicyName=X.redirectPolicy=X.getDefaultProxySettings=X.proxyPolicyName=X.proxyPolicy=X.multipartPolicyName=X.multipartPolicy=X.logPolicyName=X.logPolicy=X.formDataPolicyName=X.formDataPolicy=X.throttlingRetryPolicyName=X.throttlingRetryPolicy=X.systemErrorRetryPolicyName=X.systemErrorRetryPolicy=X.retryPolicy=X.exponentialRetryPolicyName=X.exponentialRetryPolicy=X.defaultRetryPolicyName=X.defaultRetryPolicy=X.decompressResponsePolicyName=X.decompressResponsePolicy=X.agentPolicyName=X.agentPolicy=void 0;var oae=xL();Object.defineProperty(X,"agentPolicy",{enumerable:true,get:function(){return oae.agentPolicy}});Object.defineProperty(X,"agentPolicyName",{enumerable:true,get:function(){return oae.agentPolicyName}});var sae=_L();Object.defineProperty(X,"decompressResponsePolicy",{enumerable:true,get:function(){return sae.decompressResponsePolicy}});Object.defineProperty(X,"decompressResponsePolicyName",{enumerable:true,get:function(){return sae.decompressResponsePolicyName}});var aae=RL();Object.defineProperty(X,"defaultRetryPolicy",{enumerable:true,get:function(){return aae.defaultRetryPolicy}});Object.defineProperty(X,"defaultRetryPolicyName",{enumerable:true,get:function(){return aae.defaultRetryPolicyName}});var cae=rae();Object.defineProperty(X,"exponentialRetryPolicy",{enumerable:true,get:function(){return cae.exponentialRetryPolicy}});Object.defineProperty(X,"exponentialRetryPolicyName",{enumerable:true,get:function(){return cae.exponentialRetryPolicyName}});var SQe=Wl();Object.defineProperty(X,"retryPolicy",{enumerable:true,get:function(){return SQe.retryPolicy}});var uae=nae();Object.defineProperty(X,"systemErrorRetryPolicy",{enumerable:true,get:function(){return uae.systemErrorRetryPolicy}});Object.defineProperty(X,"systemErrorRetryPolicyName",{enumerable:true,get:function(){return uae.systemErrorRetryPolicyName}});var lae=iae();Object.defineProperty(X,"throttlingRetryPolicy",{enumerable:true,get:function(){return lae.throttlingRetryPolicy}});Object.defineProperty(X,"throttlingRetryPolicyName",{enumerable:true,get:function(){return lae.throttlingRetryPolicyName}});var dae=PL();Object.defineProperty(X,"formDataPolicy",{enumerable:true,get:function(){return dae.formDataPolicy}});Object.defineProperty(X,"formDataPolicyName",{enumerable:true,get:function(){return dae.formDataPolicyName}});var pae=lL();Object.defineProperty(X,"logPolicy",{enumerable:true,get:function(){return pae.logPolicy}});Object.defineProperty(X,"logPolicyName",{enumerable:true,get:function(){return pae.logPolicyName}});var fae=UL();Object.defineProperty(X,"multipartPolicy",{enumerable:true,get:function(){return fae.multipartPolicy}});Object.defineProperty(X,"multipartPolicyName",{enumerable:true,get:function(){return fae.multipartPolicyName}});var XL=IL();Object.defineProperty(X,"proxyPolicy",{enumerable:true,get:function(){return XL.proxyPolicy}});Object.defineProperty(X,"proxyPolicyName",{enumerable:true,get:function(){return XL.proxyPolicyName}});Object.defineProperty(X,"getDefaultProxySettings",{enumerable:true,get:function(){return XL.getDefaultProxySettings}});var hae=dL();Object.defineProperty(X,"redirectPolicy",{enumerable:true,get:function(){return hae.redirectPolicy}});Object.defineProperty(X,"redirectPolicyName",{enumerable:true,get:function(){return hae.redirectPolicyName}});var _ae=LL();Object.defineProperty(X,"tlsPolicy",{enumerable:true,get:function(){return _ae.tlsPolicy}});Object.defineProperty(X,"tlsPolicyName",{enumerable:true,get:function(){return _ae.tlsPolicyName}});var mae=hL();Object.defineProperty(X,"userAgentPolicy",{enumerable:true,get:function(){return mae.userAgentPolicy}});Object.defineProperty(X,"userAgentPolicyName",{enumerable:true,get:function(){return mae.userAgentPolicyName}});});var QL=f(Zh=>{Object.defineProperty(Zh,"__esModule",{value:true});Zh.logPolicyName=void 0;Zh.logPolicy=yQe;var gQe=Qh(),Eae=un();Zh.logPolicyName=Eae.logPolicyName;function yQe(t={}){return (0, Eae.logPolicy)(Object.assign({logger:gQe.logger.info},t))}});var JL=f(e_=>{Object.defineProperty(e_,"__esModule",{value:true});e_.redirectPolicyName=void 0;e_.redirectPolicy=AQe;var Tae=un();e_.redirectPolicyName=Tae.redirectPolicyName;function AQe(t={}){return (0, Tae.redirectPolicy)(t)}});var gae=f(YA=>{Object.defineProperty(YA,"__esModule",{value:true});YA.getHeaderName=RQe;YA.setPlatformSpecificData=vQe;var Sae=(Ce(),A(Ne)),ZL=Sae.__importStar(P("os")),eD=Sae.__importStar(P("process"));function RQe(){return "User-Agent"}async function vQe(t){if(eD&&eD.versions){let e=eD.versions;e.bun?t.set("Bun",e.bun):e.deno?t.set("Deno",e.deno):e.node&&t.set("Node",e.node);}t.set("OS",`(${ZL.arch()}-${ZL.type()}-${ZL.release()})`);}});var $A=f(fd=>{Object.defineProperty(fd,"__esModule",{value:true});fd.DEFAULT_RETRY_POLICY_COUNT=fd.SDK_VERSION=void 0;fd.SDK_VERSION="1.22.0";fd.DEFAULT_RETRY_POLICY_COUNT=3;});var tD=f(KA=>{Object.defineProperty(KA,"__esModule",{value:true});KA.getUserAgentHeaderName=CQe;KA.getUserAgentValue=PQe;var yae=gae(),OQe=$A();function NQe(t){let e=[];for(let[r,n]of t){let s=n?`${r}/${n}`:r;e.push(s);}return e.join(" ")}function CQe(){return (0, yae.getHeaderName)()}async function PQe(t){let e=new Map;e.set("core-rest-pipeline",OQe.SDK_VERSION),await(0, yae.setPlatformSpecificData)(e);let r=NQe(e);return t?`${t} ${r}`:r}});var rD=f(hd=>{Object.defineProperty(hd,"__esModule",{value:true});hd.userAgentPolicyName=void 0;hd.userAgentPolicy=bQe;var Rae=tD(),Aae=(0, Rae.getUserAgentHeaderName)();hd.userAgentPolicyName="userAgentPolicy";function bQe(t={}){let e=(0, Rae.getUserAgentValue)(t.userAgentPrefix);return {name:hd.userAgentPolicyName,async sendRequest(r,n){return r.headers.has(Aae)||r.headers.set(Aae,await e),n(r)}}}});var Oae=f(WA=>{Object.defineProperty(WA,"__esModule",{value:true});WA.computeSha256Hmac=MQe;WA.computeSha256Hash=IQe;var vae=P("crypto");async function MQe(t,e,r){let n=Buffer.from(t,"base64");return (0, vae.createHmac)("sha256",n).update(e).digest(r)}async function IQe(t,e){return (0, vae.createHash)("sha256").update(t).digest(e)}});var t_=f(Le=>{Object.defineProperty(Le,"__esModule",{value:true});Le.Sanitizer=Le.uint8ArrayToString=Le.stringToUint8Array=Le.isWebWorker=Le.isReactNative=Le.isDeno=Le.isNodeRuntime=Le.isNodeLike=Le.isBun=Le.isBrowser=Le.randomUUID=Le.computeSha256Hmac=Le.computeSha256Hash=Le.isError=Le.isObject=Le.getRandomIntegerInclusive=Le.calculateRetryDelay=void 0;var xQe=SL();Object.defineProperty(Le,"calculateRetryDelay",{enumerable:true,get:function(){return xQe.calculateRetryDelay}});var LQe=EL();Object.defineProperty(Le,"getRandomIntegerInclusive",{enumerable:true,get:function(){return LQe.getRandomIntegerInclusive}});var DQe=RA();Object.defineProperty(Le,"isObject",{enumerable:true,get:function(){return DQe.isObject}});var wQe=tL();Object.defineProperty(Le,"isError",{enumerable:true,get:function(){return wQe.isError}});var Nae=Oae();Object.defineProperty(Le,"computeSha256Hash",{enumerable:true,get:function(){return Nae.computeSha256Hash}});Object.defineProperty(Le,"computeSha256Hmac",{enumerable:true,get:function(){return Nae.computeSha256Hmac}});var UQe=AA();Object.defineProperty(Le,"randomUUID",{enumerable:true,get:function(){return UQe.randomUUID}});var yc=Yh();Object.defineProperty(Le,"isBrowser",{enumerable:true,get:function(){return yc.isBrowser}});Object.defineProperty(Le,"isBun",{enumerable:true,get:function(){return yc.isBun}});Object.defineProperty(Le,"isNodeLike",{enumerable:true,get:function(){return yc.isNodeLike}});Object.defineProperty(Le,"isNodeRuntime",{enumerable:true,get:function(){return yc.isNodeRuntime}});Object.defineProperty(Le,"isDeno",{enumerable:true,get:function(){return yc.isDeno}});Object.defineProperty(Le,"isReactNative",{enumerable:true,get:function(){return yc.isReactNative}});Object.defineProperty(Le,"isWebWorker",{enumerable:true,get:function(){return yc.isWebWorker}});var Cae=Tc();Object.defineProperty(Le,"stringToUint8Array",{enumerable:true,get:function(){return Cae.stringToUint8Array}});Object.defineProperty(Le,"uint8ArrayToString",{enumerable:true,get:function(){return Cae.uint8ArrayToString}});var kQe=Fh();Object.defineProperty(Le,"Sanitizer",{enumerable:true,get:function(){return kQe.Sanitizer}});});var Pae=f(nD=>{Object.defineProperty(nD,"__esModule",{value:true});nD.cancelablePromiseRace=VQe;async function VQe(t,e){var r,n;let s=new AbortController;function a(){s.abort();}(r=e?.abortSignal)===null||r===void 0||r.addEventListener("abort",a);try{return await Promise.race(t.map(o=>o({abortSignal:s.signal})))}finally{s.abort(),(n=e?.abortSignal)===null||n===void 0||n.removeEventListener("abort",a);}}});var bae=f(XA=>{Object.defineProperty(XA,"__esModule",{value:true});XA.AbortError=void 0;var iD=class extends Error{constructor(e){super(e),this.name="AbortError";}};XA.AbortError=iD;});var Mae=f(QA=>{Object.defineProperty(QA,"__esModule",{value:true});QA.AbortError=void 0;var BQe=bae();Object.defineProperty(QA,"AbortError",{enumerable:true,get:function(){return BQe.AbortError}});});var sD=f(oD=>{Object.defineProperty(oD,"__esModule",{value:true});oD.createAbortablePromise=qQe;var FQe=Mae();function qQe(t,e){let{cleanupBeforeAbort:r,abortSignal:n,abortErrorMsg:s}=e??{};return new Promise((a,o)=>{function i(){o(new FQe.AbortError(s??"The operation was aborted."));}function c(){n?.removeEventListener("abort",u);}function u(){r?.(),c(),i();}if(n?.aborted)return i();try{t(l=>{c(),a(l);},l=>{c(),o(l);});}catch(l){o(l);}n?.addEventListener("abort",u);})}});var Iae=f(JA=>{Object.defineProperty(JA,"__esModule",{value:true});JA.delay=zQe;JA.calculateRetryDelay=YQe;var HQe=sD(),GQe=t_(),jQe="The delay was aborted.";function zQe(t,e){let r,{abortSignal:n,abortErrorMsg:s}=e??{};return (0, HQe.createAbortablePromise)(a=>{r=setTimeout(a,t);},{cleanupBeforeAbort:()=>clearTimeout(r),abortSignal:n,abortErrorMsg:s??jQe})}function YQe(t,e){let r=e.retryDelayInMs*Math.pow(2,t),n=Math.min(e.maxRetryDelayInMs,r);return {retryAfterInMs:n/2+(0, GQe.getRandomIntegerInclusive)(0,n/2)}}});var xae=f(aD=>{Object.defineProperty(aD,"__esModule",{value:true});aD.getErrorMessage=KQe;var $Qe=t_();function KQe(t){if((0, $Qe.isError)(t))return t.message;{let e;try{typeof t=="object"&&t?e=JSON.stringify(t):e=String(t);}catch{e="[unable to stringify input]";}return `Unknown error ${e}`}}});var Dae=f(r_=>{Object.defineProperty(r_,"__esModule",{value:true});r_.isDefined=cD;r_.isObjectWithProperties=WQe;r_.objectHasProperty=Lae;function cD(t){return typeof t<"u"&&t!==null}function WQe(t,e){if(!cD(t)||typeof t!="object")return  false;for(let r of e)if(!Lae(t,r))return  false;return  true}function Lae(t,e){return cD(t)&&typeof t=="object"&&e in t}});var n_=f(ye=>{Object.defineProperty(ye,"__esModule",{value:true});ye.isWebWorker=ye.isReactNative=ye.isNodeRuntime=ye.isNodeLike=ye.isNode=ye.isDeno=ye.isBun=ye.isBrowser=ye.objectHasProperty=ye.isObjectWithProperties=ye.isDefined=ye.getErrorMessage=ye.delay=ye.createAbortablePromise=ye.cancelablePromiseRace=void 0;ye.calculateRetryDelay=tJe;ye.computeSha256Hash=rJe;ye.computeSha256Hmac=nJe;ye.getRandomIntegerInclusive=iJe;ye.isError=oJe;ye.isObject=sJe;ye.randomUUID=aJe;ye.uint8ArrayToString=cJe;ye.stringToUint8Array=uJe;var XQe=(Ce(),A(Ne)),Er=XQe.__importStar(t_()),QQe=Pae();Object.defineProperty(ye,"cancelablePromiseRace",{enumerable:true,get:function(){return QQe.cancelablePromiseRace}});var JQe=sD();Object.defineProperty(ye,"createAbortablePromise",{enumerable:true,get:function(){return JQe.createAbortablePromise}});var ZQe=Iae();Object.defineProperty(ye,"delay",{enumerable:true,get:function(){return ZQe.delay}});var eJe=xae();Object.defineProperty(ye,"getErrorMessage",{enumerable:true,get:function(){return eJe.getErrorMessage}});var uD=Dae();Object.defineProperty(ye,"isDefined",{enumerable:true,get:function(){return uD.isDefined}});Object.defineProperty(ye,"isObjectWithProperties",{enumerable:true,get:function(){return uD.isObjectWithProperties}});Object.defineProperty(ye,"objectHasProperty",{enumerable:true,get:function(){return uD.objectHasProperty}});function tJe(t,e){return Er.calculateRetryDelay(t,e)}function rJe(t,e){return Er.computeSha256Hash(t,e)}function nJe(t,e,r){return Er.computeSha256Hmac(t,e,r)}function iJe(t,e){return Er.getRandomIntegerInclusive(t,e)}function oJe(t){return Er.isError(t)}function sJe(t){return Er.isObject(t)}function aJe(){return Er.randomUUID()}ye.isBrowser=Er.isBrowser;ye.isBun=Er.isBun;ye.isDeno=Er.isDeno;ye.isNode=Er.isNodeLike;ye.isNodeLike=Er.isNodeLike;ye.isNodeRuntime=Er.isNodeRuntime;ye.isReactNative=Er.isReactNative;ye.isWebWorker=Er.isWebWorker;function cJe(t,e){return Er.uint8ArrayToString(t,e)}function uJe(t,e){return Er.stringToUint8Array(t,e)}});var lD=f(_d=>{Object.defineProperty(_d,"__esModule",{value:true});_d.hasRawContent=Uae;_d.getRawContent=pJe;_d.createFileFromStream=fJe;_d.createFile=hJe;var lJe=n_();function dJe(t){return !!(t&&typeof t.pipe=="function")}var wae={arrayBuffer:()=>{throw new Error("Not implemented")},bytes:()=>{throw new Error("Not implemented")},slice:()=>{throw new Error("Not implemented")},text:()=>{throw new Error("Not implemented")}},ZA=Symbol("rawContent");function Uae(t){return typeof t[ZA]=="function"}function pJe(t){return Uae(t)?t[ZA]():t}function fJe(t,e,r={}){var n,s,a,o;return Object.assign(Object.assign({},wae),{type:(n=r.type)!==null&&n!==void 0?n:"",lastModified:(s=r.lastModified)!==null&&s!==void 0?s:new Date().getTime(),webkitRelativePath:(a=r.webkitRelativePath)!==null&&a!==void 0?a:"",size:(o=r.size)!==null&&o!==void 0?o:-1,name:e,stream:()=>{let i=t();if(dJe(i))throw new Error("Not supported: a Node stream was provided as input to createFileFromStream.");return i},[ZA]:t})}function hJe(t,e,r={}){var n,s,a;return lJe.isNodeLike?Object.assign(Object.assign({},wae),{type:(n=r.type)!==null&&n!==void 0?n:"",lastModified:(s=r.lastModified)!==null&&s!==void 0?s:new Date().getTime(),webkitRelativePath:(a=r.webkitRelativePath)!==null&&a!==void 0?a:"",size:t.byteLength,name:e,arrayBuffer:async()=>t.buffer,stream:()=>new Blob([t]).stream(),[ZA]:()=>t}):new File([t],e,r)}});var dD=f(md=>{Object.defineProperty(md,"__esModule",{value:true});md.multipartPolicyName=void 0;md.multipartPolicy=_Je;var Vae=un(),kae=lD();md.multipartPolicyName=Vae.multipartPolicyName;function _Je(){let t=(0, Vae.multipartPolicy)();return {name:md.multipartPolicyName,sendRequest:async(e,r)=>{if(e.multipartBody)for(let n of e.multipartBody.parts)(0, kae.hasRawContent)(n.body)&&(n.body=(0, kae.getRawContent)(n.body));return t.sendRequest(e,r)}}}});var pD=f(i_=>{Object.defineProperty(i_,"__esModule",{value:true});i_.decompressResponsePolicyName=void 0;i_.decompressResponsePolicy=mJe;var Bae=un();i_.decompressResponsePolicyName=Bae.decompressResponsePolicyName;function mJe(){return (0, Bae.decompressResponsePolicy)()}});var fD=f(o_=>{Object.defineProperty(o_,"__esModule",{value:true});o_.defaultRetryPolicyName=void 0;o_.defaultRetryPolicy=EJe;var Fae=un();o_.defaultRetryPolicyName=Fae.defaultRetryPolicyName;function EJe(t={}){return (0, Fae.defaultRetryPolicy)(t)}});var hD=f(s_=>{Object.defineProperty(s_,"__esModule",{value:true});s_.formDataPolicyName=void 0;s_.formDataPolicy=TJe;var qae=un();s_.formDataPolicyName=qae.formDataPolicyName;function TJe(){return (0, qae.formDataPolicy)()}});var mD=f(Ed=>{Object.defineProperty(Ed,"__esModule",{value:true});Ed.proxyPolicyName=void 0;Ed.getDefaultProxySettings=SJe;Ed.proxyPolicy=gJe;var _D=un();Ed.proxyPolicyName=_D.proxyPolicyName;function SJe(t){return (0, _D.getDefaultProxySettings)(t)}function gJe(t,e){return (0, _D.proxyPolicy)(t,e)}});var ED=f(Td=>{Object.defineProperty(Td,"__esModule",{value:true});Td.setClientRequestIdPolicyName=void 0;Td.setClientRequestIdPolicy=yJe;Td.setClientRequestIdPolicyName="setClientRequestIdPolicy";function yJe(t="x-ms-client-request-id"){return {name:Td.setClientRequestIdPolicyName,async sendRequest(e,r){return e.headers.has(t)||e.headers.set(t,e.requestId),r(e)}}}});var TD=f(a_=>{Object.defineProperty(a_,"__esModule",{value:true});a_.agentPolicyName=void 0;a_.agentPolicy=AJe;var Hae=un();a_.agentPolicyName=Hae.agentPolicyName;function AJe(t){return (0, Hae.agentPolicy)(t)}});var SD=f(c_=>{Object.defineProperty(c_,"__esModule",{value:true});c_.tlsPolicyName=void 0;c_.tlsPolicy=RJe;var Gae=un();c_.tlsPolicyName=Gae.tlsPolicyName;function RJe(t){return (0, Gae.tlsPolicy)(t)}});var gD=f(qo=>{Object.defineProperty(qo,"__esModule",{value:true});qo.TracingContextImpl=qo.knownContextKeys=void 0;qo.createTracingContext=vJe;qo.knownContextKeys={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};function vJe(t={}){let e=new eR(t.parentContext);return t.span&&(e=e.setValue(qo.knownContextKeys.span,t.span)),t.namespace&&(e=e.setValue(qo.knownContextKeys.namespace,t.namespace)),e}var eR=class t{constructor(e){this._contextMap=e instanceof t?new Map(e._contextMap):new Map;}setValue(e,r){let n=new t(this);return n._contextMap.set(e,r),n}getValue(e){return this._contextMap.get(e)}deleteValue(e){let r=new t(this);return r._contextMap.delete(e),r}};qo.TracingContextImpl=eR;});var jae=f(tR=>{Object.defineProperty(tR,"__esModule",{value:true});tR.state=void 0;tR.state={instrumenterImplementation:void 0};});var yD=f(Sd=>{Object.defineProperty(Sd,"__esModule",{value:true});Sd.createDefaultTracingSpan=zae;Sd.createDefaultInstrumenter=Yae;Sd.useInstrumenter=NJe;Sd.getInstrumenter=CJe;var OJe=gD(),rR=jae();function zae(){return {end:()=>{},isRecording:()=>false,recordException:()=>{},setAttribute:()=>{},setStatus:()=>{},addEvent:()=>{}}}function Yae(){return {createRequestHeaders:()=>({}),parseTraceparentHeader:()=>{},startSpan:(t,e)=>({span:zae(),tracingContext:(0, OJe.createTracingContext)({parentContext:e.tracingContext})}),withContext(t,e,...r){return e(...r)}}}function NJe(t){rR.state.instrumenterImplementation=t;}function CJe(){return rR.state.instrumenterImplementation||(rR.state.instrumenterImplementation=Yae()),rR.state.instrumenterImplementation}});var $ae=f(RD=>{Object.defineProperty(RD,"__esModule",{value:true});RD.createTracingClient=PJe;var nR=yD(),AD=gD();function PJe(t){let{namespace:e,packageName:r,packageVersion:n}=t;function s(u,l,d){var p;let h=(0, nR.getInstrumenter)().startSpan(u,Object.assign(Object.assign({},d),{packageName:r,packageVersion:n,tracingContext:(p=l?.tracingOptions)===null||p===void 0?void 0:p.tracingContext})),T=h.tracingContext,g=h.span;T.getValue(AD.knownContextKeys.namespace)||(T=T.setValue(AD.knownContextKeys.namespace,e)),g.setAttribute("az.namespace",T.getValue(AD.knownContextKeys.namespace));let y=Object.assign({},l,{tracingOptions:Object.assign(Object.assign({},l?.tracingOptions),{tracingContext:T})});return {span:g,updatedOptions:y}}async function a(u,l,d,p){let{span:h,updatedOptions:T}=s(u,l,p);try{let g=await o(T.tracingOptions.tracingContext,()=>Promise.resolve(d(T,h)));return h.setStatus({status:"success"}),g}catch(g){throw h.setStatus({status:"error",error:g}),g}finally{h.end();}}function o(u,l,...d){return (0, nR.getInstrumenter)().withContext(u,l,...d)}function i(u){return (0, nR.getInstrumenter)().parseTraceparentHeader(u)}function c(u){return (0, nR.getInstrumenter)().createRequestHeaders(u)}return {startSpan:s,withSpan:a,withContext:o,parseTraceparentHeader:i,createRequestHeaders:c}}});var Kae=f(gd=>{Object.defineProperty(gd,"__esModule",{value:true});gd.createTracingClient=gd.useInstrumenter=void 0;var bJe=yD();Object.defineProperty(gd,"useInstrumenter",{enumerable:true,get:function(){return bJe.useInstrumenter}});var MJe=$ae();Object.defineProperty(gd,"createTracingClient",{enumerable:true,get:function(){return MJe.createTracingClient}});});var iR=f(u_=>{Object.defineProperty(u_,"__esModule",{value:true});u_.RestError=void 0;u_.isRestError=IJe;var Wae=ld();u_.RestError=Wae.RestError;function IJe(t){return (0, Wae.isRestError)(t)}});var vD=f(yd=>{Object.defineProperty(yd,"__esModule",{value:true});yd.tracingPolicyName=void 0;yd.tracingPolicy=kJe;var xJe=Kae(),LJe=$A(),DJe=tD(),oR=Qh(),l_=n_(),wJe=iR(),UJe=t_();yd.tracingPolicyName="tracingPolicy";function kJe(t={}){let e=(0, DJe.getUserAgentValue)(t.userAgentPrefix),r=new UJe.Sanitizer({additionalAllowedQueryParameters:t.additionalAllowedQueryParameters}),n=VJe();return {name:yd.tracingPolicyName,async sendRequest(s,a){var o;if(!n)return a(s);let i=await e,c={"http.url":r.sanitizeUrl(s.url),"http.method":s.method,"http.user_agent":i,requestId:s.requestId};i&&(c["http.user_agent"]=i);let{span:u,tracingContext:l}=(o=BJe(n,s,c))!==null&&o!==void 0?o:{};if(!u||!l)return a(s);try{let d=await n.withContext(l,a,s);return qJe(u,d),d}catch(d){throw FJe(u,d),d}}}}function VJe(){try{return (0,xJe.createTracingClient)({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:LJe.SDK_VERSION})}catch(t){oR.logger.warning(`Error when creating the TracingClient: ${(0, l_.getErrorMessage)(t)}`);return}}function BJe(t,e,r){try{let{span:n,updatedOptions:s}=t.startSpan(`HTTP ${e.method}`,{tracingOptions:e.tracingOptions},{spanKind:"client",spanAttributes:r});if(!n.isRecording()){n.end();return}let a=t.createRequestHeaders(s.tracingOptions.tracingContext);for(let[o,i]of Object.entries(a))e.headers.set(o,i);return {span:n,tracingContext:s.tracingOptions.tracingContext}}catch(n){oR.logger.warning(`Skipping creating a tracing span due to an error: ${(0, l_.getErrorMessage)(n)}`);return}}function FJe(t,e){try{t.setStatus({status:"error",error:(0,l_.isError)(e)?e:void 0}),(0,wJe.isRestError)(e)&&e.statusCode&&t.setAttribute("http.status_code",e.statusCode),t.end();}catch(r){oR.logger.warning(`Skipping tracing span processing due to an error: ${(0, l_.getErrorMessage)(r)}`);}}function qJe(t,e){try{t.setAttribute("http.status_code",e.status);let r=e.headers.get("x-ms-request-id");r&&t.setAttribute("serviceRequestId",r),e.status>=400&&t.setStatus({status:"error"}),t.end();}catch(r){oR.logger.warning(`Skipping tracing span processing due to an error: ${(0, l_.getErrorMessage)(r)}`);}}});var ND=f(OD=>{Object.defineProperty(OD,"__esModule",{value:true});OD.wrapAbortSignalLike=HJe;function HJe(t){if(t instanceof AbortSignal)return {abortSignal:t};if(t.aborted)return {abortSignal:AbortSignal.abort(t.reason)};let e=new AbortController,r=true;function n(){r&&(t.removeEventListener("abort",s),r=false);}function s(){e.abort(t.reason),n();}return t.addEventListener("abort",s),{abortSignal:e.signal,cleanup:n}}});var Xae=f(Ad=>{Object.defineProperty(Ad,"__esModule",{value:true});Ad.wrapAbortSignalLikePolicyName=void 0;Ad.wrapAbortSignalLikePolicy=jJe;var GJe=ND();Ad.wrapAbortSignalLikePolicyName="wrapAbortSignalLikePolicy";function jJe(){return {name:Ad.wrapAbortSignalLikePolicyName,sendRequest:async(t,e)=>{if(!t.abortSignal)return e(t);let{abortSignal:r,cleanup:n}=(0, GJe.wrapAbortSignalLike)(t.abortSignal);t.abortSignal=r;try{return await e(t)}finally{n?.();}}}}});var Zae=f(CD=>{Object.defineProperty(CD,"__esModule",{value:true});CD.createPipelineFromOptions=i7e;var zJe=QL(),YJe=WL(),$Je=JL(),KJe=rD(),Qae=dD(),WJe=pD(),XJe=fD(),QJe=hD(),Jae=n_(),JJe=mD(),ZJe=ED(),e7e=TD(),t7e=SD(),r7e=vD(),n7e=Xae();function i7e(t){var e;let r=(0, YJe.createEmptyPipeline)();return Jae.isNodeLike&&(t.agent&&r.addPolicy((0, e7e.agentPolicy)(t.agent)),t.tlsOptions&&r.addPolicy((0, t7e.tlsPolicy)(t.tlsOptions)),r.addPolicy((0, JJe.proxyPolicy)(t.proxyOptions)),r.addPolicy((0, WJe.decompressResponsePolicy)())),r.addPolicy((0, n7e.wrapAbortSignalLikePolicy)()),r.addPolicy((0, QJe.formDataPolicy)(),{beforePolicies:[Qae.multipartPolicyName]}),r.addPolicy((0, KJe.userAgentPolicy)(t.userAgentOptions)),r.addPolicy((0, ZJe.setClientRequestIdPolicy)((e=t.telemetryOptions)===null||e===void 0?void 0:e.clientRequestIdHeaderName)),r.addPolicy((0, Qae.multipartPolicy)(),{afterPhase:"Deserialize"}),r.addPolicy((0, XJe.defaultRetryPolicy)(t.retryOptions),{phase:"Retry"}),r.addPolicy((0, r7e.tracingPolicy)(Object.assign(Object.assign({},t.userAgentOptions),t.loggingOptions)),{afterPhase:"Retry"}),Jae.isNodeLike&&r.addPolicy((0, $Je.redirectPolicy)(t.redirectOptions),{afterPhase:"Retry"}),r.addPolicy((0, zJe.logPolicy)(t.loggingOptions),{afterPhase:"Sign"}),r}});var ece=f(PD=>{Object.defineProperty(PD,"__esModule",{value:true});PD.createDefaultHttpClient=a7e;var o7e=ld(),s7e=ND();function a7e(){let t=(0, o7e.createDefaultHttpClient)();return {async sendRequest(e){let{abortSignal:r,cleanup:n}=e.abortSignal?(0, s7e.wrapAbortSignalLike)(e.abortSignal):{};try{return e.abortSignal=r,await t.sendRequest(e)}finally{n?.();}}}}});var tce=f(bD=>{Object.defineProperty(bD,"__esModule",{value:true});bD.createHttpHeaders=u7e;var c7e=ld();function u7e(t){return (0, c7e.createHttpHeaders)(t)}});var rce=f(MD=>{Object.defineProperty(MD,"__esModule",{value:true});MD.createPipelineRequest=d7e;var l7e=ld();function d7e(t){return (0, l7e.createPipelineRequest)(t)}});var ice=f(d_=>{Object.defineProperty(d_,"__esModule",{value:true});d_.exponentialRetryPolicyName=void 0;d_.exponentialRetryPolicy=p7e;var nce=un();d_.exponentialRetryPolicyName=nce.exponentialRetryPolicyName;function p7e(t={}){return (0, nce.exponentialRetryPolicy)(t)}});var sce=f(p_=>{Object.defineProperty(p_,"__esModule",{value:true});p_.systemErrorRetryPolicyName=void 0;p_.systemErrorRetryPolicy=f7e;var oce=un();p_.systemErrorRetryPolicyName=oce.systemErrorRetryPolicyName;function f7e(t={}){return (0, oce.systemErrorRetryPolicy)(t)}});var cce=f(f_=>{Object.defineProperty(f_,"__esModule",{value:true});f_.throttlingRetryPolicyName=void 0;f_.throttlingRetryPolicy=h7e;var ace=un();f_.throttlingRetryPolicyName=ace.throttlingRetryPolicyName;function h7e(t={}){return (0, ace.throttlingRetryPolicy)(t)}});var uce=f(ID=>{Object.defineProperty(ID,"__esModule",{value:true});ID.retryPolicy=S7e;var _7e=Ll(),m7e=$A(),E7e=un(),T7e=(0, _7e.createClientLogger)("core-rest-pipeline retryPolicy");function S7e(t,e={maxRetries:m7e.DEFAULT_RETRY_POLICY_COUNT}){return (0, E7e.retryPolicy)(t,Object.assign({logger:T7e},e))}});var xD=f(Rd=>{Object.defineProperty(Rd,"__esModule",{value:true});Rd.DEFAULT_CYCLER_OPTIONS=void 0;Rd.createTokenCycler=A7e;var g7e=n_();Rd.DEFAULT_CYCLER_OPTIONS={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:1e3*60*2};async function y7e(t,e,r){async function n(){if(Date.now()<r)try{return await t()}catch{return null}else {let a=await t();if(a===null)throw new Error("Failed to refresh access token.");return a}}let s=await n();for(;s===null;)await(0, g7e.delay)(e),s=await n();return s}function A7e(t,e){let r=null,n=null,s,a=Object.assign(Object.assign({},Rd.DEFAULT_CYCLER_OPTIONS),e),o={get isRefreshing(){return r!==null},get shouldRefresh(){var c;return o.isRefreshing?false:n?.refreshAfterTimestamp&&n.refreshAfterTimestamp<Date.now()?true:((c=n?.expiresOnTimestamp)!==null&&c!==void 0?c:0)-a.refreshWindowInMs<Date.now()},get mustRefresh(){return n===null||n.expiresOnTimestamp-a.forcedRefreshWindowInMs<Date.now()}};function i(c,u){var l;return o.isRefreshing||(r=y7e(()=>t.getToken(c,u),a.retryIntervalInMs,(l=n?.expiresOnTimestamp)!==null&&l!==void 0?l:Date.now()).then(p=>(r=null,n=p,s=u.tenantId,n)).catch(p=>{throw r=null,n=null,s=void 0,p})),r}return async(c,u)=>{let l=!!u.claims,d=s!==u.tenantId;return l&&(n=null),d||l||o.mustRefresh?i(c,u):(o.shouldRefresh&&i(c,u),n)}}});var hce=f(Ac=>{Object.defineProperty(Ac,"__esModule",{value:true});Ac.bearerTokenAuthenticationPolicyName=void 0;Ac.bearerTokenAuthenticationPolicy=C7e;Ac.parseChallenges=fce;var R7e=xD(),v7e=Qh(),O7e=iR();Ac.bearerTokenAuthenticationPolicyName="bearerTokenAuthenticationPolicy";async function sR(t,e){try{return [await e(t),void 0]}catch(r){if((0, O7e.isRestError)(r)&&r.response)return [r.response,r];throw r}}async function N7e(t){let{scopes:e,getAccessToken:r,request:n}=t,s={abortSignal:n.abortSignal,tracingOptions:n.tracingOptions,enableCae:true},a=await r(e,s);a&&t.request.headers.set("Authorization",`Bearer ${a.token}`);}function lce(t){return t.status===401&&t.headers.has("WWW-Authenticate")}async function dce(t,e){var r;let{scopes:n}=t,s=await t.getAccessToken(n,{enableCae:true,claims:e});return s?(t.request.headers.set("Authorization",`${(r=s.tokenType)!==null&&r!==void 0?r:"Bearer"} ${s.token}`),true):false}function C7e(t){var e,r,n;let{credential:s,scopes:a,challengeCallbacks:o}=t,i=t.logger||v7e.logger,c={authorizeRequest:(r=(e=o?.authorizeRequest)===null||e===void 0?void 0:e.bind(o))!==null&&r!==void 0?r:N7e,authorizeRequestOnChallenge:(n=o?.authorizeRequestOnChallenge)===null||n===void 0?void 0:n.bind(o)},u=s?(0, R7e.createTokenCycler)(s):()=>Promise.resolve(null);return {name:Ac.bearerTokenAuthenticationPolicyName,async sendRequest(l,d){if(!l.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");await c.authorizeRequest({scopes:Array.isArray(a)?a:[a],request:l,getAccessToken:u,logger:i});let p,h,T;if([p,h]=await sR(l,d),lce(p)){let g=pce(p.headers.get("WWW-Authenticate"));if(g){let y;try{y=atob(g);}catch{return i.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${g}`),p}T=await dce({scopes:Array.isArray(a)?a:[a],response:p,request:l,getAccessToken:u,logger:i},y),T&&([p,h]=await sR(l,d));}else if(c.authorizeRequestOnChallenge&&(T=await c.authorizeRequestOnChallenge({scopes:Array.isArray(a)?a:[a],request:l,response:p,getAccessToken:u,logger:i}),T&&([p,h]=await sR(l,d)),lce(p)&&(g=pce(p.headers.get("WWW-Authenticate")),g))){let y;try{y=atob(g);}catch{return i.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${g}`),p}T=await dce({scopes:Array.isArray(a)?a:[a],response:p,request:l,getAccessToken:u,logger:i},y),T&&([p,h]=await sR(l,d));}}if(h)throw h;return p}}}function fce(t){let e=/(\w+)\s+((?:\w+=(?:"[^"]*"|[^,]*),?\s*)+)/g,r=/(\w+)="([^"]*)"/g,n=[],s;for(;(s=e.exec(t))!==null;){let a=s[1],o=s[2],i={},c;for(;(c=r.exec(o))!==null;)i[c[1]]=c[2];n.push({scheme:a,params:i});}return n}function pce(t){var e;return t?(e=fce(t).find(n=>n.scheme==="Bearer"&&n.params.claims&&n.params.error==="insufficient_claims"))===null||e===void 0?void 0:e.params.claims:void 0}});var _ce=f(vd=>{Object.defineProperty(vd,"__esModule",{value:true});vd.ndJsonPolicyName=void 0;vd.ndJsonPolicy=P7e;vd.ndJsonPolicyName="ndJsonPolicy";function P7e(){return {name:vd.ndJsonPolicyName,async sendRequest(t,e){if(typeof t.body=="string"&&t.body.startsWith("[")){let r=JSON.parse(t.body);Array.isArray(r)&&(t.body=r.map(n=>JSON.stringify(n)+`
`).join(""));}return e(t)}}}});var Ece=f(Rc=>{Object.defineProperty(Rc,"__esModule",{value:true});Rc.auxiliaryAuthenticationHeaderPolicyName=void 0;Rc.auxiliaryAuthenticationHeaderPolicy=x7e;var b7e=xD(),M7e=Qh();Rc.auxiliaryAuthenticationHeaderPolicyName="auxiliaryAuthenticationHeaderPolicy";var mce="x-ms-authorization-auxiliary";async function I7e(t){var e,r;let{scopes:n,getAccessToken:s,request:a}=t,o={abortSignal:a.abortSignal,tracingOptions:a.tracingOptions};return (r=(e=await s(n,o))===null||e===void 0?void 0:e.token)!==null&&r!==void 0?r:""}function x7e(t){let{credentials:e,scopes:r}=t,n=t.logger||M7e.logger,s=new WeakMap;return {name:Rc.auxiliaryAuthenticationHeaderPolicyName,async sendRequest(a,o){if(!a.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication for auxiliary header is not permitted for non-TLS protected (non-https) URLs.");if(!e||e.length===0)return n.info(`${Rc.auxiliaryAuthenticationHeaderPolicyName} header will not be set due to empty credentials.`),o(a);let i=[];for(let u of e){let l=s.get(u);l||(l=(0, b7e.createTokenCycler)(u),s.set(u,l)),i.push(I7e({scopes:Array.isArray(r)?r:[r],request:a,getAccessToken:l}));}let c=(await Promise.all(i)).filter(u=>!!u);return c.length===0?(n.warning(`None of the auxiliary tokens are valid. ${mce} header will not be set.`),o(a)):(a.headers.set(mce,c.map(u=>`Bearer ${u}`).join(", ")),o(a))}}}});var $s=f(k=>{Object.defineProperty(k,"__esModule",{value:true});k.createFileFromStream=k.createFile=k.agentPolicyName=k.agentPolicy=k.auxiliaryAuthenticationHeaderPolicyName=k.auxiliaryAuthenticationHeaderPolicy=k.ndJsonPolicyName=k.ndJsonPolicy=k.bearerTokenAuthenticationPolicyName=k.bearerTokenAuthenticationPolicy=k.formDataPolicyName=k.formDataPolicy=k.tlsPolicyName=k.tlsPolicy=k.userAgentPolicyName=k.userAgentPolicy=k.defaultRetryPolicy=k.tracingPolicyName=k.tracingPolicy=k.retryPolicy=k.throttlingRetryPolicyName=k.throttlingRetryPolicy=k.systemErrorRetryPolicyName=k.systemErrorRetryPolicy=k.redirectPolicyName=k.redirectPolicy=k.getDefaultProxySettings=k.proxyPolicyName=k.proxyPolicy=k.multipartPolicyName=k.multipartPolicy=k.logPolicyName=k.logPolicy=k.setClientRequestIdPolicyName=k.setClientRequestIdPolicy=k.exponentialRetryPolicyName=k.exponentialRetryPolicy=k.decompressResponsePolicyName=k.decompressResponsePolicy=k.isRestError=k.RestError=k.createPipelineRequest=k.createHttpHeaders=k.createDefaultHttpClient=k.createPipelineFromOptions=k.createEmptyPipeline=void 0;var L7e=WL();Object.defineProperty(k,"createEmptyPipeline",{enumerable:true,get:function(){return L7e.createEmptyPipeline}});var D7e=Zae();Object.defineProperty(k,"createPipelineFromOptions",{enumerable:true,get:function(){return D7e.createPipelineFromOptions}});var w7e=ece();Object.defineProperty(k,"createDefaultHttpClient",{enumerable:true,get:function(){return w7e.createDefaultHttpClient}});var U7e=tce();Object.defineProperty(k,"createHttpHeaders",{enumerable:true,get:function(){return U7e.createHttpHeaders}});var k7e=rce();Object.defineProperty(k,"createPipelineRequest",{enumerable:true,get:function(){return k7e.createPipelineRequest}});var Tce=iR();Object.defineProperty(k,"RestError",{enumerable:true,get:function(){return Tce.RestError}});Object.defineProperty(k,"isRestError",{enumerable:true,get:function(){return Tce.isRestError}});var Sce=pD();Object.defineProperty(k,"decompressResponsePolicy",{enumerable:true,get:function(){return Sce.decompressResponsePolicy}});Object.defineProperty(k,"decompressResponsePolicyName",{enumerable:true,get:function(){return Sce.decompressResponsePolicyName}});var gce=ice();Object.defineProperty(k,"exponentialRetryPolicy",{enumerable:true,get:function(){return gce.exponentialRetryPolicy}});Object.defineProperty(k,"exponentialRetryPolicyName",{enumerable:true,get:function(){return gce.exponentialRetryPolicyName}});var yce=ED();Object.defineProperty(k,"setClientRequestIdPolicy",{enumerable:true,get:function(){return yce.setClientRequestIdPolicy}});Object.defineProperty(k,"setClientRequestIdPolicyName",{enumerable:true,get:function(){return yce.setClientRequestIdPolicyName}});var Ace=QL();Object.defineProperty(k,"logPolicy",{enumerable:true,get:function(){return Ace.logPolicy}});Object.defineProperty(k,"logPolicyName",{enumerable:true,get:function(){return Ace.logPolicyName}});var Rce=dD();Object.defineProperty(k,"multipartPolicy",{enumerable:true,get:function(){return Rce.multipartPolicy}});Object.defineProperty(k,"multipartPolicyName",{enumerable:true,get:function(){return Rce.multipartPolicyName}});var LD=mD();Object.defineProperty(k,"proxyPolicy",{enumerable:true,get:function(){return LD.proxyPolicy}});Object.defineProperty(k,"proxyPolicyName",{enumerable:true,get:function(){return LD.proxyPolicyName}});Object.defineProperty(k,"getDefaultProxySettings",{enumerable:true,get:function(){return LD.getDefaultProxySettings}});var vce=JL();Object.defineProperty(k,"redirectPolicy",{enumerable:true,get:function(){return vce.redirectPolicy}});Object.defineProperty(k,"redirectPolicyName",{enumerable:true,get:function(){return vce.redirectPolicyName}});var Oce=sce();Object.defineProperty(k,"systemErrorRetryPolicy",{enumerable:true,get:function(){return Oce.systemErrorRetryPolicy}});Object.defineProperty(k,"systemErrorRetryPolicyName",{enumerable:true,get:function(){return Oce.systemErrorRetryPolicyName}});var Nce=cce();Object.defineProperty(k,"throttlingRetryPolicy",{enumerable:true,get:function(){return Nce.throttlingRetryPolicy}});Object.defineProperty(k,"throttlingRetryPolicyName",{enumerable:true,get:function(){return Nce.throttlingRetryPolicyName}});var V7e=uce();Object.defineProperty(k,"retryPolicy",{enumerable:true,get:function(){return V7e.retryPolicy}});var Cce=vD();Object.defineProperty(k,"tracingPolicy",{enumerable:true,get:function(){return Cce.tracingPolicy}});Object.defineProperty(k,"tracingPolicyName",{enumerable:true,get:function(){return Cce.tracingPolicyName}});var B7e=fD();Object.defineProperty(k,"defaultRetryPolicy",{enumerable:true,get:function(){return B7e.defaultRetryPolicy}});var Pce=rD();Object.defineProperty(k,"userAgentPolicy",{enumerable:true,get:function(){return Pce.userAgentPolicy}});Object.defineProperty(k,"userAgentPolicyName",{enumerable:true,get:function(){return Pce.userAgentPolicyName}});var bce=SD();Object.defineProperty(k,"tlsPolicy",{enumerable:true,get:function(){return bce.tlsPolicy}});Object.defineProperty(k,"tlsPolicyName",{enumerable:true,get:function(){return bce.tlsPolicyName}});var Mce=hD();Object.defineProperty(k,"formDataPolicy",{enumerable:true,get:function(){return Mce.formDataPolicy}});Object.defineProperty(k,"formDataPolicyName",{enumerable:true,get:function(){return Mce.formDataPolicyName}});var Ice=hce();Object.defineProperty(k,"bearerTokenAuthenticationPolicy",{enumerable:true,get:function(){return Ice.bearerTokenAuthenticationPolicy}});Object.defineProperty(k,"bearerTokenAuthenticationPolicyName",{enumerable:true,get:function(){return Ice.bearerTokenAuthenticationPolicyName}});var xce=_ce();Object.defineProperty(k,"ndJsonPolicy",{enumerable:true,get:function(){return xce.ndJsonPolicy}});Object.defineProperty(k,"ndJsonPolicyName",{enumerable:true,get:function(){return xce.ndJsonPolicyName}});var Lce=Ece();Object.defineProperty(k,"auxiliaryAuthenticationHeaderPolicy",{enumerable:true,get:function(){return Lce.auxiliaryAuthenticationHeaderPolicy}});Object.defineProperty(k,"auxiliaryAuthenticationHeaderPolicyName",{enumerable:true,get:function(){return Lce.auxiliaryAuthenticationHeaderPolicyName}});var Dce=TD();Object.defineProperty(k,"agentPolicy",{enumerable:true,get:function(){return Dce.agentPolicy}});Object.defineProperty(k,"agentPolicyName",{enumerable:true,get:function(){return Dce.agentPolicyName}});var wce=lD();Object.defineProperty(k,"createFile",{enumerable:true,get:function(){return wce.createFile}});Object.defineProperty(k,"createFileFromStream",{enumerable:true,get:function(){return wce.createFileFromStream}});});var cR=f(aR=>{Object.defineProperty(aR,"__esModule",{value:true});aR.StatsbeatMetrics=void 0;var F7e=(Ce(),A(Ne)),Uce=$s(),q7e=(M(),A(H)),ln=so(),H7e=F7e.__importDefault(P("os")),DD=class{resourceProvider=ln.StatsbeatResourceProvider.unknown;vmInfo={};os=H7e.default.type();resourceIdentifier="";async getResourceProvider(){this.resourceProvider=ln.StatsbeatResourceProvider.unknown,process.env.AKS_ARM_NAMESPACE_ID?(this.resourceProvider=ln.StatsbeatResourceProvider.aks,this.resourceIdentifier=process.env.AKS_ARM_NAMESPACE_ID):process.env.WEBSITE_SITE_NAME&&!process.env.FUNCTIONS_WORKER_RUNTIME?(this.resourceProvider=ln.StatsbeatResourceProvider.appsvc,this.resourceIdentifier=process.env.WEBSITE_SITE_NAME,process.env.WEBSITE_HOME_STAMPNAME&&(this.resourceIdentifier+="/"+process.env.WEBSITE_HOME_STAMPNAME)):process.env.FUNCTIONS_WORKER_RUNTIME?(this.resourceProvider=ln.StatsbeatResourceProvider.functions,process.env.WEBSITE_HOSTNAME&&(this.resourceIdentifier=process.env.WEBSITE_HOSTNAME)):await this.getAzureComputeMetadata()?(this.resourceProvider=ln.StatsbeatResourceProvider.vm,this.resourceIdentifier=this.vmInfo.id+"/"+this.vmInfo.subscriptionId,this.vmInfo.osType&&(this.os=this.vmInfo.osType)):this.resourceProvider=ln.StatsbeatResourceProvider.unknown;}async getAzureComputeMetadata(){let e=(0, Uce.createDefaultHttpClient)(),n={url:`${ln.AIMS_URI}?${ln.AIMS_API_VERSION}&${ln.AIMS_FORMAT}`,timeout:5e3,method:"GET",allowInsecureConnection:true},s=(0, Uce.createPipelineRequest)(n);return await e.sendRequest(s).then(a=>{if(a.status===200){this.vmInfo.isVM=true;let o="";return a.on("data",i=>{o+=i;}),a.on("end",()=>{try{let i=JSON.parse(o);this.vmInfo.id=i.vmId||"",this.vmInfo.subscriptionId=i.subscriptionId||"",this.vmInfo.osType=i.osType||"";}catch(i){q7e.diag.debug("Failed to parse JSON: ",i);}}),true}else return  false}).catch(()=>false),false}getConnectionString(e){let r=e;for(let n=0;n<ln.EU_ENDPOINTS.length;n++)if(r.includes(ln.EU_ENDPOINTS[n]))return ln.EU_CONNECTION_STRING;return ln.NON_EU_CONNECTION_STRING}};aR.StatsbeatMetrics=DD;});var Od=f(vc=>{Object.defineProperty(vc,"__esModule",{value:true});vc.resourceMetricsToEnvelope=Y7e;vc.isAksAttach=uR;vc.shouldSendToOtlp=UD;vc.isStandardMetric=Bce;vc.getAttachType=$7e;var kce=(er(),A(vr)),G7e=h_(),br=Ec(),lR=oo(),wD=so(),j7e=Oc(),Vce=new Map([[br.OTelPerformanceCounterNames.PRIVATE_BYTES,br.BreezePerformanceCounterNames.PRIVATE_BYTES],[br.OTelPerformanceCounterNames.AVAILABLE_BYTES,br.BreezePerformanceCounterNames.AVAILABLE_BYTES],[br.OTelPerformanceCounterNames.PROCESSOR_TIME,br.BreezePerformanceCounterNames.PROCESSOR_TIME],[br.OTelPerformanceCounterNames.PROCESS_TIME_STANDARD,br.BreezePerformanceCounterNames.PROCESS_TIME_STANDARD],[br.OTelPerformanceCounterNames.PROCESS_TIME_NORMALIZED,br.BreezePerformanceCounterNames.PROCESS_TIME_NORMALIZED],[br.OTelPerformanceCounterNames.REQUEST_RATE,br.BreezePerformanceCounterNames.REQUEST_RATE],[br.OTelPerformanceCounterNames.REQUEST_DURATION,br.BreezePerformanceCounterNames.REQUEST_DURATION],[br.OTelPerformanceCounterNames.EXCEPTION_RATE,br.BreezePerformanceCounterNames.EXCEPTION_RATE]]);function z7e(t){let e={};if(t)for(let r of Object.keys(t))e[r]=t[r];return e}function Y7e(t,e,r){let n=[],s=new Date,a=e,o,i;return r?(i="Microsoft.ApplicationInsights.Statsbeat",o={...(0, j7e.getInstance)().tags}):(i="Microsoft.ApplicationInsights.Metric",o=(0, G7e.createTagsFromResource)(t.resource)),t.scopeMetrics.forEach(c=>{c.metrics.forEach(u=>{u.dataPoints.forEach(l=>{let d={metrics:[],version:2,properties:{}};if(d.properties=z7e(l.attributes),UD()&&uR()&&!Bce(l)&&process.env[lR.ENV_APPLICATIONINSIGHTS_METRICS_TO_LOGANALYTICS_ENABLED]==="false"&&!r)return;UD()&&uR()&&!r?d.properties["_MS.SentToAMW"]="True":uR()&&!r&&(d.properties["_MS.SentToAMW"]="False");let p;Vce.has(u.descriptor.name)&&(p=Vce.get(u.descriptor.name));let h={name:p||u.descriptor.name,value:0,dataPointType:"Aggregation"};u.dataPointType===kce.DataPointType.SUM||u.dataPointType===kce.DataPointType.GAUGE?(h.value=l.value,h.count=1):(h.value=l.value.sum||0,h.count=l.value.count,h.max=l.value.max,h.min=l.value.min),d.metrics.push(h);let T={name:i,time:s,sampleRate:100,instrumentationKey:a,tags:o,version:1,data:{baseType:"MetricData",baseData:{...d}}};n.push(T);});});}),n}function uR(){return !!(process.env[lR.ENV_AZURE_MONITOR_AUTO_ATTACH]==="true"&&process.env.AKS_ARM_NAMESPACE_ID)}function UD(){return !!(process.env[lR.ENV_OTLP_METRICS_ENDPOINT]&&process.env[lR.ENV_OTEL_METRICS_EXPORTER]?.includes("otlp"))}function Bce(t){return t.attributes?.["_MS.IsAutocollected"]==="True"}function $7e(){return process.env[wD.AZURE_MONITOR_AUTO_ATTACH]==="true"?wD.AttachTypeName.INTEGRATED_AUTO:wD.AttachTypeName.MANUAL}});var pR=f(dR=>{Object.defineProperty(dR,"__esModule",{value:true});dR.AzureMonitorStatsbeatExporter=void 0;var Fce=(M(),A(H)),qce=(G(),A(Ze)),K7e=Od(),W7e=kl(),X7e=Oc(),kD=class extends W7e.AzureMonitorBaseExporter{_isShutdown=false;_sender;constructor(e){super(e,true),this._sender=new X7e.HttpSender({endpointUrl:this.endpointUrl,instrumentationKey:this.instrumentationKey,trackStatsbeat:this.trackStatsbeat,exporterOptions:e,isStatsbeatSender:true});}filterZeroValueMetrics(e){return e.filter(r=>r.data?.baseType==="MetricData"&&r.data?.baseData?.metrics?r.data.baseData.metrics.some(s=>s.value!==0):true)}async export(e,r){if(this._isShutdown){setTimeout(()=>r({code:qce.ExportResultCode.FAILED}),0);return}let n=(0, K7e.resourceMetricsToEnvelope)(e,this.instrumentationKey,true),s=this.filterZeroValueMetrics(n);Fce.context.with((0, qce.suppressTracing)(Fce.context.active()),async()=>{r(await this._sender.exportEnvelopes(s));});}async shutdown(){return this._isShutdown=true,this._sender.shutdown()}async forceFlush(){return Promise.resolve()}};dR.AzureMonitorStatsbeatExporter=kD;});var jce=f(fR=>{Object.defineProperty(fR,"__esModule",{value:true});fR.NetworkStatsbeatMetrics=void 0;var Q7e=(Ce(),A(Ne)),Hce=(M(),A(H)),Gce=(er(),A(vr)),J7e=Q7e.__importStar(Bo()),Z7e=cR(),co=so(),eZe=pR(),tZe=oo(),rZe=Od(),VD=class t extends Z7e.StatsbeatMetrics{static instance=null;disableNonEssentialStatsbeat=!!process.env[tZe.ENV_DISABLE_STATSBEAT];commonProperties;networkProperties;isInitialized=false;statsCollectionShortInterval=9e5;networkStatsbeatCollection=[];networkStatsbeatMeter;networkStatsbeatMeterProvider;networkAzureExporter;cikey;runtimeVersion;language;version;attach=(0, rZe.getAttachType)();successCountGauge;failureCountGauge;retryCountGauge;throttleCountGauge;exceptionCountGauge;averageDurationGauge;readFailureGauge;writeFailureGauge;connectionString;endpointUrl;host;constructor(e){super(),this.connectionString=super.getConnectionString(e.endpointUrl);let r={connectionString:this.connectionString};this.networkAzureExporter=new eZe.AzureMonitorStatsbeatExporter(r);let n={exporter:this.networkAzureExporter,exportIntervalMillis:e.networkCollectionInterval||this.statsCollectionShortInterval};this.networkStatsbeatMeterProvider=new Gce.MeterProvider({readers:[new Gce.PeriodicExportingMetricReader(n)]}),this.networkStatsbeatMeter=this.networkStatsbeatMeterProvider.getMeter("Azure Monitor Network Statsbeat"),this.endpointUrl=e.endpointUrl,this.runtimeVersion=process.version,this.language=co.STATSBEAT_LANGUAGE,this.version=J7e.packageVersion,this.host=this.getShortHost(e.endpointUrl),this.cikey=e.instrumentationKey,this.successCountGauge=this.networkStatsbeatMeter.createObservableGauge(co.StatsbeatCounter.SUCCESS_COUNT),this.failureCountGauge=this.networkStatsbeatMeter.createObservableGauge(co.StatsbeatCounter.FAILURE_COUNT),this.retryCountGauge=this.networkStatsbeatMeter.createObservableGauge(co.StatsbeatCounter.RETRY_COUNT),this.throttleCountGauge=this.networkStatsbeatMeter.createObservableGauge(co.StatsbeatCounter.THROTTLE_COUNT),this.exceptionCountGauge=this.networkStatsbeatMeter.createObservableGauge(co.StatsbeatCounter.EXCEPTION_COUNT),this.averageDurationGauge=this.networkStatsbeatMeter.createObservableGauge(co.StatsbeatCounter.AVERAGE_DURATION),this.disableNonEssentialStatsbeat||(this.readFailureGauge=this.networkStatsbeatMeter.createObservableGauge(co.StatsbeatCounter.READ_FAILURE_COUNT),this.writeFailureGauge=this.networkStatsbeatMeter.createObservableGauge(co.StatsbeatCounter.WRITE_FAILURE_COUNT)),this.isInitialized=true,this.initialize(),this.commonProperties={os:this.os,rp:this.resourceProvider,cikey:this.cikey,runtimeVersion:this.runtimeVersion,language:this.language,version:this.version,attach:this.attach},this.networkProperties={endpoint:this.endpointUrl,host:this.host};}shutdown(){return this.networkStatsbeatMeterProvider.shutdown()}async initialize(){try{await super.getResourceProvider(),this.successCountGauge.addCallback(this.successCallback.bind(this)),this.networkStatsbeatMeter.addBatchObservableCallback(this.failureCallback.bind(this),[this.failureCountGauge]),this.networkStatsbeatMeter.addBatchObservableCallback(this.retryCallback.bind(this),[this.retryCountGauge]),this.networkStatsbeatMeter.addBatchObservableCallback(this.throttleCallback.bind(this),[this.throttleCountGauge]),this.networkStatsbeatMeter.addBatchObservableCallback(this.exceptionCallback.bind(this),[this.exceptionCountGauge]),this.disableNonEssentialStatsbeat||(this.readFailureGauge?.addCallback(this.readFailureCallback.bind(this)),this.writeFailureGauge?.addCallback(this.writeFailureCallback.bind(this))),this.averageDurationGauge.addCallback(this.durationCallback.bind(this));}catch{Hce.diag.debug("Call to get the resource provider failed.");}}successCallback(e){let r=this.getNetworkStatsbeatCounter(this.endpointUrl,this.host);if(r.totalSuccessfulRequestCount>0){let n={...this.commonProperties,...this.networkProperties};e.observe(r.totalSuccessfulRequestCount,n),r.totalSuccessfulRequestCount=0;}}failureCallback(e){let r=this.getNetworkStatsbeatCounter(this.endpointUrl,this.host),n={...this.networkProperties,...this.commonProperties,statusCode:0};for(let s=0;s<r.totalFailedRequestCount.length;s++)r.totalFailedRequestCount[s].count>0&&(n.statusCode=r.totalFailedRequestCount[s].statusCode,e.observe(this.failureCountGauge,r.totalFailedRequestCount[s].count,{...n}),r.totalFailedRequestCount[s].count=0);}retryCallback(e){let r=this.getNetworkStatsbeatCounter(this.endpointUrl,this.host),n={...this.networkProperties,...this.commonProperties,statusCode:0};for(let s=0;s<r.retryCount.length;s++)r.retryCount[s].count>0&&(n.statusCode=r.retryCount[s].statusCode,e.observe(this.retryCountGauge,r.retryCount[s].count,{...n}),r.retryCount[s].count=0);}throttleCallback(e){let r=this.getNetworkStatsbeatCounter(this.endpointUrl,this.host),n={...this.networkProperties,...this.commonProperties,statusCode:0};for(let s=0;s<r.throttleCount.length;s++)r.throttleCount[s].count>0&&(n.statusCode=r.throttleCount[s].statusCode,e.observe(this.throttleCountGauge,r.throttleCount[s].count,{...n}),r.throttleCount[s].count=0);}exceptionCallback(e){let r=this.getNetworkStatsbeatCounter(this.endpointUrl,this.host),n={...this.networkProperties,...this.commonProperties,exceptionType:""};for(let s=0;s<r.exceptionCount.length;s++)r.exceptionCount[s].count>0&&(n.exceptionType=r.exceptionCount[s].exceptionType,e.observe(this.exceptionCountGauge,r.exceptionCount[s].count,{...n}),r.exceptionCount[s].count=0);}durationCallback(e){let r=this.getNetworkStatsbeatCounter(this.endpointUrl,this.host),n={...this.networkProperties,...this.commonProperties};for(let s=0;s<this.networkStatsbeatCollection.length;s++){let a=this.networkStatsbeatCollection[s];a.time=Number(new Date);let o=a.totalRequestCount-a.lastRequestCount||0;o>0?a.averageRequestExecutionTime=(a.intervalRequestExecutionTime-a.lastIntervalRequestExecutionTime)/o||0:a.averageRequestExecutionTime=0,a.lastIntervalRequestExecutionTime=a.intervalRequestExecutionTime,a.lastRequestCount=a.totalRequestCount,a.lastTime=a.time;}r.averageRequestExecutionTime>0&&(e.observe(r.averageRequestExecutionTime,n),r.averageRequestExecutionTime=0);}readFailureCallback(e){let r=this.getNetworkStatsbeatCounter(this.endpointUrl,this.host);if(r.totalReadFailureCount>0){let n={...this.commonProperties,...this.networkProperties};e.observe(r.totalReadFailureCount,n),r.totalReadFailureCount=0;}}writeFailureCallback(e){let r=this.getNetworkStatsbeatCounter(this.endpointUrl,this.host);if(r.totalWriteFailureCount>0){let n={...this.commonProperties,...this.networkProperties};e.observe(r.totalWriteFailureCount,n),r.totalWriteFailureCount=0;}}countSuccess(e){if(!this.isInitialized)return;let r=this.getNetworkStatsbeatCounter(this.endpointUrl,this.host);r.totalRequestCount++,r.totalSuccessfulRequestCount++,r.intervalRequestExecutionTime+=e;}countFailure(e,r){if(!this.isInitialized)return;let n=this.getNetworkStatsbeatCounter(this.endpointUrl,this.host),s=n.totalFailedRequestCount.find(a=>r===a.statusCode);s?s.count++:n.totalFailedRequestCount.push({statusCode:r,count:1}),n.totalRequestCount++,n.intervalRequestExecutionTime+=e;}countRetry(e){if(!this.isInitialized)return;let r=this.getNetworkStatsbeatCounter(this.endpointUrl,this.host),n=r.retryCount.find(s=>e===s.statusCode);n?n.count++:r.retryCount.push({statusCode:e,count:1});}countThrottle(e){if(!this.isInitialized)return;let r=this.getNetworkStatsbeatCounter(this.endpointUrl,this.host),n=r.throttleCount.find(s=>e===s.statusCode);n?n.count++:r.throttleCount.push({statusCode:e,count:1});}countReadFailure(){if(!this.isInitialized||this.disableNonEssentialStatsbeat)return;let e=this.getNetworkStatsbeatCounter(this.endpointUrl,this.host);e.totalReadFailureCount++;}countWriteFailure(){if(!this.isInitialized||this.disableNonEssentialStatsbeat)return;let e=this.getNetworkStatsbeatCounter(this.endpointUrl,this.host);e.totalWriteFailureCount++;}countException(e){if(!this.isInitialized)return;let r=this.getNetworkStatsbeatCounter(this.endpointUrl,this.host),n=r.exceptionCount.find(s=>e.name===s.exceptionType);n?n.count++:r.exceptionCount.push({exceptionType:e.name,count:1});}getNetworkStatsbeatCounter(e,r){for(let s=0;s<this.networkStatsbeatCollection.length;s++)if(e===this.networkStatsbeatCollection[s].endpoint&&r===this.networkStatsbeatCollection[s].host)return this.networkStatsbeatCollection[s];let n=new co.NetworkStatsbeat(e,r);return this.networkStatsbeatCollection.push(n),n}getShortHost(e){let r=e;try{let s=new RegExp(/^https?:\/\/(?:www\.)?([^/.-]+)/).exec(e);s!==null&&s.length>1&&(r=s[1]),r=r.replace(".in.applicationinsights.azure.com","");}catch{Hce.diag.debug("Failed to get the short host name.");}return r}static getInstance(e){return t.instance||(t.instance=new t(e)),t.instance}};fR.NetworkStatsbeatMetrics=VD;});var Yce=f(hR=>{Object.defineProperty(hR,"__esModule",{value:true});hR.LongIntervalStatsbeatMetrics=void 0;var nZe=(Ce(),A(Ne)),__=(M(),A(H)),iZe=(G(),A(Ze)),zce=(er(),A(vr)),oZe=nZe.__importStar(Bo()),sZe=cR(),m_=so(),aZe=pR(),cZe=Od(),BD=class t extends sZe.StatsbeatMetrics{static instance=null;statsCollectionLongInterval=864e5;cikey;runtimeVersion;language;version;attach=(0, cZe.getAttachType)();commonProperties;attachProperties;feature=0;instrumentation=0;longIntervalStatsbeatMeterProvider;longIntervalAzureExporter;longIntervalMetricReader;longIntervalStatsbeatMeter;connectionString;featureStatsbeatGauge;attachStatsbeatGauge;isInitialized=false;constructor(e){super(),this.connectionString=super.getConnectionString(e.endpointUrl);let r={connectionString:this.connectionString,disableOfflineStorage:e.disableOfflineStorage};this.setFeatures(),this.longIntervalAzureExporter=new aZe.AzureMonitorStatsbeatExporter(r);let n={exporter:this.longIntervalAzureExporter,exportIntervalMillis:Number(process.env.LONG_INTERVAL_EXPORT_MILLIS)||this.statsCollectionLongInterval};this.longIntervalMetricReader=new zce.PeriodicExportingMetricReader(n),this.longIntervalStatsbeatMeterProvider=new zce.MeterProvider({readers:[this.longIntervalMetricReader]}),this.longIntervalStatsbeatMeter=this.longIntervalStatsbeatMeterProvider.getMeter("Azure Monitor Long Interval Statsbeat"),this.runtimeVersion=process.version,this.language=m_.STATSBEAT_LANGUAGE,this.version=oZe.packageVersion,this.cikey=e.instrumentationKey,this.featureStatsbeatGauge=this.longIntervalStatsbeatMeter.createObservableGauge(m_.StatsbeatCounter.FEATURE),this.attachStatsbeatGauge=this.longIntervalStatsbeatMeter.createObservableGauge(m_.StatsbeatCounter.ATTACH),this.isInitialized=true,this.initialize(),this.commonProperties={os:this.os,rp:this.resourceProvider,cikey:this.cikey,runtimeVersion:this.runtimeVersion,language:this.language,version:this.version,attach:this.attach},this.attachProperties={rpId:this.resourceIdentifier};}async initialize(){try{await this.getResourceProvider(),this.attachStatsbeatGauge.addCallback(this.attachCallback.bind(this)),this.longIntervalStatsbeatMeter.addBatchObservableCallback(this.getEnvironmentStatus.bind(this),[this.featureStatsbeatGauge]),setTimeout(async()=>{try{let e=await this.longIntervalMetricReader.collect();e?this.longIntervalAzureExporter.export(e.resourceMetrics,r=>{r.code!==iZe.ExportResultCode.SUCCESS&&__.diag.debug(`LongIntervalStatsbeat: metrics export failed (error ${r.error})`);}):__.diag.debug("LongIntervalStatsbeat: No metrics collected");}catch(e){__.diag.debug(`LongIntervalStatsbeat: Error collecting metrics: ${e}`);}},15e3);}catch{__.diag.debug("Call to get the resource provider failed.");}}getEnvironmentStatus(e){this.setFeatures();let r;this.instrumentation>0&&(r={...this.commonProperties,feature:this.instrumentation,type:m_.StatsbeatFeatureType.INSTRUMENTATION},e.observe(this.featureStatsbeatGauge,1,{...r})),this.feature>0&&(r={...this.commonProperties,feature:this.feature,type:m_.StatsbeatFeatureType.FEATURE},e.observe(this.featureStatsbeatGauge,1,{...r}));}setFeatures(){let e=process.env.AZURE_MONITOR_STATSBEAT_FEATURES;if(e)try{this.feature=JSON.parse(e).feature,this.instrumentation=JSON.parse(e).instrumentation;}catch(r){__.diag.debug(`LongIntervalStatsbeat: Failed to parse features/instrumentations (error ${r})`);}}attachCallback(e){let r={...this.commonProperties,...this.attachProperties};e.observe(1,r);}shutdown(){return this.longIntervalStatsbeatMeterProvider.shutdown()}static getInstance(e){return t.instance||(t.instance=new t(e)),t.instance}};hR.LongIntervalStatsbeatMetrics=BD;});var FD=f(_R=>{Object.defineProperty(_R,"__esModule",{value:true});_R.isRetriable=uZe;_R.msToTimeSpan=lZe;function uZe(t){return t===206||t===401||t===403||t===408||t===429||t===439||t===500||t===502||t===503||t===504}function lZe(t){(isNaN(t)||t<0)&&(t=0);let e=(t/1e3%60).toFixed(7).replace(/0{0,4}$/,""),r=""+Math.floor(t/(1e3*60))%60,n=""+Math.floor(t/(1e3*60*60))%24,s=Math.floor(t/(1e3*60*60*24));return e=e.indexOf(".")<2?"0"+e:e,r=r.length<2?"0"+r:r,n=n.length<2?"0"+n:n,(s>0?s+".":"")+n+":"+r+":"+e}});var Kce=f(mR=>{Object.defineProperty(mR,"__esModule",{value:true});mR.CustomerSDKStatsMetrics=void 0;var dZe=(Ce(),A(Ne)),pZe=(M(),A(H)),$ce=(er(),A(vr)),fZe=dZe.__importStar(Bo()),hZe=cR(),Rt=so(),vt=so(),_Ze=Od(),mZe=pR(),EZe=Ec(),qD=class t extends hZe.StatsbeatMetrics{static _instance;statsCollectionInterval=9e5;customerSDKStatsMeter;customerSDKStatsMeterProvider;customerSDKStatsExporter;customerSDKStatsCounter;customerSDKStatsMetricReader;isInitialized=false;language;version;attach=(0, _Ze.getAttachType)();itemSuccessCountGauge;itemDropCountGauge;itemRetryCountGauge;customerProperties;constructor(e){super();let r={connectionString:`InstrumentationKey=${e.instrumentationKey};IngestionEndpoint=${e.endpointUrl}`};this.customerSDKStatsExporter=new mZe.AzureMonitorStatsbeatExporter(r);let n={exporter:this.customerSDKStatsExporter,exportIntervalMillis:e.networkCollectionInterval||this.statsCollectionInterval};this.customerSDKStatsMetricReader=new $ce.PeriodicExportingMetricReader(n),this.customerSDKStatsMeterProvider=new $ce.MeterProvider({readers:[this.customerSDKStatsMetricReader]}),this.customerSDKStatsMeter=this.customerSDKStatsMeterProvider.getMeter("Azure Monitor Customer SDK Stats"),this.language=vt.STATSBEAT_LANGUAGE,this.version=fZe.packageVersion,this.itemSuccessCountGauge=this.customerSDKStatsMeter.createObservableGauge(vt.CustomSDKStatsCounter.ITEM_SUCCESS_COUNT),this.itemDropCountGauge=this.customerSDKStatsMeter.createObservableGauge(vt.CustomSDKStatsCounter.ITEM_DROP_COUNT),this.itemRetryCountGauge=this.customerSDKStatsMeter.createObservableGauge(vt.CustomSDKStatsCounter.ITEM_RETRY_COUNT),this.isInitialized||this.initialize(),this.isInitialized=true,this.customerSDKStatsCounter=new Rt.CustomerSDKStats,this.customerProperties={language:this.language,version:this.version,computeType:this.attach};}static getInstance(e){return t._instance||(t._instance=new t(e)),t._instance}static shutdown(){if(t._instance){let e=t._instance.shutdown();return t._instance=void 0,e}}shutdown(){return this.customerSDKStatsMeterProvider.shutdown()}async initialize(){try{await super.getResourceProvider(),this.customerSDKStatsMeter.addBatchObservableCallback(this.itemSuccessCallback.bind(this),[this.itemSuccessCountGauge]),this.customerSDKStatsMeter.addBatchObservableCallback(this.itemDropCallback.bind(this),[this.itemDropCountGauge]),this.customerSDKStatsMeter.addBatchObservableCallback(this.itemRetryCallback.bind(this),[this.itemRetryCountGauge]);}catch{pZe.diag.debug("Call to get the resource provider failed for customer SDK Stats metrics.");}}itemSuccessCallback(e){let r=this.customerSDKStatsCounter,n={...this.customerProperties,telemetry_type:vt.TelemetryType.UNKNOWN};for(let[s,a]of r.totalItemSuccessCount.entries())a>0&&(n.telemetry_type=s,e.observe(this.itemSuccessCountGauge,a,{...n}),r.totalItemSuccessCount.set(s,0));}itemDropCallback(e){let r=this.customerSDKStatsCounter,n={...this.customerProperties,"drop.code":Rt.DropCode.UNKNOWN,telemetry_type:vt.TelemetryType.UNKNOWN};for(let[s,a]of r.totalItemDropCount.entries())for(let[o,i]of a.entries())for(let[c,u]of i.entries())for(let[l,d]of u.entries()){let p={...n};p.telemetry_type=s,p["drop.code"]=o,c&&(p["drop.reason"]=c),(s===vt.TelemetryType.REQUEST||s===vt.TelemetryType.DEPENDENCY)&&l!==null&&(p.telemetry_success=l),d>0&&e.observe(this.itemDropCountGauge,d,{...p}),u.set(l,0);}}itemRetryCallback(e){let r=this.customerSDKStatsCounter,n={...this.customerProperties,"retry.code":Rt.RetryCode.UNKNOWN,telemetry_type:vt.TelemetryType.UNKNOWN};for(let[s,a]of r.totalItemRetryCount.entries())for(let[o,i]of a.entries())for(let[c,u]of i.entries()){let l={...n};l.telemetry_type=s,l["retry.code"]=o,c&&(l["retry.reason"]=c),u>0&&e.observe(this.itemRetryCountGauge,u,{...l}),i.set(c,0);}}countSuccessfulItems(e){let r=this.customerSDKStatsCounter,n;for(let s of e){n=this.getTelemetryTypeFromEnvelope(s);let a=r.totalItemSuccessCount.get(n)||0;r.totalItemSuccessCount.set(n,a+1);}}countDroppedItems(e,r,n,s){let a=this.customerSDKStatsCounter,o;for(let i of e){o=this.getTelemetryTypeFromEnvelope(i);let c=a.totalItemDropCount.get(o);c||(c=new Map,a.totalItemDropCount.set(o,c));let u=c.get(r);u||(u=new Map,c.set(r,u));let l=this.getDropReason(r,n,s),d=u.get(l);d||(d=new Map,u.set(l,d));let p=this.getTelemetrySuccessFromEnvelope(i),h=(o===vt.TelemetryType.REQUEST||o===vt.TelemetryType.DEPENDENCY)&&p!==void 0?p:null,T=d.get(h)||0;d.set(h,T+1);}}getDropReason(e,r,n){if(e===Rt.DropCode.CLIENT_EXCEPTION)return n||(r?this.categorizeExceptionMessage(r):Rt.ExceptionType.CLIENT_EXCEPTION);if(typeof e=="number")return this.categorizeStatusCode(e);switch(e){case Rt.DropCode.CLIENT_READONLY:return Rt.DropReason.CLIENT_READONLY;case Rt.DropCode.CLIENT_PERSISTENCE_CAPACITY:return Rt.DropReason.CLIENT_PERSISTENCE_CAPACITY;case Rt.DropCode.CLIENT_STORAGE_DISABLED:return Rt.DropReason.CLIENT_STORAGE_DISABLED;case Rt.DropCode.UNKNOWN:default:return Rt.DropReason.UNKNOWN}}categorizeExceptionMessage(e){let r=e.toLowerCase();return r.includes("timeout")||r.includes("timed out")?Rt.ExceptionType.TIMEOUT_EXCEPTION:r.includes("network")||r.includes("connection")||r.includes("dns")||r.includes("socket")?Rt.ExceptionType.NETWORK_EXCEPTION:r.includes("disk")||r.includes("storage")||r.includes("file")||r.includes("persist")?Rt.ExceptionType.STORAGE_EXCEPTION:Rt.ExceptionType.CLIENT_EXCEPTION}categorizeStatusCode(e){if(e>=400&&e<500)switch(e){case 400:return "Bad request";case 401:return "Unauthorized";case 403:return "Forbidden";case 404:return "Not found";case 408:return "Request timeout";case 413:return "Payload too large";case 429:return "Too many requests";default:return "Client error 4xx"}if(e>=500&&e<600)switch(e){case 500:return "Internal server error";case 502:return "Bad gateway";case 503:return "Service unavailable";case 504:return "Gateway timeout";default:return "Server error 5xx"}return `status_${e}`}countRetryItems(e,r,n,s){let a=this.customerSDKStatsCounter,o;for(let i of e){o=this.getTelemetryTypeFromEnvelope(i);let c=a.totalItemRetryCount.get(o);c||(c=new Map,a.totalItemRetryCount.set(o,c));let u=c.get(r);u||(u=new Map,c.set(r,u));let l=this.getRetryReason(r,n,s),d=u.get(l)||0;u.set(l,d+1);}}getRetryReason(e,r,n){if(e===Rt.RetryCode.CLIENT_EXCEPTION)return n||(r?this.categorizeExceptionMessage(r):Rt.ExceptionType.CLIENT_EXCEPTION);if(typeof e=="number")return this.categorizeStatusCode(e);switch(e){case Rt.RetryCode.CLIENT_TIMEOUT:return Rt.RetryReason.CLIENT_TIMEOUT;case Rt.RetryCode.UNKNOWN:default:return Rt.RetryReason.UNKNOWN}}isPerformanceCounterMetric(e){return Object.values(EZe.BreezePerformanceCounterNames).includes(e)}getTelemetryTypeFromEnvelope(e){if(e.data&&e.data.baseType)switch(e.data.baseType){case "MessageData":return vt.TelemetryType.TRACE;case "AvailabilityData":return vt.TelemetryType.AVAILABILITY;case "TelemetryEventData":return vt.TelemetryType.CUSTOM_EVENT;case "TelemetryExceptionData":return vt.TelemetryType.EXCEPTION;case "PageViewData":return vt.TelemetryType.PAGE_VIEW;case "RemoteDependencyData":return vt.TelemetryType.DEPENDENCY;case "RequestData":return vt.TelemetryType.REQUEST;case "MetricData":{let r=e.data.baseData;return r&&r.metrics&&r.metrics.length>0&&r.metrics.some(s=>this.isPerformanceCounterMetric(s.name))?vt.TelemetryType.PERFORMANCE_COUNTER:vt.TelemetryType.CUSTOM_METRIC}default:return vt.TelemetryType.UNKNOWN}return vt.TelemetryType.UNKNOWN}getTelemetrySuccessFromEnvelope(e){if(!e.data||!e.data.baseData)return;let r=e.data.baseType;if(r==="RequestData")return e.data.baseData.success;if(r==="RemoteDependencyData")return e.data.baseData.success}isTimeoutError(e){let r=["ETIMEDOUT","ESOCKETTIMEDOUT","ECONNRESET","ENOTFOUND"];if(e&&e.code&&r.includes(e.code))return  true;if(e&&e.message){let n=["timeout","timed out","connection reset"],s=e.message.toLowerCase();return n.some(a=>s.includes(a))}return  false}};mR.CustomerSDKStatsMetrics=qD;});var jD=f(TR=>{Object.defineProperty(TR,"__esModule",{value:true});TR.BaseSender=void 0;var Nc=(M(),A(H)),Wce=so(),TZe=qx(),Qn=(G(),A(Ze)),SZe=jce(),gZe=Yce(),Cc=so(),HD=FD(),ER=oo(),yZe=Kce(),AZe=6e4,GD=class{persister;numConsecutiveRedirects;retryTimer;networkStatsbeatMetrics;customerSDKStatsMetrics;longIntervalStatsbeatMetrics;statsbeatFailureCount=0;batchSendRetryIntervalMs=AZe;isStatsbeatSender;disableOfflineStorage;constructor(e){if(this.numConsecutiveRedirects=0,this.disableOfflineStorage=e.exporterOptions.disableOfflineStorage||false,e.trackStatsbeat&&(this.networkStatsbeatMetrics=SZe.NetworkStatsbeatMetrics.getInstance({instrumentationKey:e.instrumentationKey,endpointUrl:e.endpointUrl,disableOfflineStorage:this.disableOfflineStorage}),this.longIntervalStatsbeatMetrics=gZe.LongIntervalStatsbeatMetrics.getInstance({instrumentationKey:e.instrumentationKey,endpointUrl:e.endpointUrl,disableOfflineStorage:this.disableOfflineStorage}),process.env[ER.ENV_APPLICATIONINSIGHTS_SDKSTATS_ENABLED_PREVIEW])){let r;if(process.env[ER.ENV_APPLICATIONINSIGHTS_SDKSTATS_EXPORT_INTERVAL]){let n=process.env[ER.ENV_APPLICATIONINSIGHTS_SDKSTATS_EXPORT_INTERVAL],s=parseInt(n,10);!isNaN(s)&&s>0?r=s*1e3:Nc.diag.warn(`Invalid value for APPLICATIONINSIGHTS_SDKSTATS_EXPORT_INTERVAL environment variable: '${n}'. Expected a positive number (seconds). Using default export interval.`);}this.customerSDKStatsMetrics=yZe.CustomerSDKStatsMetrics.getInstance({instrumentationKey:e.instrumentationKey,endpointUrl:e.endpointUrl,disableOfflineStorage:this.disableOfflineStorage,networkCollectionInterval:r});}this.persister=new TZe.FileSystemPersist(e.instrumentationKey,e.exporterOptions,this.customerSDKStatsMetrics),this.retryTimer=null,this.isStatsbeatSender=e.isStatsbeatSender||false;}async exportEnvelopes(e){if(Nc.diag.info(`Exporting ${e.length} envelope(s)`),e.length<1)return {code:Qn.ExportResultCode.SUCCESS};try{let r=new Date().getTime(),{result:n,statusCode:s}=await this.send(e),o=new Date().getTime()-r;if(this.numConsecutiveRedirects=0,s===200)return this.retryTimer||(this.retryTimer=setTimeout(()=>{this.retryTimer=null,this.sendFirstPersistedFile();},this.batchSendRetryIntervalMs),this.retryTimer.unref()),this.isStatsbeatSender||(this.networkStatsbeatMetrics?.countSuccess(o),this.customerSDKStatsMetrics?.countSuccessfulItems(e)),{code:Qn.ExportResultCode.SUCCESS};if(s&&(0,HD.isRetriable)(s)){if(s===429||s===439)return this.isStatsbeatSender||(this.networkStatsbeatMetrics?.countThrottle(s),this.customerSDKStatsMetrics?.countRetryItems(e,s)),{code:Qn.ExportResultCode.SUCCESS};if(n){Nc.diag.info(n);let i=JSON.parse(n),c=[],u=[...e];if(i.itemsAccepted>0&&s===206&&!this.isStatsbeatSender&&this.networkStatsbeatMetrics?.countSuccess(o),i.errors&&i.errors.forEach(l=>{u[l.index]=void 0,l.statusCode&&(0,HD.isRetriable)(l.statusCode)&&c.push(e[l.index]);}),i.itemsAccepted>0&&(this.isStatsbeatSender||(this.networkStatsbeatMetrics?.countSuccess(o),this.customerSDKStatsMetrics?.countSuccessfulItems(e))),c.length>0)return this.isStatsbeatSender||(this.networkStatsbeatMetrics?.countRetry(s),this.customerSDKStatsMetrics?.countRetryItems(e,s)),await this.persist(c);if(!this.isStatsbeatSender){this.networkStatsbeatMetrics?.countFailure(o,s);let l=u.filter(Boolean);this.customerSDKStatsMetrics?.countDroppedItems(l,s);}return {code:Qn.ExportResultCode.FAILED}}else return this.isStatsbeatSender||(this.networkStatsbeatMetrics?.countRetry(s),this.customerSDKStatsMetrics?.countRetryItems(e,s)),await this.persist(e)}else return this.networkStatsbeatMetrics&&!this.isStatsbeatSender?s&&(this.networkStatsbeatMetrics.countFailure(o,s),this.customerSDKStatsMetrics?.countDroppedItems(e,s)):(this.incrementStatsbeatFailure(),this.customerSDKStatsMetrics?.countDroppedItems(e,Cc.DropCode.CLIENT_EXCEPTION)),{code:Qn.ExportResultCode.FAILED}}catch(r){let n=r;if(n.statusCode&&(n.statusCode===307||n.statusCode===308))if(this.numConsecutiveRedirects++,this.numConsecutiveRedirects<10){if(n.response&&n.response.headers){let s=n.response.headers.get("location");if(s)return this.handlePermanentRedirect(s),this.exportEnvelopes(e)}}else {let s=new Error("Circular redirect");return this.isStatsbeatSender||(this.networkStatsbeatMetrics?.countException(s),this.customerSDKStatsMetrics?.countDroppedItems(e,Cc.DropCode.CLIENT_EXCEPTION,s.message,Wce.ExceptionType.CLIENT_EXCEPTION)),{code:Qn.ExportResultCode.FAILED,error:s}}else {if(n.statusCode&&(0, HD.isRetriable)(n.statusCode)&&!this.isStatsbeatSender)return this.networkStatsbeatMetrics?.countRetry(n.statusCode),this.customerSDKStatsMetrics?.countRetryItems(e,n.statusCode),this.persist(e);if(n.statusCode===400&&n.message.includes("Invalid instrumentation key"))return this.shutdownStatsbeat(),{code:Qn.ExportResultCode.SUCCESS};if(n.statusCode&&this.isStatsbeatSender&&(0, Cc.isStatsbeatShutdownStatus)(n.statusCode))return this.incrementStatsbeatFailure(),{code:Qn.ExportResultCode.SUCCESS}}return this.isRetriableRestError(n)&&!this.isStatsbeatSender?(this.customerSDKStatsMetrics?.isTimeoutError(n)&&!this.isStatsbeatSender?(this.customerSDKStatsMetrics?.countRetryItems(e,Cc.RetryCode.CLIENT_TIMEOUT,"timeout_exception",Wce.ExceptionType.TIMEOUT_EXCEPTION),Nc.diag.error("Request timed out. Error message:",n.message)):n.statusCode&&(this.networkStatsbeatMetrics?.countRetry(n.statusCode),this.customerSDKStatsMetrics?.countRetryItems(e,n.statusCode)),Nc.diag.error("Retrying due to transient client side error. Error message:",n.message),this.persist(e)):(this.isStatsbeatSender||(this.networkStatsbeatMetrics?.countException(n),this.customerSDKStatsMetrics?.countDroppedItems(e,Cc.DropCode.CLIENT_EXCEPTION,n.message),Nc.diag.error("Envelopes could not be exported and are not retriable. Error message:",n.message)),{code:Qn.ExportResultCode.FAILED,error:n})}}async persist(e){try{return await this.persister.push(e)?{code:Qn.ExportResultCode.SUCCESS}:{code:Qn.ExportResultCode.FAILED,error:new Error("Failed to persist envelope in disk.")}}catch(r){return this.isStatsbeatSender||(this.networkStatsbeatMetrics?.countWriteFailure(),this.disableOfflineStorage&&e&&this.customerSDKStatsMetrics?.countDroppedItems(e,Cc.DropCode.CLIENT_STORAGE_DISABLED)),{code:Qn.ExportResultCode.FAILED,error:r}}}incrementStatsbeatFailure(){this.statsbeatFailureCount++,this.statsbeatFailureCount>Cc.MAX_STATSBEAT_FAILURES&&this.shutdownStatsbeat();}shutdownStatsbeat(){this.networkStatsbeatMetrics&&this.networkStatsbeatMetrics.shutdown(),this.longIntervalStatsbeatMetrics&&this.longIntervalStatsbeatMetrics?.shutdown(),this.customerSDKStatsMetrics&&this.customerSDKStatsMetrics.shutdown(),this.statsbeatFailureCount=0;}async sendFirstPersistedFile(){let e=await this.persister.shift();try{e&&await this.send(e);}catch(r){this.isStatsbeatSender||this.networkStatsbeatMetrics?.countReadFailure(),Nc.diag.warn("Failed to fetch persisted file",r);}}isRetriableRestError(e){let r=Object.values(ER.RetriableRestErrorTypes);return !!(e&&e.code&&r.includes(e.code))}};TR.BaseSender=GD;});var Zce=f(Ks=>{Object.defineProperty(Ks,"__esModule",{value:true});Ks.KnownContextTagKeys=Ks.KnownSeverityLevel=Ks.KnownDataPointType=void 0;var Xce;(function(t){t.Measurement="Measurement",t.Aggregation="Aggregation";})(Xce||(Ks.KnownDataPointType=Xce={}));var Qce;(function(t){t.Verbose="Verbose",t.Information="Information",t.Warning="Warning",t.Error="Error",t.Critical="Critical";})(Qce||(Ks.KnownSeverityLevel=Qce={}));var Jce;(function(t){t.AiApplicationVer="ai.application.ver",t.AiDeviceId="ai.device.id",t.AiDeviceLocale="ai.device.locale",t.AiDeviceModel="ai.device.model",t.AiDeviceOemName="ai.device.oemName",t.AiDeviceOsVersion="ai.device.osVersion",t.AiDeviceType="ai.device.type",t.AiLocationIp="ai.location.ip",t.AiLocationCountry="ai.location.country",t.AiLocationProvince="ai.location.province",t.AiLocationCity="ai.location.city",t.AiOperationId="ai.operation.id",t.AiOperationName="ai.operation.name",t.AiOperationParentId="ai.operation.parentId",t.AiOperationSyntheticSource="ai.operation.syntheticSource",t.AiOperationCorrelationVector="ai.operation.correlationVector",t.AiSessionId="ai.session.id",t.AiSessionIsFirst="ai.session.isFirst",t.AiUserAccountId="ai.user.accountId",t.AiUserId="ai.user.id",t.AiUserAuthUserId="ai.user.authUserId",t.AiCloudRole="ai.cloud.role",t.AiCloudRoleVer="ai.cloud.roleVer",t.AiCloudRoleInstance="ai.cloud.roleInstance",t.AiCloudLocation="ai.cloud.location",t.AiInternalSdkVersion="ai.internal.sdkVersion",t.AiInternalAgentVersion="ai.internal.agentVersion",t.AiInternalNodeName="ai.internal.nodeName";})(Jce||(Ks.KnownContextTagKeys=Jce={}));});var zD=f(Nd=>{Object.defineProperty(Nd,"__esModule",{value:true});Nd.encodeString=RZe;Nd.encodeByteArray=vZe;Nd.decodeString=OZe;Nd.decodeStringToString=NZe;function RZe(t){return Buffer.from(t).toString("base64")}function vZe(t){return (t instanceof Buffer?t:Buffer.from(t.buffer)).toString("base64")}function OZe(t){return Buffer.from(t,"base64")}function NZe(t){return Buffer.from(t,"base64").toString()}});var E_=f(Cd=>{Object.defineProperty(Cd,"__esModule",{value:true});Cd.XML_CHARKEY=Cd.XML_ATTRKEY=void 0;Cd.XML_ATTRKEY="$";Cd.XML_CHARKEY="_";});var YD=f(Pd=>{Object.defineProperty(Pd,"__esModule",{value:true});Pd.isPrimitiveBody=eue;Pd.isDuration=PZe;Pd.isValidUuid=MZe;Pd.flattenResponse=xZe;function eue(t,e){return e!=="Composite"&&e!=="Dictionary"&&(typeof t=="string"||typeof t=="number"||typeof t=="boolean"||e?.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i)!==null||t===void 0||t===null)}var CZe=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function PZe(t){return CZe.test(t)}var bZe=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i;function MZe(t){return bZe.test(t)}function IZe(t){let e=Object.assign(Object.assign({},t.headers),t.body);return t.hasNullableType&&Object.getOwnPropertyNames(e).length===0?t.shouldWrapBody?{body:null}:null:t.shouldWrapBody?Object.assign(Object.assign({},t.headers),{body:t.body}):e}function xZe(t,e){var r,n;let s=t.parsedHeaders;if(t.request.method==="HEAD")return Object.assign(Object.assign({},s),{body:t.parsedBody});let a=e&&e.bodyMapper,o=!!a?.nullable,i=a?.type.name;if(i==="Stream")return Object.assign(Object.assign({},s),{blobBody:t.blobBody,readableStreamBody:t.readableStreamBody});let c=i==="Composite"&&a.type.modelProperties||{},u=Object.keys(c).some(l=>c[l].serializedName==="");if(i==="Sequence"||u){let l=(r=t.parsedBody)!==null&&r!==void 0?r:[];for(let d of Object.keys(c))c[d].serializedName&&(l[d]=(n=t.parsedBody)===null||n===void 0?void 0:n[d]);if(s)for(let d of Object.keys(s))l[d]=s[d];return o&&!t.parsedBody&&!s&&Object.getOwnPropertyNames(c).length===0?null:l}return IZe({body:t.parsedBody,headers:s,hasNullableType:o,shouldWrapBody:eue(t.parsedBody,i)})}});var S_=f(T_=>{Object.defineProperty(T_,"__esModule",{value:true});T_.MapperTypeNames=void 0;T_.createSerializer=DZe;var LZe=(Ce(),A(Ne)),gR=LZe.__importStar(zD()),ar=E_(),rue=YD(),$D=class{constructor(e={},r=false){this.modelMappers=e,this.isXML=r;}validateConstraints(e,r,n){let s=(a,o)=>{throw new Error(`"${n}" with value "${r}" should satisfy the constraint "${a}": ${o}.`)};if(e.constraints&&r!==void 0&&r!==null){let{ExclusiveMaximum:a,ExclusiveMinimum:o,InclusiveMaximum:i,InclusiveMinimum:c,MaxItems:u,MaxLength:l,MinItems:d,MinLength:p,MultipleOf:h,Pattern:T,UniqueItems:g}=e.constraints;if(a!==void 0&&r>=a&&s("ExclusiveMaximum",a),o!==void 0&&r<=o&&s("ExclusiveMinimum",o),i!==void 0&&r>i&&s("InclusiveMaximum",i),c!==void 0&&r<c&&s("InclusiveMinimum",c),u!==void 0&&r.length>u&&s("MaxItems",u),l!==void 0&&r.length>l&&s("MaxLength",l),d!==void 0&&r.length<d&&s("MinItems",d),p!==void 0&&r.length<p&&s("MinLength",p),h!==void 0&&r%h!==0&&s("MultipleOf",h),T){let y=typeof T=="string"?new RegExp(T):T;(typeof r!="string"||r.match(y)===null)&&s("Pattern",T);}g&&r.some((y,R,b)=>b.indexOf(y)!==R)&&s("UniqueItems",g);}}serialize(e,r,n,s={xml:{}}){var a,o,i;let c={xml:{rootName:(a=s.xml.rootName)!==null&&a!==void 0?a:"",includeRoot:(o=s.xml.includeRoot)!==null&&o!==void 0?o:false,xmlCharKey:(i=s.xml.xmlCharKey)!==null&&i!==void 0?i:ar.XML_CHARKEY}},u={},l=e.type.name;n||(n=e.serializedName),l.match(/^Sequence$/i)!==null&&(u=[]),e.isConstant&&(r=e.defaultValue);let{required:d,nullable:p}=e;if(d&&p&&r===void 0)throw new Error(`${n} cannot be undefined.`);if(d&&!p&&r==null)throw new Error(`${n} cannot be null or undefined.`);if(!d&&p===false&&r===null)throw new Error(`${n} cannot be null.`);return r==null||l.match(/^any$/i)!==null?u=r:l.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/i)!==null?u=FZe(l,n,r):l.match(/^Enum$/i)!==null?u=qZe(n,e.type.allowedValues,r):l.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/i)!==null?u=jZe(l,r,n):l.match(/^ByteArray$/i)!==null?u=HZe(n,r):l.match(/^Base64Url$/i)!==null?u=GZe(n,r):l.match(/^Sequence$/i)!==null?u=zZe(this,e,r,n,!!this.isXML,c):l.match(/^Dictionary$/i)!==null?u=YZe(this,e,r,n,!!this.isXML,c):l.match(/^Composite$/i)!==null&&(u=KZe(this,e,r,n,!!this.isXML,c)),u}deserialize(e,r,n,s={xml:{}}){var a,o,i,c;let u={xml:{rootName:(a=s.xml.rootName)!==null&&a!==void 0?a:"",includeRoot:(o=s.xml.includeRoot)!==null&&o!==void 0?o:false,xmlCharKey:(i=s.xml.xmlCharKey)!==null&&i!==void 0?i:ar.XML_CHARKEY},ignoreUnknownProperties:(c=s.ignoreUnknownProperties)!==null&&c!==void 0?c:false};if(r==null)return this.isXML&&e.type.name==="Sequence"&&!e.xmlIsWrapped&&(r=[]),e.defaultValue!==void 0&&(r=e.defaultValue),r;let l,d=e.type.name;if(n||(n=e.serializedName),d.match(/^Composite$/i)!==null)l=XZe(this,e,r,n,u);else {if(this.isXML){let p=u.xml.xmlCharKey;r[ar.XML_ATTRKEY]!==void 0&&r[p]!==void 0&&(r=r[p]);}d.match(/^Number$/i)!==null?(l=parseFloat(r),isNaN(l)&&(l=r)):d.match(/^Boolean$/i)!==null?r==="true"?l=true:r==="false"?l=false:l=r:d.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/i)!==null?l=r:d.match(/^(Date|DateTime|DateTimeRfc1123)$/i)!==null?l=new Date(r):d.match(/^UnixTime$/i)!==null?l=BZe(r):d.match(/^ByteArray$/i)!==null?l=gR.decodeString(r):d.match(/^Base64Url$/i)!==null?l=kZe(r):d.match(/^Sequence$/i)!==null?l=JZe(this,e,r,n,u):d.match(/^Dictionary$/i)!==null&&(l=QZe(this,e,r,n,u));}return e.isConstant&&(l=e.defaultValue),l}};function DZe(t={},e=false){return new $D(t,e)}function wZe(t,e){let r=t.length;for(;r-1>=0&&t[r-1]===e;)--r;return t.substr(0,r)}function UZe(t){if(!t)return;if(!(t instanceof Uint8Array))throw new Error("Please provide an input of type Uint8Array for converting to Base64Url.");let e=gR.encodeByteArray(t);return wZe(e,"=").replace(/\+/g,"-").replace(/\//g,"_")}function kZe(t){if(t){if(t&&typeof t.valueOf()!="string")throw new Error("Please provide an input of type string for converting to Uint8Array");return t=t.replace(/-/g,"+").replace(/_/g,"/"),gR.decodeString(t)}}function KD(t){let e=[],r="";if(t){let n=t.split(".");for(let s of n)s.charAt(s.length-1)==="\\"?r+=s.substr(0,s.length-1)+".":(r+=s,e.push(r),r="");}return e}function VZe(t){if(t)return typeof t.valueOf()=="string"&&(t=new Date(t)),Math.floor(t.getTime()/1e3)}function BZe(t){if(t)return new Date(t*1e3)}function FZe(t,e,r){if(r!=null){if(t.match(/^Number$/i)!==null){if(typeof r!="number")throw new Error(`${e} with value ${r} must be of type number.`)}else if(t.match(/^String$/i)!==null){if(typeof r.valueOf()!="string")throw new Error(`${e} with value "${r}" must be of type string.`)}else if(t.match(/^Uuid$/i)!==null){if(!(typeof r.valueOf()=="string"&&(0, rue.isValidUuid)(r)))throw new Error(`${e} with value "${r}" must be of type string and a valid uuid.`)}else if(t.match(/^Boolean$/i)!==null){if(typeof r!="boolean")throw new Error(`${e} with value ${r} must be of type boolean.`)}else if(t.match(/^Stream$/i)!==null){let n=typeof r;if(n!=="string"&&typeof r.pipe!="function"&&typeof r.tee!="function"&&!(r instanceof ArrayBuffer)&&!ArrayBuffer.isView(r)&&!((typeof Blob=="function"||typeof Blob=="object")&&r instanceof Blob)&&n!=="function")throw new Error(`${e} must be a string, Blob, ArrayBuffer, ArrayBufferView, ReadableStream, or () => ReadableStream.`)}}return r}function qZe(t,e,r){if(!e)throw new Error(`Please provide a set of allowedValues to validate ${t} as an Enum Type.`);if(!e.some(s=>typeof s.valueOf()=="string"?s.toLowerCase()===r.toLowerCase():s===r))throw new Error(`${r} is not a valid value for ${t}. The valid values are: ${JSON.stringify(e)}.`);return r}function HZe(t,e){if(e!=null){if(!(e instanceof Uint8Array))throw new Error(`${t} must be of type Uint8Array.`);e=gR.encodeByteArray(e);}return e}function GZe(t,e){if(e!=null){if(!(e instanceof Uint8Array))throw new Error(`${t} must be of type Uint8Array.`);e=UZe(e);}return e}function jZe(t,e,r){if(e!=null){if(t.match(/^Date$/i)!==null){if(!(e instanceof Date||typeof e.valueOf()=="string"&&!isNaN(Date.parse(e))))throw new Error(`${r} must be an instanceof Date or a string in ISO8601 format.`);e=e instanceof Date?e.toISOString().substring(0,10):new Date(e).toISOString().substring(0,10);}else if(t.match(/^DateTime$/i)!==null){if(!(e instanceof Date||typeof e.valueOf()=="string"&&!isNaN(Date.parse(e))))throw new Error(`${r} must be an instanceof Date or a string in ISO8601 format.`);e=e instanceof Date?e.toISOString():new Date(e).toISOString();}else if(t.match(/^DateTimeRfc1123$/i)!==null){if(!(e instanceof Date||typeof e.valueOf()=="string"&&!isNaN(Date.parse(e))))throw new Error(`${r} must be an instanceof Date or a string in RFC-1123 format.`);e=e instanceof Date?e.toUTCString():new Date(e).toUTCString();}else if(t.match(/^UnixTime$/i)!==null){if(!(e instanceof Date||typeof e.valueOf()=="string"&&!isNaN(Date.parse(e))))throw new Error(`${r} must be an instanceof Date or a string in RFC-1123/ISO8601 format for it to be serialized in UnixTime/Epoch format.`);e=VZe(e);}else if(t.match(/^TimeSpan$/i)!==null&&!(0, rue.isDuration)(e))throw new Error(`${r} must be a string in ISO 8601 format. Instead was "${e}".`)}return e}function zZe(t,e,r,n,s,a){var o;if(!Array.isArray(r))throw new Error(`${n} must be of type Array.`);let i=e.type.element;if(!i||typeof i!="object")throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${n}.`);i.type.name==="Composite"&&i.type.className&&(i=(o=t.modelMappers[i.type.className])!==null&&o!==void 0?o:i);let c=[];for(let u=0;u<r.length;u++){let l=t.serialize(i,r[u],n,a);if(s&&i.xmlNamespace){let d=i.xmlNamespacePrefix?`xmlns:${i.xmlNamespacePrefix}`:"xmlns";i.type.name==="Composite"?(c[u]=Object.assign({},l),c[u][ar.XML_ATTRKEY]={[d]:i.xmlNamespace}):(c[u]={},c[u][a.xml.xmlCharKey]=l,c[u][ar.XML_ATTRKEY]={[d]:i.xmlNamespace});}else c[u]=l;}return c}function YZe(t,e,r,n,s,a){if(typeof r!="object")throw new Error(`${n} must be of type object.`);let o=e.type.value;if(!o||typeof o!="object")throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${n}.`);let i={};for(let c of Object.keys(r)){let u=t.serialize(o,r[c],n,a);i[c]=oue(o,u,s,a);}if(s&&e.xmlNamespace){let c=e.xmlNamespacePrefix?`xmlns:${e.xmlNamespacePrefix}`:"xmlns",u=i;return u[ar.XML_ATTRKEY]={[c]:e.xmlNamespace},u}return i}function $Ze(t,e,r){let n=e.type.additionalProperties;if(!n&&e.type.className){let s=nue(t,e,r);return s?.type.additionalProperties}return n}function nue(t,e,r){let n=e.type.className;if(!n)throw new Error(`Class name for model "${r}" is not provided in the mapper "${JSON.stringify(e,void 0,2)}".`);return t.modelMappers[n]}function iue(t,e,r){let n=e.type.modelProperties;if(!n){let s=nue(t,e,r);if(!s)throw new Error(`mapper() cannot be null or undefined for model "${e.type.className}".`);if(n=s?.type.modelProperties,!n)throw new Error(`modelProperties cannot be null or undefined in the mapper "${JSON.stringify(s)}" of type "${e.type.className}" for object "${r}".`)}return n}function KZe(t,e,r,n,s,a){if(SR(t,e)&&(e=sue(t,e,r,"clientName")),r!=null){let o={},i=iue(t,e,n);for(let u of Object.keys(i)){let l=i[u];if(l.readOnly)continue;let d,p=o;if(t.isXML)l.xmlIsWrapped?d=l.xmlName:d=l.xmlElementName||l.xmlName;else {let h=KD(l.serializedName);d=h.pop();for(let T of h){let g=p[T];g==null&&(r[u]!==void 0&&r[u]!==null||l.defaultValue!==void 0)&&(p[T]={}),p=p[T];}}if(p!=null){if(s&&e.xmlNamespace){let R=e.xmlNamespacePrefix?`xmlns:${e.xmlNamespacePrefix}`:"xmlns";p[ar.XML_ATTRKEY]=Object.assign(Object.assign({},p[ar.XML_ATTRKEY]),{[R]:e.xmlNamespace});}let h=l.serializedName!==""?n+"."+l.serializedName:n,T=r[u],g=SR(t,e);g&&g.clientName===u&&T==null&&(T=e.serializedName);let y=t.serialize(l,T,h,a);if(y!==void 0&&d!==void 0&&d!==null){let R=oue(l,y,s,a);s&&l.xmlIsAttribute?(p[ar.XML_ATTRKEY]=p[ar.XML_ATTRKEY]||{},p[ar.XML_ATTRKEY][d]=y):s&&l.xmlIsWrapped?p[d]={[l.xmlElementName]:R}:p[d]=R;}}}let c=$Ze(t,e,n);if(c){let u=Object.keys(i);for(let l in r)u.every(p=>p!==l)&&(o[l]=t.serialize(c,r[l],n+'["'+l+'"]',a));}return o}return r}function oue(t,e,r,n){if(!r||!t.xmlNamespace)return e;let a={[t.xmlNamespacePrefix?`xmlns:${t.xmlNamespacePrefix}`:"xmlns"]:t.xmlNamespace};if(["Composite"].includes(t.type.name)){if(e[ar.XML_ATTRKEY])return e;{let i=Object.assign({},e);return i[ar.XML_ATTRKEY]=a,i}}let o={};return o[n.xml.xmlCharKey]=e,o[ar.XML_ATTRKEY]=a,o}function WZe(t,e){return [ar.XML_ATTRKEY,e.xml.xmlCharKey].includes(t)}function XZe(t,e,r,n,s){var a,o;let i=(a=s.xml.xmlCharKey)!==null&&a!==void 0?a:ar.XML_CHARKEY;SR(t,e)&&(e=sue(t,e,r,"serializedName"));let c=iue(t,e,n),u={},l=[];for(let p of Object.keys(c)){let h=c[p],T=KD(c[p].serializedName);l.push(T[0]);let{serializedName:g,xmlName:y,xmlElementName:R}=h,b=n;g!==""&&g!==void 0&&(b=n+"."+g);let w=h.headerCollectionPrefix;if(w){let v={};for(let V of Object.keys(r))V.startsWith(w)&&(v[V.substring(w.length)]=t.deserialize(h.type.value,r[V],b,s)),l.push(V);u[p]=v;}else if(t.isXML)if(h.xmlIsAttribute&&r[ar.XML_ATTRKEY])u[p]=t.deserialize(h,r[ar.XML_ATTRKEY][y],b,s);else if(h.xmlIsMsText)r[i]!==void 0?u[p]=r[i]:typeof r=="string"&&(u[p]=r);else {let v=R||y||g;if(h.xmlIsWrapped){let V=r[y],B=(o=V?.[R])!==null&&o!==void 0?o:[];u[p]=t.deserialize(h,B,b,s),l.push(y);}else {let V=r[v];u[p]=t.deserialize(h,V,b,s),l.push(v);}}else {let v,V=r,B=0;for(let K of T){if(!V)break;B++,V=V[K];}V===null&&B<T.length&&(V=void 0),v=V;let F=e.type.polymorphicDiscriminator;F&&p===F.clientName&&v==null&&(v=e.serializedName);let te;if(Array.isArray(r[p])&&c[p].serializedName===""){v=r[p];let K=t.deserialize(h,v,b,s);for(let[Ee,C]of Object.entries(u))Object.prototype.hasOwnProperty.call(K,Ee)||(K[Ee]=C);u=K;}else (v!==void 0||h.defaultValue!==void 0)&&(te=t.deserialize(h,v,b,s),u[p]=te);}}let d=e.type.additionalProperties;if(d){let p=h=>{for(let T in c)if(KD(c[T].serializedName)[0]===h)return  false;return  true};for(let h in r)p(h)&&(u[h]=t.deserialize(d,r[h],n+'["'+h+'"]',s));}else if(r&&!s.ignoreUnknownProperties)for(let p of Object.keys(r))u[p]===void 0&&!l.includes(p)&&!WZe(p,s)&&(u[p]=r[p]);return u}function QZe(t,e,r,n,s){let a=e.type.value;if(!a||typeof a!="object")throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${n}`);if(r){let o={};for(let i of Object.keys(r))o[i]=t.deserialize(a,r[i],n,s);return o}return r}function JZe(t,e,r,n,s){var a;let o=e.type.element;if(!o||typeof o!="object")throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${n}`);if(r){Array.isArray(r)||(r=[r]),o.type.name==="Composite"&&o.type.className&&(o=(a=t.modelMappers[o.type.className])!==null&&a!==void 0?a:o);let i=[];for(let c=0;c<r.length;c++)i[c]=t.deserialize(o,r[c],`${n}[${c}]`,s);return i}return r}function ZZe(t,e,r){let n=[r];for(;n.length;){let s=n.shift(),a=e===s?e:s+"."+e;if(Object.prototype.hasOwnProperty.call(t,a))return t[a];for(let[o,i]of Object.entries(t))o.startsWith(s+".")&&i.type.uberParent===s&&i.type.className&&n.push(i.type.className);}}function sue(t,e,r,n){var s;let a=SR(t,e);if(a){let o=a[n];if(o){n==="serializedName"&&(o=o.replace(/\\/gi,""));let i=r[o],c=(s=e.type.uberParent)!==null&&s!==void 0?s:e.type.className;if(typeof i=="string"&&c){let u=ZZe(t.modelMappers.discriminators,i,c);u&&(e=u);}}}return e}function SR(t,e){return e.type.polymorphicDiscriminator||tue(t,e.type.uberParent)||tue(t,e.type.className)}function tue(t,e){return e&&t.modelMappers[e]&&t.modelMappers[e].type.polymorphicDiscriminator}T_.MapperTypeNames={Base64Url:"Base64Url",Boolean:"Boolean",ByteArray:"ByteArray",Composite:"Composite",Date:"Date",DateTime:"DateTime",DateTimeRfc1123:"DateTimeRfc1123",Dictionary:"Dictionary",Enum:"Enum",Number:"Number",Object:"Object",Sequence:"Sequence",String:"String",Stream:"Stream",TimeSpan:"TimeSpan",UnixTime:"UnixTime"};});var aue=f(yR=>{Object.defineProperty(yR,"__esModule",{value:true});yR.state=void 0;yR.state={operationRequestMap:new WeakMap};});var g_=f(AR=>{Object.defineProperty(AR,"__esModule",{value:true});AR.getOperationArgumentValueFromParameter=lue;AR.getOperationRequestInfo=pue;var cue=aue();function lue(t,e,r){let n=e.parameterPath,s=e.mapper,a;if(typeof n=="string"&&(n=[n]),Array.isArray(n)){if(n.length>0)if(s.isConstant)a=s.defaultValue;else {let o=uue(t,n);!o.propertyFound&&r&&(o=uue(r,n));let i=false;o.propertyFound||(i=s.required||n[0]==="options"&&n.length===2),a=i?s.defaultValue:o.propertyValue;}}else {s.required&&(a={});for(let o in n){let i=s.type.modelProperties[o],c=n[o],u=lue(t,{parameterPath:c,mapper:i},r);u!==void 0&&(a||(a={}),a[o]=u);}}return a}function uue(t,e){let r={propertyFound:false},n=0;for(;n<e.length;++n){let s=e[n];if(t&&s in t)t=t[s];else break}return n===e.length&&(r.propertyValue=t,r.propertyFound=true),r}var due=Symbol.for("@azure/core-client original request");function eet(t){return due in t}function pue(t){if(eet(t))return pue(t[due]);let e=cue.state.operationRequestMap.get(t);return e||(e={},cue.state.operationRequestMap.set(t,e)),e}});var XD=f(bd=>{Object.defineProperty(bd,"__esModule",{value:true});bd.deserializationPolicyName=void 0;bd.deserializationPolicy=iet;var tet=E_(),RR=$s(),fue=S_(),WD=g_(),ret=["application/json","text/json"],net=["application/xml","application/atom+xml"];bd.deserializationPolicyName="deserializationPolicy";function iet(t={}){var e,r,n,s,a,o,i;let c=(r=(e=t.expectedContentTypes)===null||e===void 0?void 0:e.json)!==null&&r!==void 0?r:ret,u=(s=(n=t.expectedContentTypes)===null||n===void 0?void 0:n.xml)!==null&&s!==void 0?s:net,l=t.parseXML,d=t.serializerOptions,p={xml:{rootName:(a=d?.xml.rootName)!==null&&a!==void 0?a:"",includeRoot:(o=d?.xml.includeRoot)!==null&&o!==void 0?o:false,xmlCharKey:(i=d?.xml.xmlCharKey)!==null&&i!==void 0?i:tet.XML_CHARKEY}};return {name:bd.deserializationPolicyName,async sendRequest(h,T){let g=await T(h);return aet(c,u,g,p,l)}}}function oet(t){let e,r=t.request,n=(0, WD.getOperationRequestInfo)(r),s=n?.operationSpec;return s&&(n?.operationResponseGetter?e=n?.operationResponseGetter(s,t):e=s.responses[t.status]),e}function set(t){let e=t.request,r=(0, WD.getOperationRequestInfo)(e),n=r?.shouldDeserialize,s;return n===void 0?s=true:typeof n=="boolean"?s=n:s=n(t),s}async function aet(t,e,r,n,s){let a=await det(t,e,r,n,s);if(!set(a))return a;let o=(0, WD.getOperationRequestInfo)(a.request),i=o?.operationSpec;if(!i||!i.responses)return a;let c=oet(a),{error:u,shouldReturnResponse:l}=uet(a,i,c,n);if(u)throw u;if(l)return a;if(c){if(c.bodyMapper){let d=a.parsedBody;i.isXML&&c.bodyMapper.type.name===fue.MapperTypeNames.Sequence&&(d=typeof d=="object"?d[c.bodyMapper.xmlElementName]:[]);try{a.parsedBody=i.serializer.deserialize(c.bodyMapper,d,"operationRes.parsedBody",n);}catch(p){throw new RR.RestError(`Error ${p} occurred in deserializing the responseBody - ${a.bodyAsText}`,{statusCode:a.status,request:a.request,response:a})}}else i.httpMethod==="HEAD"&&(a.parsedBody=r.status>=200&&r.status<300);c.headersMapper&&(a.parsedHeaders=i.serializer.deserialize(c.headersMapper,a.headers.toJSON(),"operationRes.parsedHeaders",{xml:{},ignoreUnknownProperties:true}));}return a}function cet(t){let e=Object.keys(t.responses);return e.length===0||e.length===1&&e[0]==="default"}function uet(t,e,r,n){var s,a,o,i,c;let u=200<=t.status&&t.status<300;if(cet(e)?u:!!r)if(r){if(!r.isError)return {error:null,shouldReturnResponse:false}}else return {error:null,shouldReturnResponse:false};let d=r??e.responses.default,p=!((s=t.request.streamResponseStatusCodes)===null||s===void 0)&&s.has(t.status)?`Unexpected status code: ${t.status}`:t.bodyAsText,h=new RR.RestError(p,{statusCode:t.status,request:t.request,response:t});if(!d&&!(!((o=(a=t.parsedBody)===null||a===void 0?void 0:a.error)===null||o===void 0)&&o.code&&(!((c=(i=t.parsedBody)===null||i===void 0?void 0:i.error)===null||c===void 0)&&c.message)))throw h;let T=d?.bodyMapper,g=d?.headersMapper;try{if(t.parsedBody){let y=t.parsedBody,R;if(T){let w=y;if(e.isXML&&T.type.name===fue.MapperTypeNames.Sequence){w=[];let v=T.xmlElementName;typeof y=="object"&&v&&(w=y[v]);}R=e.serializer.deserialize(T,w,"error.response.parsedBody",n);}let b=y.error||R||y;h.code=b.code,b.message&&(h.message=b.message),T&&(h.response.parsedBody=R);}t.headers&&g&&(h.response.parsedHeaders=e.serializer.deserialize(g,t.headers.toJSON(),"operationRes.parsedHeaders"));}catch(y){h.message=`Error "${y.message}" occurred in deserializing the responseBody - "${t.bodyAsText}" for the default response.`;}return {error:h,shouldReturnResponse:false}}async function det(t,e,r,n,s){var a;if(!(!((a=r.request.streamResponseStatusCodes)===null||a===void 0)&&a.has(r.status))&&r.bodyAsText){let o=r.bodyAsText,i=r.headers.get("Content-Type")||"",c=i?i.split(";").map(u=>u.toLowerCase()):[];try{if(c.length===0||c.some(u=>t.indexOf(u)!==-1))return r.parsedBody=JSON.parse(o),r;if(c.some(u=>e.indexOf(u)!==-1)){if(!s)throw new Error("Parsing XML not supported.");let u=await s(o,n.xml);return r.parsedBody=u,r}}catch(u){let l=`Error "${u}" occurred while parsing the response body - ${r.bodyAsText}.`,d=u.code||RR.RestError.PARSE_ERROR;throw new RR.RestError(l,{code:d,statusCode:r.status,request:r.request,response:r})}}return r}});var OR=f(vR=>{Object.defineProperty(vR,"__esModule",{value:true});vR.getStreamingResponseStatusCodes=fet;vR.getPathStringFromParameter=het;var pet=S_();function fet(t){let e=new Set;for(let r in t.responses){let n=t.responses[r];n.bodyMapper&&n.bodyMapper.type.name===pet.MapperTypeNames.Stream&&e.add(Number(r));}return e}function het(t){let{parameterPath:e,mapper:r}=t,n;return typeof e=="string"?n=e:Array.isArray(e)?n=e.join("."):n=r.serializedName,n}});var ZD=f(Ws=>{Object.defineProperty(Ws,"__esModule",{value:true});Ws.serializationPolicyName=void 0;Ws.serializationPolicy=_et;Ws.serializeHeaders=hue;Ws.serializeRequestBody=_ue;var JD=E_(),NR=g_(),QD=S_(),y_=OR();Ws.serializationPolicyName="serializationPolicy";function _et(t={}){let e=t.stringifyXML;return {name:Ws.serializationPolicyName,async sendRequest(r,n){let s=(0, NR.getOperationRequestInfo)(r),a=s?.operationSpec,o=s?.operationArguments;return a&&o&&(hue(r,o,a),_ue(r,o,a,e)),n(r)}}}function hue(t,e,r){var n,s;if(r.headerParameters)for(let o of r.headerParameters){let i=(0, NR.getOperationArgumentValueFromParameter)(e,o);if(i!=null||o.mapper.required){i=r.serializer.serialize(o.mapper,i,(0, y_.getPathStringFromParameter)(o));let c=o.mapper.headerCollectionPrefix;if(c)for(let u of Object.keys(i))t.headers.set(c+u,i[u]);else t.headers.set(o.mapper.serializedName||(0, y_.getPathStringFromParameter)(o),i);}}let a=(s=(n=e.options)===null||n===void 0?void 0:n.requestOptions)===null||s===void 0?void 0:s.customHeaders;if(a)for(let o of Object.keys(a))t.headers.set(o,a[o]);}function _ue(t,e,r,n=function(){throw new Error("XML serialization unsupported!")}){var s,a,o,i,c;let u=(s=e.options)===null||s===void 0?void 0:s.serializerOptions,l={xml:{rootName:(a=u?.xml.rootName)!==null&&a!==void 0?a:"",includeRoot:(o=u?.xml.includeRoot)!==null&&o!==void 0?o:false,xmlCharKey:(i=u?.xml.xmlCharKey)!==null&&i!==void 0?i:JD.XML_CHARKEY}},d=l.xml.xmlCharKey;if(r.requestBody&&r.requestBody.mapper){t.body=(0, NR.getOperationArgumentValueFromParameter)(e,r.requestBody);let p=r.requestBody.mapper,{required:h,serializedName:T,xmlName:g,xmlElementName:y,xmlNamespace:R,xmlNamespacePrefix:b,nullable:w}=p,v=p.type.name;try{if(t.body!==void 0&&t.body!==null||w&&t.body===null||h){let V=(0,y_.getPathStringFromParameter)(r.requestBody);t.body=r.serializer.serialize(p,t.body,V,l);let B=v===QD.MapperTypeNames.Stream;if(r.isXML){let F=b?`xmlns:${b}`:"xmlns",te=met(R,F,v,t.body,l);v===QD.MapperTypeNames.Sequence?t.body=n(Eet(te,y||g||T,F,R),{rootName:g||T,xmlCharKey:d}):B||(t.body=n(te,{rootName:g||T,xmlCharKey:d}));}else {if(v===QD.MapperTypeNames.String&&(!((c=r.contentType)===null||c===void 0)&&c.match("text/plain")||r.mediaType==="text"))return;B||(t.body=JSON.stringify(t.body));}}}catch(V){throw new Error(`Error "${V.message}" occurred in serializing the payload - ${JSON.stringify(T,void 0,"  ")}.`)}}else if(r.formDataParameters&&r.formDataParameters.length>0){t.formData={};for(let p of r.formDataParameters){let h=(0, NR.getOperationArgumentValueFromParameter)(e,p);if(h!=null){let T=p.mapper.serializedName||(0, y_.getPathStringFromParameter)(p);t.formData[T]=r.serializer.serialize(p.mapper,h,(0, y_.getPathStringFromParameter)(p),l);}}}}function met(t,e,r,n,s){if(t&&!["Composite","Sequence","Dictionary"].includes(r)){let a={};return a[s.xml.xmlCharKey]=n,a[JD.XML_ATTRKEY]={[e]:t},a}return n}function Eet(t,e,r,n){if(Array.isArray(t)||(t=[t]),!r||!n)return {[e]:t};let s={[e]:t};return s[JD.XML_ATTRKEY]={[r]:n},s}});var tw=f(ew=>{Object.defineProperty(ew,"__esModule",{value:true});ew.createClientPipeline=yet;var Tet=XD(),mue=$s(),get=ZD();function yet(t={}){let e=(0, mue.createPipelineFromOptions)(t??{});return t.credentialOptions&&e.addPolicy((0, mue.bearerTokenAuthenticationPolicy)({credential:t.credentialOptions.credential,scopes:t.credentialOptions.credentialScopes})),e.addPolicy((0, get.serializationPolicy)(t.serializationOptions),{phase:"Serialize"}),e.addPolicy((0, Tet.deserializationPolicy)(t.deserializationOptions),{phase:"Deserialize"}),e}});var Eue=f(nw=>{Object.defineProperty(nw,"__esModule",{value:true});nw.getCachedDefaultHttpClient=Ret;var Aet=$s(),rw;function Ret(){return rw||(rw=(0, Aet.createDefaultHttpClient)()),rw}});var yue=f(CR=>{Object.defineProperty(CR,"__esModule",{value:true});CR.getRequestUrl=Oet;CR.appendQueryParams=gue;var Sue=g_(),iw=OR(),vet={CSV:",",SSV:" ",Multi:"Multi",TSV:"	",Pipes:"|"};function Oet(t,e,r,n){let s=Net(e,r,n),a=false,o=Tue(t,s);if(e.path){let u=Tue(e.path,s);e.path==="/{nextLink}"&&u.startsWith("/")&&(u=u.substring(1)),Cet(u)?(o=u,a=true):o=Pet(o,u);}let{queryParams:i,sequenceParams:c}=bet(e,r,n);return o=gue(o,i,c,a),o}function Tue(t,e){let r=t;for(let[n,s]of e)r=r.split(n).join(s);return r}function Net(t,e,r){var n;let s=new Map;if(!((n=t.urlParameters)===null||n===void 0)&&n.length)for(let a of t.urlParameters){let o=(0, Sue.getOperationArgumentValueFromParameter)(e,a,r),i=(0, iw.getPathStringFromParameter)(a);o=t.serializer.serialize(a.mapper,o,i),a.skipEncoding||(o=encodeURIComponent(o)),s.set(`{${a.mapper.serializedName||i}}`,o);}return s}function Cet(t){return t.includes("://")}function Pet(t,e){if(!e)return t;let r=new URL(t),n=r.pathname;n.endsWith("/")||(n=`${n}/`),e.startsWith("/")&&(e=e.substring(1));let s=e.indexOf("?");if(s!==-1){let a=e.substring(0,s),o=e.substring(s+1);n=n+a,o&&(r.search=r.search?`${r.search}&${o}`:o);}else n=n+e;return r.pathname=n,r.toString()}function bet(t,e,r){var n;let s=new Map,a=new Set;if(!((n=t.queryParameters)===null||n===void 0)&&n.length)for(let o of t.queryParameters){o.mapper.type.name==="Sequence"&&o.mapper.serializedName&&a.add(o.mapper.serializedName);let i=(0, Sue.getOperationArgumentValueFromParameter)(e,o,r);if(i!=null||o.mapper.required){i=t.serializer.serialize(o.mapper,i,(0, iw.getPathStringFromParameter)(o));let c=o.collectionFormat?vet[o.collectionFormat]:"";if(Array.isArray(i)&&(i=i.map(u=>u??"")),o.collectionFormat==="Multi"&&i.length===0)continue;Array.isArray(i)&&(o.collectionFormat==="SSV"||o.collectionFormat==="TSV")&&(i=i.join(c)),o.skipEncoding||(Array.isArray(i)?i=i.map(u=>encodeURIComponent(u)):i=encodeURIComponent(i)),Array.isArray(i)&&(o.collectionFormat==="CSV"||o.collectionFormat==="Pipes")&&(i=i.join(c)),s.set(o.mapper.serializedName||(0, iw.getPathStringFromParameter)(o),i);}}return {queryParams:s,sequenceParams:a}}function Met(t){let e=new Map;if(!t||t[0]!=="?")return e;t=t.slice(1);let r=t.split("&");for(let n of r){let[s,a]=n.split("=",2),o=e.get(s);o?Array.isArray(o)?o.push(a):e.set(s,[o,a]):e.set(s,a);}return e}function gue(t,e,r,n=false){if(e.size===0)return t;let s=new URL(t),a=Met(s.search);for(let[i,c]of e){let u=a.get(i);if(Array.isArray(u))if(Array.isArray(c)){u.push(...c);let l=new Set(u);a.set(i,Array.from(l));}else u.push(c);else u?(Array.isArray(c)?c.unshift(u):r.has(i)&&a.set(i,[u,c]),n||a.set(i,c)):a.set(i,c);}let o=[];for(let[i,c]of a)if(typeof c=="string")o.push(`${i}=${c}`);else if(Array.isArray(c))for(let u of c)o.push(`${i}=${u}`);else o.push(`${i}=${c}`);return s.search=o.length?`?${o.join("&")}`:"",s.toString()}});var ow=f(PR=>{Object.defineProperty(PR,"__esModule",{value:true});PR.logger=void 0;var Iet=Ll();PR.logger=(0, Iet.createClientLogger)("core-client");});var Rue=f(bR=>{Object.defineProperty(bR,"__esModule",{value:true});bR.ServiceClient=void 0;var xet=$s(),Let=tw(),Aue=YD(),Det=Eue(),wet=g_(),Uet=yue(),ket=OR(),Vet=ow(),sw=class{constructor(e={}){var r,n;if(this._requestContentType=e.requestContentType,this._endpoint=(r=e.endpoint)!==null&&r!==void 0?r:e.baseUri,e.baseUri&&Vet.logger.warning("The baseUri option for SDK Clients has been deprecated, please use endpoint instead."),this._allowInsecureConnection=e.allowInsecureConnection,this._httpClient=e.httpClient||(0, Det.getCachedDefaultHttpClient)(),this.pipeline=e.pipeline||Bet(e),!((n=e.additionalPolicies)===null||n===void 0)&&n.length)for(let{policy:s,position:a}of e.additionalPolicies){let o=a==="perRetry"?"Sign":void 0;this.pipeline.addPolicy(s,{afterPhase:o});}}async sendRequest(e){return this.pipeline.sendRequest(this._httpClient,e)}async sendOperationRequest(e,r){let n=r.baseUrl||this._endpoint;if(!n)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a endpoint string property that contains the base URL to use.");let s=(0, Uet.getRequestUrl)(n,r,e,this),a=(0, xet.createPipelineRequest)({url:s});a.method=r.httpMethod;let o=(0, wet.getOperationRequestInfo)(a);o.operationSpec=r,o.operationArguments=e;let i=r.contentType||this._requestContentType;i&&r.requestBody&&a.headers.set("Content-Type",i);let c=e.options;if(c){let u=c.requestOptions;u&&(u.timeout&&(a.timeout=u.timeout),u.onUploadProgress&&(a.onUploadProgress=u.onUploadProgress),u.onDownloadProgress&&(a.onDownloadProgress=u.onDownloadProgress),u.shouldDeserialize!==void 0&&(o.shouldDeserialize=u.shouldDeserialize),u.allowInsecureConnection&&(a.allowInsecureConnection=true)),c.abortSignal&&(a.abortSignal=c.abortSignal),c.tracingOptions&&(a.tracingOptions=c.tracingOptions);}this._allowInsecureConnection&&(a.allowInsecureConnection=true),a.streamResponseStatusCodes===void 0&&(a.streamResponseStatusCodes=(0, ket.getStreamingResponseStatusCodes)(r));try{let u=await this.sendRequest(a),l=(0,Aue.flattenResponse)(u,r.responses[u.status]);return c?.onResponse&&c.onResponse(u,l),l}catch(u){if(typeof u=="object"&&u?.response){let l=u.response,d=(0, Aue.flattenResponse)(l,r.responses[u.statusCode]||r.responses.default);u.details=d,c?.onResponse&&c.onResponse(l,d,u);}throw u}}};bR.ServiceClient=sw;function Bet(t){let e=Fet(t),r=t.credential&&e?{credentialScopes:e,credential:t.credential}:void 0;return (0, Let.createClientPipeline)(Object.assign(Object.assign({},t),{credentialOptions:r}))}function Fet(t){if(t.credentialScopes)return t.credentialScopes;if(t.endpoint)return `${t.endpoint}/.default`;if(t.baseUri)return `${t.baseUri}/.default`;if(t.credential&&!t.credentialScopes)throw new Error("When using credentials, the ServiceClientOptions must contain either a endpoint or a credentialScopes. Unable to create a bearerTokenAuthenticationPolicy")}});var Oue=f(MR=>{Object.defineProperty(MR,"__esModule",{value:true});MR.parseCAEChallenge=vue;MR.authorizeRequestOnClaimChallenge=Get;var qet=ow(),Het=zD();function vue(t){return `, ${t.trim()}`.split(", Bearer ").filter(r=>r).map(r=>`${r.trim()}, `.split('", ').filter(a=>a).map(a=>(([o,i])=>({[o]:i}))(a.trim().split('="'))).reduce((a,o)=>Object.assign(Object.assign({},a),o),{}))}async function Get(t){var e;let{scopes:r,response:n}=t,s=t.logger||qet.logger,a=n.headers.get("WWW-Authenticate");if(!a)return s.info("The WWW-Authenticate header was missing. Failed to perform the Continuous Access Evaluation authentication flow."),false;let i=(vue(a)||[]).find(u=>u.claims);if(!i)return s.info('The WWW-Authenticate header was missing the necessary "claims" to perform the Continuous Access Evaluation authentication flow.'),false;let c=await t.getAccessToken(i.scope?[i.scope]:r,{claims:(0, Het.decodeStringToString)(i.claims)});return c?(t.request.headers.set("Authorization",`${(e=c.tokenType)!==null&&e!==void 0?e:"Bearer"} ${c.token}`),true):false}});var Cue=f(IR=>{Object.defineProperty(IR,"__esModule",{value:true});IR.authorizeRequestOnTenantChallenge=void 0;var Nue={DefaultScope:"/.default",HeaderConstants:{AUTHORIZATION:"authorization"}};function jet(t){return /^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/.test(t)}var zet=async t=>{var e;let r=Xet(t.request),n=Ket(t.response);if(n){let s=Wet(n),a=$et(t,s),o=Yet(s);if(!o)return  false;let i=await t.getAccessToken(a,Object.assign(Object.assign({},r),{tenantId:o}));return i?(t.request.headers.set(Nue.HeaderConstants.AUTHORIZATION,`${(e=i.tokenType)!==null&&e!==void 0?e:"Bearer"} ${i.token}`),true):false}return  false};IR.authorizeRequestOnTenantChallenge=zet;function Yet(t){let n=new URL(t.authorization_uri).pathname.split("/")[1];if(n&&jet(n))return n}function $et(t,e){if(!e.resource_id)return t.scopes;let r=new URL(e.resource_id);r.pathname=Nue.DefaultScope;let n=r.toString();return n==="https://disk.azure.com/.default"&&(n="https://disk.azure.com//.default"),[n]}function Ket(t){let e=t.headers.get("WWW-Authenticate");if(t.status===401&&e)return e}function Wet(t){return `${t.slice(7).trim()} `.split(" ").filter(s=>s).map(s=>(([a,o])=>({[a]:o}))(s.trim().split("="))).reduce((s,a)=>Object.assign(Object.assign({},s),a),{})}function Xet(t){return {abortSignal:t.abortSignal,requestOptions:{timeout:t.timeout},tracingOptions:t.tracingOptions}}});var aw=f(pt=>{Object.defineProperty(pt,"__esModule",{value:true});pt.authorizeRequestOnTenantChallenge=pt.authorizeRequestOnClaimChallenge=pt.serializationPolicyName=pt.serializationPolicy=pt.deserializationPolicyName=pt.deserializationPolicy=pt.XML_CHARKEY=pt.XML_ATTRKEY=pt.createClientPipeline=pt.ServiceClient=pt.MapperTypeNames=pt.createSerializer=void 0;var Pue=S_();Object.defineProperty(pt,"createSerializer",{enumerable:true,get:function(){return Pue.createSerializer}});Object.defineProperty(pt,"MapperTypeNames",{enumerable:true,get:function(){return Pue.MapperTypeNames}});var Qet=Rue();Object.defineProperty(pt,"ServiceClient",{enumerable:true,get:function(){return Qet.ServiceClient}});var Jet=tw();Object.defineProperty(pt,"createClientPipeline",{enumerable:true,get:function(){return Jet.createClientPipeline}});var bue=E_();Object.defineProperty(pt,"XML_ATTRKEY",{enumerable:true,get:function(){return bue.XML_ATTRKEY}});Object.defineProperty(pt,"XML_CHARKEY",{enumerable:true,get:function(){return bue.XML_CHARKEY}});var Mue=XD();Object.defineProperty(pt,"deserializationPolicy",{enumerable:true,get:function(){return Mue.deserializationPolicy}});Object.defineProperty(pt,"deserializationPolicyName",{enumerable:true,get:function(){return Mue.deserializationPolicyName}});var Iue=ZD();Object.defineProperty(pt,"serializationPolicy",{enumerable:true,get:function(){return Iue.serializationPolicy}});Object.defineProperty(pt,"serializationPolicyName",{enumerable:true,get:function(){return Iue.serializationPolicyName}});var Zet=Oue();Object.defineProperty(pt,"authorizeRequestOnClaimChallenge",{enumerable:true,get:function(){return Zet.authorizeRequestOnClaimChallenge}});var ett=Cue();Object.defineProperty(pt,"authorizeRequestOnTenantChallenge",{enumerable:true,get:function(){return ett.authorizeRequestOnTenantChallenge}});});var xue=f(uo=>{Object.defineProperty(uo,"__esModule",{value:true});uo.host=uo.accept=uo.body=uo.contentType=void 0;uo.contentType={parameterPath:["options","contentType"],mapper:{defaultValue:"application/json",isConstant:true,serializedName:"Content-Type",type:{name:"String"}}};uo.body={parameterPath:"body",mapper:{serializedName:"body",required:true,type:{name:"Sequence",element:{type:{name:"Composite",className:"TelemetryItem"}}}}};uo.accept={parameterPath:"accept",mapper:{defaultValue:"application/json",isConstant:true,serializedName:"Accept",type:{name:"String"}}};uo.host={parameterPath:"host",mapper:{serializedName:"Host",required:true,type:{name:"String"}},skipEncoding:true};});var Lue=f(pe=>{Object.defineProperty(pe,"__esModule",{value:true});pe.RequestData=pe.RemoteDependencyData=pe.PageViewPerfData=pe.PageViewData=pe.MetricsData=pe.MessageData=pe.TelemetryExceptionData=pe.TelemetryEventData=pe.AvailabilityData=pe.StackFrame=pe.TelemetryExceptionDetails=pe.MetricDataPoint=pe.TelemetryErrorDetails=pe.TrackResponse=pe.MonitorDomain=pe.MonitorBase=pe.TelemetryItem=void 0;pe.TelemetryItem={type:{name:"Composite",className:"TelemetryItem",modelProperties:{version:{defaultValue:1,serializedName:"ver",type:{name:"Number"}},name:{serializedName:"name",required:true,type:{name:"String"}},time:{serializedName:"time",required:true,type:{name:"DateTime"}},sampleRate:{defaultValue:100,serializedName:"sampleRate",type:{name:"Number"}},sequence:{constraints:{MaxLength:64},serializedName:"seq",type:{name:"String"}},instrumentationKey:{serializedName:"iKey",type:{name:"String"}},tags:{serializedName:"tags",type:{name:"Dictionary",value:{type:{name:"String"}}}},data:{serializedName:"data",type:{name:"Composite",className:"MonitorBase"}}}}};pe.MonitorBase={type:{name:"Composite",className:"MonitorBase",modelProperties:{baseType:{serializedName:"baseType",type:{name:"String"}},baseData:{serializedName:"baseData",type:{name:"Composite",className:"MonitorDomain"}}}}};pe.MonitorDomain={type:{name:"Composite",className:"MonitorDomain",additionalProperties:{type:{name:"Object"}},modelProperties:{version:{defaultValue:2,serializedName:"ver",required:true,type:{name:"Number"}}}}};pe.TrackResponse={type:{name:"Composite",className:"TrackResponse",modelProperties:{itemsReceived:{serializedName:"itemsReceived",type:{name:"Number"}},itemsAccepted:{serializedName:"itemsAccepted",type:{name:"Number"}},errors:{serializedName:"errors",type:{name:"Sequence",element:{type:{name:"Composite",className:"TelemetryErrorDetails"}}}}}}};pe.TelemetryErrorDetails={type:{name:"Composite",className:"TelemetryErrorDetails",modelProperties:{index:{serializedName:"index",type:{name:"Number"}},statusCode:{serializedName:"statusCode",type:{name:"Number"}},message:{serializedName:"message",type:{name:"String"}}}}};pe.MetricDataPoint={type:{name:"Composite",className:"MetricDataPoint",modelProperties:{namespace:{constraints:{MaxLength:256},serializedName:"ns",type:{name:"String"}},name:{constraints:{MaxLength:1024},serializedName:"name",required:true,type:{name:"String"}},dataPointType:{serializedName:"kind",type:{name:"String"}},value:{serializedName:"value",required:true,type:{name:"Number"}},count:{serializedName:"count",nullable:true,type:{name:"Number"}},min:{serializedName:"min",nullable:true,type:{name:"Number"}},max:{serializedName:"max",nullable:true,type:{name:"Number"}},stdDev:{serializedName:"stdDev",nullable:true,type:{name:"Number"}}}}};pe.TelemetryExceptionDetails={type:{name:"Composite",className:"TelemetryExceptionDetails",modelProperties:{id:{serializedName:"id",type:{name:"Number"}},outerId:{serializedName:"outerId",type:{name:"Number"}},typeName:{constraints:{MaxLength:1024},serializedName:"typeName",type:{name:"String"}},message:{constraints:{MaxLength:32768},serializedName:"message",required:true,type:{name:"String"}},hasFullStack:{defaultValue:true,serializedName:"hasFullStack",type:{name:"Boolean"}},stack:{constraints:{MaxLength:32768},serializedName:"stack",type:{name:"String"}},parsedStack:{serializedName:"parsedStack",type:{name:"Sequence",element:{type:{name:"Composite",className:"StackFrame"}}}}}}};pe.StackFrame={type:{name:"Composite",className:"StackFrame",modelProperties:{level:{serializedName:"level",required:true,type:{name:"Number"}},method:{constraints:{MaxLength:1024},serializedName:"method",required:true,type:{name:"String"}},assembly:{constraints:{MaxLength:1024},serializedName:"assembly",type:{name:"String"}},fileName:{constraints:{MaxLength:1024},serializedName:"fileName",type:{name:"String"}},line:{serializedName:"line",type:{name:"Number"}}}}};pe.AvailabilityData={type:{name:"Composite",className:"AvailabilityData",additionalProperties:{type:{name:"Object"}},modelProperties:{...pe.MonitorDomain.type.modelProperties,id:{constraints:{MaxLength:512},serializedName:"id",required:true,type:{name:"String"}},name:{constraints:{MaxLength:1024},serializedName:"name",required:true,type:{name:"String"}},duration:{serializedName:"duration",required:true,type:{name:"String"}},success:{serializedName:"success",required:true,type:{name:"Boolean"}},runLocation:{constraints:{MaxLength:1024},serializedName:"runLocation",type:{name:"String"}},message:{constraints:{MaxLength:8192},serializedName:"message",type:{name:"String"}},properties:{serializedName:"properties",type:{name:"Dictionary",value:{type:{name:"String"},constraints:{MaxLength:8192}}}},measurements:{serializedName:"measurements",type:{name:"Dictionary",value:{type:{name:"Number"}}}}}}};pe.TelemetryEventData={type:{name:"Composite",className:"TelemetryEventData",additionalProperties:{type:{name:"Object"}},modelProperties:{...pe.MonitorDomain.type.modelProperties,name:{constraints:{MaxLength:512},serializedName:"name",required:true,type:{name:"String"}},properties:{serializedName:"properties",type:{name:"Dictionary",value:{type:{name:"String"},constraints:{MaxLength:8192}}}},measurements:{serializedName:"measurements",type:{name:"Dictionary",value:{type:{name:"Number"}}}}}}};pe.TelemetryExceptionData={type:{name:"Composite",className:"TelemetryExceptionData",additionalProperties:{type:{name:"Object"}},modelProperties:{...pe.MonitorDomain.type.modelProperties,exceptions:{serializedName:"exceptions",required:true,type:{name:"Sequence",element:{type:{name:"Composite",className:"TelemetryExceptionDetails"}}}},severityLevel:{serializedName:"severityLevel",nullable:true,type:{name:"String"}},problemId:{constraints:{MaxLength:1024},serializedName:"problemId",type:{name:"String"}},properties:{serializedName:"properties",type:{name:"Dictionary",value:{type:{name:"String"},constraints:{MaxLength:8192}}}},measurements:{serializedName:"measurements",type:{name:"Dictionary",value:{type:{name:"Number"}}}}}}};pe.MessageData={type:{name:"Composite",className:"MessageData",additionalProperties:{type:{name:"Object"}},modelProperties:{...pe.MonitorDomain.type.modelProperties,message:{constraints:{MaxLength:32768},serializedName:"message",required:true,type:{name:"String"}},severityLevel:{serializedName:"severityLevel",type:{name:"String"}},properties:{serializedName:"properties",type:{name:"Dictionary",value:{type:{name:"String"},constraints:{MaxLength:8192}}}},measurements:{serializedName:"measurements",type:{name:"Dictionary",value:{type:{name:"Number"}}}}}}};pe.MetricsData={type:{name:"Composite",className:"MetricsData",additionalProperties:{type:{name:"Object"}},modelProperties:{...pe.MonitorDomain.type.modelProperties,metrics:{serializedName:"metrics",required:true,type:{name:"Sequence",element:{type:{name:"Composite",className:"MetricDataPoint"}}}},properties:{serializedName:"properties",type:{name:"Dictionary",value:{type:{name:"String"},constraints:{MaxLength:8192}}}}}}};pe.PageViewData={type:{name:"Composite",className:"PageViewData",additionalProperties:{type:{name:"Object"}},modelProperties:{...pe.MonitorDomain.type.modelProperties,id:{constraints:{MaxLength:512},serializedName:"id",required:true,type:{name:"String"}},name:{constraints:{MaxLength:1024},serializedName:"name",required:true,type:{name:"String"}},url:{constraints:{MaxLength:2048},serializedName:"url",type:{name:"String"}},duration:{serializedName:"duration",type:{name:"String"}},referredUri:{constraints:{MaxLength:2048},serializedName:"referredUri",type:{name:"String"}},properties:{serializedName:"properties",type:{name:"Dictionary",value:{type:{name:"String"},constraints:{MaxLength:8192}}}},measurements:{serializedName:"measurements",type:{name:"Dictionary",value:{type:{name:"Number"}}}}}}};pe.PageViewPerfData={type:{name:"Composite",className:"PageViewPerfData",additionalProperties:{type:{name:"Object"}},modelProperties:{...pe.MonitorDomain.type.modelProperties,id:{constraints:{MaxLength:512},serializedName:"id",required:true,type:{name:"String"}},name:{constraints:{MaxLength:1024},serializedName:"name",required:true,type:{name:"String"}},url:{constraints:{MaxLength:2048},serializedName:"url",type:{name:"String"}},duration:{serializedName:"duration",type:{name:"String"}},perfTotal:{serializedName:"perfTotal",type:{name:"String"}},networkConnect:{serializedName:"networkConnect",type:{name:"String"}},sentRequest:{serializedName:"sentRequest",type:{name:"String"}},receivedResponse:{serializedName:"receivedResponse",type:{name:"String"}},domProcessing:{serializedName:"domProcessing",type:{name:"String"}},properties:{serializedName:"properties",type:{name:"Dictionary",value:{type:{name:"String"},constraints:{MaxLength:8192}}}},measurements:{serializedName:"measurements",type:{name:"Dictionary",value:{type:{name:"Number"}}}}}}};pe.RemoteDependencyData={type:{name:"Composite",className:"RemoteDependencyData",additionalProperties:{type:{name:"Object"}},modelProperties:{...pe.MonitorDomain.type.modelProperties,id:{constraints:{MaxLength:512},serializedName:"id",type:{name:"String"}},name:{constraints:{MaxLength:1024},serializedName:"name",required:true,type:{name:"String"}},resultCode:{constraints:{MaxLength:1024},serializedName:"resultCode",type:{name:"String"}},data:{constraints:{MaxLength:8192},serializedName:"data",type:{name:"String"}},type:{constraints:{MaxLength:1024},serializedName:"type",type:{name:"String"}},target:{constraints:{MaxLength:1024},serializedName:"target",type:{name:"String"}},duration:{serializedName:"duration",required:true,type:{name:"String"}},success:{defaultValue:true,serializedName:"success",type:{name:"Boolean"}},properties:{serializedName:"properties",type:{name:"Dictionary",value:{type:{name:"String"},constraints:{MaxLength:8192}}}},measurements:{serializedName:"measurements",type:{name:"Dictionary",value:{type:{name:"Number"}}}}}}};pe.RequestData={type:{name:"Composite",className:"RequestData",additionalProperties:{type:{name:"Object"}},modelProperties:{...pe.MonitorDomain.type.modelProperties,id:{constraints:{MaxLength:512},serializedName:"id",required:true,type:{name:"String"}},name:{constraints:{MaxLength:1024},serializedName:"name",type:{name:"String"}},duration:{serializedName:"duration",required:true,type:{name:"String"}},success:{defaultValue:true,serializedName:"success",required:true,type:{name:"Boolean"}},responseCode:{constraints:{MaxLength:1024},serializedName:"responseCode",required:true,type:{name:"String"}},source:{constraints:{MaxLength:1024},serializedName:"source",type:{name:"String"}},url:{constraints:{MaxLength:2048},serializedName:"url",type:{name:"String"}},properties:{serializedName:"properties",type:{name:"Dictionary",value:{type:{name:"String"},constraints:{MaxLength:8192}}}},measurements:{serializedName:"measurements",type:{name:"Dictionary",value:{type:{name:"Number"}}}}}}};});var wue=f(LR=>{Object.defineProperty(LR,"__esModule",{value:true});LR.ApplicationInsightsClient=void 0;var uw=(Ce(),A(Ne)),Due=uw.__importStar(aw()),xR=uw.__importStar(xue()),Xs=uw.__importStar(Lue()),cw=class extends Due.ServiceClient{host;constructor(e){e||(e={});let r={requestContentType:"application/json; charset=utf-8"},n="azsdk-js-monitor-opentelemetry-exporter/1.0.0-beta.35",s=e.userAgentOptions&&e.userAgentOptions.userAgentPrefix?`${e.userAgentOptions.userAgentPrefix} ${n}`:`${n}`,a={...r,...e,userAgentOptions:{userAgentPrefix:s},endpoint:e.endpoint??e.baseUri??"{Host}/v2.1"};super(a),this.host=e.host||"https://dc.services.visualstudio.com";}track(e,r){return this.sendOperationRequest({body:e,options:r},rtt)}};LR.ApplicationInsightsClient=cw;var ttt=Due.createSerializer(Xs,false),rtt={path:"/track",httpMethod:"POST",responses:{200:{bodyMapper:Xs.TrackResponse},206:{bodyMapper:Xs.TrackResponse},400:{bodyMapper:Xs.TrackResponse,isError:true},402:{bodyMapper:Xs.TrackResponse,isError:true},429:{bodyMapper:Xs.TrackResponse,isError:true},500:{bodyMapper:Xs.TrackResponse,isError:true},503:{bodyMapper:Xs.TrackResponse,isError:true}},requestBody:xR.body,urlParameters:[xR.host],headerParameters:[xR.contentType,xR.accept],mediaType:"json",serializer:ttt};});var Md=f(A_=>{Object.defineProperty(A_,"__esModule",{value:true});A_.ApplicationInsightsClient=void 0;var ntt=(Ce(),A(Ne));ntt.__exportStar(Zce(),A_);var itt=wue();Object.defineProperty(A_,"ApplicationInsightsClient",{enumerable:true,get:function(){return itt.ApplicationInsightsClient}});});var Uue=f(DR=>{Object.defineProperty(DR,"__esModule",{value:true});DR.HttpSender=void 0;var ott=(Ce(),A(Ne)),stt=ott.__importDefault(P("url")),att=(M(),A(H)),ctt=$s(),utt=Md(),ltt=jD(),dtt="https://monitor.azure.com//.default",lw=class extends ltt.BaseSender{appInsightsClient;appInsightsClientOptions;constructor(e){super(e),this.appInsightsClientOptions={host:e.endpointUrl,...e.exporterOptions},this.appInsightsClientOptions.credential&&(e.aadAudience?this.appInsightsClientOptions.credentialScopes=[e.aadAudience]:this.appInsightsClientOptions.credentialScopes=[dtt]),this.appInsightsClient=new utt.ApplicationInsightsClient(this.appInsightsClientOptions),this.appInsightsClient.pipeline.removePolicy({name:ctt.redirectPolicyName});}async send(e){let r={},n;function s(a,o){n=a,r.onResponse&&r.onResponse(a,o);}return await this.appInsightsClient.track(e,{...r,onResponse:s}),{statusCode:n?.status,result:n?.bodyAsText??""}}async shutdown(){att.diag.info("HttpSender shutting down");}handlePermanentRedirect(e){if(e){let r=new stt.default.URL(e);r&&r.host&&(this.appInsightsClient.host="https://"+r.host);}}};DR.HttpSender=lw;});var kue=f(R_=>{Object.defineProperty(R_,"__esModule",{value:true});R_.Context=void 0;R_.getInstance=Ett;var ptt=(Ce(),A(Ne)),ftt=(G(),A(Ze)),htt=(mc(),A(_c)),_tt=Md(),mtt=ptt.__importStar(Bo()),Id=oo(),dw=null,wR=class t{tags;static sdkVersion=null;static opentelemetryVersion=null;static nodeVersion="";constructor(){this.tags={},this._loadInternalContext();}_loadInternalContext(){let{node:e}=process.versions;[t.nodeVersion]=e.split("."),t.opentelemetryVersion=ftt.SDK_INFO[htt.ATTR_TELEMETRY_SDK_VERSION],t.sdkVersion=mtt.packageVersion;let r=process.env[Id.ENV_AZURE_MONITOR_PREFIX]?process.env[Id.ENV_AZURE_MONITOR_PREFIX]:"",n=this._getVersion(),s=`${r}node${t.nodeVersion}:otel${t.opentelemetryVersion}:${n}`;this.tags[_tt.KnownContextTagKeys.AiInternalSdkVersion]=s;}_getVersion(){return process.env[Id.ENV_APPLICATIONINSIGHTS_SHIM_VERSION]?`sha${process.env[Id.ENV_APPLICATIONINSIGHTS_SHIM_VERSION]}`:process.env[Id.ENV_AZURE_MONITOR_DISTRO_VERSION]?`dst${process.env[Id.ENV_AZURE_MONITOR_DISTRO_VERSION]}`:`ext${t.sdkVersion}`}};R_.Context=wR;function Ett(){return dw||(dw=new wR),dw}});var Vue=f(pw=>{Object.defineProperty(pw,"__esModule",{value:true});var Ttt=(Ce(),A(Ne));Ttt.__exportStar(kue(),pw);});var Bue=f(Pc=>{Object.defineProperty(Pc,"__esModule",{value:true});var v_=(Ce(),A(Ne));v_.__exportStar(foe(),Pc);v_.__exportStar(qx(),Pc);v_.__exportStar(jD(),Pc);v_.__exportStar(Uue(),Pc);v_.__exportStar(Vue(),Pc);});var Oc=f(fw=>{Object.defineProperty(fw,"__esModule",{value:true});var Stt=(Ce(),A(Ne));Stt.__exportStar(Bue(),fw);});var h_=f(Ni=>{Object.defineProperty(Ni,"__esModule",{value:true});Ni.hrTimeToDate=Ott;Ni.createTagsFromResource=que;Ni.isSqlDB=Ptt;Ni.getUrl=btt;Ni.getDependencyTarget=Mtt;Ni.createResourceMetricEnvelope=Itt;Ni.serializeAttribute=xtt;Ni.shouldCreateResourceMetric=Ltt;Ni.isSyntheticSource=Dtt;var gtt=(Ce(),A(Ne)),Fue=gtt.__importDefault(P("os")),Qe=(mc(),A(_c)),ytt=Ec(),Att=Oc(),O_=Md(),Rtt=(G(),A(Ze)),vtt=oo(),Jn=hw();function Ott(t){return new Date((0, Rtt.hrTimeToNanoseconds)(t)/1e6)}function que(t){let r={...(0, Att.getInstance)().tags};return t&&t.attributes&&(r[O_.KnownContextTagKeys.AiCloudRole]=Ntt(t),r[O_.KnownContextTagKeys.AiCloudRoleInstance]=Ctt(t),t.attributes[Qe.SEMRESATTRS_DEVICE_ID]&&(r[O_.KnownContextTagKeys.AiDeviceId]=String(t.attributes[Qe.SEMRESATTRS_DEVICE_ID])),t.attributes[Qe.SEMRESATTRS_DEVICE_MODEL_NAME]&&(r[O_.KnownContextTagKeys.AiDeviceModel]=String(t.attributes[Qe.SEMRESATTRS_DEVICE_MODEL_NAME])),t.attributes[Qe.SEMRESATTRS_SERVICE_VERSION]&&(r[O_.KnownContextTagKeys.AiApplicationVer]=String(t.attributes[Qe.SEMRESATTRS_SERVICE_VERSION]))),r}function Ntt(t){let e="",r=t.attributes[Qe.SEMRESATTRS_SERVICE_NAME],n=t.attributes[Qe.SEMRESATTRS_SERVICE_NAMESPACE];if(r)if(String(r).startsWith("unknown_service"))n?e=`${n}.${r}`:e=String(r);else return n?`${n}.${r}`:String(r);let s=t.attributes[Qe.SEMRESATTRS_K8S_DEPLOYMENT_NAME];if(s)return String(s);let a=t.attributes[Qe.SEMRESATTRS_K8S_REPLICASET_NAME];if(a)return String(a);let o=t.attributes[Qe.SEMRESATTRS_K8S_STATEFULSET_NAME];if(o)return String(o);let i=t.attributes[Qe.SEMRESATTRS_K8S_JOB_NAME];if(i)return String(i);let c=t.attributes[Qe.SEMRESATTRS_K8S_CRONJOB_NAME];if(c)return String(c);let u=t.attributes[Qe.SEMRESATTRS_K8S_DAEMONSET_NAME];return u?String(u):e}function Ctt(t){let e=t.attributes[Qe.SEMRESATTRS_K8S_POD_NAME];if(e)return String(e);let r=t.attributes[Qe.SEMRESATTRS_SERVICE_INSTANCE_ID];return r?String(r):Fue.default&&Fue.default.hostname()}function Ptt(t){return t===Qe.DBSYSTEMVALUES_DB2||t===Qe.DBSYSTEMVALUES_DERBY||t===Qe.DBSYSTEMVALUES_MARIADB||t===Qe.DBSYSTEMVALUES_MSSQL||t===Qe.DBSYSTEMVALUES_ORACLE||t===Qe.DBSYSTEMVALUES_SQLITE||t===Qe.DBSYSTEMVALUES_OTHER_SQL||t===Qe.DBSYSTEMVALUES_HSQLDB||t===Qe.DBSYSTEMVALUES_H2}function btt(t){if(!t)return "";if((0, Jn.getHttpMethod)(t)){let r=(0, Jn.getHttpUrl)(t);if(r)return String(r);{let n=(0, Jn.getHttpScheme)(t),s=(0, Jn.getHttpTarget)(t);if(n&&s){let a=(0, Jn.getHttpHost)(t);if(a)return `${n}://${a}${s}`;{let o=(0, Jn.getNetPeerPort)(t);if(o){let i=(0, Jn.getNetPeerName)(t);if(i)return `${n}://${i}:${o}${s}`;{let c=(0, Jn.getPeerIp)(t);if(c)return `${n}://${c}:${o}${s}`}}}}}}return ""}function Mtt(t){if(!t)return "";let e=t[Qe.SEMATTRS_PEER_SERVICE],r=(0, Jn.getHttpHost)(t),n=(0, Jn.getHttpUrl)(t),s=(0, Jn.getNetPeerName)(t),a=(0, Jn.getPeerIp)(t);return e?String(e):r?String(r):n?String(n):s?String(s):a?String(a):""}function Itt(t,e){if(t&&t.attributes){let r=que(t),n={};for(let s of Object.keys(t.attributes))s.startsWith("_MS.")||s===Qe.ATTR_TELEMETRY_SDK_VERSION||s===Qe.ATTR_TELEMETRY_SDK_LANGUAGE||s===Qe.ATTR_TELEMETRY_SDK_NAME||(n[s]=t.attributes[s]);if(Object.keys(n).length>0)return {name:"Microsoft.ApplicationInsights.Metric",time:new Date,sampleRate:100,instrumentationKey:e,version:1,data:{baseType:"MetricData",baseData:{version:2,metrics:[{name:"_OTELRESOURCE_",value:1}],properties:n}},tags:r}}}function xtt(t){if(typeof t=="object")if(t instanceof Error)try{return JSON.stringify(t,Object.getOwnPropertyNames(t))}catch{return String(t)}else {if(t instanceof Uint8Array)return String(t);try{return JSON.stringify(t)}catch{return String(t)}}return String(t)}function Ltt(){return process.env[vtt.ENV_OPENTELEMETRY_RESOURCE_METRIC_DISABLED]?.toLowerCase()!=="true"}function Dtt(t){return !!t[ytt.experimentalOpenTelemetryValues.SYNTHETIC_TYPE]}});var _w=f(Qs=>{Object.defineProperty(Qs,"__esModule",{value:true});Qs.MessageBusDestination=Qs.MicrosoftEventHub=Qs.AzNamespace=void 0;Qs.AzNamespace="az.namespace";Qs.MicrosoftEventHub="Microsoft.EventHub";Qs.MessageBusDestination="message_bus.destination";});var jue=f(UR=>{Object.defineProperty(UR,"__esModule",{value:true});UR.parseEventHubSpan=void 0;var mw=(M(),A(H)),wtt=(G(),A(Ze)),Utt=(mc(),A(_c)),Gue=Bo(),Hue=_w(),ktt=t=>{let e=0,r=0,n=(0, wtt.hrTimeToMilliseconds)(t.startTime);return t.links.forEach(({attributes:s})=>{let a=s?.[Gue.ENQUEUED_TIME];a&&(e+=1,r+=n-(parseFloat(a.toString())||0));}),Math.max(r/(e||1),0)},Vtt=(t,e)=>{let r=t.attributes[Hue.AzNamespace],n=(t.attributes[Utt.SEMATTRS_NET_PEER_NAME]||t.attributes["peer.address"]||"unknown").replace(/\/$/g,""),s=t.attributes[Hue.MessageBusDestination]||"unknown";switch(t.kind){case mw.SpanKind.CLIENT:e.type=r,e.target=`${n}/${s}`;break;case mw.SpanKind.PRODUCER:e.type=`Queue Message | ${r}`,e.target=`${n}/${s}`;break;case mw.SpanKind.CONSUMER:e.type=`Queue Message | ${r}`,e.source=`${n}/${s}`,e.measurements={...e.measurements,[Gue.TIME_SINCE_ENQUEUED]:ktt(t)};break;}};UR.parseEventHubSpan=Vtt;});var hw=f(Ir=>{Object.defineProperty(Ir,"__esModule",{value:true});Ir.readableSpanToEnvelope=jtt;Ir.spanEventsToEnvelopes=ztt;Ir.getPeerIp=Kue;Ir.getLocationIp=Wue;Ir.getHttpClientIp=Xue;Ir.getUserAgent=Que;Ir.getHttpUrl=Ew;Ir.getHttpMethod=BR;Ir.getHttpStatusCode=VR;Ir.getHttpScheme=Ytt;Ir.getHttpTarget=$tt;Ir.getHttpHost=Ktt;Ir.getNetPeerName=Wtt;Ir.getNetPeerPort=Xtt;var zue=(G(),A(Ze)),vn=(M(),A(H)),he=(mc(),A(_c)),Zn=h_(),Mr=Ec(),Btt=jue(),On=Bo(),kR=_w(),Qt=Md(),Yue=FD();function Ftt(t){let e=(0, Zn.createTagsFromResource)(t.resource);e[Qt.KnownContextTagKeys.AiOperationId]=t.spanContext().traceId,t.parentSpanContext?.spanId&&(e[Qt.KnownContextTagKeys.AiOperationParentId]=t.parentSpanContext.spanId);let r=t.attributes[Mr.experimentalOpenTelemetryValues.ATTR_ENDUSER_ID];r&&(e[Qt.KnownContextTagKeys.AiUserAuthUserId]=String(r));let n=t.attributes[Mr.experimentalOpenTelemetryValues.ATTR_ENDUSER_PSEUDO_ID];n&&(e[Qt.KnownContextTagKeys.AiUserId]=String(n));let s=Que(t.attributes);s&&(e["ai.user.userAgent"]=String(s)),(0, Zn.isSyntheticSource)(t.attributes)&&(e[Qt.KnownContextTagKeys.AiOperationSyntheticSource]="True");let a=t.attributes[On.MicrosoftClientIp];if(a&&(e[Qt.KnownContextTagKeys.AiLocationIp]=String(a)),t.kind===vn.SpanKind.SERVER){let o=BR(t.attributes);if(a||Wue(e,t.attributes),o){let i=t.attributes[he.ATTR_HTTP_ROUTE],c=Ew(t.attributes);if(e[Qt.KnownContextTagKeys.AiOperationName]=t.name,i)e[Qt.KnownContextTagKeys.AiOperationName]=`${o} ${i}`.substring(0,Mr.MaxPropertyLengths.TEN_BIT);else if(c)try{let u=new URL(String(c));e[Qt.KnownContextTagKeys.AiOperationName]=`${o} ${u.pathname}`.substring(0,Mr.MaxPropertyLengths.TEN_BIT);}catch{}}else e[Qt.KnownContextTagKeys.AiOperationName]=t.name;}else t.attributes[Qt.KnownContextTagKeys.AiOperationName]&&(e[Qt.KnownContextTagKeys.AiOperationName]=t.attributes[Qt.KnownContextTagKeys.AiOperationName]);return e}function $ue(t){let e={};if(t)for(let r of Object.keys(t))r.startsWith("_MS.")&&!Mr.internalMicrosoftAttributes.includes(r)||r.startsWith("microsoft.")||Mr.legacySemanticValues.includes(r)||Mr.httpSemanticValues.includes(r)||r===Qt.KnownContextTagKeys.AiOperationName||(e[r]=(0, Zn.serializeAttribute)(t[r]));return e}function qtt(t){let e=$ue(t.attributes),r={},n=t.links.map(s=>({operation_Id:s.context.traceId,id:s.context.spanId}));return n.length>0&&(e[On.MS_LINKS]=JSON.stringify(n)),[e,r]}function Htt(t){let e={name:t.name,id:`${t.spanContext().spanId}`,success:t.status?.code!==vn.SpanStatusCode.ERROR,resultCode:"0",type:"Dependency",duration:(0, Yue.msToTimeSpan)((0, zue.hrTimeToMilliseconds)(t.duration)),version:2};t.kind===vn.SpanKind.PRODUCER&&(e.type=On.DependencyTypes.QueueMessage),t.kind===vn.SpanKind.INTERNAL&&t.parentSpanContext&&(e.type=On.DependencyTypes.InProc);let r=BR(t.attributes),n=t.attributes[he.SEMATTRS_DB_SYSTEM],s=t.attributes[he.SEMATTRS_RPC_SYSTEM];if(r){let a=Ew(t.attributes);if(a)try{let c=new URL(String(a));e.name=`${r} ${c.pathname}`;}catch{}e.type=On.DependencyTypes.Http,e.data=(0, Zn.getUrl)(t.attributes);let o=VR(t.attributes);o&&(e.resultCode=String(o));let i=(0, Zn.getDependencyTarget)(t.attributes);if(i){try{let u=new RegExp(/(https?)(:\/\/.*)(:\d+)(\S*)/).exec(i);if(u!==null){let l=u[1],d=u[3];(l==="https"&&d===":443"||l==="http"&&d===":80")&&(i=u[1]+u[2]+u[4]);}}catch{}e.target=`${i}`;}}else if(n){String(n)===he.DBSYSTEMVALUES_MYSQL?e.type="mysql":String(n)===he.DBSYSTEMVALUES_POSTGRESQL?e.type="postgresql":String(n)===he.DBSYSTEMVALUES_MONGODB?e.type="mongodb":String(n)===he.DBSYSTEMVALUES_REDIS?e.type="redis":(0, Zn.isSqlDB)(String(n))?e.type="SQL":e.type=String(n);let a=t.attributes[he.SEMATTRS_DB_STATEMENT],o=t.attributes[he.SEMATTRS_DB_OPERATION];a?e.data=String(a):o&&(e.data=String(o));let i=(0, Zn.getDependencyTarget)(t.attributes),c=t.attributes[he.SEMATTRS_DB_NAME];i?e.target=c?`${i}|${c}`:`${i}`:e.target=c?`${c}`:`${n}`;}else if(s){s===On.DependencyTypes.Wcf?e.type=On.DependencyTypes.Wcf:e.type=On.DependencyTypes.Grpc;let a=t.attributes[he.SEMATTRS_RPC_GRPC_STATUS_CODE];a&&(e.resultCode=String(a));let o=(0, Zn.getDependencyTarget)(t.attributes);o?e.target=`${o}`:s&&(e.target=String(s));}return e}function Gtt(t){let e={id:`${t.spanContext().spanId}`,success:t.status.code!==vn.SpanStatusCode.UNSET?t.status.code===vn.SpanStatusCode.OK:(Number(VR(t.attributes))||0)<400,responseCode:"0",duration:(0, Yue.msToTimeSpan)((0, zue.hrTimeToMilliseconds)(t.duration)),version:2,source:void 0},r=BR(t.attributes),n=t.attributes[he.SEMATTRS_RPC_GRPC_STATUS_CODE];if(r){e.url=(0, Zn.getUrl)(t.attributes);let s=VR(t.attributes);s&&(e.responseCode=String(s));}else n&&(e.responseCode=String(n));return e}function jtt(t,e){let r,n,s,a=(0, Zn.hrTimeToDate)(t.startTime),o=e,i=Ftt(t),[c,u]=qtt(t);switch(t.kind){case vn.SpanKind.CLIENT:case vn.SpanKind.PRODUCER:case vn.SpanKind.INTERNAL:r="Microsoft.ApplicationInsights.RemoteDependency",n="RemoteDependencyData",s=Htt(t);break;case vn.SpanKind.SERVER:case vn.SpanKind.CONSUMER:r="Microsoft.ApplicationInsights.Request",n="RequestData",s=Gtt(t),s.name=i[Qt.KnownContextTagKeys.AiOperationName];break;default:throw vn.diag.error(`Unsupported span kind ${t.kind}`),new Error(`Unsupported span kind ${t.kind}`)}let l=100;if(t.attributes[On.AzureMonitorSampleRate]&&(l=Number(t.attributes[On.AzureMonitorSampleRate])),t.attributes[kR.AzNamespace]&&(t.kind===vn.SpanKind.INTERNAL&&(s.type=`${On.DependencyTypes.InProc} | ${t.attributes[kR.AzNamespace]}`),t.attributes[kR.AzNamespace]===kR.MicrosoftEventHub&&(0, Btt.parseEventHubSpan)(t,s)),s.id&&(s.id=s.id.substring(0,Mr.MaxPropertyLengths.NINE_BIT)),s.name&&(s.name=s.name.substring(0,Mr.MaxPropertyLengths.TEN_BIT)),s.resultCode&&(s.resultCode=String(s.resultCode).substring(0,Mr.MaxPropertyLengths.TEN_BIT)),s.data&&(s.data=String(s.data).substring(0,Mr.MaxPropertyLengths.THIRTEEN_BIT)),s.type&&(s.type=String(s.type).substring(0,Mr.MaxPropertyLengths.TEN_BIT)),s.target&&(s.target=String(s.target).substring(0,Mr.MaxPropertyLengths.TEN_BIT)),s.properties)for(let d of Object.keys(s.properties))s.properties[d]=s.properties[d].substring(0,Mr.MaxPropertyLengths.THIRTEEN_BIT);return {name:r,sampleRate:l,time:a,instrumentationKey:o,tags:i,version:1,data:{baseType:n,baseData:{...s,properties:c,measurements:u}}}}function ztt(t,e){let r=[];return t.events&&t.events.forEach(n=>{let s,a=(0, Zn.hrTimeToDate)(n.time),o="",i,c=$ue(n.attributes),u=(0, Zn.createTagsFromResource)(t.resource);u[Qt.KnownContextTagKeys.AiOperationId]=t.spanContext().traceId;let l=t.spanContext().spanId;if(l&&(u[Qt.KnownContextTagKeys.AiOperationParentId]=l),n.name==="exception"){o="Microsoft.ApplicationInsights.Exception",s="ExceptionData";let h="",T="Exception",g="",y=false;if(n.attributes){h=String(n.attributes[he.SEMATTRS_EXCEPTION_TYPE]),g=String(n.attributes[he.SEMATTRS_EXCEPTION_STACKTRACE]),g&&(y=true);let w=n.attributes[he.SEMATTRS_EXCEPTION_MESSAGE];w&&(T=String(w));let v=n.attributes[he.SEMATTRS_EXCEPTION_ESCAPED];v!==void 0&&(c[he.SEMATTRS_EXCEPTION_ESCAPED]=String(v));}i={exceptions:[{typeName:h,message:T,stack:g,hasFullStack:y}],version:2,properties:c};}else o="Microsoft.ApplicationInsights.Message",s="MessageData",i={message:n.name,version:2,properties:c};let d=100;if(t.attributes[On.AzureMonitorSampleRate]&&(d=Number(t.attributes[On.AzureMonitorSampleRate])),i.message&&(i.message=String(i.message).substring(0,Mr.MaxPropertyLengths.FIFTEEN_BIT)),i.properties)for(let h of Object.keys(i.properties))i.properties[h]=i.properties[h].substring(0,Mr.MaxPropertyLengths.THIRTEEN_BIT);let p={name:o,time:a,instrumentationKey:e,version:1,sampleRate:d,data:{baseType:s,baseData:i},tags:u};r.push(p);}),r}function Kue(t){if(t)return t[he.ATTR_NETWORK_PEER_ADDRESS]||t[he.SEMATTRS_NET_PEER_IP]}function Wue(t,e){if(e){let r=Xue(e),n=Kue(e);r?t[Qt.KnownContextTagKeys.AiLocationIp]=String(r):n&&(t[Qt.KnownContextTagKeys.AiLocationIp]=String(n));}}function Xue(t){if(t)return t[he.ATTR_CLIENT_ADDRESS]||t[he.SEMATTRS_HTTP_CLIENT_IP]}function Que(t){if(t)return t[he.ATTR_USER_AGENT_ORIGINAL]||t[he.SEMATTRS_HTTP_USER_AGENT]}function Ew(t){if(t)return t[he.ATTR_URL_FULL]||t[he.SEMATTRS_HTTP_URL]}function BR(t){if(t)return t[he.ATTR_HTTP_REQUEST_METHOD]||t[he.SEMATTRS_HTTP_METHOD]}function VR(t){if(t)return t[he.ATTR_HTTP_RESPONSE_STATUS_CODE]||t[he.SEMATTRS_HTTP_STATUS_CODE]}function Ytt(t){if(t)return t[he.ATTR_URL_SCHEME]||t[he.SEMATTRS_HTTP_SCHEME]}function $tt(t){if(t)return t[he.ATTR_URL_PATH]?t[he.ATTR_URL_PATH]:t[he.ATTR_URL_QUERY]?t[he.ATTR_URL_QUERY]:t[he.SEMATTRS_HTTP_TARGET]}function Ktt(t){if(t)return t[he.ATTR_SERVER_ADDRESS]||t[he.SEMATTRS_HTTP_HOST]}function Wtt(t){if(t)return t[he.ATTR_CLIENT_ADDRESS]||t[he.SEMATTRS_NET_PEER_NAME]}function Xtt(t){if(t)return t[he.ATTR_CLIENT_PORT]||t[he.ATTR_SERVER_PORT]||t[he.SEMATTRS_NET_PEER_PORT]}});var tle=f(qR=>{Object.defineProperty(qR,"__esModule",{value:true});qR.AzureMonitorTraceExporter=void 0;var FR=(M(),A(H)),Jue=(G(),A(Ze)),Qtt=kl(),Zue=hw(),ele=h_(),Jtt=Oc(),Tw=class extends Qtt.AzureMonitorBaseExporter{isShutdown=false;sender;shouldCreateResourceMetric=(0, ele.shouldCreateResourceMetric)();constructor(e={}){super(e),this.sender=new Jtt.HttpSender({endpointUrl:this.endpointUrl,instrumentationKey:this.instrumentationKey,trackStatsbeat:this.trackStatsbeat,exporterOptions:e,aadAudience:this.aadAudience}),FR.diag.debug("AzureMonitorTraceExporter was successfully setup");}async export(e,r){if(this.isShutdown){FR.diag.info("Exporter shut down. Failed to export spans."),setTimeout(()=>r({code:Jue.ExportResultCode.FAILED}),0);return}if(FR.diag.info(`Exporting ${e.length} span(s). Converting to envelopes...`),e.length>0){let n=[],s=(0, ele.createResourceMetricEnvelope)(e[0].resource,this.instrumentationKey);s&&this.shouldCreateResourceMetric&&n.push(s),e.forEach(a=>{n.push((0, Zue.readableSpanToEnvelope)(a,this.instrumentationKey));let o=(0, Zue.spanEventsToEnvelopes)(a,this.instrumentationKey);o.length>0&&n.push(...o);}),r(await this.sender.exportEnvelopes(n));}r({code:Jue.ExportResultCode.SUCCESS});}async shutdown(){return this.isShutdown=true,FR.diag.info("AzureMonitorTraceExporter shutting down"),this.sender.shutdown()}};qR.AzureMonitorTraceExporter=Tw;});var nle=f(GR=>{Object.defineProperty(GR,"__esModule",{value:true});GR.AzureMonitorMetricExporter=void 0;var xd=(M(),A(H)),HR=(er(),A(vr)),rle=(G(),A(Ze)),Ztt=kl(),ert=Od(),trt=Oc(),Sw=class extends Ztt.AzureMonitorBaseExporter{_isShutdown=false;_sender;constructor(e={}){super(e),this._sender=new trt.HttpSender({endpointUrl:this.endpointUrl,instrumentationKey:this.instrumentationKey,trackStatsbeat:this.trackStatsbeat,exporterOptions:e,aadAudience:this.aadAudience}),xd.diag.debug("AzureMonitorMetricExporter was successfully setup");}async export(e,r){if(this._isShutdown){xd.diag.info("Exporter shut down. Failed to export spans."),setTimeout(()=>r({code:rle.ExportResultCode.FAILED}),0);return}xd.diag.info(`Exporting ${e.scopeMetrics.length} metrics(s). Converting to envelopes...`);let n=(0, ert.resourceMetricsToEnvelope)(e,this.instrumentationKey);await xd.context.with((0, rle.suppressTracing)(xd.context.active()),async()=>{r(await this._sender.exportEnvelopes(n));});}async shutdown(){return this._isShutdown=true,xd.diag.info("AzureMonitorMetricExporter shutting down"),this._sender.shutdown()}selectAggregationTemporality(e){return e===HR.InstrumentType.UP_DOWN_COUNTER||e===HR.InstrumentType.OBSERVABLE_UP_DOWN_COUNTER?HR.AggregationTemporality.CUMULATIVE:HR.AggregationTemporality.DELTA}async forceFlush(){return Promise.resolve()}};GR.AzureMonitorMetricExporter=Sw;});var sle=f(yw=>{Object.defineProperty(yw,"__esModule",{value:true});yw.logToEnvelope=nrt;var Br=Md(),zR=h_(),gw=(mc(),A(_c)),jR=Ec(),YR=Ec(),rrt=(M(),A(H)),Je=Bo();function nrt(t,e){let r=(0, zR.hrTimeToDate)(t.hrTime),n=100,s=e,a=irt(t),[o,i]=ort(t),c,u,l,d=t.attributes[gw.ATTR_EXCEPTION_STACKTRACE],p=t.attributes[gw.ATTR_EXCEPTION_TYPE],h=!!(p&&d)||false,T=!t.attributes[Je.ApplicationInsightsBaseType]&&!t.attributes[Je.ApplicationInsightsCustomEventName]&&!p;if(h){let g=t.attributes[gw.ATTR_EXCEPTION_MESSAGE];c=Je.ApplicationInsightsExceptionName,u=Je.ApplicationInsightsExceptionBaseType,l={exceptions:[{typeName:String(p),message:String(g),hasFullStack:!!d,stack:String(d)}],severityLevel:String(ile(t.severityNumber)),version:2};}else if(t.attributes[Je.ApplicationInsightsCustomEventName])c=Je.ApplicationInsightsEventName,u=Je.ApplicationInsightsEventBaseType,l={name:String(t.attributes[Je.ApplicationInsightsCustomEventName]),version:2},i=ole(t);else if(T)c=Je.ApplicationInsightsMessageName,u=Je.ApplicationInsightsMessageBaseType,l={message:String(t.body),severityLevel:String(ile(t.severityNumber)),version:2};else if(u=String(t.attributes[Je.ApplicationInsightsBaseType]),c=srt(t),l=art(t),i=ole(t),!l)return;if(l.message&&(l.message=String(l.message).substring(0,YR.MaxPropertyLengths.FIFTEEN_BIT)),o)for(let g of Object.keys(o))o[g]=String(o[g]).substring(0,YR.MaxPropertyLengths.THIRTEEN_BIT);return {name:c,sampleRate:n,time:r,instrumentationKey:s,tags:a,version:1,data:{baseType:u,baseData:{...l,properties:o,measurements:i}}}}function irt(t){let e=(0, zR.createTagsFromResource)(t.resource);t.spanContext?.traceId&&(e[Br.KnownContextTagKeys.AiOperationId]=t.spanContext.traceId),t.spanContext?.spanId&&(e[Br.KnownContextTagKeys.AiOperationParentId]=t.spanContext.spanId),t.attributes[Br.KnownContextTagKeys.AiOperationName]&&(e[Br.KnownContextTagKeys.AiOperationName]=t.attributes[Br.KnownContextTagKeys.AiOperationName]),(0, zR.isSyntheticSource)(t.attributes)&&(e[Br.KnownContextTagKeys.AiOperationSyntheticSource]="True");let r=t.attributes?.[Je.MicrosoftClientIp];r&&(e[Br.KnownContextTagKeys.AiLocationIp]=String(r));let n=t.attributes;if(n[jR.experimentalOpenTelemetryValues.ATTR_ENDUSER_ID]){let s=String(n[jR.experimentalOpenTelemetryValues.ATTR_ENDUSER_ID]);s&&s.length>0&&(e[Br.KnownContextTagKeys.AiUserAuthUserId]=s);}if(n[jR.experimentalOpenTelemetryValues.ATTR_ENDUSER_PSEUDO_ID]){let s=String(n[jR.experimentalOpenTelemetryValues.ATTR_ENDUSER_PSEUDO_ID]);s&&s.length>0&&(e[Br.KnownContextTagKeys.AiUserId]=s);}return e}function ort(t){let e={},r={};if(t.attributes)for(let n of Object.keys(t.attributes))n.startsWith("_MS.")||n.startsWith("microsoft")||YR.legacySemanticValues.includes(n)||YR.httpSemanticValues.includes(n)||n===Br.KnownContextTagKeys.AiOperationName||(r[n]=(0, zR.serializeAttribute)(t.attributes[n]));return [r,e]}function ile(t){if(t){if(t>0&&t<9)return Br.KnownSeverityLevel.Verbose;if(t>=9&&t<13)return Br.KnownSeverityLevel.Information;if(t>=13&&t<17)return Br.KnownSeverityLevel.Warning;if(t>=17&&t<21)return Br.KnownSeverityLevel.Error;if(t>=21&&t<25)return Br.KnownSeverityLevel.Critical}}function srt(t){let e="";switch(t.attributes[Je.ApplicationInsightsBaseType]){case Je.ApplicationInsightsAvailabilityBaseType:e=Je.ApplicationInsightsAvailabilityName;break;case Je.ApplicationInsightsExceptionBaseType:e=Je.ApplicationInsightsExceptionName;break;case Je.ApplicationInsightsMessageBaseType:e=Je.ApplicationInsightsMessageName;break;case Je.ApplicationInsightsPageViewBaseType:e=Je.ApplicationInsightsPageViewName;break;case Je.ApplicationInsightsEventBaseType:e=Je.ApplicationInsightsEventName;break}return e}function ole(t){let e={};return t.body?.measurements&&(e={...t.body.measurements}),e}function art(t){let e={version:2};if(t.body)try{switch(t.attributes[Je.ApplicationInsightsBaseType]){case Je.ApplicationInsightsAvailabilityBaseType:e=t.body;break;case Je.ApplicationInsightsExceptionBaseType:e=t.body;break;case Je.ApplicationInsightsMessageBaseType:e=t.body;break;case Je.ApplicationInsightsPageViewBaseType:e=t.body;break;case Je.ApplicationInsightsEventBaseType:e=t.body;break}typeof e?.message=="object"&&(e.message=JSON.stringify(e.message));}catch{rrt.diag.error("AzureMonitorLogExporter failed to parse Application Insights Telemetry");}return e}});var cle=f($R=>{Object.defineProperty($R,"__esModule",{value:true});$R.AzureMonitorLogExporter=void 0;var Ld=(M(),A(H)),ale=(G(),A(Ze)),crt=kl(),urt=sle(),lrt=Oc(),Aw=class extends crt.AzureMonitorBaseExporter{_isShutdown=false;_sender;constructor(e={}){super(e),this._sender=new lrt.HttpSender({endpointUrl:this.endpointUrl,instrumentationKey:this.instrumentationKey,trackStatsbeat:this.trackStatsbeat,exporterOptions:e,aadAudience:this.aadAudience}),Ld.diag.debug("AzureMonitorLogExporter was successfully setup");}async export(e,r){if(this._isShutdown){Ld.diag.info("Exporter shut down. Failed to export spans."),setTimeout(()=>r({code:ale.ExportResultCode.FAILED}),0);return}Ld.diag.info(`Exporting ${e.length} logs(s). Converting to envelopes...`);let n=[];e.forEach(s=>{let a=(0, urt.logToEnvelope)(s,this.instrumentationKey);a&&n.push(a);}),await Ld.context.with((0, ale.suppressTracing)(Ld.context.active()),async()=>{r(await this._sender.exportEnvelopes(n));});}async shutdown(){return this._isShutdown=true,Ld.diag.info("AzureMonitorLogExporter shutting down"),this._sender.shutdown()}};$R.AzureMonitorLogExporter=Aw;});var Dd=f(cr=>{Object.defineProperty(cr,"__esModule",{value:true});cr.AI_OPERATION_NAME=cr.ServiceApiVersion=cr.AzureMonitorLogExporter=cr.AzureMonitorMetricExporter=cr.AzureMonitorTraceExporter=cr.AzureMonitorBaseExporter=cr.RateLimitedSampler=cr.ApplicationInsightsSampler=void 0;var drt=UJ();Object.defineProperty(cr,"ApplicationInsightsSampler",{enumerable:true,get:function(){return drt.ApplicationInsightsSampler}});var prt=BJ();Object.defineProperty(cr,"RateLimitedSampler",{enumerable:true,get:function(){return prt.RateLimitedSampler}});var frt=kl();Object.defineProperty(cr,"AzureMonitorBaseExporter",{enumerable:true,get:function(){return frt.AzureMonitorBaseExporter}});var hrt=tle();Object.defineProperty(cr,"AzureMonitorTraceExporter",{enumerable:true,get:function(){return hrt.AzureMonitorTraceExporter}});var _rt=nle();Object.defineProperty(cr,"AzureMonitorMetricExporter",{enumerable:true,get:function(){return _rt.AzureMonitorMetricExporter}});var mrt=cle();Object.defineProperty(cr,"AzureMonitorLogExporter",{enumerable:true,get:function(){return mrt.AzureMonitorLogExporter}});var Ert=oo();Object.defineProperty(cr,"ServiceApiVersion",{enumerable:true,get:function(){return Ert.ServiceApiVersion}});var Trt=oo();Object.defineProperty(cr,"AI_OPERATION_NAME",{enumerable:true,get:function(){return Trt.AI_OPERATION_NAME}});});var N_=f(lo=>{Object.defineProperty(lo,"__esModule",{value:true});lo.StandardMetricIds=lo.StandardMetricPropertyNames=lo.PerformanceCounterMetricNames=lo.APPLICATION_INSIGHTS_NO_STANDARD_METRICS=void 0;lo.APPLICATION_INSIGHTS_NO_STANDARD_METRICS="APPLICATION_INSIGHTS_NO_STANDARD_METRICS";var ule;(function(t){t.PRIVATE_BYTES="Private_Bytes",t.AVAILABLE_BYTES="Available_Bytes",t.PROCESSOR_TIME="Processor_Time",t.PROCESS_TIME_STANDARD="Process_Time_Standard",t.REQUEST_RATE="Request_Rate",t.REQUEST_DURATION="Request_Execution_Time",t.PROCESS_TIME_NORMALIZED="Process_Time_Normalized",t.EXCEPTION_RATE="Exception_Rate";})(ule||(lo.PerformanceCounterMetricNames=ule={}));lo.StandardMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel",metricId:"_MS.MetricId",IsAutocollected:"_MS.IsAutocollected"};var lle;(function(t){t.REQUEST_DURATION="requests/duration",t.DEPENDENCIES_DURATION="dependencies/duration",t.EXCEPTIONS_COUNT="exceptions/count",t.TRACES_COUNT="traces/count";})(lle||(lo.StandardMetricIds=lle={}));});var mle=f(ei=>{Object.defineProperty(ei,"__esModule",{value:true});ei.KnownTelemetryType=ei.KnownAggregationType=ei.KnownPredicateType=ei.KnownCollectionConfigurationErrorType=ei.KnownDocumentType=void 0;var dle;(function(t){t.Request="Request",t.RemoteDependency="RemoteDependency",t.Exception="Exception",t.Event="Event",t.Trace="Trace",t.Unknown="Unknown";})(dle||(ei.KnownDocumentType=dle={}));var ple;(function(t){t.Unknown="Unknown",t.PerformanceCounterParsing="PerformanceCounterParsing",t.PerformanceCounterUnexpected="PerformanceCounterUnexpected",t.PerformanceCounterDuplicateIds="PerformanceCounterDuplicateIds",t.DocumentStreamDuplicateIds="DocumentStreamDuplicateIds",t.DocumentStreamFailureToCreate="DocumentStreamFailureToCreate",t.DocumentStreamFailureToCreateFilterUnexpected="DocumentStreamFailureToCreateFilterUnexpected",t.MetricDuplicateIds="MetricDuplicateIds",t.MetricTelemetryTypeUnsupported="MetricTelemetryTypeUnsupported",t.MetricFailureToCreate="MetricFailureToCreate",t.MetricFailureToCreateFilterUnexpected="MetricFailureToCreateFilterUnexpected",t.FilterFailureToCreateUnexpected="FilterFailureToCreateUnexpected",t.CollectionConfigurationFailureToCreateUnexpected="CollectionConfigurationFailureToCreateUnexpected";})(ple||(ei.KnownCollectionConfigurationErrorType=ple={}));var fle;(function(t){t.Equal="Equal",t.NotEqual="NotEqual",t.LessThan="LessThan",t.GreaterThan="GreaterThan",t.LessThanOrEqual="LessThanOrEqual",t.GreaterThanOrEqual="GreaterThanOrEqual",t.Contains="Contains",t.DoesNotContain="DoesNotContain";})(fle||(ei.KnownPredicateType=fle={}));var hle;(function(t){t.Avg="Avg",t.Sum="Sum",t.Min="Min",t.Max="Max";})(hle||(ei.KnownAggregationType=hle={}));var _le;(function(t){t.Request="Request",t.Dependency="Dependency",t.Exception="Exception",t.Event="Event",t.Metric="Metric",t.PerformanceCounter="PerformanceCounter",t.Trace="Trace";})(_le||(ei.KnownTelemetryType=_le={}));});var Rw=f($=>{Object.defineProperty($,"__esModule",{value:true});$.discriminators=$.QuickpulseClientPublishHeaders=$.QuickpulseClientIsSubscribedHeaders=$.Trace=$.Request=$.RemoteDependency=$.Exception=$.Event=$.ServiceError=$.QuotaConfigurationInfo=$.DocumentFilterConjunctionGroupInfo=$.DocumentStreamInfo=$.FilterInfo=$.FilterConjunctionGroupInfo=$.DerivedMetricInfo=$.CollectionConfigurationInfo=$.CollectionConfigurationError=$.ProcessCpuData=$.KeyValuePairString=$.DocumentIngress=$.MetricPoint=$.MonitoringDataPoint=void 0;$.MonitoringDataPoint={type:{name:"Composite",className:"MonitoringDataPoint",modelProperties:{version:{serializedName:"Version",required:true,type:{name:"String"}},invariantVersion:{serializedName:"InvariantVersion",required:true,type:{name:"Number"}},instance:{serializedName:"Instance",required:true,type:{name:"String"}},roleName:{serializedName:"RoleName",required:true,type:{name:"String"}},machineName:{serializedName:"MachineName",required:true,type:{name:"String"}},streamId:{serializedName:"StreamId",required:true,type:{name:"String"}},timestamp:{serializedName:"Timestamp",type:{name:"DateTime"}},transmissionTime:{serializedName:"TransmissionTime",type:{name:"DateTime"}},isWebApp:{serializedName:"IsWebApp",required:true,type:{name:"Boolean"}},performanceCollectionSupported:{serializedName:"PerformanceCollectionSupported",required:true,type:{name:"Boolean"}},metrics:{serializedName:"Metrics",type:{name:"Sequence",element:{type:{name:"Composite",className:"MetricPoint"}}}},documents:{serializedName:"Documents",type:{name:"Sequence",element:{type:{name:"Composite",className:"DocumentIngress"}}}},topCpuProcesses:{serializedName:"TopCpuProcesses",type:{name:"Sequence",element:{type:{name:"Composite",className:"ProcessCpuData"}}}},collectionConfigurationErrors:{serializedName:"CollectionConfigurationErrors",type:{name:"Sequence",element:{type:{name:"Composite",className:"CollectionConfigurationError"}}}}}}};$.MetricPoint={type:{name:"Composite",className:"MetricPoint",modelProperties:{name:{serializedName:"Name",required:true,type:{name:"String"}},value:{serializedName:"Value",required:true,type:{name:"Number"}},weight:{serializedName:"Weight",required:true,type:{name:"Number"}}}}};$.DocumentIngress={type:{name:"Composite",className:"DocumentIngress",uberParent:"DocumentIngress",polymorphicDiscriminator:{serializedName:"DocumentType",clientName:"documentType"},modelProperties:{documentType:{serializedName:"DocumentType",required:true,type:{name:"String"}},documentStreamIds:{serializedName:"DocumentStreamIds",type:{name:"Sequence",element:{type:{name:"String"}}}},properties:{serializedName:"Properties",type:{name:"Sequence",element:{type:{name:"Composite",className:"KeyValuePairString"}}}}}}};$.KeyValuePairString={type:{name:"Composite",className:"KeyValuePairString",modelProperties:{key:{serializedName:"key",required:true,type:{name:"String"}},value:{serializedName:"value",required:true,type:{name:"String"}}}}};$.ProcessCpuData={type:{name:"Composite",className:"ProcessCpuData",modelProperties:{processName:{serializedName:"ProcessName",required:true,type:{name:"String"}},cpuPercentage:{serializedName:"CpuPercentage",required:true,type:{name:"Number"}}}}};$.CollectionConfigurationError={type:{name:"Composite",className:"CollectionConfigurationError",modelProperties:{collectionConfigurationErrorType:{serializedName:"CollectionConfigurationErrorType",required:true,type:{name:"String"}},message:{serializedName:"Message",required:true,type:{name:"String"}},fullException:{serializedName:"FullException",required:true,type:{name:"String"}},data:{serializedName:"Data",required:true,type:{name:"Sequence",element:{type:{name:"Composite",className:"KeyValuePairString"}}}}}}};$.CollectionConfigurationInfo={type:{name:"Composite",className:"CollectionConfigurationInfo",modelProperties:{eTag:{serializedName:"ETag",required:true,type:{name:"String"}},metrics:{serializedName:"Metrics",required:true,type:{name:"Sequence",element:{type:{name:"Composite",className:"DerivedMetricInfo"}}}},documentStreams:{serializedName:"DocumentStreams",required:true,type:{name:"Sequence",element:{type:{name:"Composite",className:"DocumentStreamInfo"}}}},quotaInfo:{serializedName:"QuotaInfo",type:{name:"Composite",className:"QuotaConfigurationInfo"}}}}};$.DerivedMetricInfo={type:{name:"Composite",className:"DerivedMetricInfo",modelProperties:{id:{serializedName:"Id",required:true,type:{name:"String"}},telemetryType:{serializedName:"TelemetryType",required:true,type:{name:"String"}},filterGroups:{serializedName:"FilterGroups",required:true,type:{name:"Sequence",element:{type:{name:"Composite",className:"FilterConjunctionGroupInfo"}}}},projection:{serializedName:"Projection",required:true,type:{name:"String"}},aggregation:{serializedName:"Aggregation",required:true,type:{name:"String"}},backEndAggregation:{serializedName:"BackEndAggregation",required:true,type:{name:"String"}}}}};$.FilterConjunctionGroupInfo={type:{name:"Composite",className:"FilterConjunctionGroupInfo",modelProperties:{filters:{serializedName:"Filters",required:true,type:{name:"Sequence",element:{type:{name:"Composite",className:"FilterInfo"}}}}}}};$.FilterInfo={type:{name:"Composite",className:"FilterInfo",modelProperties:{fieldName:{serializedName:"FieldName",required:true,type:{name:"String"}},predicate:{serializedName:"Predicate",required:true,type:{name:"String"}},comparand:{serializedName:"Comparand",required:true,type:{name:"String"}}}}};$.DocumentStreamInfo={type:{name:"Composite",className:"DocumentStreamInfo",modelProperties:{id:{serializedName:"Id",required:true,type:{name:"String"}},documentFilterGroups:{serializedName:"DocumentFilterGroups",required:true,type:{name:"Sequence",element:{type:{name:"Composite",className:"DocumentFilterConjunctionGroupInfo"}}}}}}};$.DocumentFilterConjunctionGroupInfo={type:{name:"Composite",className:"DocumentFilterConjunctionGroupInfo",modelProperties:{telemetryType:{serializedName:"TelemetryType",required:true,type:{name:"String"}},filters:{serializedName:"Filters",type:{name:"Composite",className:"FilterConjunctionGroupInfo"}}}}};$.QuotaConfigurationInfo={type:{name:"Composite",className:"QuotaConfigurationInfo",modelProperties:{initialQuota:{serializedName:"InitialQuota",type:{name:"Number"}},maxQuota:{serializedName:"MaxQuota",required:true,type:{name:"Number"}},quotaAccrualRatePerSec:{serializedName:"QuotaAccrualRatePerSec",required:true,type:{name:"Number"}}}}};$.ServiceError={type:{name:"Composite",className:"ServiceError",modelProperties:{requestId:{defaultValue:"00000000-0000-0000-0000-000000000000",serializedName:"RequestId",required:true,type:{name:"String"}},responseDateTime:{serializedName:"ResponseDateTime",required:true,type:{name:"String"}},code:{serializedName:"Code",required:true,type:{name:"String"}},message:{serializedName:"Message",required:true,type:{name:"String"}},exception:{serializedName:"Exception",required:true,type:{name:"String"}}}}};$.Event={serializedName:"Event",type:{name:"Composite",className:"Event",uberParent:"DocumentIngress",polymorphicDiscriminator:$.DocumentIngress.type.polymorphicDiscriminator,modelProperties:{...$.DocumentIngress.type.modelProperties,name:{constraints:{MaxLength:512},serializedName:"Name",type:{name:"String"}}}}};$.Exception={serializedName:"Exception",type:{name:"Composite",className:"Exception",uberParent:"DocumentIngress",polymorphicDiscriminator:$.DocumentIngress.type.polymorphicDiscriminator,modelProperties:{...$.DocumentIngress.type.modelProperties,exceptionType:{constraints:{MaxLength:1024},serializedName:"ExceptionType",type:{name:"String"}},exceptionMessage:{constraints:{MaxLength:32768},serializedName:"ExceptionMessage",type:{name:"String"}}}}};$.RemoteDependency={serializedName:"RemoteDependency",type:{name:"Composite",className:"RemoteDependency",uberParent:"DocumentIngress",polymorphicDiscriminator:$.DocumentIngress.type.polymorphicDiscriminator,modelProperties:{...$.DocumentIngress.type.modelProperties,name:{constraints:{MaxLength:1024},serializedName:"Name",type:{name:"String"}},commandName:{constraints:{MaxLength:2048},serializedName:"CommandName",type:{name:"String"}},resultCode:{constraints:{MaxLength:1024},serializedName:"ResultCode",type:{name:"String"}},duration:{serializedName:"Duration",type:{name:"String"}}}}};$.Request={serializedName:"Request",type:{name:"Composite",className:"Request",uberParent:"DocumentIngress",polymorphicDiscriminator:$.DocumentIngress.type.polymorphicDiscriminator,modelProperties:{...$.DocumentIngress.type.modelProperties,name:{constraints:{MaxLength:1024},serializedName:"Name",type:{name:"String"}},url:{constraints:{MaxLength:2048},serializedName:"Url",type:{name:"String"}},responseCode:{constraints:{MaxLength:1024},serializedName:"ResponseCode",type:{name:"String"}},duration:{serializedName:"Duration",type:{name:"String"}}}}};$.Trace={serializedName:"Trace",type:{name:"Composite",className:"Trace",uberParent:"DocumentIngress",polymorphicDiscriminator:$.DocumentIngress.type.polymorphicDiscriminator,modelProperties:{...$.DocumentIngress.type.modelProperties,message:{constraints:{MaxLength:32768},serializedName:"Message",type:{name:"String"}}}}};$.QuickpulseClientIsSubscribedHeaders={type:{name:"Composite",className:"QuickpulseClientIsSubscribedHeaders",modelProperties:{xMsQpsSubscribed:{serializedName:"x-ms-qps-subscribed",type:{name:"String"}},xMsQpsConfigurationEtag:{serializedName:"x-ms-qps-configuration-etag",type:{name:"String"}},xMsQpsServicePollingIntervalHint:{serializedName:"x-ms-qps-service-polling-interval-hint",type:{name:"String"}},xMsQpsServiceEndpointRedirectV2:{serializedName:"x-ms-qps-service-endpoint-redirect-v2",type:{name:"String"}}}}};$.QuickpulseClientPublishHeaders={type:{name:"Composite",className:"QuickpulseClientPublishHeaders",modelProperties:{xMsQpsSubscribed:{serializedName:"x-ms-qps-subscribed",type:{name:"String"}},xMsQpsConfigurationEtag:{serializedName:"x-ms-qps-configuration-etag",type:{name:"String"}}}}};$.discriminators={DocumentIngress:$.DocumentIngress,"DocumentIngress.Event":$.Event,"DocumentIngress.Exception":$.Exception,"DocumentIngress.RemoteDependency":$.RemoteDependency,"DocumentIngress.Request":$.Request,"DocumentIngress.Trace":$.Trace};});var Ele=f($e=>{Object.defineProperty($e,"__esModule",{value:true});$e.monitoringDataPoints=$e.configurationEtag=$e.invariantVersion=$e.roleName=$e.streamId=$e.instanceName=$e.machineName=$e.transmissionTime=$e.ikey=$e.apiVersion=$e.endpoint=$e.accept=$e.monitoringDataPoint=$e.contentType=void 0;var Srt=Rw();$e.contentType={parameterPath:["options","contentType"],mapper:{defaultValue:"application/json",isConstant:true,serializedName:"Content-Type",type:{name:"String"}}};$e.monitoringDataPoint={parameterPath:["options","monitoringDataPoint"],mapper:Srt.MonitoringDataPoint};$e.accept={parameterPath:"accept",mapper:{defaultValue:"application/json",isConstant:true,serializedName:"Accept",type:{name:"String"}}};$e.endpoint={parameterPath:"endpoint",mapper:{serializedName:"endpoint",required:true,type:{name:"String"}}};$e.apiVersion={parameterPath:"apiVersion",mapper:{defaultValue:"2024-04-01-preview",isConstant:true,serializedName:"api-version",type:{name:"String"}}};$e.ikey={parameterPath:"ikey",mapper:{serializedName:"ikey",required:true,type:{name:"String"}}};$e.transmissionTime={parameterPath:["options","transmissionTime"],mapper:{serializedName:"x-ms-qps-transmission-time",type:{name:"Number"}}};$e.machineName={parameterPath:["options","machineName"],mapper:{serializedName:"x-ms-qps-machine-name",type:{name:"String"}}};$e.instanceName={parameterPath:["options","instanceName"],mapper:{serializedName:"x-ms-qps-instance-name",type:{name:"String"}}};$e.streamId={parameterPath:["options","streamId"],mapper:{serializedName:"x-ms-qps-stream-id",type:{name:"String"}}};$e.roleName={parameterPath:["options","roleName"],mapper:{serializedName:"x-ms-qps-role-name",type:{name:"String"}}};$e.invariantVersion={parameterPath:["options","invariantVersion"],mapper:{serializedName:"x-ms-qps-invariant-version",type:{name:"String"}}};$e.configurationEtag={parameterPath:["options","configurationEtag"],mapper:{serializedName:"x-ms-qps-configuration-etag",type:{name:"String"}}};$e.monitoringDataPoints={parameterPath:["options","monitoringDataPoints"],mapper:{serializedName:"monitoringDataPoints",type:{name:"Sequence",element:{type:{name:"Composite",className:"MonitoringDataPoint"}}}}};});var gle=f(KR=>{Object.defineProperty(KR,"__esModule",{value:true});KR.QuickpulseClient=void 0;var Ow=(Ce(),A(Ne)),Tle=Ow.__importStar(aw()),Ut=Ow.__importStar(Ele()),bc=Ow.__importStar(Rw()),vw=class extends Tle.ServiceClient{apiVersion;constructor(e){e||(e={});let r={requestContentType:"application/json; charset=utf-8"},n="azsdk-js-monitor-opentelemetry/1.0.0-beta.0",s=e.userAgentOptions&&e.userAgentOptions.userAgentPrefix?`${e.userAgentOptions.userAgentPrefix} ${n}`:`${n}`,a={...r,...e,userAgentOptions:{userAgentPrefix:s},endpoint:e.endpoint??e.baseUri??"{endpoint}"};super(a),this.apiVersion=e.apiVersion||"2024-04-01-preview",this.addCustomApiVersionPolicy(e.apiVersion);}addCustomApiVersionPolicy(e){if(!e)return;let r={name:"CustomApiVersionPolicy",async sendRequest(n,s){let a=n.url.split("?");if(a.length>1){let o=a[1].split("&").map(i=>i.indexOf("api-version")>-1?"api-version="+e:i);n.url=a[0]+"?"+o.join("&");}return s(n)}};this.pipeline.addPolicy(r);}isSubscribed(e,r,n){return this.sendOperationRequest({endpoint:e,ikey:r,options:n},grt)}publish(e,r,n){return this.sendOperationRequest({endpoint:e,ikey:r,options:n},yrt)}};KR.QuickpulseClient=vw;var Sle=Tle.createSerializer(bc,false),grt={path:"/QuickPulseService.svc/ping",httpMethod:"POST",responses:{200:{bodyMapper:bc.CollectionConfigurationInfo,headersMapper:bc.QuickpulseClientIsSubscribedHeaders},default:{bodyMapper:bc.ServiceError}},requestBody:Ut.monitoringDataPoint,queryParameters:[Ut.apiVersion,Ut.ikey],urlParameters:[Ut.endpoint],headerParameters:[Ut.contentType,Ut.accept,Ut.transmissionTime,Ut.machineName,Ut.instanceName,Ut.streamId,Ut.roleName,Ut.invariantVersion,Ut.configurationEtag],mediaType:"json",serializer:Sle},yrt={path:"/QuickPulseService.svc/post",httpMethod:"POST",responses:{200:{bodyMapper:bc.CollectionConfigurationInfo,headersMapper:bc.QuickpulseClientPublishHeaders},default:{bodyMapper:bc.ServiceError}},requestBody:Ut.monitoringDataPoints,queryParameters:[Ut.apiVersion,Ut.ikey],urlParameters:[Ut.endpoint],headerParameters:[Ut.contentType,Ut.accept,Ut.transmissionTime,Ut.configurationEtag],mediaType:"json",serializer:Sle};});var Mc=f(C_=>{Object.defineProperty(C_,"__esModule",{value:true});C_.QuickpulseClient=void 0;var Art=(Ce(),A(Ne));Art.__exportStar(mle(),C_);var Rrt=gle();Object.defineProperty(C_,"QuickpulseClient",{enumerable:true,get:function(){return Rrt.QuickpulseClient}});});var Ho=f(Ge=>{Object.defineProperty(Ge,"__esModule",{value:true});Ge.StatsbeatInstrumentationMap=Ge.StatsbeatInstrumentation=Ge.StatsbeatFeature=Ge.APPLICATIONINSIGHTS_SDKSTATS_ENABLED_PREVIEW=Ge.AzureMonitorSampleRate=Ge.DEFAULT_LIVEMETRICS_ENDPOINT=Ge.DEFAULT_BREEZE_ENDPOINT=Ge.BROWSER_SDK_LOADER_DEFAULT_SOURCE=Ge.AttachTypePrefix=Ge.APPLICATION_INSIGHTS_SHIM_VERSION=Ge.AZURE_MONITOR_AUTO_ATTACH=Ge.AZURE_MONITOR_PREFIX=Ge.AZURE_MONITOR_STATSBEAT_FEATURES=Ge.AZURE_MONITOR_OPENTELEMETRY_VERSION=Ge.StatsbeatFeaturesMap=void 0;Ge.StatsbeatFeaturesMap=new Map([["diskRetry",1],["aadHandling",2],["browserSdkLoader",4],["distro",8],["liveMetrics",16],["shim",32],["customerSdkStats",64],["multiIkey",128],["rateLimitedSampler",256]]);Ge.AZURE_MONITOR_OPENTELEMETRY_VERSION="1.14.0";Ge.AZURE_MONITOR_STATSBEAT_FEATURES="AZURE_MONITOR_STATSBEAT_FEATURES";Ge.AZURE_MONITOR_PREFIX="AZURE_MONITOR_PREFIX";Ge.AZURE_MONITOR_AUTO_ATTACH="AZURE_MONITOR_AUTO_ATTACH";Ge.APPLICATION_INSIGHTS_SHIM_VERSION="APPLICATION_INSIGHTS_SHIM_VERSION";var yle;(function(t){t.INTEGRATED_AUTO="i",t.MANUAL="m";})(yle||(Ge.AttachTypePrefix=yle={}));Ge.BROWSER_SDK_LOADER_DEFAULT_SOURCE="https://js.monitor.azure.com/scripts/b/ai";Ge.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com";Ge.DEFAULT_LIVEMETRICS_ENDPOINT="https://global.livediagnostics.monitor.azure.com";Ge.AzureMonitorSampleRate="microsoft.sample_rate";Ge.APPLICATIONINSIGHTS_SDKSTATS_ENABLED_PREVIEW="APPLICATIONINSIGHTS_SDKSTATS_ENABLED_PREVIEW";var Ale;(function(t){t[t.NONE=0]="NONE",t[t.DISK_RETRY=1]="DISK_RETRY",t[t.AAD_HANDLING=2]="AAD_HANDLING",t[t.BROWSER_SDK_LOADER=4]="BROWSER_SDK_LOADER",t[t.DISTRO=8]="DISTRO",t[t.LIVE_METRICS=16]="LIVE_METRICS",t[t.SHIM=32]="SHIM",t[t.CUSTOMER_SDKSTATS=64]="CUSTOMER_SDKSTATS",t[t.MULTI_IKEY=128]="MULTI_IKEY";})(Ale||(Ge.StatsbeatFeature=Ale={}));var Ke;(function(t){t[t.NONE=0]="NONE",t[t.AZURE_CORE_TRACING=1]="AZURE_CORE_TRACING",t[t.MONGODB=2]="MONGODB",t[t.MYSQL=4]="MYSQL",t[t.REDIS=8]="REDIS",t[t.POSTGRES=16]="POSTGRES",t[t.BUNYAN=32]="BUNYAN",t[t.WINSTON=64]="WINSTON",t[t.CUCUMBER=256]="CUCUMBER",t[t.DATALOADER=512]="DATALOADER",t[t.FS=1024]="FS",t[t.LRU_MEMOIZER=2048]="LRU_MEMOIZER",t[t.MONGOOSE=4096]="MONGOOSE",t[t.RUNTIME_NODE=8192]="RUNTIME_NODE",t[t.SOCKET_IO=16384]="SOCKET_IO",t[t.TEDIOUS=32768]="TEDIOUS",t[t.UNDICI=65536]="UNDICI",t[t.CASSANDRA=131072]="CASSANDRA",t[t.CONNECT=262144]="CONNECT",t[t.DNS=524288]="DNS",t[t.EXPRESS=1048576]="EXPRESS",t[t.FASTIFY=2097152]="FASTIFY",t[t.GENERIC_POOL=4194304]="GENERIC_POOL",t[t.GRAPHQL=8388608]="GRAPHQL",t[t.HAPI=16777216]="HAPI",t[t.IOREDIS=33554432]="IOREDIS",t[t.KNEX=67108864]="KNEX",t[t.KOA=134217728]="KOA",t[t.MEMCACHED=268435456]="MEMCACHED",t[t.MYSQL2=536870912]="MYSQL2",t[t.NESTJS_CORE=1073741824]="NESTJS_CORE",t[t.NET=2147483648]="NET",t[t.PINO=4294967296]="PINO",t[t.RESTIFY=8589934592]="RESTIFY",t[t.ROUTER=17179869184]="ROUTER",t[t.AMQPLIB=34359738368]="AMQPLIB";})(Ke||(Ge.StatsbeatInstrumentation=Ke={}));Ge.StatsbeatInstrumentationMap=new Map([["@opentelemetry/instrumentation-amqplib",Ke.AMQPLIB],["@opentelemetry/instrumentation-cucumber",Ke.CUCUMBER],["@opentelemetry/instrumentation-dataloader",Ke.DATALOADER],["@opentelemetry/instrumentation-fs",Ke.FS],["@opentelemetry/instrumentation-lru-memoizer",Ke.LRU_MEMOIZER],["@opentelemetry/instrumentation-mongoose",Ke.MONGOOSE],["@opentelemetry/instrumentation-runtime-node",Ke.RUNTIME_NODE],["@opentelemetry/instrumentation-socket.io",Ke.SOCKET_IO],["@opentelemetry/instrumentation-tedious",Ke.TEDIOUS],["@opentelemetry/instrumentation-undici",Ke.UNDICI],["@opentelemetry/instrumentation-cassandra-driver",Ke.CASSANDRA],["@opentelemetry/instrumentation-connect",Ke.CONNECT],["@opentelemetry/instrumentation-dns",Ke.DNS],["@opentelemetry/instrumentation-express",Ke.EXPRESS],["@opentelemetry/instrumentation-fastify",Ke.FASTIFY],["@opentelemetry/instrumentation-generic-pool",Ke.GENERIC_POOL],["@opentelemetry/instrumentation-graphql",Ke.GRAPHQL],["@opentelemetry/instrumentation-hapi",Ke.HAPI],["@opentelemetry/instrumentation-ioredis",Ke.IOREDIS],["@opentelemetry/instrumentation-knex",Ke.KNEX],["@opentelemetry/instrumentation-koa",Ke.KOA],["@opentelemetry/instrumentation-memcached",Ke.MEMCACHED],["@opentelemetry/instrumentation-mysql2",Ke.MYSQL2],["@opentelemetry/instrumentation-nestjs-core",Ke.NESTJS_CORE],["@opentelemetry/instrumentation-net",Ke.NET],["@opentelemetry/instrumentation-pino",Ke.PINO],["@opentelemetry/instrumentation-restify",Ke.RESTIFY],["@opentelemetry/instrumentation-router",Ke.ROUTER]]);});var P_=f(xr=>{Object.defineProperty(xr,"__esModule",{value:true});xr.httpSemanticValues=xr.legacySemanticValues=xr.KnownDependencyColumns=xr.KnownRequestColumns=xr.DependencyTypes=xr.QuickPulseMetricNames=xr.QuickPulseOpenTelemetryMetricNames=void 0;var Pe=(ct(),A(Zt)),Rle;(function(t){t.PHYSICAL_BYTES="azureMonitor.physicalBytes",t.PROCESSOR_TIME_NORMALIZED="azureMonitor.percentProcessorTimeNormalized",t.REQUEST_RATE="azureMonitor.requestsSec",t.REQUEST_FAILURE_RATE="azureMonitor.requestsFailedSec",t.REQUEST_DURATION="azureMonitor.requestDuration",t.DEPENDENCY_RATE="azureMonitor.dependencyCallsSec",t.DEPENDENCY_FAILURE_RATE="azureMonitor.dependencyCallsFailedSec",t.DEPENDENCY_DURATION="azureMonitor.dependencyCallDuration",t.EXCEPTION_RATE="azureMonitor.exceptionsSec";})(Rle||(xr.QuickPulseOpenTelemetryMetricNames=Rle={}));var vle;(function(t){t.COMMITTED_BYTES="\\Memory\\Committed Bytes",t.PHYSICAL_BYTES="\\Process\\Physical Bytes",t.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",t.PROCESSOR_TIME_NORMALIZED="\\% Process\\Processor Time Normalized",t.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",t.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",t.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",t.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",t.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",t.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",t.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec";})(vle||(xr.QuickPulseMetricNames=vle={}));var Ole;(function(t){t.InProc="InProc",t.QueueMessage="Queue Message",t.Sql="SQL",t.Http="Http",t.Grpc="GRPC",t.Wcf="WCF Service",t.mysql="mysql",t.postgresql="postgresql",t.mongodb="mongodb",t.redis="redis";})(Ole||(xr.DependencyTypes=Ole={}));var Nle;(function(t){t.Url="Url",t.Duration="Duration",t.ResponseCode="ResponseCode",t.Success="Success",t.Name="Name";})(Nle||(xr.KnownRequestColumns=Nle={}));var Cle;(function(t){t.Target="Target",t.Duration="Duration",t.Success="Success",t.Name="Name",t.ResultCode="ResultCode",t.Type="Type",t.Data="Data";})(Cle||(xr.KnownDependencyColumns=Cle={}));xr.legacySemanticValues=[Pe.SEMATTRS_NET_PEER_IP,Pe.SEMATTRS_NET_PEER_NAME,Pe.SEMATTRS_PEER_SERVICE,Pe.SEMATTRS_HTTP_METHOD,Pe.SEMATTRS_HTTP_URL,Pe.SEMATTRS_HTTP_STATUS_CODE,Pe.SEMATTRS_HTTP_ROUTE,Pe.SEMATTRS_HTTP_HOST,Pe.SEMATTRS_DB_SYSTEM,Pe.SEMATTRS_DB_STATEMENT,Pe.SEMATTRS_DB_OPERATION,Pe.SEMATTRS_DB_NAME,Pe.SEMATTRS_RPC_SYSTEM,Pe.SEMATTRS_RPC_GRPC_STATUS_CODE,Pe.SEMATTRS_EXCEPTION_TYPE,Pe.SEMATTRS_EXCEPTION_MESSAGE,Pe.SEMATTRS_EXCEPTION_STACKTRACE];xr.httpSemanticValues=[Pe.ATTR_CLIENT_ADDRESS,Pe.ATTR_CLIENT_PORT,Pe.ATTR_SERVER_ADDRESS,Pe.ATTR_SERVER_PORT,Pe.ATTR_URL_FULL,Pe.ATTR_URL_PATH,Pe.ATTR_URL_QUERY,Pe.ATTR_URL_SCHEME,Pe.ATTR_URL_PATH,Pe.ATTR_ERROR_TYPE,Pe.ATTR_NETWORK_LOCAL_ADDRESS,Pe.ATTR_NETWORK_LOCAL_PORT,Pe.ATTR_NETWORK_PROTOCOL_NAME,Pe.ATTR_NETWORK_PEER_ADDRESS,Pe.ATTR_NETWORK_PEER_PORT,Pe.ATTR_NETWORK_PROTOCOL_VERSION,Pe.ATTR_NETWORK_TRANSPORT,Pe.ATTR_USER_AGENT_ORIGINAL,Pe.ATTR_HTTP_REQUEST_METHOD,Pe.ATTR_HTTP_RESPONSE_STATUS_CODE];});var jo=f(nt=>{Object.defineProperty(nt,"__esModule",{value:true});nt.getSdkVersion=Nrt;nt.getSdkVersionType=Ile;nt.setSdkPrefix=Crt;nt.resourceMetricsToQuickpulseDataPoint=Prt;nt.getSpanData=brt;nt.getSpanExceptionColumns=Mrt;nt.getLogData=Lrt;nt.getLogDocument=Drt;nt.isRequestData=xle;nt.isDependencyData=Lle;nt.isTraceData=wrt;nt.isExceptionData=Dle;nt.getSpanDocument=Urt;nt.getTransmissionTime=krt;nt.getMsFromFilterTimestampString=Vrt;nt.getPeerIp=Ule;nt.getUserAgent=Brt;nt.getHttpUrl=Pw;nt.getHttpMethod=XR;nt.getHttpStatusCode=bw;nt.getHttpScheme=kle;nt.getHttpTarget=Vle;nt.getHttpHost=Ble;nt.getNetPeerName=Fle;nt.getNetHostPort=Frt;nt.getNetPeerPort=qle;var M_=Mc(),wd=(M(),A(H)),Se=(ct(),A(Zt)),Cw=(G(),A(Ze)),Ple=(er(),A(vr)),Go=Ho(),De=P_(),vrt=dc(),Ort=dc(),b_=I_(),Mle=io();function Nrt(){let{nodeVersion:t}=process.versions,e=Cw.SDK_INFO[Se.SEMRESATTRS_TELEMETRY_SDK_VERSION],r=Ile();return `${process.env[Go.AZURE_MONITOR_PREFIX]??""}node${t}:otel${e}:${r}`}function Ile(){return process.env[Go.APPLICATION_INSIGHTS_SHIM_VERSION]?`sha${process.env[Go.APPLICATION_INSIGHTS_SHIM_VERSION]}`:`dst${Go.AZURE_MONITOR_OPENTELEMETRY_VERSION}`}function Crt(){if(!process.env[Go.AZURE_MONITOR_PREFIX]){let t=process.env[Go.AZURE_MONITOR_AUTO_ATTACH]==="true"?Go.AttachTypePrefix.INTEGRATED_AUTO:Go.AttachTypePrefix.MANUAL;process.env[Go.AZURE_MONITOR_PREFIX]=`${(0, Ort.getResourceProvider)()}${(0, vrt.getOsPrefix)()}${t}_`;}}function Prt(t,e,r,n,s){let a=[];return t.scopeMetrics.forEach(i=>{i.metrics.forEach(c=>{c.dataPoints.forEach(u=>{let l={weight:1,name:"",value:0};switch(c.descriptor.name){case De.QuickPulseOpenTelemetryMetricNames.PHYSICAL_BYTES:l.name=De.QuickPulseMetricNames.PHYSICAL_BYTES;break;case De.QuickPulseOpenTelemetryMetricNames.DEPENDENCY_DURATION:l.name=De.QuickPulseMetricNames.DEPENDENCY_DURATION;break;case De.QuickPulseOpenTelemetryMetricNames.DEPENDENCY_FAILURE_RATE:l.name=De.QuickPulseMetricNames.DEPENDENCY_FAILURE_RATE;break;case De.QuickPulseOpenTelemetryMetricNames.DEPENDENCY_RATE:l.name=De.QuickPulseMetricNames.DEPENDENCY_RATE;break;case De.QuickPulseOpenTelemetryMetricNames.EXCEPTION_RATE:l.name=De.QuickPulseMetricNames.EXCEPTION_RATE;break;case De.QuickPulseOpenTelemetryMetricNames.PROCESSOR_TIME_NORMALIZED:l.name=De.QuickPulseMetricNames.PROCESSOR_TIME_NORMALIZED;break;case De.QuickPulseOpenTelemetryMetricNames.REQUEST_DURATION:l.name=De.QuickPulseMetricNames.REQUEST_DURATION;break;case De.QuickPulseOpenTelemetryMetricNames.REQUEST_FAILURE_RATE:l.name=De.QuickPulseMetricNames.REQUEST_FAILURE_RATE;break;case De.QuickPulseOpenTelemetryMetricNames.REQUEST_RATE:l.name=De.QuickPulseMetricNames.REQUEST_RATE;break;default:l.name=c.descriptor.name;}if(c.dataPointType===Ple.DataPointType.SUM||c.dataPointType===Ple.DataPointType.GAUGE?l.value=u.value:l.value=u.value.sum||0,a.push(l),l.name===De.QuickPulseMetricNames.PHYSICAL_BYTES||l.name===De.QuickPulseMetricNames.PROCESSOR_TIME_NORMALIZED){let d={weight:1,name:l.name===De.QuickPulseMetricNames.PHYSICAL_BYTES?De.QuickPulseMetricNames.COMMITTED_BYTES:De.QuickPulseMetricNames.PROCESSOR_TIME,value:u.value};a.push(d);}});});}),s.forEach((i,c)=>{let u={weight:1,name:c,value:i};a.push(u);}),[{...e,timestamp:new Date,metrics:a,documents:r,collectionConfigurationErrors:n}]}function ble(t){return `PT${t/1e3}S`}function brt(t){return t.kind===wd.SpanKind.SERVER||t.kind===wd.SpanKind.CONSUMER?Irt(t):xrt(t)}function Mrt(t,e){return {Message:t[Se.SEMATTRS_EXCEPTION_MESSAGE],StackTrace:t[Se.SEMATTRS_EXCEPTION_STACKTRACE],CustomDimensions:WR(e)}}function Irt(t){let e={Url:"",Duration:(0, Cw.hrTimeToMilliseconds)(t.duration),ResponseCode:0,Success:false,Name:t.name||"",CustomDimensions:WR(t.attributes)},r=XR(t.attributes),n=t.attributes[Se.SEMATTRS_RPC_GRPC_STATUS_CODE];if(r){if(e.Url=wle(t.attributes),URL.canParse(e.Url)){let a=new URL(e.Url);e.Name=`${r} ${a.pathname}`;}else Mle.Logger.getInstance().info("Request data sent to live metrics has no valid URL field.");let s=bw(t.attributes);s&&(e.ResponseCode=Number(s));}else n&&(e.ResponseCode=Number(n));return e.Success=t.status.code!==wd.SpanStatusCode.ERROR&&e.ResponseCode<400,e}function xrt(t){let e={Target:"",Duration:(0, Cw.hrTimeToMilliseconds)(t.duration),Success:t.status.code!==wd.SpanStatusCode.ERROR,Name:t.name,ResultCode:0,Type:"",Data:"",CustomDimensions:WR(t.attributes)};t.kind===wd.SpanKind.PRODUCER&&(e.Type=De.DependencyTypes.QueueMessage),t.kind===wd.SpanKind.INTERNAL&&t.parentSpanContext?.spanId&&(e.Type=De.DependencyTypes.InProc);let r=XR(t.attributes),n=t.attributes[Se.SEMATTRS_DB_SYSTEM],s=t.attributes[Se.SEMATTRS_RPC_SYSTEM];if(r){let a=Pw(t.attributes);if(a)if(URL.canParse(String(a))){let c=new URL(String(a));e.Name=`${r} ${c.pathname}`;}else Mle.Logger.getInstance().info("Dependency data sent to live metrics has no valid URL field.");e.Type=De.DependencyTypes.Http,e.Data=wle(t.attributes);let o=bw(t.attributes);o&&(e.ResultCode=Number(o));let i=(0, b_.getDependencyTarget)(t.attributes);if(i){try{let u=new RegExp(/(https?)(:\/\/.*)(:\d+)(\S*)/).exec(i);if(u!==null){let l=u[1],d=u[3];(l==="https"&&d===":443"||l==="http"&&d===":80")&&(i=u[1]+u[2]+u[4]);}}catch{}e.Target=`${i}`;}}else if(n){String(n)===Se.DBSYSTEMVALUES_MYSQL?e.Type=De.DependencyTypes.mysql:String(n)===Se.DBSYSTEMVALUES_POSTGRESQL?e.Type=De.DependencyTypes.postgresql:String(n)===Se.DBSYSTEMVALUES_MONGODB?e.Type=De.DependencyTypes.mongodb:String(n)===Se.DBSYSTEMVALUES_REDIS?e.Type=De.DependencyTypes.redis:(0, b_.isSqlDB)(String(n))?e.Type=De.DependencyTypes.Sql:e.Type=String(n);let a=t.attributes[Se.SEMATTRS_DB_STATEMENT],o=t.attributes[Se.SEMATTRS_DB_OPERATION];a?e.Data=String(a):o&&(e.Data=String(o));let i=(0, b_.getDependencyTarget)(t.attributes),c=t.attributes[Se.SEMATTRS_DB_NAME];i?e.Target=c?`${i}|${c}`:`${i}`:e.Target=c?`${c}`:`${n}`;}else if(s){s===De.DependencyTypes.Wcf?e.Type=De.DependencyTypes.Wcf:e.Type=De.DependencyTypes.Grpc;let a=t.attributes[Se.SEMATTRS_RPC_GRPC_STATUS_CODE];a&&(e.ResultCode=Number(a));let o=(0, b_.getDependencyTarget)(t.attributes);o?e.Target=`${o}`:s&&(e.Target=String(s));}return e}function Lrt(t){let e=WR(t.attributes);return (0, b_.isExceptionTelemetry)(t)?{Message:String(t.attributes[Se.SEMATTRS_EXCEPTION_MESSAGE]),StackTrace:String(t.attributes[Se.SEMATTRS_EXCEPTION_STACKTRACE]),CustomDimensions:e}:{Message:String(t.body),CustomDimensions:e}}function Drt(t,e){return Dle(t)&&e?{documentType:M_.KnownDocumentType.Exception,exceptionMessage:t.Message,exceptionType:e,properties:Nw(t.CustomDimensions)}:{documentType:M_.KnownDocumentType.Trace,message:t.Message,properties:Nw(t.CustomDimensions)}}function xle(t){return t.Url!==void 0}function Lle(t){return t.Target!==void 0}function wrt(t){return t.Message!==void 0&&t.StackTrace===void 0}function Dle(t){return t.StackTrace!==void 0}function Urt(t){let e={documentType:M_.KnownDocumentType.Request};return xle(t)?e={documentType:M_.KnownDocumentType.Request,name:t.Name,url:t.Url,responseCode:String(t.ResponseCode),duration:ble(t.Duration)}:Lle(t)&&(e={documentType:M_.KnownDocumentType.RemoteDependency,name:t.Name,commandName:t.Data,resultCode:String(t.ResultCode),duration:ble(t.Duration)}),e.properties=Nw(t.CustomDimensions),e}function WR(t){let e=new Map;if(t)for(let r of Object.keys(t))r.startsWith("_MS.")||De.legacySemanticValues.includes(r)||De.httpSemanticValues.includes(r)||e.set(r,String(t[r]));return e}function Nw(t){let e=[];return t.forEach((r,n)=>{e.push({key:n,value:r});}),e}function wle(t){if(!t)return "";if(XR(t)){let r=Pw(t);if(r)return String(r);{let n=kle(t),s=Vle(t);if(n&&s){let a=Ble(t);if(a)return `${n}://${a}${s}`;{let o=qle(t);if(o){let i=Fle(t);if(i)return `${n}://${i}:${o}${s}`;{let c=Ule(t);if(c)return `${n}://${c}:${o}${s}`}}}}}}return ""}function krt(){return (Date.now()+621355968e5)*1e4}function Vrt(t){let e=t.split(":");if(e.length!==3)return NaN;let r=parseFloat(e[2]),n=parseFloat(e[1]),s=e[0].split(".");if(s.length!==2)return NaN;let a=parseFloat(s[1]),o=parseFloat(s[0]);return isNaN(o)||isNaN(a)||isNaN(n)||isNaN(r)?NaN:r*1e3+n*6e4+a*36e5+o*864e5}function Ule(t){if(t)return String(t[Se.ATTR_NETWORK_PEER_ADDRESS]||t[Se.SEMATTRS_NET_PEER_IP])}function Brt(t){if(t)return String(t[Se.ATTR_USER_AGENT_ORIGINAL]||t[Se.SEMATTRS_HTTP_USER_AGENT])}function Pw(t){return t?String(t[Se.ATTR_URL_FULL]||t[Se.SEMATTRS_HTTP_URL]||""):""}function XR(t){if(t)return String(t[Se.ATTR_HTTP_REQUEST_METHOD]||t[Se.SEMATTRS_HTTP_METHOD])}function bw(t){if(t)return String(t[Se.ATTR_HTTP_RESPONSE_STATUS_CODE]||t[Se.SEMATTRS_HTTP_STATUS_CODE])}function kle(t){if(t)return String(t[Se.ATTR_URL_SCHEME]||t[Se.SEMATTRS_HTTP_SCHEME])}function Vle(t){return t?t[Se.ATTR_URL_PATH]?String(t[Se.ATTR_URL_PATH]):t[Se.ATTR_URL_QUERY]?String(t[Se.ATTR_URL_QUERY]):String(t[Se.SEMATTRS_HTTP_TARGET]||""):""}function Ble(t){if(t)return String(t[Se.ATTR_SERVER_ADDRESS]||t[Se.SEMATTRS_HTTP_HOST])}function Fle(t){return t?String(t[Se.ATTR_CLIENT_ADDRESS]||t[Se.SEMATTRS_NET_PEER_NAME]||""):""}function Frt(t){return t?String(t[Se.ATTR_SERVER_PORT]||t[Se.SEMATTRS_NET_HOST_PORT]||""):""}function qle(t){if(t)return String(t[Se.ATTR_CLIENT_PORT]||t[Se.ATTR_SERVER_PORT]||t[Se.SEMATTRS_NET_PEER_PORT])}});var I_=f(ur=>{Object.defineProperty(ur,"__esModule",{value:true});ur.getRequestDimensions=qrt;ur.getDependencyDimensions=Hrt;ur.getExceptionDimensions=Grt;ur.getTraceDimensions=jrt;ur.getBaseDimensions=D_;ur.getDependencyTarget=zle;ur.isSqlDB=zrt;ur.isExceptionTelemetry=Yrt;ur.isTraceTelemetry=$rt;ur.isSyntheticLoad=Iw;ur.convertDimensions=xw;ur.getPhysicalMemory=Krt;ur.getProcessorTimeNormalized=Wrt;ur.getProcessorTime=Xrt;ur.getCloudRole=Yle;ur.getCloudRoleInstance=$le;var Hle=(Ce(),A(Ne)),Gle=(M(),A(H)),Tt=(ct(),A(Zt)),L_=N_(),x_=jo(),jle=Dl(),Mw=Hle.__importDefault(P("os")),Ic=Hle.__importDefault(P("process"));function qrt(t){let e=D_(t.resource);e.metricId=L_.StandardMetricIds.REQUEST_DURATION;let r=String((0, x_.getHttpStatusCode)(t.attributes));return e.requestResultCode=r,e.requestSuccess=t.status.code!==Gle.SpanStatusCode.ERROR&&(Number(r)||0)<400?"True":"False",Iw(t)&&(e.operationSynthetic="True"),xw(e)}function Hrt(t){let e=D_(t.resource);e.metricId=L_.StandardMetricIds.DEPENDENCIES_DURATION;let r=String((0, x_.getHttpStatusCode)(t.attributes));return e.dependencyTarget=zle(t.attributes),e.dependencyResultCode=r,e.dependencyType="http",e.dependencySuccess=t.status.code!==Gle.SpanStatusCode.ERROR?"True":"False",Iw(t)&&(e.operationSynthetic="True"),xw(e)}function Grt(t){let e=D_(t);return e.metricId=L_.StandardMetricIds.EXCEPTIONS_COUNT,e}function jrt(t){let e=D_(t);return e.metricId=L_.StandardMetricIds.TRACES_COUNT,e}function D_(t){let e={};return e.IsAutocollected="True",t&&(e.cloudRoleName=Yle(t),e.cloudRoleInstance=$le(t)),e}function zle(t){if(!t)return "";let e=t[Tt.SEMATTRS_PEER_SERVICE],r=(0, x_.getNetHostPort)(t),n=(0, x_.getNetPeerName)(t);return e?String(e):r&&n?`${n}:${r}`:n?String(n):""}function zrt(t){return t===Tt.DBSYSTEMVALUES_DB2||t===Tt.DBSYSTEMVALUES_DERBY||t===Tt.DBSYSTEMVALUES_MARIADB||t===Tt.DBSYSTEMVALUES_MSSQL||t===Tt.DBSYSTEMVALUES_ORACLE||t===Tt.DBSYSTEMVALUES_SQLITE||t===Tt.DBSYSTEMVALUES_OTHER_SQL||t===Tt.DBSYSTEMVALUES_HSQLDB||t===Tt.DBSYSTEMVALUES_H2}function Yrt(t){let e=t.attributes["_MS.baseType"];return e&&e==="ExceptionData"?true:!!(t.attributes[Tt.SEMATTRS_EXCEPTION_MESSAGE]||t.attributes[Tt.SEMATTRS_EXCEPTION_TYPE])}function $rt(t){let e=t.attributes["_MS.baseType"];return e&&e==="MessageData"?true:!t.attributes[Tt.SEMATTRS_EXCEPTION_MESSAGE]&&!t.attributes[Tt.SEMATTRS_EXCEPTION_TYPE]}function Iw(t){let e=String((0, x_.getUserAgent)(t.attributes));return !!(e!==null&&e.includes("AlwaysOn"))}function xw(t){let e={};for(let r in t)e[L_.StandardMetricPropertyNames[r]]=t[r];return e}function Krt(){return Ic.default?.memoryUsage?Ic.default.memoryUsage.rss():(jle.Logger.getInstance().debug("process.memoryUsage is not available"),0)}function Wrt(t,e){let r=Mw.default.cpus().length,n=Ic.default.cpuUsage(e),s=Ic.default.hrtime.bigint()-t,a=(n.user+n.system)/1e3,o=s===BigInt(0)?1:Number(s)/1e6;return r=r===0?1:r,a/o/r*100}function Xrt(t,e){if(Ic.default?.cpuUsage){let r=Ic.default.cpuUsage(e),n=Ic.default.hrtime.bigint()-t,s=(r.user+r.system)/1e3,a=n===BigInt(0)?1:Number(n)/1e6;return s/a*100}else return jle.Logger.getInstance().debug("process.cpuUsage is not available"),0}function Yle(t){let e="",r=t.attributes[Tt.SEMRESATTRS_SERVICE_NAME],n=t.attributes[Tt.SEMRESATTRS_SERVICE_NAMESPACE];if(r)if(String(r).startsWith("unknown_service"))n?e=`${n}.${r}`:e=String(r);else return n?`${n}.${r}`:String(r);let s=t.attributes[Tt.SEMRESATTRS_K8S_DEPLOYMENT_NAME];if(s)return String(s);let a=t.attributes[Tt.SEMRESATTRS_K8S_REPLICASET_NAME];if(a)return String(a);let o=t.attributes[Tt.SEMRESATTRS_K8S_STATEFULSET_NAME];if(o)return String(o);let i=t.attributes[Tt.SEMRESATTRS_K8S_JOB_NAME];if(i)return String(i);let c=t.attributes[Tt.SEMRESATTRS_K8S_CRONJOB_NAME];if(c)return String(c);let u=t.attributes[Tt.SEMRESATTRS_K8S_DAEMONSET_NAME];return u?String(u):e}function $le(t){let e=t.attributes[Tt.SEMRESATTRS_K8S_POD_NAME];if(e)return String(e);let r=t.attributes[Tt.SEMRESATTRS_SERVICE_INSTANCE_ID];return r?String(r):Mw.default&&Mw.default.hostname()}});var Wle=f(JR=>{Object.defineProperty(JR,"__esModule",{value:true});JR.StandardMetrics=void 0;var Kle=(er(),A(vr)),Qrt=Dd(),xc=(M(),A(H)),zo=I_(),QR=N_(),Lw=class{_config;_collectionInterval=6e4;_meterProvider;_azureExporter;_metricReader;_meter;_incomingRequestDurationHistogram;_outgoingRequestDurationHistogram;_exceptionsCounter;_tracesCounter;constructor(e,r){this._config=e,this._azureExporter=new Qrt.AzureMonitorMetricExporter(this._config.azureMonitorExporterOptions);let n={exporter:this._azureExporter,exportIntervalMillis:r?.collectionInterval||this._collectionInterval};this._metricReader=new Kle.PeriodicExportingMetricReader(n);let s={resource:this._config.resource,readers:[this._metricReader]};this._meterProvider=new Kle.MeterProvider(s),this._meter=this._meterProvider.getMeter("AzureMonitorStandardMetricsMeter"),this._incomingRequestDurationHistogram=this._meter.createHistogram(QR.StandardMetricIds.REQUEST_DURATION,{valueType:xc.ValueType.DOUBLE}),this._outgoingRequestDurationHistogram=this._meter.createHistogram(QR.StandardMetricIds.DEPENDENCIES_DURATION,{valueType:xc.ValueType.DOUBLE}),this._exceptionsCounter=this._meter.createCounter(QR.StandardMetricIds.EXCEPTIONS_COUNT,{valueType:xc.ValueType.INT}),this._tracesCounter=this._meter.createCounter(QR.StandardMetricIds.TRACES_COUNT,{valueType:xc.ValueType.INT});}shutdown(){this._meterProvider.shutdown();}async flush(){await this._meterProvider.forceFlush();}getMeterProvider(){return this._meterProvider}markSpanAsProcessed(e){e.kind===xc.SpanKind.CLIENT?e.setAttributes({"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"}):e.kind===xc.SpanKind.SERVER&&e.setAttributes({"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});}recordSpan(e){let r=e.duration[0];e.kind===xc.SpanKind.SERVER?this._incomingRequestDurationHistogram.record(r,(0, zo.getRequestDimensions)(e)):this._outgoingRequestDurationHistogram.record(r,(0, zo.getDependencyDimensions)(e)),e.events&&e.events.forEach(n=>{n.attributes=n.attributes||{},n.name==="exception"?(n.attributes["_MS.ProcessedByMetricExtractors"]="(Name:'Exceptions', Ver:'1.1')",this._exceptionsCounter.add(1,(0, zo.getExceptionDimensions)(e.resource))):(n.attributes["_MS.ProcessedByMetricExtractors"]="(Name:'Traces', Ver:'1.1')",this._tracesCounter.add(1,(0, zo.getTraceDimensions)(e.resource)));});}recordLog(e){(0, zo.isSyntheticLoad)(e)&&e.setAttribute("operation/synthetic","True"),(0, zo.isExceptionTelemetry)(e)?(e.setAttribute("_MS.ProcessedByMetricExtractors","(Name:'Exceptions', Ver:'1.1')"),this._exceptionsCounter.add(1,(0, zo.getExceptionDimensions)(e.resource))):(0, zo.isTraceTelemetry)(e)&&(e.setAttribute("_MS.ProcessedByMetricExtractors","(Name:'Traces', Ver:'1.1')"),this._tracesCounter.add(1,(0, zo.getTraceDimensions)(e.resource)));}};JR.StandardMetrics=Lw;});var ww=f(ZR=>{Object.defineProperty(ZR,"__esModule",{value:true});ZR.QuickpulseSender=void 0;var Jrt=(Ce(),A(Ne)),Zrt=Jrt.__importDefault(P("url")),ent=$s(),Xle=(M(),A(H)),tnt=Mc(),rnt="https://monitor.azure.com//.default",Dw=class{quickpulseClient;quickpulseClientOptions;instrumentationKey;endpointUrl;constructor(e){this.endpointUrl=e.endpointUrl,this.quickpulseClientOptions={endpoint:this.endpointUrl},this.instrumentationKey=e.instrumentationKey,e.credential&&(this.quickpulseClientOptions.credential=e.credential,e.credentialScopes?this.quickpulseClientOptions.credentialScopes=e.credentialScopes:this.quickpulseClientOptions.credentialScopes=[rnt]),this.quickpulseClient=new tnt.QuickpulseClient(this.quickpulseClientOptions),this.quickpulseClient.pipeline.removePolicy({name:ent.redirectPolicyName});}async isSubscribed(e){try{return await this.quickpulseClient.isSubscribed(this.endpointUrl,this.instrumentationKey,e)}catch(r){let n=r;Xle.diag.info("Failed to ping Quickpulse service",n.message);}}async publish(e){try{return await this.quickpulseClient.publish(this.endpointUrl,this.instrumentationKey,e)}catch(r){let n=r;Xle.diag.warn("Failed to post Quickpulse service",n.message);}}handlePermanentRedirect(e){if(e){let r=new Zrt.default.URL(e);r&&r.host&&(this.endpointUrl="https://"+r.host);}}};ZR.QuickpulseSender=Dw;});var Jle=f(tv=>{Object.defineProperty(tv,"__esModule",{value:true});tv.QuickpulseMetricExporter=void 0;var w_=(M(),A(H)),ev=(er(),A(vr)),Uw=(G(),A(Ze)),nnt=ww(),Qle=jo(),kw=class{sender;postCallback;getDocumentsFn;baseMonitoringDataPoint;etag;getErrorsFn;getDerivedMetricValuesFn;constructor(e){this.sender=new nnt.QuickpulseSender({endpointUrl:e.endpointUrl,instrumentationKey:e.instrumentationKey,credential:e.credential,credentialScopes:e.credentialScopes}),this.postCallback=e.postCallback,this.getDocumentsFn=e.getDocumentsFn,this.baseMonitoringDataPoint=e.baseMonitoringDataPoint,this.getErrorsFn=e.getErrorsFn,this.etag="",this.getDerivedMetricValuesFn=e.getDerivedMetricValuesFn,w_.diag.debug("QuickpulseMetricExporter was successfully setup");}async export(e,r){w_.diag.info("Exporting Live metrics(s). Converting to envelopes...");let n={monitoringDataPoints:(0, Qle.resourceMetricsToQuickpulseDataPoint)(e,this.baseMonitoringDataPoint,this.getDocumentsFn(),this.getErrorsFn(),this.getDerivedMetricValuesFn()),transmissionTime:(0, Qle.getTransmissionTime)(),configurationEtag:this.etag};await w_.context.with((0, Uw.suppressTracing)(w_.context.active()),async()=>{try{this.postCallback(await this.sender.publish(n)),r({code:Uw.ExportResultCode.SUCCESS});}catch{this.postCallback(void 0),r({code:Uw.ExportResultCode.FAILED});}});}async shutdown(){return w_.diag.info("QuickpulseMetricExporter shutting down"),Promise.resolve()}selectAggregationTemporality(e){return e===ev.InstrumentType.UP_DOWN_COUNTER||e===ev.InstrumentType.OBSERVABLE_UP_DOWN_COUNTER?ev.AggregationTemporality.CUMULATIVE:ev.AggregationTemporality.DELTA}async forceFlush(){return Promise.resolve()}getSender(){return this.sender}setEtag(e){this.etag=e;}};tv.QuickpulseMetricExporter=kw;});var Fw=f(rv=>{Object.defineProperty(rv,"__esModule",{value:true});rv.ConnectionStringParser=void 0;var Vw=(M(),A(H)),Zle=Ho(),Bw=class t{static FIELDS_SEPARATOR=";";static FIELD_KEY_VALUE_SEPARATOR="=";static parse(e){if(!e)return {};let r=e.split(t.FIELDS_SEPARATOR),n=true,s=r.reduce((a,o)=>{let i=o.split(t.FIELD_KEY_VALUE_SEPARATOR);if(i.length===2){let c=i[0].toLowerCase(),u=i[1];return {...a,[c]:u}}return Vw.diag.error("Connection string key-value pair is invalid: Entire connection string will be discarded"),n=false,a},{});if(n&&Object.keys(s).length>0){if(s.endpointsuffix){let a=s.location?`${s.location}.`:"";s.ingestionendpoint=s.ingestionendpoint||`https://${a}dc.${s.endpointsuffix}`,s.liveendpoint=s.liveendpoint||`https://${a}live.${s.endpointsuffix}`;}s.ingestionendpoint=s.ingestionendpoint?t.sanitizeUrl(s.ingestionendpoint):Zle.DEFAULT_BREEZE_ENDPOINT,s.liveendpoint=s.liveendpoint?t.sanitizeUrl(s.liveendpoint):Zle.DEFAULT_LIVEMETRICS_ENDPOINT,s.authorization&&s.authorization.toLowerCase()!=="ikey"&&Vw.diag.warn("Connection String contains an unsupported 'Authorization' value. Defaulting to 'Authorization=ikey'.");}else Vw.diag.error("An invalid connection string was passed in. There may be telemetry loss");return s}static sanitizeUrl(e){let r=e.trim();return r.indexOf("https://")<0&&(r=r.replace("http://","https://")),r[r.length-1]==="/"&&(r=r.slice(0,-1)),r}static validateInstrumentationKey(e){if(e.startsWith("InstrumentationKey=")){let s=e.indexOf("InstrumentationKey=")+19,a=e.indexOf(";",s);e=e.substring(s,a);}let r="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$";return new RegExp(r).test(e)}};rv.ConnectionStringParser=Bw;});var zw=f(jw=>{Object.defineProperty(jw,"__esModule",{value:true});jw.getInstance=int;var we=Ho(),qw=io(),Hw,Gw=class{initializedByShim=false;currentStatsbeatInstrumentations={};currentStatsbeatFeatures={};constructor(){try{JSON.parse(process.env[we.AZURE_MONITOR_STATSBEAT_FEATURES]||"{}").feature&we.StatsbeatFeature.SHIM&&(this.initializedByShim=!0);}catch(e){qw.Logger.getInstance().error("Failed to parse statsbeat config environment variable.",e);}}setStatsbeatFeatures=(e,r)=>{let n;try{n=JSON.parse(process.env[we.AZURE_MONITOR_STATSBEAT_FEATURES]||"{}");}catch(c){qw.Logger.getInstance().error("Failed to parse statsbeat config environment variable.",c);}this.currentStatsbeatInstrumentations={...this.currentStatsbeatInstrumentations,...e},this.currentStatsbeatFeatures={...this.currentStatsbeatFeatures,...r},e={...this.currentStatsbeatInstrumentations,amqplib:!!(n.instrumentation&we.StatsbeatInstrumentation.AMQPLIB),cucumber:!!(n.instrumentation&we.StatsbeatInstrumentation.CUCUMBER),dataloader:!!(n.instrumentation&we.StatsbeatInstrumentation.DATALOADER),fs:!!(n.instrumentation&we.StatsbeatInstrumentation.FS),lruMemoizer:!!(n.instrumentation&we.StatsbeatInstrumentation.LRU_MEMOIZER),mongoose:!!(n.instrumentation&we.StatsbeatInstrumentation.MONGOOSE),runtimeNode:!!(n.instrumentation&we.StatsbeatInstrumentation.RUNTIME_NODE),socketIo:!!(n.instrumentation&we.StatsbeatInstrumentation.SOCKET_IO),tedious:!!(n.instrumentation&we.StatsbeatInstrumentation.TEDIOUS),undici:!!(n.instrumentation&we.StatsbeatInstrumentation.UNDICI),cassandra:!!(n.instrumentation&we.StatsbeatInstrumentation.CASSANDRA),connect:!!(n.instrumentation&we.StatsbeatInstrumentation.CONNECT),dns:!!(n.instrumentation&we.StatsbeatInstrumentation.DNS),express:!!(n.instrumentation&we.StatsbeatInstrumentation.EXPRESS),fastify:!!(n.instrumentation&we.StatsbeatInstrumentation.FASTIFY),genericPool:!!(n.instrumentation&we.StatsbeatInstrumentation.GENERIC_POOL),graphql:!!(n.instrumentation&we.StatsbeatInstrumentation.GRAPHQL),hapi:!!(n.instrumentation&we.StatsbeatInstrumentation.HAPI),ioredis:!!(n.instrumentation&we.StatsbeatInstrumentation.IOREDIS),knex:!!(n.instrumentation&we.StatsbeatInstrumentation.KNEX),koa:!!(n.instrumentation&we.StatsbeatInstrumentation.KOA),memcached:!!(n.instrumentation&we.StatsbeatInstrumentation.MEMCACHED),mysql2:!!(n.instrumentation&we.StatsbeatInstrumentation.MYSQL2),nestjsCore:!!(n.instrumentation&we.StatsbeatInstrumentation.NESTJS_CORE),net:!!(n.instrumentation&we.StatsbeatInstrumentation.NET),pino:!!(n.instrumentation&we.StatsbeatInstrumentation.PINO),restify:!!(n.instrumentation&we.StatsbeatInstrumentation.RESTIFY),router:!!(n.instrumentation&we.StatsbeatInstrumentation.ROUTER)};let s=we.StatsbeatInstrumentation.NONE,a=Object.entries(e).map(c=>({option:c[0],value:c[1]}));for(let c=0;c<a.length;c++)a[c].value&&(s|=2**c);let o=we.StatsbeatFeature.NONE;this.initializedByShim?this.currentStatsbeatFeatures.shim=true:this.currentStatsbeatFeatures.distro=true,r.liveMetrics&&(this.currentStatsbeatFeatures.liveMetrics=true);let i=Object.entries(this.currentStatsbeatFeatures).map(c=>({option:c[0],value:c[1]}));for(let c=0;c<i.length;c++)i[c].value&&(o|=we.StatsbeatFeaturesMap.get(i[c].option));try{let c=Number(process.env[we.AZURE_MONITOR_STATSBEAT_FEATURES]);isNaN(c)||(o|=c),process.env[we.AZURE_MONITOR_STATSBEAT_FEATURES]=JSON.stringify({instrumentation:s,feature:o});}catch(c){qw.Logger.getInstance().error("Failed call to JSON.stringify.",c);}}};function int(){return Hw||(Hw=new Gw),Hw}});var ede=f(nv=>{Object.defineProperty(nv,"__esModule",{value:true});nv.Filter=void 0;var ti=Mc(),U_=P_(),k_=jo(),Yw=class{renameExceptionFieldNamesForFiltering(e){e.filters.forEach(r=>{r.fieldName.startsWith("Exception.")&&(r.fieldName=r.fieldName.replace("Exception.",""));});}checkMetricFilters(e,r){if(e.filterGroups.length===0)return  true;let n=false;return e.filterGroups.forEach(s=>{n=n||this.checkFilterConjunctionGroup(s,r);}),n}checkFilterConjunctionGroup(e,r){for(let n of e.filters)if(!this.checkFilter(n,r))return  false;return  true}checkFilter(e,r){if(e.fieldName==="*")return this.checkAnyFieldFilter(e,r);if(e.fieldName.startsWith("CustomDimensions."))return this.checkCustomDimFilter(e,r);{let n;if((0, k_.isRequestData)(r))n=r[e.fieldName];else if((0, k_.isDependencyData)(r))n=r[e.fieldName];else if((0, k_.isExceptionData)(r))n=r[e.fieldName];else if((0, k_.isTraceData)(r))n=r[e.fieldName];else return  false;if(e.fieldName===U_.KnownRequestColumns.Success.toString()){if(e.predicate===ti.KnownPredicateType.Equal.toString())return n===(e.comparand.toLowerCase()==="true");if(e.predicate===ti.KnownPredicateType.NotEqual.toString())return n!==(e.comparand.toLowerCase()==="true")}else if(e.fieldName===U_.KnownDependencyColumns.ResultCode.toString()||e.fieldName===U_.KnownRequestColumns.ResponseCode.toString()||e.fieldName===U_.KnownDependencyColumns.Duration.toString()){let s=e.fieldName===U_.KnownDependencyColumns.Duration.toString()?(0, k_.getMsFromFilterTimestampString)(e.comparand):parseFloat(e.comparand);switch(e.predicate){case ti.KnownPredicateType.Equal.toString():return n===s;case ti.KnownPredicateType.NotEqual.toString():return n!==s;case ti.KnownPredicateType.GreaterThan.toString():return n>s;case ti.KnownPredicateType.GreaterThanOrEqual.toString():return n>=s;case ti.KnownPredicateType.LessThan.toString():return n<s;case ti.KnownPredicateType.LessThanOrEqual.toString():return n<=s;default:return  false}}else return this.stringCompare(n,e.comparand,e.predicate)}return  false}checkAnyFieldFilter(e,r){let n=Object.keys(r);for(let s of n)if(s==="CustomDimensions"){for(let a of r.CustomDimensions.values())if(this.stringCompare(a,e.comparand,e.predicate))return  true}else {let a=String(r[s]);if(this.stringCompare(a,e.comparand,e.predicate))return  true}return  false}checkCustomDimFilter(e,r){let n=e.fieldName.replace("CustomDimensions.",""),s;if(r.CustomDimensions.has(n))s=r.CustomDimensions.get(n);else return  false;return this.stringCompare(s,e.comparand,e.predicate)}stringCompare(e,r,n){switch(n){case ti.KnownPredicateType.Equal.toString():return e===r;case ti.KnownPredicateType.NotEqual.toString():return e!==r;case ti.KnownPredicateType.Contains.toString():{let s=e.toLowerCase(),a=r.toLowerCase();return s.includes(a)}case ti.KnownPredicateType.DoesNotContain.toString():{let s=e.toLowerCase(),a=r.toLowerCase();return !s.includes(a)}default:return  false}}};nv.Filter=Yw;});var iv=f(po=>{Object.defineProperty(po,"__esModule",{value:true});po.MetricFailureToCreateError=po.DuplicateMetricIdError=po.UnexpectedFilterCreateError=po.TelemetryTypeError=void 0;var $w=class extends Error{constructor(e){super(e),this.name="TelemetryTypeError";}};po.TelemetryTypeError=$w;var Kw=class extends Error{constructor(e){super(e),this.name="UnexpectedFilterCreateError";}};po.UnexpectedFilterCreateError=Kw;var Ww=class extends Error{constructor(e){super(e),this.name="DuplicateMetricIdError";}};po.DuplicateMetricIdError=Ww;var Xw=class extends Error{constructor(e){super(e),this.name="MetricFailureToCreateError";}};po.MetricFailureToCreateError=Xw;});var tde=f(ov=>{Object.defineProperty(ov,"__esModule",{value:true});ov.Validator=void 0;var kt=iv(),ri=P_(),Jt=Mc(),ont=jo(),snt=new Set([ri.KnownRequestColumns.Url,ri.KnownRequestColumns.Name,ri.KnownDependencyColumns.Target,ri.KnownDependencyColumns.Type,ri.KnownDependencyColumns.Data,"Message","Exception.Message","Exception.StackTrace"]),Qw=class{validateTelemetryType(e){if(e===Jt.KnownTelemetryType.PerformanceCounter.toString())throw new kt.TelemetryTypeError("The telemetry type PerformanceCounter was specified, but this distro does not send performance counters to quickpulse.");if(e===Jt.KnownTelemetryType.Event.toString())throw new kt.TelemetryTypeError("The telemetry type Event was specified, but this telemetry type is not supported via OpenTelemetry.");if(e===Jt.KnownTelemetryType.Metric.toString())throw new kt.TelemetryTypeError("The telemetry type Metric was specified, but this distro does not send custom live metrics to quickpulse.");if(!(e in Jt.KnownTelemetryType))throw new kt.TelemetryTypeError(`'${e}' is not a valid telemetry type.`)}checkCustomMetricProjection(e){if(e.projection.startsWith("CustomMetrics."))throw new kt.UnexpectedFilterCreateError("The Projection of a customMetric property is not supported via OpenTelemetry.")}validateMetricFilters(e){e.filterGroups.forEach(r=>{r.filters.forEach(n=>{this.validateFieldNames(n.fieldName,e.telemetryType),this.validatePredicateAndComparand(n);});});}validateDocumentFilters(e){e.filters.filters.forEach(n=>{this.validateFieldNames(n.fieldName,e.telemetryType),this.validatePredicateAndComparand(n);});}isCustomDimOrAnyField(e){return e.startsWith("CustomDimensions.")||e==="*"}validateFieldNames(e,r){if(e==="")throw new kt.UnexpectedFilterCreateError("A filter must have a field name.");if(e.startsWith("CustomMetrics."))throw new kt.UnexpectedFilterCreateError("Filtering of a customMetric property is not supported via OpenTelemetry.");switch(r){case Jt.KnownTelemetryType.Request.toString():if(!this.isCustomDimOrAnyField(e)&&!(e in ri.KnownRequestColumns))throw new kt.UnexpectedFilterCreateError(`'${e}' is not a valid field name for the telemetry type Request.`);break;case Jt.KnownTelemetryType.Dependency.toString():if(!this.isCustomDimOrAnyField(e)&&!(e in ri.KnownDependencyColumns))throw new kt.UnexpectedFilterCreateError(`'${e}' is not a valid field name for the telemetry type Dependency.`);break;case Jt.KnownTelemetryType.Exception.toString():if(!this.isCustomDimOrAnyField(e)&&e!=="Exception.Message"&&e!=="Exception.StackTrace")throw new kt.UnexpectedFilterCreateError(`'${e}' is not a valid field name for the telemetry type Exception.`);break;case Jt.KnownTelemetryType.Trace.toString():if(!this.isCustomDimOrAnyField(e)&&e!=="Message")throw new kt.UnexpectedFilterCreateError(`'${e}' is not a valid field name for the telemetry type Trace.`);break;default:throw new kt.TelemetryTypeError(`'${r}' is not a supported telemetry type.`)}}validatePredicateAndComparand(e){if(e.predicate in Jt.KnownPredicateType){if(e.comparand==="")throw new kt.UnexpectedFilterCreateError(`A filter must have a comparand. FilterName: '${e.fieldName}' Predicate: '${e.predicate}' Comparand: '${e.comparand}'`);if(e.fieldName==="*"&&!(e.predicate===Jt.KnownPredicateType.Contains.toString()||e.predicate===Jt.KnownPredicateType.DoesNotContain.toString()))throw new kt.UnexpectedFilterCreateError(`The predicate '${e.predicate}' is not supported for the field name '*'`);if(e.fieldName===ri.KnownDependencyColumns.ResultCode.toString()||e.fieldName===ri.KnownRequestColumns.ResponseCode.toString()||e.fieldName===ri.KnownDependencyColumns.Duration.toString()){if(e.predicate===Jt.KnownPredicateType.Contains.toString()||e.predicate===Jt.KnownPredicateType.DoesNotContain.toString())throw new kt.UnexpectedFilterCreateError(`The predicate '${e.predicate}' is not supported for the field name '${e.fieldName}'`);if(e.fieldName===ri.KnownDependencyColumns.Duration.toString()){if(isNaN((0, ont.getMsFromFilterTimestampString)(e.comparand)))throw new kt.UnexpectedFilterCreateError(`The comparand '${e.comparand}' can't be converted to a double (ms).`)}else if(isNaN(parseFloat(e.comparand)))throw new kt.UnexpectedFilterCreateError(`The comparand '${e.comparand}' can't be converted to a double.`)}else if(snt.has(e.fieldName)||e.fieldName.startsWith("CustomDimensions.")){if(e.predicate===Jt.KnownPredicateType.GreaterThan.toString()||e.predicate===Jt.KnownPredicateType.GreaterThanOrEqual.toString()||e.predicate===Jt.KnownPredicateType.LessThan.toString()||e.predicate===Jt.KnownPredicateType.LessThanOrEqual.toString())throw new kt.UnexpectedFilterCreateError(`The predicate '${e.predicate}' is not supported for the field name '${e.fieldName}'. If this is a custom dimension, it would be treated as string.`)}else if(e.fieldName===ri.KnownRequestColumns.Success.toString()){if(e.predicate!==Jt.KnownPredicateType.Equal.toString()&&e.predicate!==Jt.KnownPredicateType.NotEqual.toString())throw new kt.UnexpectedFilterCreateError(`The predicate '${e.predicate}' is not supported for the field name '${e.fieldName}'.`);if(e.comparand=e.comparand.toLowerCase(),e.comparand!=="true"&&e.comparand!=="false")throw new kt.UnexpectedFilterCreateError(`The comparand '${e.comparand}' is not a valid boolean value for the fieldName Success.`)}}else throw new kt.UnexpectedFilterCreateError(`'${e.predicate}' is not a valid predicate.`)}};ov.Validator=Qw;});var rde=f(sv=>{Object.defineProperty(sv,"__esModule",{value:true});sv.CollectionConfigurationErrorTracker=void 0;var Jw=class{validationTimeErrors=[];runTimeErrors=[];constructor(){this.validationTimeErrors=[],this.runTimeErrors=[];}addValidationError(e){this.validationTimeErrors.push(e);}addRunTimeError(e){this.runTimeErrors.push(e);}getErrors(){return this.validationTimeErrors.concat(this.runTimeErrors)}clearRunTimeErrors(){this.runTimeErrors=[];}clearValidationTimeErrors(){this.validationTimeErrors=[];}};sv.CollectionConfigurationErrorTracker=Jw;});var ide=f(av=>{Object.defineProperty(av,"__esModule",{value:true});av.Projection=void 0;var dn=Mc(),nde=jo(),V_=iv(),Zw=class{projectionMap;avgMap;constructor(){this.projectionMap=new Map,this.avgMap=new Map;}initDerivedMetricProjection(e){e.aggregation===dn.KnownAggregationType.Min.toString()?this.projectionMap.set(e.id,[Number.MAX_VALUE,dn.KnownAggregationType.Min]):e.aggregation===dn.KnownAggregationType.Max.toString()?this.projectionMap.set(e.id,[Number.MIN_VALUE,dn.KnownAggregationType.Max]):e.aggregation===dn.KnownAggregationType.Sum.toString()?this.projectionMap.set(e.id,[0,dn.KnownAggregationType.Sum]):(this.projectionMap.set(e.id,[0,dn.KnownAggregationType.Avg]),this.avgMap.set(e.id,[0,0]));}calculateProjection(e,r){let n;if(e.projection==="Count()")n=1;else if(e.projection==="Duration")if((0, nde.isRequestData)(r)||(0, nde.isDependencyData)(r))n=r.Duration;else throw new V_.MetricFailureToCreateError("The projection Duration is not supported for the telemetry type Exception or Trace.");else if(e.projection.startsWith("CustomDimensions.")){let a=e.projection.replace("CustomDimensions.",""),o;if(r.CustomDimensions.has(a)){let i=parseFloat(r.CustomDimensions.get(a));if(isNaN(i))throw new V_.MetricFailureToCreateError(`Could not calculate the projection because the custom dimension value '${r.CustomDimensions.get(a)}' for the dimension '${a}' is not a valid number.`);o=i;}else throw new V_.MetricFailureToCreateError(`Could not calculate the projection because the custom dimension '${a}' was not found in the telemetry data.`);n=o;}else throw new V_.MetricFailureToCreateError(`The projection '${e.projection}' is not supported in this SDK.`);let s=this.calculateAggregation(e.aggregation,e.id,n);this.projectionMap.set(e.id,[s,e.aggregation]);}getMetricValues(){let e=new Map;for(let[r,n]of this.projectionMap.entries()){let s;n[1]===dn.KnownAggregationType.Min.toString()?(s=n[0]===Number.MAX_VALUE?0:n[0],n[0]=Number.MAX_VALUE):n[1]===dn.KnownAggregationType.Max.toString()?(s=n[0]===Number.MIN_VALUE?0:n[0],n[0]=Number.MIN_VALUE):(s=n[0],n[0]=0,n[1]===dn.KnownAggregationType.Avg.toString()&&this.avgMap.set(r,[0,0])),e.set(r,s);}return e}clearProjectionMaps(){this.projectionMap.clear(),this.avgMap.clear();}calculateAggregation(e,r,n){let s=this.projectionMap.get(r)[0];switch(e){case dn.KnownAggregationType.Sum.toString():return s+n;case dn.KnownAggregationType.Min.toString():return Math.min(s,n);case dn.KnownAggregationType.Max.toString():return Math.max(s,n);case dn.KnownAggregationType.Avg.toString():{let[a,o]=this.avgMap.get(r);return this.avgMap.set(r,[a+n,o+1]),(a+n)/(o+1)}default:throw new V_.MetricFailureToCreateError(`The aggregation '${e}' is not supported in this SDK.`)}}};av.Projection=Zw;});var hde=f(cv=>{Object.defineProperty(cv,"__esModule",{value:true});cv.LiveMetrics=void 0;var ant=(Ce(),A(Ne)),cnt=ant.__importDefault(P("os")),ode=(er(),A(vr)),pn=(M(),A(H)),unt=(di(),A(li)),Fr=Mc(),Nn=jo(),lnt=Jle(),dnt=ww(),pnt=Fw(),sde=Ho(),Yo=P_(),ade=(G(),A(Ze)),fnt=zw(),hnt=ede(),_nt=tde(),mnt=rde(),Ent=ide(),Lc=iv(),cde=(ct(),A(Zt)),ude=I_(),lde=I_(),Tnt=Dl(),dde=1e3,Snt=2e4,pde=5e3,gnt=6e4,fde=6e4,eU=class{config;meterProvider;metricReader;meter;requestDurationGauge;dependencyDurationGauge;requestRateGauge;requestFailedRateGauge;dependencyRateGauge;dependencyFailedRateGauge;processPhysicalBytesGauge;percentProcessorTimeNormalizedGauge;exceptionsRateGauge;documents=[];pingInterval;postInterval;quickpulseExporter;pingSender;isCollectingData;lastSuccessTime=Date.now();handle;baseMonitoringDataPoint;totalRequestCount=0;totalFailedRequestCount=0;totalDependencyCount=0;totalFailedDependencyCount=0;totalExceptionCount=0;requestDuration=0;dependencyDuration=0;lastRequestDuration={count:0,duration:0,time:0};lastRequestRate={count:0,time:0};lastFailedRequestRate={count:0,time:0};lastDependencyDuration={count:0,duration:0,time:0};lastDependencyRate={count:0,time:0};lastFailedDependencyRate={count:0,time:0};lastExceptionRate={count:0,time:0};lastCpuUsage;lastHrTime;statsbeatOptionsUpdated=false;etag="";errorTracker=new mnt.CollectionConfigurationErrorTracker;seenMetricIds=new Set;validDerivedMetrics=new Map;derivedMetricProjection=new Ent.Projection;validator=new _nt.Validator;filter=new hnt.Filter;validDocumentFilterConjuctionGroupInfos=new Map;constructor(e){this.config=e;let n=new unt.RandomIdGenerator().generateTraceId(),s=cnt.default.hostname(),a=(0, lde.getCloudRoleInstance)(this.config.resource),o=(0, lde.getCloudRole)(this.config.resource),i=(0, Nn.getSdkVersion)();this.baseMonitoringDataPoint={version:i,invariantVersion:5,instance:a,roleName:o,machineName:s,streamId:n,performanceCollectionSupported:true,isWebApp:!!process.env.WEBSITE_SITE_NAME};let c=pnt.ConnectionStringParser.parse(this.config.azureMonitorExporterOptions.connectionString||process.env.APPLICATIONINSIGHTS_CONNECTION_STRING);this.pingSender=new dnt.QuickpulseSender({endpointUrl:c.liveendpoint||sde.DEFAULT_LIVEMETRICS_ENDPOINT,instrumentationKey:c.instrumentationkey||"",credential:this.config.azureMonitorExporterOptions.credential,credentialScopes:c.aadaudience||this.config.azureMonitorExporterOptions.credentialScopes});let u={endpointUrl:c.liveendpoint||sde.DEFAULT_LIVEMETRICS_ENDPOINT,instrumentationKey:c.instrumentationkey||"",credential:this.config.azureMonitorExporterOptions.credential,credentialScopes:c.aadaudience||this.config.azureMonitorExporterOptions.credentialScopes,postCallback:this.quickPulseDone.bind(this),getDocumentsFn:this.getDocuments.bind(this),getErrorsFn:this.getErrors.bind(this),getDerivedMetricValuesFn:this.getDerivedMetricValues.bind(this),baseMonitoringDataPoint:this.baseMonitoringDataPoint};this.quickpulseExporter=new lnt.QuickpulseMetricExporter(u),this.isCollectingData=false,this.pingInterval=pde,this.postInterval=dde,this.handle=setTimeout(this.goQuickpulse.bind(this),this.pingInterval),this.handle.unref(),this.lastCpuUsage=process.cpuUsage(),this.lastHrTime=process.hrtime.bigint();}shutdown(){this.meterProvider?.shutdown();}async goQuickpulse(){if(!this.isCollectingData){try{let e={transmissionTime:(0,Nn.getTransmissionTime)(),monitoringDataPoint:this.baseMonitoringDataPoint,configurationEtag:this.etag};await pn.context.with((0,ade.suppressTracing)(pn.context.active()),async()=>{let r=await this.pingSender.isSubscribed(e);this.quickPulseDone(r);});}catch{this.quickPulseDone(void 0);}this.handle=setTimeout(this.goQuickpulse.bind(this),this.pingInterval),this.handle.unref();}this.isCollectingData&&this.activateMetrics({collectionInterval:this.postInterval});}async quickPulseDone(e){if(!e)this.isCollectingData?Date.now()-this.lastSuccessTime>=Snt&&(this.postInterval=fde,this.deactivateMetrics(),this.activateMetrics({collectionInterval:this.postInterval})):Date.now()-this.lastSuccessTime>=gnt&&(this.pingInterval=fde);else {this.postInterval=dde,this.lastSuccessTime=Date.now(),this.isCollectingData=!!(e.xMsQpsSubscribed&&e.xMsQpsSubscribed==="true"),e.xMsQpsConfigurationEtag&&this.etag!==e.xMsQpsConfigurationEtag&&this.updateConfiguration(e),!this.isCollectingData&&this.meterProvider&&(this.etag="",this.deactivateMetrics(),this.handle=setTimeout(this.goQuickpulse.bind(this),this.pingInterval),this.handle.unref());let r=e.xMsQpsServiceEndpointRedirectV2;r&&(this.pingSender.handlePermanentRedirect(r),this.quickpulseExporter.getSender().handlePermanentRedirect(r));let n=e.xMsQpsServicePollingIntervalHint;n?this.pingInterval=Number(n):this.pingInterval=pde;}}activateMetrics(e){if(this.meterProvider)return;this.statsbeatOptionsUpdated||((0, fnt.getInstance)().setStatsbeatFeatures({},{liveMetrics:true}),this.statsbeatOptionsUpdated=true),this.totalDependencyCount=0,this.totalExceptionCount=0,this.totalFailedDependencyCount=0,this.totalFailedRequestCount=0,this.totalRequestCount=0,this.requestDuration=0,this.dependencyDuration=0,this.lastRequestDuration={count:0,duration:0,time:0},this.lastRequestRate={count:0,time:0},this.lastFailedRequestRate={count:0,time:0},this.lastDependencyDuration={count:0,duration:0,time:0},this.lastDependencyRate={count:0,time:0},this.lastFailedDependencyRate={count:0,time:0},this.lastExceptionRate={count:0,time:0};let r={exporter:this.quickpulseExporter,exportIntervalMillis:e?.collectionInterval};this.metricReader=new ode.PeriodicExportingMetricReader(r);let n={resource:this.config.resource,readers:[this.metricReader]};this.meterProvider=new ode.MeterProvider(n),this.meter=this.meterProvider.getMeter("AzureMonitorLiveMetricsMeter"),this.requestDurationGauge=this.meter.createObservableGauge(Yo.QuickPulseOpenTelemetryMetricNames.REQUEST_DURATION,{valueType:pn.ValueType.DOUBLE}),this.requestRateGauge=this.meter.createObservableGauge(Yo.QuickPulseOpenTelemetryMetricNames.REQUEST_RATE,{valueType:pn.ValueType.DOUBLE}),this.requestFailedRateGauge=this.meter.createObservableGauge(Yo.QuickPulseOpenTelemetryMetricNames.REQUEST_FAILURE_RATE,{valueType:pn.ValueType.DOUBLE}),this.dependencyDurationGauge=this.meter.createObservableGauge(Yo.QuickPulseOpenTelemetryMetricNames.DEPENDENCY_DURATION,{valueType:pn.ValueType.DOUBLE}),this.dependencyRateGauge=this.meter.createObservableGauge(Yo.QuickPulseOpenTelemetryMetricNames.DEPENDENCY_RATE,{valueType:pn.ValueType.DOUBLE}),this.dependencyFailedRateGauge=this.meter.createObservableGauge(Yo.QuickPulseOpenTelemetryMetricNames.DEPENDENCY_FAILURE_RATE,{valueType:pn.ValueType.DOUBLE}),this.processPhysicalBytesGauge=this.meter.createObservableGauge(Yo.QuickPulseOpenTelemetryMetricNames.PHYSICAL_BYTES,{valueType:pn.ValueType.INT}),this.percentProcessorTimeNormalizedGauge=this.meter.createObservableGauge(Yo.QuickPulseOpenTelemetryMetricNames.PROCESSOR_TIME_NORMALIZED,{valueType:pn.ValueType.DOUBLE}),this.exceptionsRateGauge=this.meter.createObservableGauge(Yo.QuickPulseOpenTelemetryMetricNames.EXCEPTION_RATE,{valueType:pn.ValueType.DOUBLE}),this.requestDurationGauge.addCallback(this.getRequestDuration.bind(this)),this.requestRateGauge.addCallback(this.getRequestRate.bind(this)),this.requestFailedRateGauge.addCallback(this.getRequestFailedRate.bind(this)),this.dependencyDurationGauge.addCallback(this.getDependencyDuration.bind(this)),this.dependencyRateGauge.addCallback(this.getDependencyRate.bind(this)),this.dependencyFailedRateGauge.addCallback(this.getDependencyFailedRate.bind(this)),this.exceptionsRateGauge.addCallback(this.getExceptionRate.bind(this)),this.processPhysicalBytesGauge.addCallback(this.getPhysicalMemory.bind(this)),this.percentProcessorTimeNormalizedGauge.addCallback(this.getProcessorTimeNormalized.bind(this));}deactivateMetrics(){this.documents=[],this.validDocumentFilterConjuctionGroupInfos.clear(),this.errorTracker.clearRunTimeErrors(),this.errorTracker.clearValidationTimeErrors(),this.validDerivedMetrics.clear(),this.derivedMetricProjection.clearProjectionMaps(),this.seenMetricIds.clear(),this.meterProvider?.shutdown(),this.meterProvider=void 0;}async flush(){await this.meterProvider?.forceFlush();}getMeterProvider(){return this.meterProvider}getDocuments(){let e=this.documents;return this.documents=[],e}getErrors(){let e=this.errorTracker.getErrors();return this.errorTracker.clearRunTimeErrors(),e}getDerivedMetricValues(){return this.derivedMetricProjection.getMetricValues()}addDocument(e){e&&(this.documents.length>20&&this.documents.shift(),this.documents.push(e));}recordSpan(e){if(this.isCollectingData){let r=(0, Nn.getSpanData)(e),n,s;(0, Nn.isRequestData)(r)?(n=this.validDocumentFilterConjuctionGroupInfos.get(Fr.KnownTelemetryType.Request)||new Map,s=this.validDerivedMetrics.get(Fr.KnownTelemetryType.Request)||[]):(n=this.validDocumentFilterConjuctionGroupInfos.get(Fr.KnownTelemetryType.Dependency)||new Map,s=this.validDerivedMetrics.get(Fr.KnownTelemetryType.Dependency)||[]),this.applyDocumentFilters(n,r),this.checkMetricFilterAndCreateProjection(s,r);let a=(0, ade.hrTimeToMilliseconds)(e.duration),o=e.status.code!==pn.SpanStatusCode.ERROR;e.kind===pn.SpanKind.SERVER||e.kind===pn.SpanKind.CONSUMER?(this.totalRequestCount++,this.requestDuration+=a,o||this.totalFailedRequestCount++):(this.totalDependencyCount++,this.dependencyDuration+=a,o||this.totalFailedDependencyCount++),e.events&&e.events.forEach(i=>{if(i.attributes=i.attributes||{},i.name==="exception"){let c=(0, Nn.getSpanExceptionColumns)(i.attributes,e.attributes);n=this.validDocumentFilterConjuctionGroupInfos.get(Fr.KnownTelemetryType.Exception)||new Map,this.applyDocumentFilters(n,c,i.attributes[cde.SEMATTRS_EXCEPTION_TYPE]),s=this.validDerivedMetrics.get(Fr.KnownTelemetryType.Exception)||[],this.checkMetricFilterAndCreateProjection(s,c),this.totalExceptionCount++;}});}}recordLog(e){if(this.isCollectingData){let r=(0, Nn.getLogData)(e),n,s;(0, Nn.isExceptionData)(r)?(s=this.validDocumentFilterConjuctionGroupInfos.get(Fr.KnownTelemetryType.Exception)||new Map,this.applyDocumentFilters(s,r,e.attributes[cde.SEMATTRS_EXCEPTION_TYPE]),n=this.validDerivedMetrics.get(Fr.KnownTelemetryType.Exception)||[],this.totalExceptionCount++):(s=this.validDocumentFilterConjuctionGroupInfos.get(Fr.KnownTelemetryType.Trace)||new Map,this.applyDocumentFilters(s,r),n=this.validDerivedMetrics.get(Fr.KnownTelemetryType.Trace)||[]),this.checkMetricFilterAndCreateProjection(n,r);}}getRequestDuration(e){let r=+new Date,n=this.totalRequestCount-this.lastRequestDuration.count||0,s=this.requestDuration-this.lastRequestDuration.duration||0;if(r-this.lastRequestDuration.time>0){let o=s/n||0;e.observe(o);}this.lastRequestDuration={count:this.totalRequestCount,duration:this.requestDuration,time:r};}getRequestRate(e){let r=+new Date,n=this.totalRequestCount-this.lastRequestRate.count||0,s=r-this.lastRequestRate.time;if(s>0){let a=s/1e3,o=n/a;e.observe(o);}this.lastRequestRate={count:this.totalRequestCount,time:r};}getRequestFailedRate(e){let r=+new Date,n=this.totalFailedRequestCount-this.lastFailedRequestRate.count||0,s=r-this.lastFailedRequestRate.time;if(s>0){let a=s/1e3,o=n/a;e.observe(o);}this.lastFailedRequestRate={count:this.totalFailedRequestCount,time:r};}getDependencyDuration(e){let r=+new Date,n=this.totalDependencyCount-this.lastDependencyDuration.count||0,s=this.dependencyDuration-this.lastDependencyDuration.duration||0;if(r-this.lastDependencyDuration.time>0){let o=s/n||0;e.observe(o);}this.lastDependencyDuration={count:this.totalDependencyCount,duration:this.dependencyDuration,time:r};}getDependencyRate(e){let r=+new Date,n=this.totalDependencyCount-this.lastDependencyRate.count||0,s=r-this.lastDependencyRate.time;if(s>0){let a=s/1e3,o=n/a;e.observe(o);}this.lastDependencyRate={count:this.totalDependencyCount,time:r};}getDependencyFailedRate(e){let r=+new Date,n=this.totalFailedDependencyCount-this.lastFailedDependencyRate.count||0,s=r-this.lastFailedDependencyRate.time;if(s>0){let a=s/1e3,o=n/a;e.observe(o);}this.lastFailedDependencyRate={count:this.totalFailedDependencyCount,time:r};}getExceptionRate(e){let r=+new Date,n=this.totalExceptionCount-this.lastExceptionRate.count||0,s=r-this.lastExceptionRate.time;if(s>0){let a=s/1e3,o=n/a;e.observe(o);}this.lastExceptionRate={count:this.totalExceptionCount,time:r};}getPhysicalMemory(e){let r=(0, ude.getPhysicalMemory)();e.observe(r);}getProcessorTimeNormalized(e){if(process&&process.hrtime){let r=(0, ude.getProcessorTimeNormalized)(this.lastHrTime,this.lastCpuUsage);e.observe(r),this.lastHrTime=process.hrtime.bigint(),this.lastCpuUsage=process.cpuUsage();}else Tnt.Logger.getInstance().debug("Getting Normalized Processor Time Failed. No process available.");}updateConfiguration(e){this.etag=e.xMsQpsConfigurationEtag||"",this.quickpulseExporter.setEtag(this.etag),this.errorTracker.clearValidationTimeErrors(),this.validDocumentFilterConjuctionGroupInfos.clear(),this.validDerivedMetrics.clear(),this.derivedMetricProjection.clearProjectionMaps(),this.seenMetricIds.clear(),this.parseDocumentFilterConfiguration(e),this.parseMetricFilterConfiguration(e);}parseDocumentFilterConfiguration(e){!e?.documentStreams||typeof e.documentStreams.forEach!="function"||e.documentStreams.forEach(r=>{r.documentFilterGroups.forEach(n=>{try{this.validator.validateTelemetryType(n.telemetryType),this.validator.validateDocumentFilters(n),this.filter.renameExceptionFieldNamesForFiltering(n.filters),this.validDocumentFilterConjuctionGroupInfos.has(n.telemetryType)||this.validDocumentFilterConjuctionGroupInfos.set(n.telemetryType,new Map);let s=this.validDocumentFilterConjuctionGroupInfos.get(n.telemetryType);s?.has(r.id)?s.get(r.id)?.push(n.filters):s?.set(r.id,[n.filters]);}catch(s){let a={collectionConfigurationErrorType:"",message:"",fullException:"",data:[]};s instanceof Lc.TelemetryTypeError?a.collectionConfigurationErrorType="DocumentTelemetryTypeUnsupported":s instanceof Lc.UnexpectedFilterCreateError&&(a.collectionConfigurationErrorType=Fr.KnownCollectionConfigurationErrorType.DocumentStreamFailureToCreateFilterUnexpected),s instanceof Error&&(a.message=s.message,a.fullException=s.stack||"");let o=[];o.push({key:"DocumentStreamInfoId",value:r.id}),o.push({key:"ETag",value:this.etag}),a.data=o,this.errorTracker.addValidationError(a);}});});}applyDocumentFilters(e,r,n){let s=new Set;if(e.forEach((a,o)=>{a.forEach(i=>{this.filter.checkFilterConjunctionGroup(i,r)&&s.add(o);});}),s.size>0||e.size===0){let a;(0, Nn.isRequestData)(r)||(0, Nn.isDependencyData)(r)?a=(0, Nn.getSpanDocument)(r):(0, Nn.isExceptionData)(r)&&n?a=(0, Nn.getLogDocument)(r,n):a=(0, Nn.getLogDocument)(r),a.documentStreamIds=[...s],this.addDocument(a);}}parseMetricFilterConfiguration(e){!e?.documentStreams||typeof e.documentStreams.forEach!="function"||e.metrics.forEach(r=>{try{if(!this.seenMetricIds.has(r.id))this.seenMetricIds.add(r.id),this.validator.validateTelemetryType(r.telemetryType),this.validator.checkCustomMetricProjection(r),this.validator.validateMetricFilters(r),r.filterGroups.forEach(n=>{this.filter.renameExceptionFieldNamesForFiltering(n);}),this.validDerivedMetrics.has(r.telemetryType)?this.validDerivedMetrics.get(r.telemetryType)?.push(r):this.validDerivedMetrics.set(r.telemetryType,[r]);else throw new Lc.DuplicateMetricIdError(`Duplicate Metric Id: ${r.id}`);this.derivedMetricProjection.initDerivedMetricProjection(r);}catch(n){let s={collectionConfigurationErrorType:"",message:"",fullException:"",data:[]};n instanceof Lc.TelemetryTypeError?s.collectionConfigurationErrorType=Fr.KnownCollectionConfigurationErrorType.MetricTelemetryTypeUnsupported:n instanceof Lc.UnexpectedFilterCreateError?s.collectionConfigurationErrorType=Fr.KnownCollectionConfigurationErrorType.MetricFailureToCreateFilterUnexpected:n instanceof Lc.DuplicateMetricIdError&&(s.collectionConfigurationErrorType=Fr.KnownCollectionConfigurationErrorType.MetricDuplicateIds),n instanceof Error&&(s.message=n.message,s.fullException=n.stack||"");let a=[];a.push({key:"MetricId",value:r.id}),a.push({key:"ETag",value:this.etag}),s.data=a,this.errorTracker.addValidationError(s);}});}checkMetricFilterAndCreateProjection(e,r){e.forEach(n=>{if(this.filter.checkMetricFilters(n,r))try{this.derivedMetricProjection.calculateProjection(n,r);}catch(s){let a={collectionConfigurationErrorType:"",message:"",fullException:"",data:[]};if(s instanceof Lc.MetricFailureToCreateError){a.collectionConfigurationErrorType=Fr.KnownCollectionConfigurationErrorType.MetricFailureToCreate,s instanceof Error&&(a.message=s.message,a.fullException=s.stack||"");let o=[];o.push({key:"MetricId",value:n.id}),o.push({key:"ETag",value:this.etag}),a.data=o,this.errorTracker.addRunTimeError(a);}}});}};cv.LiveMetrics=eU;});var Sde=f(uv=>{Object.defineProperty(uv,"__esModule",{value:true});uv.PerformanceCounterMetrics=void 0;var Tde=(Ce(),A(Ne)),Ud=Tde.__importDefault(P("os")),$o=(M(),A(H)),ynt=Dd(),_de=(er(),A(vr)),Js=N_(),mde=jo(),Ede=Dl(),Ko=Tde.__importDefault(P("process")),tU=class{internalConfig;collectionInterval=6e4;meterProvider;azureExporter;meter;requestDurationHistogram;requestRateGauge;requestRateGaugeCallback;memoryPrivateBytesGauge;memoryPrivateBytesGaugeCallback;memoryAvailableBytesGauge;memoryAvailableBytesGaugeCallback;processorTimeGauge;processorTimeGaugeCallback;processTimeNormalizedGauge;processTimeNormalizedGaugeCallback;processTimeGauge;processTimeGaugeCallback;exceptionCountGauge;exceptionCountGaugeCallback;lastExceptionRate={count:0,time:0};totalCount=0;intervalExecutionTime=0;lastRequestRate;lastAppCpuUsage;lastHrtime;lastCpus;lastCpusProcess;totalExceptionCount=0;constructor(e,r){this.internalConfig=e,this.lastCpus=Ud.default.cpus(),this.lastCpusProcess=Ud.default.cpus(),this.lastAppCpuUsage=Ko.default.cpuUsage(),this.lastHrtime=Ko.default.hrtime(),this.lastRequestRate={count:this.totalCount,time:+new Date,executionInterval:this.intervalExecutionTime},this.azureExporter=new ynt.AzureMonitorMetricExporter(this.internalConfig.azureMonitorExporterOptions);let n={exporter:this.azureExporter,exportIntervalMillis:r?.collectionInterval||this.collectionInterval},s={readers:[new _de.PeriodicExportingMetricReader(n)],resource:this.internalConfig.resource};this.meterProvider=new _de.MeterProvider(s),this.meter=this.meterProvider.getMeter("AzureMonitorPerformanceCountersMeter"),this.lastRequestRate={count:0,time:0,executionInterval:0},this.requestDurationHistogram=this.meter.createHistogram(Js.PerformanceCounterMetricNames.REQUEST_DURATION,{valueType:$o.ValueType.DOUBLE}),this.requestRateGauge=this.meter.createObservableGauge(Js.PerformanceCounterMetricNames.REQUEST_RATE,{description:"Incoming Requests Average Execution Time",valueType:$o.ValueType.DOUBLE}),this.memoryPrivateBytesGauge=this.meter.createObservableGauge(Js.PerformanceCounterMetricNames.PRIVATE_BYTES,{description:"Amount of memory process has used in bytes",valueType:$o.ValueType.INT}),this.memoryAvailableBytesGauge=this.meter.createObservableGauge(Js.PerformanceCounterMetricNames.AVAILABLE_BYTES,{description:"Amount of available memory in bytes",valueType:$o.ValueType.INT}),this.processorTimeGauge=this.meter.createObservableGauge(Js.PerformanceCounterMetricNames.PROCESSOR_TIME,{description:"Processor time as a percentage",valueType:$o.ValueType.DOUBLE}),this.processTimeGauge=this.meter.createObservableGauge(Js.PerformanceCounterMetricNames.PROCESS_TIME_STANDARD,{description:"Process CPU usage as a percentage",valueType:$o.ValueType.DOUBLE}),this.processTimeNormalizedGauge=this.meter.createObservableGauge(Js.PerformanceCounterMetricNames.PROCESS_TIME_NORMALIZED,{description:"Process CPU usage normalized as a percentage",valueType:$o.ValueType.DOUBLE}),this.exceptionCountGauge=this.meter.createObservableGauge(Js.PerformanceCounterMetricNames.EXCEPTION_RATE,{description:"Exception Rate",valueType:$o.ValueType.DOUBLE}),this.requestRateGaugeCallback=this.getRequestRate.bind(this),this.memoryPrivateBytesGaugeCallback=this.getPrivateMemory.bind(this),this.memoryAvailableBytesGaugeCallback=this.getAvailableMemory.bind(this),this.processorTimeGaugeCallback=this.getProcessorTime.bind(this),this.processTimeGaugeCallback=this.getProcessTime.bind(this),this.processTimeNormalizedGaugeCallback=this.getNormalizedProcessTime.bind(this),this.exceptionCountGaugeCallback=this.getExceptionRate.bind(this),this.memoryPrivateBytesGauge.addCallback(this.memoryPrivateBytesGaugeCallback),this.memoryAvailableBytesGauge.addCallback(this.memoryAvailableBytesGaugeCallback),this.processTimeGauge.addCallback(this.processTimeGaugeCallback),this.processTimeNormalizedGauge.addCallback(this.processTimeNormalizedGaugeCallback),this.processorTimeGauge.addCallback(this.processorTimeGaugeCallback),this.requestRateGauge.addCallback(this.requestRateGaugeCallback),this.exceptionCountGauge.addCallback(this.exceptionCountGaugeCallback);}async shutdown(){return this.meterProvider.shutdown()}async flush(){return this.meterProvider.forceFlush()}getMeterProvider(){return this.meterProvider}recordSpan(e){if(e.kind!==$o.SpanKind.SERVER)return;this.totalCount++;let r=e.duration[0];this.intervalExecutionTime+=r,this.requestDurationHistogram.record(r),e.events&&e.events.forEach(n=>{n.attributes=n.attributes||{},n.name==="exception"&&this.totalExceptionCount++;});}recordLog(e){let r=(0, mde.getLogData)(e);(0, mde.isExceptionData)(r)&&this.totalExceptionCount++;}getRequestRate(e){let r=+new Date,n=this.totalCount-this.lastRequestRate.count||0,s=r-this.lastRequestRate.time;if(s>0){let a=s/1e3,o=n/a;e.observe(o);}this.lastRequestRate={count:this.totalCount,time:r,executionInterval:this.lastRequestRate.executionInterval};}getPrivateMemory(e){Ko.default?.memoryUsage?e.observe(Ko.default.memoryUsage().rss):Ede.Logger.getInstance().debug("Couldn't report Private Memory. Process is not defined.");}getAvailableMemory(e){e.observe(Ud.default.freemem());}getTotalCombinedCpu(e,r){let n=0,s=0,a=0,o=0,i=0;for(let u=0;e&&u<e.length;u++){let l=e[u],d=r[u],p=l.times,h=d.times,T=p.user-h.user;T=T>0?T:0,n+=T;let g=p.sys-h.sys;g=g>0?g:0,s+=g;let y=p.nice-h.nice;y=y>0?y:0,a+=y;let R=p.idle-h.idle;R=R>0?R:0,o+=R;let b=p.irq-h.irq;b=b>0?b:0,i+=b;}return {combinedTotal:n+s+a+o+i,totalUser:n,totalIdle:o}}getProcessorTime(e){let r=Ud.default.cpus();if(r&&r.length&&this.lastCpus&&r.length===this.lastCpus.length){let n=this.getTotalCombinedCpu(r,this.lastCpus),s=n.combinedTotal>0?(n.combinedTotal-n.totalIdle)/n.combinedTotal*100:0;e.observe(s);}this.lastCpus=r;}getNormalizedProcessTime(e){let r=Ud.default.cpus();if(r&&r.length&&this.lastCpusProcess&&r.length===this.lastCpusProcess.length){let n,s=Ko.default.cpuUsage(),a=Ko.default.hrtime(),o=s.user-this.lastAppCpuUsage.user+(s.system-this.lastAppCpuUsage.system)||0;if(typeof this.lastHrtime<"u"&&this.lastHrtime.length===2){let u=(a[0]-this.lastHrtime[0])*1e6+(a[1]-this.lastHrtime[1])/1e3||0;n=100*o/(u*r.length);}this.lastAppCpuUsage=s,this.lastHrtime=a;let i=this.getTotalCombinedCpu(r,this.lastCpusProcess),c=0;n!==void 0?c=n:c=i.totalUser/i.combinedTotal*100,e.observe(c);}this.lastCpusProcess=r;}getProcessTime(e){if(Ko.default){let r=Ud.default.cpus();if(r&&r.length&&this.lastCpusProcess&&r.length===this.lastCpusProcess.length){let n,s=Ko.default.cpuUsage(),a=Ko.default.hrtime(),o=s.user-this.lastAppCpuUsage.user+(s.system-this.lastAppCpuUsage.system)||0;if(typeof this.lastHrtime<"u"&&this.lastHrtime.length===2){let u=(a[0]-this.lastHrtime[0])*1e6+(a[1]-this.lastHrtime[1])/1e3||0;n=100*o/u;}this.lastAppCpuUsage=s,this.lastHrtime=a;let i=this.getTotalCombinedCpu(r,this.lastCpusProcess),c=0;n!==void 0?c=n:c=i.totalUser/i.combinedTotal*100,e.observe(c);}this.lastCpusProcess=r;}else Ede.Logger.getInstance().debug("Couldn't report process time. Process is not defined.");}getExceptionRate(e){let r=+new Date,n=this.totalExceptionCount-this.lastExceptionRate.count||0,s=r-this.lastExceptionRate.time;if(s>0){let a=s/1e3,o=n/a;e.observe(o);}this.lastExceptionRate={count:this.totalExceptionCount,time:r};}};uv.PerformanceCounterMetrics=tU;});var gde=f(lv=>{Object.defineProperty(lv,"__esModule",{value:true});lv.MetricHandler=void 0;var Ant=Dd(),Rnt=(er(),A(vr)),vnt=Wle(),Ont=N_(),Nnt=hde(),Cnt=Sde(),rU=class{_azureExporter;_metricReader;_standardMetrics;_performanceCounters;_liveMetrics;_config;_views;constructor(e){this._config=e,this._views=[],e.instrumentationOptions.azureSdk?.enabled&&this._views.push({meterName:"@azure/opentelemetry-instrumentation-azure-sdk"}),e.instrumentationOptions.http?.enabled&&this._views.push({meterName:"@azure/opentelemetry-instrumentation-http"}),e.instrumentationOptions.mongoDb?.enabled&&this._views.push({meterName:"@azure/opentelemetry-instrumentation-mongodb"}),e.instrumentationOptions.mySql?.enabled&&this._views.push({meterName:"@opentelemetry/instrumentation-mysql"}),e.instrumentationOptions.postgreSql?.enabled&&this._views.push({meterName:"@opentelemetry/instrumentation-pg"}),e.instrumentationOptions.redis4?.enabled&&this._views.push({meterName:"@opentelemetry/instrumentation-redis-4"}),e.instrumentationOptions.redis?.enabled&&this._views.push({meterName:"@azure/opentelemetry-instrumentation-redis"}),this._azureExporter=new Ant.AzureMonitorMetricExporter(this._config.azureMonitorExporterOptions);let n={exporter:this._azureExporter,exportIntervalMillis:this._config.metricExportIntervalMillis||6e4};this._metricReader=new Rnt.PeriodicExportingMetricReader(n),this._config.enableStandardMetrics&&!process.env[Ont.APPLICATION_INSIGHTS_NO_STANDARD_METRICS]&&(this._standardMetrics=new vnt.StandardMetrics(this._config)),this._config.enableLiveMetrics&&(this._liveMetrics=new Nnt.LiveMetrics(this._config)),this._config.enablePerformanceCounters&&(this._performanceCounters=new Cnt.PerformanceCounterMetrics(this._config));}getMetricReader(){return this._metricReader}getViews(){return this._views}markSpanAsProcessed(e){this._standardMetrics?.markSpanAsProcessed(e);}recordSpan(e){this._standardMetrics?.recordSpan(e),this._liveMetrics?.recordSpan(e),this._performanceCounters?.recordSpan(e);}recordLog(e){this._standardMetrics?.recordLog(e),this._liveMetrics?.recordLog(e),this._performanceCounters?.recordLog(e);}async shutdown(){this._standardMetrics?.shutdown(),this._liveMetrics?.shutdown(),this._performanceCounters?.shutdown();}};lv.MetricHandler=rU;});var yde=f(dv=>{Object.defineProperty(dv,"__esModule",{value:true});dv.MetricHandler=void 0;var Pnt=gde();Object.defineProperty(dv,"MetricHandler",{enumerable:true,get:function(){return Pnt.MetricHandler}});});var nU=f(pv=>{Object.defineProperty(pv,"__esModule",{value:true});pv.logger=void 0;var bnt=Ll();pv.logger=(0, bnt.createClientLogger)("opentelemetry-instrumentation-azure-sdk");});var B_,Ade,iU=E(()=>{B_=class{emit(e){}},Ade=new B_;});var oU,fv,sU=E(()=>{iU();oU=class{getLogger(e,r,n){return new B_}},fv=new oU;});var hv,Rde=E(()=>{iU();hv=class{constructor(e,r,n,s){this._provider=e,this.name=r,this.version=n,this.options=s;}emit(e){this._getLogger().emit(e);}_getLogger(){if(this._delegate)return this._delegate;let e=this._provider.getDelegateLogger(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):Ade}};});var F_,vde=E(()=>{sU();Rde();F_=class{getLogger(e,r,n){var s;return (s=this.getDelegateLogger(e,r,n))!==null&&s!==void 0?s:new hv(this,e,r,n)}getDelegate(){var e;return (e=this._delegate)!==null&&e!==void 0?e:fv}setDelegate(e){this._delegate=e;}getDelegateLogger(e,r,n){var s;return (s=this._delegate)===null||s===void 0?void 0:s.getLogger(e,r,n)}};});var _v,Ode=E(()=>{_v=typeof globalThis=="object"?globalThis:global;});var Nde=E(()=>{Ode();});var Cde=E(()=>{Nde();});function Pde(t,e,r){return n=>n===t?e:r}var q_,kd,aU,bde=E(()=>{Cde();q_=Symbol.for("io.opentelemetry.js.api.logs"),kd=_v;aU=1;});var mv,Mde=E(()=>{bde();sU();vde();mv=class t{constructor(){this._proxyLoggerProvider=new F_;}static getInstance(){return this._instance||(this._instance=new t),this._instance}setGlobalLoggerProvider(e){return kd[q_]?this.getLoggerProvider():(kd[q_]=Pde(aU,e,fv),this._proxyLoggerProvider.setDelegate(e),e)}getLoggerProvider(){var e,r;return (r=(e=kd[q_])===null||e===void 0?void 0:e.call(kd,aU))!==null&&r!==void 0?r:this._proxyLoggerProvider}getLogger(e,r,n){return this.getLoggerProvider().getLogger(e,r,n)}disable(){delete kd[q_],this._proxyLoggerProvider=new F_;}};});var Ev,cU=E(()=>{Mde();Ev=mv.getInstance();});function Ide(t,e,r,n){for(let s=0,a=t.length;s<a;s++){let o=t[s];e&&o.setTracerProvider(e),r&&o.setMeterProvider(r),n&&o.setLoggerProvider&&o.setLoggerProvider(n),o.getConfig().enabled||o.enable();}}function xde(t){t.forEach(e=>e.disable());}var Lde=E(()=>{});function Dde(t){let e=t.tracerProvider||ge.getTracerProvider(),r=t.meterProvider||Dr.getMeterProvider(),n=t.loggerProvider||Ev.getLoggerProvider(),s=t.instrumentations?.flat()??[];return Ide(s,e,r,n),()=>{xde(s);}}var wde=E(()=>{M();cU();Lde();});function qde(t,e,r){if(!xnt(t))return N.error(`Invalid version: ${t}`),false;if(!e)return  true;e=e.replace(/([<>=~^]+)\s+/g,"$1");let n=Unt(t);if(!n)return  false;let s=[],a=Hde(n,e,s,r);return a&&!r?.includePrerelease?Dnt(n,s):a}function xnt(t){return typeof t=="string"&&Fde.test(t)}function Hde(t,e,r,n){if(e.includes("||")){let s=e.trim().split("||");for(let a of s)if(uU(t,a,r,n))return  true;return  false}else if(e.includes(" - "))e=nit(e,n);else if(e.includes(" ")){let s=e.trim().replace(/\s{2,}/g," ").split(" ");for(let a of s)if(!uU(t,a,r,n))return  false;return  true}return uU(t,e,r,n)}function uU(t,e,r,n){if(e=wnt(e,n),e.includes(" "))return Hde(t,e,r,n);{let s=knt(e);return r.push(s),Lnt(t,s)}}function Lnt(t,e){if(e.invalid)return  false;if(!e.version||dU(e.version))return  true;let r=kde(t.versionSegments||[],e.versionSegments||[]);if(r===0){let n=t.prereleaseSegments||[],s=e.prereleaseSegments||[];!n.length&&!s.length?r=0:!n.length&&s.length?r=1:n.length&&!s.length?r=-1:r=kde(n,s);}return Int[e.op]?.includes(r)}function Dnt(t,e){return t.prerelease?e.some(r=>r.prerelease&&r.version===t.version):true}function wnt(t,e){return t=t.trim(),t=tit(t,e),t=eit(t),t=rit(t,e),t=t.trim(),t}function qr(t){return !t||t.toLowerCase()==="x"||t==="*"}function Unt(t){let e=t.match(Fde);if(!e){N.error(`Invalid version: ${t}`);return}let r=e.groups.version,n=e.groups.prerelease,s=e.groups.build,a=r.split("."),o=n?.split(".");return {op:void 0,version:r,versionSegments:a,versionSegmentCount:a.length,prerelease:n,prereleaseSegments:o,prereleaseSegmentCount:o?o.length:0,build:s}}function knt(t){if(!t)return {};let e=t.match(Mnt);if(!e)return N.error(`Invalid range: ${t}`),{invalid:true};let r=e.groups.op,n=e.groups.version,s=e.groups.prerelease,a=e.groups.build,o=n.split("."),i=s?.split(".");return r==="=="&&(r="="),{op:r||"=",version:n,versionSegments:o,versionSegmentCount:o.length,prerelease:s,prereleaseSegments:i,prereleaseSegmentCount:i?i.length:0,build:a}}function dU(t){return t==="*"||t==="x"||t==="X"}function Ude(t){let e=parseInt(t,10);return isNaN(e)?t:e}function Vnt(t,e){if(typeof t==typeof e){if(typeof t=="number")return [t,e];if(typeof t=="string")return [t,e];throw new Error("Version segments can only be strings or numbers")}else return [String(t),String(e)]}function Bnt(t,e){if(dU(t)||dU(e))return 0;let[r,n]=Vnt(Ude(t),Ude(e));return r>n?1:r<n?-1:0}function kde(t,e){for(let r=0;r<Math.max(t.length,e.length);r++){let n=Bnt(t[r]||"0",e[r]||"0");if(n!==0)return n}return 0}function eit(t){let e=Xnt;return t.replace(e,(r,n,s,a,o)=>{let i;return qr(n)?i="":qr(s)?i=`>=${n}.0.0 <${+n+1}.0.0-0`:qr(a)?i=`>=${n}.${s}.0 <${n}.${+s+1}.0-0`:o?i=`>=${n}.${s}.${a}-${o} <${n}.${+s+1}.0-0`:i=`>=${n}.${s}.${a} <${n}.${+s+1}.0-0`,i})}function tit(t,e){let r=Znt,n=e?.includePrerelease?"-0":"";return t.replace(r,(s,a,o,i,c)=>{let u;return qr(a)?u="":qr(o)?u=`>=${a}.0.0${n} <${+a+1}.0.0-0`:qr(i)?a==="0"?u=`>=${a}.${o}.0${n} <${a}.${+o+1}.0-0`:u=`>=${a}.${o}.0${n} <${+a+1}.0.0-0`:c?a==="0"?o==="0"?u=`>=${a}.${o}.${i}-${c} <${a}.${o}.${+i+1}-0`:u=`>=${a}.${o}.${i}-${c} <${a}.${+o+1}.0-0`:u=`>=${a}.${o}.${i}-${c} <${+a+1}.0.0-0`:a==="0"?o==="0"?u=`>=${a}.${o}.${i}${n} <${a}.${o}.${+i+1}-0`:u=`>=${a}.${o}.${i}${n} <${a}.${+o+1}.0-0`:u=`>=${a}.${o}.${i} <${+a+1}.0.0-0`,u})}function rit(t,e){let r=znt;return t.replace(r,(n,s,a,o,i,c)=>{let u=qr(a),l=u||qr(o),d=l||qr(i),p=d;return s==="="&&p&&(s=""),c=e?.includePrerelease?"-0":"",u?s===">"||s==="<"?n="<0.0.0-0":n="*":s&&p?(l&&(o=0),i=0,s===">"?(s=">=",l?(a=+a+1,o=0,i=0):(o=+o+1,i=0)):s==="<="&&(s="<",l?a=+a+1:o=+o+1),s==="<"&&(c="-0"),n=`${s+a}.${o}.${i}${c}`):l?n=`>=${a}.0.0${c} <${+a+1}.0.0-0`:d&&(n=`>=${a}.${o}.0${c} <${a}.${+o+1}.0-0`),n})}function nit(t,e){let r=$nt;return t.replace(r,(n,s,a,o,i,c,u,l,d,p,h,T)=>(qr(a)?s="":qr(o)?s=`>=${a}.0.0${e?.includePrerelease?"-0":""}`:qr(i)?s=`>=${a}.${o}.0${e?.includePrerelease?"-0":""}`:c?s=`>=${s}`:s=`>=${s}${e?.includePrerelease?"-0":""}`,qr(d)?l="":qr(p)?l=`<${+d+1}.0.0-0`:qr(h)?l=`<${d}.${+p+1}.0-0`:T?l=`<=${d}.${p}.${h}-${T}`:e?.includePrerelease?l=`<${d}.${p}.${+h+1}-0`:l=`<=${l}`,`${s} ${l}`.trim()))}var Fde,Mnt,Int,Gde,jde,Fnt,qnt,Vde,Hnt,Bde,Gnt,lU,H_,jnt,znt,Ynt,$nt,Knt,Wnt,Xnt,Qnt,Jnt,Znt,zde=E(()=>{M();Fde=/^(?:v)?(?<version>(?<major>0|[1-9]\d*)\.(?<minor>0|[1-9]\d*)\.(?<patch>0|[1-9]\d*))(?:-(?<prerelease>(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+(?<build>[0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/,Mnt=/^(?<op><|>|=|==|<=|>=|~|\^|~>)?\s*(?:v)?(?<version>(?<major>x|X|\*|0|[1-9]\d*)(?:\.(?<minor>x|X|\*|0|[1-9]\d*))?(?:\.(?<patch>x|X|\*|0|[1-9]\d*))?)(?:-(?<prerelease>(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+(?<build>[0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/,Int={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1],"!=":[-1,1]};Gde="[a-zA-Z0-9-]",jde="0|[1-9]\\d*",Fnt=`\\d*[a-zA-Z-]${Gde}*`,qnt="((?:<|>)?=?)",Vde=`(?:${jde}|${Fnt})`,Hnt=`(?:-(${Vde}(?:\\.${Vde})*))`,Bde=`${Gde}+`,Gnt=`(?:\\+(${Bde}(?:\\.${Bde})*))`,lU=`${jde}|x|X|\\*`,H_=`[v=\\s]*(${lU})(?:\\.(${lU})(?:\\.(${lU})(?:${Hnt})?${Gnt}?)?)?`,jnt=`^${qnt}\\s*${H_}$`,znt=new RegExp(jnt),Ynt=`^\\s*(${H_})\\s+-\\s+(${H_})\\s*$`,$nt=new RegExp(Ynt),Knt="(?:~>?)",Wnt=`^${Knt}${H_}$`,Xnt=new RegExp(Wnt),Qnt="(?:\\^)",Jnt=`^${Qnt}${H_}$`,Znt=new RegExp(Jnt);});var fU=f((tLt,Kde)=>{function pU(t){return typeof t=="function"}var Hr=console.error.bind(console);function G_(t,e,r){var n=!!t[e]&&t.propertyIsEnumerable(e);Object.defineProperty(t,e,{configurable:true,enumerable:n,writable:true,value:r});}function j_(t){t&&t.logger&&(pU(t.logger)?Hr=t.logger:Hr("new logger isn't a function, not replacing"));}function Yde(t,e,r){if(!t||!t[e]){Hr("no original function "+e+" to wrap");return}if(!r){Hr("no wrapper function"),Hr(new Error().stack);return}if(!pU(t[e])||!pU(r)){Hr("original object and wrapper must be functions");return}var n=t[e],s=r(n,e);return G_(s,"__original",n),G_(s,"__unwrap",function(){t[e]===s&&G_(t,e,n);}),G_(s,"__wrapped",true),G_(t,e,s),s}function iit(t,e,r){if(t)Array.isArray(t)||(t=[t]);else {Hr("must provide one or more modules to patch"),Hr(new Error().stack);return}if(!(e&&Array.isArray(e))){Hr("must provide one or more functions to wrap on modules");return}t.forEach(function(n){e.forEach(function(s){Yde(n,s,r);});});}function $de(t,e){if(!t||!t[e]){Hr("no function to unwrap."),Hr(new Error().stack);return}if(!t[e].__unwrap)Hr("no original to unwrap to -- has "+e+" already been unwrapped?");else return t[e].__unwrap()}function oit(t,e){if(t)Array.isArray(t)||(t=[t]);else {Hr("must provide one or more modules to patch"),Hr(new Error().stack);return}if(!(e&&Array.isArray(e))){Hr("must provide one or more functions to unwrap on modules");return}t.forEach(function(r){e.forEach(function(n){$de(r,n);});});}j_.wrap=Yde;j_.massWrap=iit;j_.unwrap=$de;j_.massUnwrap=oit;Kde.exports=j_;});var Zs,Tv,Wde=E(()=>{M();cU();Zs=Yr(fU()),Tv=class{instrumentationName;instrumentationVersion;_config={};_tracer;_meter;_logger;_diag;constructor(e,r,n){this.instrumentationName=e,this.instrumentationVersion=r,this.setConfig(n),this._diag=N.createComponentLogger({namespace:e}),this._tracer=ge.getTracer(e,r),this._meter=Dr.getMeter(e,r),this._logger=Ev.getLogger(e,r),this._updateMetricInstruments();}_wrap=Zs.wrap;_unwrap=Zs.unwrap;_massWrap=Zs.massWrap;_massUnwrap=Zs.massUnwrap;get meter(){return this._meter}setMeterProvider(e){this._meter=e.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments();}get logger(){return this._logger}setLoggerProvider(e){this._logger=e.getLogger(this.instrumentationName,this.instrumentationVersion);}getModuleDefinitions(){let e=this.init()??[];return Array.isArray(e)?e:[e]}_updateMetricInstruments(){}getConfig(){return this._config}setConfig(e){this._config={enabled:true,...e};}setTracerProvider(e){this._tracer=e.getTracer(this.instrumentationName,this.instrumentationVersion);}get tracer(){return this._tracer}_runSpanCustomizationHook(e,r,n,s){if(e)try{e(n,s);}catch(a){this._diag.error("Error running span customization hook due to exception in handler",{triggerName:r},a);}}};});var z_,Sv,gv,Xde=E(()=>{z_="/",Sv=class{hooks=[];children=new Map},gv=class{_trie=new Sv;_counter=0;insert(e){let r=this._trie;for(let n of e.moduleName.split(z_)){let s=r.children.get(n);s||(s=new Sv,r.children.set(n,s)),r=s;}r.hooks.push({hook:e,insertedId:this._counter++});}search(e,{maintainInsertionOrder:r,fullOnly:n}={}){let s=this._trie,a=[],o=true;for(let i of e.split(z_)){let c=s.children.get(i);if(!c){o=false;break}n||a.push(...c.hooks),s=c;}return n&&o&&a.push(...s.hooks),a.length===0?[]:a.length===1?[a[0].hook]:(r&&a.sort((i,c)=>i.insertedId-c.insertedId),a.map(({hook:i})=>i))}};});function ait(t){return Oo__namespace.sep!==z_?t.split(Oo__namespace.sep).join(z_):t}var Qde,sit,yv,Jde=E(()=>{Qde=Yr(Ia());Xde();sit=["afterEach","after","beforeEach","before","describe","it"].every(t=>typeof global[t]=="function"),yv=class t{_moduleNameTrie=new gv;static _instance;constructor(){this._initialize();}_initialize(){new Qde.Hook(null,{internals:true},(e,r,n)=>{let s=ait(r),a=this._moduleNameTrie.search(s,{maintainInsertionOrder:true,fullOnly:n===void 0});for(let{onRequire:o}of a)e=o(e,r,n);return e});}register(e,r){let n={moduleName:e,onRequire:r};return this._moduleNameTrie.insert(n),n}static getInstance(){return sit?new t:this._instance=this._instance??new t}};});function Zde(t,e,r){let n,s;try{s=t();}catch(a){n=a;}finally{if(e(n,s),n&&!r)throw n;return s}}async function epe(t,e,r){let n,s;try{s=await t();}catch(a){n=a;}finally{if(e(n,s),n&&!r)throw n;return s}}function Av(t){return typeof t=="function"&&typeof t.__original=="function"&&typeof t.__unwrap=="function"&&t.__wrapped===true}var _U=E(()=>{});function rpe(t,e,r){return typeof e>"u"?t.includes("*"):t.some(n=>qde(e,n,{includePrerelease:r}))}var Y_,npe,ipe,Vd,ope=E(()=>{zde();Y_=Yr(fU());Wde();Jde();npe=Yr(QT());M();ipe=Yr(Ia());_U();Vd=class extends Tv{_modules;_hooks=[];_requireInTheMiddleSingleton=yv.getInstance();_enabled=false;constructor(e,r,n){super(e,r,n);let s=this.init();s&&!Array.isArray(s)&&(s=[s]),this._modules=s||[],this._config.enabled&&this.enable();}_wrap=(e,r,n)=>{if(Av(e[r])&&this._unwrap(e,r),p3.types.isProxy(e)){let s=(0, Y_.wrap)(Object.assign({},e),r,n);return Object.defineProperty(e,r,{value:s}),s}else return (0, Y_.wrap)(e,r,n)};_unwrap=(e,r)=>p3.types.isProxy(e)?Object.defineProperty(e,r,{value:e[r]}):(0, Y_.unwrap)(e,r);_massWrap=(e,r,n)=>{if(e)Array.isArray(e)||(e=[e]);else {N.error("must provide one or more modules to patch");return}if(!(r&&Array.isArray(r))){N.error("must provide one or more functions to wrap on modules");return}e.forEach(s=>{r.forEach(a=>{this._wrap(s,a,n);});});};_massUnwrap=(e,r)=>{if(e)Array.isArray(e)||(e=[e]);else {N.error("must provide one or more modules to patch");return}if(!(r&&Array.isArray(r))){N.error("must provide one or more functions to wrap on modules");return}e.forEach(n=>{r.forEach(s=>{this._unwrap(n,s);});});};_warnOnPreloadedModules(){this._modules.forEach(e=>{let{name:r}=e;try{let n=P.resolve(r);P.cache[n]&&this._diag.warn(`Module ${r} has been loaded before ${this.instrumentationName} so it might not work, please initialize it before requiring ${r}`);}catch{}});}_extractPackageVersion(e){try{let r=fs$1.readFileSync(Oo__namespace.join(e,"package.json"),{encoding:"utf8"}),n=JSON.parse(r).version;return typeof n=="string"?n:void 0}catch{N.warn("Failed extracting version",e);}}_onRequire(e,r,n,s){if(!s)return typeof e.patch=="function"&&(e.moduleExports=r,this._enabled)?(this._diag.debug("Applying instrumentation patch for nodejs core module on require hook",{module:e.name}),e.patch(r)):r;let a=this._extractPackageVersion(s);if(e.moduleVersion=a,e.name===n)return rpe(e.supportedVersions,a,e.includePrerelease)&&typeof e.patch=="function"&&(e.moduleExports=r,this._enabled)?(this._diag.debug("Applying instrumentation patch for module on require hook",{module:e.name,version:e.moduleVersion,baseDir:s}),e.patch(r,e.moduleVersion)):r;let o=e.files??[],i=Oo__namespace.normalize(n);return o.filter(u=>u.name===i).filter(u=>rpe(u.supportedVersions,a,e.includePrerelease)).reduce((u,l)=>(l.moduleExports=u,this._enabled?(this._diag.debug("Applying instrumentation patch for nodejs module file on require hook",{module:e.name,version:e.moduleVersion,fileName:l.name,baseDir:s}),l.patch(u,e.moduleVersion)):u),r)}enable(){if(!this._enabled){if(this._enabled=true,this._hooks.length>0){for(let e of this._modules){typeof e.patch=="function"&&e.moduleExports&&(this._diag.debug("Applying instrumentation patch for nodejs module on instrumentation enabled",{module:e.name,version:e.moduleVersion}),e.patch(e.moduleExports,e.moduleVersion));for(let r of e.files)r.moduleExports&&(this._diag.debug("Applying instrumentation patch for nodejs module file on instrumentation enabled",{module:e.name,version:e.moduleVersion,fileName:r.name}),r.patch(r.moduleExports,e.moduleVersion));}return}this._warnOnPreloadedModules();for(let e of this._modules){let r=(o,i,c)=>{if(!c&&Oo__namespace.isAbsolute(i)){let u=Oo__namespace.parse(i);i=u.name,c=u.dir;}return this._onRequire(e,o,i,c)},n=(o,i,c)=>this._onRequire(e,o,i,c),s=Oo__namespace.isAbsolute(e.name)?new ipe.Hook([e.name],{internals:true},n):this._requireInTheMiddleSingleton.register(e.name,n);this._hooks.push(s);let a=new npe.Hook([e.name],{internals:false},r);this._hooks.push(a);}}}disable(){if(this._enabled){this._enabled=false;for(let e of this._modules){typeof e.unpatch=="function"&&e.moduleExports&&(this._diag.debug("Removing instrumentation patch for nodejs module on instrumentation disabled",{module:e.name,version:e.moduleVersion}),e.unpatch(e.moduleExports,e.moduleVersion));for(let r of e.files)r.moduleExports&&(this._diag.debug("Removing instrumentation patch for nodejs module file on instrumentation disabled",{module:e.name,version:e.moduleVersion,fileName:r.name}),r.unpatch(r.moduleExports,e.moduleVersion));}}}isEnabled(){return this._enabled}};});var spe=E(()=>{});var ape=E(()=>{ope();spe();});var mU=E(()=>{ape();});var vv,cpe=E(()=>{vv=class{name;supportedVersions;patch;unpatch;files;constructor(e,r,n,s,a){this.name=e,this.supportedVersions=r,this.patch=n,this.unpatch=s,this.files=a||[];}};});var Ov,upe=E(()=>{mU();Ov=class{supportedVersions;patch;unpatch;name;constructor(e,r,n,s){this.supportedVersions=r,this.patch=n,this.unpatch=s,this.name=Oo.normalize(e);}};});var lpe={};Ue(lpe,{InstrumentationBase:()=>Vd,InstrumentationNodeModuleDefinition:()=>vv,InstrumentationNodeModuleFile:()=>Ov,isWrapped:()=>Av,registerInstrumentations:()=>Dde,safeExecuteInTheMiddle:()=>Zde,safeExecuteInTheMiddleAsync:()=>epe});var dpe=E(()=>{wde();mU();cpe();upe();_U();});var hpe=f(Nv=>{Object.defineProperty(Nv,"__esModule",{value:true});Nv.OpenTelemetrySpanWrapper=void 0;var ppe=(M(),A(H)),fpe=(G(),A(Ze)),uit=nU(),EU=class{constructor(e){this._span=e;}setStatus(e){e.status==="error"&&lit(e.error)?e.error?(this._span.setStatus({code:ppe.SpanStatusCode.ERROR,message:e.error.toString()}),this.recordException(e.error)):this._span.setStatus({code:ppe.SpanStatusCode.ERROR}):e.status==="success"&&uit.logger.verbose("Leaving span with status UNSET per OpenTelemetry spec.");}setAttribute(e,r){r!=null&&(0, fpe.isAttributeValue)(r)&&this._span.setAttribute(e,r);}end(){this._span.end();}recordException(e){this._span.recordException(e);}isRecording(){return this._span.isRecording()}addEvent(e,r={}){this._span.addEvent(e,(0, fpe.sanitizeAttributes)(r.attributes),r.startTime);}unwrap(){return this._span}};Nv.OpenTelemetrySpanWrapper=EU;function lit(t){return t!==null&&typeof t=="object"&&"statusCode"in t?t.statusCode!==304:true}});var TU=f(fo=>{Object.defineProperty(fo,"__esModule",{value:true});fo.environmentCache=fo.SDK_VERSION=void 0;fo.envVarToBoolean=dit;fo.SDK_VERSION="1.0.0-beta.9";fo.environmentCache=new Map;function dit(t){var e;fo.environmentCache.has(t)||pit(t);let r=((e=fo.environmentCache.get(t))!==null&&e!==void 0?e:"").toLowerCase();return r!=="false"&&r!=="0"&&!!r}function pit(t){var e;if(typeof process<"u"&&process.env){let r=(e=process.env[t])!==null&&e!==void 0?e:process.env[t.toLowerCase()];fo.environmentCache.set(t,r);}}});var Tpe=f(Cv=>{Object.defineProperty(Cv,"__esModule",{value:true});Cv.toOpenTelemetrySpanKind=Epe;Cv.toSpanOptions=hit;var _pe=(M(),A(H)),mpe=(G(),A(Ze));function Epe(t){let e=(t||"internal").toUpperCase();return _pe.SpanKind[e]}function fit(t=[]){return t.reduce((e,r)=>{let n=_pe.trace.getSpanContext(r.tracingContext);return n&&e.push({context:n,attributes:(0, mpe.sanitizeAttributes)(r.attributes)}),e},[])}function hit(t){let{spanAttributes:e,spanLinks:r,spanKind:n}=t||{},s=(0, mpe.sanitizeAttributes)(e),a=Epe(n),o=fit(r);return {attributes:s,kind:a,links:o}}});var ype=f(ea=>{Object.defineProperty(ea,"__esModule",{value:true});ea.OpenTelemetryInstrumenter=ea.propagator=void 0;var ho=(M(),A(H)),gpe=(G(),A(Ze)),_it=hpe(),Spe=TU(),mit=Tpe();ea.propagator=new gpe.W3CTraceContextPropagator;var SU=class{startSpan(e,r){let n=r?.tracingContext||ho.context.active(),s;return (0, Spe.envVarToBoolean)("AZURE_TRACING_DISABLED")?s=ho.trace.wrapSpanContext(ho.INVALID_SPAN_CONTEXT):(s=ho.trace.getTracer(r.packageName,r.packageVersion).startSpan(e,(0, mit.toSpanOptions)(r),n),(0, Spe.envVarToBoolean)("AZURE_HTTP_TRACING_CHILDREN_DISABLED")&&e.toUpperCase().startsWith("HTTP")&&(n=(0, gpe.suppressTracing)(n))),{span:new _it.OpenTelemetrySpanWrapper(s),tracingContext:ho.trace.setSpan(n,s)}}withContext(e,r,...n){return ho.context.with(e,r,void 0,...n)}parseTraceparentHeader(e){return ea.propagator.extract(ho.context.active(),{traceparent:e},ho.defaultTextMapGetter)}createRequestHeaders(e){let r={};return ea.propagator.inject(e||ho.context.active(),r,ho.defaultTextMapSetter),r}};ea.OpenTelemetryInstrumenter=SU;});var Rpe=f($_=>{Object.defineProperty($_,"__esModule",{value:true});$_.AzureSdkInstrumentation=void 0;$_.createAzureSdkInstrumentation=Sit;var Ape=(dpe(),A(lpe)),Eit=ype(),Tit=TU(),Pv=class extends Ape.InstrumentationBase{constructor(e={}){super("@azure/opentelemetry-instrumentation-azure-sdk",Tit.SDK_VERSION,Object.assign({},e));}init(){let e=new Ape.InstrumentationNodeModuleDefinition("@azure/core-tracing",["^1.0.0-preview.14","^1.0.0"],r=>(typeof r.useInstrumenter=="function"&&r.useInstrumenter(new Eit.OpenTelemetryInstrumenter),r));return e.includePrerelease=true,e}};$_.AzureSdkInstrumentation=Pv;function Sit(t={}){return new Pv(t)}});var Ope=f(bv=>{Object.defineProperty(bv,"__esModule",{value:true});var vpe=(Ce(),A(Ne));vpe.__exportStar(nU(),bv);vpe.__exportStar(Rpe(),bv);});var Npe=f(Mv=>{Object.defineProperty(Mv,"__esModule",{value:true});Mv.VERSION=void 0;Mv.VERSION="0.204.0";});var Cpe=f(Z=>{Object.defineProperty(Z,"__esModule",{value:true});Z.HTTP_FLAVOR_VALUE_HTTP_1_1=Z.NET_TRANSPORT_VALUE_IP_UDP=Z.NET_TRANSPORT_VALUE_IP_TCP=Z.ATTR_NET_TRANSPORT=Z.ATTR_NET_PEER_PORT=Z.ATTR_NET_PEER_NAME=Z.ATTR_NET_PEER_IP=Z.ATTR_NET_HOST_PORT=Z.ATTR_NET_HOST_NAME=Z.ATTR_NET_HOST_IP=Z.ATTR_HTTP_USER_AGENT=Z.ATTR_HTTP_URL=Z.ATTR_HTTP_TARGET=Z.ATTR_HTTP_STATUS_CODE=Z.ATTR_HTTP_SERVER_NAME=Z.ATTR_HTTP_SCHEME=Z.ATTR_HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED=Z.ATTR_HTTP_RESPONSE_CONTENT_LENGTH=Z.ATTR_HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED=Z.ATTR_HTTP_REQUEST_CONTENT_LENGTH=Z.ATTR_HTTP_METHOD=Z.ATTR_HTTP_HOST=Z.ATTR_HTTP_FLAVOR=Z.ATTR_HTTP_CLIENT_IP=Z.USER_AGENT_SYNTHETIC_TYPE_VALUE_TEST=Z.USER_AGENT_SYNTHETIC_TYPE_VALUE_BOT=Z.ATTR_USER_AGENT_SYNTHETIC_TYPE=void 0;Z.ATTR_USER_AGENT_SYNTHETIC_TYPE="user_agent.synthetic.type";Z.USER_AGENT_SYNTHETIC_TYPE_VALUE_BOT="bot";Z.USER_AGENT_SYNTHETIC_TYPE_VALUE_TEST="test";Z.ATTR_HTTP_CLIENT_IP="http.client_ip";Z.ATTR_HTTP_FLAVOR="http.flavor";Z.ATTR_HTTP_HOST="http.host";Z.ATTR_HTTP_METHOD="http.method";Z.ATTR_HTTP_REQUEST_CONTENT_LENGTH="http.request_content_length";Z.ATTR_HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED="http.request_content_length_uncompressed";Z.ATTR_HTTP_RESPONSE_CONTENT_LENGTH="http.response_content_length";Z.ATTR_HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED="http.response_content_length_uncompressed";Z.ATTR_HTTP_SCHEME="http.scheme";Z.ATTR_HTTP_SERVER_NAME="http.server_name";Z.ATTR_HTTP_STATUS_CODE="http.status_code";Z.ATTR_HTTP_TARGET="http.target";Z.ATTR_HTTP_URL="http.url";Z.ATTR_HTTP_USER_AGENT="http.user_agent";Z.ATTR_NET_HOST_IP="net.host.ip";Z.ATTR_NET_HOST_NAME="net.host.name";Z.ATTR_NET_HOST_PORT="net.host.port";Z.ATTR_NET_PEER_IP="net.peer.ip";Z.ATTR_NET_PEER_NAME="net.peer.name";Z.ATTR_NET_PEER_PORT="net.peer.port";Z.ATTR_NET_TRANSPORT="net.transport";Z.NET_TRANSPORT_VALUE_IP_TCP="ip_tcp";Z.NET_TRANSPORT_VALUE_IP_UDP="ip_udp";Z.HTTP_FLAVOR_VALUE_HTTP_1_1="1.1";});var Ppe=f(K_=>{Object.defineProperty(K_,"__esModule",{value:true});K_.AttributeNames=void 0;(function(t){t.HTTP_ERROR_NAME="http.error_name",t.HTTP_ERROR_MESSAGE="http.error_message",t.HTTP_STATUS_TEXT="http.status_text";})(K_.AttributeNames||(K_.AttributeNames={}));});var gU=f(_o=>{Object.defineProperty(_o,"__esModule",{value:true});_o.DEFAULT_QUERY_STRINGS_TO_REDACT=_o.STR_REDACTED=_o.SYNTHETIC_BOT_NAMES=_o.SYNTHETIC_TEST_NAMES=void 0;_o.SYNTHETIC_TEST_NAMES=["alwayson"];_o.SYNTHETIC_BOT_NAMES=["googlebot","bingbot"];_o.STR_REDACTED="REDACTED";_o.DEFAULT_QUERY_STRINGS_TO_REDACT=["sig","Signature","AWSAccessKeyId","X-Goog-Signature"];});var Mpe=f((GLt,bpe)=>{var yit=P("util");function yU(t,e){Error.captureStackTrace(this,yU),this.name=this.constructor.name,this.message=t,this.input=e;}yit.inherits(yU,Error);bpe.exports=yU;});var xpe=f((jLt,Ipe)=>{function Ait(t){return t===34||t===40||t===41||t===44||t===47||t>=58&&t<=64||t>=91&&t<=93||t===123||t===125}function Rit(t){return t===33||t>=35&&t<=39||t===42||t===43||t===45||t===46||t>=48&&t<=57||t>=65&&t<=90||t>=94&&t<=122||t===124||t===126}function vit(t){return t>=32&&t<=126}function Oit(t){return t>=128&&t<=255}Ipe.exports={isDelimiter:Ait,isTokenChar:Rit,isExtended:Oit,isPrint:vit};});var kpe=f((zLt,Upe)=>{var Nit=P("util"),Bd=Mpe(),Iv=xpe(),Cit=Iv.isDelimiter,Lpe=Iv.isTokenChar,Dpe=Iv.isExtended,Pit=Iv.isPrint;function wpe(t){return t.replace(/\\(.)/g,"$1")}function W_(t,e){return Nit.format("Unexpected character '%s' at index %d",t.charAt(e),e)}function bit(t){for(var e=false,r=false,n=false,s={},a=[],o=-1,i=-1,c,u,l=0;l<t.length;l++)if(u=t.charCodeAt(l),c===void 0){if(l!==0&&o===-1&&(u===32||u===9))continue;if(Lpe(u))o===-1&&(o=l);else if(u===61&&o!==-1)c=t.slice(o,l).toLowerCase(),o=-1;else throw new Bd(W_(t,l),t)}else if(r&&(u===9||Pit(u)||Dpe(u)))r=false;else if(Lpe(u)){if(i!==-1)throw new Bd(W_(t,l),t);o===-1&&(o=l);}else if(Cit(u)||Dpe(u))if(n)u===34?(n=false,i=l):u===92?(o===-1&&(o=l),r=e=true):o===-1&&(o=l);else if(u===34&&t.charCodeAt(l-1)===61)n=true;else if((u===44||u===59)&&(o!==-1||i!==-1))o!==-1?(i===-1&&(i=l),s[c]=e?wpe(t.slice(o,i)):t.slice(o,i)):s[c]="",u===44&&(a.push(s),s={}),c=void 0,o=i=-1;else throw new Bd(W_(t,l),t);else if(u===32||u===9){if(i!==-1)continue;if(n)o===-1&&(o=l);else if(o!==-1)i=l;else throw new Bd(W_(t,l),t)}else throw new Bd(W_(t,l),t);if(c===void 0||n||o===-1&&i===-1||u===32||u===9)throw new Bd("Unexpected end of input",t);return o!==-1?(i===-1&&(i=l),s[c]=e?wpe(t.slice(o,i)):t.slice(o,i)):s[c]="",a.push(s),a}Upe.exports=bit;});var Ype=f(ee=>{Object.defineProperty(ee,"__esModule",{value:true});ee.headerCapture=ee.getIncomingStableRequestMetricAttributesOnResponse=ee.getIncomingRequestMetricAttributesOnResponse=ee.getIncomingRequestAttributesOnResponse=ee.getIncomingRequestMetricAttributes=ee.getIncomingRequestAttributes=ee.getRemoteClientAddress=ee.getOutgoingStableRequestMetricAttributesOnResponse=ee.getOutgoingRequestMetricAttributesOnResponse=ee.getOutgoingRequestAttributesOnResponse=ee.setAttributesFromHttpKind=ee.getOutgoingRequestMetricAttributes=ee.getOutgoingRequestAttributes=ee.extractHostnameAndPort=ee.isValidOptionsType=ee.getRequestInfo=ee.isCompressed=ee.setResponseContentLengthAttribute=ee.setRequestContentLengthAttribute=ee.setSpanWithError=ee.satisfiesPattern=ee.parseResponseStatus=ee.getAbsoluteUrl=void 0;var X_=(M(),A(H)),Ae=(ct(),A(Zt)),Q=Cpe(),Vpe=(G(),A(Ze)),mo=(Jr(),A(Qr)),Fpe=P("url"),Lv=Ppe(),Bpe=gU(),xv=gU(),Mit=kpe(),Iit=(t,e,r="http:",n=Array.from(xv.DEFAULT_QUERY_STRINGS_TO_REDACT))=>{let s=t||{},a=s.protocol||r,o=(s.port||"").toString(),i=s.path||"/",c=s.host||s.hostname||e.host||"localhost";if(c.indexOf(":")===-1&&o&&o!=="80"&&o!=="443"&&(c+=`:${o}`),i.includes("?")){let l=Fpe.parse(i),d=l.pathname||"",p=l.query||"",h=new URLSearchParams(p),T=n||[];for(let y of T)h.has(y)&&h.get(y)!==""&&h.set(y,xv.STR_REDACTED);let g=h.toString();i=`${d}?${g}`;}let u=s.auth?`${xv.STR_REDACTED}:${xv.STR_REDACTED}@`:"";return `${a}//${u}${c}${i}`};ee.getAbsoluteUrl=Iit;var xit=(t,e)=>{let r=t===X_.SpanKind.CLIENT?400:500;return e&&e>=100&&e<r?X_.SpanStatusCode.UNSET:X_.SpanStatusCode.ERROR};ee.parseResponseStatus=xit;var Lit=(t,e)=>{if(typeof e=="string")return e===t;if(e instanceof RegExp)return e.test(t);if(typeof e=="function")return e(t);throw new TypeError("Pattern is in unsupported datatype")};ee.satisfiesPattern=Lit;var Dit=(t,e,r)=>{let n=e.message;r&mo.SemconvStability.OLD&&(t.setAttribute(Lv.AttributeNames.HTTP_ERROR_NAME,e.name),t.setAttribute(Lv.AttributeNames.HTTP_ERROR_MESSAGE,n)),r&mo.SemconvStability.STABLE&&t.setAttribute(Ae.ATTR_ERROR_TYPE,e.name),t.setStatus({code:X_.SpanStatusCode.ERROR,message:n}),t.recordException(e);};ee.setSpanWithError=Dit;var wit=(t,e)=>{let r=qpe(t.headers);r!==null&&((0, ee.isCompressed)(t.headers)?e[Q.ATTR_HTTP_REQUEST_CONTENT_LENGTH]=r:e[Q.ATTR_HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED]=r);};ee.setRequestContentLengthAttribute=wit;var Uit=(t,e)=>{let r=qpe(t.headers);r!==null&&((0, ee.isCompressed)(t.headers)?e[Q.ATTR_HTTP_RESPONSE_CONTENT_LENGTH]=r:e[Q.ATTR_HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED]=r);};ee.setResponseContentLengthAttribute=Uit;function qpe(t){let e=t["content-length"];if(e===void 0)return null;let r=parseInt(e,10);return isNaN(r)?null:r}var kit=t=>{let e=t["content-encoding"];return !!e&&e!=="identity"};ee.isCompressed=kit;function Vit(t){let{hostname:e,pathname:r,port:n,username:s,password:a,search:o,protocol:i,hash:c,href:u,origin:l,host:d}=new URL(t),p={protocol:i,hostname:e&&e[0]==="["?e.slice(1,-1):e,hash:c,search:o,pathname:r,path:`${r||""}${o||""}`,href:u,origin:l,host:d};return n!==""&&(p.port=Number(n)),(s||a)&&(p.auth=`${decodeURIComponent(s)}:${decodeURIComponent(a)}`),p}var Bit=(t,e,r)=>{let n,s,a,o=false;if(typeof e=="string"){try{let c=Vit(e);a=c,n=c.pathname||"/";}catch(c){o=true,t.verbose("Unable to parse URL provided to HTTP request, using fallback to determine path. Original error:",c),a={path:e},n=a.path||"/";}s=`${a.protocol||"http:"}//${a.host}`,r!==void 0&&Object.assign(a,r);}else if(e instanceof Fpe.URL)a={protocol:e.protocol,hostname:typeof e.hostname=="string"&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,path:`${e.pathname||""}${e.search||""}`},e.port!==""&&(a.port=Number(e.port)),(e.username||e.password)&&(a.auth=`${e.username}:${e.password}`),n=e.pathname,s=e.origin,r!==void 0&&Object.assign(a,r);else {a=Object.assign({protocol:e.host?"http:":void 0},e);let c=a.host||(a.port!=null?`${a.hostname}${a.port}`:a.hostname);if(s=`${a.protocol||"http:"}//${c}`,n=e.pathname,!n&&a.path)try{n=new URL(a.path,s).pathname||"/";}catch{n="/";}}let i=a.method?a.method.toUpperCase():"GET";return {origin:s,pathname:n,method:i,optionsParsed:a,invalidUrl:o}};ee.getRequestInfo=Bit;var Fit=t=>{if(!t)return  false;let e=typeof t;return e==="string"||e==="object"&&!Array.isArray(t)};ee.isValidOptionsType=Fit;var qit=t=>{if(t.hostname&&t.port)return {hostname:t.hostname,port:t.port};let e=t.host?.match(/^([^:/ ]+)(:\d{1,5})?/)||null,r=t.hostname||(e===null?"localhost":e[1]),n=t.port;return n||(e&&e[2]?n=e[2].substring(1):n=t.protocol==="https:"?"443":"80"),{hostname:r,port:n}};ee.extractHostnameAndPort=qit;var Hit=(t,e,r,n)=>{let s=e.hostname,a=e.port,o=t.method??"GET",i=jpe(o),c=t.headers||{},u=c["user-agent"],l=(0, ee.getAbsoluteUrl)(t,c,`${e.component}:`,e.redactedQueryParams),d={[Q.ATTR_HTTP_URL]:l,[Q.ATTR_HTTP_METHOD]:o,[Q.ATTR_HTTP_TARGET]:t.path||"/",[Q.ATTR_NET_PEER_NAME]:s,[Q.ATTR_HTTP_HOST]:c.host??`${s}:${a}`},p={[Ae.ATTR_HTTP_REQUEST_METHOD]:i,[Ae.ATTR_SERVER_ADDRESS]:s,[Ae.ATTR_SERVER_PORT]:Number(a),[Ae.ATTR_URL_FULL]:l,[Ae.ATTR_USER_AGENT_ORIGINAL]:u};switch(o!==i&&(p[Ae.ATTR_HTTP_REQUEST_METHOD_ORIGINAL]=o),n&&u&&(p[Q.ATTR_USER_AGENT_SYNTHETIC_TYPE]=Hpe(u)),u!==void 0&&(d[Q.ATTR_HTTP_USER_AGENT]=u),r){case mo.SemconvStability.STABLE:return Object.assign(p,e.hookAttributes);case mo.SemconvStability.OLD:return Object.assign(d,e.hookAttributes)}return Object.assign(d,p,e.hookAttributes)};ee.getOutgoingRequestAttributes=Hit;var Git=t=>{let e={};return e[Q.ATTR_HTTP_METHOD]=t[Q.ATTR_HTTP_METHOD],e[Q.ATTR_NET_PEER_NAME]=t[Q.ATTR_NET_PEER_NAME],e};ee.getOutgoingRequestMetricAttributes=Git;var jit=(t,e)=>{t&&(e[Q.ATTR_HTTP_FLAVOR]=t,t.toUpperCase()!=="QUIC"?e[Q.ATTR_NET_TRANSPORT]=Q.NET_TRANSPORT_VALUE_IP_TCP:e[Q.ATTR_NET_TRANSPORT]=Q.NET_TRANSPORT_VALUE_IP_UDP);};ee.setAttributesFromHttpKind=jit;var Hpe=t=>{let e=String(t).toLowerCase();for(let r of Bpe.SYNTHETIC_TEST_NAMES)if(e.includes(r))return Q.USER_AGENT_SYNTHETIC_TYPE_VALUE_TEST;for(let r of Bpe.SYNTHETIC_BOT_NAMES)if(e.includes(r))return Q.USER_AGENT_SYNTHETIC_TYPE_VALUE_BOT},zit=(t,e)=>{let{statusCode:r,statusMessage:n,httpVersion:s,socket:a}=t,o={},i={};if(r!=null&&(i[Ae.ATTR_HTTP_RESPONSE_STATUS_CODE]=r),a){let{remoteAddress:c,remotePort:u}=a;o[Q.ATTR_NET_PEER_IP]=c,o[Q.ATTR_NET_PEER_PORT]=u,i[Ae.ATTR_NETWORK_PEER_ADDRESS]=c,i[Ae.ATTR_NETWORK_PEER_PORT]=u,i[Ae.ATTR_NETWORK_PROTOCOL_VERSION]=t.httpVersion;}switch((0, ee.setResponseContentLengthAttribute)(t,o),r&&(o[Q.ATTR_HTTP_STATUS_CODE]=r,o[Lv.AttributeNames.HTTP_STATUS_TEXT]=(n||"").toUpperCase()),(0, ee.setAttributesFromHttpKind)(s,o),e){case mo.SemconvStability.STABLE:return i;case mo.SemconvStability.OLD:return o}return Object.assign(o,i)};ee.getOutgoingRequestAttributesOnResponse=zit;var Yit=t=>{let e={};return e[Q.ATTR_NET_PEER_PORT]=t[Q.ATTR_NET_PEER_PORT],e[Q.ATTR_HTTP_STATUS_CODE]=t[Q.ATTR_HTTP_STATUS_CODE],e[Q.ATTR_HTTP_FLAVOR]=t[Q.ATTR_HTTP_FLAVOR],e};ee.getOutgoingRequestMetricAttributesOnResponse=Yit;var $it=t=>{let e={};return t[Ae.ATTR_NETWORK_PROTOCOL_VERSION]&&(e[Ae.ATTR_NETWORK_PROTOCOL_VERSION]=t[Ae.ATTR_NETWORK_PROTOCOL_VERSION]),t[Ae.ATTR_HTTP_RESPONSE_STATUS_CODE]&&(e[Ae.ATTR_HTTP_RESPONSE_STATUS_CODE]=t[Ae.ATTR_HTTP_RESPONSE_STATUS_CODE]),e};ee.getOutgoingStableRequestMetricAttributesOnResponse=$it;function ta(t,e){let r=t.split(":");if(r.length===1)return e==="http"?{host:r[0],port:"80"}:e==="https"?{host:r[0],port:"443"}:{host:r[0]};if(r.length===2)return {host:r[0],port:r[1]};if(r[0].startsWith("[")){if(r[r.length-1].endsWith("]")){if(e==="http")return {host:t,port:"80"};if(e==="https")return {host:t,port:"443"}}else if(r[r.length-2].endsWith("]"))return {host:r.slice(0,-1).join(":"),port:r[r.length-1]}}return {host:t}}function Kit(t,e){let r=t.headers.forwarded;if(r){for(let a of zpe(r))if(a.host)return ta(a.host,a.proto)}let n=t.headers["x-forwarded-host"];if(typeof n=="string")return typeof t.headers["x-forwarded-proto"]=="string"?ta(n,t.headers["x-forwarded-proto"]):Array.isArray(t.headers["x-forwarded-proto"])?ta(n,t.headers["x-forwarded-proto"][0]):ta(n);if(Array.isArray(n)&&typeof n[0]=="string"&&n[0].length>0)return typeof t.headers["x-forwarded-proto"]=="string"?ta(n[0],t.headers["x-forwarded-proto"]):Array.isArray(t.headers["x-forwarded-proto"])?ta(n[0],t.headers["x-forwarded-proto"][0]):ta(n[0]);let s=t.headers.host;return typeof s=="string"&&s.length>0?ta(s,e):null}function Gpe(t){let e=t.headers.forwarded;if(e){for(let s of zpe(e))if(s.for)return s.for}let r=t.headers["x-forwarded-for"];if(typeof r=="string")return r;if(Array.isArray(r))return r[0];let n=t.socket.remoteAddress;return n||null}ee.getRemoteClientAddress=Gpe;function Wit(t,e,r){try{if(e.headers.host)return new URL(e.url??"/",`${t}://${e.headers.host}`);{let n=new URL(e.url??"/",`${t}://localhost`);return {pathname:n.pathname,search:n.search,toString:function(){return n.pathname+n.search}}}}catch(n){return r.verbose("Unable to get URL from request",n),{}}}var Xit=(t,e,r)=>{let n=t.headers,s=n["user-agent"],a=n["x-forwarded-for"],o=t.httpVersion,i=n.host,c=i?.replace(/^(.*)(:[0-9]{1,5})/,"$1")||"localhost",u=t.method,l=jpe(u),d=Kit(t,e.component),p=e.serverName,h=Gpe(t),T={[Ae.ATTR_HTTP_REQUEST_METHOD]:l,[Ae.ATTR_URL_SCHEME]:e.component,[Ae.ATTR_SERVER_ADDRESS]:d?.host,[Ae.ATTR_NETWORK_PEER_ADDRESS]:t.socket.remoteAddress,[Ae.ATTR_NETWORK_PEER_PORT]:t.socket.remotePort,[Ae.ATTR_NETWORK_PROTOCOL_VERSION]:t.httpVersion,[Ae.ATTR_USER_AGENT_ORIGINAL]:s},g=Wit(e.component,t,r);g?.pathname!=null&&(T[Ae.ATTR_URL_PATH]=g.pathname),g.search&&(T[Ae.ATTR_URL_QUERY]=g.search.slice(1)),h!=null&&(T[Ae.ATTR_CLIENT_ADDRESS]=h.split(",")[0]),d?.port!=null&&(T[Ae.ATTR_SERVER_PORT]=Number(d.port)),u!==l&&(T[Ae.ATTR_HTTP_REQUEST_METHOD_ORIGINAL]=u),e.enableSyntheticSourceDetection&&s&&(T[Q.ATTR_USER_AGENT_SYNTHETIC_TYPE]=Hpe(s));let y={[Q.ATTR_HTTP_URL]:g.toString(),[Q.ATTR_HTTP_HOST]:i,[Q.ATTR_NET_HOST_NAME]:c,[Q.ATTR_HTTP_METHOD]:u,[Q.ATTR_HTTP_SCHEME]:e.component};switch(typeof a=="string"&&(y[Q.ATTR_HTTP_CLIENT_IP]=a.split(",")[0]),typeof p=="string"&&(y[Q.ATTR_HTTP_SERVER_NAME]=p),g?.pathname&&(y[Q.ATTR_HTTP_TARGET]=g?.pathname+g?.search||"/"),s!==void 0&&(y[Q.ATTR_HTTP_USER_AGENT]=s),(0, ee.setRequestContentLengthAttribute)(t,y),(0, ee.setAttributesFromHttpKind)(o,y),e.semconvStability){case mo.SemconvStability.STABLE:return Object.assign(T,e.hookAttributes);case mo.SemconvStability.OLD:return Object.assign(y,e.hookAttributes)}return Object.assign(y,T,e.hookAttributes)};ee.getIncomingRequestAttributes=Xit;var Qit=t=>{let e={};return e[Q.ATTR_HTTP_SCHEME]=t[Q.ATTR_HTTP_SCHEME],e[Q.ATTR_HTTP_METHOD]=t[Q.ATTR_HTTP_METHOD],e[Q.ATTR_NET_HOST_NAME]=t[Q.ATTR_NET_HOST_NAME],e[Q.ATTR_HTTP_FLAVOR]=t[Q.ATTR_HTTP_FLAVOR],e};ee.getIncomingRequestMetricAttributes=Qit;var Jit=(t,e,r)=>{let{socket:n}=t,{statusCode:s,statusMessage:a}=e,o={[Ae.ATTR_HTTP_RESPONSE_STATUS_CODE]:s},i=(0, Vpe.getRPCMetadata)(X_.context.active()),c={};if(n){let{localAddress:u,localPort:l,remoteAddress:d,remotePort:p}=n;c[Q.ATTR_NET_HOST_IP]=u,c[Q.ATTR_NET_HOST_PORT]=l,c[Q.ATTR_NET_PEER_IP]=d,c[Q.ATTR_NET_PEER_PORT]=p;}switch(c[Q.ATTR_HTTP_STATUS_CODE]=s,c[Lv.AttributeNames.HTTP_STATUS_TEXT]=(a||"").toUpperCase(),i?.type===Vpe.RPCType.HTTP&&i.route!==void 0&&(c[Ae.ATTR_HTTP_ROUTE]=i.route,o[Ae.ATTR_HTTP_ROUTE]=i.route),r){case mo.SemconvStability.STABLE:return o;case mo.SemconvStability.OLD:return c}return Object.assign(c,o)};ee.getIncomingRequestAttributesOnResponse=Jit;var Zit=t=>{let e={};return e[Q.ATTR_HTTP_STATUS_CODE]=t[Q.ATTR_HTTP_STATUS_CODE],e[Q.ATTR_NET_HOST_PORT]=t[Q.ATTR_NET_HOST_PORT],t[Ae.ATTR_HTTP_ROUTE]!==void 0&&(e[Ae.ATTR_HTTP_ROUTE]=t[Ae.ATTR_HTTP_ROUTE]),e};ee.getIncomingRequestMetricAttributesOnResponse=Zit;var eot=t=>{let e={};return t[Ae.ATTR_HTTP_ROUTE]!==void 0&&(e[Ae.ATTR_HTTP_ROUTE]=t[Ae.ATTR_HTTP_ROUTE]),t[Ae.ATTR_HTTP_RESPONSE_STATUS_CODE]&&(e[Ae.ATTR_HTTP_RESPONSE_STATUS_CODE]=t[Ae.ATTR_HTTP_RESPONSE_STATUS_CODE]),e};ee.getIncomingStableRequestMetricAttributesOnResponse=eot;function tot(t,e){let r=new Map;for(let n=0,s=e.length;n<s;n++){let a=e[n].toLowerCase();r.set(a,a.replace(/-/g,"_"));}return (n,s)=>{for(let a of r.keys()){let o=s(a);if(o===void 0)continue;let i=r.get(a),c=`http.${t}.header.${i}`;typeof o=="string"?n.setAttribute(c,[o]):Array.isArray(o)?n.setAttribute(c,o):n.setAttribute(c,[o]);}}}ee.headerCapture=tot;var rot=new Set(["GET","HEAD","POST","PUT","DELETE","CONNECT","OPTIONS","TRACE","PATCH"]);function jpe(t){if(t==null)return "GET";let e=t.toUpperCase();return rot.has(e)?e:"_OTHER"}function zpe(t){try{return Mit(t)}catch{return []}}});var $pe=f(Dv=>{Object.defineProperty(Dv,"__esModule",{value:true});Dv.HttpInstrumentation=void 0;var _e=(M(),A(H)),ra=(G(),A(Ze)),not=P("url"),iot=Npe(),lr=(Jr(),A(Qr)),AU=P("events"),St=(ct(),A(Zt)),Vt=Ype(),RU=class extends lr.InstrumentationBase{_spanNotEnded=new WeakSet;_headerCapture;_semconvStability=lr.SemconvStability.OLD;constructor(e={}){super("@opentelemetry/instrumentation-http",iot.VERSION,e),this._headerCapture=this._createHeaderCapture(),this._semconvStability=(0, lr.semconvStabilityFromStr)("http",process.env.OTEL_SEMCONV_STABILITY_OPT_IN);}_updateMetricInstruments(){this._oldHttpServerDurationHistogram=this.meter.createHistogram("http.server.duration",{description:"Measures the duration of inbound HTTP requests.",unit:"ms",valueType:_e.ValueType.DOUBLE}),this._oldHttpClientDurationHistogram=this.meter.createHistogram("http.client.duration",{description:"Measures the duration of outbound HTTP requests.",unit:"ms",valueType:_e.ValueType.DOUBLE}),this._stableHttpServerDurationHistogram=this.meter.createHistogram(St.METRIC_HTTP_SERVER_REQUEST_DURATION,{description:"Duration of HTTP server requests.",unit:"s",valueType:_e.ValueType.DOUBLE,advice:{explicitBucketBoundaries:[.005,.01,.025,.05,.075,.1,.25,.5,.75,1,2.5,5,7.5,10]}}),this._stableHttpClientDurationHistogram=this.meter.createHistogram(St.METRIC_HTTP_CLIENT_REQUEST_DURATION,{description:"Duration of HTTP client requests.",unit:"s",valueType:_e.ValueType.DOUBLE,advice:{explicitBucketBoundaries:[.005,.01,.025,.05,.075,.1,.25,.5,.75,1,2.5,5,7.5,10]}});}_recordServerDuration(e,r,n){this._semconvStability&lr.SemconvStability.OLD&&this._oldHttpServerDurationHistogram.record(e,r),this._semconvStability&lr.SemconvStability.STABLE&&this._stableHttpServerDurationHistogram.record(e/1e3,n);}_recordClientDuration(e,r,n){this._semconvStability&lr.SemconvStability.OLD&&this._oldHttpClientDurationHistogram.record(e,r),this._semconvStability&lr.SemconvStability.STABLE&&this._stableHttpClientDurationHistogram.record(e/1e3,n);}setConfig(e={}){super.setConfig(e),this._headerCapture=this._createHeaderCapture();}init(){return [this._getHttpsInstrumentation(),this._getHttpInstrumentation()]}_getHttpInstrumentation(){return new lr.InstrumentationNodeModuleDefinition("http",["*"],e=>{let r=e[Symbol.toStringTag]==="Module";if(!this.getConfig().disableOutgoingRequestInstrumentation){let n=this._wrap(e,"request",this._getPatchOutgoingRequestFunction("http")),s=this._wrap(e,"get",this._getPatchOutgoingGetFunction(n));r&&(e.default.request=n,e.default.get=s);}return this.getConfig().disableIncomingRequestInstrumentation||this._wrap(e.Server.prototype,"emit",this._getPatchIncomingRequestFunction("http")),e},e=>{e!==void 0&&(this.getConfig().disableOutgoingRequestInstrumentation||(this._unwrap(e,"request"),this._unwrap(e,"get")),this.getConfig().disableIncomingRequestInstrumentation||this._unwrap(e.Server.prototype,"emit"));})}_getHttpsInstrumentation(){return new lr.InstrumentationNodeModuleDefinition("https",["*"],e=>{let r=e[Symbol.toStringTag]==="Module";if(!this.getConfig().disableOutgoingRequestInstrumentation){let n=this._wrap(e,"request",this._getPatchHttpsOutgoingRequestFunction("https")),s=this._wrap(e,"get",this._getPatchHttpsOutgoingGetFunction(n));r&&(e.default.request=n,e.default.get=s);}return this.getConfig().disableIncomingRequestInstrumentation||this._wrap(e.Server.prototype,"emit",this._getPatchIncomingRequestFunction("https")),e},e=>{e!==void 0&&(this.getConfig().disableOutgoingRequestInstrumentation||(this._unwrap(e,"request"),this._unwrap(e,"get")),this.getConfig().disableIncomingRequestInstrumentation||this._unwrap(e.Server.prototype,"emit"));})}_getPatchIncomingRequestFunction(e){return r=>this._incomingRequestFunction(e,r)}_getPatchOutgoingRequestFunction(e){return r=>this._outgoingRequestFunction(e,r)}_getPatchOutgoingGetFunction(e){return r=>function(s,...a){let o=e(s,...a);return o.end(),o}}_getPatchHttpsOutgoingRequestFunction(e){return r=>{let n=this;return function(a,...o){return e==="https"&&typeof a=="object"&&a?.constructor?.name!=="URL"&&(a=Object.assign({},a),n._setDefaultOptions(a)),n._getPatchOutgoingRequestFunction(e)(r)(a,...o)}}}_setDefaultOptions(e){e.protocol=e.protocol||"https:",e.port=e.port||443;}_getPatchHttpsOutgoingGetFunction(e){return r=>{let n=this;return function(a,...o){return n._getPatchOutgoingGetFunction(e)(r)(a,...o)}}}_traceClientRequest(e,r,n,s,a){this.getConfig().requestHook&&this._callRequestHook(r,e);let o=false;return e.prependListener("response",i=>{this._diag.debug("outgoingRequest on response()"),e.listenerCount("response")<=1&&i.resume();let c=(0, Vt.getOutgoingRequestAttributesOnResponse)(i,this._semconvStability);r.setAttributes(c),s=Object.assign(s,(0, Vt.getOutgoingRequestMetricAttributesOnResponse)(c)),a=Object.assign(a,(0, Vt.getOutgoingStableRequestMetricAttributesOnResponse)(c)),this.getConfig().responseHook&&this._callResponseHook(r,i),this._headerCapture.client.captureRequestHeaders(r,l=>e.getHeader(l)),this._headerCapture.client.captureResponseHeaders(r,l=>i.headers[l]),_e.context.bind(_e.context.active(),i);let u=()=>{if(this._diag.debug("outgoingRequest on end()"),o)return;o=true;let l;i.aborted&&!i.complete?l={code:_e.SpanStatusCode.ERROR}:l={code:(0, Vt.parseResponseStatus)(_e.SpanKind.CLIENT,i.statusCode)},r.setStatus(l),this.getConfig().applyCustomAttributesOnSpan&&(0, lr.safeExecuteInTheMiddle)(()=>this.getConfig().applyCustomAttributesOnSpan(r,e,i),()=>{},true),this._closeHttpSpan(r,_e.SpanKind.CLIENT,n,s,a);};i.on("end",u),i.on(AU.errorMonitor,l=>{this._diag.debug("outgoingRequest on error()",l),!o&&(o=true,this._onOutgoingRequestError(r,s,a,n,l));});}),e.on("close",()=>{this._diag.debug("outgoingRequest on request close()"),!(e.aborted||o)&&(o=true,this._closeHttpSpan(r,_e.SpanKind.CLIENT,n,s,a));}),e.on(AU.errorMonitor,i=>{this._diag.debug("outgoingRequest on request error()",i),!o&&(o=true,this._onOutgoingRequestError(r,s,a,n,i));}),this._diag.debug("http.ClientRequest return request"),e}_incomingRequestFunction(e,r){let n=this;return function(a,...o){if(a!=="request")return r.apply(this,[a,...o]);let i=o[0],c=o[1],u=i.method||"GET";if(n._diag.debug(`${e} instrumentation incomingRequest`),(0, lr.safeExecuteInTheMiddle)(()=>n.getConfig().ignoreIncomingRequestHook?.(i),w=>{w!=null&&n._diag.error("caught ignoreIncomingRequestHook error: ",w);},true))return _e.context.with((0, ra.suppressTracing)(_e.context.active()),()=>(_e.context.bind(_e.context.active(),i),_e.context.bind(_e.context.active(),c),r.apply(this,[a,...o])));let l=i.headers,d=(0, Vt.getIncomingRequestAttributes)(i,{component:e,serverName:n.getConfig().serverName,hookAttributes:n._callStartSpanHook(i,n.getConfig().startIncomingSpanHook),semconvStability:n._semconvStability,enableSyntheticSourceDetection:n.getConfig().enableSyntheticSourceDetection||false},n._diag),p={kind:_e.SpanKind.SERVER,attributes:d},h=(0, ra.hrTime)(),T=(0, Vt.getIncomingRequestMetricAttributes)(d),g={[St.ATTR_HTTP_REQUEST_METHOD]:d[St.ATTR_HTTP_REQUEST_METHOD],[St.ATTR_URL_SCHEME]:d[St.ATTR_URL_SCHEME]};d[St.ATTR_NETWORK_PROTOCOL_VERSION]&&(g[St.ATTR_NETWORK_PROTOCOL_VERSION]=d[St.ATTR_NETWORK_PROTOCOL_VERSION]);let y=_e.propagation.extract(_e.ROOT_CONTEXT,l),R=n._startHttpSpan(u,p,y),b={type:ra.RPCType.HTTP,span:R};return _e.context.with((0, ra.setRPCMetadata)(_e.trace.setSpan(y,R),b),()=>{_e.context.bind(_e.context.active(),i),_e.context.bind(_e.context.active(),c),n.getConfig().requestHook&&n._callRequestHook(R,i),n.getConfig().responseHook&&n._callResponseHook(R,c),n._headerCapture.server.captureRequestHeaders(R,v=>i.headers[v]);let w=false;return c.on("close",()=>{w||n._onServerResponseFinish(i,c,R,T,g,h);}),c.on(AU.errorMonitor,v=>{w=true,n._onServerResponseError(R,T,g,h,v);}),(0, lr.safeExecuteInTheMiddle)(()=>r.apply(this,[a,...o]),v=>{if(v)throw n._onServerResponseError(R,T,g,h,v),v})})}}_outgoingRequestFunction(e,r){let n=this;return function(a,...o){if(!(0, Vt.isValidOptionsType)(a))return r.apply(this,[a,...o]);let i=typeof o[0]=="object"&&(typeof a=="string"||a instanceof not.URL)?o.shift():void 0,{method:c,invalidUrl:u,optionsParsed:l}=(0, Vt.getRequestInfo)(n._diag,a,i);if((0, lr.safeExecuteInTheMiddle)(()=>n.getConfig().ignoreOutgoingRequestHook?.(l),V=>{V!=null&&n._diag.error("caught ignoreOutgoingRequestHook error: ",V);},true))return r.apply(this,[l,...o]);let{hostname:d,port:p}=(0, Vt.extractHostnameAndPort)(l),h=(0, Vt.getOutgoingRequestAttributes)(l,{component:e,port:p,hostname:d,hookAttributes:n._callStartSpanHook(l,n.getConfig().startOutgoingSpanHook),redactedQueryParams:n.getConfig().redactedQueryParams},n._semconvStability,n.getConfig().enableSyntheticSourceDetection||false),T=(0, ra.hrTime)(),g=(0, Vt.getOutgoingRequestMetricAttributes)(h),y={[St.ATTR_HTTP_REQUEST_METHOD]:h[St.ATTR_HTTP_REQUEST_METHOD],[St.ATTR_SERVER_ADDRESS]:h[St.ATTR_SERVER_ADDRESS],[St.ATTR_SERVER_PORT]:h[St.ATTR_SERVER_PORT]};h[St.ATTR_HTTP_RESPONSE_STATUS_CODE]&&(y[St.ATTR_HTTP_RESPONSE_STATUS_CODE]=h[St.ATTR_HTTP_RESPONSE_STATUS_CODE]),h[St.ATTR_NETWORK_PROTOCOL_VERSION]&&(y[St.ATTR_NETWORK_PROTOCOL_VERSION]=h[St.ATTR_NETWORK_PROTOCOL_VERSION]);let R={kind:_e.SpanKind.CLIENT,attributes:h},b=n._startHttpSpan(c,R),w=_e.context.active(),v=_e.trace.setSpan(w,b);return l.headers?l.headers=Object.assign({},l.headers):l.headers={},_e.propagation.inject(v,l.headers),_e.context.with(v,()=>{let V=o[o.length-1];typeof V=="function"&&(o[o.length-1]=_e.context.bind(w,V));let B=(0, lr.safeExecuteInTheMiddle)(()=>u?r.apply(this,[a,...o]):r.apply(this,[l,...o]),F=>{if(F)throw n._onOutgoingRequestError(b,g,y,T,F),F});return n._diag.debug(`${e} instrumentation outgoingRequest`),_e.context.bind(w,B),n._traceClientRequest(B,b,T,g,y)})}}_onServerResponseFinish(e,r,n,s,a,o){let i=(0, Vt.getIncomingRequestAttributesOnResponse)(e,r,this._semconvStability);s=Object.assign(s,(0, Vt.getIncomingRequestMetricAttributesOnResponse)(i)),a=Object.assign(a,(0, Vt.getIncomingStableRequestMetricAttributesOnResponse)(i)),this._headerCapture.server.captureResponseHeaders(n,u=>r.getHeader(u)),n.setAttributes(i).setStatus({code:(0, Vt.parseResponseStatus)(_e.SpanKind.SERVER,r.statusCode)});let c=i[St.ATTR_HTTP_ROUTE];c&&n.updateName(`${e.method||"GET"} ${c}`),this.getConfig().applyCustomAttributesOnSpan&&(0, lr.safeExecuteInTheMiddle)(()=>this.getConfig().applyCustomAttributesOnSpan(n,e,r),()=>{},true),this._closeHttpSpan(n,_e.SpanKind.SERVER,o,s,a);}_onOutgoingRequestError(e,r,n,s,a){(0, Vt.setSpanWithError)(e,a,this._semconvStability),n[St.ATTR_ERROR_TYPE]=a.name,this._closeHttpSpan(e,_e.SpanKind.CLIENT,s,r,n);}_onServerResponseError(e,r,n,s,a){(0, Vt.setSpanWithError)(e,a,this._semconvStability),n[St.ATTR_ERROR_TYPE]=a.name,this._closeHttpSpan(e,_e.SpanKind.SERVER,s,r,n);}_startHttpSpan(e,r,n=_e.context.active()){let s=r.kind===_e.SpanKind.CLIENT?this.getConfig().requireParentforOutgoingSpans:this.getConfig().requireParentforIncomingSpans,a,o=_e.trace.getSpan(n);return s===true&&o===void 0?a=_e.trace.wrapSpanContext(_e.INVALID_SPAN_CONTEXT):s===true&&o?.spanContext().isRemote?a=o:a=this.tracer.startSpan(e,r,n),this._spanNotEnded.add(a),a}_closeHttpSpan(e,r,n,s,a){if(!this._spanNotEnded.has(e))return;e.end(),this._spanNotEnded.delete(e);let o=(0, ra.hrTimeToMilliseconds)((0, ra.hrTimeDuration)(n,(0, ra.hrTime)()));r===_e.SpanKind.SERVER?this._recordServerDuration(o,s,a):r===_e.SpanKind.CLIENT&&this._recordClientDuration(o,s,a);}_callResponseHook(e,r){(0, lr.safeExecuteInTheMiddle)(()=>this.getConfig().responseHook(e,r),()=>{},true);}_callRequestHook(e,r){(0, lr.safeExecuteInTheMiddle)(()=>this.getConfig().requestHook(e,r),()=>{},true);}_callStartSpanHook(e,r){if(typeof r=="function")return (0, lr.safeExecuteInTheMiddle)(()=>r(e),()=>{},true)}_createHeaderCapture(){let e=this.getConfig();return {client:{captureRequestHeaders:(0, Vt.headerCapture)("request",e.headersToSpanAttributes?.client?.requestHeaders??[]),captureResponseHeaders:(0, Vt.headerCapture)("response",e.headersToSpanAttributes?.client?.responseHeaders??[])},server:{captureRequestHeaders:(0, Vt.headerCapture)("request",e.headersToSpanAttributes?.server?.requestHeaders??[]),captureResponseHeaders:(0, Vt.headerCapture)("response",e.headersToSpanAttributes?.server?.responseHeaders??[])}}}};Dv.HttpInstrumentation=RU;});var Kpe=f(wv=>{Object.defineProperty(wv,"__esModule",{value:true});wv.HttpInstrumentation=void 0;var oot=$pe();Object.defineProperty(wv,"HttpInstrumentation",{enumerable:true,get:function(){return oot.HttpInstrumentation}});});var Wpe=f(Q_=>{Object.defineProperty(Q_,"__esModule",{value:true});Q_.MongodbCommandType=void 0;(function(t){t.CREATE_INDEXES="createIndexes",t.FIND_AND_MODIFY="findAndModify",t.IS_MASTER="isMaster",t.COUNT="count",t.AGGREGATE="aggregate",t.UNKNOWN="unknown";})(Q_.MongodbCommandType||(Q_.MongodbCommandType={}));});var Xpe=f(Fd=>{Object.defineProperty(Fd,"__esModule",{value:true});Fd.PACKAGE_NAME=Fd.PACKAGE_VERSION=void 0;Fd.PACKAGE_VERSION="0.57.0";Fd.PACKAGE_NAME="@opentelemetry/instrumentation-mongodb";});var Zpe=f(Uv=>{Object.defineProperty(Uv,"__esModule",{value:true});Uv.MongoDBInstrumentation=void 0;var Ot=(M(),A(H)),ft=(Jr(),A(Qr)),Xo=(ct(),A(Zt)),na=Wpe(),Qpe=Xpe(),Jpe={requireParentSpan:true},vU=class t extends ft.InstrumentationBase{constructor(e={}){super(Qpe.PACKAGE_NAME,Qpe.PACKAGE_VERSION,{...Jpe,...e});}setConfig(e={}){super.setConfig({...Jpe,...e});}_updateMetricInstruments(){this._connectionsUsage=this.meter.createUpDownCounter("db.client.connections.usage",{description:"The number of connections that are currently in state described by the state attribute.",unit:"{connection}"});}init(){let{v3PatchConnection:e,v3UnpatchConnection:r}=this._getV3ConnectionPatches(),{v4PatchConnect:n,v4UnpatchConnect:s}=this._getV4ConnectPatches(),{v4PatchConnectionCallback:a,v4PatchConnectionPromise:o,v4UnpatchConnection:i}=this._getV4ConnectionPatches(),{v4PatchConnectionPool:c,v4UnpatchConnectionPool:u}=this._getV4ConnectionPoolPatches(),{v4PatchSessions:l,v4UnpatchSessions:d}=this._getV4SessionsPatches();return [new ft.InstrumentationNodeModuleDefinition("mongodb",[">=3.3.0 <4"],void 0,void 0,[new ft.InstrumentationNodeModuleFile("mongodb/lib/core/wireprotocol/index.js",[">=3.3.0 <4"],e,r)]),new ft.InstrumentationNodeModuleDefinition("mongodb",[">=4.0.0 <7"],void 0,void 0,[new ft.InstrumentationNodeModuleFile("mongodb/lib/cmap/connection.js",[">=4.0.0 <6.4"],a,i),new ft.InstrumentationNodeModuleFile("mongodb/lib/cmap/connection.js",[">=6.4.0 <7"],o,i),new ft.InstrumentationNodeModuleFile("mongodb/lib/cmap/connection_pool.js",[">=4.0.0 <6.4"],c,u),new ft.InstrumentationNodeModuleFile("mongodb/lib/cmap/connect.js",[">=4.0.0 <7"],n,s),new ft.InstrumentationNodeModuleFile("mongodb/lib/sessions.js",[">=4.0.0 <7"],l,d)])]}_getV3ConnectionPatches(){return {v3PatchConnection:e=>((0, ft.isWrapped)(e.insert)&&this._unwrap(e,"insert"),this._wrap(e,"insert",this._getV3PatchOperation("insert")),(0, ft.isWrapped)(e.remove)&&this._unwrap(e,"remove"),this._wrap(e,"remove",this._getV3PatchOperation("remove")),(0, ft.isWrapped)(e.update)&&this._unwrap(e,"update"),this._wrap(e,"update",this._getV3PatchOperation("update")),(0, ft.isWrapped)(e.command)&&this._unwrap(e,"command"),this._wrap(e,"command",this._getV3PatchCommand()),(0, ft.isWrapped)(e.query)&&this._unwrap(e,"query"),this._wrap(e,"query",this._getV3PatchFind()),(0, ft.isWrapped)(e.getMore)&&this._unwrap(e,"getMore"),this._wrap(e,"getMore",this._getV3PatchCursor()),e),v3UnpatchConnection:e=>{e!==void 0&&(this._unwrap(e,"insert"),this._unwrap(e,"remove"),this._unwrap(e,"update"),this._unwrap(e,"command"),this._unwrap(e,"query"),this._unwrap(e,"getMore"));}}}_getV4SessionsPatches(){return {v4PatchSessions:e=>((0, ft.isWrapped)(e.acquire)&&this._unwrap(e,"acquire"),this._wrap(e.ServerSessionPool.prototype,"acquire",this._getV4AcquireCommand()),(0, ft.isWrapped)(e.release)&&this._unwrap(e,"release"),this._wrap(e.ServerSessionPool.prototype,"release",this._getV4ReleaseCommand()),e),v4UnpatchSessions:e=>{e!==void 0&&((0, ft.isWrapped)(e.acquire)&&this._unwrap(e,"acquire"),(0, ft.isWrapped)(e.release)&&this._unwrap(e,"release"));}}}_getV4AcquireCommand(){let e=this;return r=>function(){let s=this.sessions.length,a=r.call(this),o=this.sessions.length;return s===o?e._connectionsUsage.add(1,{state:"used","pool.name":e._poolName}):s-1===o&&(e._connectionsUsage.add(-1,{state:"idle","pool.name":e._poolName}),e._connectionsUsage.add(1,{state:"used","pool.name":e._poolName})),a}}_getV4ReleaseCommand(){let e=this;return r=>function(s){let a=r.call(this,s);return e._connectionsUsage.add(-1,{state:"used","pool.name":e._poolName}),e._connectionsUsage.add(1,{state:"idle","pool.name":e._poolName}),a}}_getV4ConnectionPoolPatches(){return {v4PatchConnectionPool:e=>{let r=e.ConnectionPool.prototype;return (0, ft.isWrapped)(r.checkOut)&&this._unwrap(r,"checkOut"),this._wrap(r,"checkOut",this._getV4ConnectionPoolCheckOut()),e},v4UnpatchConnectionPool:e=>{e!==void 0&&this._unwrap(e.ConnectionPool.prototype,"checkOut");}}}_getV4ConnectPatches(){return {v4PatchConnect:e=>((0, ft.isWrapped)(e.connect)&&this._unwrap(e,"connect"),this._wrap(e,"connect",this._getV4ConnectCommand()),e),v4UnpatchConnect:e=>{e!==void 0&&this._unwrap(e,"connect");}}}_getV4ConnectionPoolCheckOut(){return e=>function(n){let s=Ot.context.bind(Ot.context.active(),n);return e.call(this,s)}}_getV4ConnectCommand(){let e=this;return r=>function(s,a){if(r.length===1){let i=r.call(this,s);return i&&typeof i.then=="function"&&i.then(()=>e.setPoolName(s),()=>{}),i}let o=function(i,c){if(i||!c){a(i,c);return}e.setPoolName(s),a(i,c);};return r.call(this,s,o)}}_getV4ConnectionPatches(){return {v4PatchConnectionCallback:e=>((0, ft.isWrapped)(e.Connection.prototype.command)&&this._unwrap(e.Connection.prototype,"command"),this._wrap(e.Connection.prototype,"command",this._getV4PatchCommandCallback()),e),v4PatchConnectionPromise:e=>((0, ft.isWrapped)(e.Connection.prototype.command)&&this._unwrap(e.Connection.prototype,"command"),this._wrap(e.Connection.prototype,"command",this._getV4PatchCommandPromise()),e),v4UnpatchConnection:e=>{e!==void 0&&this._unwrap(e.Connection.prototype,"command");}}}_getV3PatchOperation(e){let r=this;return n=>function(a,o,i,c,u){let l=Ot.trace.getSpan(Ot.context.active()),d=r._checkSkipInstrumentation(l),p=typeof c=="function"?c:u;if(d||typeof p!="function"||typeof i!="object")return typeof c=="function"?n.call(this,a,o,i,c):n.call(this,a,o,i,c,u);let h=r.tracer.startSpan(`mongodb.${e}`,{kind:Ot.SpanKind.CLIENT});r._populateV3Attributes(h,o,a,i[0],e);let T=r._patchEnd(h,p);return typeof c=="function"?n.call(this,a,o,i,T):n.call(this,a,o,i,c,T)}}_getV3PatchCommand(){let e=this;return r=>function(s,a,o,i,c){let u=Ot.trace.getSpan(Ot.context.active()),l=e._checkSkipInstrumentation(u),d=typeof i=="function"?i:c;if(l||typeof d!="function"||typeof o!="object")return typeof i=="function"?r.call(this,s,a,o,i):r.call(this,s,a,o,i,c);let p=t._getCommandType(o),h=p===na.MongodbCommandType.UNKNOWN?"command":p,T=e.tracer.startSpan(`mongodb.${h}`,{kind:Ot.SpanKind.CLIENT}),g=p===na.MongodbCommandType.UNKNOWN?void 0:p;e._populateV3Attributes(T,a,s,o,g);let y=e._patchEnd(T,d);return typeof i=="function"?r.call(this,s,a,o,y):r.call(this,s,a,o,i,y)}}_getV4PatchCommandCallback(){let e=this;return r=>function(s,a,o,i){let c=Ot.trace.getSpan(Ot.context.active()),u=e._checkSkipInstrumentation(c),l=i,d=Object.keys(a)[0];if(typeof a!="object"||a.ismaster||a.hello)return r.call(this,s,a,o,i);let p;u||(p=e.tracer.startSpan(`mongodb.${d}`,{kind:Ot.SpanKind.CLIENT}),e._populateV4Attributes(p,this,s,a,d));let h=e._patchEnd(p,l,this.id,d);return r.call(this,s,a,o,h)}}_getV4PatchCommandPromise(){let e=this;return r=>function(...s){let[a,o]=s,i=Ot.trace.getSpan(Ot.context.active()),c=e._checkSkipInstrumentation(i),u=Object.keys(o)[0],l=()=>{};if(typeof o!="object"||o.ismaster||o.hello)return r.apply(this,s);let d;c||(d=e.tracer.startSpan(`mongodb.${u}`,{kind:Ot.SpanKind.CLIENT}),e._populateV4Attributes(d,this,a,o,u));let p=e._patchEnd(d,l,this.id,u),h=r.apply(this,s);return h.then(T=>p(null,T),T=>p(T)),h}}_getV3PatchFind(){let e=this;return r=>function(s,a,o,i,c,u){let l=Ot.trace.getSpan(Ot.context.active()),d=e._checkSkipInstrumentation(l),p=typeof c=="function"?c:u;if(d||typeof p!="function"||typeof o!="object")return typeof c=="function"?r.call(this,s,a,o,i,c):r.call(this,s,a,o,i,c,u);let h=e.tracer.startSpan("mongodb.find",{kind:Ot.SpanKind.CLIENT});e._populateV3Attributes(h,a,s,o,"find");let T=e._patchEnd(h,p);return typeof c=="function"?r.call(this,s,a,o,i,T):r.call(this,s,a,o,i,c,T)}}_getV3PatchCursor(){let e=this;return r=>function(s,a,o,i,c,u){let l=Ot.trace.getSpan(Ot.context.active()),d=e._checkSkipInstrumentation(l),p=typeof c=="function"?c:u;if(d||typeof p!="function")return typeof c=="function"?r.call(this,s,a,o,i,c):r.call(this,s,a,o,i,c,u);let h=e.tracer.startSpan("mongodb.getMore",{kind:Ot.SpanKind.CLIENT});e._populateV3Attributes(h,a,s,o.cmd,"getMore");let T=e._patchEnd(h,p);return typeof c=="function"?r.call(this,s,a,o,i,T):r.call(this,s,a,o,i,c,T)}}static _getCommandType(e){return e.createIndexes!==void 0?na.MongodbCommandType.CREATE_INDEXES:e.findandmodify!==void 0?na.MongodbCommandType.FIND_AND_MODIFY:e.ismaster!==void 0?na.MongodbCommandType.IS_MASTER:e.count!==void 0?na.MongodbCommandType.COUNT:e.aggregate!==void 0?na.MongodbCommandType.AGGREGATE:na.MongodbCommandType.UNKNOWN}_populateV4Attributes(e,r,n,s,a){let o,i;if(r){let u=typeof r.address=="string"?r.address.split(":"):"";u.length===2&&(o=u[0],i=u[1]);}let c;s?.documents&&s.documents[0]?c=s.documents[0]:s?.cursors?c=s.cursors:c=s,this._addAllSpanAttributes(e,n.db,n.collection,o,i,c,a);}_populateV3Attributes(e,r,n,s,a){let o,i;if(n&&n.s&&(o=n.s.options?.host??n.s.host,i=(n.s.options?.port??n.s.port)?.toString(),o==null||i==null)){let d=n.description?.address;if(d){let p=d.split(":");o=p[0],i=p[1];}}let[c,u]=r.toString().split("."),l=s?.query??s?.q??s;this._addAllSpanAttributes(e,c,u,o,i,l,a);}_addAllSpanAttributes(e,r,n,s,a,o,i){if(e.setAttributes({[Xo.SEMATTRS_DB_SYSTEM]:Xo.DBSYSTEMVALUES_MONGODB,[Xo.SEMATTRS_DB_NAME]:r,[Xo.SEMATTRS_DB_MONGODB_COLLECTION]:n,[Xo.SEMATTRS_DB_OPERATION]:i,[Xo.SEMATTRS_DB_CONNECTION_STRING]:`mongodb://${s}:${a}/${r}`}),s&&a){e.setAttribute(Xo.SEMATTRS_NET_PEER_NAME,s);let l=parseInt(a,10);isNaN(l)||e.setAttribute(Xo.SEMATTRS_NET_PEER_PORT,l);}if(!o)return;let{dbStatementSerializer:c}=this.getConfig(),u=typeof c=="function"?c:this._defaultDbStatementSerializer.bind(this);(0, ft.safeExecuteInTheMiddle)(()=>{let l=u(o);e.setAttribute(Xo.SEMATTRS_DB_STATEMENT,l);},l=>{l&&this._diag.error("Error running dbStatementSerializer hook",l);},true);}_defaultDbStatementSerializer(e){let{enhancedDatabaseReporting:r}=this.getConfig(),n=r?e:this._scrubStatement(e);return JSON.stringify(n)}_scrubStatement(e){return Array.isArray(e)?e.map(r=>this._scrubStatement(r)):typeof e=="object"&&e!==null?Object.fromEntries(Object.entries(e).map(([r,n])=>[r,this._scrubStatement(n)])):"?"}_handleExecutionResult(e,r){let{responseHook:n}=this.getConfig();typeof n=="function"&&(0, ft.safeExecuteInTheMiddle)(()=>{n(e,{data:r});},s=>{s&&this._diag.error("Error running response hook",s);},true);}_patchEnd(e,r,n,s){let a=Ot.context.active(),o=this;return function(...c){let u=c[0];if(e){if(u instanceof Error)e?.setStatus({code:Ot.SpanStatusCode.ERROR,message:u.message});else {let l=c[1];o._handleExecutionResult(e,l);}e.end();}return Ot.context.with(a,()=>(s==="endSessions"&&o._connectionsUsage.add(-1,{state:"idle","pool.name":o._poolName}),r.apply(this,c)))}}setPoolName(e){let r=e.hostAddress?.host,n=e.hostAddress?.port,s=e.dbName,a=`mongodb://${r}:${n}/${s}`;this._poolName=a;}_checkSkipInstrumentation(e){return this.getConfig().requireParentSpan===true&&e===void 0}};Uv.MongoDBInstrumentation=vU;});var efe=f(J_=>{Object.defineProperty(J_,"__esModule",{value:true});J_.MongodbCommandType=void 0;(function(t){t.CREATE_INDEXES="createIndexes",t.FIND_AND_MODIFY="findAndModify",t.IS_MASTER="isMaster",t.COUNT="count",t.UNKNOWN="unknown";})(J_.MongodbCommandType||(J_.MongodbCommandType={}));});var tfe=f(qd=>{Object.defineProperty(qd,"__esModule",{value:true});qd.MongodbCommandType=qd.MongoDBInstrumentation=void 0;var cot=Zpe();Object.defineProperty(qd,"MongoDBInstrumentation",{enumerable:true,get:function(){return cot.MongoDBInstrumentation}});var uot=efe();Object.defineProperty(qd,"MongodbCommandType",{enumerable:true,get:function(){return uot.MongodbCommandType}});});var rfe=f(Z_=>{Object.defineProperty(Z_,"__esModule",{value:true});Z_.AttributeNames=void 0;(function(t){t.MYSQL_VALUES="db.mysql.values";})(Z_.AttributeNames||(Z_.AttributeNames={}));});var ife=f(fn=>{Object.defineProperty(fn,"__esModule",{value:true});fn.getPoolName=fn.arrayStringifyHelper=fn.getSpanName=fn.getDbValues=fn.getDbStatement=fn.getConnectionAttributes=void 0;var Qo=(ct(),A(Zt));function dot(t){let{host:e,port:r,database:n,user:s}=pot(t),a=parseInt(r,10);return isNaN(a)?{[Qo.SEMATTRS_NET_PEER_NAME]:e,[Qo.SEMATTRS_DB_CONNECTION_STRING]:nfe(e,r,n),[Qo.SEMATTRS_DB_NAME]:n,[Qo.SEMATTRS_DB_USER]:s}:{[Qo.SEMATTRS_NET_PEER_NAME]:e,[Qo.SEMATTRS_NET_PEER_PORT]:a,[Qo.SEMATTRS_DB_CONNECTION_STRING]:nfe(e,r,n),[Qo.SEMATTRS_DB_NAME]:n,[Qo.SEMATTRS_DB_USER]:s}}fn.getConnectionAttributes=dot;function pot(t){let{host:e,port:r,database:n,user:s}=t&&t.connectionConfig||t||{};return {host:e,port:r,database:n,user:s}}function nfe(t,e,r){let n=`jdbc:mysql://${t||"localhost"}`;return typeof e=="number"&&(n+=`:${e}`),typeof r=="string"&&(n+=`/${r}`),n}function fot(t){return typeof t=="string"?t:t.sql}fn.getDbStatement=fot;function hot(t,e){return OU(typeof t=="string"?e:e||t.values)}fn.getDbValues=hot;function _ot(t){let e=typeof t=="object"?t.sql:t,r=e?.indexOf(" ");return typeof r=="number"&&r!==-1?e?.substring(0,r):e}fn.getSpanName=_ot;function OU(t){return t?`[${t.toString()}]`:""}fn.arrayStringifyHelper=OU;function mot(t){let e=t.config.connectionConfig,r="";return r+=e.host?`host: '${e.host}', `:"",r+=e.port?`port: ${e.port}, `:"",r+=e.database?`database: '${e.database}', `:"",r+=e.user?`user: '${e.user}'`:"",e.user||(r=r.substring(0,r.length-2)),r.trim()}fn.getPoolName=mot;});var ofe=f(Hd=>{Object.defineProperty(Hd,"__esModule",{value:true});Hd.PACKAGE_NAME=Hd.PACKAGE_VERSION=void 0;Hd.PACKAGE_VERSION="0.50.0";Hd.PACKAGE_NAME="@opentelemetry/instrumentation-mysql";});var afe=f(kv=>{Object.defineProperty(kv,"__esModule",{value:true});kv.MySQLInstrumentation=void 0;var hn=(M(),A(H)),Gd=(Jr(),A(Qr)),NU=(ct(),A(Zt)),Eot=rfe(),jd=ife(),sfe=ofe(),CU=class t extends Gd.InstrumentationBase{static COMMON_ATTRIBUTES={[NU.SEMATTRS_DB_SYSTEM]:NU.DBSYSTEMVALUES_MYSQL};constructor(e={}){super(sfe.PACKAGE_NAME,sfe.PACKAGE_VERSION,e);}_updateMetricInstruments(){this._connectionsUsage=this.meter.createUpDownCounter("db.client.connections.usage",{description:"The number of connections that are currently in state described by the state attribute.",unit:"{connection}"});}init(){return [new Gd.InstrumentationNodeModuleDefinition("mysql",[">=2.0.0 <3"],e=>((0, Gd.isWrapped)(e.createConnection)&&this._unwrap(e,"createConnection"),this._wrap(e,"createConnection",this._patchCreateConnection()),(0, Gd.isWrapped)(e.createPool)&&this._unwrap(e,"createPool"),this._wrap(e,"createPool",this._patchCreatePool()),(0, Gd.isWrapped)(e.createPoolCluster)&&this._unwrap(e,"createPoolCluster"),this._wrap(e,"createPoolCluster",this._patchCreatePoolCluster()),e),e=>{e!==void 0&&(this._unwrap(e,"createConnection"),this._unwrap(e,"createPool"),this._unwrap(e,"createPoolCluster"));})]}_patchCreateConnection(){return e=>{let r=this;return function(s){let a=e(...arguments);return r._wrap(a,"query",r._patchQuery(a)),a}}}_patchCreatePool(){return e=>{let r=this;return function(s){let a=e(...arguments);return r._wrap(a,"query",r._patchQuery(a)),r._wrap(a,"getConnection",r._patchGetConnection(a)),r._wrap(a,"end",r._patchPoolEnd(a)),r._setPoolcallbacks(a,r,""),a}}}_patchPoolEnd(e){return r=>{let n=this;return function(a){let o=e._allConnections.length,i=e._freeConnections.length,c=o-i,u=(0, jd.getPoolName)(e);n._connectionsUsage.add(-c,{state:"used",name:u}),n._connectionsUsage.add(-i,{state:"idle",name:u}),r.apply(e,arguments);}}}_patchCreatePoolCluster(){return e=>{let r=this;return function(s){let a=e(...arguments);return r._wrap(a,"getConnection",r._patchGetConnection(a)),r._wrap(a,"add",r._patchAdd(a)),a}}}_patchAdd(e){return r=>{let n=this;return function(a,o){if(!n._enabled)return n._unwrap(e,"add"),r.apply(e,arguments);r.apply(e,arguments);let i=e._nodes;if(i){let c=typeof a=="object"?"CLUSTER::"+e._lastId:String(a),u=i[c].pool;n._setPoolcallbacks(u,n,a);}}}}_patchGetConnection(e){return r=>{let n=this;return function(a,o,i){if(!n._enabled)return n._unwrap(e,"getConnection"),r.apply(e,arguments);if(arguments.length===1&&typeof a=="function"){let c=n._getConnectionCallbackPatchFn(a);return r.call(e,c)}if(arguments.length===2&&typeof o=="function"){let c=n._getConnectionCallbackPatchFn(o);return r.call(e,a,c)}if(arguments.length===3&&typeof i=="function"){let c=n._getConnectionCallbackPatchFn(i);return r.call(e,a,o,c)}return r.apply(e,arguments)}}}_getConnectionCallbackPatchFn(e){let r=this,n=hn.context.active();return function(s,a){a&&((0, Gd.isWrapped)(a.query)||r._wrap(a,"query",r._patchQuery(a))),typeof e=="function"&&hn.context.with(n,e,this,s,a);}}_patchQuery(e){return r=>{let n=this;return function(s,a,o){if(!n._enabled)return n._unwrap(e,"query"),r.apply(e,arguments);let i=n.tracer.startSpan((0, jd.getSpanName)(s),{kind:hn.SpanKind.CLIENT,attributes:{...t.COMMON_ATTRIBUTES,...(0, jd.getConnectionAttributes)(e.config)}});if(i.setAttribute(NU.SEMATTRS_DB_STATEMENT,(0, jd.getDbStatement)(s)),n.getConfig().enhancedDatabaseReporting){let l;Array.isArray(a)?l=a:arguments[2]&&(l=[a]),i.setAttribute(Eot.AttributeNames.MYSQL_VALUES,(0, jd.getDbValues)(s,l));}let c=Array.from(arguments).findIndex(l=>typeof l=="function"),u=hn.context.active();if(c===-1){let l=hn.context.with(hn.trace.setSpan(hn.context.active(),i),()=>r.apply(e,arguments));return hn.context.bind(u,l),l.on("error",d=>i.setStatus({code:hn.SpanStatusCode.ERROR,message:d.message})).on("end",()=>{i.end();})}else return n._wrap(arguments,c,n._patchCallbackQuery(i,u)),hn.context.with(hn.trace.setSpan(hn.context.active(),i),()=>r.apply(e,arguments))}}}_patchCallbackQuery(e,r){return n=>function(s,a,o){return s&&e.setStatus({code:hn.SpanStatusCode.ERROR,message:s.message}),e.end(),hn.context.with(r,()=>n(...arguments))}}_setPoolcallbacks(e,r,n){let s=n||(0, jd.getPoolName)(e);e.on("connection",a=>{r._connectionsUsage.add(1,{state:"idle",name:s});}),e.on("acquire",a=>{r._connectionsUsage.add(-1,{state:"idle",name:s}),r._connectionsUsage.add(1,{state:"used",name:s});}),e.on("release",a=>{r._connectionsUsage.add(-1,{state:"used",name:s}),r._connectionsUsage.add(1,{state:"idle",name:s});});}};kv.MySQLInstrumentation=CU;});var cfe=f(Vv=>{Object.defineProperty(Vv,"__esModule",{value:true});Vv.MySQLInstrumentation=void 0;var Tot=afe();Object.defineProperty(Vv,"MySQLInstrumentation",{enumerable:true,get:function(){return Tot.MySQLInstrumentation}});});var ufe=f(Bv=>{Object.defineProperty(Bv,"__esModule",{value:true});Bv.EVENT_LISTENERS_SET=void 0;Bv.EVENT_LISTENERS_SET=Symbol("opentelemetry.instrumentation.pg.eventListenersSet");});var PU=f(em=>{Object.defineProperty(em,"__esModule",{value:true});em.AttributeNames=void 0;(function(t){t.PG_VALUES="db.postgresql.values",t.PG_PLAN="db.postgresql.plan",t.IDLE_TIMEOUT_MILLIS="db.postgresql.idle.timeout.millis",t.MAX_CLIENT="db.postgresql.max.client";})(em.AttributeNames||(em.AttributeNames={}));});var bU=f(We=>{Object.defineProperty(We,"__esModule",{value:true});We.METRIC_DB_CLIENT_CONNECTION_PENDING_REQUESTS=We.METRIC_DB_CLIENT_CONNECTION_COUNT=We.DB_SYSTEM_VALUE_POSTGRESQL=We.DB_CLIENT_CONNECTION_STATE_VALUE_USED=We.DB_CLIENT_CONNECTION_STATE_VALUE_IDLE=We.ATTR_NET_PEER_PORT=We.ATTR_NET_PEER_NAME=We.ATTR_DB_USER=We.ATTR_DB_SYSTEM=We.ATTR_DB_STATEMENT=We.ATTR_DB_NAME=We.ATTR_DB_CONNECTION_STRING=We.ATTR_DB_CLIENT_CONNECTION_STATE=We.ATTR_DB_CLIENT_CONNECTION_POOL_NAME=void 0;We.ATTR_DB_CLIENT_CONNECTION_POOL_NAME="db.client.connection.pool.name";We.ATTR_DB_CLIENT_CONNECTION_STATE="db.client.connection.state";We.ATTR_DB_CONNECTION_STRING="db.connection_string";We.ATTR_DB_NAME="db.name";We.ATTR_DB_STATEMENT="db.statement";We.ATTR_DB_SYSTEM="db.system";We.ATTR_DB_USER="db.user";We.ATTR_NET_PEER_NAME="net.peer.name";We.ATTR_NET_PEER_PORT="net.peer.port";We.DB_CLIENT_CONNECTION_STATE_VALUE_IDLE="idle";We.DB_CLIENT_CONNECTION_STATE_VALUE_USED="used";We.DB_SYSTEM_VALUE_POSTGRESQL="postgresql";We.METRIC_DB_CLIENT_CONNECTION_COUNT="db.client.connection.count";We.METRIC_DB_CLIENT_CONNECTION_PENDING_REQUESTS="db.client.connection.pending_requests";});var MU=f(tm=>{Object.defineProperty(tm,"__esModule",{value:true});tm.SpanNames=void 0;(function(t){t.QUERY_PREFIX="pg.query",t.CONNECT="pg.connect",t.POOL_CONNECT="pg-pool.connect";})(tm.SpanNames||(tm.SpanNames={}));});var mfe=f(Be=>{Object.defineProperty(Be,"__esModule",{value:true});Be.isObjectWithTextString=Be.getErrorMessage=Be.patchClientConnectCallback=Be.patchCallbackPGPool=Be.updateCounter=Be.getPoolName=Be.patchCallback=Be.handleExecutionResult=Be.handleConfigQuery=Be.shouldSkipInstrumentation=Be.getSemanticAttributesFromPoolConnection=Be.getSemanticAttributesFromConnection=Be.getConnectionString=Be.parseAndMaskConnectionString=Be.parseNormalizedOperationName=Be.getQuerySpanName=void 0;var ia=(M(),A(H)),Fv=PU(),ni=(ct(),A(Zt)),Pt=bU(),Dc=(Jr(),A(Qr)),lfe=MU();function dfe(t,e){if(!e)return lfe.SpanNames.QUERY_PREFIX;let r=typeof e.name=="string"&&e.name?e.name:pfe(e.text);return `${lfe.SpanNames.QUERY_PREFIX}:${r}${t?` ${t}`:""}`}Be.getQuerySpanName=dfe;function pfe(t){let e=t.indexOf(" "),r=e===-1?t:t.slice(0,e);return r=r.toUpperCase(),r.endsWith(";")?r.slice(0,-1):r}Be.parseNormalizedOperationName=pfe;function ffe(t){try{let e=new URL(t);return e.username="",e.password="",e.toString()}catch{return "postgresql://localhost:5432/"}}Be.parseAndMaskConnectionString=ffe;function IU(t){if("connectionString"in t&&t.connectionString)return ffe(t.connectionString);let e=t.host||"localhost",r=t.port||5432,n=t.database||"";return `postgresql://${e}:${r}/${n}`}Be.getConnectionString=IU;function qv(t){if(Number.isInteger(t))return t}function hfe(t,e){let r={};return e&Dc.SemconvStability.OLD&&(r={...r,[Pt.ATTR_DB_SYSTEM]:Pt.DB_SYSTEM_VALUE_POSTGRESQL,[Pt.ATTR_DB_NAME]:t.database,[Pt.ATTR_DB_CONNECTION_STRING]:IU(t),[Pt.ATTR_DB_USER]:t.user,[Pt.ATTR_NET_PEER_NAME]:t.host,[Pt.ATTR_NET_PEER_PORT]:qv(t.port)}),e&Dc.SemconvStability.STABLE&&(r={...r,[ni.ATTR_DB_SYSTEM_NAME]:ni.DB_SYSTEM_NAME_VALUE_POSTGRESQL,[ni.ATTR_DB_NAMESPACE]:t.namespace,[ni.ATTR_SERVER_ADDRESS]:t.host,[ni.ATTR_SERVER_PORT]:qv(t.port)}),r}Be.getSemanticAttributesFromConnection=hfe;function yot(t,e){let r;try{r=t.connectionString?new URL(t.connectionString):void 0;}catch{r=void 0;}let n={[Fv.AttributeNames.IDLE_TIMEOUT_MILLIS]:t.idleTimeoutMillis,[Fv.AttributeNames.MAX_CLIENT]:t.maxClient};return e&Dc.SemconvStability.OLD&&(n={...n,[Pt.ATTR_DB_SYSTEM]:Pt.DB_SYSTEM_VALUE_POSTGRESQL,[Pt.ATTR_DB_NAME]:r?.pathname.slice(1)??t.database,[Pt.ATTR_DB_CONNECTION_STRING]:IU(t),[Pt.ATTR_NET_PEER_NAME]:r?.hostname??t.host,[Pt.ATTR_NET_PEER_PORT]:Number(r?.port)||qv(t.port),[Pt.ATTR_DB_USER]:r?.username??t.user}),e&Dc.SemconvStability.STABLE&&(n={...n,[ni.ATTR_DB_SYSTEM_NAME]:ni.DB_SYSTEM_NAME_VALUE_POSTGRESQL,[ni.ATTR_DB_NAMESPACE]:t.namespace,[ni.ATTR_SERVER_ADDRESS]:r?.hostname??t.host,[ni.ATTR_SERVER_PORT]:Number(r?.port)||qv(t.port)}),n}Be.getSemanticAttributesFromPoolConnection=yot;function Aot(t){return t.requireParentSpan===true&&ia.trace.getSpan(ia.context.active())===void 0}Be.shouldSkipInstrumentation=Aot;function Rot(t,e,r,n){let{connectionParameters:s}=this,a=s.database,o=dfe(a,n),i=t.startSpan(o,{kind:ia.SpanKind.CLIENT,attributes:hfe(s,r)});if(!n)return i;if(n.text&&(r&Dc.SemconvStability.OLD&&i.setAttribute(Pt.ATTR_DB_STATEMENT,n.text),r&Dc.SemconvStability.STABLE&&i.setAttribute(ni.ATTR_DB_QUERY_TEXT,n.text)),e.enhancedDatabaseReporting&&Array.isArray(n.values))try{let c=n.values.map(u=>u==null?"null":u instanceof Buffer?u.toString():typeof u=="object"?typeof u.toPostgres=="function"?u.toPostgres():JSON.stringify(u):u.toString());i.setAttribute(Fv.AttributeNames.PG_VALUES,c);}catch(c){ia.diag.error("failed to stringify ",n.values,c);}return typeof n.name=="string"&&i.setAttribute(Fv.AttributeNames.PG_PLAN,n.name),i}Be.handleConfigQuery=Rot;function _fe(t,e,r){typeof t.responseHook=="function"&&(0, Dc.safeExecuteInTheMiddle)(()=>{t.responseHook(e,{data:r});},n=>{n&&ia.diag.error("Error running response hook",n);},true);}Be.handleExecutionResult=_fe;function vot(t,e,r,n,s){return function(o,i){o?(Object.prototype.hasOwnProperty.call(o,"code")&&(n[ni.ATTR_ERROR_TYPE]=o.code),e.setStatus({code:ia.SpanStatusCode.ERROR,message:o.message})):_fe(t,e,i),s(),e.end(),r.call(this,o,i);}}Be.patchCallback=vot;function Oot(t){let e="";return e+=(t?.host?`${t.host}`:"unknown_host")+":",e+=(t?.port?`${t.port}`:"unknown_port")+"/",e+=t?.database?`${t.database}`:"unknown_database",e.trim()}Be.getPoolName=Oot;function Not(t,e,r,n,s){let a=e.totalCount,o=e.waitingCount,i=e.idleCount,c=a-i;return r.add(c-s.used,{[Pt.ATTR_DB_CLIENT_CONNECTION_STATE]:Pt.DB_CLIENT_CONNECTION_STATE_VALUE_USED,[Pt.ATTR_DB_CLIENT_CONNECTION_POOL_NAME]:t}),r.add(i-s.idle,{[Pt.ATTR_DB_CLIENT_CONNECTION_STATE]:Pt.DB_CLIENT_CONNECTION_STATE_VALUE_IDLE,[Pt.ATTR_DB_CLIENT_CONNECTION_POOL_NAME]:t}),n.add(o-s.pending,{[Pt.ATTR_DB_CLIENT_CONNECTION_POOL_NAME]:t}),{used:c,idle:i,pending:o}}Be.updateCounter=Not;function Cot(t,e){return function(n,s,a){n&&t.setStatus({code:ia.SpanStatusCode.ERROR,message:n.message}),t.end(),e.call(this,n,s,a);}}Be.patchCallbackPGPool=Cot;function Pot(t,e){return function(n){n&&t.setStatus({code:ia.SpanStatusCode.ERROR,message:n.message}),t.end(),e.apply(this,arguments);}}Be.patchClientConnectCallback=Pot;function bot(t){return typeof t=="object"&&t!==null&&"message"in t?String(t.message):void 0}Be.getErrorMessage=bot;function Mot(t){return typeof t=="object"&&typeof t?.text=="string"}Be.isObjectWithTextString=Mot;});var Efe=f(Hv=>{Object.defineProperty(Hv,"__esModule",{value:true});Hv.addSqlCommenterComment=void 0;var xU=(M(),A(H)),Iot=(G(),A(Ze));function xot(t){let e=t.indexOf("--");if(e>=0)return  true;if(t.indexOf("/*")<0)return  false;let n=t.indexOf("*/");return e<n}function Lot(t){return encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)}function Dot(t,e){if(typeof e!="string"||e.length===0||xot(e))return e;let r=new Iot.W3CTraceContextPropagator,n={};r.inject(xU.trace.setSpan(xU.ROOT_CONTEXT,t),n,xU.defaultTextMapSetter);let s=Object.keys(n).sort();if(s.length===0)return e;let a=s.map(o=>{let i=Lot(n[o]);return `${o}='${i}'`}).join(",");return `${e} /*${a}*/`}Hv.addSqlCommenterComment=Dot;});var Tfe=f(zd=>{Object.defineProperty(zd,"__esModule",{value:true});zd.PACKAGE_NAME=zd.PACKAGE_VERSION=void 0;zd.PACKAGE_VERSION="0.57.0";zd.PACKAGE_NAME="@opentelemetry/instrumentation-pg";});var vfe=f(jv=>{Object.defineProperty(jv,"__esModule",{value:true});jv.PgInstrumentation=void 0;var Gr=(Jr(),A(Qr)),it=(M(),A(H)),Sfe=ufe(),zt=mfe(),gfe=Efe(),yfe=Tfe(),Afe=MU(),Gv=(G(),A(Ze)),Ci=(ct(),A(Zt)),rm=bU();function Yd(t){return t[Symbol.toStringTag]==="Module"?t.default:t}var LU=class extends Gr.InstrumentationBase{_connectionsCounter={used:0,idle:0,pending:0};_semconvStability;constructor(e={}){super(yfe.PACKAGE_NAME,yfe.PACKAGE_VERSION,e),this._semconvStability=(0, Gr.semconvStabilityFromStr)("database",process.env.OTEL_SEMCONV_STABILITY_OPT_IN);}_updateMetricInstruments(){this._operationDuration=this.meter.createHistogram(Ci.METRIC_DB_CLIENT_OPERATION_DURATION,{description:"Duration of database client operations.",unit:"s",valueType:it.ValueType.DOUBLE,advice:{explicitBucketBoundaries:[.001,.005,.01,.05,.1,.5,1,5,10]}}),this._connectionsCounter={idle:0,pending:0,used:0},this._connectionsCount=this.meter.createUpDownCounter(rm.METRIC_DB_CLIENT_CONNECTION_COUNT,{description:"The number of connections that are currently in state described by the state attribute.",unit:"{connection}"}),this._connectionPendingRequests=this.meter.createUpDownCounter(rm.METRIC_DB_CLIENT_CONNECTION_PENDING_REQUESTS,{description:"The number of current pending requests for an open connection.",unit:"{connection}"});}init(){let e=[">=8.0.3 <9"],r=[">=2.0.0 <4"],n=new Gr.InstrumentationNodeModuleFile("pg/lib/native/client.js",e,this._patchPgClient.bind(this),this._unpatchPgClient.bind(this)),s=new Gr.InstrumentationNodeModuleFile("pg/lib/client.js",e,this._patchPgClient.bind(this),this._unpatchPgClient.bind(this)),a=new Gr.InstrumentationNodeModuleDefinition("pg",e,i=>{let c=Yd(i);return this._patchPgClient(c.Client),i},i=>{let c=Yd(i);return this._unpatchPgClient(c.Client),i},[s,n]),o=new Gr.InstrumentationNodeModuleDefinition("pg-pool",r,i=>{let c=Yd(i);return (0, Gr.isWrapped)(c.prototype.connect)&&this._unwrap(c.prototype,"connect"),this._wrap(c.prototype,"connect",this._getPoolConnectPatch()),c},i=>{let c=Yd(i);(0, Gr.isWrapped)(c.prototype.connect)&&this._unwrap(c.prototype,"connect");});return [a,o]}_patchPgClient(e){if(!e)return;let r=Yd(e);return (0, Gr.isWrapped)(r.prototype.query)&&this._unwrap(r.prototype,"query"),(0, Gr.isWrapped)(r.prototype.connect)&&this._unwrap(r.prototype,"connect"),this._wrap(r.prototype,"query",this._getClientQueryPatch()),this._wrap(r.prototype,"connect",this._getClientConnectPatch()),e}_unpatchPgClient(e){let r=Yd(e);return (0, Gr.isWrapped)(r.prototype.query)&&this._unwrap(r.prototype,"query"),(0, Gr.isWrapped)(r.prototype.connect)&&this._unwrap(r.prototype,"connect"),e}_getClientConnectPatch(){let e=this;return r=>function(s){if(zt.shouldSkipInstrumentation(e.getConfig()))return r.call(this,s);let a=e.tracer.startSpan(Afe.SpanNames.CONNECT,{kind:it.SpanKind.CLIENT,attributes:zt.getSemanticAttributesFromConnection(this,e._semconvStability)});if(s){let i=it.trace.getSpan(it.context.active());s=zt.patchClientConnectCallback(a,s),i&&(s=it.context.bind(it.context.active(),s));}let o=it.context.with(it.trace.setSpan(it.context.active(),a),()=>r.call(this,s));return Rfe(a,o)}}recordOperationDuration(e,r){let n={},s=[Ci.ATTR_DB_NAMESPACE,Ci.ATTR_ERROR_TYPE,Ci.ATTR_SERVER_PORT,Ci.ATTR_SERVER_ADDRESS,Ci.ATTR_DB_OPERATION_NAME];this._semconvStability&Gr.SemconvStability.OLD&&s.push(rm.ATTR_DB_SYSTEM),this._semconvStability&Gr.SemconvStability.STABLE&&s.push(Ci.ATTR_DB_SYSTEM_NAME),s.forEach(o=>{o in e&&(n[o]=e[o]);});let a=(0, Gv.hrTimeToMilliseconds)((0, Gv.hrTimeDuration)(r,(0, Gv.hrTime)()))/1e3;this._operationDuration.record(a,n);}_getClientQueryPatch(){let e=this;return r=>(this._diag.debug("Patching pg.Client.prototype.query"),function(...s){if(zt.shouldSkipInstrumentation(e.getConfig()))return r.apply(this,s);let a=(0, Gv.hrTime)(),o=s[0],i=typeof o=="string",c=zt.isObjectWithTextString(o),u=i?{text:o,values:Array.isArray(s[1])?s[1]:void 0}:c?o:void 0,l={[rm.ATTR_DB_SYSTEM]:rm.DB_SYSTEM_VALUE_POSTGRESQL,[Ci.ATTR_DB_NAMESPACE]:this.database,[Ci.ATTR_SERVER_PORT]:this.connectionParameters.port,[Ci.ATTR_SERVER_ADDRESS]:this.connectionParameters.host};u?.text&&(l[Ci.ATTR_DB_OPERATION_NAME]=zt.parseNormalizedOperationName(u?.text));let d=()=>{e.recordOperationDuration(l,a);},p=e.getConfig(),h=zt.handleConfigQuery.call(this,e.tracer,p,e._semconvStability,u);if(p.addSqlCommenterCommentToQueries&&(i?s[0]=(0, gfe.addSqlCommenterComment)(h,o):c&&!("name"in o)&&(s[0]={...o,text:(0, gfe.addSqlCommenterComment)(h,o.text)})),s.length>0){let y=it.trace.getSpan(it.context.active());if(typeof s[s.length-1]=="function")s[s.length-1]=zt.patchCallback(p,h,s[s.length-1],l,d),y&&(s[s.length-1]=it.context.bind(it.context.active(),s[s.length-1]));else if(typeof u?.callback=="function"){let R=zt.patchCallback(e.getConfig(),h,u.callback,l,d);y&&(R=it.context.bind(it.context.active(),R)),s[0].callback=R;}}let{requestHook:T}=p;typeof T=="function"&&u&&(0, Gr.safeExecuteInTheMiddle)(()=>{let{database:y,host:R,port:b,user:w}=this.connectionParameters;T(h,{connection:{database:y,host:R,port:b,user:w},query:{text:u.text,values:u.values,name:u.name}});},y=>{y&&e._diag.error("Error running query hook",y);},true);let g;try{g=r.apply(this,s);}catch(y){throw h.setStatus({code:it.SpanStatusCode.ERROR,message:zt.getErrorMessage(y)}),h.end(),y}return g instanceof Promise?g.then(y=>new Promise(R=>{zt.handleExecutionResult(e.getConfig(),h,y),d(),h.end(),R(y);})).catch(y=>new Promise((R,b)=>{h.setStatus({code:it.SpanStatusCode.ERROR,message:y.message}),d(),h.end(),b(y);})):g})}_setPoolConnectEventListeners(e){if(e[Sfe.EVENT_LISTENERS_SET])return;let r=zt.getPoolName(e.options);e.on("connect",()=>{this._connectionsCounter=zt.updateCounter(r,e,this._connectionsCount,this._connectionPendingRequests,this._connectionsCounter);}),e.on("acquire",()=>{this._connectionsCounter=zt.updateCounter(r,e,this._connectionsCount,this._connectionPendingRequests,this._connectionsCounter);}),e.on("remove",()=>{this._connectionsCounter=zt.updateCounter(r,e,this._connectionsCount,this._connectionPendingRequests,this._connectionsCounter);}),e.on("release",()=>{this._connectionsCounter=zt.updateCounter(r,e,this._connectionsCount,this._connectionPendingRequests,this._connectionsCounter);}),e[Sfe.EVENT_LISTENERS_SET]=true;}_getPoolConnectPatch(){let e=this;return r=>function(s){if(zt.shouldSkipInstrumentation(e.getConfig()))return r.call(this,s);let a=e.tracer.startSpan(Afe.SpanNames.POOL_CONNECT,{kind:it.SpanKind.CLIENT,attributes:zt.getSemanticAttributesFromPoolConnection(this.options,e._semconvStability)});if(e._setPoolConnectEventListeners(this),s){let i=it.trace.getSpan(it.context.active());s=zt.patchCallbackPGPool(a,s),i&&(s=it.context.bind(it.context.active(),s));}let o=it.context.with(it.trace.setSpan(it.context.active(),a),()=>r.call(this,s));return Rfe(a,o)}}};jv.PgInstrumentation=LU;function Rfe(t,e){if(!(e instanceof Promise))return e;let r=e;return it.context.bind(it.context.active(),r.then(n=>(t.end(),n)).catch(n=>(t.setStatus({code:it.SpanStatusCode.ERROR,message:zt.getErrorMessage(n)}),t.end(),Promise.reject(n))))}});var Ofe=f($d=>{Object.defineProperty($d,"__esModule",{value:true});$d.AttributeNames=$d.PgInstrumentation=void 0;var wot=vfe();Object.defineProperty($d,"PgInstrumentation",{enumerable:true,get:function(){return wot.PgInstrumentation}});var Uot=PU();Object.defineProperty($d,"AttributeNames",{enumerable:true,get:function(){return Uot.AttributeNames}});});var zv=f(Kd=>{Object.defineProperty(Kd,"__esModule",{value:true});Kd.PACKAGE_NAME=Kd.PACKAGE_VERSION=void 0;Kd.PACKAGE_VERSION="0.53.0";Kd.PACKAGE_NAME="@opentelemetry/instrumentation-redis";});var Nfe=f(oa=>{Object.defineProperty(oa,"__esModule",{value:true});oa.getTracedCreateStreamTrace=oa.getTracedCreateClient=oa.endSpan=void 0;var nm=(M(),A(H)),kot=(t,e)=>{e&&t.setStatus({code:nm.SpanStatusCode.ERROR,message:e.message}),t.end();};oa.endSpan=kot;var Vot=t=>function(){let r=t.apply(this,arguments);return nm.context.bind(nm.context.active(),r)};oa.getTracedCreateClient=Vot;var Bot=t=>function(){return Object.prototype.hasOwnProperty.call(this,"stream")||Object.defineProperty(this,"stream",{get(){return this._patched_redis_stream},set(r){nm.context.bind(nm.context.active(),r),this._patched_redis_stream=r;}}),t.apply(this,arguments)};oa.getTracedCreateStreamTrace=Bot;});var DU=f(Yv=>{Object.defineProperty(Yv,"__esModule",{value:true});Yv.defaultDbStatementSerializer=void 0;var Fot=[{regex:/^ECHO/i,args:0},{regex:/^(LPUSH|MSET|PFA|PUBLISH|RPUSH|SADD|SET|SPUBLISH|XADD|ZADD)/i,args:1},{regex:/^(HSET|HMSET|LSET|LINSERT)/i,args:2},{regex:/^(ACL|BIT|B[LRZ]|CLIENT|CLUSTER|CONFIG|COMMAND|DECR|DEL|EVAL|EX|FUNCTION|GEO|GET|HINCR|HMGET|HSCAN|INCR|L[TRLM]|MEMORY|P[EFISTU]|RPOP|S[CDIMORSU]|XACK|X[CDGILPRT]|Z[CDILMPRS])/i,args:-1}],qot=(t,e)=>{if(Array.isArray(e)&&e.length){let r=Fot.find(({regex:s})=>s.test(t))?.args??0,n=r>=0?e.slice(0,r):e;return e.length>n.length&&n.push(`[${e.length-r} other arguments]`),`${t} ${n.join(" ")}`}return t};Yv.defaultDbStatementSerializer=qot;});var Pfe=f(Kv=>{Object.defineProperty(Kv,"__esModule",{value:true});Kv.RedisInstrumentationV2_V3=void 0;var Cn=(Jr(),A(Qr)),$v=Nfe(),Cfe=zv(),im=(M(),A(H)),Pi=(ct(),A(Zt)),Hot=DU(),wU=class t extends Cn.InstrumentationBase{static COMPONENT="redis";_semconvStability;constructor(e={}){super(Cfe.PACKAGE_NAME,Cfe.PACKAGE_VERSION,e),this._semconvStability=e.semconvStability?e.semconvStability:(0, Cn.semconvStabilityFromStr)("database",process.env.OTEL_SEMCONV_STABILITY_OPT_IN);}setConfig(e={}){super.setConfig(e),this._semconvStability=e.semconvStability?e.semconvStability:(0, Cn.semconvStabilityFromStr)("database",process.env.OTEL_SEMCONV_STABILITY_OPT_IN);}init(){return [new Cn.InstrumentationNodeModuleDefinition("redis",[">=2.6.0 <4"],e=>((0, Cn.isWrapped)(e.RedisClient.prototype.internal_send_command)&&this._unwrap(e.RedisClient.prototype,"internal_send_command"),this._wrap(e.RedisClient.prototype,"internal_send_command",this._getPatchInternalSendCommand()),(0, Cn.isWrapped)(e.RedisClient.prototype.create_stream)&&this._unwrap(e.RedisClient.prototype,"create_stream"),this._wrap(e.RedisClient.prototype,"create_stream",this._getPatchCreateStream()),(0, Cn.isWrapped)(e.createClient)&&this._unwrap(e,"createClient"),this._wrap(e,"createClient",this._getPatchCreateClient()),e),e=>{e!==void 0&&(this._unwrap(e.RedisClient.prototype,"internal_send_command"),this._unwrap(e.RedisClient.prototype,"create_stream"),this._unwrap(e,"createClient"));})]}_getPatchInternalSendCommand(){let e=this;return function(n){return function(a){if(arguments.length!==1||typeof a!="object")return n.apply(this,arguments);let o=e.getConfig(),i=im.trace.getSpan(im.context.active())===void 0;if(o.requireParentSpan===true&&i)return n.apply(this,arguments);let c=o?.dbStatementSerializer||Hot.defaultDbStatementSerializer,u={};e._semconvStability&Cn.SemconvStability.OLD&&Object.assign(u,{[Pi.SEMATTRS_DB_SYSTEM]:Pi.DBSYSTEMVALUES_REDIS,[Pi.SEMATTRS_DB_STATEMENT]:c(a.command,a.args)}),e._semconvStability&Cn.SemconvStability.STABLE&&Object.assign(u,{[Pi.ATTR_DB_SYSTEM_NAME]:"redis",[Pi.ATTR_DB_OPERATION_NAME]:a.command,[Pi.ATTR_DB_QUERY_TEXT]:c(a.command,a.args)});let l=e.tracer.startSpan(`${t.COMPONENT}-${a.command}`,{kind:im.SpanKind.CLIENT,attributes:u});if(this.connection_options){let p={};e._semconvStability&Cn.SemconvStability.OLD&&Object.assign(p,{[Pi.SEMATTRS_NET_PEER_NAME]:this.connection_options.host,[Pi.SEMATTRS_NET_PEER_PORT]:this.connection_options.port}),e._semconvStability&Cn.SemconvStability.STABLE&&Object.assign(p,{[Pi.ATTR_SERVER_ADDRESS]:this.connection_options.host,[Pi.ATTR_SERVER_PORT]:this.connection_options.port}),l.setAttributes(p);}this.address&&e._semconvStability&Cn.SemconvStability.OLD&&l.setAttribute(Pi.SEMATTRS_DB_CONNECTION_STRING,`redis://${this.address}`);let d=arguments[0].callback;if(d){let p=im.context.active();arguments[0].callback=function(T,g){if(o?.responseHook){let y=o.responseHook;(0, Cn.safeExecuteInTheMiddle)(()=>{y(l,a.command,a.args,g);},R=>{R&&e._diag.error("Error executing responseHook",R);},true);}return (0, $v.endSpan)(l,T),im.context.with(p,d,this,...arguments)};}try{return n.apply(this,arguments)}catch(p){throw (0, $v.endSpan)(l,p),p}}}}_getPatchCreateClient(){return function(r){return (0, $v.getTracedCreateClient)(r)}}_getPatchCreateStream(){return function(r){return (0, $v.getTracedCreateStreamTrace)(r)}}};Kv.RedisInstrumentationV2_V3=wU;});var Mfe=f(Wv=>{Object.defineProperty(Wv,"__esModule",{value:true});Wv.getClientAttributes=void 0;var sa=(ct(),A(Zt)),bfe=(Jr(),A(Qr));function Got(t,e,r){let n={};return r&bfe.SemconvStability.OLD&&Object.assign(n,{[sa.SEMATTRS_DB_SYSTEM]:sa.DBSYSTEMVALUES_REDIS,[sa.SEMATTRS_NET_PEER_NAME]:e?.socket?.host,[sa.SEMATTRS_NET_PEER_PORT]:e?.socket?.port,[sa.SEMATTRS_DB_CONNECTION_STRING]:jot(t,e?.url)}),r&bfe.SemconvStability.STABLE&&Object.assign(n,{[sa.ATTR_DB_SYSTEM_NAME]:"redis",[sa.ATTR_SERVER_ADDRESS]:e?.socket?.host,[sa.ATTR_SERVER_PORT]:e?.socket?.port}),n}Wv.getClientAttributes=Got;function jot(t,e){if(!(typeof e!="string"||!e))try{let r=new URL(e);return r.searchParams.delete("user_pwd"),r.username="",r.password="",r.href}catch(r){t.error("failed to sanitize redis connection url",r);}}});var Dfe=f(Xv=>{Object.defineProperty(Xv,"__esModule",{value:true});Xv.RedisInstrumentationV4_V5=void 0;var ii=(M(),A(H)),Nt=(Jr(),A(Qr)),Ife=Mfe(),zot=DU(),xfe=zv(),UU=(ct(),A(Zt)),om=Symbol("opentelemetry.instrumentation.redis.open_spans"),Lfe=Symbol("opentelemetry.instrumentation.redis.multi_command_options"),kU=class t extends Nt.InstrumentationBase{static COMPONENT="redis";_semconvStability;constructor(e={}){super(xfe.PACKAGE_NAME,xfe.PACKAGE_VERSION,e),this._semconvStability=e.semconvStability?e.semconvStability:(0, Nt.semconvStabilityFromStr)("database",process.env.OTEL_SEMCONV_STABILITY_OPT_IN);}setConfig(e={}){super.setConfig(e),this._semconvStability=e.semconvStability?e.semconvStability:(0, Nt.semconvStabilityFromStr)("database",process.env.OTEL_SEMCONV_STABILITY_OPT_IN);}init(){return [this._getInstrumentationNodeModuleDefinition("@redis/client"),this._getInstrumentationNodeModuleDefinition("@node-redis/client")]}_getInstrumentationNodeModuleDefinition(e){let r=new Nt.InstrumentationNodeModuleFile(`${e}/dist/lib/commander.js`,["^1.0.0"],(a,o)=>{let i=a.transformCommandArguments;if(!i)return this._diag.error("internal instrumentation error, missing transformCommandArguments function"),a;let c=o?.startsWith("1.0.")?"extendWithCommands":"attachCommands";return (0, Nt.isWrapped)(a?.[c])&&this._unwrap(a,c),this._wrap(a,c,this._getPatchExtendWithCommands(i)),a},a=>{(0, Nt.isWrapped)(a?.extendWithCommands)&&this._unwrap(a,"extendWithCommands"),(0, Nt.isWrapped)(a?.attachCommands)&&this._unwrap(a,"attachCommands");}),n=new Nt.InstrumentationNodeModuleFile(`${e}/dist/lib/client/multi-command.js`,["^1.0.0","^5.0.0"],a=>{let o=a?.default?.prototype;return (0, Nt.isWrapped)(o?.exec)&&this._unwrap(o,"exec"),this._wrap(o,"exec",this._getPatchMultiCommandsExec()),(0, Nt.isWrapped)(o?.addCommand)&&this._unwrap(o,"addCommand"),this._wrap(o,"addCommand",this._getPatchMultiCommandsAddCommand()),a},a=>{let o=a?.default?.prototype;(0, Nt.isWrapped)(o?.exec)&&this._unwrap(o,"exec"),(0, Nt.isWrapped)(o?.addCommand)&&this._unwrap(o,"addCommand");}),s=new Nt.InstrumentationNodeModuleFile(`${e}/dist/lib/client/index.js`,["^1.0.0","^5.0.0"],a=>{let o=a?.default?.prototype;return o?.multi&&((0, Nt.isWrapped)(o?.multi)&&this._unwrap(o,"multi"),this._wrap(o,"multi",this._getPatchRedisClientMulti())),o?.MULTI&&((0, Nt.isWrapped)(o?.MULTI)&&this._unwrap(o,"MULTI"),this._wrap(o,"MULTI",this._getPatchRedisClientMulti())),(0, Nt.isWrapped)(o?.sendCommand)&&this._unwrap(o,"sendCommand"),this._wrap(o,"sendCommand",this._getPatchRedisClientSendCommand()),this._wrap(o,"connect",this._getPatchedClientConnect()),a},a=>{let o=a?.default?.prototype;(0, Nt.isWrapped)(o?.multi)&&this._unwrap(o,"multi"),(0, Nt.isWrapped)(o?.MULTI)&&this._unwrap(o,"MULTI"),(0, Nt.isWrapped)(o?.sendCommand)&&this._unwrap(o,"sendCommand");});return new Nt.InstrumentationNodeModuleDefinition(e,["^1.0.0","^5.0.0"],a=>a,()=>{},[r,n,s])}_getPatchExtendWithCommands(e){let r=this;return function(s){return function(o){if(o?.BaseClass?.name!=="RedisClient")return s.apply(this,arguments);let i=o.executor;return o.executor=function(c,u){let l=e(c,u).args;return r._traceClientCommand(i,this,arguments,l)},s.apply(this,arguments)}}}_getPatchMultiCommandsExec(){let e=this;return function(n){return function(){let a=n.apply(this,arguments);return typeof a?.then!="function"?(e._diag.error("got non promise result when patching RedisClientMultiCommand.exec"),a):a.then(o=>{let i=this[om];return e._endSpansWithRedisReplies(i,o),o}).catch(o=>{let i=this[om];if(!i)e._diag.error("cannot find open spans to end for redis multi command");else {let c=o.constructor.name==="MultiErrorReply"?o.replies:new Array(i.length).fill(o);e._endSpansWithRedisReplies(i,c);}return Promise.reject(o)})}}}_getPatchMultiCommandsAddCommand(){let e=this;return function(n){return function(a){return e._traceClientCommand(n,this,arguments,a)}}}_getPatchRedisClientMulti(){return function(r){return function(){let s=r.apply(this,arguments);return s[Lfe]=this.options,s}}}_getPatchRedisClientSendCommand(){let e=this;return function(n){return function(a){return e._traceClientCommand(n,this,arguments,a)}}}_getPatchedClientConnect(){let e=this;return function(n){return function(){let a=this.options,o=(0, Ife.getClientAttributes)(e._diag,a,e._semconvStability),i=e.tracer.startSpan(`${t.COMPONENT}-connect`,{kind:ii.SpanKind.CLIENT,attributes:o});return ii.context.with(ii.trace.setSpan(ii.context.active(),i),()=>n.apply(this)).then(u=>(i.end(),u)).catch(u=>(i.recordException(u),i.setStatus({code:ii.SpanStatusCode.ERROR,message:u.message}),i.end(),Promise.reject(u)))}}}_traceClientCommand(e,r,n,s){if(ii.trace.getSpan(ii.context.active())===void 0&&this.getConfig().requireParentSpan)return e.apply(r,n);let o=r.options||r[Lfe],i=s[0],c=s.slice(1),u=this.getConfig().dbStatementSerializer||zot.defaultDbStatementSerializer,l=(0, Ife.getClientAttributes)(this._diag,o,this._semconvStability);this._semconvStability&Nt.SemconvStability.STABLE&&(l[UU.ATTR_DB_OPERATION_NAME]=i);try{let h=u(i,c);h!=null&&(this._semconvStability&Nt.SemconvStability.OLD&&(l[UU.SEMATTRS_DB_STATEMENT]=h),this._semconvStability&Nt.SemconvStability.STABLE&&(l[UU.ATTR_DB_QUERY_TEXT]=h));}catch(h){this._diag.error("dbStatementSerializer throw an exception",h,{commandName:i});}let d=this.tracer.startSpan(`${t.COMPONENT}-${i}`,{kind:ii.SpanKind.CLIENT,attributes:l}),p=ii.context.with(ii.trace.setSpan(ii.context.active(),d),()=>e.apply(r,n));if(typeof p?.then=="function")p.then(h=>{this._endSpanWithResponse(d,i,c,h,void 0);},h=>{this._endSpanWithResponse(d,i,c,null,h);});else {let h=p;h[om]=h[om]||[],h[om].push({span:d,commandName:i,commandArgs:c});}return p}_endSpansWithRedisReplies(e,r){if(!e)return this._diag.error("cannot find open spans to end for redis multi command");if(r.length!==e.length)return this._diag.error("number of multi command spans does not match response from redis");for(let n=0;n<e.length;n++){let{span:s,commandName:a,commandArgs:o}=e[n],i=r[n],[c,u]=i instanceof Error?[null,i]:[i,void 0];this._endSpanWithResponse(s,a,o,c,u);}}_endSpanWithResponse(e,r,n,s,a){let{responseHook:o}=this.getConfig();if(!a&&o)try{o(e,r,n,s);}catch(i){this._diag.error("responseHook throw an exception",i);}a&&(e.recordException(a),e.setStatus({code:ii.SpanStatusCode.ERROR,message:a?.message})),e.end();}};Xv.RedisInstrumentationV4_V5=kU;});var kfe=f(Qv=>{Object.defineProperty(Qv,"__esModule",{value:true});Qv.RedisInstrumentation=void 0;var Yot=(Jr(),A(Qr)),wfe=zv(),$ot=Pfe(),Kot=Dfe(),Ufe={requireParentSpan:false},VU=class extends Yot.InstrumentationBase{instrumentationV2_V3;instrumentationV4_V5;initialized=false;constructor(e={}){let r={...Ufe,...e};super(wfe.PACKAGE_NAME,wfe.PACKAGE_VERSION,r),this.instrumentationV2_V3=new $ot.RedisInstrumentationV2_V3(this.getConfig()),this.instrumentationV4_V5=new Kot.RedisInstrumentationV4_V5(this.getConfig()),this.initialized=true;}setConfig(e={}){let r={...Ufe,...e};super.setConfig(r),this.initialized&&(this.instrumentationV2_V3.setConfig(r),this.instrumentationV4_V5.setConfig(r));}init(){}setTracerProvider(e){super.setTracerProvider(e),this.initialized&&(this.instrumentationV2_V3.setTracerProvider(e),this.instrumentationV4_V5.setTracerProvider(e));}enable(){super.enable(),this.initialized&&(this.instrumentationV2_V3.enable(),this.instrumentationV4_V5.enable());}disable(){super.disable(),this.initialized&&(this.instrumentationV2_V3.disable(),this.instrumentationV4_V5.disable());}};Qv.RedisInstrumentation=VU;});var Vfe=f(Jv=>{Object.defineProperty(Jv,"__esModule",{value:true});Jv.RedisInstrumentation=void 0;var Wot=kfe();Object.defineProperty(Jv,"RedisInstrumentation",{enumerable:true,get:function(){return Wot.RedisInstrumentation}});});var sm,Bfe,BU=E(()=>{sm=class{emit(e){}},Bfe=new sm;});var FU,Zv,qU=E(()=>{BU();FU=class{getLogger(e,r,n){return new sm}},Zv=new FU;});var eO,Ffe=E(()=>{BU();eO=class{constructor(e,r,n,s){this._provider=e,this.name=r,this.version=n,this.options=s;}emit(e){this._getLogger().emit(e);}_getLogger(){if(this._delegate)return this._delegate;let e=this._provider.getDelegateLogger(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):Bfe}};});var am,qfe=E(()=>{qU();Ffe();am=class{getLogger(e,r,n){var s;return (s=this.getDelegateLogger(e,r,n))!==null&&s!==void 0?s:new eO(this,e,r,n)}getDelegate(){var e;return (e=this._delegate)!==null&&e!==void 0?e:Zv}setDelegate(e){this._delegate=e;}getDelegateLogger(e,r,n){var s;return (s=this._delegate)===null||s===void 0?void 0:s.getLogger(e,r,n)}};});var tO,Hfe=E(()=>{tO=typeof globalThis=="object"?globalThis:global;});var Gfe=E(()=>{Hfe();});var jfe=E(()=>{Gfe();});function zfe(t,e,r){return n=>n===t?e:r}var cm,Wd,HU,Yfe=E(()=>{jfe();cm=Symbol.for("io.opentelemetry.js.api.logs"),Wd=tO;HU=1;});var rO,$fe=E(()=>{Yfe();qU();qfe();rO=class t{constructor(){this._proxyLoggerProvider=new am;}static getInstance(){return this._instance||(this._instance=new t),this._instance}setGlobalLoggerProvider(e){return Wd[cm]?this.getLoggerProvider():(Wd[cm]=zfe(HU,e,Zv),this._proxyLoggerProvider.setDelegate(e),e)}getLoggerProvider(){var e,r;return (r=(e=Wd[cm])===null||e===void 0?void 0:e.call(Wd,HU))!==null&&r!==void 0?r:this._proxyLoggerProvider}getLogger(e,r,n){return this.getLoggerProvider().getLogger(e,r,n)}disable(){delete Wd[cm],this._proxyLoggerProvider=new am;}};});var nO,GU=E(()=>{$fe();nO=rO.getInstance();});function Kfe(t,e,r,n){for(let s=0,a=t.length;s<a;s++){let o=t[s];e&&o.setTracerProvider(e),r&&o.setMeterProvider(r),n&&o.setLoggerProvider&&o.setLoggerProvider(n),o.getConfig().enabled||o.enable();}}function Wfe(t){t.forEach(e=>e.disable());}var Xfe=E(()=>{});function Qfe(t){let e=t.tracerProvider||ge.getTracerProvider(),r=t.meterProvider||Dr.getMeterProvider(),n=t.loggerProvider||nO.getLoggerProvider(),s=t.instrumentations?.flat()??[];return Kfe(s,e,r,n),()=>{Wfe(s);}}var Jfe=E(()=>{M();GU();Xfe();});function ihe(t,e,r){if(!Jot(t))return N.error(`Invalid version: ${t}`),false;if(!e)return  true;e=e.replace(/([<>=~^]+)\s+/g,"$1");let n=rst(t);if(!n)return  false;let s=[],a=ohe(n,e,s,r);return a&&!r?.includePrerelease?est(n,s):a}function Jot(t){return typeof t=="string"&&nhe.test(t)}function ohe(t,e,r,n){if(e.includes("||")){let s=e.trim().split("||");for(let a of s)if(jU(t,a,r,n))return  true;return  false}else if(e.includes(" - "))e=Rst(e,n);else if(e.includes(" ")){let s=e.trim().replace(/\s{2,}/g," ").split(" ");for(let a of s)if(!jU(t,a,r,n))return  false;return  true}return jU(t,e,r,n)}function jU(t,e,r,n){if(e=tst(e,n),e.includes(" "))return ohe(t,e,r,n);{let s=nst(e);return r.push(s),Zot(t,s)}}function Zot(t,e){if(e.invalid)return  false;if(!e.version||YU(e.version))return  true;let r=ehe(t.versionSegments||[],e.versionSegments||[]);if(r===0){let n=t.prereleaseSegments||[],s=e.prereleaseSegments||[];!n.length&&!s.length?r=0:!n.length&&s.length?r=1:n.length&&!s.length?r=-1:r=ehe(n,s);}return Qot[e.op]?.includes(r)}function est(t,e){return t.prerelease?e.some(r=>r.prerelease&&r.version===t.version):true}function tst(t,e){return t=t.trim(),t=yst(t,e),t=gst(t),t=Ast(t,e),t=t.trim(),t}function jr(t){return !t||t.toLowerCase()==="x"||t==="*"}function rst(t){let e=t.match(nhe);if(!e){N.error(`Invalid version: ${t}`);return}let r=e.groups.version,n=e.groups.prerelease,s=e.groups.build,a=r.split("."),o=n?.split(".");return {op:void 0,version:r,versionSegments:a,versionSegmentCount:a.length,prerelease:n,prereleaseSegments:o,prereleaseSegmentCount:o?o.length:0,build:s}}function nst(t){if(!t)return {};let e=t.match(Xot);if(!e)return N.error(`Invalid range: ${t}`),{invalid:true};let r=e.groups.op,n=e.groups.version,s=e.groups.prerelease,a=e.groups.build,o=n.split("."),i=s?.split(".");return r==="=="&&(r="="),{op:r||"=",version:n,versionSegments:o,versionSegmentCount:o.length,prerelease:s,prereleaseSegments:i,prereleaseSegmentCount:i?i.length:0,build:a}}function YU(t){return t==="*"||t==="x"||t==="X"}function Zfe(t){let e=parseInt(t,10);return isNaN(e)?t:e}function ist(t,e){if(typeof t==typeof e){if(typeof t=="number")return [t,e];if(typeof t=="string")return [t,e];throw new Error("Version segments can only be strings or numbers")}else return [String(t),String(e)]}function ost(t,e){if(YU(t)||YU(e))return 0;let[r,n]=ist(Zfe(t),Zfe(e));return r>n?1:r<n?-1:0}function ehe(t,e){for(let r=0;r<Math.max(t.length,e.length);r++){let n=ost(t[r]||"0",e[r]||"0");if(n!==0)return n}return 0}function gst(t){let e=mst;return t.replace(e,(r,n,s,a,o)=>{let i;return jr(n)?i="":jr(s)?i=`>=${n}.0.0 <${+n+1}.0.0-0`:jr(a)?i=`>=${n}.${s}.0 <${n}.${+s+1}.0-0`:o?i=`>=${n}.${s}.${a}-${o} <${n}.${+s+1}.0-0`:i=`>=${n}.${s}.${a} <${n}.${+s+1}.0-0`,i})}function yst(t,e){let r=Sst,n=e?.includePrerelease?"-0":"";return t.replace(r,(s,a,o,i,c)=>{let u;return jr(a)?u="":jr(o)?u=`>=${a}.0.0${n} <${+a+1}.0.0-0`:jr(i)?a==="0"?u=`>=${a}.${o}.0${n} <${a}.${+o+1}.0-0`:u=`>=${a}.${o}.0${n} <${+a+1}.0.0-0`:c?a==="0"?o==="0"?u=`>=${a}.${o}.${i}-${c} <${a}.${o}.${+i+1}-0`:u=`>=${a}.${o}.${i}-${c} <${a}.${+o+1}.0-0`:u=`>=${a}.${o}.${i}-${c} <${+a+1}.0.0-0`:a==="0"?o==="0"?u=`>=${a}.${o}.${i}${n} <${a}.${o}.${+i+1}-0`:u=`>=${a}.${o}.${i}${n} <${a}.${+o+1}.0-0`:u=`>=${a}.${o}.${i} <${+a+1}.0.0-0`,u})}function Ast(t,e){let r=dst;return t.replace(r,(n,s,a,o,i,c)=>{let u=jr(a),l=u||jr(o),d=l||jr(i),p=d;return s==="="&&p&&(s=""),c=e?.includePrerelease?"-0":"",u?s===">"||s==="<"?n="<0.0.0-0":n="*":s&&p?(l&&(o=0),i=0,s===">"?(s=">=",l?(a=+a+1,o=0,i=0):(o=+o+1,i=0)):s==="<="&&(s="<",l?a=+a+1:o=+o+1),s==="<"&&(c="-0"),n=`${s+a}.${o}.${i}${c}`):l?n=`>=${a}.0.0${c} <${+a+1}.0.0-0`:d&&(n=`>=${a}.${o}.0${c} <${a}.${+o+1}.0-0`),n})}function Rst(t,e){let r=fst;return t.replace(r,(n,s,a,o,i,c,u,l,d,p,h,T)=>(jr(a)?s="":jr(o)?s=`>=${a}.0.0${e?.includePrerelease?"-0":""}`:jr(i)?s=`>=${a}.${o}.0${e?.includePrerelease?"-0":""}`:c?s=`>=${s}`:s=`>=${s}${e?.includePrerelease?"-0":""}`,jr(d)?l="":jr(p)?l=`<${+d+1}.0.0-0`:jr(h)?l=`<${d}.${+p+1}.0-0`:T?l=`<=${d}.${p}.${h}-${T}`:e?.includePrerelease?l=`<${d}.${p}.${+h+1}-0`:l=`<=${l}`,`${s} ${l}`.trim()))}var nhe,Xot,Qot,she,ahe,sst,ast,the,cst,rhe,ust,zU,um,lst,dst,pst,fst,hst,_st,mst,Est,Tst,Sst,che=E(()=>{M();nhe=/^(?:v)?(?<version>(?<major>0|[1-9]\d*)\.(?<minor>0|[1-9]\d*)\.(?<patch>0|[1-9]\d*))(?:-(?<prerelease>(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+(?<build>[0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/,Xot=/^(?<op><|>|=|==|<=|>=|~|\^|~>)?\s*(?:v)?(?<version>(?<major>x|X|\*|0|[1-9]\d*)(?:\.(?<minor>x|X|\*|0|[1-9]\d*))?(?:\.(?<patch>x|X|\*|0|[1-9]\d*))?)(?:-(?<prerelease>(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+(?<build>[0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/,Qot={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1],"!=":[-1,1]};she="[a-zA-Z0-9-]",ahe="0|[1-9]\\d*",sst=`\\d*[a-zA-Z-]${she}*`,ast="((?:<|>)?=?)",the=`(?:${ahe}|${sst})`,cst=`(?:-(${the}(?:\\.${the})*))`,rhe=`${she}+`,ust=`(?:\\+(${rhe}(?:\\.${rhe})*))`,zU=`${ahe}|x|X|\\*`,um=`[v=\\s]*(${zU})(?:\\.(${zU})(?:\\.(${zU})(?:${cst})?${ust}?)?)?`,lst=`^${ast}\\s*${um}$`,dst=new RegExp(lst),pst=`^\\s*(${um})\\s+-\\s+(${um})\\s*$`,fst=new RegExp(pst),hst="(?:~>?)",_st=`^${hst}${um}$`,mst=new RegExp(_st),Est="(?:\\^)",Tst=`^${Est}${um}$`,Sst=new RegExp(Tst);});function lm(t,e,r){let n=!!t[e]&&Object.prototype.propertyIsEnumerable.call(t,e);Object.defineProperty(t,e,{configurable:true,enumerable:n,writable:true,value:r});}var zr,wc,$U,Xd,KU,WU=E(()=>{zr=console.error.bind(console);wc=(t,e,r)=>{if(!t||!t[e]){zr("no original function "+String(e)+" to wrap");return}if(!r){zr("no wrapper function"),zr(new Error().stack);return}let n=t[e];if(typeof n!="function"||typeof r!="function"){zr("original object and wrapper must be functions");return}let s=r(n,e);return lm(s,"__original",n),lm(s,"__unwrap",()=>{t[e]===s&&lm(t,e,n);}),lm(s,"__wrapped",true),lm(t,e,s),s},$U=(t,e,r)=>{if(t)Array.isArray(t)||(t=[t]);else {zr("must provide one or more modules to patch"),zr(new Error().stack);return}if(!(e&&Array.isArray(e))){zr("must provide one or more functions to wrap on modules");return}t.forEach(n=>{e.forEach(s=>{wc(n,s,r);});});},Xd=(t,e)=>{if(!t||!t[e]){zr("no function to unwrap."),zr(new Error().stack);return}let r=t[e];if(!r.__unwrap)zr("no original to unwrap to -- has "+String(e)+" already been unwrapped?");else {r.__unwrap();return}},KU=(t,e)=>{if(t)Array.isArray(t)||(t=[t]);else {zr("must provide one or more modules to patch"),zr(new Error().stack);return}if(!(e&&Array.isArray(e))){zr("must provide one or more functions to unwrap on modules");return}t.forEach(r=>{e.forEach(n=>{Xd(r,n);});});};});var iO,uhe=E(()=>{M();GU();WU();iO=class{instrumentationName;instrumentationVersion;_config={};_tracer;_meter;_logger;_diag;constructor(e,r,n){this.instrumentationName=e,this.instrumentationVersion=r,this.setConfig(n),this._diag=N.createComponentLogger({namespace:e}),this._tracer=ge.getTracer(e,r),this._meter=Dr.getMeter(e,r),this._logger=nO.getLogger(e,r),this._updateMetricInstruments();}_wrap=wc;_unwrap=Xd;_massWrap=$U;_massUnwrap=KU;get meter(){return this._meter}setMeterProvider(e){this._meter=e.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments();}get logger(){return this._logger}setLoggerProvider(e){this._logger=e.getLogger(this.instrumentationName,this.instrumentationVersion);}getModuleDefinitions(){let e=this.init()??[];return Array.isArray(e)?e:[e]}_updateMetricInstruments(){}getConfig(){return this._config}setConfig(e){this._config={enabled:true,...e};}setTracerProvider(e){this._tracer=e.getTracer(this.instrumentationName,this.instrumentationVersion);}get tracer(){return this._tracer}_runSpanCustomizationHook(e,r,n,s){if(e)try{e(n,s);}catch(a){this._diag.error("Error running span customization hook due to exception in handler",{triggerName:r},a);}}};});var pm,oO,sO,lhe=E(()=>{pm="/",oO=class{hooks=[];children=new Map},sO=class{_trie=new oO;_counter=0;insert(e){let r=this._trie;for(let n of e.moduleName.split(pm)){let s=r.children.get(n);s||(s=new oO,r.children.set(n,s)),r=s;}r.hooks.push({hook:e,insertedId:this._counter++});}search(e,{maintainInsertionOrder:r,fullOnly:n}={}){let s=this._trie,a=[],o=true;for(let i of e.split(pm)){let c=s.children.get(i);if(!c){o=false;break}n||a.push(...c.hooks),s=c;}return n&&o&&a.push(...s.hooks),a.length===0?[]:a.length===1?[a[0].hook]:(r&&a.sort((i,c)=>i.insertedId-c.insertedId),a.map(({hook:i})=>i))}};});function Nst(t){return Oo__namespace.sep!==pm?t.split(Oo__namespace.sep).join(pm):t}var dhe,Ost,aO,phe=E(()=>{dhe=Yr(Ia());lhe();Ost=["afterEach","after","beforeEach","before","describe","it"].every(t=>typeof global[t]=="function"),aO=class t{_moduleNameTrie=new sO;static _instance;constructor(){this._initialize();}_initialize(){new dhe.Hook(null,{internals:true},(e,r,n)=>{let s=Nst(r),a=this._moduleNameTrie.search(s,{maintainInsertionOrder:true,fullOnly:n===void 0});for(let{onRequire:o}of a)e=o(e,r,n);return e});}register(e,r){let n={moduleName:e,onRequire:r};return this._moduleNameTrie.insert(n),n}static getInstance(){return Ost?new t:this._instance=this._instance??new t}};});function fhe(t,e,r){let n,s;try{s=t();}catch(a){n=a;}finally{if(e(n,s),n&&!r)throw n;return s}}async function hhe(t,e,r){let n,s;try{s=await t();}catch(a){n=a;}finally{if(e(n,s),n&&!r)throw n;return s}}function cO(t){return typeof t=="function"&&typeof t.__original=="function"&&typeof t.__unwrap=="function"&&t.__wrapped===true}var QU=E(()=>{});function mhe(t,e,r){return typeof e>"u"?t.includes("*"):t.some(n=>ihe(e,n,{includePrerelease:r}))}var Ehe,The,Qd,She=E(()=>{che();WU();uhe();phe();Ehe=Yr(QT());M();The=Yr(Ia());QU();Qd=class extends iO{_modules;_hooks=[];_requireInTheMiddleSingleton=aO.getInstance();_enabled=false;constructor(e,r,n){super(e,r,n);let s=this.init();s&&!Array.isArray(s)&&(s=[s]),this._modules=s||[],this._config.enabled&&this.enable();}_wrap=(e,r,n)=>{if(cO(e[r])&&this._unwrap(e,r),p3.types.isProxy(e)){let s=wc(Object.assign({},e),r,n);return Object.defineProperty(e,r,{value:s}),s}else return wc(e,r,n)};_unwrap=(e,r)=>p3.types.isProxy(e)?Object.defineProperty(e,r,{value:e[r]}):Xd(e,r);_massWrap=(e,r,n)=>{if(e)Array.isArray(e)||(e=[e]);else {N.error("must provide one or more modules to patch");return}if(!(r&&Array.isArray(r))){N.error("must provide one or more functions to wrap on modules");return}e.forEach(s=>{r.forEach(a=>{this._wrap(s,a,n);});});};_massUnwrap=(e,r)=>{if(e)Array.isArray(e)||(e=[e]);else {N.error("must provide one or more modules to patch");return}if(!(r&&Array.isArray(r))){N.error("must provide one or more functions to wrap on modules");return}e.forEach(n=>{r.forEach(s=>{this._unwrap(n,s);});});};_warnOnPreloadedModules(){this._modules.forEach(e=>{let{name:r}=e;try{let n=P.resolve(r);P.cache[n]&&this._diag.warn(`Module ${r} has been loaded before ${this.instrumentationName} so it might not work, please initialize it before requiring ${r}`);}catch{}});}_extractPackageVersion(e){try{let r=fs$1.readFileSync(Oo__namespace.join(e,"package.json"),{encoding:"utf8"}),n=JSON.parse(r).version;return typeof n=="string"?n:void 0}catch{N.warn("Failed extracting version",e);}}_onRequire(e,r,n,s){if(!s)return typeof e.patch=="function"&&(e.moduleExports=r,this._enabled)?(this._diag.debug("Applying instrumentation patch for nodejs core module on require hook",{module:e.name}),e.patch(r)):r;let a=this._extractPackageVersion(s);if(e.moduleVersion=a,e.name===n)return mhe(e.supportedVersions,a,e.includePrerelease)&&typeof e.patch=="function"&&(e.moduleExports=r,this._enabled)?(this._diag.debug("Applying instrumentation patch for module on require hook",{module:e.name,version:e.moduleVersion,baseDir:s}),e.patch(r,e.moduleVersion)):r;let o=e.files??[],i=Oo__namespace.normalize(n);return o.filter(u=>u.name===i).filter(u=>mhe(u.supportedVersions,a,e.includePrerelease)).reduce((u,l)=>(l.moduleExports=u,this._enabled?(this._diag.debug("Applying instrumentation patch for nodejs module file on require hook",{module:e.name,version:e.moduleVersion,fileName:l.name,baseDir:s}),l.patch(u,e.moduleVersion)):u),r)}enable(){if(!this._enabled){if(this._enabled=true,this._hooks.length>0){for(let e of this._modules){typeof e.patch=="function"&&e.moduleExports&&(this._diag.debug("Applying instrumentation patch for nodejs module on instrumentation enabled",{module:e.name,version:e.moduleVersion}),e.patch(e.moduleExports,e.moduleVersion));for(let r of e.files)r.moduleExports&&(this._diag.debug("Applying instrumentation patch for nodejs module file on instrumentation enabled",{module:e.name,version:e.moduleVersion,fileName:r.name}),r.patch(r.moduleExports,e.moduleVersion));}return}this._warnOnPreloadedModules();for(let e of this._modules){let r=(o,i,c)=>{if(!c&&Oo__namespace.isAbsolute(i)){let u=Oo__namespace.parse(i);i=u.name,c=u.dir;}return this._onRequire(e,o,i,c)},n=(o,i,c)=>this._onRequire(e,o,i,c),s=Oo__namespace.isAbsolute(e.name)?new The.Hook([e.name],{internals:true},n):this._requireInTheMiddleSingleton.register(e.name,n);this._hooks.push(s);let a=new Ehe.Hook([e.name],{internals:false},r);this._hooks.push(a);}}}disable(){if(this._enabled){this._enabled=false;for(let e of this._modules){typeof e.unpatch=="function"&&e.moduleExports&&(this._diag.debug("Removing instrumentation patch for nodejs module on instrumentation disabled",{module:e.name,version:e.moduleVersion}),e.unpatch(e.moduleExports,e.moduleVersion));for(let r of e.files)r.moduleExports&&(this._diag.debug("Removing instrumentation patch for nodejs module file on instrumentation disabled",{module:e.name,version:e.moduleVersion,fileName:r.name}),r.unpatch(r.moduleExports,e.moduleVersion));}}}isEnabled(){return this._enabled}};});var ghe=E(()=>{});var yhe=E(()=>{She();ghe();});var JU=E(()=>{yhe();});var lO,Ahe=E(()=>{lO=class{name;supportedVersions;patch;unpatch;files;constructor(e,r,n,s,a){this.name=e,this.supportedVersions=r,this.patch=n,this.unpatch=s,this.files=a||[];}};});var dO,Rhe=E(()=>{JU();dO=class{supportedVersions;patch;unpatch;name;constructor(e,r,n,s){this.supportedVersions=r,this.patch=n,this.unpatch=s,this.name=Oo.normalize(e);}};});function vhe(t,e){let r=Uc.OLD,n=e?.split(",").map(s=>s.trim()).filter(s=>s!=="");for(let s of n??[])if(s.toLowerCase()===t+"/dup"){r=Uc.DUPLICATE;break}else s.toLowerCase()===t&&(r=Uc.STABLE);return r}var Uc,Ohe=E(()=>{(function(t){t[t.STABLE=1]="STABLE",t[t.OLD=2]="OLD",t[t.DUPLICATE=3]="DUPLICATE";})(Uc||(Uc={}));});var Nhe={};Ue(Nhe,{InstrumentationBase:()=>Qd,InstrumentationNodeModuleDefinition:()=>lO,InstrumentationNodeModuleFile:()=>dO,SemconvStability:()=>Uc,isWrapped:()=>cO,registerInstrumentations:()=>Qfe,safeExecuteInTheMiddle:()=>fhe,safeExecuteInTheMiddleAsync:()=>hhe,semconvStabilityFromStr:()=>vhe});var Che=E(()=>{Jfe();JU();Ahe();Rhe();QU();Ohe();});var Phe=f(pO=>{Object.defineProperty(pO,"__esModule",{value:true});pO.getClientAttributes=void 0;var fm=(ct(),A(Zt));function Pst(t,e){return {[fm.SEMATTRS_DB_SYSTEM]:fm.DBSYSTEMVALUES_REDIS,[fm.SEMATTRS_NET_PEER_NAME]:e?.socket?.host,[fm.SEMATTRS_NET_PEER_PORT]:e?.socket?.port,[fm.SEMATTRS_DB_CONNECTION_STRING]:bst(t,e?.url)}}pO.getClientAttributes=Pst;function bst(t,e){if(!(typeof e!="string"||!e))try{let r=new URL(e);return r.searchParams.delete("user_pwd"),r.username="",r.password="",r.href}catch(r){t.error("failed to sanitize redis connection url",r);}}});var bhe=f(fO=>{Object.defineProperty(fO,"__esModule",{value:true});fO.defaultDbStatementSerializer=void 0;var Mst=[{regex:/^ECHO/i,args:0},{regex:/^(LPUSH|MSET|PFA|PUBLISH|RPUSH|SADD|SET|SPUBLISH|XADD|ZADD)/i,args:1},{regex:/^(HSET|HMSET|LSET|LINSERT)/i,args:2},{regex:/^(ACL|BIT|B[LRZ]|CLIENT|CLUSTER|CONFIG|COMMAND|DECR|DEL|EVAL|EX|FUNCTION|GEO|GET|HINCR|HMGET|HSCAN|INCR|L[TRLM]|MEMORY|P[EFISTU]|RPOP|S[CDIMORSU]|XACK|X[CDGILPRT]|Z[CDILMPRS])/i,args:-1}],Ist=(t,e)=>{if(Array.isArray(e)&&e.length){let r=Mst.find(({regex:s})=>s.test(t))?.args??0,n=r>=0?e.slice(0,r):e;return e.length>n.length&&n.push(`[${e.length-r} other arguments]`),`${t} ${n.join(" ")}`}return t};fO.defaultDbStatementSerializer=Ist;});var Mhe=f(Jd=>{Object.defineProperty(Jd,"__esModule",{value:true});Jd.PACKAGE_NAME=Jd.PACKAGE_VERSION=void 0;Jd.PACKAGE_VERSION="0.49.0";Jd.PACKAGE_NAME="@opentelemetry/instrumentation-redis-4";});var whe=f(hO=>{Object.defineProperty(hO,"__esModule",{value:true});hO.RedisInstrumentation=void 0;var oi=(M(),A(H)),dr=(Che(),A(Nhe)),Ihe=Phe(),xst=bhe(),xhe=Mhe(),Lst=(ct(),A(Zt)),hm=Symbol("opentelemetry.instrumentation.redis.open_spans"),Lhe=Symbol("opentelemetry.instrumentation.redis.multi_command_options"),Dhe={requireParentSpan:false},ZU=class t extends dr.InstrumentationBase{static COMPONENT="redis";constructor(e={}){super(xhe.PACKAGE_NAME,xhe.PACKAGE_VERSION,{...Dhe,...e});}setConfig(e={}){super.setConfig({...Dhe,...e});}init(){return [this._getInstrumentationNodeModuleDefinition("@redis/client"),this._getInstrumentationNodeModuleDefinition("@node-redis/client")]}_getInstrumentationNodeModuleDefinition(e){let r=new dr.InstrumentationNodeModuleFile(`${e}/dist/lib/commander.js`,["^1.0.0"],(a,o)=>{let i=a.transformCommandArguments;if(!i)return this._diag.error("internal instrumentation error, missing transformCommandArguments function"),a;let c=o?.startsWith("1.0.")?"extendWithCommands":"attachCommands";return (0, dr.isWrapped)(a?.[c])&&this._unwrap(a,c),this._wrap(a,c,this._getPatchExtendWithCommands(i)),a},a=>{(0, dr.isWrapped)(a?.extendWithCommands)&&this._unwrap(a,"extendWithCommands"),(0, dr.isWrapped)(a?.attachCommands)&&this._unwrap(a,"attachCommands");}),n=new dr.InstrumentationNodeModuleFile(`${e}/dist/lib/client/multi-command.js`,["^1.0.0"],a=>{let o=a?.default?.prototype;return (0, dr.isWrapped)(o?.exec)&&this._unwrap(o,"exec"),this._wrap(o,"exec",this._getPatchMultiCommandsExec()),(0, dr.isWrapped)(o?.addCommand)&&this._unwrap(o,"addCommand"),this._wrap(o,"addCommand",this._getPatchMultiCommandsAddCommand()),a},a=>{let o=a?.default?.prototype;(0, dr.isWrapped)(o?.exec)&&this._unwrap(o,"exec"),(0, dr.isWrapped)(o?.addCommand)&&this._unwrap(o,"addCommand");}),s=new dr.InstrumentationNodeModuleFile(`${e}/dist/lib/client/index.js`,["^1.0.0"],a=>{let o=a?.default?.prototype;return o?.multi&&((0, dr.isWrapped)(o?.multi)&&this._unwrap(o,"multi"),this._wrap(o,"multi",this._getPatchRedisClientMulti())),o?.MULTI&&((0, dr.isWrapped)(o?.MULTI)&&this._unwrap(o,"MULTI"),this._wrap(o,"MULTI",this._getPatchRedisClientMulti())),(0, dr.isWrapped)(o?.sendCommand)&&this._unwrap(o,"sendCommand"),this._wrap(o,"sendCommand",this._getPatchRedisClientSendCommand()),this._wrap(o,"connect",this._getPatchedClientConnect()),a},a=>{let o=a?.default?.prototype;(0, dr.isWrapped)(o?.multi)&&this._unwrap(o,"multi"),(0, dr.isWrapped)(o?.MULTI)&&this._unwrap(o,"MULTI"),(0, dr.isWrapped)(o?.sendCommand)&&this._unwrap(o,"sendCommand");});return new dr.InstrumentationNodeModuleDefinition(e,["^1.0.0"],a=>a,()=>{},[r,n,s])}_getPatchExtendWithCommands(e){let r=this;return function(s){return function(o){if(o?.BaseClass?.name!=="RedisClient")return s.apply(this,arguments);let i=o.executor;return o.executor=function(c,u){let l=e(c,u).args;return r._traceClientCommand(i,this,arguments,l)},s.apply(this,arguments)}}}_getPatchMultiCommandsExec(){let e=this;return function(n){return function(){let a=n.apply(this,arguments);return typeof a?.then!="function"?(e._diag.error("got non promise result when patching RedisClientMultiCommand.exec"),a):a.then(o=>{let i=this[hm];return e._endSpansWithRedisReplies(i,o),o}).catch(o=>{let i=this[hm];if(!i)e._diag.error("cannot find open spans to end for redis multi command");else {let c=o.constructor.name==="MultiErrorReply"?o.replies:new Array(i.length).fill(o);e._endSpansWithRedisReplies(i,c);}return Promise.reject(o)})}}}_getPatchMultiCommandsAddCommand(){let e=this;return function(n){return function(a){return e._traceClientCommand(n,this,arguments,a)}}}_getPatchRedisClientMulti(){return function(r){return function(){let s=r.apply(this,arguments);return s[Lhe]=this.options,s}}}_getPatchRedisClientSendCommand(){let e=this;return function(n){return function(a){return e._traceClientCommand(n,this,arguments,a)}}}_getPatchedClientConnect(){let e=this;return function(n){return function(){let a=this.options,o=(0, Ihe.getClientAttributes)(e._diag,a),i=e.tracer.startSpan(`${t.COMPONENT}-connect`,{kind:oi.SpanKind.CLIENT,attributes:o});return oi.context.with(oi.trace.setSpan(oi.context.active(),i),()=>n.apply(this)).then(u=>(i.end(),u)).catch(u=>(i.recordException(u),i.setStatus({code:oi.SpanStatusCode.ERROR,message:u.message}),i.end(),Promise.reject(u)))}}}_traceClientCommand(e,r,n,s){if(oi.trace.getSpan(oi.context.active())===void 0&&this.getConfig().requireParentSpan)return e.apply(r,n);let o=r.options||r[Lhe],i=s[0],c=s.slice(1),u=this.getConfig().dbStatementSerializer||xst.defaultDbStatementSerializer,l=(0, Ihe.getClientAttributes)(this._diag,o);try{let h=u(i,c);h!=null&&(l[Lst.SEMATTRS_DB_STATEMENT]=h);}catch(h){this._diag.error("dbStatementSerializer throw an exception",h,{commandName:i});}let d=this.tracer.startSpan(`${t.COMPONENT}-${i}`,{kind:oi.SpanKind.CLIENT,attributes:l}),p=oi.context.with(oi.trace.setSpan(oi.context.active(),d),()=>e.apply(r,n));if(typeof p?.then=="function")p.then(h=>{this._endSpanWithResponse(d,i,c,h,void 0);},h=>{this._endSpanWithResponse(d,i,c,null,h);});else {let h=p;h[hm]=h[hm]||[],h[hm].push({span:d,commandName:i,commandArgs:c});}return p}_endSpansWithRedisReplies(e,r){if(!e)return this._diag.error("cannot find open spans to end for redis multi command");if(r.length!==e.length)return this._diag.error("number of multi command spans does not match response from redis");for(let n=0;n<e.length;n++){let{span:s,commandName:a,commandArgs:o}=e[n],i=r[n],[c,u]=i instanceof Error?[null,i]:[i,void 0];this._endSpanWithResponse(s,a,o,c,u);}}_endSpanWithResponse(e,r,n,s,a){let{responseHook:o}=this.getConfig();if(!a&&o)try{o(e,r,n,s);}catch(i){this._diag.error("responseHook throw an exception",i);}a&&(e.recordException(a),e.setStatus({code:oi.SpanStatusCode.ERROR,message:a?.message})),e.end();}};hO.RedisInstrumentation=ZU;});var Uhe=f(_O=>{Object.defineProperty(_O,"__esModule",{value:true});_O.RedisInstrumentation=void 0;var Dst=whe();Object.defineProperty(_O,"RedisInstrumentation",{enumerable:true,get:function(){return Dst.RedisInstrumentation}});});var khe=f(mO=>{Object.defineProperty(mO,"__esModule",{value:true});mO.AzureMonitorSpanProcessor=void 0;var wst=io(),e1=class{_metricHandler;constructor(e){this._metricHandler=e;}forceFlush(){return Promise.resolve()}onStart(e,r){this._metricHandler.markSpanAsProcessed(e);}onEnd(e){try{this._metricHandler.recordSpan(e);}catch(r){wst.Logger.getInstance().warn("Error while recording span",r);}}shutdown(){return Promise.resolve()}};mO.AzureMonitorSpanProcessor=e1;});var Vhe=f(TO=>{Object.defineProperty(TO,"__esModule",{value:true});TO.AzureFunctionsHook=void 0;var EO=(M(),A(H)),t1=io(),Ust=px(),r1=class{_functionsCoreModule;_preInvocationHook;constructor(){try{this._functionsCoreModule=(0,Ust.loadAzureFunctionCore)(),this._functionsCoreModule?this._addPreInvocationHook():t1.Logger.getInstance().debug("@azure/functions-core failed to load, not running in Azure Functions");}catch{t1.Logger.getInstance().debug("@azure/functions-core failed to load, not running in Azure Functions");}}shutdown(){this._preInvocationHook&&(this._preInvocationHook.dispose(),this._preInvocationHook=void 0),this._functionsCoreModule=void 0;}_addPreInvocationHook(){this._preInvocationHook||(this._preInvocationHook=this._functionsCoreModule.registerHook("preInvocation",async e=>{let n=e.invocationContext.traceContext,s=null;try{n&&(s=EO.propagation.extract(EO.context.active(),{traceparent:n.traceparent||n.traceParent,tracestate:n.tracestate||n.traceState}));let a=s||EO.context.active();e.functionCallback=EO.context.bind(a,e.functionCallback);}catch(a){t1.Logger.getInstance().error("Failed to propagate context in Azure Functions",a);}}));}};TO.AzureFunctionsHook=r1;});var Fhe=f(SO=>{Object.defineProperty(SO,"__esModule",{value:true});SO.ApplicationInsightsSampler=void 0;var kst=(M(),A(H)),Bhe=(di(),A(li)),Vst=Ho(),n1=class{_sampleRate;_samplingRatio;constructor(e=1){this._samplingRatio=e,(this._samplingRatio>1||this._samplingRatio<0||!Number.isFinite(this._samplingRatio))&&kst.diag.warn("Invalid sampling rate, sampling rate must be a value in the range [0,1]."),this._sampleRate=Math.round(this._samplingRatio*100);}shouldSample(e,r,n,s,a,o){let i=false;return this._sampleRate===100?i=true:this._sampleRate===0?i=false:i=this._getSamplingHashCode(r)<this._sampleRate,a=a||{},this._sampleRate!==100&&(a[Vst.AzureMonitorSampleRate]=this._sampleRate),i?{decision:Bhe.SamplingDecision.RECORD_AND_SAMPLED,attributes:a}:{decision:Bhe.SamplingDecision.RECORD,attributes:a}}toString(){return `ApplicationInsightsSampler{${this._samplingRatio}}`}_getSamplingHashCode(e){let s=5381;if(!e)return 0;for(;e.length<8;)e=e+e;for(let a=0;a<e.length;a++)s=((s<<5)+s|0)+e.charCodeAt(a)|0;return s=s<=-2147483648?2147483647:Math.abs(s),s/2147483647*100}};SO.ApplicationInsightsSampler=n1;});var Hhe=f(gO=>{Object.defineProperty(gO,"__esModule",{value:true});gO.TraceHandler=void 0;var Bst=Ope(),qhe=Dd(),Fst=(di(),A(li)),qst=Kpe(),Hst=tfe(),Gst=cfe(),jst=Ofe(),zst=Vfe(),Yst=Uhe(),$st=dc(),Kst=khe(),Wst=Vhe(),Xst=Fhe(),i1=class{_batchSpanProcessor;_azureSpanProcessor;_azureExporter;_instrumentations;_config;_metricHandler;_azureFunctionsHook;_sampler;constructor(e,r){this._config=e,this._metricHandler=r,this._instrumentations=[],this._config.tracesPerSecond&&this._config.tracesPerSecond>=0?this._sampler=new qhe.RateLimitedSampler(this._config.tracesPerSecond):this._sampler=new Xst.ApplicationInsightsSampler(this._config.samplingRatio),this._azureExporter=new qhe.AzureMonitorTraceExporter(this._config.azureMonitorExporterOptions);let n={maxExportBatchSize:512,scheduledDelayMillis:5e3,exportTimeoutMillis:3e4,maxQueueSize:2048};this._batchSpanProcessor=new Fst.BatchSpanProcessor(this._azureExporter,n),this._azureSpanProcessor=new Kst.AzureMonitorSpanProcessor(this._metricHandler),this._azureFunctionsHook=new Wst.AzureFunctionsHook,this._initializeInstrumentations();}getSampler(){return this._sampler}getBatchSpanProcessor(){return this._batchSpanProcessor}getAzureMonitorSpanProcessor(){return this._azureSpanProcessor}getInstrumentations(){return this._instrumentations}async shutdown(){this._azureFunctionsHook.shutdown();}_initializeInstrumentations(){if(this._config.instrumentationOptions.http?.enabled){let e=this._config.instrumentationOptions.http,r=e.ignoreOutgoingRequestHook,n=s=>{let a=(0, $st.ignoreOutgoingRequestHook)(s);return !a&&r?r(s):a};e.ignoreOutgoingRequestHook=n,this._instrumentations.push(new qst.HttpInstrumentation(this._config.instrumentationOptions.http));}this._config.instrumentationOptions.azureSdk?.enabled&&this._instrumentations.push((0, Bst.createAzureSdkInstrumentation)(this._config.instrumentationOptions.azureSdk)),this._config.instrumentationOptions.mongoDb?.enabled&&this._instrumentations.push(new Hst.MongoDBInstrumentation(this._config.instrumentationOptions.mongoDb)),this._config.instrumentationOptions.mySql?.enabled&&this._instrumentations.push(new Gst.MySQLInstrumentation(this._config.instrumentationOptions.mySql)),this._config.instrumentationOptions.postgreSql?.enabled&&this._instrumentations.push(new jst.PgInstrumentation(this._config.instrumentationOptions.postgreSql)),this._config.instrumentationOptions.redis?.enabled&&this._instrumentations.push(new zst.RedisInstrumentation(this._config.instrumentationOptions.redis)),this._config.instrumentationOptions.redis4?.enabled&&this._instrumentations.push(new Yst.RedisInstrumentation(this._config.instrumentationOptions.redis4));}};gO.TraceHandler=i1;});var o1=f(Zd=>{Object.defineProperty(Zd,"__esModule",{value:true});Zd.PACKAGE_NAME=Zd.PACKAGE_VERSION=void 0;Zd.PACKAGE_VERSION="0.50.0";Zd.PACKAGE_NAME="@opentelemetry/instrumentation-bunyan";});var c1=f(yO=>{Object.defineProperty(yO,"__esModule",{value:true});yO.OpenTelemetryBunyanStream=void 0;var ht=(In(),A(yo)),jhe=o1(),Qst=jhe.PACKAGE_NAME,Jst=jhe.PACKAGE_VERSION,zhe=10,Yhe=20,$he=30,Khe=40,Whe=50,Xhe=60,Ghe={trace:zhe,debug:Yhe,info:$he,warn:Khe,error:Whe,fatal:Xhe},Qhe={};Object.keys(Ghe).forEach(function(t){Qhe[Ghe[t]]=t;});var Zst={[zhe]:ht.SeverityNumber.TRACE,[Yhe]:ht.SeverityNumber.DEBUG,[$he]:ht.SeverityNumber.INFO,[Khe]:ht.SeverityNumber.WARN,[Whe]:ht.SeverityNumber.ERROR,[Xhe]:ht.SeverityNumber.FATAL},s1=[ht.SeverityNumber.TRACE2,ht.SeverityNumber.TRACE3,ht.SeverityNumber.TRACE4,ht.SeverityNumber.DEBUG2,ht.SeverityNumber.DEBUG3,ht.SeverityNumber.DEBUG4,ht.SeverityNumber.INFO2,ht.SeverityNumber.INFO3,ht.SeverityNumber.INFO4,ht.SeverityNumber.WARN2,ht.SeverityNumber.WARN3,ht.SeverityNumber.WARN4,ht.SeverityNumber.ERROR2,ht.SeverityNumber.ERROR3,ht.SeverityNumber.ERROR4,ht.SeverityNumber.FATAL2,ht.SeverityNumber.FATAL3,ht.SeverityNumber.FATAL4];function eat(t){let e=Zst[t];if(e!==void 0)return e;let r=(t-10)/60,n=Math.floor(r*s1.length),s=Math.min(s1.length-1,Math.max(0,n));return s1[s]}var a1=class{_otelLogger;constructor(){this._otelLogger=ht.logs.getLogger(Qst,Jst);}write(e){let{time:r,level:n,msg:s,v:a,hostname:o,pid:i,trace_id:c,span_id:u,trace_flags:l,...d}=e,p;typeof r.getTime=="function"?p=r.getTime():d.time=r;let h={timestamp:p,observedTimestamp:p,severityNumber:eat(n),severityText:Qhe[n],body:s,attributes:d};this._otelLogger.emit(h);}};yO.OpenTelemetryBunyanStream=a1;});var e_e=f(AO=>{Object.defineProperty(AO,"__esModule",{value:true});AO.BunyanInstrumentation=void 0;var tat=P("util"),u1=(M(),A(H)),l1=(Jr(),A(Qr)),Jhe=o1(),rat=c1(),ep=(In(),A(yo)),Zhe={disableLogSending:false,disableLogCorrelation:false},d1=class extends l1.InstrumentationBase{constructor(e={}){super(Jhe.PACKAGE_NAME,Jhe.PACKAGE_VERSION,{...Zhe,...e});}init(){return [new l1.InstrumentationNodeModuleDefinition("bunyan",[">=1.0.0 <2"],e=>{let r=this,n=e[Symbol.toStringTag]==="Module"?e.default:e;this._wrap(n.prototype,"_emit",this._getPatchedEmit());function s(...o){let i,c;return this instanceof s?(i=this,n.apply(this,o)):(i=n(...o),c=i),o[1]===void 0&&r._addStream(i),c}(0, tat.inherits)(s,n);let a=Object.assign(s,n);return this._wrap(a,"createLogger",this._getPatchedCreateLogger()),a})]}setConfig(e={}){super.setConfig({...Zhe,...e});}_getPatchedEmit(){return e=>{let r=this;return function(...s){let a=r.getConfig();if(!r.isEnabled()||a.disableLogCorrelation)return e.apply(this,s);let o=u1.trace.getSpan(u1.context.active());if(!o)return e.apply(this,s);let i=o.spanContext();if(!(0, u1.isSpanContextValid)(i))return e.apply(this,s);let c=s[0];return c.trace_id=i.traceId,c.span_id=i.spanId,c.trace_flags=`0${i.traceFlags.toString(16)}`,r._callHook(o,c),e.apply(this,s)}}}_getPatchedCreateLogger(){return e=>{let r=this;return function(...s){let a=e(...s);return r._addStream(a),a}}}_addStream(e){let r=this.getConfig();if(!this.isEnabled()||r.disableLogSending)return;this._diag.debug("Adding OpenTelemetryBunyanStream to logger");let n=e.level();r.logSeverity&&(n=nat(r.logSeverity)||n),e.addStream({type:"raw",stream:new rat.OpenTelemetryBunyanStream,level:n});}_callHook(e,r){let{logHook:n}=this.getConfig();typeof n=="function"&&(0, l1.safeExecuteInTheMiddle)(()=>n(e,r),s=>{s&&this._diag.error("error calling logHook",s);},true);}};AO.BunyanInstrumentation=d1;function nat(t){if(t>=ep.SeverityNumber.FATAL)return "fatal";if(t>=ep.SeverityNumber.ERROR)return "error";if(t>=ep.SeverityNumber.WARN)return "warn";if(t>=ep.SeverityNumber.INFO)return "info";if(t>=ep.SeverityNumber.DEBUG)return "debug";if(t>=ep.SeverityNumber.TRACE)return "trace"}});var t_e=f(tp=>{Object.defineProperty(tp,"__esModule",{value:true});tp.OpenTelemetryBunyanStream=tp.BunyanInstrumentation=void 0;var iat=e_e();Object.defineProperty(tp,"BunyanInstrumentation",{enumerable:true,get:function(){return iat.BunyanInstrumentation}});var oat=c1();Object.defineProperty(tp,"OpenTelemetryBunyanStream",{enumerable:true,get:function(){return oat.OpenTelemetryBunyanStream}});});var r_e=f(rp=>{Object.defineProperty(rp,"__esModule",{value:true});rp.PACKAGE_NAME=rp.PACKAGE_VERSION=void 0;rp.PACKAGE_VERSION="0.49.0";rp.PACKAGE_NAME="@opentelemetry/instrumentation-winston";});var i_e=f((jwt,n_e)=>{n_e.exports=P("util").deprecate;});var p1=f((zwt,o_e)=>{o_e.exports=P("stream");});var h1=f((Ywt,a_e)=>{function sat(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return n||s?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=true,process.nextTick(f1,this,t)):process.nextTick(f1,this,t)),this):(this._readableState&&(this._readableState.destroyed=true),this._writableState&&(this._writableState.destroyed=true),this._destroy(t||null,function(a){!e&&a?r._writableState?r._writableState.errorEmitted?process.nextTick(RO,r):(r._writableState.errorEmitted=true,process.nextTick(s_e,r,a)):process.nextTick(s_e,r,a):e?(process.nextTick(RO,r),e(a)):process.nextTick(RO,r);}),this)}function s_e(t,e){f1(t,e),RO(t);}function RO(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close");}function aat(){this._readableState&&(this._readableState.destroyed=false,this._readableState.reading=false,this._readableState.ended=false,this._readableState.endEmitted=false),this._writableState&&(this._writableState.destroyed=false,this._writableState.ended=false,this._writableState.ending=false,this._writableState.finalCalled=false,this._writableState.prefinished=false,this._writableState.finished=false,this._writableState.errorEmitted=false);}function f1(t,e){t.emit("error",e);}function cat(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e);}a_e.exports={destroy:sat,undestroy:aat,errorOrDestroy:cat};});var np=f(($wt,l_e)=>{var u_e={};function si(t,e,r){r||(r=Error);function n(a,o,i){return typeof e=="string"?e:e(a,o,i)}class s extends r{constructor(o,i,c){super(n(o,i,c));}}s.prototype.name=r.name,s.prototype.code=t,u_e[t]=s;}function c_e(t,e){if(Array.isArray(t)){let r=t.length;return t=t.map(n=>String(n)),r>2?`one of ${e} ${t.slice(0,r-1).join(", ")}, or `+t[r-1]:r===2?`one of ${e} ${t[0]} or ${t[1]}`:`of ${e} ${t[0]}`}else return `of ${e} ${String(t)}`}function uat(t,e,r){return t.substr(0,e.length)===e}function lat(t,e,r){return (r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function dat(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?false:t.indexOf(e,r)!==-1}si("ERR_INVALID_OPT_VALUE",function(t,e){return 'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);si("ERR_INVALID_ARG_TYPE",function(t,e,r){let n;typeof e=="string"&&uat(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";let s;if(lat(t," argument"))s=`The ${t} ${n} ${c_e(e,"type")}`;else {let a=dat(t,".")?"property":"argument";s=`The "${t}" ${a} ${n} ${c_e(e,"type")}`;}return s+=`. Received type ${typeof r}`,s},TypeError);si("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");si("ERR_METHOD_NOT_IMPLEMENTED",function(t){return "The "+t+" method is not implemented"});si("ERR_STREAM_PREMATURE_CLOSE","Premature close");si("ERR_STREAM_DESTROYED",function(t){return "Cannot call "+t+" after a stream was destroyed"});si("ERR_MULTIPLE_CALLBACK","Callback called multiple times");si("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");si("ERR_STREAM_WRITE_AFTER_END","write after end");si("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);si("ERR_UNKNOWN_ENCODING",function(t){return "Unknown encoding: "+t},TypeError);si("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");l_e.exports.codes=u_e;});var _1=f((Kwt,d_e)=>{var pat=np().codes.ERR_INVALID_OPT_VALUE;function fat(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function hat(t,e,r,n){var s=fat(e,n,r);if(s!=null){if(!(isFinite(s)&&Math.floor(s)===s)||s<0){var a=n?r:"highWaterMark";throw new pat(a,s)}return Math.floor(s)}return t.objectMode?16:16*1024}d_e.exports={getHighWaterMark:hat};});var p_e=f((Wwt,m1)=>{typeof Object.create=="function"?m1.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}}));}:m1.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e;}};});var vO=f((Xwt,T1)=>{try{if(E1=P("util"),typeof E1.inherits!="function")throw "";T1.exports=E1.inherits;}catch{T1.exports=p_e();}var E1;});var T_e=f((Qwt,E_e)=>{function f_e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n);}return r}function h_e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?f_e(Object(r),true).forEach(function(n){_at(t,n,r[n]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f_e(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n));});}return t}function _at(t,e,r){return e=m_e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true}):t[e]=r,t}function mat(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function __e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||false,n.configurable=true,"value"in n&&(n.writable=true),Object.defineProperty(t,m_e(n.key),n);}}function Eat(t,e,r){return e&&__e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:false}),t}function m_e(t){var e=Tat(t,"string");return typeof e=="symbol"?e:String(e)}function Tat(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return (String)(t)}var Sat=P("buffer"),OO=Sat.Buffer,gat=P("util"),S1=gat.inspect,yat=S1&&S1.custom||"inspect";function Aat(t,e,r){OO.prototype.copy.call(t,e,r);}E_e.exports=function(){function t(){mat(this,t),this.head=null,this.tail=null,this.length=0;}return Eat(t,[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length;}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length;}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0;}},{key:"join",value:function(r){if(this.length===0)return "";for(var n=this.head,s=""+n.data;n=n.next;)s+=r+n.data;return s}},{key:"concat",value:function(r){if(this.length===0)return OO.alloc(0);for(var n=OO.allocUnsafe(r>>>0),s=this.head,a=0;s;)Aat(s.data,n,a),a+=s.data.length,s=s.next;return n}},{key:"consume",value:function(r,n){var s;return r<this.head.data.length?(s=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?s=this.shift():s=n?this._getString(r):this._getBuffer(r),s}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,s=1,a=n.data;for(r-=a.length;n=n.next;){var o=n.data,i=r>o.length?o.length:r;if(i===o.length?a+=o:a+=o.slice(0,r),r-=i,r===0){i===o.length?(++s,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(i));break}++s;}return this.length-=s,a}},{key:"_getBuffer",value:function(r){var n=OO.allocUnsafe(r),s=this.head,a=1;for(s.data.copy(n),r-=s.data.length;s=s.next;){var o=s.data,i=r>o.length?o.length:r;if(o.copy(n,n.length-r,0,i),r-=i,r===0){i===o.length?(++a,s.next?this.head=s.next:this.head=this.tail=null):(this.head=s,s.data=o.slice(i));break}++a;}return this.length-=a,n}},{key:yat,value:function(r,n){return S1(this,h_e(h_e({},n),{},{depth:0,customInspect:false}))}}]),t}();});var y_e=f((g1,g_e)=>{var NO=P("buffer"),Eo=NO.Buffer;function S_e(t,e){for(var r in t)e[r]=t[r];}Eo.from&&Eo.alloc&&Eo.allocUnsafe&&Eo.allocUnsafeSlow?g_e.exports=NO:(S_e(NO,g1),g1.Buffer=kc);function kc(t,e,r){return Eo(t,e,r)}kc.prototype=Object.create(Eo.prototype);S_e(Eo,kc);kc.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Eo(t,e,r)};kc.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=Eo(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};kc.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Eo(t)};kc.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return NO.SlowBuffer(t)};});var R1=f(R_e=>{var A1=y_e().Buffer,A_e=A1.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return  true;default:return  false}};function Rat(t){if(!t)return "utf8";for(var e;;)switch(t){case "utf8":case "utf-8":return "utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return "utf16le";case "latin1":case "binary":return "latin1";case "base64":case "ascii":case "hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=true;}}function vat(t){var e=Rat(t);if(typeof e!="string"&&(A1.isEncoding===A_e||!A_e(t)))throw new Error("Unknown encoding: "+t);return e||t}R_e.StringDecoder=_m;function _m(t){this.encoding=vat(t);var e;switch(this.encoding){case "utf16le":this.text=Mat,this.end=Iat,e=4;break;case "utf8":this.fillLast=Cat,e=4;break;case "base64":this.text=xat,this.end=Lat,e=3;break;default:this.write=Dat,this.end=wat;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=A1.allocUnsafe(e);}_m.prototype.write=function(t){if(t.length===0)return "";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return "";r=this.lastNeed,this.lastNeed=0;}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};_m.prototype.end=bat;_m.prototype.text=Pat;_m.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length;};function y1(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function Oat(t,e,r){var n=e.length-1;if(n<r)return 0;var s=y1(e[n]);return s>=0?(s>0&&(t.lastNeed=s-1),s):--n<r||s===-2?0:(s=y1(e[n]),s>=0?(s>0&&(t.lastNeed=s-2),s):--n<r||s===-2?0:(s=y1(e[n]),s>=0?(s>0&&(s===2?s=0:t.lastNeed=s-3),s):0))}function Nat(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function Cat(t){var e=this.lastTotal-this.lastNeed,r=Nat(this,t);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length;}function Pat(t,e){var r=Oat(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function bat(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function Mat(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function Iat(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function xat(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function Lat(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function Dat(t){return t.toString(this.encoding)}function wat(t){return t&&t.length?this.write(t):""}});var C_e=f((Zwt,N_e)=>{var v_e=np().codes.ERR_STREAM_PREMATURE_CLOSE;function Uat(t){var e=false;return function(){if(!e){e=true;for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];t.apply(this,n);}}}function kat(){}function Vat(t){return t.setHeader&&typeof t.abort=="function"}function O_e(t,e,r){if(typeof e=="function")return O_e(t,null,e);e||(e={}),r=Uat(r||kat);var n=e.readable||e.readable!==false&&t.readable,s=e.writable||e.writable!==false&&t.writable,a=function(){t.writable||i();},o=t._writableState&&t._writableState.finished,i=function(){s=false,o=true,n||r.call(t);},c=t._readableState&&t._readableState.endEmitted,u=function(){n=false,c=true,s||r.call(t);},l=function(T){r.call(t,T);},d=function(){var T;if(n&&!c)return (!t._readableState||!t._readableState.ended)&&(T=new v_e),r.call(t,T);if(s&&!o)return (!t._writableState||!t._writableState.ended)&&(T=new v_e),r.call(t,T)},p=function(){t.req.on("finish",i);};return Vat(t)?(t.on("complete",i),t.on("abort",d),t.req?p():t.on("request",p)):s&&!t._writableState&&(t.on("end",a),t.on("close",a)),t.on("end",u),t.on("finish",i),e.error!==false&&t.on("error",l),t.on("close",d),function(){t.removeListener("complete",i),t.removeListener("abort",d),t.removeListener("request",p),t.req&&t.req.removeListener("finish",i),t.removeListener("end",a),t.removeListener("close",a),t.removeListener("finish",i),t.removeListener("end",u),t.removeListener("error",l),t.removeListener("close",d);}}N_e.exports=O_e;});var b_e=f((eUt,P_e)=>{var CO;function aa(t,e,r){return e=Bat(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true}):t[e]=r,t}function Bat(t){var e=Fat(t,"string");return typeof e=="symbol"?e:String(e)}function Fat(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return (e==="string"?String:Number)(t)}var qat=C_e(),ca=Symbol("lastResolve"),Vc=Symbol("lastReject"),mm=Symbol("error"),PO=Symbol("ended"),Bc=Symbol("lastPromise"),v1=Symbol("handlePromise"),Fc=Symbol("stream");function ua(t,e){return {value:t,done:e}}function Hat(t){var e=t[ca];if(e!==null){var r=t[Fc].read();r!==null&&(t[Bc]=null,t[ca]=null,t[Vc]=null,e(ua(r,false)));}}function Gat(t){process.nextTick(Hat,t);}function jat(t,e){return function(r,n){t.then(function(){if(e[PO]){r(ua(void 0,true));return}e[v1](r,n);},n);}}var zat=Object.getPrototypeOf(function(){}),Yat=Object.setPrototypeOf((CO={get stream(){return this[Fc]},next:function(){var e=this,r=this[mm];if(r!==null)return Promise.reject(r);if(this[PO])return Promise.resolve(ua(void 0,true));if(this[Fc].destroyed)return new Promise(function(o,i){process.nextTick(function(){e[mm]?i(e[mm]):o(ua(void 0,true));});});var n=this[Bc],s;if(n)s=new Promise(jat(n,this));else {var a=this[Fc].read();if(a!==null)return Promise.resolve(ua(a,false));s=new Promise(this[v1]);}return this[Bc]=s,s}},aa(CO,Symbol.asyncIterator,function(){return this}),aa(CO,"return",function(){var e=this;return new Promise(function(r,n){e[Fc].destroy(null,function(s){if(s){n(s);return}r(ua(void 0,true));});})}),CO),zat),$at=function(e){var r,n=Object.create(Yat,(r={},aa(r,Fc,{value:e,writable:true}),aa(r,ca,{value:null,writable:true}),aa(r,Vc,{value:null,writable:true}),aa(r,mm,{value:null,writable:true}),aa(r,PO,{value:e._readableState.endEmitted,writable:true}),aa(r,v1,{value:function(a,o){var i=n[Fc].read();i?(n[Bc]=null,n[ca]=null,n[Vc]=null,a(ua(i,false))):(n[ca]=a,n[Vc]=o);},writable:true}),r));return n[Bc]=null,qat(e,function(s){if(s&&s.code!=="ERR_STREAM_PREMATURE_CLOSE"){var a=n[Vc];a!==null&&(n[Bc]=null,n[ca]=null,n[Vc]=null,a(s)),n[mm]=s;return}var o=n[ca];o!==null&&(n[Bc]=null,n[ca]=null,n[Vc]=null,o(ua(void 0,true))),n[PO]=true;}),e.on("readable",Gat.bind(null,n)),n};P_e.exports=$at;});var L_e=f((tUt,x_e)=>{function M_e(t,e,r,n,s,a,o){try{var i=t[a](o),c=i.value;}catch(u){r(u);return}i.done?e(c):Promise.resolve(c).then(n,s);}function Kat(t){return function(){var e=this,r=arguments;return new Promise(function(n,s){var a=t.apply(e,r);function o(c){M_e(a,n,s,o,i,"next",c);}function i(c){M_e(a,n,s,o,i,"throw",c);}o(void 0);})}}function I_e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n);}return r}function Wat(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?I_e(Object(r),true).forEach(function(n){Xat(t,n,r[n]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):I_e(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n));});}return t}function Xat(t,e,r){return e=Qat(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true}):t[e]=r,t}function Qat(t){var e=Jat(t,"string");return typeof e=="symbol"?e:String(e)}function Jat(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return (e==="string"?String:Number)(t)}var Zat=np().codes.ERR_INVALID_ARG_TYPE;function ect(t,e,r){var n;if(e&&typeof e.next=="function")n=e;else if(e&&e[Symbol.asyncIterator])n=e[Symbol.asyncIterator]();else if(e&&e[Symbol.iterator])n=e[Symbol.iterator]();else throw new Zat("iterable",["Iterable"],e);var s=new t(Wat({objectMode:true},r)),a=false;s._read=function(){a||(a=true,o());};function o(){return i.apply(this,arguments)}function i(){return i=Kat(function*(){try{var c=yield n.next(),u=c.value,l=c.done;l?s.push(null):s.push(yield u)?o():a=!1;}catch(d){s.destroy(d);}}),i.apply(this,arguments)}return s}x_e.exports=ect;});var j_e=f((nUt,G_e)=>{G_e.exports=He;var ip;He.ReadableState=k_e;P("events").EventEmitter;var U_e=function(e,r){return e.listeners(r).length},Tm=p1(),bO=P("buffer").Buffer,tct=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function rct(t){return bO.from(t)}function nct(t){return bO.isBuffer(t)||t instanceof tct}var O1=P("util"),Oe;O1&&O1.debuglog?Oe=O1.debuglog("stream"):Oe=function(){};var ict=T_e(),x1=h1(),oct=_1(),sct=oct.getHighWaterMark,MO=np().codes,act=MO.ERR_INVALID_ARG_TYPE,cct=MO.ERR_STREAM_PUSH_AFTER_EOF,uct=MO.ERR_METHOD_NOT_IMPLEMENTED,lct=MO.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,op,N1,C1;vO()(He,Tm);var Em=x1.errorOrDestroy,P1=["error","close","destroy","pause","resume"];function dct(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]];}function k_e(t,e,r){ip=ip||Sm(),t=t||{},typeof r!="boolean"&&(r=e instanceof ip),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=sct(this,t,"readableHighWaterMark",r),this.buffer=new ict,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=false,this.endEmitted=false,this.reading=false,this.sync=true,this.needReadable=false,this.emittedReadable=false,this.readableListening=false,this.resumeScheduled=false,this.paused=true,this.emitClose=t.emitClose!==false,this.autoDestroy=!!t.autoDestroy,this.destroyed=false,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=false,this.decoder=null,this.encoding=null,t.encoding&&(op||(op=R1().StringDecoder),this.decoder=new op(t.encoding),this.encoding=t.encoding);}function He(t){if(ip=ip||Sm(),!(this instanceof He))return new He(t);var e=this instanceof ip;this._readableState=new k_e(t,this,e),this.readable=true,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),Tm.call(this);}Object.defineProperty(He.prototype,"destroyed",{enumerable:false,get:function(){return this._readableState===void 0?false:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e);}});He.prototype.destroy=x1.destroy;He.prototype._undestroy=x1.undestroy;He.prototype._destroy=function(t,e){e(t);};He.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=true:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=bO.from(t,e),e=""),n=true),V_e(this,t,e,false,n)};He.prototype.unshift=function(t){return V_e(this,t,null,true,false)};function V_e(t,e,r,n,s){Oe("readableAddChunk",e);var a=t._readableState;if(e===null)a.reading=false,hct(t,a);else {var o;if(s||(o=pct(a,e)),o)Em(t,o);else if(a.objectMode||e&&e.length>0)if(typeof e!="string"&&!a.objectMode&&Object.getPrototypeOf(e)!==bO.prototype&&(e=rct(e)),n)a.endEmitted?Em(t,new lct):b1(t,a,e,true);else if(a.ended)Em(t,new cct);else {if(a.destroyed)return  false;a.reading=false,a.decoder&&!r?(e=a.decoder.write(e),a.objectMode||e.length!==0?b1(t,a,e,false):I1(t,a)):b1(t,a,e,false);}else n||(a.reading=false,I1(t,a));}return !a.ended&&(a.length<a.highWaterMark||a.length===0)}function b1(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&IO(t)),I1(t,e);}function pct(t,e){var r;return !nct(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new act("chunk",["string","Buffer","Uint8Array"],e)),r}He.prototype.isPaused=function(){return this._readableState.flowing===false};He.prototype.setEncoding=function(t){op||(op=R1().StringDecoder);var e=new op(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var D_e=1073741824;function fct(t){return t>=D_e?t=D_e:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function w_e(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=fct(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=true,0))}He.prototype.read=function(t){Oe("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=false),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return Oe("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?M1(this):IO(this),null;if(t=w_e(t,e),t===0&&e.ended)return e.length===0&&M1(this),null;var n=e.needReadable;Oe("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=true,Oe("length less than watermark",n)),e.ended||e.reading?(n=false,Oe("reading or ended",n)):n&&(Oe("do read"),e.reading=true,e.sync=true,e.length===0&&(e.needReadable=true),this._read(e.highWaterMark),e.sync=false,e.reading||(t=w_e(r,e)));var s;return t>0?s=q_e(t,e):s=null,s===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=true),r!==t&&e.ended&&M1(this)),s!==null&&this.emit("data",s),s};function hct(t,e){if(Oe("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length);}e.ended=true,e.sync?IO(t):(e.needReadable=false,e.emittedReadable||(e.emittedReadable=true,B_e(t)));}}function IO(t){var e=t._readableState;Oe("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=false,e.emittedReadable||(Oe("emitReadable",e.flowing),e.emittedReadable=true,process.nextTick(B_e,t));}function B_e(t){var e=t._readableState;Oe("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=false),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,L1(t);}function I1(t,e){e.readingMore||(e.readingMore=true,process.nextTick(_ct,t,e));}function _ct(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(Oe("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=false;}He.prototype._read=function(t){Em(this,new uct("_read()"));};He.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,Oe("pipe count=%d opts=%j",n.pipesCount,e);var s=(!e||e.end!==false)&&t!==process.stdout&&t!==process.stderr,a=s?i:g;n.endEmitted?process.nextTick(a):r.once("end",a),t.on("unpipe",o);function o(y,R){Oe("onunpipe"),y===r&&R&&R.hasUnpiped===false&&(R.hasUnpiped=true,l());}function i(){Oe("onend"),t.end();}var c=mct(r);t.on("drain",c);var u=false;function l(){Oe("cleanup"),t.removeListener("close",h),t.removeListener("finish",T),t.removeListener("drain",c),t.removeListener("error",p),t.removeListener("unpipe",o),r.removeListener("end",i),r.removeListener("end",g),r.removeListener("data",d),u=true,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&c();}r.on("data",d);function d(y){Oe("ondata");var R=t.write(y);Oe("dest.write",R),R===false&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&H_e(n.pipes,t)!==-1)&&!u&&(Oe("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause());}function p(y){Oe("onerror",y),g(),t.removeListener("error",p),U_e(t,"error")===0&&Em(t,y);}dct(t,"error",p);function h(){t.removeListener("finish",T),g();}t.once("close",h);function T(){Oe("onfinish"),t.removeListener("close",h),g();}t.once("finish",T);function g(){Oe("unpipe"),r.unpipe(t);}return t.emit("pipe",r),n.flowing||(Oe("pipe resume"),r.resume()),t};function mct(t){return function(){var r=t._readableState;Oe("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&U_e(t,"data")&&(r.flowing=true,L1(t));}}He.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:false};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=false,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,s=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=false;for(var a=0;a<s;a++)n[a].emit("unpipe",this,{hasUnpiped:false});return this}var o=H_e(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};He.prototype.on=function(t,e){var r=Tm.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==false&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=true,n.flowing=false,n.emittedReadable=false,Oe("on readable",n.length,n.reading),n.length?IO(this):n.reading||process.nextTick(Ect,this)),r};He.prototype.addListener=He.prototype.on;He.prototype.removeListener=function(t,e){var r=Tm.prototype.removeListener.call(this,t,e);return t==="readable"&&process.nextTick(F_e,this),r};He.prototype.removeAllListeners=function(t){var e=Tm.prototype.removeAllListeners.apply(this,arguments);return (t==="readable"||t===void 0)&&process.nextTick(F_e,this),e};function F_e(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=true:t.listenerCount("data")>0&&t.resume();}function Ect(t){Oe("readable nexttick read 0"),t.read(0);}He.prototype.resume=function(){var t=this._readableState;return t.flowing||(Oe("resume"),t.flowing=!t.readableListening,Tct(this,t)),t.paused=false,this};function Tct(t,e){e.resumeScheduled||(e.resumeScheduled=true,process.nextTick(Sct,t,e));}function Sct(t,e){Oe("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=false,t.emit("resume"),L1(t),e.flowing&&!e.reading&&t.read(0);}He.prototype.pause=function(){return Oe("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==false&&(Oe("pause"),this._readableState.flowing=false,this.emit("pause")),this._readableState.paused=true,this};function L1(t){var e=t._readableState;for(Oe("flow",e.flowing);e.flowing&&t.read()!==null;);}He.prototype.wrap=function(t){var e=this,r=this._readableState,n=false;t.on("end",function(){if(Oe("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&e.push(o);}e.push(null);}),t.on("data",function(o){if(Oe("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var i=e.push(o);i||(n=true,t.pause());}});for(var s in t)this[s]===void 0&&typeof t[s]=="function"&&(this[s]=function(i){return function(){return t[i].apply(t,arguments)}}(s));for(var a=0;a<P1.length;a++)t.on(P1[a],this.emit.bind(this,P1[a]));return this._read=function(o){Oe("wrapped _read",o),n&&(n=false,t.resume());},this};typeof Symbol=="function"&&(He.prototype[Symbol.asyncIterator]=function(){return N1===void 0&&(N1=b_e()),N1(this)});Object.defineProperty(He.prototype,"readableHighWaterMark",{enumerable:false,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(He.prototype,"readableBuffer",{enumerable:false,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(He.prototype,"readableFlowing",{enumerable:false,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e);}});He._fromList=q_e;Object.defineProperty(He.prototype,"readableLength",{enumerable:false,get:function(){return this._readableState.length}});function q_e(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function M1(t){var e=t._readableState;Oe("endReadable",e.endEmitted),e.endEmitted||(e.ended=true,process.nextTick(gct,e,t));}function gct(t,e){if(Oe("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=true,e.readable=false,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy();}}typeof Symbol=="function"&&(He.from=function(t,e){return C1===void 0&&(C1=L_e()),C1(He,t,e)});function H_e(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return  -1}});var Sm=f((iUt,Y_e)=>{var yct=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};Y_e.exports=To;var z_e=j_e(),w1=U1();vO()(To,z_e);for(D1=yct(w1.prototype),xO=0;xO<D1.length;xO++)LO=D1[xO],To.prototype[LO]||(To.prototype[LO]=w1.prototype[LO]);var D1,LO,xO;function To(t){if(!(this instanceof To))return new To(t);z_e.call(this,t),w1.call(this,t),this.allowHalfOpen=true,t&&(t.readable===false&&(this.readable=false),t.writable===false&&(this.writable=false),t.allowHalfOpen===false&&(this.allowHalfOpen=false,this.once("end",Act)));}Object.defineProperty(To.prototype,"writableHighWaterMark",{enumerable:false,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(To.prototype,"writableBuffer",{enumerable:false,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(To.prototype,"writableLength",{enumerable:false,get:function(){return this._writableState.length}});function Act(){this._writableState.ended||process.nextTick(Rct,this);}function Rct(t){t.end();}Object.defineProperty(To.prototype,"destroyed",{enumerable:false,get:function(){return this._readableState===void 0||this._writableState===void 0?false:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e);}});});var U1=f((oUt,J_e)=>{J_e.exports=bt;function K_e(t){var e=this;this.next=null,this.entry=null,this.finish=function(){Xct(e,t);};}var sp;bt.WritableState=ym;var vct={deprecate:i_e()},W_e=p1(),wO=P("buffer").Buffer,Oct=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function Nct(t){return wO.from(t)}function Cct(t){return wO.isBuffer(t)||t instanceof Oct}var V1=h1(),Pct=_1(),bct=Pct.getHighWaterMark,la=np().codes,Mct=la.ERR_INVALID_ARG_TYPE,Ict=la.ERR_METHOD_NOT_IMPLEMENTED,xct=la.ERR_MULTIPLE_CALLBACK,Lct=la.ERR_STREAM_CANNOT_PIPE,Dct=la.ERR_STREAM_DESTROYED,wct=la.ERR_STREAM_NULL_VALUES,Uct=la.ERR_STREAM_WRITE_AFTER_END,kct=la.ERR_UNKNOWN_ENCODING,ap=V1.errorOrDestroy;vO()(bt,W_e);function Vct(){}function ym(t,e,r){sp=sp||Sm(),t=t||{},typeof r!="boolean"&&(r=e instanceof sp),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=bct(this,t,"writableHighWaterMark",r),this.finalCalled=false,this.needDrain=false,this.ending=false,this.ended=false,this.finished=false,this.destroyed=false;var n=t.decodeStrings===false;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=false,this.corked=0,this.sync=true,this.bufferProcessing=false,this.onwrite=function(s){zct(e,s);},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=false,this.errorEmitted=false,this.emitClose=t.emitClose!==false,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new K_e(this);}ym.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(ym.prototype,"buffer",{get:vct.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")});}catch{}})();var DO;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(DO=Function.prototype[Symbol.hasInstance],Object.defineProperty(bt,Symbol.hasInstance,{value:function(e){return DO.call(this,e)?true:this!==bt?false:e&&e._writableState instanceof ym}})):DO=function(e){return e instanceof this};function bt(t){sp=sp||Sm();var e=this instanceof sp;if(!e&&!DO.call(bt,this))return new bt(t);this._writableState=new ym(t,this,e),this.writable=true,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),W_e.call(this);}bt.prototype.pipe=function(){ap(this,new Lct);};function Bct(t,e){var r=new Uct;ap(t,r),process.nextTick(e,r);}function Fct(t,e,r,n){var s;return r===null?s=new wct:typeof r!="string"&&!e.objectMode&&(s=new Mct("chunk",["string","Buffer"],r)),s?(ap(t,s),process.nextTick(n,s),false):true}bt.prototype.write=function(t,e,r){var n=this._writableState,s=false,a=!n.objectMode&&Cct(t);return a&&!wO.isBuffer(t)&&(t=Nct(t)),typeof e=="function"&&(r=e,e=null),a?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=Vct),n.ending?Bct(this,r):(a||Fct(this,n,t,r))&&(n.pendingcb++,s=Hct(this,n,a,t,e,r)),s};bt.prototype.cork=function(){this._writableState.corked++;};bt.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&X_e(this,t));};bt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new kct(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(bt.prototype,"writableBuffer",{enumerable:false,get:function(){return this._writableState&&this._writableState.getBuffer()}});function qct(t,e,r){return !t.objectMode&&t.decodeStrings!==false&&typeof e=="string"&&(e=wO.from(e,r)),e}Object.defineProperty(bt.prototype,"writableHighWaterMark",{enumerable:false,get:function(){return this._writableState.highWaterMark}});function Hct(t,e,r,n,s,a){if(!r){var o=qct(e,n,s);n!==o&&(r=true,s="buffer",n=o);}var i=e.objectMode?1:n.length;e.length+=i;var c=e.length<e.highWaterMark;if(c||(e.needDrain=true),e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:s,isBuf:r,callback:a,next:null},u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1;}else k1(t,e,false,i,n,s,a);return c}function k1(t,e,r,n,s,a,o){e.writelen=n,e.writecb=o,e.writing=true,e.sync=true,e.destroyed?e.onwrite(new Dct("write")):r?t._writev(s,e.onwrite):t._write(s,a,e.onwrite),e.sync=false;}function Gct(t,e,r,n,s){--e.pendingcb,r?(process.nextTick(s,n),process.nextTick(gm,t,e),t._writableState.errorEmitted=true,ap(t,n)):(s(n),t._writableState.errorEmitted=true,ap(t,n),gm(t,e));}function jct(t){t.writing=false,t.writecb=null,t.length-=t.writelen,t.writelen=0;}function zct(t,e){var r=t._writableState,n=r.sync,s=r.writecb;if(typeof s!="function")throw new xct;if(jct(r),e)Gct(t,r,n,e,s);else {var a=Q_e(r)||t.destroyed;!a&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&X_e(t,r),n?process.nextTick($_e,t,r,a,s):$_e(t,r,a,s);}}function $_e(t,e,r,n){r||Yct(t,e),e.pendingcb--,n(),gm(t,e);}function Yct(t,e){e.length===0&&e.needDrain&&(e.needDrain=false,t.emit("drain"));}function X_e(t,e){e.bufferProcessing=true;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,s=new Array(n),a=e.corkedRequestsFree;a.entry=r;for(var o=0,i=true;r;)s[o]=r,r.isBuf||(i=false),r=r.next,o+=1;s.allBuffers=i,k1(t,e,true,e.length,s,"",a.finish),e.pendingcb++,e.lastBufferedRequest=null,a.next?(e.corkedRequestsFree=a.next,a.next=null):e.corkedRequestsFree=new K_e(e),e.bufferedRequestCount=0;}else {for(;r;){var c=r.chunk,u=r.encoding,l=r.callback,d=e.objectMode?1:c.length;if(k1(t,e,false,d,c,u,l),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null);}e.bufferedRequest=r,e.bufferProcessing=false;}bt.prototype._write=function(t,e,r){r(new Ict("_write()"));};bt.prototype._writev=null;bt.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||Wct(this,n,r),this};Object.defineProperty(bt.prototype,"writableLength",{enumerable:false,get:function(){return this._writableState.length}});function Q_e(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function $ct(t,e){t._final(function(r){e.pendingcb--,r&&ap(t,r),e.prefinished=true,t.emit("prefinish"),gm(t,e);});}function Kct(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=true,process.nextTick($ct,t,e)):(e.prefinished=true,t.emit("prefinish")));}function gm(t,e){var r=Q_e(e);if(r&&(Kct(t,e),e.pendingcb===0&&(e.finished=true,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy();}return r}function Wct(t,e,r){e.ending=true,gm(t,e),r&&(e.finished?process.nextTick(r):t.once("finish",r)),e.ended=true,t.writable=false;}function Xct(t,e,r){var n=t.entry;for(t.entry=null;n;){var s=n.callback;e.pendingcb--,s(r),n=n.next;}e.corkedRequestsFree.next=t;}Object.defineProperty(bt.prototype,"destroyed",{enumerable:false,get:function(){return this._writableState===void 0?false:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e);}});bt.prototype.destroy=V1.destroy;bt.prototype._undestroy=V1.undestroy;bt.prototype._destroy=function(t,e){e(t);};});var Z_e=f(B1=>{B1.levels={error:0,warn:1,help:2,data:3,info:4,debug:5,prompt:6,verbose:7,input:8,silly:9};B1.colors={error:"red",warn:"yellow",help:"cyan",data:"grey",info:"green",debug:"blue",prompt:"grey",verbose:"cyan",input:"grey",silly:"magenta"};});var eme=f(F1=>{F1.levels={error:0,warn:1,info:2,http:3,verbose:4,debug:5,silly:6};F1.colors={error:"red",warn:"yellow",info:"green",http:"green",verbose:"cyan",debug:"blue",silly:"magenta"};});var tme=f(q1=>{q1.levels={emerg:0,alert:1,crit:2,error:3,warning:4,notice:5,info:6,debug:7};q1.colors={emerg:"red",alert:"yellow",crit:"red",error:"red",warning:"red",notice:"yellow",info:"green",debug:"blue"};});var rme=f(UO=>{Object.defineProperty(UO,"cli",{value:Z_e()});Object.defineProperty(UO,"npm",{value:eme()});Object.defineProperty(UO,"syslog",{value:tme()});});var H1=f(Am=>{Object.defineProperty(Am,"LEVEL",{value:Symbol.for("level")});Object.defineProperty(Am,"MESSAGE",{value:Symbol.for("message")});Object.defineProperty(Am,"SPLAT",{value:Symbol.for("splat")});Object.defineProperty(Am,"configs",{value:rme()});});var G1=f((dUt,ome)=>{var Qct=P("util"),nme=U1(),{LEVEL:ime}=H1(),Rm=ome.exports=function(e={}){nme.call(this,{objectMode:true,highWaterMark:e.highWaterMark}),this.format=e.format,this.level=e.level,this.handleExceptions=e.handleExceptions,this.handleRejections=e.handleRejections,this.silent=e.silent,e.log&&(this.log=e.log),e.logv&&(this.logv=e.logv),e.close&&(this.close=e.close),this.once("pipe",r=>{this.levels=r.levels,this.parent=r;}),this.once("unpipe",r=>{r===this.parent&&(this.parent=null,this.close&&this.close());});};Qct.inherits(Rm,nme);Rm.prototype._write=function(e,r,n){if(this.silent||e.exception===true&&!this.handleExceptions)return n(null);let s=this.level||this.parent&&this.parent.level;if(!s||this.levels[s]>=this.levels[e[ime]]){if(e&&!this.format)return this.log(e,n);let a,o;try{o=this.format.transform(Object.assign({},e),this.format.options);}catch(i){a=i;}if(a||!o){if(n(),a)throw a;return}return this.log(o,n)}return this._writableState.sync=false,n(null)};Rm.prototype._writev=function(e,r){if(this.logv){let n=e.filter(this._accept,this);return n.length?this.logv(n,r):r(null)}for(let n=0;n<e.length;n++){if(!this._accept(e[n]))continue;if(e[n].chunk&&!this.format){this.log(e[n].chunk,e[n].callback);continue}let s,a;try{a=this.format.transform(Object.assign({},e[n].chunk),this.format.options);}catch(o){s=o;}if(s||!a){if(e[n].callback(),s)throw r(null),s}else this.log(a,e[n].callback);}return r(null)};Rm.prototype._accept=function(e){let r=e.chunk;if(this.silent)return  false;let n=this.level||this.parent&&this.parent.level;return !!((r.exception===true||!n||this.levels[n]>=this.levels[r[ime]])&&(this.handleExceptions||r.exception!==true))};Rm.prototype._nop=function(){};});var cme=f((pUt,ame)=>{var Jct=P("util"),{LEVEL:j1}=H1(),sme=G1(),vm=ame.exports=function(e={}){if(sme.call(this,e),!e.transport||typeof e.transport.log!="function")throw new Error("Invalid transport, must be an object with a log method.");this.transport=e.transport,this.level=this.level||e.transport.level,this.handleExceptions=this.handleExceptions||e.transport.handleExceptions,this._deprecated();function r(n){this.emit("error",n,this.transport);}this.transport.__winstonError||(this.transport.__winstonError=r.bind(this),this.transport.on("error",this.transport.__winstonError));};Jct.inherits(vm,sme);vm.prototype._write=function(e,r,n){if(this.silent||e.exception===true&&!this.handleExceptions)return n(null);(!this.level||this.levels[this.level]>=this.levels[e[j1]])&&this.transport.log(e[j1],e.message,e,this._nop),n(null);};vm.prototype._writev=function(e,r){for(let n=0;n<e.length;n++)this._accept(e[n])&&(this.transport.log(e[n].chunk[j1],e[n].chunk.message,e[n].chunk,this._nop),e[n].callback());return r(null)};vm.prototype._deprecated=function(){console.error([`${this.transport.name} is a legacy winston transport. Consider upgrading: `,"- Upgrade docs: https://github.com/winstonjs/winston/blob/master/UPGRADE-3.0.md"].join(`
`));};vm.prototype.close=function(){this.transport.close&&this.transport.close(),this.transport.__winstonError&&(this.transport.removeListener("error",this.transport.__winstonError),this.transport.__winstonError=null);};});var ume=f((fUt,z1)=>{z1.exports=G1();z1.exports.LegacyTransportStream=cme();});var lme=f(cp=>{Object.defineProperty(cp,"__esModule",{value:true});cp.PACKAGE_NAME=cp.PACKAGE_VERSION=void 0;cp.PACKAGE_VERSION="0.15.0";cp.PACKAGE_NAME="@opentelemetry/winston-transport";});var dme=f(kO=>{Object.defineProperty(kO,"__esModule",{value:true});kO.emitLogRecord=void 0;var _t=(In(),A(yo)),Zct={error:_t.SeverityNumber.ERROR,warn:_t.SeverityNumber.WARN,info:_t.SeverityNumber.INFO,http:_t.SeverityNumber.DEBUG3,verbose:_t.SeverityNumber.DEBUG2,debug:_t.SeverityNumber.DEBUG,silly:_t.SeverityNumber.TRACE},eut={emerg:_t.SeverityNumber.FATAL3,alert:_t.SeverityNumber.FATAL2,crit:_t.SeverityNumber.FATAL,error:_t.SeverityNumber.ERROR,warning:_t.SeverityNumber.WARN,notice:_t.SeverityNumber.INFO2,info:_t.SeverityNumber.INFO,debug:_t.SeverityNumber.DEBUG},tut={error:_t.SeverityNumber.ERROR,warn:_t.SeverityNumber.WARN,help:_t.SeverityNumber.INFO3,data:_t.SeverityNumber.INFO2,info:_t.SeverityNumber.INFO,debug:_t.SeverityNumber.DEBUG,prompt:_t.SeverityNumber.TRACE4,verbose:_t.SeverityNumber.TRACE3,input:_t.SeverityNumber.TRACE2,silly:_t.SeverityNumber.TRACE};function rut(t){return Zct[t]??eut[t]??tut[t]}function nut(t,e){let{message:r,level:n,...s}=t,a={},o=t[Symbol.for("level")];for(let c in s)Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);let i={severityNumber:rut(o),severityText:o,body:r,attributes:a};e.emit(i);}kO.emitLogRecord=nut;});var fme=f(VO=>{Object.defineProperty(VO,"__esModule",{value:true});VO.OpenTelemetryTransportV3=void 0;var iut=(In(),A(yo)),out=ume(),pme=lme(),sut=dme(),Y1=class extends out{_logger;constructor(e){super(e),this._logger=iut.logs.getLogger(pme.PACKAGE_NAME,pme.PACKAGE_VERSION);}log(e,r){try{(0,sut.emitLogRecord)(e,this._logger);}catch(n){this.emit("warn",n);}this.emit("logged",e),r&&r();}};VO.OpenTelemetryTransportV3=Y1;});var hme=f(BO=>{Object.defineProperty(BO,"__esModule",{value:true});BO.OpenTelemetryTransportV3=void 0;var aut=fme();Object.defineProperty(BO,"OpenTelemetryTransportV3",{enumerable:true,get:function(){return aut.OpenTelemetryTransportV3}});});var Tme=f(FO=>{Object.defineProperty(FO,"__esModule",{value:true});FO.WinstonInstrumentation=void 0;var $1=(M(),A(H)),mt=(In(),A(yo)),Zo=(Jr(),A(Qr)),_me=r_e(),mme=[">=3 <4"],Eme=[">=1 <3"],K1=class extends Zo.InstrumentationBase{constructor(e={}){super(_me.PACKAGE_NAME,_me.PACKAGE_VERSION,e);}init(){let e=new Zo.InstrumentationNodeModuleDefinition("winston",mme,n=>n,()=>{},[new Zo.InstrumentationNodeModuleFile("winston/lib/winston/logger.js",mme,n=>((0, Zo.isWrapped)(n.prototype.write)&&this._unwrap(n.prototype,"write"),this._wrap(n.prototype,"write",this._getPatchedWrite()),(0, Zo.isWrapped)(n.prototype.configure)&&this._unwrap(n.prototype,"configure"),this._wrap(n.prototype,"configure",this._getPatchedConfigure()),n),n=>{n!==void 0&&(this._unwrap(n.prototype,"write"),this._unwrap(n.prototype,"configure"));})]),r=new Zo.InstrumentationNodeModuleDefinition("winston",Eme,n=>n,()=>{},[new Zo.InstrumentationNodeModuleFile("winston/lib/winston/logger.js",Eme,n=>{let s=n.Logger.prototype;return (0, Zo.isWrapped)(s.log)&&this._unwrap(s,"log"),this._wrap(s,"log",this._getPatchedLog()),n},n=>{n!==void 0&&this._unwrap(n.Logger.prototype,"log");})]);return [e,r]}_callHook(e,r){let{logHook:n}=this.getConfig();n&&(0, Zo.safeExecuteInTheMiddle)(()=>n(e,r),s=>{s&&this._diag.error("error calling logHook",s);},true);}_getPatchedWrite(){return e=>{let r=this;return function(...s){let a=s[0];return r._handleLogCorrelation(a),e.apply(this,s)}}}_getPatchedLog(){return e=>{let r=this;return function(...s){let a={};r._handleLogCorrelation(a);let o=false;for(let i=s.length-1;i>=0;i--)if(typeof s[i]=="object"){s[i]=Object.assign(s[i],a),o=true;break}if(!o){let i=typeof s[s.length-1]=="function"?s.length-1:s.length;s.splice(i,0,a);}return e.apply(this,s)}}}_getPatchedConfigure(){return e=>{let r=this;return function(...s){let a=r.getConfig();if(!a.disableLogSending&&s&&s.length>0)try{let{OpenTelemetryTransportV3:o}=hme(),i=s[0].transports,c=Array.isArray(i)?i:[],u={};a.logSeverity&&(u={level:r._winstonLevelFromSeverity(a.logSeverity,s[0].levels)});let l=new o(u);i&&!Array.isArray(i)&&(c=[i]),c.push(l),s[0].transports=c;}catch{r._diag.warn("@opentelemetry/winston-transport is not available, log records will not be automatically sent.");}return e.apply(this,s)}}}_handleLogCorrelation(e){if(!this.getConfig().disableLogCorrelation){let r=$1.trace.getSpan($1.context.active());if(r){let n=r.spanContext();if((0, $1.isSpanContextValid)(n)){let s={trace_id:n.traceId,span_id:n.spanId,trace_flags:`0${n.traceFlags.toString(16)}`},a=Object.assign(e,s);return this._callHook(r,a),a}}}return e}_winstonLevelFromSeverity(e,r){if(r){if(s(r)){if(e>=mt.SeverityNumber.ERROR)return "error";if(e>=mt.SeverityNumber.WARN)return "warn";if(e>=mt.SeverityNumber.INFO)return "info";if(e>=mt.SeverityNumber.DEBUG3)return "http";if(e>=mt.SeverityNumber.DEBUG2)return "verbose";if(e>=mt.SeverityNumber.DEBUG)return "debug";if(e>=mt.SeverityNumber.TRACE)return "silly"}else if(n(r)){if(e>=mt.SeverityNumber.ERROR)return "error";if(e>=mt.SeverityNumber.WARN)return "warn";if(e>=mt.SeverityNumber.INFO3)return "help";if(e>=mt.SeverityNumber.INFO2)return "data";if(e>=mt.SeverityNumber.INFO)return "info";if(e>=mt.SeverityNumber.DEBUG)return "debug";if(e>=mt.SeverityNumber.TRACE4)return "prompt";if(e>=mt.SeverityNumber.TRACE3)return "verbose";if(e>=mt.SeverityNumber.TRACE2)return "input";if(e>=mt.SeverityNumber.TRACE)return "silly"}else if(a(r)){if(e>=mt.SeverityNumber.FATAL2)return "emerg";if(e>=mt.SeverityNumber.FATAL)return "alert";if(e>=mt.SeverityNumber.ERROR2)return "crit";if(e>=mt.SeverityNumber.ERROR)return "error";if(e>=mt.SeverityNumber.WARN)return "warning";if(e>=mt.SeverityNumber.INFO2)return "notice";if(e>=mt.SeverityNumber.INFO)return "info";if(e>=mt.SeverityNumber.TRACE)return "debug"}this._diag.warn("failed to configure severity with existing winston levels");}function n(o){return o&&o.error!==void 0&&o.warn&&o.help&&o.data&&o.info&&o.debug&&o.prompt&&o.verbose&&o.input&&o.silly}function s(o){return o&&o.error!==void 0&&o.warn&&o.info&&o.http&&o.verbose&&o.debug&&o.silly}function a(o){return o&&o.emerg!==void 0&&o.alert&&o.crit&&o.error&&o.warning&&o.notice&&o.info&&o.debug}}};FO.WinstonInstrumentation=K1;});var Sme=f(qO=>{Object.defineProperty(qO,"__esModule",{value:true});qO.WinstonInstrumentation=void 0;var cut=Tme();Object.defineProperty(qO,"WinstonInstrumentation",{enumerable:true,get:function(){return cut.WinstonInstrumentation}});});var gme=f(HO=>{Object.defineProperty(HO,"__esModule",{value:true});HO.AzureLogRecordProcessor=void 0;var uut=io(),W1=class{_metricHandler;constructor(e){this._metricHandler=e;}onEmit(e){try{this._metricHandler.recordLog(e);}catch(r){uut.Logger.getInstance().warn("Error while recording log",r);}}forceFlush(){return Promise.resolve()}shutdown(){return Promise.resolve()}};HO.AzureLogRecordProcessor=W1;});var yme=f(GO=>{Object.defineProperty(GO,"__esModule",{value:true});GO.AzureBatchLogRecordProcessor=void 0;var lut=(M(),A(H)),dut=(DE(),A(LE)),X1=class extends dut.BatchLogRecordProcessor{_options;constructor(e,r){super(e),this._options=r;}onEmit(e){this._options.enableTraceBasedSamplingForLogs&&e.spanContext&&e.spanContext.spanId&&e.spanContext.traceFlags!==lut.TraceFlags.SAMPLED||super.onEmit(e);}};GO.AzureBatchLogRecordProcessor=X1;});var Ame=f(Q1=>{Object.defineProperty(Q1,"__esModule",{value:true});Q1.logLevelToSeverityNumber=put;var qc=(In(),A(yo));function put(t){let e=qc.SeverityNumber.UNSPECIFIED;switch(t){case "ALL":e=qc.SeverityNumber.UNSPECIFIED;break;case "DEBUG":e=qc.SeverityNumber.DEBUG;break;case "ERROR":e=qc.SeverityNumber.ERROR;break;case "INFO":e=qc.SeverityNumber.INFO;break;case "VERBOSE":e=qc.SeverityNumber.TRACE;break;case "WARN":e=qc.SeverityNumber.WARN;break}return e}});var vme=f(jO=>{Object.defineProperty(jO,"__esModule",{value:true});jO.LogHandler=void 0;var fut=Dd(),hut=t_e(),_ut=Sme(),mut=gme(),Eut=yme(),Rme=Ame(),J1=class{_azureExporter;_azureLogRecordProcessor;_azureBatchLogRecordProcessor;_metricHandler;_config;_instrumentations;constructor(e,r){this._config=e,this._metricHandler=r,this._azureExporter=new fut.AzureMonitorLogExporter(e.azureMonitorExporterOptions),this._azureBatchLogRecordProcessor=new Eut.AzureBatchLogRecordProcessor(this._azureExporter,{enableTraceBasedSamplingForLogs:this._config.enableTraceBasedSamplingForLogs}),this._azureLogRecordProcessor=new mut.AzureLogRecordProcessor(this._metricHandler),this._instrumentations=[],this._initializeInstrumentations();}getAzureLogRecordProcessor(){return this._azureLogRecordProcessor}getBatchLogRecordProcessor(){return this._azureBatchLogRecordProcessor}getInstrumentations(){return this._instrumentations}_initializeInstrumentations(){let e=process.env.APPLICATIONINSIGHTS_INSTRUMENTATION_LOGGING_LEVEL;this._config.instrumentationOptions.bunyan?.enabled&&this._instrumentations.push(new hut.BunyanInstrumentation({...this._config.instrumentationOptions.bunyan,logSeverity:e?(0, Rme.logLevelToSeverityNumber)(e):void 0})),this._config.instrumentationOptions.winston?.enabled&&this._instrumentations.push(new _ut.WinstonInstrumentation({...this._config.instrumentationOptions.winston,logSeverity:e?(0, Rme.logLevelToSeverityNumber)(e):void 0}));}};jO.LogHandler=J1;});var Ome=f(zO=>{Object.defineProperty(zO,"__esModule",{value:true});zO.LogHandler=void 0;var Tut=vme();Object.defineProperty(zO,"LogHandler",{enumerable:true,get:function(){return Tut.LogHandler}});});function up(t){return t&&(t=t.replace(/[<>\\\b\f\n\r\t\0\u2028\u2029]/g,function(e){return Sut[e]})),t}function Om(t){return t!==void 0&&(t=!!t),t}function Nme(t){return t!==void 0&&(t=Number(t)),t}var Sut,Cme=E(()=>{Sut={"<":"\\u003C",">":"\\u003E","\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};});var bme={};Ue(bme,{getSdkLoaderScript:()=>Rut,webSnippet:()=>Pme,webSnippetCs:()=>yut,webSnippetVersion:()=>Aut});function Aut(){var t=/sv:\"([^\"]+)\"/.exec(Pme);return t?t[1]:""}function Rut(t){var e={src:up(t.src?t.src:"https://js.monitor.azure.com/scripts/b/ai.3.gbl.min.js"),crossOrigin:up(t.crossOrigin?t.crossOrigin:"anonymous"),cfg:{},name:up(t.name?t.name:"appInsights"),ld:Nme(t.ld),useXhr:Om(t.useXhr),cr:Om(t.cr),dle:Om(t.dle),sri:Om(t.sri)};t.instrumentationKey?e.cfg.instrumentationKey=up(t.instrumentationKey):t.connectionString&&(e.cfg.connectionString=up(t.connectionString));var r=JSON.stringify(e);return "!(function (cfg){"+gut+`}})(
`+r+`
);`}var gut,Pme,yut,Mme=E(()=>{Cme();gut=`var k,x,D,E,L,C,b,U,O,A,e,t="track",n="TrackPage",i="TrackEvent",I=[t+"Event",t+"Exception",t+"PageView",t+"PageViewPerformance","addTelemetryInitializer",t+"Trace",t+"DependencyData",t+"Metric","start"+n,"stop"+n,"start"+i,"stop"+i,"setAuthenticatedUserContext","clearAuthenticatedUserContext","flush"];function a(){cfg.onInit&&cfg.onInit(e)}k=window,x=document,D=k.location,E="script",L="ingestionendpoint",C="disableExceptionTracking",b="crossOrigin",U="POST",O=cfg.pn||"aiPolicy",t="appInsightsSDK",A=cfg.name||"appInsights",(cfg.name||k[t])&&(k[t]=A),e=k[A]||function(u){var n=u.url||cfg.src,s=!1,p=!1,l={initialize:!0,queue:[],sv:"9",config:u,version:2,extensions:void 0};function d(e){var t,n,i,a,r,o,c,s;!0!==cfg.dle&&(o=(t=function(){var e,t={},n=u.connectionString;if("string"==typeof n&&n)for(var i=n.split(";"),a=0;a<i.length;a++){var r=i[a].split("=");2===r.length&&(t[r[0].toLowerCase()]=r[1])}return t[L]||(e=(n=t.endpointsuffix)?t.location:null,t[L]="https://"+(e?e+".":"")+"dc."+(n||"services.visualstudio.com")),t}()).instrumentationkey||u.instrumentationKey||"",t=(t=(t=t[L])&&"/"===t.slice(-1)?t.slice(0,-1):t)?t+"/v2/track":u.endpointUrl,t=u.userOverrideEndpointUrl||t,(n=[]).push((i="SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details)",a=e,c=t,(s=(r=f(o,"Exception")).data).baseType="ExceptionData",s.baseData.exceptions=[{typeName:"SDKLoadFailed",message:i.replace(/\\./g,"-"),hasFullStack:!1,stack:i+"\\nSnippet failed to load ["+a+"] -- Telemetry is disabled\\nHelp Link: https://go.microsoft.com/fwlink/?linkid=2128109\\nHost: "+(D&&D.pathname||"_unknown_")+"\\nEndpoint: "+c,parsedStack:[]}],r)),n.push((s=e,i=t,(c=(a=f(o,"Message")).data).baseType="MessageData",(r=c.baseData).message='AI (Internal): 99 message:"'+("SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details) ("+s+")").replace(/\\"/g,"")+'"',r.properties={endpoint:i},a)),e=n,o=t,JSON&&((c=k.fetch)&&!cfg.useXhr?c(o,{method:U,body:JSON.stringify(e),mode:"cors"}):XMLHttpRequest&&((s=new XMLHttpRequest).open(U,o),s.setRequestHeader("Content-type","application/json"),s.send(JSON.stringify(e)))))}function f(e,t){return e=e,t=t,i=l.sv,a=l.version,r=D,(o={})["ai.device."+"id"]="browser",o["ai.device.type"]="Browser",o["ai.operation.name"]=r&&r.pathname||"_unknown_",o["ai.internal.sdkVersion"]="javascript:snippet_"+(i||a),{time:(r=new Date).getUTCFullYear()+"-"+n(1+r.getUTCMonth())+"-"+n(r.getUTCDate())+"T"+n(r.getUTCHours())+":"+n(r.getUTCMinutes())+":"+n(r.getUTCSeconds())+"."+(r.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z",iKey:e,name:"Microsoft.ApplicationInsights."+e.replace(/-/g,"")+"."+t,sampleRate:100,tags:o,data:{baseData:{ver:2}},ver:undefined,seq:"1",aiDataContract:undefined};function n(e){e=""+e;return 1===e.length?"0"+e:e}var i,a,r,o}var i,a,t,r,g=-1,h=0,m=["js.monitor.azure.com","js.cdn.applicationinsights.io","js.cdn.monitor.azure.com","js0.cdn.applicationinsights.io","js0.cdn.monitor.azure.com","js2.cdn.applicationinsights.io","js2.cdn.monitor.azure.com","az416426.vo.msecnd.net"],o=function(){return c(n,null)};function c(t,r){if((n=navigator)&&(~(n=(n.userAgent||"").toLowerCase()).indexOf("msie")||~n.indexOf("trident/"))&&~t.indexOf("ai.3")&&(t=t.replace(/(\\/)(ai\\.3\\.)([^\\d]*)$/,function(e,t,n){return t+"ai.2"+n})),!1!==cfg.cr)for(var e=0;e<m.length;e++)if(0<t.indexOf(m[e])){g=e;break}var n,o=function(e){var a;l.queue=[],p||(0<=g&&h+1<m.length?(a=(g+h+1)%m.length,i(t.replace(/^(.*\\/\\/)([\\w\\.]*)(\\/.*)$/,function(e,t,n,i){return t+m[a]+i})),h+=1):(s=p=!0,d(t)))},c=function(e,t){p||setTimeout(function(){t&&!l.core&&o()},500),s=!1},i=function(e){var n,i=x.createElement(E),e=(cfg.pl?cfg.ttp&&cfg.ttp.createScript?i.src=cfg.ttp.createScriptURL(e):i.src=(null==(n=window.trustedTypes)?void 0:n.createPolicy(O,{createScriptURL:function(e){try{var t=new URL(e);if(t.host&&"js.monitor.azure.com"===t.host)return e;a(e)}catch(n){a(e)}}})).createScriptURL(e):i.src=e,cfg.nt&&i.setAttribute("nonce",cfg.nt),r&&(i.integrity=r),i.setAttribute("data-ai-name",A),cfg[b]);function a(e){d("AI policy blocked URL: "+e)}return!e&&""!==e||"undefined"==i[b]||(i[b]=e),i.onload=c,i.onerror=o,i.onreadystatechange=function(e,t){"loaded"!==i.readyState&&"complete"!==i.readyState||c(0,t)},cfg.ld&&cfg.ld<0?x.getElementsByTagName("head")[0].appendChild(i):setTimeout(function(){x.getElementsByTagName(E)[0].parentNode.appendChild(i)},cfg.ld||0),i};i(t)}cfg.sri&&(i=n.match(/^((http[s]?:\\/\\/.*\\/)\\w+(\\.\\d+){1,5})\\.(([\\w]+\\.){0,2}js)$/))&&6===i.length?(T="".concat(i[1],".integrity.json"),a="@".concat(i[4]),S=window.fetch,t=function(e){if(!e.ext||!e.ext[a]||!e.ext[a].file)throw Error("Error Loading JSON response");var t=e.ext[a].integrity||null;c(n=i[2]+e.ext[a].file,t)},S&&!cfg.useXhr?S(T,{method:"GET",mode:"cors"}).then(function(e){return e.json()["catch"](function(){return{}})}).then(t)["catch"](o):XMLHttpRequest&&((r=new XMLHttpRequest).open("GET",T),r.onreadystatechange=function(){if(r.readyState===XMLHttpRequest.DONE)if(200===r.status)try{t(JSON.parse(r.responseText))}catch(e){o()}else o()},r.send())):n&&o();try{l.cookie=x.cookie}catch(w){}function e(e){for(;e.length;)!function(t){l[t]=function(){var e=arguments;s||l.queue.push(function(){l[t].apply(l,e)})}}(e.pop())}e(I);var v,y,S=!(l.SeverityLevel={Verbose:0,Information:1,Warning:2,Error:3,Critical:4}),T=(u.extensionConfig||{}).ApplicationInsightsAnalytics||{};return(S=!0!==u[C]&&!0!==T[C]||S)&&(e(["_"+(v="onerror")]),y=k[v],k[v]=function(e,t,n,i,a){var r=y&&y(e,t,n,i,a);return!0!==r&&l["_"+v]({message:e,url:t,lineNumber:n,columnNumber:i,error:a,evt:k.event}),r},u.autoExceptionInstrumented=!0),l}(cfg.cfg),(k[A]=e).queue&&0===e.queue.length?(e.queue.push(a),e.trackPageView({})):a();
//# sourceMappingURL=snippet.min.js.map
`,Pme=`!(function (cfg){var k,x,D,E,L,C,b,U,O,A,e,t="track",n="TrackPage",i="TrackEvent",I=[t+"Event",t+"Exception",t+"PageView",t+"PageViewPerformance","addTelemetryInitializer",t+"Trace",t+"DependencyData",t+"Metric","start"+n,"stop"+n,"start"+i,"stop"+i,"setAuthenticatedUserContext","clearAuthenticatedUserContext","flush"];function a(){cfg.onInit&&cfg.onInit(e)}k=window,x=document,D=k.location,E="script",L="ingestionendpoint",C="disableExceptionTracking",b="crossOrigin",U="POST",O=cfg.pn||"aiPolicy",t="appInsightsSDK",A=cfg.name||"appInsights",(cfg.name||k[t])&&(k[t]=A),e=k[A]||function(u){var n=u.url||cfg.src,s=!1,p=!1,l={initialize:!0,queue:[],sv:"9",config:u,version:2,extensions:void 0};function d(e){var t,n,i,a,r,o,c,s;!0!==cfg.dle&&(o=(t=function(){var e,t={},n=u.connectionString;if("string"==typeof n&&n)for(var i=n.split(";"),a=0;a<i.length;a++){var r=i[a].split("=");2===r.length&&(t[r[0].toLowerCase()]=r[1])}return t[L]||(e=(n=t.endpointsuffix)?t.location:null,t[L]="https://"+(e?e+".":"")+"dc."+(n||"services.visualstudio.com")),t}()).instrumentationkey||u.instrumentationKey||"",t=(t=(t=t[L])&&"/"===t.slice(-1)?t.slice(0,-1):t)?t+"/v2/track":u.endpointUrl,t=u.userOverrideEndpointUrl||t,(n=[]).push((i="SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details)",a=e,c=t,(s=(r=f(o,"Exception")).data).baseType="ExceptionData",s.baseData.exceptions=[{typeName:"SDKLoadFailed",message:i.replace(/\\./g,"-"),hasFullStack:!1,stack:i+"\\nSnippet failed to load ["+a+"] -- Telemetry is disabled\\nHelp Link: https://go.microsoft.com/fwlink/?linkid=2128109\\nHost: "+(D&&D.pathname||"_unknown_")+"\\nEndpoint: "+c,parsedStack:[]}],r)),n.push((s=e,i=t,(c=(a=f(o,"Message")).data).baseType="MessageData",(r=c.baseData).message='AI (Internal): 99 message:"'+("SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details) ("+s+")").replace(/\\"/g,"")+'"',r.properties={endpoint:i},a)),e=n,o=t,JSON&&((c=k.fetch)&&!cfg.useXhr?c(o,{method:U,body:JSON.stringify(e),mode:"cors"}):XMLHttpRequest&&((s=new XMLHttpRequest).open(U,o),s.setRequestHeader("Content-type","application/json"),s.send(JSON.stringify(e)))))}function f(e,t){return e=e,t=t,i=l.sv,a=l.version,r=D,(o={})["ai.device."+"id"]="browser",o["ai.device.type"]="Browser",o["ai.operation.name"]=r&&r.pathname||"_unknown_",o["ai.internal.sdkVersion"]="javascript:snippet_"+(i||a),{time:(r=new Date).getUTCFullYear()+"-"+n(1+r.getUTCMonth())+"-"+n(r.getUTCDate())+"T"+n(r.getUTCHours())+":"+n(r.getUTCMinutes())+":"+n(r.getUTCSeconds())+"."+(r.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z",iKey:e,name:"Microsoft.ApplicationInsights."+e.replace(/-/g,"")+"."+t,sampleRate:100,tags:o,data:{baseData:{ver:2}},ver:undefined,seq:"1",aiDataContract:undefined};function n(e){e=""+e;return 1===e.length?"0"+e:e}var i,a,r,o}var i,a,t,r,g=-1,h=0,m=["js.monitor.azure.com","js.cdn.applicationinsights.io","js.cdn.monitor.azure.com","js0.cdn.applicationinsights.io","js0.cdn.monitor.azure.com","js2.cdn.applicationinsights.io","js2.cdn.monitor.azure.com","az416426.vo.msecnd.net"],o=function(){return c(n,null)};function c(t,r){if((n=navigator)&&(~(n=(n.userAgent||"").toLowerCase()).indexOf("msie")||~n.indexOf("trident/"))&&~t.indexOf("ai.3")&&(t=t.replace(/(\\/)(ai\\.3\\.)([^\\d]*)$/,function(e,t,n){return t+"ai.2"+n})),!1!==cfg.cr)for(var e=0;e<m.length;e++)if(0<t.indexOf(m[e])){g=e;break}var n,o=function(e){var a;l.queue=[],p||(0<=g&&h+1<m.length?(a=(g+h+1)%m.length,i(t.replace(/^(.*\\/\\/)([\\w\\.]*)(\\/.*)$/,function(e,t,n,i){return t+m[a]+i})),h+=1):(s=p=!0,d(t)))},c=function(e,t){p||setTimeout(function(){t&&!l.core&&o()},500),s=!1},i=function(e){var n,i=x.createElement(E),e=(cfg.pl?cfg.ttp&&cfg.ttp.createScript?i.src=cfg.ttp.createScriptURL(e):i.src=(null==(n=window.trustedTypes)?void 0:n.createPolicy(O,{createScriptURL:function(e){try{var t=new URL(e);if(t.host&&"js.monitor.azure.com"===t.host)return e;a(e)}catch(n){a(e)}}})).createScriptURL(e):i.src=e,cfg.nt&&i.setAttribute("nonce",cfg.nt),r&&(i.integrity=r),i.setAttribute("data-ai-name",A),cfg[b]);function a(e){d("AI policy blocked URL: "+e)}return!e&&""!==e||"undefined"==i[b]||(i[b]=e),i.onload=c,i.onerror=o,i.onreadystatechange=function(e,t){"loaded"!==i.readyState&&"complete"!==i.readyState||c(0,t)},cfg.ld&&cfg.ld<0?x.getElementsByTagName("head")[0].appendChild(i):setTimeout(function(){x.getElementsByTagName(E)[0].parentNode.appendChild(i)},cfg.ld||0),i};i(t)}cfg.sri&&(i=n.match(/^((http[s]?:\\/\\/.*\\/)\\w+(\\.\\d+){1,5})\\.(([\\w]+\\.){0,2}js)$/))&&6===i.length?(T="".concat(i[1],".integrity.json"),a="@".concat(i[4]),S=window.fetch,t=function(e){if(!e.ext||!e.ext[a]||!e.ext[a].file)throw Error("Error Loading JSON response");var t=e.ext[a].integrity||null;c(n=i[2]+e.ext[a].file,t)},S&&!cfg.useXhr?S(T,{method:"GET",mode:"cors"}).then(function(e){return e.json()["catch"](function(){return{}})}).then(t)["catch"](o):XMLHttpRequest&&((r=new XMLHttpRequest).open("GET",T),r.onreadystatechange=function(){if(r.readyState===XMLHttpRequest.DONE)if(200===r.status)try{t(JSON.parse(r.responseText))}catch(e){o()}else o()},r.send())):n&&o();try{l.cookie=x.cookie}catch(w){}function e(e){for(;e.length;)!function(t){l[t]=function(){var e=arguments;s||l.queue.push(function(){l[t].apply(l,e)})}}(e.pop())}e(I);var v,y,S=!(l.SeverityLevel={Verbose:0,Information:1,Warning:2,Error:3,Critical:4}),T=(u.extensionConfig||{}).ApplicationInsightsAnalytics||{};return(S=!0!==u[C]&&!0!==T[C]||S)&&(e(["_"+(v="onerror")]),y=k[v],k[v]=function(e,t,n,i,a){var r=y&&y(e,t,n,i,a);return!0!==r&&l["_"+v]({message:e,url:t,lineNumber:n,columnNumber:i,error:a,evt:k.event}),r},u.autoExceptionInstrumented=!0),l}(cfg.cfg),(k[A]=e).queue&&0===e.queue.length?(e.queue.push(a),e.trackPageView({})):a();})({\r
    src: "https://js.monitor.azure.com/scripts/b/ai.3.gbl.min.js",\r
    // name: "appInsights", // Global SDK Instance name defaults to "appInsights" when not supplied\r
    // ld: 0, // Defines the load delay (in ms) before attempting to load the sdk. -1 = block page load and add to head. (default) = 0ms load after timeout,\r
    // useXhr: 1, // Use XHR instead of fetch to report failures (if available),\r
    // dle: true, // Prevent the SDK from reporting load failure log\r
    crossOrigin: "anonymous", // When supplied this will add the provided value as the cross origin attribute on the script tag\r
    // onInit: null, // Once the application insights instance has loaded and initialized this callback function will be called with 1 argument -- the sdk instance (DO NOT ADD anything to the sdk.queue -- As they won't get called)\r
    // sri: false, // Custom optional value to specify whether fetching the snippet from integrity file and do integrity check \r
    // pl: false, // Custom optional value to specify whether to enable the trusted type policy check on snippet\r
    // pn: "aiPolicy", // Custom optional value to specify the name of the trusted type policy that would be implemented on the snippet, default is "aiPolicy"\r
    // ttp: null, // Custom optional value to specify the trusted type policy that would be applied on the snippet src\r
    // nt: null, // Custom optional value to specify the nounce tag value that would be applied on the script when we drop it on the page\r
    cfg: { // Application Insights Configuration\r
            connectionString: "InstrumentationKey=INSTRUMENTATION_KEY"\r
    }\r
});
`,yut=`!(function (cfg){var k,x,D,E,L,C,b,U,O,A,e,t="track",n="TrackPage",i="TrackEvent",I=[t+"Event",t+"Exception",t+"PageView",t+"PageViewPerformance","addTelemetryInitializer",t+"Trace",t+"DependencyData",t+"Metric","start"+n,"stop"+n,"start"+i,"stop"+i,"setAuthenticatedUserContext","clearAuthenticatedUserContext","flush"];function a(){cfg.onInit&&cfg.onInit(e)}k=window,x=document,D=k.location,E="script",L="ingestionendpoint",C="disableExceptionTracking",b="crossOrigin",U="POST",O=cfg.pn||"aiPolicy",t="appInsightsSDK",A=cfg.name||"appInsights",(cfg.name||k[t])&&(k[t]=A),e=k[A]||function(u){var n=u.url||cfg.src,s=!1,p=!1,l={initialize:!0,queue:[],sv:"9",config:u,version:2,extensions:void 0};function d(e){var t,n,i,a,r,o,c,s;!0!==cfg.dle&&(o=(t=function(){var e,t={},n=u.connectionString;if("string"==typeof n&&n)for(var i=n.split(";"),a=0;a<i.length;a++){var r=i[a].split("=");2===r.length&&(t[r[0].toLowerCase()]=r[1])}return t[L]||(e=(n=t.endpointsuffix)?t.location:null,t[L]="https://"+(e?e+".":"")+"dc."+(n||"services.visualstudio.com")),t}()).instrumentationkey||u.instrumentationKey||"",t=(t=(t=t[L])&&"/"===t.slice(-1)?t.slice(0,-1):t)?t+"/v2/track":u.endpointUrl,t=u.userOverrideEndpointUrl||t,(n=[]).push((i="SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details)",a=e,c=t,(s=(r=f(o,"Exception")).data).baseType="ExceptionData",s.baseData.exceptions=[{typeName:"SDKLoadFailed",message:i.replace(/\\./g,"-"),hasFullStack:!1,stack:i+"\\nSnippet failed to load ["+a+"] -- Telemetry is disabled\\nHelp Link: https://go.microsoft.com/fwlink/?linkid=2128109\\nHost: "+(D&&D.pathname||"_unknown_")+"\\nEndpoint: "+c,parsedStack:[]}],r)),n.push((s=e,i=t,(c=(a=f(o,"Message")).data).baseType="MessageData",(r=c.baseData).message='AI (Internal): 99 message:"'+("SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details) ("+s+")").replace(/\\"/g,"")+'"',r.properties={endpoint:i},a)),e=n,o=t,JSON&&((c=k.fetch)&&!cfg.useXhr?c(o,{method:U,body:JSON.stringify(e),mode:"cors"}):XMLHttpRequest&&((s=new XMLHttpRequest).open(U,o),s.setRequestHeader("Content-type","application/json"),s.send(JSON.stringify(e)))))}function f(e,t){return e=e,t=t,i=l.sv,a=l.version,r=D,(o={})["ai.device."+"id"]="browser",o["ai.device.type"]="Browser",o["ai.operation.name"]=r&&r.pathname||"_unknown_",o["ai.internal.sdkVersion"]="javascript:snippet_"+(i||a),{time:(r=new Date).getUTCFullYear()+"-"+n(1+r.getUTCMonth())+"-"+n(r.getUTCDate())+"T"+n(r.getUTCHours())+":"+n(r.getUTCMinutes())+":"+n(r.getUTCSeconds())+"."+(r.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z",iKey:e,name:"Microsoft.ApplicationInsights."+e.replace(/-/g,"")+"."+t,sampleRate:100,tags:o,data:{baseData:{ver:2}},ver:undefined,seq:"1",aiDataContract:undefined};function n(e){e=""+e;return 1===e.length?"0"+e:e}var i,a,r,o}var i,a,t,r,g=-1,h=0,m=["js.monitor.azure.com","js.cdn.applicationinsights.io","js.cdn.monitor.azure.com","js0.cdn.applicationinsights.io","js0.cdn.monitor.azure.com","js2.cdn.applicationinsights.io","js2.cdn.monitor.azure.com","az416426.vo.msecnd.net"],o=function(){return c(n,null)};function c(t,r){if((n=navigator)&&(~(n=(n.userAgent||"").toLowerCase()).indexOf("msie")||~n.indexOf("trident/"))&&~t.indexOf("ai.3")&&(t=t.replace(/(\\/)(ai\\.3\\.)([^\\d]*)$/,function(e,t,n){return t+"ai.2"+n})),!1!==cfg.cr)for(var e=0;e<m.length;e++)if(0<t.indexOf(m[e])){g=e;break}var n,o=function(e){var a;l.queue=[],p||(0<=g&&h+1<m.length?(a=(g+h+1)%m.length,i(t.replace(/^(.*\\/\\/)([\\w\\.]*)(\\/.*)$/,function(e,t,n,i){return t+m[a]+i})),h+=1):(s=p=!0,d(t)))},c=function(e,t){p||setTimeout(function(){t&&!l.core&&o()},500),s=!1},i=function(e){var n,i=x.createElement(E),e=(cfg.pl?cfg.ttp&&cfg.ttp.createScript?i.src=cfg.ttp.createScriptURL(e):i.src=(null==(n=window.trustedTypes)?void 0:n.createPolicy(O,{createScriptURL:function(e){try{var t=new URL(e);if(t.host&&"js.monitor.azure.com"===t.host)return e;a(e)}catch(n){a(e)}}})).createScriptURL(e):i.src=e,cfg.nt&&i.setAttribute("nonce",cfg.nt),r&&(i.integrity=r),i.setAttribute("data-ai-name",A),cfg[b]);function a(e){d("AI policy blocked URL: "+e)}return!e&&""!==e||"undefined"==i[b]||(i[b]=e),i.onload=c,i.onerror=o,i.onreadystatechange=function(e,t){"loaded"!==i.readyState&&"complete"!==i.readyState||c(0,t)},cfg.ld&&cfg.ld<0?x.getElementsByTagName("head")[0].appendChild(i):setTimeout(function(){x.getElementsByTagName(E)[0].parentNode.appendChild(i)},cfg.ld||0),i};i(t)}cfg.sri&&(i=n.match(/^((http[s]?:\\/\\/.*\\/)\\w+(\\.\\d+){1,5})\\.(([\\w]+\\.){0,2}js)$/))&&6===i.length?(T="".concat(i[1],".integrity.json"),a="@".concat(i[4]),S=window.fetch,t=function(e){if(!e.ext||!e.ext[a]||!e.ext[a].file)throw Error("Error Loading JSON response");var t=e.ext[a].integrity||null;c(n=i[2]+e.ext[a].file,t)},S&&!cfg.useXhr?S(T,{method:"GET",mode:"cors"}).then(function(e){return e.json()["catch"](function(){return{}})}).then(t)["catch"](o):XMLHttpRequest&&((r=new XMLHttpRequest).open("GET",T),r.onreadystatechange=function(){if(r.readyState===XMLHttpRequest.DONE)if(200===r.status)try{t(JSON.parse(r.responseText))}catch(e){o()}else o()},r.send())):n&&o();try{l.cookie=x.cookie}catch(w){}function e(e){for(;e.length;)!function(t){l[t]=function(){var e=arguments;s||l.queue.push(function(){l[t].apply(l,e)})}}(e.pop())}e(I);var v,y,S=!(l.SeverityLevel={Verbose:0,Information:1,Warning:2,Error:3,Critical:4}),T=(u.extensionConfig||{}).ApplicationInsightsAnalytics||{};return(S=!0!==u[C]&&!0!==T[C]||S)&&(e(["_"+(v="onerror")]),y=k[v],k[v]=function(e,t,n,i,a){var r=y&&y(e,t,n,i,a);return!0!==r&&l["_"+v]({message:e,url:t,lineNumber:n,columnNumber:i,error:a,evt:k.event}),r},u.autoExceptionInstrumented=!0),l}(cfg.cfg),(k[A]=e).queue&&0===e.queue.length?(e.queue.push(a),e.trackPageView({})):a();})({\r
    src: "https://js.monitor.azure.com/scripts/b/ai.3.gbl.min.js",\r
    // name: "appInsights", // Global SDK Instance name defaults to "appInsights" when not supplied\r
    // ld: 0, // Defines the load delay (in ms) before attempting to load the sdk. -1 = block page load and add to head. (default) = 0ms load after timeout,\r
    // useXhr: 1, // Use XHR instead of fetch to report failures (if available),\r
    // dle: true, // Prevent the SDK from reporting load failure log\r
    crossOrigin: "anonymous", // When supplied this will add the provided value as the cross origin attribute on the script tag\r
    // onInit: null, // Once the application insights instance has loaded and initialized this callback function will be called with 1 argument -- the sdk instance (DO NOT ADD anything to the sdk.queue -- As they won't get called)\r
    // sri: false, // Custom optional value to specify whether fetching the snippet from integrity file and do integrity check \r
    // pl: false, // Custom optional value to specify whether to enable the trusted type policy check on snippet\r
    // pn: "aiPolicy", // Custom optional value to specify the name of the trusted type policy that would be implemented on the snippet, default is "aiPolicy"\r
    // ttp: null, // Custom optional value to specify the trusted type policy that would be applied on the snippet src\r
    // nt: null, // Custom optional value to specify the nounce tag value that would be applied on the script when we drop it on the page\r
    cfg: { // Application Insights Configuration\r
            connectionString: "YOUR_CONNECTION_STRING"\r
    }\r
});
`;});var Ime=f(me=>{Object.defineProperty(me,"__esModule",{value:true});me.isContentTypeHeaderHtml=me.insertBrowserSdkLoaderByIndex=me.getContentEncodingFromHeaders=me.isSupportedContentEncoding=me.findBufferEncodingType=me.isBufferType=me.getBrotliDecompressSync=me.getBrotliDecompressAsync=me.getBrotliCompressSync=me.getBrotliCompressAsync=me.inflateAsync=me.deflateAsync=me.gunzipAsync=me.gzipAsync=me.isBrotliSupported=me.bufferEncodingTypes=me.contentEncodingMethod=void 0;var vut=(Ce(),A(Ne)),YO=vut.__importStar(P("zlib")),lp=P("util"),Nm;(function(t){t.GZIP="gzip",t.DEFLATE="deflate",t.BR="br";})(Nm||(me.contentEncodingMethod=Nm={}));me.bufferEncodingTypes=["utf8","utf16le","latin1","base64","hex","ascii","binary","ucs2"];var Out=()=>{let t=process.versions.node.split(".")[0];return parseInt(t)>=10};me.isBrotliSupported=Out;me.gzipAsync=(0, lp.promisify)(YO.gzip);me.gunzipAsync=(0, lp.promisify)(YO.gunzip);me.deflateAsync=(0, lp.promisify)(YO.deflate);me.inflateAsync=(0, lp.promisify)(YO.inflate);var Nut=t=>(0, me.isBrotliSupported)()&&typeof t.brotliCompress=="function"?(0, lp.promisify)(t.brotliCompress):null;me.getBrotliCompressAsync=Nut;var Cut=t=>(0, me.isBrotliSupported)()&&typeof t.brotliCompressSync=="function"?t.brotliCompressSync:null;me.getBrotliCompressSync=Cut;var Put=t=>(0, me.isBrotliSupported)()&&typeof t.brotliDecompress=="function"?(0, lp.promisify)(t.brotliDecompress):null;me.getBrotliDecompressAsync=Put;var but=t=>(0, me.isBrotliSupported)()&&typeof t.brotliDecompressSync=="function"?t.brotliDecompressSync:null;me.getBrotliDecompressSync=but;var Mut=(t,e)=>{let r=e||"utf8",n=false;return Buffer.isEncoding(r)&&(n=Buffer.from(t.toString(r),r).toJSON().data.toString()===t.toJSON().data.toString()),n};me.isBufferType=Mut;var Iut=t=>{let e=null;for(let r of me.bufferEncodingTypes)if(Buffer.isEncoding(r)&&(0, me.isBufferType)(t,r)){e=r;break}return e};me.findBufferEncodingType=Iut;var xut=t=>{let e=null;switch(t){case "gzip":e=Nm.GZIP;break;case "br":e=Nm.BR;break;case "deflate":e=Nm.DEFLATE;break;}return e};me.isSupportedContentEncoding=xut;var Lut=t=>{let e=[],r=t.getHeader("Content-Encoding");if(!r)return null;if(typeof r=="string"){let n=(0, me.isSupportedContentEncoding)(r);n&&e.push(n);}return e};me.getContentEncodingFromHeaders=Lut;var Dut=(t,e,r)=>{if(t<0)return null;let n=null,s=e.substring(0,t),a=e.substring(t);return n=s+'<script type="text/javascript">'+r+"</script>"+a,n};me.insertBrowserSdkLoaderByIndex=Dut;var wut=t=>{let e=false,r=t.getHeader("Content-Type");return r&&(typeof r=="string"?e=r.indexOf("html")>=0:e=r.toString().indexOf("html")>=0),e};me.isContentTypeHeaderHtml=wut;});var wme=f($O=>{Object.defineProperty($O,"__esModule",{value:true});$O.BrowserSdkLoader=void 0;var Cm=(Ce(),A(Ne)),xme=Cm.__importDefault(P("http")),Lme=Cm.__importDefault(P("https")),Uut=(Mme(),A(bme)),ai=Cm.__importStar(Ime()),Dme=Cm.__importStar(dc()),dp=Cm.__importStar(P("zlib")),Z1=Fw(),es=Dl(),kut=Ho(),Vut=(M(),A(H)),ek=class t{static _instance;static _sdkLoader;static _aiUrl;_isIkeyValid=true;_isInitialized=false;_browserSdkLoaderIkey;constructor(e){t._instance&&Vut.diag.warn("Browser SDK Loader should be configured from the applicationInsights object"),t._instance=this,t._aiUrl=kut.BROWSER_SDK_LOADER_DEFAULT_SOURCE;let r;e.browserSdkLoaderOptions?.connectionString&&(r=this._getBrowserSdkLoaderIkey(e?.browserSdkLoaderOptions?.connectionString)),this._browserSdkLoaderIkey=r||Z1.ConnectionStringParser.parse(e.azureMonitorExporterOptions.connectionString).instrumentationkey,this._isIkeyValid&&this._initialize();}isInitialized(){return this._isInitialized}static getInstance(){return t._instance}_getBrowserSdkLoaderIkey(e){let r=null;try{let s=Z1.ConnectionStringParser.parse(e).instrumentationkey||"";Z1.ConnectionStringParser.validateInstrumentationKey(s)?(this._isIkeyValid=!0,r=s):(this._isIkeyValid=!1,es.Logger.getInstance().info("Invalid browser SDK loader connection string, browser SDK loader is not enabled."));}catch(n){es.Logger.getInstance().info(`get browser SDK loader ikey error: ${n}`);}return r}_getBrowserSdkLoaderReplacedStr(){let e=Dme.getOsPrefix(),r=Dme.getResourceProvider(),n=`${this._browserSdkLoaderIkey}",\r
 disableIkeyDeprecationMessage: true,\r
 sdkExtension: "${r}${e}d_n_`;return Uut.webSnippet.replace("INSTRUMENTATION_KEY",n)}_initialize(){this._isInitialized=true,t._sdkLoader=this._getBrowserSdkLoaderReplacedStr();let e=xme.default.createServer,r=Lme.default.createServer;xme.default.createServer=n=>{let s=n;return s&&(n=(a,o)=>{let i=o.write,c=a.method==="GET";o.write=function(d,p){try{if(c){let h=ai.getContentEncodingFromHeaders(o),T;if(typeof p=="string"&&(T=p),h==null)t._instance?.ValidateInjection(o,d)&&(arguments[0]=t._instance.InjectSdkLoader(o,d,void 0,T));else if(h.length){let g=h[0];arguments[0]=t._instance?.InjectSdkLoader(o,d,g);}}}catch(h){es.Logger.getInstance().warn(`Inject browser sdk loader error: ${h}`);}return i.apply(o,arguments)};let u=o.end;return o.end=function(d,p){if(c)try{if(c){let h=ai.getContentEncodingFromHeaders(o),T;if(typeof p=="string"&&(T=p),h==null)t._instance?.ValidateInjection(o,d)&&(arguments[0]=t._instance.InjectSdkLoader(o,d,void 0,T));else if(h.length){let g=h[0];arguments[0]=t._instance?.InjectSdkLoader(o,d,g);}}}catch(h){es.Logger.getInstance().warn(`Inject browser sdk loader error: ${h}`);}return u.apply(o,arguments)},s(a,o)}),e(n)},Lme.default.createServer=function(n,s){let a=s;if(a)return s=function(o,i){let c=o.method==="GET",u=i.write,l=i.end;return i.write=function(p,h){try{if(c){let T=ai.getContentEncodingFromHeaders(i),g;if(typeof h=="string"&&(g=h),T==null)t._instance?.ValidateInjection(i,p)&&(arguments[0]=this.InjectSdkLoader(i,p,void 0,g));else if(T.length){let y=T[0];arguments[0]=t._instance?.InjectSdkLoader(i,p,y);}}}catch(T){es.Logger.getInstance().warn(`Inject SDK loader error: ${T}`);}return u.apply(i,arguments)},i.end=function(p,h){try{if(c){let T=ai.getContentEncodingFromHeaders(i),g;if(typeof h=="string"&&(g=h),T==null)t._instance?.ValidateInjection(i,p)&&(arguments[0]=t._instance.InjectSdkLoader(i,p,void 0,g));else if(T.length){let y=T[0];arguments[0]=t._instance?.InjectSdkLoader(i,p,y);}}}catch(T){es.Logger.getInstance().warn(`Inject SDK loader error: ${T}`);}return l.apply(i,arguments)},a(o,i)},r(n,s)};}ValidateInjection(e,r){try{if(!e||!r||e.statusCode!==200||!ai.isContentTypeHeaderHtml(e))return !1;let s=r.slice().toString();if(s.indexOf("<head>")>=0&&s.indexOf("</head>")>=0&&s.indexOf(t._aiUrl)<0)return !0}catch(n){es.Logger.getInstance().info(`validate injections error: ${n}`);}return  false}InjectSdkLoader(e,r,n,s){try{if(!!n)e.removeHeader("Content-Length"),r=this._getInjectedCompressBuffer(e,r,n),e.setHeader("Content-Length",r.length);else {let o=r.toString(),i=o.indexOf("</head>");if(i<0)return r;let c=ai.insertBrowserSdkLoaderByIndex(i,o,t._sdkLoader);if(typeof r=="string")e.removeHeader("Content-Length"),c&&(r=c),e.setHeader("Content-Length",Buffer.byteLength(r));else if(Buffer.isBuffer(r)){let u=s||"utf8";if(ai.isBufferType(r,u)&&c){e.removeHeader("Content-Length");let d=Buffer.from(c).toString(u);r=Buffer.from(d,u),e.setHeader("Content-Length",r.length);}}}}catch(a){es.Logger.getInstance().warn(`Failed to inject browser sdk loader and change content-length headers. Exception:${a}`);}return r}_getInjectedCompressBuffer(e,r,n){try{switch(n){case ai.contentEncodingMethod.GZIP:{let s=dp.gunzipSync(r);if(this.ValidateInjection(e,s)){let a=this.InjectSdkLoader(e,s);r=dp.gzipSync(a);}break}case ai.contentEncodingMethod.DEFLATE:{let s=dp.inflateSync(r);if(this.ValidateInjection(e,s)){let a=this.InjectSdkLoader(e,s);r=dp.deflateSync(a);}break}case ai.contentEncodingMethod.BR:{let s=ai.getBrotliDecompressSync(dp),a=ai.getBrotliCompressSync(dp);if(s&&a){let o=s(r);if(this.ValidateInjection(e,o)){let i=this.InjectSdkLoader(e,o);r=a(i);}break}}}}catch(s){es.Logger.getInstance().info(`get browser SDK loader compress buffer error: ${s}`);}return r}dispose(){t._instance=null,this._isInitialized=false;}};$O.BrowserSdkLoader=ek;});var Ume=f(pp=>{Object.defineProperty(pp,"__esModule",{value:true});pp.disableInstrumentations=pp.enableInstrumentations=void 0;function But(t,e,r,n){for(let s=0,a=t.length;s<a;s++){let o=t[s];e&&o.setTracerProvider(e),r&&o.setMeterProvider(r),n&&o.setLoggerProvider&&o.setLoggerProvider(n),o.getConfig().enabled||o.enable();}}pp.enableInstrumentations=But;function Fut(t){t.forEach(e=>e.disable());}pp.disableInstrumentations=Fut;});var kme=f(rk=>{Object.defineProperty(rk,"__esModule",{value:true});rk.patchOpenTelemetryInstrumentationEnable=Hut;var tk=Ho(),qut=io();function Hut(){let t=JSON.stringify({instrumentation:0,feature:0});try{P.resolve("@opentelemetry/instrumentation");let e=Ume(),r=e.enableInstrumentations;e.enableInstrumentations=function(n){try{let s=JSON.parse(process.env[tk.AZURE_MONITOR_STATSBEAT_FEATURES]||t),a={};for(let o=0;o<n.length;o++)a={instrumentation:s.instrumentation|=tk.StatsbeatInstrumentationMap.get(n[o].instrumentationName)||0,feature:s.feature};process.env[tk.AZURE_MONITOR_STATSBEAT_FEATURES]=JSON.stringify(a);}catch{qut.Logger.getInstance().warn("Failed to parse the statsbeat environment variable");}return r.apply(this,arguments)};}catch{}}});var qme=f(Pm=>{Object.defineProperty(Pm,"__esModule",{value:true});Pm.useAzureMonitor=elt;Pm.shutdownAzureMonitor=tlt;Pm._getSdkInstance=rlt;var Vme=(M(),A(H)),Gut=(In(),A(yo)),jut=TQ(),zut=IJ(),Yut=yde(),$ut=Hhe(),Kut=Ome(),Bme=Ho(),Wut=wme(),Xut=jo(),Qut=zw(),Jut=kme(),Zut=dc();process.env.AZURE_MONITOR_DISTRO_VERSION=Bme.AZURE_MONITOR_OPENTELEMETRY_VERSION;var KO,Fme;function elt(t){let e=new zut.InternalConfig(t);(0, Jut.patchOpenTelemetryInstrumentationEnable)();let r={azureSdk:e.instrumentationOptions?.azureSdk?.enabled,mongoDb:e.instrumentationOptions?.mongoDb?.enabled,mySql:e.instrumentationOptions?.mySql?.enabled,postgreSql:e.instrumentationOptions?.postgreSql?.enabled,redis:e.instrumentationOptions?.redis?.enabled,bunyan:e.instrumentationOptions?.bunyan?.enabled,winston:e.instrumentationOptions?.winston?.enabled},n={browserSdkLoader:e.browserSdkLoaderOptions.enabled,aadHandling:!!e.azureMonitorExporterOptions?.credential,diskRetry:!e.azureMonitorExporterOptions?.disableOfflineStorage,rateLimitedSampler:!!e.tracesPerSecond,customerSdkStats:process.env[Bme.APPLICATIONINSIGHTS_SDKSTATS_ENABLED_PREVIEW]==="True"};(0, Qut.getInstance)().setStatsbeatFeatures(r,n),e.browserSdkLoaderOptions.enabled&&(Fme=new Wut.BrowserSdkLoader(e)),Vme.metrics.disable(),Vme.trace.disable(),Gut.logs.disable();let s=new Yut.MetricHandler(e),a=new $ut.TraceHandler(e,s),o=new Kut.LogHandler(e,s),i=a.getInstrumentations().concat(o.getInstrumentations()),c=(0, Zut.parseResourceDetectorsFromEnvVar)(),u=t?.spanProcessors||[],l=t?.logRecordProcessors||[],p={autoDetectResources:true,metricReaders:[s.getMetricReader(),...t?.metricReaders||[]],views:s.getViews(),instrumentations:i,logRecordProcessors:[o.getAzureLogRecordProcessor(),...l,o.getBatchLogRecordProcessor()],resource:e.resource,sampler:a.getSampler(),spanProcessors:[a.getAzureMonitorSpanProcessor(),...u,a.getBatchSpanProcessor()],resourceDetectors:c};KO=new jut.NodeSDK(p),(0, Xut.setSdkPrefix)(),KO.start();}function tlt(){return Fme?.dispose(),KO?.shutdown()}function rlt(){return KO}});var WO,Hme=E(()=>{(function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.TRACE=1]="TRACE",t[t.TRACE2=2]="TRACE2",t[t.TRACE3=3]="TRACE3",t[t.TRACE4=4]="TRACE4",t[t.DEBUG=5]="DEBUG",t[t.DEBUG2=6]="DEBUG2",t[t.DEBUG3=7]="DEBUG3",t[t.DEBUG4=8]="DEBUG4",t[t.INFO=9]="INFO",t[t.INFO2=10]="INFO2",t[t.INFO3=11]="INFO3",t[t.INFO4=12]="INFO4",t[t.WARN=13]="WARN",t[t.WARN2=14]="WARN2",t[t.WARN3=15]="WARN3",t[t.WARN4=16]="WARN4",t[t.ERROR=17]="ERROR",t[t.ERROR2=18]="ERROR2",t[t.ERROR3=19]="ERROR3",t[t.ERROR4=20]="ERROR4",t[t.FATAL=21]="FATAL",t[t.FATAL2=22]="FATAL2",t[t.FATAL3=23]="FATAL3",t[t.FATAL4=24]="FATAL4";})(WO||(WO={}));});var Hc,XO,QO=E(()=>{Hc=class{emit(e){}},XO=new Hc;});var bm,fp,JO=E(()=>{QO();bm=class{getLogger(e,r,n){return new Hc}},fp=new bm;});var hp,nk=E(()=>{QO();hp=class{constructor(e,r,n,s){this._provider=e,this.name=r,this.version=n,this.options=s;}emit(e){this._getLogger().emit(e);}_getLogger(){if(this._delegate)return this._delegate;let e=this._provider._getDelegateLogger(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):XO}};});var Gc,ik=E(()=>{JO();nk();Gc=class{getLogger(e,r,n){var s;return (s=this._getDelegateLogger(e,r,n))!==null&&s!==void 0?s:new hp(this,e,r,n)}_getDelegate(){var e;return (e=this._delegate)!==null&&e!==void 0?e:fp}_setDelegate(e){this._delegate=e;}_getDelegateLogger(e,r,n){var s;return (s=this._delegate)===null||s===void 0?void 0:s.getLogger(e,r,n)}};});var ZO,Gme=E(()=>{ZO=typeof globalThis=="object"?globalThis:global;});var jme=E(()=>{Gme();});var zme=E(()=>{jme();});function Yme(t,e,r){return n=>n===t?e:r}var Mm,_p,ok,$me=E(()=>{zme();Mm=Symbol.for("io.opentelemetry.js.api.logs"),_p=ZO;ok=1;});var eN,Kme=E(()=>{$me();JO();ik();eN=class t{constructor(){this._proxyLoggerProvider=new Gc;}static getInstance(){return this._instance||(this._instance=new t),this._instance}setGlobalLoggerProvider(e){return _p[Mm]?this.getLoggerProvider():(_p[Mm]=Yme(ok,e,fp),this._proxyLoggerProvider._setDelegate(e),e)}getLoggerProvider(){var e,r;return (r=(e=_p[Mm])===null||e===void 0?void 0:e.call(_p,ok))!==null&&r!==void 0?r:this._proxyLoggerProvider}getLogger(e,r,n){return this.getLoggerProvider().getLogger(e,r,n)}disable(){delete _p[Mm],this._proxyLoggerProvider=new Gc;}};});var Wme={};Ue(Wme,{NOOP_LOGGER:()=>XO,NOOP_LOGGER_PROVIDER:()=>fp,NoopLogger:()=>Hc,NoopLoggerProvider:()=>bm,ProxyLogger:()=>hp,ProxyLoggerProvider:()=>Gc,SeverityNumber:()=>WO,logs:()=>nlt});var nlt,Xme=E(()=>{Hme();QO();JO();nk();ik();Kme();nlt=eN.getInstance();});M();async function slt(){let{useAzureMonitor:t}=qme(),{logs:e}=(Xme(),A(Wme)),r=parseInt(process.env.OTEL_SESSION_START||"0",10),n=process.env.OTEL_EVENT_FILE;console.log(`Post telemetry: file=${n}`);let s=process.env.GITHUB_WORKFLOW||"github-workflow",a=process.env.GITHUB_WORKFLOW_REF||"",o=process.env.GITHUB_RUN_ID||"",i=process.env.GITHUB_EVENT_NAME||"",c=process.env.GITHUB_RUN_ATTEMPT||"",u=process.env.GITHUB_REPOSITORY||"",l=process.env.GITHUB_ACTOR||"",d=`${process.env.GITHUB_SERVER_URL}/${process.env.GITHUB_REPOSITORY}/actions/runs/${process.env.GITHUB_RUN_ID}`,p=process.env.GITHUB_ACTION_PATH||"",{resourceFromAttributes:h}=(xi(),A(Ra)),T=h({"service.name":a,"service.instance.id":o,"service.namespace":"dx","enduser.id":l});t({resource:T,azureMonitorExporterOptions:{connectionString:process.env.APPLICATIONINSIGHTS_CONNECTION_STRING},enableLiveMetrics:false});let g=e.getLoggerProvider().getLogger("workflow-logger","1.0.0"),R=ge.getTracer("workflow-tracer").startSpan(s,{kind:Kr.SERVER,startTime:new Date(r),attributes:{"cicd.pipeline.action.name":s,"cicd.pipeline.run.id":o,"cicd.pipeline.attempt":c,"cicd.pipeline.trigger":i,"cicd.pipeline.repository":u,"cicd.pipeline.run.url.full":d,"cicd.pipeline.author":l,"cicd.pipeline.result":"success","cdcd.pipeline.path":p,"error.type":""}});if(n&&fs$1.existsSync(n)){let b=fs$1.readFileSync(n,"utf-8").split(/\n/).filter(w=>w.trim().length);yt.with(ge.setSpan(yt.active(),R),()=>{for(let w of b){let v=null;try{v=JSON.parse(w);}catch{console.warn("Skipping malformed telemetry line: "+w);continue}if(!v)continue;let V={"ci.pipeline.repo":u,"ci.pipeline.run.id":o,"enduser.id":l,...v.attributes};v.exception?(R.recordException({name:v.name||"Exception",message:v.body||v.name}),R.setStatus({code:bn.ERROR,message:v.body||v.name})):g.emit({body:v.body||v.name,attributes:{"microsoft.custom_event.name":v.name||"CustomEvent",...V}});}});}else console.log("No events file found or empty");R.end(),await e.getLoggerProvider().forceFlush?.(),await new Promise(b=>setTimeout(b,2e3)),console.log("Telemetry flushed");}slt();
/*! Bundled license information:

@grpc/proto-loader/build/src/util.js:
  (**
   * @license
   * Copyright 2018 gRPC authors.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *     http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *
   *)

long/umd/index.js:
  (**
   * @license
   * Copyright 2009 The Closure Library Authors
   * Copyright 2020 Daniel Wirtz / The long.js Authors.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *     http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *
   * SPDX-License-Identifier: Apache-2.0
   *)

@grpc/proto-loader/build/src/index.js:
  (**
   * @license
   * Copyright 2018 gRPC authors.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *     http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/