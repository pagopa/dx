# @pagopa/dx-cli

## 0.14.4

### Patch Changes

- df2cb42: Update regex to avoid unwanted changes
- df2cb42: Move pnpm-config-pagopa settings into local config

## 0.14.3

### Patch Changes

- 011a256: Add a `console.error` log message to log the error

## 0.14.2

### Patch Changes

- f04ba73: Add Node.js version check to use-pnpm codemod

## 0.14.1

### Patch Changes

- 84422c0: Update dependencies
- Updated dependencies [84422c0]
- Updated dependencies [84422c0]
- Updated dependencies [a65c2a7]
- Updated dependencies [91e5911]
  - @pagopa/monorepo-generator@0.14.1

## 0.14.0

### Minor Changes

- 56f3342: The `init` command now creates the repository

  When running `dx init project` command, the CLI now tries to create the repository on GitHub.
  It uses the generated Terraform files and attempts to run a `terraform apply` command.

### Patch Changes

- 2baf913: Enhance the `init` command to automatically create a Pull Request after scaffolding a new repository
- b3f5de0: Remove tailing `}` that was added to the branch name
- ef9059b: The `init` command now creates a local git repository and pushes code to the origin.
  It pushes the README file to the default branch, and pushes the code generated by the scaffolder to a separate branch.

## 0.13.0

### Patch Changes

- Updated dependencies [200a33b]
- Updated dependencies [49a0087]
  - @pagopa/monorepo-generator@0.13.0

## 0.12.0

### Minor Changes

- 9998df5: Refactor the `init` command to show a summary of the execution

### Patch Changes

- Updated dependencies [9998df5]
- Updated dependencies [5399a25]
- Updated dependencies [9998df5]
  - @pagopa/monorepo-generator@0.12.0

## 0.11.2

### Patch Changes

- d187d76: Add the `execa` adapter to allow the execution of shell commands.

  The new `executeCommand` function provides a simple Promise-based wrapper around `execa` that returns `"success"` for commands that exit with code 0, or `"failure"` for commands that exit with non-zero codes or fail to execute.

  Example usage:

  ```typescript
  import { executeCommand } from "./adapters/execa/index.js";

  const result = await executeCommand("ls", ["-la"], { cwd: "/tmp" });
  if (result === "success") {
    console.log("Command executed successfully");
  } else {
    console.log("Command failed");
  }
  ```

- Updated dependencies [a088076]
  - @pagopa/monorepo-generator@0.11.2

## 0.11.1

### Patch Changes

- fb9caa2: Update dependencies
- Updated dependencies [c7421af]
- Updated dependencies [fb9caa2]
  - @pagopa/monorepo-generator@0.11.1

## 0.11.0

### Patch Changes

- bf456ea: Refactored CLI to work outside repository context for commands that don't require it.
  - The CLI no longer fails to start when run outside a Git repository
  - The `doctor` command now explicitly checks for repository context and returns a clear error message if not in a repository

- 9d4109c: Upgrade dependencies
- eb84990: Update README
- Updated dependencies [9d4109c]
- Updated dependencies [9d4109c]
- Updated dependencies [9d4109c]
  - @pagopa/monorepo-generator@0.11.0
  - @pagopa/dx-savemoney@0.1.4

## 0.10.3

### Patch Changes

- e8e1bd1: Fixed the `use-pnpm` logic bug that prevented the update of the legacy deployment workflows

## 0.10.2

### Patch Changes

- cfb975f: Update CLI README with Static Web App check in SaveMoney tool
- Updated dependencies [cfb975f]
  - @pagopa/dx-savemoney@0.1.3

## 0.10.1

### Patch Changes

- ccc9ff1: Update README for savemoney Container App
- 8d0d661: Remove `init` command feature flag

  Now, if you want to use the `init` command, you don't need to set any feature flag. Just run:

  ```bash
  npx @pagopa/dx-cli init project
  ```

  and follow the interactive prompts to create a new monorepo project.

- Updated dependencies [140a047]
- Updated dependencies [ccc9ff1]
  - @pagopa/monorepo-generator@0.10.1
  - @pagopa/dx-savemoney@0.1.2

## 0.10.0

### Minor Changes

- c23cddf: Remove version|v command. Use -V to get the cli version.

## 0.9.0

### Minor Changes

- d8e47d0: Add `dx savemoney` command to the DX CLI for analyzing Azure provider resources for cost optimization opportunities

### Patch Changes

- Updated dependencies [d8e47d0]
  - @pagopa/dx-savemoney@0.1.0

## 0.8.2

### Patch Changes

- 90ac56c: Fix regex in `use-pnpm` codemod

## 0.8.1

### Patch Changes

- d86e8d6: Add .pnpm-store to .gitignore
- 6e1ec37: Update `update-code-review` codemod to support the latest version of the workflow

## 0.8.0

### Patch Changes

- 2caf863: Remove `ENABLE_CODEMODS` feature flag
- 99516d2: `use-azure-appsvc` codemod now adds `permissions` to the updated GitHub Action workflow
- f989fa7: Add support for `npm`, migrate `packageExtensions`, use `workspace:` protocol
- Updated dependencies [13374c8]
- Updated dependencies [13374c8]
  - @pagopa/monorepo-generator@0.8.0

## 0.7.0

### Minor Changes

- eefc4d3: Add `use-pnpm` codemod to migrate a project from yarn to pnpm
- eefc4d3: Add `update-code-review` codemod to update the `js_code_review` workflow to the latest version
- eefc4d3: Add `use-azure-appsvc` codemod to migrate legacy deployment workflows

## 0.6.0

### Minor Changes

- fa4e825: Create the `init` command

  This command is going to be used to initialize a new project (a monorepo) using the DX CLI.

### Patch Changes

- Updated dependencies [051f215]
- Updated dependencies [155cb81]
- Updated dependencies [7171d9d]
- Updated dependencies [155cb81]
- Updated dependencies [f638ad6]
- Updated dependencies [38396b0]
- Updated dependencies [fa4e825]
- Updated dependencies [7171d9d]
  - @pagopa/monorepo-generator@0.6.0

## 0.5.0

### Minor Changes

- 8abeb56: Experimental: Add `codemod` command behind `ENABLE_CODEMODS` feature flag

## 0.4.4

### Patch Changes

- 2dbc275: Remove `DependencyName` type.

  At the moment we do not need to have a strong type to handle the name of a dependency; a simple string it is enough.

## 0.4.3

### Patch Changes

- 1278fca: When running the `info` command, if `turbo` is configured, it shows its version.
- 394f5aa: Verify the monorepo's workspaces

  When running the `doctor` command, the CLI will check the workspaces are properly configured.

## 0.4.2

### Patch Changes

- e4d46cb: Remove whitespaces from the `node` version printed in the `info` command.

## 0.4.1

### Patch Changes

- 9599934: Check the version of Node.JS, by checking the `.node-version` file in the root of the project.

  If the file does not exist, then it returns `undefined`.

- beadc6c: Remove `private` property from `package.json`.

  The CLI is going to be available as NPM package.

- eefa19c: Extract `readFile` function and add it to `RepositoryReader` interface
- 62c24ce: Check the version of Terraform, by checking the `.terraform-version` file in the root of the project.

## 0.4.0

### Minor Changes

- c1506a5: Show `packageManager` in `info` command

  This command should show some information about the project.
  For now, it prints the `packageManager` detected.

### Patch Changes

- bf472f4: Refactor on the `detectPackageManager` to improve readability
- f971dbd: Refactor the `doctor` command logic call the functions from the domain.

  The business logic hasn't changed.

- 9ce560b: Remove redundant functions

  Remove `existsPreCommitConfig`, `existsTurboConfig` and replace them with the `fileExists` function.

  Pass the `Config` object to `checkTurboConfig`, `checkPreCommitConfig` and `checkMonorepoScripts` where the repository root path is available.

  Remove the call to `findRepositoryRoot` in the `runDoctor` function, because the repository root path is passed in the `Config` object.

## 0.3.2

### Patch Changes

- 35645df: Convert the functions of the RepositoryReader interface to async

  This change was made to ensure all file system operations are handled asynchronously, improving performance and consistency across the codebase.

## 0.3.1

### Patch Changes

- 51fcd3b: Enhance CLI code

  Move some objects (and decoder) to the domain layer.
  Simplify assertions in the unit tests
  Extract a readFile function to favor reuse
  Set `node` engine minimum version to 22: we are using some new API introduced in Node v22

## 0.3.0

### Minor Changes

- 25f7786: Migrate to Node 22

## 0.2.2

### Patch Changes

- 2a6b261: Improve `doctor` command to verify `turbo` configuration

  When running the `doctor` command, the CLI now verifies that the `turbo.json` file exists and that the `turbo` version is valid.

## 0.2.1

### Patch Changes

- ce98aa8: Bump dependencies to fix a peerDependency warning

## 0.2.0

### Minor Changes

- 98738ac: Add `doctor` command

  The `doctor` command verifies the repository configuration.
  The first operation implemented is related to the monorepo scripts: it checks that the repository has the `npm` scripts used by the DX workflows.

### Patch Changes

- dfe8d6c: Improve `doctor` command to verify `pre-commit` configuration

  When running the `doctor` command, the CLI now verifies that the `.pre-commit-config.yaml` file exists.

## 0.1.2

### Patch Changes

- afee89d: Add `typecheck` script
- 5b31f4f: Upgrade to latest version of `@pagopa/eslint-config` package

## 0.1.1

### Patch Changes

- ecbe1d1: Load CLI version from package.json file during build time

## 0.1.0

### Minor Changes

- 318f695: Create DX CLI scaffold
